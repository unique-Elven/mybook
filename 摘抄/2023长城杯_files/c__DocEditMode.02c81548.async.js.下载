(window.webpackJsonp=window.webpackJsonp||[]).push([[1316],{3428:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var r=t(0),i=t.n(r),o=t(281),a=Object(o.b)((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(1311)]).then(t.bind(null,3715))}),{suspense:!0});function l(e){return i.a.createElement(a,e,e.children)}},4141:function(e,n,t){"use strict";var r=t(0);n.a=function(e,n){Object(r.useEffect)((function(){var t=new URLSearchParams(e.search);t.get("mode")&&(window.appData.useMode=t.get("mode"),n.push(e.pathname))}),[])}},4245:function(e,n,t){"use strict";var r=t(0),i=t.n(r),o=t(280);n.a=Object(o.b)((function(){return Object(r.useEffect)((function(){t.e(1435).then(t.bind(null,4692)),t.e(1435).then(t.bind(null,4693)),t.e(1435).then(t.bind(null,4694)),t.e(1435).then(t.bind(null,4695)),t.e(1435).then(t.bind(null,4696)),t.e(1435).then(t.bind(null,4697)),t.e(1435).then(t.bind(null,4698)),t.e(1435).then(t.bind(null,4699)),t.e(1435).then(t.bind(null,4700)),t.e(1435).then(t.bind(null,4701)),t.e(1435).then(t.bind(null,4702)),t.e(1435).then(t.bind(null,4703)),t.e(1435).then(t.bind(null,4704)),t.e(1435).then(t.bind(null,4705)),t.e(1435).then(t.bind(null,4706)),t.e(1435).then(t.bind(null,4707)),t.e(1435).then(t.bind(null,4708)),t.e(1435).then(t.bind(null,4709)),t.e(1435).then(t.bind(null,4710)),t.e(1435).then(t.bind(null,4711)),t.e(1435).then(t.bind(null,4712)),t.e(1435).then(t.bind(null,4713)),t.e(1435).then(t.bind(null,4714)),t.e(1435).then(t.bind(null,4715)),t.e(1435).then(t.bind(null,4716)),t.e(1435).then(t.bind(null,4717))})),i.a.createElement("span",null)}))},4502:function(e,n,t){"use strict";t(43);var r=t(10),i=t(0),o=t.n(i),a=t(4),l=t.n(a),u=t(1364),c="index-module_messageClose_2LMjD",d=function(e){var n=e.history;return Object(i.useEffect)((function(){var e=(n&&n.location&&n.location.query||{}).resource_id;if(e){var t,i=function(){t&&t(),window.history.replaceState({},document.title,window.location.pathname)},a=o.a.createElement("span",null,__("文件已转成语雀文件，原始文件请到 {history} 中查看。",{history:o.a.createElement("a",{onClick:function(){i(),window.open("/go/resource/".concat(e,"?history=1"),"_blank")}},__("历史版本"))}),o.a.createElement("span",{className:c,onClick:i},o.a.createElement(u.default,null)));t=r.a.warning(a,0)}}),[]),null};d.propTypes={history:l.a.object};n.a=d},6890:function(e,n,t){"use strict";t.d(n,"a",(function(){return B}));var r=t(0),i=t.n(r),o=t(281),a=t(3428),l=t(4502),u=t(4245),c=t(4141),d=t(4032),s=t(3691);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){p(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==b(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var m=[{icon:!1,keys:["E"],name:"edit",text:__("编辑文档")},{icon:!1,keys:["Command","Enter"],name:"publish",text:__("发布/更新")},{icon:!1,name:"hotkeyTips",keys:["opt","cmd","?"],text:__("快捷键面板")},{name:"save",keys:["cmd","S"],text:__("保存")}],g=[{type:"format",text:__("格式"),children:["formatPainter","clearFormat","h1","h2","h3","h4","h5","h6","paragraph","bold","italic","strikethrough","underline","fontsize","color","bgColor","sup","sub","alignmentLeft","alignmentCenter","alignmentRight","indent","outdent","lineHeight"]},{type:"insert",text:__("插入"),children:["card","orderedList","unorderedList","taskList","quote","math","code","codeblock","table","mention","link","image","hr","info","success","warning","danger","tips"]},{type:"table",text:__("表格"),children:["cellBgColor","mergeCell","verticalAlignTop","verticalAlignMiddle","verticalAlignBottom","toggleBorder"]},{type:"edit",text:__("编辑"),children:["undo","redo","save","paste","pasteText","openSearchPanel","openTranslatePanel","openLibrary","edit","publish","hotkeyTips"]}],y=m.reduce((function(e,n){return e[n.name]=n,e}),{});var v=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,n){return e[n.name]=n,e}),{});return g.map((function(n){return{type:n.type,text:n.text,children:n.children.map((function(n){return y[n]||e[n]})).filter((function(e){return!!e})).map((function(e){return f(f({},e),{},{icon:!1===e.icon?null:"editor-".concat(e.name)})}))}})).filter((function(e){return Array.isArray(e.children)&&e.children.length}))}(s.Hotkeys),O=(v.filter((function(e){return"document"!==e.type})),t(4061)),E=t(4674),j=t(837),w=t(3783),S=t(4),_=t.n(S),T=t(55),P=t.n(T),k=t(3793),C=t(1251),M=t(33),R=t(1254),L=t(3682),x=Object(o.b)((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(12),t.e(1355)]).then(t.bind(null,4992))}),{suspense:!0}),A=P()("editor:doc.ui");function D(e){var n=e.book,t=e.doc,o=e.group,a=e.theme,l=e.useEditorTileRendering,u=e.useEditorTileRenderingForOT,c=e.useEditorVirtualRenderingForOT,d=e.useEditorVirtualRendering,s=e.sidePanelManager,b=e.editType,h=e.editMode;A("render");var f=Object(r.useRef)(null),p=Object(C.b)();return i.a.createElement("div",{id:"lark-doc-edit-root",ref:f},i.a.createElement(x,{key:t.id,doc_id:t.id,doc:t,book:n,group:o,title:t.title,viewport:a.viewport,typography:a.typography,meta:R.a.getEditorMeta(t),onLoad:function(n,r){var i=new k.a(t,n,r);e.onEditorLoaded({engine:i})},onAutoSave:function(){e.onSave(L.h.AUTO)},onSave:e.onSave,onChange:e.onContentChange,onThemeChange:e.onThemeChange,onSaveTitle:e.onSaveTitle,onTitleChange:e.onTitleChange,getDefaultSuggestions:e.getDefaultSuggestions,onMentionSearch:e.onMentionSearch,useEditorTileRendering:l,useEditorTileRenderingForOT:u,useEditorVirtualRendering:d,useEditorVirtualRenderingForOT:c,fallbackLake:!0,hideThemeEditor:!0,globalSelectAll:e.globalSelectAll,focusOnLoaded:e.focusOnLoaded,placeholder:{tip:M.c&&!p?__("输入正文..."):__("直接输入正文，也可选择一个模板："),emptyParagraphTip:__("输入 / 唤起更多")},editMode:h,sidePanelManager:s,editType:b}))}D.defaultProps={globalSelectAll:!0},D.propTypes={doc:_.a.object.isRequired,book:_.a.object.isRequired,group:_.a.object.isRequired,theme:_.a.object.isRequired,onEditorLoaded:_.a.func,onSave:_.a.func,onSaveTitle:_.a.func,onTitleChange:_.a.func,onThemeChange:_.a.func,onContentChange:_.a.func,onPublish:_.a.func,getDefaultSuggestions:_.a.func,onMentionSearch:_.a.func,focusOnLoaded:_.a.bool,globalSelectAll:_.a.bool};var q=D;function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},F.apply(null,arguments)}var H=Object(j.a)({loader:function(){return Promise.all([t.e(0),t.e(1),t.e(9),t.e(17),t.e(1318)]).then(t.bind(null,6979))},loading:w.a}),N=Object(o.b)((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(10),t.e(1288)]).then(t.bind(null,6893))}),{suspense:!0}),V=Object(o.b)((function(){return Promise.all([t.e(4),t.e(5),t.e(6),t.e(0),t.e(1),t.e(1416)]).then(t.bind(null,6877))}),{suspense:!0});function B(e){var n=e.history,t=(e.app,e.editMode),o=e.sidePanelManager,s=e.className;Object(c.a)(window.location,n),Object(d.a)("pagename","doc_edit"),Object(O.b)(),Object(E.a)(),Object(O.a)();var b=Object(r.useCallback)((function(e){return i.a.createElement(q,F({},e,{sidePanelManager:o,editMode:t}))}),[o,t]),h=Object(r.useCallback)((function(e){return i.a.createElement(H,e)}),[]);return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(V,{hotKeys:v,hidable:!0,defaultOpen:!1,isEditor:!0}),i.a.createElement(N,{className:s,editMode:t,renderEditor:b,renderHistory:h,sidePanelManager:o})):i.a.createElement(a.a,{history:n,showSiteTip:!1,headless:!0},i.a.createElement(V,{hotKeys:v,hidable:!0,defaultOpen:!1,isEditor:!0}),i.a.createElement(N,{renderEditor:b,renderHistory:h}),i.a.createElement(l.a,{history:n}),i.a.createElement(u.a,null))}},8004:function(e,n,t){"use strict";t.r(n);var r=t(6890);n.default=function(e){return React.createElement(r.a,e)}}}]);