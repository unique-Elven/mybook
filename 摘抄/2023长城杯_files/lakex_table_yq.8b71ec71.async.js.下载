/*! For license information please see lakex_table_yq.8b71ec71.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4009:function(e,t,n){},4011:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"ActiveTableServiceToken",(function(){return loe})),n.d(t,"CommandService",(function(){return nR})),n.d(t,"ConfigurationToken",(function(){return lk})),n.d(t,"ContentEditorContribution",(function(){return X5e})),n.d(t,"ContentViewerContribution",(function(){return Z5e})),n.d(t,"FIELD_TYPE",(function(){return HC})),n.d(t,"FIELD_TYPE_CONFIGS",(function(){return GC})),n.d(t,"FULL_SCREEN_STATUS",(function(){return o3e})),n.d(t,"FullScreenService",(function(){return l3e})),n.d(t,"FullWidthService",(function(){return v3e})),n.d(t,"ModalServiceToken",(function(){return dye})),n.d(t,"ROW_HEIGHT",(function(){return nE})),n.d(t,"ReadService",(function(){return oA})),n.d(t,"RenderContextService",(function(){return doe})),n.d(t,"SearchService",(function(){return LFe})),n.d(t,"SelectionService",(function(){return nxe})),n.d(t,"ToolbarServiceToken",(function(){return xme})),n.d(t,"VIEW_TYPE",(function(){return sE})),n.d(t,"ViewerCalendarScrollService",(function(){return rNe})),n.d(t,"ViewerCardScrollService",(function(){return lMe})),n.d(t,"ViewerGridScrollService",(function(){return Pxe})),n.d(t,"ViewerKanbanScrollService",(function(){return ZMe})),n.d(t,"WIDTH_MODE",(function(){return c3e})),n.d(t,"createDocCardEditor",(function(){return mit})),n.d(t,"createDocCardEditorH5",(function(){return Dit})),n.d(t,"createForm",(function(){return iit})),n.d(t,"createStandardEditor",(function(){return pot})),n.d(t,"createStandardEditorH5",(function(){return Mot})),n.d(t,"createStandardReader",(function(){return Cot})),n.d(t,"isDate",(function(){return Xw})),n.d(t,"isDecimal",(function(){return V_})),n.d(t,"isMobilePhone",(function(){return Iit})),n.d(t,"isURL",(function(){return N_})),n.d(t,"uid",(function(){return qw})),n.d(t,"ymap",(function(){return nk}));n(4009);var o=n(15),i=n.n(o),a=n(0),u=n.n(a),l=n(80),c=n.n(l),s=n(12),d=n(70),f=n(104),p=n(542),v=n(10),h=n(135),g=n(171),m=n(8),y=n(31),b=n(515),w=n(340),_=n(40),k=n(225),C=n(229),E=n(21),O=n(1269),S=n(3762),x=n(34),j=n(379),D=n(101),A=n(402),R=n(245),F=n(6),I=n.n(F),P=n(1523),M=n(1521),T=n(1502),N=n(1514),B=n(1532),V=n(908),L=n(1373),z=n(1497),U=n(1488),H=n(1533),q=n(1642),W=n(1491),$=n(1506),G=n(1500),K=n(1518),Y=n(1534),J=n(1357),X=n(1535),Z=n(1536),Q=n(1537),ee=n(1538),te=n(1539),ne=n(1540),re=n(1525),oe=n(1526),ie=n(1527),ae=n(1541),ue=n(1542),le=n(1543),ce=n(1544),se=n(1545),de=n(1528),fe=n(1546),pe=n(1547),ve=n(1548),he=n(1519),ge=n(1549),me=n(1550),ye=n(1551),be=n(1496),we=n(1552),_e=n(1553),ke=n(1495),Ce=n(1522),Ee=n(1554),Oe=n(1555),Se=n(1529),xe=n(1556),je=n(1557),De=n(1558),Ae=n(1559),Re=n(1560),Fe=n(1561),Ie=n(1562),Pe=n(1563),Me=n(1507),Te=n(1512),Ne=n(1564),Be=n(1565),Ve=n(1566),Le=n(1567),ze=n(1375),Ue=n(1568),He=n(1569),qe=n(1570),We=n(1571),$e=n(1572),Ge=n(1573),Ke=n(1574),Ye=n(1575),Je=n(1576),Xe=n(1577),Ze=n(1578),Qe=n(1579),et=n(1580),tt=n(1581),nt=n(1582),rt=n(1583),ot=n(1584),it=n(1585),at=n(1586),ut=n(1587),lt=n(1588),ct=n(1589),st=n(1590),dt=n(1591),ft=n(1592),pt=n(1593),vt=n(1594),ht=n(1595),gt=n(1596),mt=n(1597),yt=n(1598),bt=n(1599),wt=n(1600),_t=n(1601),kt=n(1602),Ct=n(1603),Et=n(1604),Ot=n(1605),St=n(1606),xt=n(1607),jt=n(1608),Dt=n(1609),At=n(1610),Rt=n(1611),Ft=n(1612),It=n(1613),Pt=n(1355),Mt=n(1614),Tt=n(1615),Nt=n(1516),Bt=n(1517),Vt=n(1505),Lt=n(1530),zt=n(1616),Ut=n(1617),Ht=n(1618),qt=n(1619),Wt=n(1620),$t=n(1621),Gt=n(1622),Kt=n(1623),Yt=n(1624),Jt=n(1625),Xt=n(1626),Zt=n(1627),Qt=n(1628),en=n(1629),tn=n(1630),nn=n(1631),rn=n(1632),on=n(1633),an=n(1634),un=n(1635),ln=n(1636),cn=n(1637),sn=n(1515),dn=n(1531),fn=n(1638),pn=n(1259),vn=n(696),hn=n.n(vn),gn=n(184),mn=n(3477),yn=n(1486),bn=n.n(yn);const wn=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var _n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Cn(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var En,On,Sn={exports:{}},xn=Sn.exports={};function jn(){throw new Error("setTimeout has not been defined")}function Dn(){throw new Error("clearTimeout has not been defined")}function An(e){if(En===setTimeout)return setTimeout(e,0);if((En===jn||!En)&&setTimeout)return En=setTimeout,setTimeout(e,0);try{return En(e,0)}catch(t){try{return En.call(null,e,0)}catch(t){return En.call(this,e,0)}}}!function(){try{En="function"==typeof setTimeout?setTimeout:jn}catch(e){En=jn}try{On="function"==typeof clearTimeout?clearTimeout:Dn}catch(e){On=Dn}}();var Rn,Fn=[],In=!1,Pn=-1;function Mn(){In&&Rn&&(In=!1,Rn.length?Fn=Rn.concat(Fn):Pn=-1,Fn.length&&Tn())}function Tn(){if(!In){var e=An(Mn);In=!0;for(var t=Fn.length;t;){for(Rn=Fn,Fn=[];++Pn<t;)Rn&&Rn[Pn].run();Pn=-1,t=Fn.length}Rn=null,In=!1,function(e){if(On===clearTimeout)return clearTimeout(e);if((On===Dn||!On)&&clearTimeout)return On=clearTimeout,clearTimeout(e);try{return On(e)}catch(t){try{return On.call(null,e)}catch(t){return On.call(this,e)}}}(e)}}function Nn(e,t){this.fun=e,this.array=t}function Bn(){}xn.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Fn.push(new Nn(e,t)),1!==Fn.length||In||An(Tn)},Nn.prototype.run=function(){this.fun.apply(null,this.array)},xn.title="browser",xn.browser=!0,xn.env={},xn.argv=[],xn.version="",xn.versions={},xn.on=Bn,xn.addListener=Bn,xn.once=Bn,xn.off=Bn,xn.removeListener=Bn,xn.removeAllListeners=Bn,xn.emit=Bn,xn.prependListener=Bn,xn.prependOnceListener=Bn,xn.listeners=function(e){return[]},xn.binding=function(e){throw new Error("process.binding is not supported")},xn.cwd=function(){return"/"},xn.chdir=function(e){throw new Error("process.chdir is not supported")},xn.umask=function(){return 0};const Vn=kn(Sn.exports);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zn="object"==Ln(wn)&&wn&&wn.Object===Object&&wn,Un="object"==("undefined"==typeof self?"undefined":Ln(self))&&self&&self.Object===Object&&self,Hn=zn||Un||Function("return this")(),qn=Hn.Symbol,Wn=Object.prototype,$n=Wn.hasOwnProperty,Gn=Wn.toString,Kn=qn?qn.toStringTag:void 0;var Yn=Object.prototype.toString;var Jn="[object Null]",Xn="[object Undefined]",Zn=qn?qn.toStringTag:void 0;function Qn(e){return null==e?void 0===e?Xn:Jn:Zn&&Zn in Object(e)?function(e){var t=$n.call(e,Kn),n=e[Kn];try{e[Kn]=void 0;var r=!0}catch(e){}var o=Gn.call(e);return r&&(t?e[Kn]=n:delete e[Kn]),o}(e):function(e){return Yn.call(e)}(e)}function er(e){return null!=e&&"object"==Ln(e)}var tr="[object Symbol]";function nr(e){return"symbol"==Ln(e)||er(e)&&Qn(e)==tr}var rr=Array.isArray,or=1/0,ir=qn?qn.prototype:void 0,ar=ir?ir.toString:void 0;function ur(e){if("string"==typeof e)return e;if(rr(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,ur)+"";if(nr(e))return ar?ar.call(e):"";var t=e+"";return"0"==t&&1/e==-or?"-0":t}var lr=/\s/;var cr=/^\s+/;function sr(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&lr.test(e.charAt(t)););return t}(e)+1).replace(cr,""):e}function dr(e){var t=Ln(e);return null!=e&&("object"==t||"function"==t)}var fr=NaN,pr=/^[-+]0x[0-9a-f]+$/i,vr=/^0b[01]+$/i,hr=/^0o[0-7]+$/i,gr=parseInt;function mr(e){if("number"==typeof e)return e;if(nr(e))return fr;if(dr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=dr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=sr(e);var n=vr.test(e);return n||hr.test(e)?gr(e.slice(2),n?2:8):pr.test(e)?fr:+e}var yr=1/0,br=17976931348623157e292;function wr(e){var t=function(e){return e?(e=mr(e))===yr||e===-yr?(e<0?-1:1)*br:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function _r(e){return e}var kr="[object AsyncFunction]",Cr="[object Function]",Er="[object GeneratorFunction]",Or="[object Proxy]";function Sr(e){if(!dr(e))return!1;var t=Qn(e);return t==Cr||t==Er||t==kr||t==Or}var xr,jr=Hn["__core-js_shared__"],Dr=(xr=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||""))?"Symbol(src)_1."+xr:"";var Ar=Function.prototype.toString;function Rr(e){if(null!=e){try{return Ar.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Fr=/^\[object .+?Constructor\]$/,Ir=Function.prototype,Pr=Object.prototype,Mr=Ir.toString,Tr=Pr.hasOwnProperty,Nr=RegExp("^"+Mr.call(Tr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Br(e){return!(!dr(e)||(t=e,Dr&&Dr in t))&&(Sr(e)?Nr:Fr).test(Rr(e));var t}function Vr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Br(n)?n:void 0}var Lr=Vr(Hn,"WeakMap"),zr=Object.create,Ur=function(){function e(){}return function(t){if(!dr(t))return{};if(zr)return zr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Hr=Date.now;var qr,Wr,$r,Gr=function(){try{var e=Vr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kr=Gr?function(e,t){return Gr(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:_r,Yr=(qr=Kr,Wr=0,$r=0,function(){var e=Hr(),t=16-(e-$r);if($r=e,t>0){if(++Wr>=800)return arguments[0]}else Wr=0;return qr.apply(void 0,arguments)});function Jr(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Xr(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Zr(e){return e!=e}function Qr(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Xr(e,Zr,n)}(e,t,0)>-1}var eo=9007199254740991,to=/^(?:0|[1-9]\d*)$/;function no(e,t){var n=Ln(e);return!!(t=null==t?eo:t)&&("number"==n||"symbol"!=n&&to.test(e))&&e>-1&&e%1==0&&e<t}function ro(e,t,n){"__proto__"==t&&Gr?Gr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function oo(e,t){return e===t||e!=e&&t!=t}var io=Object.prototype.hasOwnProperty;function ao(e,t,n){var r=e[t];io.call(e,t)&&oo(r,n)&&(void 0!==n||t in e)||ro(e,t,n)}var uo=Math.max;function lo(e,t){return Yr(function(e,t,n){return t=uo(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=uo(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,u)}}(e,t,_r),e+"")}var co=9007199254740991;function so(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=co}function fo(e){return null!=e&&so(e.length)&&!Sr(e)}function po(e,t,n){if(!dr(n))return!1;var r=Ln(t);return!!("number"==r?fo(n)&&no(t,n.length):"string"==r&&t in n)&&oo(n[t],e)}var vo=Object.prototype;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vo)}function go(e){return er(e)&&"[object Arguments]"==Qn(e)}var mo=Object.prototype,yo=mo.hasOwnProperty,bo=mo.propertyIsEnumerable,wo=go(function(){return arguments}())?go:function(e){return er(e)&&yo.call(e,"callee")&&!bo.call(e,"callee")};var _o="object"==("undefined"==typeof exports?"undefined":Ln(exports))&&exports&&!exports.nodeType&&exports,ko=_o&&"object"==Ln(r)&&r&&!r.nodeType&&r,Co=ko&&ko.exports===_o?Hn.Buffer:void 0,Eo=(Co?Co.isBuffer:void 0)||function(){return!1},Oo={};Oo["[object Float32Array]"]=Oo["[object Float64Array]"]=Oo["[object Int8Array]"]=Oo["[object Int16Array]"]=Oo["[object Int32Array]"]=Oo["[object Uint8Array]"]=Oo["[object Uint8ClampedArray]"]=Oo["[object Uint16Array]"]=Oo["[object Uint32Array]"]=!0,Oo["[object Arguments]"]=Oo["[object Array]"]=Oo["[object ArrayBuffer]"]=Oo["[object Boolean]"]=Oo["[object DataView]"]=Oo["[object Date]"]=Oo["[object Error]"]=Oo["[object Function]"]=Oo["[object Map]"]=Oo["[object Number]"]=Oo["[object Object]"]=Oo["[object RegExp]"]=Oo["[object Set]"]=Oo["[object String]"]=Oo["[object WeakMap]"]=!1;var So="object"==("undefined"==typeof exports?"undefined":Ln(exports))&&exports&&!exports.nodeType&&exports,xo=So&&"object"==Ln(r)&&r&&!r.nodeType&&r,jo=xo&&xo.exports===So&&zn.process,Do=function(){try{var e=xo&&xo.require&&xo.require("util").types;return e||jo&&jo.binding&&jo.binding("util")}catch(e){}}(),Ao=Do&&Do.isTypedArray,Ro=Ao?function(e){return function(t){return e(t)}}(Ao):function(e){return er(e)&&so(e.length)&&!!Oo[Qn(e)]},Fo=Object.prototype.hasOwnProperty;function Io(e,t){var n=rr(e),r=!n&&wo(e),o=!n&&!r&&Eo(e),i=!n&&!r&&!o&&Ro(e),a=n||r||o||i,u=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=u.length;for(var c in e)!t&&!Fo.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||no(c,l))||u.push(c);return u}function Po(e,t){return function(n){return e(t(n))}}var Mo=Po(Object.keys,Object),To=Object.prototype.hasOwnProperty;function No(e){return fo(e)?Io(e):function(e){if(!ho(e))return Mo(e);var t=[];for(var n in Object(e))To.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var Bo=Object.prototype.hasOwnProperty;function Vo(e){if(!dr(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var r in e)("constructor"!=r||!t&&Bo.call(e,r))&&n.push(r);return n}function Lo(e){return fo(e)?Io(e,!0):Vo(e)}var zo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uo=/^\w*$/;function Ho(e,t){if(rr(e))return!1;var n=Ln(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nr(e))||(Uo.test(e)||!zo.test(e)||null!=t&&e in Object(t))}var qo=Vr(Object,"create");var Wo=Object.prototype.hasOwnProperty;var $o=Object.prototype.hasOwnProperty;function Go(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ko(e,t){for(var n=e.length;n--;)if(oo(e[n][0],t))return n;return-1}Go.prototype.clear=function(){this.__data__=qo?qo(null):{},this.size=0},Go.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Go.prototype.get=function(e){var t=this.__data__;if(qo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Wo.call(t,e)?t[e]:void 0},Go.prototype.has=function(e){var t=this.__data__;return qo?void 0!==t[e]:$o.call(t,e)},Go.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qo&&void 0===t?"__lodash_hash_undefined__":t,this};var Yo=Array.prototype.splice;function Jo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Jo.prototype.clear=function(){this.__data__=[],this.size=0},Jo.prototype.delete=function(e){var t=this.__data__,n=Ko(t,e);return!(n<0)&&(n==t.length-1?t.pop():Yo.call(t,n,1),--this.size,!0)},Jo.prototype.get=function(e){var t=this.__data__,n=Ko(t,e);return n<0?void 0:t[n][1]},Jo.prototype.has=function(e){return Ko(this.__data__,e)>-1},Jo.prototype.set=function(e,t){var n=this.__data__,r=Ko(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Xo=Vr(Hn,"Map");function Zo(e,t){var n,r,o=e.__data__;return("string"==(r=Ln(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Qo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Qo.prototype.clear=function(){this.size=0,this.__data__={hash:new Go,map:new(Xo||Jo),string:new Go}},Qo.prototype.delete=function(e){var t=Zo(this,e).delete(e);return this.size-=t?1:0,t},Qo.prototype.get=function(e){return Zo(this,e).get(e)},Qo.prototype.has=function(e){return Zo(this,e).has(e)},Qo.prototype.set=function(e,t){var n=Zo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ei="Expected a function";function ti(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ei);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ti.Cache||Qo),n}ti.Cache=Qo;var ni=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ri=/\\(\\)?/g,oi=function(e){var t=ti(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ni,(function(e,n,r,o){t.push(r?o.replace(ri,"$1"):n||e)})),t}));function ii(e){return null==e?"":ur(e)}function ai(e,t){return rr(e)?e:Ho(e,t)?[e]:oi(ii(e))}var ui=1/0;function li(e){if("string"==typeof e||nr(e))return e;var t=e+"";return"0"==t&&1/e==-ui?"-0":t}function ci(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[li(t[n++])];return n&&n==r?e:void 0}function si(e,t,n){var r=null==e?void 0:ci(e,t);return void 0===r?n:r}function di(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var fi=qn?qn.isConcatSpreadable:void 0;function pi(e){return rr(e)||wo(e)||!!(fi&&e&&e[fi])}function vi(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=pi),o||(o=[]);++i<a;){var u=e[i];n(u)?di(o,u):r||(o[o.length]=u)}return o}function hi(e){return(null==e?0:e.length)?vi(e):[]}var gi=Po(Object.getPrototypeOf,Object),mi="[object Object]",yi=Function.prototype,bi=Object.prototype,wi=yi.toString,_i=bi.hasOwnProperty,ki=wi.call(Object);function Ci(e){if(!er(e)||Qn(e)!=mi)return!1;var t=gi(e);if(null===t)return!0;var n=_i.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wi.call(n)==ki}function Ei(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}var Oi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Si(e){return Oi.test(e)}var xi="\\ud800-\\udfff",ji="["+xi+"]",Di="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ai="\\ud83c[\\udffb-\\udfff]",Ri="[^"+xi+"]",Fi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ii="[\\ud800-\\udbff][\\udc00-\\udfff]",Pi="(?:"+Di+"|"+Ai+")"+"?",Mi="[\\ufe0e\\ufe0f]?",Ti=Mi+Pi+("(?:\\u200d(?:"+[Ri,Fi,Ii].join("|")+")"+Mi+Pi+")*"),Ni="(?:"+[Ri+Di+"?",Di,Fi,Ii,ji].join("|")+")",Bi=RegExp(Ai+"(?="+Ai+")|"+Ni+Ti,"g");function Vi(e){return Si(e)?function(e){return e.match(Bi)||[]}(e):function(e){return e.split("")}(e)}var Li,zi=(Li="toUpperCase",function(e){var t,n,r,o,i=Si(e=ii(e))?Vi(e):void 0,a=i?i[0]:e.charAt(0),u=i?(t=i,n=1,o=t.length,r=void 0===r?o:r,!n&&r>=o?t:Ei(t,n,r)).join(""):e.slice(1);return a[Li]()+u}),Ui=Math.ceil,Hi=Math.max;function qi(e){var t=this.__data__=new Jo(e);this.size=t.size}qi.prototype.clear=function(){this.__data__=new Jo,this.size=0},qi.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},qi.prototype.get=function(e){return this.__data__.get(e)},qi.prototype.has=function(e){return this.__data__.has(e)},qi.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Jo){var r=n.__data__;if(!Xo||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qo(r)}return n.set(e,t),this.size=n.size,this};var Wi="object"==("undefined"==typeof exports?"undefined":Ln(exports))&&exports&&!exports.nodeType&&exports,$i=Wi&&"object"==Ln(r)&&r&&!r.nodeType&&r,Gi=$i&&$i.exports===Wi?Hn.Buffer:void 0;Gi&&Gi.allocUnsafe;var Ki=Object.prototype.propertyIsEnumerable,Yi=Object.getOwnPropertySymbols,Ji=Yi?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(Yi(e),(function(t){return Ki.call(e,t)})))}:function(){return[]};function Xi(e){return function(e,t,n){var r=t(e);return rr(e)?r:di(r,n(e))}(e,No,Ji)}var Zi=Vr(Hn,"DataView"),Qi=Vr(Hn,"Promise"),ea=Vr(Hn,"Set"),ta="[object Map]",na="[object Promise]",ra="[object Set]",oa="[object WeakMap]",ia="[object DataView]",aa=Rr(Zi),ua=Rr(Xo),la=Rr(Qi),ca=Rr(ea),sa=Rr(Lr),da=Qn;(Zi&&da(new Zi(new ArrayBuffer(1)))!=ia||Xo&&da(new Xo)!=ta||Qi&&da(Qi.resolve())!=na||ea&&da(new ea)!=ra||Lr&&da(new Lr)!=oa)&&(da=function(e){var t=Qn(e),n="[object Object]"==t?e.constructor:void 0,r=n?Rr(n):"";if(r)switch(r){case aa:return ia;case ua:return ta;case la:return na;case ca:return ra;case sa:return oa}return t});var fa=Hn.Uint8Array;function pa(e,t){var n,r,o=(n=e.buffer,r=new n.constructor(n.byteLength),new fa(r).set(new fa(n)),r);return new e.constructor(o,e.byteOffset,e.length)}function va(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Qo;++t<n;)this.add(e[t])}function ha(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ga(e,t){return e.has(t)}va.prototype.add=va.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},va.prototype.has=function(e){return this.__data__.has(e)};var ma=1,ya=2;function ba(e,t,n,r,o,i){var a=n&ma,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,p=n&ya?new va:void 0;for(i.set(e,t),i.set(t,e);++d<u;){var v=e[d],h=t[d];if(r)var g=a?r(h,v,d,t,e,i):r(v,h,d,e,t,i);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!ha(t,(function(e,t){if(!ga(p,t)&&(v===e||o(v,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(v!==h&&!o(v,h,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function wa(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function _a(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var ka=1,Ca=2,Ea="[object Boolean]",Oa="[object Date]",Sa="[object Error]",xa="[object Map]",ja="[object Number]",Da="[object RegExp]",Aa="[object Set]",Ra="[object String]",Fa="[object Symbol]",Ia="[object ArrayBuffer]",Pa="[object DataView]",Ma=qn?qn.prototype:void 0,Ta=Ma?Ma.valueOf:void 0;var Na=1,Ba=Object.prototype.hasOwnProperty;var Va=1,La="[object Arguments]",za="[object Array]",Ua="[object Object]",Ha=Object.prototype.hasOwnProperty;function qa(e,t,n,r,o,i){var a=rr(e),u=rr(t),l=a?za:da(e),c=u?za:da(t),s=(l=l==La?Ua:l)==Ua,d=(c=c==La?Ua:c)==Ua,f=l==c;if(f&&Eo(e)){if(!Eo(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new qi),a||Ro(e)?ba(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case Pa:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ia:return!(e.byteLength!=t.byteLength||!i(new fa(e),new fa(t)));case Ea:case Oa:case ja:return oo(+e,+t);case Sa:return e.name==t.name&&e.message==t.message;case Da:case Ra:return e==t+"";case xa:var u=wa;case Aa:var l=r&ka;if(u||(u=_a),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=Ca,a.set(e,t);var s=ba(u(e),u(t),r,o,i,a);return a.delete(e),s;case Fa:if(Ta)return Ta.call(e)==Ta.call(t)}return!1}(e,t,l,n,r,o,i);if(!(n&Va)){var p=s&&Ha.call(e,"__wrapped__"),v=d&&Ha.call(t,"__wrapped__");if(p||v){var h=p?e.value():e,g=v?t.value():t;return i||(i=new qi),o(h,g,n,r,i)}}return!!f&&(i||(i=new qi),function(e,t,n,r,o,i){var a=n&Na,u=Xi(e),l=u.length;if(l!=Xi(t).length&&!a)return!1;for(var c=l;c--;){var s=u[c];if(!(a?s in t:Ba.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<l;){var h=e[s=u[c]],g=t[s];if(r)var m=a?r(g,h,s,t,e,i):r(h,g,s,e,t,i);if(!(void 0===m?h===g||o(h,g,n,r,i):m)){p=!1;break}v||(v="constructor"==s)}if(p&&!v){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))}function Wa(e,t,n,r,o){return e===t||(null==e||null==t||!er(e)&&!er(t)?e!=e&&t!=t:qa(e,t,n,r,Wa,o))}var $a=1,Ga=2;function Ka(e){return e==e&&!dr(e)}function Ya(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Ja(e){var t=function(e){for(var t=No(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ka(o)]}return t}(e);return 1==t.length&&t[0][2]?Ya(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var o=n.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=n[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var u=(a=n[o])[0],l=e[u],c=a[1];if(a[2]){if(void 0===l&&!(u in e))return!1}else{var s=new qi;if(!Wa(c,l,$a|Ga,r,s))return!1}}return!0}(n,0,t)}}function Xa(e,t){return null!=e&&t in Object(e)}function Za(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=ai(t,e)).length,i=!1;++r<o;){var a=li(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&so(o)&&no(a,o)&&(rr(e)||wo(e))}(e,t,Xa)}var Qa=1,eu=2;function tu(e){return Ho(e)?(t=li(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ci(t,e)}}(e);var t}function nu(e){return"function"==typeof e?e:null==e?_r:"object"==Ln(e)?rr(e)?(t=e[0],n=e[1],Ho(t)&&Ka(n)?Ya(li(t),n):function(e){var r=si(e,t);return void 0===r&&r===n?Za(e,t):Wa(n,r,Qa|eu)}):Ja(e):tu(e);var t,n}function ru(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}var ou=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var u=i[++r];if(!1===t(o[u],u,o))break}return e};var iu,au=(iu=function(e,t){return e&&ou(e,t,No)},function(e,t){if(null==e)return e;if(!fo(e))return iu(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e});function uu(e,t,n,r){return au(e,(function(e,o,i){t(r,e,n(e),i)})),r}var lu=function(){return Hn.Date.now()},cu="Expected a function",su=Math.max,du=Math.min;function fu(e,t,n){var r,o,i,a,u,l,c=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(cu);function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function v(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function h(){var e=lu();if(v(e))return g(e);u=setTimeout(h,function(e){var n=t-(e-l);return d?du(n,i-(e-c)):n}(e))}function g(e){return u=void 0,f&&r?p(e):(r=o=void 0,a)}function m(){var e=lu(),n=v(e);if(r=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(h,t),s?p(e):a}(l);if(d)return clearTimeout(u),u=setTimeout(h,t),p(l)}return void 0===u&&(u=setTimeout(h,t)),a}return t=mr(t)||0,dr(n)&&(s=!!n.leading,i=(d="maxWait"in n)?su(mr(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==u&&clearTimeout(u),c=0,r=l=o=u=void 0},m.flush=function(){return void 0===u?a:g(lu())},m}function pu(e,t,n){(void 0!==n&&!oo(e[t],n)||void 0===n&&!(t in e))&&ro(e,t,n)}function vu(e){return er(e)&&fo(e)}function hu(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function gu(e){return function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],l=void 0;void 0===l&&(l=e[u]),o?ro(n,u,l):ao(n,u,l)}return n}(e,Lo(e))}function mu(e,t,n,r,o,i,a){var u=hu(e,n),l=hu(t,n),c=a.get(l);if(c)pu(e,n,c);else{var s=i?i(u,l,n+"",e,t,a):void 0,d=void 0===s;if(d){var f=rr(l),p=!f&&Eo(l),v=!f&&!p&&Ro(l);s=l,f||p||v?rr(u)?s=u:vu(u)?s=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(u):p?(d=!1,s=l.slice()):v?(d=!1,s=pa(l)):s=[]:Ci(l)||wo(l)?(s=u,wo(u)?s=gu(u):dr(u)&&!Sr(u)||(s=function(e){return"function"!=typeof e.constructor||ho(e)?{}:Ur(gi(e))}(l))):d=!1}d&&(a.set(l,s),o(s,l,r,i,a),a.delete(l)),pu(e,n,s)}}function yu(e,t,n,r,o){e!==t&&ou(t,(function(i,a){if(o||(o=new qi),dr(i))mu(e,t,a,n,yu,r,o);else{var u=r?r(hu(e,a),i,a+"",e,t,o):void 0;void 0===u&&(u=i),pu(e,a,u)}}),Lo)}function bu(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}var wu=lo((function(e,t){return vu(e)?function(e,t,n,r){var o=-1,i=Qr,a=!0,u=e.length,l=[],c=t.length;if(!u)return l;t.length>=200&&(i=ga,a=!1,t=new va(t));e:for(;++o<u;){var s=e[o],d=s;if(s=0!==s?s:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;l.push(s)}else i(t,d,r)||l.push(s)}return l}(e,vi(t,0,vu,!0)):[]}));function _u(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function ku(e,t){var n;return(rr(e)?Jr:au)(e,"function"==typeof(n=t)?n:_r)}function Cu(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Eu(e,t){var n=!0;return au(e,(function(e,r,o){return n=!!t(e,r,o)})),n}var Ou=Math.max,Su=Math.min;var xu,ju,Du,Au=(xu=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=wr(n),o=n<0?Ou(r+o,0):Su(o,r-1)),Xr(e,nu(t),o,!0)},function(e,t,n){var r=Object(e);if(!fo(e)){var o=nu(t);e=No(e),t=function(e){return o(r[e],e,r)}}var i=xu(e,t,n);return i>-1?r[o?e[i]:i]:void 0}),Ru=Object.prototype.hasOwnProperty,Fu=(ju=function(e,t,n){Ru.call(e,n)?e[n].push(t):ro(e,n,[t])},function(e,t){var n=rr(e)?ru:uu,r=Du?Du():{};return n(e,ju,nu(t),r)});function Iu(e){return"string"==typeof e||!rr(e)&&er(e)&&"[object String]"==Qn(e)}function Pu(e){return!0===e||!1===e||er(e)&&"[object Boolean]"==Qn(e)}function Mu(e,t){return Wa(e,t)}var Tu="[object Number]";function Nu(e){return function(e){return"number"==typeof e||er(e)&&Qn(e)==Tu}(e)&&e!=+e}function Bu(e){return null==e}function Vu(e){return void 0===e}var Lu,zu=(Lu=function(e,t,n){yu(e,t,n)},lo((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(o=Lu.length>3&&"function"==typeof o?(r--,o):void 0,i&&po(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&Lu(e,a,n,o)}return e})));function Uu(e,t){return null==(e=function(e,t){return t.length<2?e:ci(e,Ei(t,0,-1))}(e,t=ai(t,e)))||delete e[li(_u(t))]}var Hu=Array.prototype.splice;function qu(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=nu(t);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;no(o)?Hu.call(e,o,1):Uu(e,o)}}}(e,o),n}function Wu(e,t,n){return null==e?e:function(e,t,n,r){if(!dr(e))return e;for(var o=-1,i=(t=ai(t,e)).length,a=i-1,u=e;null!=u&&++o<i;){var l=li(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var s=u[l];void 0===(c=void 0)&&(c=dr(s)?s:no(t[o+1])?[]:{})}ao(u,l,c),u=u[l]}return e}(e,t,n)}var $u=ea&&1/_a(new ea([,-0]))[1]==1/0?function(e){return new ea(e)}:function(){},Gu=200;function Ku(e,t,n){var r=-1,o=Qr,i=e.length,a=!0,u=[],l=u;if(n)a=!1,o=bu;else if(i>=Gu){var c=t?null:$u(e);if(c)return _a(c);a=!1,o=ga,l=new va}else l=t?[]:u;e:for(;++r<i;){var s=e[r],d=t?t(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),u.push(s)}else o(l,d,n)||(l!==u&&l.push(d),u.push(s))}return u}var Yu=lo((function(e){var t=_u(e);return vu(t)&&(t=void 0),Ku(vi(e,0,vu,!0),nu(t))}));function Ju(e){return e&&e.length?Ku(e):[]}function Xu(e,t){return e&&e.length?Ku(e,nu(t)):[]}function Zu(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ku(e,void 0,t):[]}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function el(e,t){if(e){if("string"==typeof e)return Qu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qu(e,t):void 0}}function tl(e){return function(e){if(Array.isArray(e))return Qu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||el(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function rl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nl(i,r,o,a,u,"next",e)}function u(e){nl(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ol(e){var t=function(e,t){if("object"!=Ln(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ln(t)?t:t+""}function il(e,t,n){return(t=ol(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const al=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"}));function ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ol(r.key),r)}}function ll(e,t,n){return t&&ul(e.prototype,t),n&&ul(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}const cl=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"}));function sl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const dl=Object.freeze(Object.defineProperty({__proto__:null,default:sl},Symbol.toStringTag,{value:"Module"}));var fl={exports:{}},pl={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(pl);var vl=pl.exports;!function(e){var t=vl.default;function n(){e.exports=n=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var r,o={},i=Object.prototype,a=i.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new I(r||[]);return u(i,"_invoke",{value:D(e,n,a)}),i}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var h="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function k(){}var C={};f(C,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(P([])));O&&O!==i&&a.call(O,c)&&(C=O);var S=k.prototype=w.prototype=Object.create(C);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,n){function r(o,i,u,l){var c=v(e[o],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):n.resolve(d).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var o;u(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function D(e,t,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=v(e,t,n);if("normal"===c.type){if(o=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=v(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=k,u(S,"constructor",{value:k,configurable:!0}),u(k,"constructor",{value:_,configurable:!0}),_.displayName=f(k,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},o.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,s,(function(){return this})),o.AsyncIterator=j,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new j(p(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,d,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},o.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return u.type="throw",u.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(fl);var hl=(0,fl.exports)(),gl=hl;try{regeneratorRuntime=hl}catch(e){"object"===("undefined"==typeof globalThis?"undefined":Ln(globalThis))?globalThis.regeneratorRuntime=hl:Function("r","regeneratorRuntime = r")(hl)}const ml=kn(gl);function yl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bl(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kl="named",Cl="name",El="unmanaged",Ol="optional",Sl="inject",xl="multi_inject",jl="inversify:tagged",Dl="inversify:tagged_props",Al="inversify:paramtypes",Rl="design:paramtypes",Fl="post_construct",Il="pre_destroy";var Pl=[Sl,xl,Cl,El,kl,Ol],Ml={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Tl={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Nl={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},Bl=0;function Vl(){return Bl++}var Ll=function(){function e(e,t){this.id=Vl(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=Tl.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===Ml.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),zl="Cannot apply @injectable decorator multiple times.",Ul="Metadata key was used more than once in a parameter:",Hl="NULL argument",ql="Key Not Found",Wl="Ambiguous match found for serviceIdentifier:",$l="No matching bindings found for serviceIdentifier:",Gl="Missing required @injectable annotation in:",Kl="Missing required @inject or @multiInject annotation in:",Yl="Circular dependency found:",Jl="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Xl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+"".concat(e[0]," must be >= than the number of constructor arguments of its base class.")},Zl=function(e,t){return"@postConstruct error in class ".concat(e,": ").concat(t)},Ql=function(e,t){return"@preDestroy error in class ".concat(e,": ").concat(t)},ec=function(e,t){return"onDeactivation() error in class ".concat(e,": ").concat(t)},tc="Maximum call stack size exceeded",nc=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(Al,e),userGeneratedMetadata:Reflect.getMetadata(jl,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(Dl,e)||[]},e}(),rc={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function oc(e){return e instanceof RangeError||e.message===tc}function ic(e){return"function"==typeof e?e.name:"symbol"==Ln(e)?e.toString():e}function ac(e,t,n){var r="",o=n(e,t);return 0!==o.length&&(r="\nRegistered bindings:",o.forEach((function(e){var t="Object";null!==e.implementationType&&(t=cc(e.implementationType)),r="".concat(r,"\n ").concat(t),e.constraint.metaData&&(r="".concat(r," - ").concat(e.constraint.metaData))}))),r}function uc(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||uc(e.parentRequest,t))}function lc(e){e.childRequests.forEach((function(e){if(uc(e,e.serviceIdentifier)){var t=function(e){var t=function e(t,n){void 0===n&&(n=[]);var r=ic(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(e);throw new Error("".concat(Yl," ").concat(t))}lc(e)}))}function cc(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: ".concat(t)}var sc=function(){function e(e){this.id=Vl(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),dc=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===kl?"named: ".concat(String(this.value).toString()," "):"tagged: { key:".concat(this.key.toString(),", value: ").concat(String(this.value)," }")},e}(),fc=function(){return function(e,t){this.parentContext=e,this.rootRequest=t}}(),pc=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),vc=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),hc=function(){function e(e,t,n,r){this.id=Vl(),this.type=e,this.serviceIdentifier=n;var o="symbol"==Ln(t)?function(e){return e.toString().slice(7,-1)}(t):t;this.name=new vc(o||""),this.identifier=t,this.metadata=new Array;var i=null;"string"==typeof r?i=new dc(kl,r):r instanceof dc&&(i=r),null!==i&&this.metadata.push(i)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(xl)},e.prototype.matchesArray=function(e){return this.matchesTag(xl)(e)},e.prototype.isNamed=function(){return this.hasTag(kl)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return Pl.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(Ol)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===kl}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return Pl.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(kl)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,o=t.metadata;r<o.length;r++){var i=o[r];if(i.key===e&&i.value===n)return!0}return!1}},e}(),gc=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function mc(e,t,n,r){var o=e.getConstructorMetadata(n),i=o.compilerGeneratedMetadata;if(void 0===i){var a="".concat(Gl," ").concat(t,".");throw new Error(a)}var u=o.userGeneratedMetadata,l=Object.keys(u),c=0===n.length&&l.length>0,s=l.length>n.length,d=function(e,t,n,r,o){for(var i=[],a=0;a<o;a++){var u=yc(a,e,t,n,r);null!==u&&i.push(u)}return i}(r,t,i,u,c||s?l.length:n.length),f=wc(e,n,t);return gc(gc([],d,!0),f,!0)}function yc(e,t,n,r,o){var i=o[e.toString()]||[],a=kc(i),u=!0!==a.unmanaged,l=r[e];if((l=a.inject||a.multiInject||l)instanceof pc&&(l=l.unwrap()),u){if(!t&&(l===Object||l===Function||void 0===l)){var c="".concat(Kl," argument ").concat(e," in class ").concat(n,".");throw new Error(c)}var s=new hc(Nl.ConstructorArgument,a.targetName,l);return s.metadata=i,s}return null}function bc(e,t,n,r){var o=e||t;if(void 0===o){var i="".concat(Gl," for property ").concat(String(n)," in class ").concat(r,".");throw new Error(i)}return o}function wc(e,t,n){for(var r=e.getPropertiesMetadata(t),o=[],i=Object.getOwnPropertySymbols(r),a=0,u=Object.keys(r).concat(i);a<u.length;a++){var l=u[a],c=r[l],s=kc(c),d=s.targetName||l,f=bc(s.inject,s.multiInject,l,n),p=new hc(Nl.ClassProperty,d,f);p.metadata=c,o.push(p)}var v=Object.getPrototypeOf(t.prototype).constructor;if(v!==Object){var h=wc(e,v,n);o=gc(gc([],o,!0),h,!0)}return o}function _c(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=mc(e,cc(n),n,!0),o=r.map((function(e){return e.metadata.filter((function(e){return e.key===El}))})),i=[].concat.apply([],o).length,a=r.length-i;return a>0?a:_c(e,n)}return 0}function kc(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[Sl],multiInject:t[xl],targetName:t[Cl],unmanaged:t[El]}}var Cc=function(){function e(e,t,n,r,o){this.id=Vl(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var o=new e(t,this.parentContext,this,n,r);return this.childRequests.push(o),o},e}();function Ec(e){return e._bindingDictionary}function Oc(e,t,n,r,o){var i=xc(n.container,o.serviceIdentifier),a=[];return i.length===rc.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),i=xc(n.container,o.serviceIdentifier)),a=t?i:i.filter((function(e){var t=new Cc(e.serviceIdentifier,n,r,e,o);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case rc.NoBindingsAvailable:if(n.isOptional())return t;var o=ic(e),i=$l;throw i+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),o=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==o&&o.forEach((function(e){n+=e.toString()+"\n"}))," ".concat(e,"\n ").concat(e," - ").concat(n)}return" ".concat(e)}(o,n),i+=ac(r,o,xc),new Error(i);case rc.OnlyOneBindingAvailable:return t;case rc.MultipleBindingsAvailable:default:if(n.isArray())return t;o=ic(e),i="".concat(Wl," ").concat(o);throw i+=ac(r,o,xc),new Error(i)}}(o.serviceIdentifier,a,o,n.container),a}function Sc(e,t,n,r,o,i){var a,u;if(null===o){a=Oc(e,t,r,null,i),u=new Cc(n,r,null,a,i);var l=new fc(r,u);r.addPlan(l)}else a=Oc(e,t,r,o,i),u=o.addChildRequest(i.serviceIdentifier,a,i);a.forEach((function(t){var n=null;if(i.isArray())n=u.addChildRequest(t.serviceIdentifier,t,i);else{if(t.cache)return;n=u}if(t.type===Tl.Instance&&null!==t.implementationType){var o=function(e,t){return mc(e,cc(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var a=_c(e,t.implementationType);if(o.length<a){var l=Xl(cc(t.implementationType));throw new Error(l)}}o.forEach((function(t){Sc(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function xc(e,t){var n=[],r=Ec(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=xc(e.parent,t)),n}function jc(e,t,n,r,o,i,a,u){void 0===u&&(u=!1);var l=new sc(t),c=function(e,t,n,r,o,i){var a=new dc(e?xl:Sl,n),u=new hc(t,r,n,a);if(void 0!==o){var l=new dc(o,i);u.metadata.push(l)}return u}(n,r,o,"",i,a);try{return Sc(e,u,o,l,null,c),l}catch(e){throw oc(e)&&lc(l.plan.rootRequest),e}}function Dc(e){return("object"==Ln(e)&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function Ac(e){return!!Dc(e)||Array.isArray(e)&&e.some(Dc)}var Rc,Fc,Ic=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,u)}l((r=r.apply(e,t||[])).next())}))},Pc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Mc=function(e,t,n){e.has(t.id)||e.set(t.id,n)},Tc=function(e,t){e.cache=t,e.activated=!0,Dc(t)&&Nc(e,t)},Nc=function(e,t){return Ic(void 0,void 0,void 0,(function(){var n,r;return Pc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t];case 1:return n=o.sent(),e.cache=n,[3,3];case 2:throw r=o.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))}))};(Fc=Rc||(Rc={})).DynamicValue="toDynamicValue",Fc.Factory="toFactory",Fc.Provider="toProvider";var Bc=globalThis&&globalThis.__assign||function(){return Bc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bc.apply(this,arguments)},Vc=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,u)}l((r=r.apply(e,t||[])).next())}))},Lc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},zc=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function Uc(e,t,n){var r;if(t.length>0){var o=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===Nl.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=Ac(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),i=Bc(Bc({},o),{constr:e});r=o.isAsync?function(e){return Vc(this,void 0,void 0,(function(){var t,n;return Lc(this,(function(r){switch(r.label){case 0:return[4,qc(e.constructorInjections)];case 1:return t=r.sent(),[4,qc(e.propertyInjections)];case 2:return n=r.sent(),[2,Hc(Bc(Bc({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(i):Hc(i)}else r=new e;return r}function Hc(e){var t,n=new((t=e.constr).bind.apply(t,zc([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var o=t.target.identifier,i=e.propertyInjections[r];n[o]=i})),n}function qc(e){return Vc(this,void 0,void 0,(function(){var t,n,r,o;return Lc(this,(function(i){for(t=[],n=0,r=e;n<r.length;n++)o=r[n],Array.isArray(o)?t.push(Promise.all(o)):t.push(o);return[2,Promise.all(t)]}))}))}function Wc(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(Fl,e)){var o=Reflect.getMetadata(Fl,e);try{return null===(r=(n=t)[o.value])||void 0===r?void 0:r.call(n)}catch(t){if(t instanceof Error)throw new Error(Zl(e.name,t.message))}}}(e,t);return Dc(n)?n.then((function(){return t})):t}function $c(e,t){e.scope!==Ml.Singleton&&function(e,t){var n="Class cannot be instantiated in ".concat(e.scope===Ml.Request?"request":"transient"," scope.");if("function"==typeof e.onDeactivation)throw new Error(ec(t.name,n));if(Reflect.hasMetadata(Il,t))throw new Error(Ql(t.name,n))}(e,t)}var Gc=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,u)}l((r=r.apply(e,t||[])).next())}))},Kc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Yc=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,o=t.target&&t.target.isArray(),i=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(o&&i)return r.map((function(t){return Yc(e)(t)}));if(!t.target.isOptional()||0!==n.length){var a=n[0];return Qc(e,t,a)}}},Jc=function(e,t){var n=function(e){switch(e.type){case Tl.Factory:return{factory:e.factory,factoryType:Rc.Factory};case Tl.Provider:return{factory:e.provider,factoryType:Rc.Provider};case Tl.DynamicValue:return{factory:e.dynamicValue,factoryType:Rc.DynamicValue};default:throw new Error("Unexpected factory type ".concat(e.type))}}(e);return function(e,t){try{return e()}catch(e){throw oc(e)&&(e=t()),e}}((function(){return n.factory.bind(e)(t)}),(function(){return new Error(function(e,t){return"It looks like there is a circular dependency in one of the '".concat(e,"' bindings. Please investigate bindings with ")+"service identifier '".concat(t,"'.")}(n.factoryType,t.currentRequest.serviceIdentifier.toString()))}))},Xc=function(e,t,n){var r,o=t.childRequests;switch(function(e){var t=null;switch(e.type){case Tl.ConstantValue:case Tl.Function:t=e.cache;break;case Tl.Constructor:case Tl.Instance:t=e.implementationType;break;case Tl.DynamicValue:t=e.dynamicValue;break;case Tl.Provider:t=e.provider;break;case Tl.Factory:t=e.factory}if(null===t){var n=ic(e.serviceIdentifier);throw new Error("".concat("Invalid binding type:"," ").concat(n))}}(n),n.type){case Tl.ConstantValue:case Tl.Function:r=n.cache;break;case Tl.Constructor:r=n.implementationType;break;case Tl.Instance:r=function(e,t,n,r){$c(e,t);var o=Uc(t,n,r);return Dc(o)?o.then((function(e){return Wc(t,e)})):Wc(t,o)}(n,n.implementationType,o,Yc(e));break;default:r=Jc(n,t.parentContext)}return r},Zc=function(e,t,n){var r=function(e,t){return t.scope===Ml.Singleton&&t.activated?t.cache:t.scope===Ml.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===Ml.Singleton&&Tc(t,n),t.scope===Ml.Request&&Mc(e,t,n)}(e,t,r=n()),r},Qc=function(e,t,n){return Zc(e,n,(function(){var r=Xc(e,t,n);return r=Dc(r)?r.then((function(e){return es(t,n,e)})):es(t,n,r),r}))};function es(e,t,n){var r,o=ts(e.parentContext,t,n),i=is(e.parentContext.container),a=i.next();do{r=a.value;var u=e.parentContext,l=e.serviceIdentifier,c=os(r,l);o=Dc(o)?rs(c,u,o):ns(c,u,o),a=i.next()}while(!0!==a.done&&!Ec(r).hasKey(e.serviceIdentifier));return o}var ts=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},ns=function(e,t,n){for(var r=e.next();!r.done;){if(Dc(n=r.value(t,n)))return rs(e,t,n);r=e.next()}return n},rs=function(e,t,n){return Gc(void 0,void 0,void 0,(function(){var r,o;return Kc(this,(function(i){switch(i.label){case 0:return[4,n];case 1:r=i.sent(),o=e.next(),i.label=2;case 2:return o.done?[3,4]:[4,o.value(t,r)];case 3:return r=i.sent(),o=e.next(),[3,2];case 4:return[2,r]}}))}))},os=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},is=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};var as=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||as(n,t))},us=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new dc(e,t),n}},ls=us(kl),cs=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},ss=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new ds(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=ls(e),new ds(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged())},new ds(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=us(e)(t),new ds(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&cs(e)(t.parentRequest)},new ds(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&ls(e)(t.parentRequest)},new ds(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&us(e)(t)(n.parentRequest)},new ds(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&as(t,cs(e))},new ds(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!as(t,cs(e))},new ds(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&as(t,ls(e))},new ds(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!as(t,ls(e))},new ds(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&as(n,us(e)(t))},new ds(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!as(n,us(e)(t))},new ds(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&as(t,e)},new ds(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!as(t,e)},new ds(this._binding)},e}(),ds=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new ss(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new ss(this._binding)},e}(),fs=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new ss(this._binding),this._bindingOnSyntax=new ds(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),ps=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=Ml.Request,new fs(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=Ml.Transient,new fs(this._binding)},e}(),vs=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new ss(this._binding),this._bindingOnSyntax=new ds(this._binding),this._bindingInSyntax=new ps(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),hs=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=Tl.Instance,this._binding.implementationType=e,new vs(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("".concat("The toSelf function can only be applied when a constructor is used as service identifier"));var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=Tl.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=Tl.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new vs(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=Tl.Constructor,this._binding.implementationType=e,this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=Tl.Factory,this._binding.factory=e,this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=Tl.Function,this._binding.scope=Ml.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=Tl.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=Tl.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new fs(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=Tl.Provider,this._binding.provider=e,this._binding.scope=Ml.Singleton,new fs(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),gs=function(){function e(){}return e.of=function(t,n,r,o,i){var a=new e;return a.bindings=t,a.middleware=n,a.deactivations=o,a.activations=r,a.moduleActivationStore=i,a},e}();var ms=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(Hl);if(null==t)throw new Error(Hl);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(Hl);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(ql)},e.prototype.remove=function(e){if(null==e)throw new Error(Hl);if(!this._map.delete(e))throw new Error(ql)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var o=e.hasKey(n)?e.get(n):void 0;if(void 0!==o){var i=r.filter((function(e){return!o.some((function(t){return e===t}))}));t._setValue(n,i)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,o){for(var i=[],a=0,u=r;a<u.length;a++){var l=u[a];e(l)?n.push(l):i.push(l)}t._setValue(o,i)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(Hl);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,function(e){return"object"==Ln(e)&&null!==e&&"clone"in e&&"function"==typeof e.clone}(e)?e.clone():e)}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),ys=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new ms,onDeactivations:new ms}},e}(),bs=globalThis&&globalThis.__assign||function(){return bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bs.apply(this,arguments)},ws=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,u)}l((r=r.apply(e,t||[])).next())}))},_s=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},ks=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Cs=function(){function e(e){var t=e||{};if("object"!=Ln(t))throw new Error("".concat("Invalid Container constructor argument. Container options must be an object."));if(void 0===t.defaultScope)t.defaultScope=Ml.Transient;else if(t.defaultScope!==Ml.Singleton&&t.defaultScope!==Ml.Transient&&t.defaultScope!==Ml.Request)throw new Error("".concat('Invalid Container option. Default scope must be a string ("singleton" or "transient").'));if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("".concat("Invalid Container option. Auto bind injectable must be a boolean"));if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("".concat("Invalid Container option. Skip base check must be a boolean"));this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=Vl(),this._bindingDictionary=new ms,this._snapshots=[],this._middleware=null,this._activations=new ms,this._deactivations=new ms,this.parent=null,this._metadataReader=new nc,this._moduleActivationStore=new ys}return e.merge=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=new e,a=ks([t,n],r,!0).map((function(e){return Ec(e)})),u=Ec(i);return a.forEach((function(e){!function(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}(e,u)})),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=e;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ws(this,void 0,void 0,(function(){var t,n,r,o,i;return _s(this,(function(a){switch(a.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,a.label=1;case 1:return n<r.length?(o=r[n],i=t(o.id),[4,o.registry(i.bindFunction,i.unbindFunction,i.isboundFunction,i.rebindFunction,i.unbindAsyncFunction,i.onActivationFunction,i.onDeactivationFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ws(this,void 0,void 0,(function(){var t,n,r,o;return _s(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?(r=n[t],o=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(o)]):[3,4];case 2:i.sent(),this._removeModuleHandlers(r.id),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||Ml.Transient,n=new Ll(e,t);return this._bindingDictionary.add(e,n),new hs(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return ws(this,void 0,void 0,(function(){return _s(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return ws(this,void 0,void 0,(function(){var t;return _s(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new ms},e.prototype.unbindAllAsync=function(){return ws(this,void 0,void 0,(function(){var e,t=this;return _s(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new ms,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,kl,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),i=function(e,t,n,r){var o=new hc(Nl.Variable,"",t,new dc(n,r)),i=new sc(e);return new Cc(t,i,null,[],o)}(this,e,t,n);r=o.some((function(e){return e.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(gs.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return ws(this,void 0,void 0,(function(){var t;return _s(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return ws(this,void 0,void 0,(function(){var r;return _s(this,(function(o){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,kl,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,kl,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,kl,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,kl,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){var n,r;if(Reflect.hasMetadata(Il,e))return null===(r=(n=t)[Reflect.getMetadata(Il,e).value])||void 0===r?void 0:r.call(n)},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(Dc(o))return this._handleDeactivationError(o.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var i=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(Dc(i))return this._handleDeactivationError(i,r)}catch(e){if(e instanceof Error)throw new Error(ec(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return ws(this,void 0,void 0,(function(){var n;return _s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:if((n=r.sent())instanceof Error)throw new Error(ec(t.name,n.message));return[3,3];case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var o=r.value(e);if(Dc(o))return o.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return ws(this,void 0,void 0,(function(){var n;return _s(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var o=e.bind(r);return t(o,n),o}},r=function(n){return function(r){var o=e.rebind(r);return t(o,n),o}},o=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},i=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(t){return{bindFunction:n(t),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:o(t),onDeactivationFunction:i(t),rebindFunction:r(t),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}}}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=bs(bs({},e),{contextInterceptor:function(e){return e},targetType:Nl.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(Ac(t))throw new Error(function(e){return"You are attempting to construct '".concat(e,"' in a synchronous way\n but it has asynchronous dependencies.")}(e.serviceIdentifier));return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=jc(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints),r=function(e){return Yc(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n));return r}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return Dc(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(Dc(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return ws(this,void 0,void 0,(function(){var t=this;return _s(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return ws(this,void 0,void 0,(function(){return _s(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("".concat("Could not unbind serviceIdentifier:"," ").concat(ic(e)))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var o=e.onDeactivation(t);if(Dc(o))return o.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return ws(this,void 0,void 0,(function(){return _s(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}(),Es=function(){return function(e){this.id=Vl(),this.registry=e}}();function Os(e,t,n,r){(function(e){if(void 0!==e)throw new Error(Jl)})(t),xs(jl,e,n.toString(),r)}function Ss(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var o=r[n];if(t.has(o))return o;t.add(o)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error("".concat(Ul," ").concat(n.toString()))}else t=[e];return t}function xs(e,t,n,r){var o=Ss(r),i={};Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var a=i[n];if(void 0===a)a=[];else for(var u=function(e){if(o.some((function(t){return t.key===e.key})))throw new Error("".concat(Ul," ").concat(e.key.toString()))},l=0,c=a;l<c.length;l++){u(c[l])}a.push.apply(a,o),i[n]=a,Reflect.defineMetadata(e,i,t)}function js(e){return function(t,n,r){"number"==typeof r?Os(t,n,r,e):function(e,t,n){if(function(e){return void 0!==e.prototype}(e))throw new Error(Jl);xs(Dl,e.constructor,t,n)}(t,n,e)}}var Ds=function(e){return function(t){return function(n,r,o){if(void 0===t){var i="function"==typeof n?n.name:n.constructor.name;throw new Error(function(e){return"@inject called with undefined this could mean that the class ".concat(e," has ")+"a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."}(i))}return js(new dc(e,t))(n,r,o)}}}(Sl);function As(){return js(new dc(Ol,!0))}function Rs(e,t){return function(){return function(n,r){var o=new dc(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}}}var Fs,Is,Ps,Ms=Rs(Fl,"Cannot apply @postConstruct decorator multiple times in the same class"),Ts=Rs(Il,"Cannot apply @preDestroy decorator multiple times in the same class"),Ns=("undefined"==typeof globalThis?"undefined":Ln(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":Ln(window))<"u"?window:Ln(wn)<"u"?wn:("undefined"==typeof self?"undefined":Ln(self))<"u"?self:{};function Bs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vs(e,t){return t.lifecycle===Is.Lifecycle.singleton?function(e){return e.inSingletonScope()}(e):function(e){return e.inTransientScope()}(e)}function Ls(e,t){e.whenTargetNamed(Hs(t))}function zs(e,t){return t.bind(qs(e))}function Us(e,t){if(t.isBound(qs(e)))try{return t.rebind(qs(e))}catch(n){return t.bind(qs(e))}return t.bind(qs(e))}function Hs(e){return Ps.isDefinedToken(e)?e.symbol:e}function qs(e){return Ps.isDefinedToken(e)?e.symbol:e}!function(e){!function(t){var n="object"==Ln(Ns)?Ns:"object"==("undefined"==typeof self?"undefined":Ln(self))?self:"object"==Ln(this)?this:Function("return this;")(),r=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}Ln(n.Reflect)>"u"?n.Reflect=e:r=o(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&Ln(Symbol.toPrimitive)<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&Ln(Symbol.iterator)<"u"?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,u=!i&&!a,l={create:i?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:u?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:u?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),s="object"==Ln(Vn)&&Vn.env&&"true"===Vn.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=s||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=s||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,p=new(s||"function"!=typeof WeakMap?ne():WeakMap);function v(e,t,n,r){if(M(n)){if(!q(e))throw new TypeError;if(!$(t))throw new TypeError;return E(e,t)}if(!q(e))throw new TypeError;if(!B(t))throw new TypeError;if(!B(r)&&!M(r)&&!T(r))throw new TypeError;return T(r)&&(r=void 0),O(e,t,n=H(n),r)}function h(e,t){function n(n,r){if(!B(n))throw new TypeError;if(!M(r)&&!G(r))throw new TypeError;R(e,t,n,r)}return n}function g(e,t,n,r){if(!B(n))throw new TypeError;return M(r)||(r=H(r)),R(e,t,n,r)}function m(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=H(n)),x(e,t,n)}function y(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=H(n)),j(e,t,n)}function b(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=H(n)),D(e,t,n)}function w(e,t,n){if(!B(t))throw new TypeError;return M(n)||(n=H(n)),A(e,t,n)}function _(e,t){if(!B(e))throw new TypeError;return M(t)||(t=H(t)),F(e,t)}function k(e,t){if(!B(e))throw new TypeError;return M(t)||(t=H(t)),I(e,t)}function C(e,t,n){if(!B(t))throw new TypeError;M(n)||(n=H(n));var r=S(t,n,!1);if(M(r)||!r.delete(e))return!1;if(r.size>0)return!0;var o=p.get(t);return o.delete(n),o.size>0||p.delete(t),!0}function E(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!M(r)&&!T(r)){if(!$(r))throw new TypeError;t=r}}return t}function O(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!M(i)&&!T(i)){if(!B(i))throw new TypeError;r=i}}return r}function S(e,t,n){var r=p.get(e);if(M(r)){if(!n)return;r=new d,p.set(e,r)}var o=r.get(t);if(M(o)){if(!n)return;o=new d,r.set(t,o)}return o}function x(e,t,n){if(j(e,t,n))return!0;var r=Q(t);return!T(r)&&x(e,r,n)}function j(e,t,n){var r=S(t,n,!1);return!M(r)&&z(r.has(e))}function D(e,t,n){if(j(e,t,n))return A(e,t,n);var r=Q(t);return T(r)?void 0:D(e,r,n)}function A(e,t,n){var r=S(t,n,!1);if(!M(r))return r.get(e)}function R(e,t,n,r){S(n,r,!0).set(e,t)}function F(e,t){var n=I(e,t),r=Q(e);if(null===r)return n;var o=F(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,a=[],u=0,l=n;u<l.length;u++){var c=l[u];i.has(c)||(i.add(c),a.push(c))}for(var s=0,d=o;s<d.length;s++){c=d[s];i.has(c)||(i.add(c),a.push(c))}return a}function I(e,t){var n=[],r=S(e,t,!1);if(M(r))return n;for(var o=Y(r.keys()),i=0;;){var a=X(o);if(!a)return n.length=i,n;var u=J(a);try{n[i]=u}catch(e){try{Z(o)}finally{throw e}}i++}}function P(e){if(null===e)return 1;switch(Ln(e)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function M(e){return void 0===e}function T(e){return null===e}function N(e){return"symbol"==Ln(e)}function B(e){return"object"==Ln(e)?null!==e:"function"==typeof e}function V(e,t){switch(P(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n="string",o=K(e,r);if(void 0!==o){var i=o.call(e,n);if(B(i))throw new TypeError;return i}return L(e)}function L(e,t){var n,r,o=e.toString;if(W(o)&&!B(r=o.call(e)))return r;if(W(n=e.valueOf)&&!B(r=n.call(e)))return r;throw new TypeError}function z(e){return!!e}function U(e){return""+e}function H(e){var t=V(e);return N(t)?t:U(t)}function q(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function W(e){return"function"==typeof e}function $(e){return"function"==typeof e}function G(e){switch(P(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!W(n))throw new TypeError;return n}}function Y(e){var t=K(e,o);if(!W(t))throw new TypeError;var n=t.call(e);if(!B(n))throw new TypeError;return n}function J(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c||t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ne(){var e=16,n=l.create(),r=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+c()}while(l.has(n,e));return n[e]=!0,e}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function u(e){return"function"==typeof Uint8Array?("undefined"==typeof crypto?"undefined":Ln(crypto))<"u"?crypto.getRandomValues(new Uint8Array(e)):("undefined"==typeof msCrypto?"undefined":Ln(msCrypto))<"u"?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=u(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var o=t[r];(4===r||6===r||8===r)&&(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",v),e("metadata",h),e("defineMetadata",g),e("hasMetadata",m),e("hasOwnMetadata",y),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",_),e("getOwnMetadataKeys",k),e("deleteMetadata",C)}(r)}()}(Fs||(Fs={})),function(e){e.defineToken=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0,global:!1};return new e.DefinedToken(t,n)};var t,n=ll((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sl(this,e),this.prototype={};var r=n.multiple,o=void 0!==r&&r,i=n.global;this.name=t,this.symbol=i?Symbol.for(this.name):Symbol(this.name),this.multiple=o}));e.DefinedToken=n,e.isModule=function(e){return!!e&&"object"==Ln(e)&&"id"in e},(t=e.Lifecycle||(e.Lifecycle={})).singleton="singleton",t.transient="transient",e.ClassOptionSymbol=Symbol.for("SyringeClassOption"),e.DefaultOption={lifecycle:"transient"}}(Is||(Is={})),function(e){e.toArray=function(e){return Array.isArray(e)?e:void 0===e?[]:[e]},e.isClass=function(e){return!(!e||"function"!=typeof e||!("prototype"in e))},e.isDefinedToken=function(e){return!!(e&&"object"==Ln(e)&&"symbol"in e&&"multiple"in e)},e.isInjectOption=function(e){return!(!e||"object"!=Ln(e)||!("token"in e))},e.isNamedToken=function(e){return!!(e&&"object"==Ln(e)&&"token"in e&&"named"in e)},e.isMultipleEnabled=function(t){return e.isDefinedToken(t)&&t.multiple}}(Ps||(Ps={}));var Ws=new Cs;function $s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){if(Reflect.hasOwnMetadata(Al,e))throw new Error(zl);var t=Reflect.getMetadata(Rl,e)||[];return Reflect.defineMetadata(Al,t,e),e};return function(n){Reflect.defineMetadata(Is.ClassOptionSymbol,_l(_l({},e),{},{target:n}),n),t(n)}}function Gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return $s(_l(_l({},e),{},{lifecycle:Is.Lifecycle.singleton})).apply(void 0,[t].concat(r)),t}}function Ks(e){return Ds(e instanceof pc?e:qs(e))}function Ys(e){return function(e){return js(new dc(kl,e))}(Hs(e))}var Js=Symbol.for("SyringeSideOption");var Xs=function(){function e(t,n,r){sl(this,e),this.register=t,this.token=n,this.option=r,this.rawToken=Ps.isNamedToken(n)?n.token:n,this.named=Ps.isNamedToken(n)?n.named:void 0,this.mutiple=!!this.named||Ps.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return ll(e,[{key:"resolve",value:function(){var e=this,t=this.register;(function(e){return e&&"object"==Ln(e)&&"bind"in e&&"unbind"in e&&"rebind"in e&&"isBound"in e})(t)&&(this.mutiple?this.resolveMutilple(t):(this.resolveMono(t),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach((function(n){Ps.isMultipleEnabled(n)?zs(n,t).toService(e.generalToken):Us(n,t).toService(e.generalToken)}))))}},{key:"resolveMono",value:function(e){if("useValue"in this.option)return Us(this.generalToken,e).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var t=this.option.useDynamic[this.option.useDynamic.length-1];return Vs(Us(this.generalToken,e).toDynamicValue((function(e){var n=hd.getContainer(e.container);return t({container:n})})),this.option)}if(this.option.useFactory.length>0){var n=this.option.useFactory[this.option.useFactory.length-1];return Us(this.generalToken,e).toFactory((function(e){var t=hd.getContainer(e.container);return n({container:t})}))}if(this.option.useClass.length>0){var r=this.option.useClass[this.option.useClass.length-1];return Vs(Us(this.generalToken,e).to(r),this.option)}}},{key:"resolveMutilple",value:function(e){var t=this,n=this.option.useClass.map((function(n){return Vs(zs(t.generalToken,e).to(n),t.option)})),r=this.option.useDynamic.map((function(n){return Vs(zs(t.generalToken,e).toDynamicValue((function(e){var t=hd.getContainer(e.container);return n({container:t})})),t.option)})),o=this.option.useFactory.map((function(n){return zs(t.generalToken,e).toFactory((function(e){var t=hd.getContainer(e.container);return n({container:t})}))})),i="useValue"in this.option?zs(this.generalToken,e).toConstantValue(this.option.useValue):void 0;this.named&&(n.forEach((function(e){return t.named&&Ls(e,t.named)})),r.forEach((function(e){return t.named&&Ls(e,t.named)})),o.forEach((function(e){return t.named&&Ls(e,t.named)})),i&&Ls(i,this.named))}}],[{key:"resolveTarget",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{try{var o=Reflect.getMetadata(Js,n);o&&e.resolveOption(t,o)}catch(e){}if(Ps.isClass(n))if(r.useClass){var i=Ps.toArray(r.useClass);i.unshift(n),r.useClass=i}else r.useClass=[n];var a;try{a=Reflect.getMetadata(Is.ClassOptionSymbol,n)}catch(e){}if((a=_l(_l({},a||{}),r)).token){var u=Ps.toArray(a.token);u.unshift(n),a.token=u}else a.token=[n];e.resolveOption(t,a)}catch(e){}}},{key:"resolveOption",value:function(t,n){var r=function(e){var t=Ps.toArray(e.token),n=Ps.toArray(e.useClass),r=Ps.toArray(e.useDynamic),o=Ps.toArray(e.useFactory),i=Ps.toArray(e.contrib),a=e.lifecycle||Is.Lifecycle.transient,u={token:t,useClass:n,lifecycle:i.length>0?Is.Lifecycle.singleton:a,contrib:i,useDynamic:r,useFactory:o};return"useValue"in e&&(u.useValue=e.useValue),u}(_l(_l({},e.globalConfig),n));0===r.useClass.length&&0===r.useDynamic.length&&0===r.useFactory.length&&!("useValue"in r)||r.token.forEach((function(n){new e(t,n,_l({},r)).resolve()}))}}])}();Xs.globalConfig=Is.DefaultOption;var Zs,Qs,ed,td=Xs,nd=Is.defineToken("SyringeContributionProvider",{global:!0});!function(e){function t(e){return{dispose:e}}e.is=function(e){return!!e&&"object"==Ln(e)&&"dispose"in e&&"function"==typeof e.dispose},e.create=t,e.NONE=t((function(){}))}(Zs||(Zs={})),function(e){e.is=function(e){return!!e&&"object"==Ln(e)&&"disposed"in e&&"boolean"==typeof e.disposed}}(Qs||(Qs={})),function(e){e.None=function(){return Zs.NONE},e.map=function(e,t){return function(n,r){return e((function(e){return n.call(r,t(e))}),void 0)}}}(ed||(ed={}));var rd=function(){return ll((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];sl(this,e),this.mono=!1,this.mono=t}),[{key:"length",get:function(){return this._callbacks&&this._callbacks.length||0}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this._callbacks||(this._callbacks=[]),this._callbacks.push([e,t])}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this._callbacks){for(var n=!1,r=0;r<this._callbacks.length;r+=1)if(this._callbacks[r][0]===e){if(this._callbacks[r][1]===t)return void this._callbacks.splice(r,1);n=!0}if(n)throw new Error("You should remove it with the same context you add it")}}},{key:Symbol.iterator,value:function(){return this._callbacks?this._callbacks.slice(0).map((function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[0].apply(e[1],n)}}))[Symbol.iterator]():[][Symbol.iterator]()}},{key:"invoke",value:function(){var e,t=[],n=yl(this);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{t.push(r.apply(void 0,arguments))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"isEmpty",value:function(){return!this._callbacks||0===this._callbacks.length}},{key:"dispose",value:function(){this._callbacks=void 0}}])}(),od=function(){function e(t){sl(this,e),this._disposed=!1,this._options=t}return ll(e,[{key:"event",get:function(){var t=this;return this._event||(this._event=function(n,r,o){t._callbacks||(t._callbacks=new rd),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(n,r);var i={dispose:function(){i.dispose=e._noop,t._disposed||(t._callbacks.remove(n,r),i.dispose=e._noop,t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}};return Array.isArray(o)&&o.push(i),i}),this._event}},{key:"fire",value:function(e){this._callbacks&&this._callbacks.invoke(e)}},{key:"sequence",value:(t=rl(ml.mark((function e(t){var n,r,o;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._callbacks){e.next=20;break}n=yl(this._callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=12;break}return o=r.value,e.next=8,t(o);case 8:if(e.sent){e.next=10;break}return e.abrupt("break",12);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e){return t.apply(this,arguments)})},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this._disposed=!0}}]);var t}();od._noop=function(){};var id=od,ad=function(){return ll((function e(){var t=this;sl(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];this.disposables=[],this.onDisposeEmitter=new id,this.disposingElements=!1,r.forEach((function(e){return t.push(e)}))}),[{key:"onDispose",get:function(){return this.onDisposeEmitter.event}},{key:"checkDisposed",value:function(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}},{key:"disposed",get:function(){return 0===this.disposables.length}},{key:"dispose",value:function(){if(!this.disposed&&!this.disposingElements){for(this.disposingElements=!0;!this.disposed;)try{this.disposables.pop().dispose()}catch(e){console.error(e)}this.disposingElements=!1,this.checkDisposed()}}},{key:"push",value:function(e){var t=this,n=this.disposables;n.push(e);var r=e.dispose.bind(e),o=Zs.create((function(){var r=n.indexOf(e);-1!==r&&n.splice(r,1),t.checkDisposed()}));return e.dispose=function(){o.dispose(),r()},o}},{key:"pushAll",value:function(e){var t=this;return e.map((function(e){return t.push(e)}))}}])}(),ud=function(){return ll((function e(t,n,r){var o=this;sl(this,e),this.onChangedEmitter=new id,this.option={recursive:!1,cache:!0},this.toDispose=new ad,this.onCtxChanged=function(){o.services=void 0,o.onChangedEmitter.fire()},this.container=n,this.serviceIdentifier=t,r&&(this.option=_l(_l({},this.option),r)),this.toDispose.push(this.onChangedEmitter),this.toDispose.push(this.container.onModuleChanged(this.onCtxChanged)),this.toDispose.push(this.container.onRegistered(this.onCtxChanged))}),[{key:"onChanged",get:function(){return this.onChangedEmitter.event}},{key:"dispose",value:function(){this.toDispose.dispose(),this.disposed=!0}},{key:"getServices",value:function(e){for(var t=[],n=this.container;n;){if(n.isBound(this.serviceIdentifier)){var r=n.getAll(this.serviceIdentifier);t.push.apply(t,tl(r))}n=e?n.parent:void 0}return t}},{key:"getContributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_l(_l({},this.option),e),n=t.cache,r=t.recursive,o=void 0===r||r;return(!n||void 0===this.services)&&(this.services=this.getServices(!!o)),this.services}}])}();function ld(e,t,n){e({token:{token:nd,named:t},useDynamic:function(e){return new ud(t,e.container,n)},lifecycle:Is.Lifecycle.singleton})}var cd=function(){return ll((function e(t){var n=this;sl(this,e),this.inversifyRegister=function(e,t,r,o){var i={bind:e,unbind:t,isBound:r,rebind:o},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ps.isInjectOption(e)?td.resolveOption(i,e):td.resolveTarget(i,e,t)};n.baseRegistry&&n.baseRegistry(a),n.optionCollection&&n.optionCollection.forEach((function(e){return a(e)}))},this.baseRegistry=t,this.inversifyModule=new Es(this.inversifyRegister),this.id=this.inversifyModule.id}),[{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(t)})),this}},{key:"contribution",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(function(e,t){return{token:{token:nd,named:e},useDynamic:function(n){return new ud(e,n.container,t)},lifecycle:Is.Lifecycle.singleton}}(t))})),this}}])}();function sd(e){return e&&"inversifyModule"in e}function dd(e){return new cd(e)}var fd="abcdefghigklmnopqrstuvwxyz",pd=fd+"0123456789"+fd.toUpperCase();var vd=new Map,hd=function(){function e(t){sl(this,e),this.toDisposeOnParentChange=new ad,this.onModuleChangedEmitter=new id,this.id=function(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=pd.charAt(Math.floor(Math.random()*pd.length));return t}(),this.onRegisteredEmitter=new id,this.loadedModules=[],this.inversify=!0,this.container=t||new Cs,e.setContainer(this.container,this)}return ll(e,[{key:"onModuleChanged",get:function(){return this.onModuleChangedEmitter.event}},{key:"onRegistered",get:function(){return this.onRegisteredEmitter.event}},{key:"parent",get:function(){return this._parent},set:function(e){var t=this;this._parent=e,this.toDisposeOnParentChange&&(this.toDisposeOnParentChange.dispose(),this.toDisposeOnParentChange=new ad),e&&(this.toDisposeOnParentChange.push(e.onModuleChanged((function(){t.onModuleChangedEmitter.fire()}))),this.toDisposeOnParentChange.push(e.onRegistered((function(){t.onRegisteredEmitter.fire()}))))}},{key:"dispose",value:function(){this.toDisposeOnParentChange.dispose(),this.onModuleChangedEmitter.dispose(),this.onRegisteredEmitter.dispose(),this.disposed=!0}},{key:"load",value:function(e,t){var n=this;return t||!this.loadedModules.includes(e.id)?(sd(e)?(this.container.load(e.inversifyModule),this.onModuleChangedEmitter.fire()):console.warn("Unsupported module.",e),this.loadedModules.push(e.id),{dispose:function(){n.unload(e)}}):{dispose:function(){}}}},{key:"unload",value:function(e){sd(e)&&(this.container.unload(e.inversifyModule),this.onModuleChangedEmitter.fire(),this.loadedModules=this.loadedModules.filter((function(t){return t!==e.id})))}},{key:"remove",value:function(e){return this.container.unbind(qs(e))}},{key:"get",value:function(e){var t,n=qs(e);try{t=this.container.get(n)}catch(e){if(e.message.includes("No matching bindings found")&&this.parent)return this.parent.get(n);throw e}return t}},{key:"getNamed",value:function(e,t){return this.container.getNamed(qs(e),Hs(t))}},{key:"getAll",value:function(e){return this.container.getAll(qs(e))}},{key:"getAllNamed",value:function(e,t){return this.container.getAllNamed(qs(e),Hs(t))}},{key:"isBound",value:function(e){return this.container.isBound(qs(e))}},{key:"isBoundNamed",value:function(e,t){return this.container.isBoundNamed(qs(e),Hs(t))}},{key:"createChild",value:function(){var t=new e(this.container.createChild());return t.parent=this,t}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ps.isInjectOption(e)?td.resolveOption(this.container,e):td.resolveTarget(this.container,e,t),this.onRegisteredEmitter.fire()}}],[{key:"setContainer",value:function(e,t){return vd.set(e.id,t)}},{key:"getContainer",value:function(t){var n=vd.get(t.id);if(!n){var r=new e(t);return e.setContainer(t,r),r}return n}},{key:"config",value:function(e){td.globalConfig=e}}])}(),gd=new hd(Ws);gd.register.bind(gd);var md,yd=function(e){return function(t,n,r){Ys(e)(t,n,r),Ks(nd)(t,n,r)}};!function(e){e.Provider=nd,e.register=ld}(md||(md={}));var bd,wd,_d={exports:{}};function kd(){if(wd)return bd;wd=1;var e=1e3,t=6e4,n=60*t,r=24*n,o=7*r,i=365.25*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}return bd=function(u,l){l=l||{};var c=Ln(u);if("string"===c&&u.length>0)return function(a){if(a=String(a),!(a.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(u){var l=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*r;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(u);if("number"===c&&isFinite(u))return l.long?function(o){var i=Math.abs(o);return i>=r?a(o,i,r,"day"):i>=n?a(o,i,n,"hour"):i>=t?a(o,i,t,"minute"):i>=e?a(o,i,e,"second"):o+" ms"}(u):function(o){var i=Math.abs(o);return i>=r?Math.round(o/r)+"d":i>=n?Math.round(o/n)+"h":i>=t?Math.round(o/t)+"m":i>=e?Math.round(o/e)+"s":o+"ms"}(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var Cd=function(e){function t(e){var r,o,i,a=null;function u(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(u.enabled){var i=u,a=Number(new Date),l=a-(r||a);i.diff=l,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var o=t.formatters[r];if("function"==typeof o){var a=n[c];e=o.call(i,a),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n),(i.log||t.log).apply(i,n)}}return u.namespace=e,u.useColors=t.useColors(),u.color=t.selectColor(e),u.extend=n,u.destroy=t.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(u),u}function n(e,n){var r=t(this.namespace+(Ln(n)>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(tl(t.names.map(r)),tl(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=kd(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};function Ed(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Od(e,t){if(t&&("object"==Ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ed(e)}function Sd(e){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xd(e,t){return(xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xd(e,t)}!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&Ln(Vn)<"u"&&"env"in Vn&&(e=Vn.env.DEBUG),e},t.useColors=function(){return!(!(("undefined"==typeof window?"undefined":Ln(window))<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(("undefined"==typeof navigator?"undefined":Ln(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(("undefined"==typeof document?"undefined":Ln(document))<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||("undefined"==typeof window?"undefined":Ln(window))<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||("undefined"==typeof navigator?"undefined":Ln(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||("undefined"==typeof navigator?"undefined":Ln(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=Cd(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(_d,_d.exports),Bs(_d.exports)("di");var Dd={};function Ad(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rd(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Dd.deprecate=function(e,t){var n=!0;return function(){return n&&(console.warn("DeprecationWarning: "+t),n=!1),e.apply(this,arguments)}};var Fd=Dd.deprecate((function(){}),"Hook.context is deprecated and will be removed"),Id=function(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)},Pd=function(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)},Md=function(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)},Td=function(){return ll((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;sl(this,e),this._args=t,this.name=n,this.taps=[],this.interceptors=[],this._call=Id,this.call=Id,this._callAsync=Pd,this.callAsync=Pd,this._promise=Md,this.promise=Md,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}),[{key:"compile",value:function(e){throw new Error("Abstract: should be overridden")}},{key:"_createCall",value:function(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}},{key:"_tap",value:function(e,t,n){if("string"==typeof t)t={name:t.trim()};else if("object"!==Ln(t)||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");void 0!==t.context&&Fd(),t=Object.assign({type:e,fn:n},t),t=this._runRegisterInterceptors(t),this._insert(t)}},{key:"tap",value:function(e,t){this._tap("sync",e,t)}},{key:"tapAsync",value:function(e,t){this._tap("async",e,t)}},{key:"tapPromise",value:function(e,t){this._tap("promise",e,t)}},{key:"_runRegisterInterceptors",value:function(e){var t,n=Ad(this.interceptors);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.register){var o=r.register(e);void 0!==o&&(e=o)}}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"withOptions",value:function(e){var t=this,n=function(t){return Object.assign({},e,"string"==typeof t?{name:t}:t)};return{name:this.name,tap:function(e,r){return t.tap(n(e),r)},tapAsync:function(e,r){return t.tapAsync(n(e),r)},tapPromise:function(e,r){return t.tapPromise(n(e),r)},intercept:function(e){return t.intercept(e)},isUsed:function(){return t.isUsed()},withOptions:function(e){return t.withOptions(n(e))}}}},{key:"isUsed",value:function(){return this.taps.length>0||this.interceptors.length>0}},{key:"intercept",value:function(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(var t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}},{key:"_resetCompilation",value:function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}},{key:"_insert",value:function(e){var t;this._resetCompilation(),"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));var n=0;"number"==typeof e.stage&&(n=e.stage);for(var r=this.taps.length;r>0;){r--;var o=this.taps[r];this.taps[r+1]=o;var i=o.stage||0;if(t){if(t.has(o.name)){t.delete(o.name);continue}if(t.size>0)continue}if(!(i>n)){r++;break}}this.taps[r]=e}}])}();Object.setPrototypeOf(Td.prototype,null);var Nd=Td;function Bd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vd(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ld=function(){return ll((function e(t){sl(this,e),this.config=t,this.options=void 0,this._args=void 0}),[{key:"create",value:function(e){var t;switch(this.init(e),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(e){return"throw ".concat(e,";\n")},onResult:function(e){return"return ".concat(e,";\n")},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(e){return"_callback(".concat(e,");\n")},onResult:function(e){return"_callback(null, ".concat(e,");\n")},onDone:function(){return"_callback();\n"}}));break;case"promise":var n=!1,r=this.contentWithInterceptors({onError:function(e){return n=!0,"_error(".concat(e,");\n")},onResult:function(e){return"_resolve(".concat(e,");\n")},onDone:function(){return"_resolve();\n"}}),o="";o+='"use strict";\n',o+=this.header(),o+="return new Promise((function(_resolve, _reject) {\n",n&&(o+="var _sync = true;\n",o+="function _error(_err) {\n",o+="if(_sync)\n",o+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",o+="else\n",o+="_reject(_err);\n",o+="};\n"),o+=r,n&&(o+="_sync = false;\n"),o+="}));\n",t=new Function(this.args(),o)}return this.deinit(),t}},{key:"setup",value:function(e,t){e._x=t.taps.map((function(e){return e.fn}))}},{key:"init",value:function(e){this.options=e,this._args=e.args.slice()}},{key:"deinit",value:function(){this.options=void 0,this._args=void 0}},{key:"contentWithInterceptors",value:function(e){var t=this;if(this.options.interceptors.length>0){for(var n=e.onError,r=e.onResult,o=e.onDone,i="",a=0;a<this.options.interceptors.length;a++){var u=this.options.interceptors[a];u.call&&(i+="".concat(this.getInterceptor(a),".call(").concat(this.args({before:u.context?"_context":void 0}),");\n"))}return i+=this.content(Object.assign(e,{onError:n&&function(e){for(var r="",o=0;o<t.options.interceptors.length;o++){t.options.interceptors[o].error&&(r+="".concat(t.getInterceptor(o),".error(").concat(e,");\n"))}return r+=n(e)},onResult:r&&function(e){for(var n="",o=0;o<t.options.interceptors.length;o++){t.options.interceptors[o].result&&(n+="".concat(t.getInterceptor(o),".result(").concat(e,");\n"))}return n+=r(e)},onDone:o&&function(){for(var e="",n=0;n<t.options.interceptors.length;n++){t.options.interceptors[n].done&&(e+="".concat(t.getInterceptor(n),".done();\n"))}return e+=o()}}))}return this.content(e)}},{key:"header",value:function(){var e="";return this.needContext()?e+="var _context = {};\n":e+="var _context;\n",e+="var _x = this._x;\n",this.options.interceptors.length>0&&(e+="var _taps = this.taps;\n",e+="var _interceptors = this.interceptors;\n"),e}},{key:"needContext",value:function(){var e,t=Bd(this.options.taps);try{for(t.s();!(e=t.n()).done;){if(e.value.context)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"callTap",value:function(e,t){for(var n=t.onError,r=t.onResult,o=t.onDone,i=t.rethrowIfPossible,a="",u=!1,l=0;l<this.options.interceptors.length;l++){var c=this.options.interceptors[l];c.tap&&(u||(a+="var _tap".concat(e," = ").concat(this.getTap(e),";\n"),u=!0),a+="".concat(this.getInterceptor(l),".tap(").concat(c.context?"_context, ":"","_tap").concat(e,");\n"))}a+="var _fn".concat(e," = ").concat(this.getTapFn(e),";\n");var s=this.options.taps[e];switch(s.type){case"sync":i||(a+="var _hasError".concat(e," = false;\n"),a+="try {\n"),a+=r?"var _result".concat(e," = _fn").concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"):"_fn".concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"),i||(a+="} catch(_err) {\n",a+="_hasError".concat(e," = true;\n"),a+=n("_err"),a+="}\n",a+="if(!_hasError".concat(e,") {\n")),r&&(a+=r("_result".concat(e))),o&&(a+=o()),i||(a+="}\n");break;case"async":var d="";d+=r?"(function(_err".concat(e,", _result").concat(e,") {\n"):"(function(_err".concat(e,") {\n"),d+="if(_err".concat(e,") {\n"),d+=n("_err".concat(e)),d+="} else {\n",r&&(d+=r("_result".concat(e))),o&&(d+=o()),d+="}\n",d+="})",a+="_fn".concat(e,"(").concat(this.args({before:s.context?"_context":void 0,after:d}),");\n");break;case"promise":a+="var _hasResult".concat(e," = false;\n"),a+="var _promise".concat(e," = _fn").concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"),a+="if (!_promise".concat(e," || !_promise").concat(e,".then)\n"),a+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise".concat(e," + ')');\n"),a+="_promise".concat(e,".then((function(_result").concat(e,") {\n"),a+="_hasResult".concat(e," = true;\n"),r&&(a+=r("_result".concat(e))),o&&(a+=o()),a+="}), function(_err".concat(e,") {\n"),a+="if(_hasResult".concat(e,") throw _err").concat(e,";\n"),a+=n("_err".concat(e)),a+="});\n"}return a}},{key:"callTapsSeries",value:function(e){var t=this,n=e.onError,r=e.onResult,o=e.resultReturns,i=e.onDone,a=e.doneReturns,u=e.rethrowIfPossible;if(0===this.options.taps.length)return i();for(var l=this.options.taps.findIndex((function(e){return"sync"!==e.type})),c=o||a,s="",d=i,f=0,p=function(){var e=v;d!==i&&("sync"!==t.options.taps[e].type||f++>20)&&(f=0,s+="function _next".concat(e,"() {\n"),s+=d(),s+="}\n",d=function(){return"".concat(c?"return ":"","_next").concat(e,"();\n")});var o=d,a=function(e){return e?"":i()},p=t.callTap(e,{onError:function(t){return n(e,t,o,a)},onResult:r&&function(t){return r(e,t,o,a)},onDone:!r&&o,rethrowIfPossible:u&&(l<0||e<l)});d=function(){return p}},v=this.options.taps.length-1;v>=0;v--)p();return s+=d()}},{key:"callTapsLooping",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;if(0===this.options.taps.length)return n();var o=this.options.taps.every((function(e){return"sync"===e.type})),i="";o||(i+="var _looper = (function() {\n",i+="var _loopAsync = false;\n"),i+="var _loop;\n",i+="do {\n",i+="_loop = false;\n";for(var a=0;a<this.options.interceptors.length;a++){var u=this.options.interceptors[a];u.loop&&(i+="".concat(this.getInterceptor(a),".loop(").concat(this.args({before:u.context?"_context":void 0}),");\n"))}return i+=this.callTapsSeries({onError:t,onResult:function(e,t,n,r){var i="";return i+="if(".concat(t," !== undefined) {\n"),i+="_loop = true;\n",o||(i+="if(_loopAsync) _looper();\n"),i+=r(!0),i+="} else {\n",i+=n(),i+="}\n"},onDone:n&&function(){var e="";return e+="if(!_loop) {\n",e+=n(),e+="}\n"},rethrowIfPossible:r&&o}),i+="} while(_loop);\n",o||(i+="_loopAsync = true;\n",i+="});\n",i+="_looper();\n"),i}},{key:"callTapsParallel",value:function(e){var t=this,n=e.onError,r=e.onResult,o=e.onDone,i=e.rethrowIfPossible,a=e.onTap,u=void 0===a?function(e,t){return t()}:a;if(this.options.taps.length<=1)return this.callTapsSeries({onError:n,onResult:r,onDone:o,rethrowIfPossible:i});var l="";l+="do {\n",l+="var _counter = ".concat(this.options.taps.length,";\n"),o&&(l+="var _done = (function() {\n",l+=o(),l+="});\n");for(var c=function(e){var a=function(){return o?"if(--_counter === 0) _done();\n":"--_counter;"},c=function(e){return e||!o?"_counter = 0;\n":"_counter = 0;\n_done();\n"};l+="if(_counter <= 0) break;\n",l+=u(e,(function(){return t.callTap(e,{onError:function(t){var r="";return r+="if(_counter > 0) {\n",r+=n(e,t,a,c),r+="}\n"},onResult:r&&function(t){var n="";return n+="if(_counter > 0) {\n",n+=r(e,t,a,c),n+="}\n"},onDone:!r&&function(){return a()},rethrowIfPossible:i})}),a,c)},s=0;s<this.options.taps.length;s++)c(s);return l+="} while(false);\n"}},{key:"args",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.before,n=e.after,r=this._args;return t&&(r=[t].concat(r)),n&&(r=r.concat(n)),0===r.length?"":r.join(", ")}},{key:"getTapFn",value:function(e){return"_x[".concat(e,"]")}},{key:"getTap",value:function(e){return"_taps[".concat(e,"]")}},{key:"getInterceptor",value:function(e){return"_interceptors[".concat(e,"]")}}])}(),zd=Ld;function Ud(e,t,n){return t=Sd(t),Od(e,Hd()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Hd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hd=function(){return!!e})()}var qd=Nd,Wd=function(e){function t(){return sl(this,t),Ud(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,n){return t(n)},onDone:n,rethrowIfPossible:r})}}])}(zd),$d=new Wd,Gd=function(){throw new Error("tapAsync is not supported on a SyncHook")},Kd=function(){throw new Error("tapPromise is not supported on a SyncHook")},Yd=function(e){return $d.setup(this,e),$d.create(e)};function Jd(){var e=new qd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0);return e.constructor=Jd,e.tapAsync=Gd,e.tapPromise=Kd,e.compile=Yd,e}Jd.prototype=null;var Xd=Jd;function Zd(e,t,n){return t=Sd(t),Od(e,Qd()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Qd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qd=function(){return!!e})()}var ef=function(e){function t(){return sl(this,t),Zd(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.resultReturns,o=e.onDone,i=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,n){return t(n)},onResult:function(e,t,r){return"if(".concat(t," !== undefined) {\n").concat(n(t),";\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:o,rethrowIfPossible:i})}}])}(zd);new ef;function tf(e,t,n){return t=Sd(t),Od(e,nf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function nf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nf=function(){return!!e})()}var rf=function(e){function t(){return sl(this,t),tf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=this,n=e.onError,r=e.onResult,o=e.resultReturns,i=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,t){return n(t)},onResult:function(e,n,r){var o="";return o+="if(".concat(n," !== undefined) {\n"),o+="".concat(t._args[0]," = ").concat(n,";\n"),o+="}\n",o+=r()},onDone:function(){return r(t._args[0])},doneReturns:o,rethrowIfPossible:i})}}])}(zd);new rf;function of(e,t,n){return t=Sd(t),Od(e,af()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function af(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(af=function(){return!!e})()}var uf=function(e){function t(){return sl(this,t),of(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;return this.callTapsLooping({onError:function(e,n){return t(n)},onDone:n,rethrowIfPossible:r})}}])}(zd);new uf;function lf(e,t,n){return t=Sd(t),Od(e,cf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function cf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cf=function(){return!!e})()}var sf=Nd,df=function(e){function t(){return sl(this,t),lf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsParallel({onError:function(e,n,r,o){return t(n)+o(!0)},onDone:n})}}])}(zd),ff=new df,pf=function(e){return ff.setup(this,e),ff.create(e)};function vf(){var e=new sf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0);return e.constructor=vf,e.compile=pf,e._call=void 0,e.call=void 0,e}vf.prototype=null;var hf=vf;function gf(e,t,n){return t=Sd(t),Od(e,mf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function mf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mf=function(){return!!e})()}var yf=function(e){function t(){return sl(this,t),gf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.onDone,o="";return o+="var _results = new Array(".concat(this.options.taps.length,");\n"),o+="var _checkDone = function() {\n",o+="for(var i = 0; i < _results.length; i++) {\n",o+="var item = _results[i];\n",o+="if(item === undefined) return false;\n",o+="if(item.result !== undefined) {\n",o+=n("item.result"),o+="return true;\n",o+="}\n",o+="if(item.error) {\n",o+=t("item.error"),o+="return true;\n",o+="}\n",o+="}\n",o+="return false;\n",o+="}\n",o+=this.callTapsParallel({onError:function(e,t,n,r){var o="";return o+="if(".concat(e," < _results.length && ((_results.length = ").concat(e+1,"), (_results[").concat(e,"] = { error: ").concat(t," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=n(),o+="}\n"},onResult:function(e,t,n,r){var o="";return o+="if(".concat(e," < _results.length && (").concat(t," !== undefined && (_results.length = ").concat(e+1,"), (_results[").concat(e,"] = { result: ").concat(t," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=n(),o+="}\n"},onTap:function(e,t,n,r){var o="";return e>0&&(o+="if(".concat(e," >= _results.length) {\n"),o+=n(),o+="} else {\n"),o+=t(),e>0&&(o+="}\n"),o},onDone:r}),o}}])}(zd);new yf;function bf(e,t,n){return t=Sd(t),Od(e,wf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function wf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wf=function(){return!!e})()}var _f=function(e){function t(){return sl(this,t),bf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsSeries({onError:function(e,n,r,o){return t(n)+o(!0)},onDone:n})}}])}(zd);new _f;function kf(e,t,n){return t=Sd(t),Od(e,Cf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Cf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cf=function(){return!!e})()}var Ef=function(e){function t(){return sl(this,t),kf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.resultReturns,o=e.onDone;return this.callTapsSeries({onError:function(e,n,r,o){return t(n)+o(!0)},onResult:function(e,t,r){return"if(".concat(t," !== undefined) {\n").concat(n(t),"\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:o})}}])}(zd);new Ef;function Of(e,t,n){return t=Sd(t),Od(e,Sf()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Sf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sf=function(){return!!e})()}var xf=function(e){function t(){return sl(this,t),Of(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsLooping({onError:function(e,n,r,o){return t(n)+o(!0)},onDone:n})}}])}(zd);new xf;function jf(e,t,n){return t=Sd(t),Od(e,Df()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Df(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Df=function(){return!!e})()}var Af=function(e){function t(){return sl(this,t),jf(this,t,arguments)}return jd(t,e),ll(t,[{key:"content",value:function(e){var t=this,n=e.onError,r=e.onResult;return e.onDone,this.callTapsSeries({onError:function(e,t,r,o){return n(t)+o(!0)},onResult:function(e,n,r){var o="";return o+="if(".concat(n," !== undefined) {\n"),o+="".concat(t._args[0]," = ").concat(n,";\n"),o+="}\n",o+=r()},onDone:function(){return r(t._args[0])}})}}])}(zd);new Af;var Rf=Dd,Ff=function(e,t){return t},If=function(){return ll((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;sl(this,e),this._map=new Map,this.name=n,this._factory=t,this._interceptors=[]}),[{key:"get",value:function(e){return this._map.get(e)}},{key:"for",value:function(e){var t=this.get(e);if(void 0!==t)return t;for(var n=this._factory(e),r=this._interceptors,o=0;o<r.length;o++)n=r[o].factory(e,n);return this._map.set(e,n),n}},{key:"intercept",value:function(e){this._interceptors.push(Object.assign({factory:Ff},e))}}])}();If.prototype.tap=Rf.deprecate((function(e,t,n){return this.for(e).tap(t,n)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),If.prototype.tapAsync=Rf.deprecate((function(e,t,n){return this.for(e).tapAsync(t,n)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),If.prototype.tapPromise=Rf.deprecate((function(e,t,n){return this.for(e).tapPromise(t,n)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var Pf=Xd,Mf=hf;function Tf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||el(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bf(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Vf=function(){return new Map},Lf=function(e){var t=Vf();return e.forEach((function(e,n){t.set(n,e)})),t},zf=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Uf=function(){return new Set},Hf=function(e){return e[e.length-1]},qf=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},Wf=Array.from,$f=Array.isArray,Gf=function(){return ll((function e(){sl(this,e),this._observers=Vf()}),[{key:"on",value:function(e,t){zf(this._observers,e,Uf).add(t)}},{key:"once",value:function(e,t){var n=this,r=function(){n.off(e,r),t.apply(void 0,arguments)};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return Wf((this._observers.get(e)||Vf()).values()).forEach((function(e){return e.apply(void 0,tl(t))}))}},{key:"destroy",value:function(){this._observers=Vf()}}])}(),Kf=Math.floor,Yf=Math.abs,Jf=function(e,t){return e<t?e:t},Xf=function(e,t){return e>t?e:t},Zf=128,Qf=127,ep=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Kf(e)===e},tp=/^\s*/g,np=/([A-Z])/g,rp=function(e,t){return function(e){return e.replace(tp,"")}(e.replace(np,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},op="undefined"!=typeof TextEncoder?new TextEncoder:null,ip=op?function(e){return op.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.codePointAt(o);return r},ap="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});function up(e,t,n){return t=Sd(t),Od(e,lp()?Reflect.construct(t,[],Sd(e).constructor):t.apply(e,n))}function lp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lp=function(){return!!e})()}ap&&1===ap.decode(new Uint8Array).length&&(ap=null);var cp=ll((function e(){sl(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]})),sp=function(){return new cp},dp=function(e){for(var t=new Uint8Array(function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t}(e)),n=0,r=0;r<e.bufs.length;r++){var o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},fp=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},pp=fp,vp=function(e,t){for(;t>Qf;)fp(e,Zf|Qf&t),t=Kf(t/128);fp(e,Qf&t)},hp=function(e,t){var n,r=0!==(n=t)?n<0:1/n<0;for(r&&(t=-t),fp(e,(t>63?Zf:0)|(r?64:0)|63&t),t=Kf(t/64);t>0;)fp(e,(t>Qf?Zf:0)|Qf&t),t=Kf(t/128)},gp=new Uint8Array(3e4),mp=gp.length/3,yp=op&&op.encodeInto?function(e,t){if(t.length<mp){var n=op.encodeInto(t,gp).written||0;vp(e,n);for(var r=0;r<n;r++)fp(e,gp[r])}else wp(e,ip(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;vp(e,r);for(var o=0;o<r;o++)fp(e,n.codePointAt(o))},bp=function(e,t){var n=e.cbuf.length,r=e.cpos,o=Jf(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Xf(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},wp=function(e,t){vp(e,t.byteLength),bp(e,t)},_p=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Xf(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},kp=new DataView(new ArrayBuffer(4)),Cp=function(e,t){switch(Ln(t)){case"string":fp(e,119),yp(e,t);break;case"number":ep(t)&&Yf(t)<=2147483647?(fp(e,125),hp(e,t)):(a=t,kp.setFloat32(0,a),kp.getFloat32(0)===a?(fp(e,124),function(e,t){_p(e,4).setFloat32(0,t,!1)}(e,t)):(fp(e,123),function(e,t){_p(e,8).setFloat64(0,t,!1)}(e,t)));break;case"bigint":fp(e,122),function(e,t){_p(e,8).setBigInt64(0,t,!1)}(e,t);break;case"object":if(null===t)fp(e,126);else if($f(t)){fp(e,117),vp(e,t.length);for(var n=0;n<t.length;n++)Cp(e,t[n])}else if(t instanceof Uint8Array)fp(e,116),wp(e,t);else{fp(e,118);var r=Object.keys(t);vp(e,r.length);for(var o=0;o<r.length;o++){var i=r[o];yp(e,i),Cp(e,t[i])}}break;case"boolean":fp(e,t?120:121);break;default:fp(e,127)}var a},Ep=function(e){function t(e){var n;return sl(this,t),(n=up(this,t)).w=e,n.s=null,n.count=0,n}return jd(t,e),ll(t,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&vp(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}])}(cp),Op=function(e){e.count>0&&(hp(e.encoder,1===e.count?e.s:-e.s),e.count>1&&vp(e.encoder,e.count-2))},Sp=function(){return ll((function e(){sl(this,e),this.encoder=new cp,this.s=0,this.count=0}),[{key:"write",value:function(e){this.s===e?this.count++:(Op(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return Op(this),dp(this.encoder)}}])}(),xp=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);hp(e.encoder,t),e.count>1&&vp(e.encoder,e.count-2)}},jp=function(){return ll((function e(){sl(this,e),this.encoder=new cp,this.s=0,this.count=0,this.diff=0}),[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(xp(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return xp(this),dp(this.encoder)}}])}(),Dp=function(){return ll((function e(){sl(this,e),this.sarr=[],this.s="",this.lensE=new Sp}),[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new cp;return this.sarr.push(this.s),this.s="",yp(e,this.sarr.join("")),bp(e,this.lensE.toUint8Array()),dp(e)}}])}(),Ap=function(e){return new Error(e)},Rp=function(){throw Ap("Method unimplemented")},Fp=function(){throw Ap("Unexpected case")},Ip=crypto.getRandomValues.bind(crypto),Pp=function(){return Ip(new Uint32Array(1))[0]},Mp="10000000-1000-4000-8000-100000000000",Tp=function(){return Mp.replace(/[018]/g,(function(e){return(e^Pp()&15>>e/4).toString(16)}))},Np=Date.now,Bp=function(e){return new Promise(e)};Promise.all.bind(Promise);for(var Vp={},Lp={byteLength:function(e){var t=$p(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=$p(e),o=r[0],i=r[1],a=new Hp(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),u=0,l=i>0?o-4:o;for(n=0;n<l;n+=4)t=Up[e.charCodeAt(n)]<<18|Up[e.charCodeAt(n+1)]<<12|Up[e.charCodeAt(n+2)]<<6|Up[e.charCodeAt(n+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;2===i&&(t=Up[e.charCodeAt(n)]<<2|Up[e.charCodeAt(n+1)]>>4,a[u++]=255&t);1===i&&(t=Up[e.charCodeAt(n)]<<10|Up[e.charCodeAt(n+1)]<<4|Up[e.charCodeAt(n+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,u=n-r;a<u;a+=i)o.push(Gp(e,a,a+i>u?u:a+i));1===r?(t=e[n-1],o.push(zp[t>>2]+zp[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(zp[t>>10]+zp[t>>4&63]+zp[t<<2&63]+"="));return o.join("")}},zp=[],Up=[],Hp="undefined"!=typeof Uint8Array?Uint8Array:Array,qp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wp=0;Wp<64;++Wp)zp[Wp]=qp[Wp],Up[qp.charCodeAt(Wp)]=Wp;function $p(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Gp(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(zp[(o=r)>>18&63]+zp[o>>12&63]+zp[o>>6&63]+zp[63&o]);return i.join("")}Up["-".charCodeAt(0)]=62,Up["_".charCodeAt(0)]=63;var Kp={read:function(e,t,n,r,o){var i,a,u=8*o-r-1,l=(1<<u)-1,c=l>>1,s=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-s)-1,p>>=-s,s+=u;s>0;i=256*i+e[t+d],d+=f,s-=8);for(a=i&(1<<-s)-1,i>>=-s,s+=r;s>0;a=256*a+e[t+d],d+=f,s-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},write:function(e,t,n,r,o,i){var a,u,l,c=8*i-o-1,s=(1<<c)-1,d=s>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,v=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=s):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=s?(u=0,a=s):a+d>=1?(u=(t*l-1)*Math.pow(2,o),a+=d):(u=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&u,p+=v,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+p]=255&a,p+=v,a/=256,c-=8);e[n+p-v]|=128*h}};!function(e){var t=Lp,n=Kp,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=i(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return s(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+Ln(e));if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=function(e){if(a.isBuffer(e)){var t=0|f(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||L(e.length)?i(0):s(e);if("Buffer"===e.type&&Array.isArray(e.data))return s(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+Ln(e))}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),i(e<0?0:0|f(e))}function s(e){for(var t=e.length<0?0:0|f(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+Ln(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(o)return r?-1:T(e).length;t=(""+t).toLowerCase(),o=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),L(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){var i,a=1,u=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var s=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===s?0:i-s)){if(-1===s&&(s=i),i-s+1===l)return s*a}else-1!==s&&(i-=i-s),s=-1}else for(n+l>u&&(n=u-l),i=n;i>=0;i--){for(var d=!0,f=0;f<l;f++)if(c(e,i+f)!==c(t,f)){d=!1;break}if(d)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(L(u))return a;e[n+a]=u}return a}function b(e,t,n,r){return B(T(t,e.length-n),e,n,r)}function w(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return B(N(t),e,n,r)}function k(e,t,n,r){return B(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function C(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,u,l,c=e[o],s=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(s=c);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&c)<<6|63&i)>127&&(s=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(l=(15&c)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:i=e[o+1],a=e[o+2],u=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&l<1114112&&(s=l)}null===s?(s=65533,d=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=d}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(V(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(V(i,Uint8Array))o+i.length>r.length?a.from(i).copy(r,o):Uint8Array.prototype.set.call(r,i,o);else{if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(V(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+Ln(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),u=(n>>>=0)-(t>>>=0),l=Math.min(i,u),c=this.slice(r,o),s=e.slice(t,n),d=0;d<l;++d)if(c[d]!==s[d]){i=c[d],u=s[d];break}return i<u?-1:u<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=z[e[i]];return o}function D(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function F(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function P(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,0,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);R(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);R(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var u=a.isBuffer(e)?e:a.from(e,r),l=u.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=u[i%l]}return this};var M=/[^+/0-9A-Za-z-_]/g;function T(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function N(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()}(Vp);var Yp=function(e){return void 0===e?null:e},Jp=new(function(){return ll((function e(){sl(this,e),this.map=new Map}),[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}])}());try{"undefined"!=typeof localStorage&&localStorage&&(Jp=localStorage,!1)}catch(Fc){}var Xp,Zp=Jp,Qp=Object.assign,ev=Object.keys,tv=function(e){return ev(e).length},nv=function(e,t){return e===t||tv(e)===tv(t)&&function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0}(e,(function(e,n){return(void 0!==e||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n))&&t[n]===e}))},rv=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n].apply(e,tl(t))}finally{n<e.length&&rv(e,t,n+1)}},ov=void 0!==Vn&&Vn.release&&/node|io\.js/.test(Vn.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==Vn?Vn:0),iv=function(e){return function(){if(void 0===Xp)if(ov){Xp=Vf();for(var e=Vn.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&Xp.set(t,""),t=r):null!==t&&(Xp.set(t,r),t=null)}null!==t&&Xp.set(t,"")}else"object"===("undefined"==typeof location?"undefined":Ln(location))?(Xp=Vf(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=Tf(e.split("="),2),n=t[0],r=t[1];Xp.set("--".concat(rp(n,"-")),r),Xp.set("-".concat(rp(n,"-")),r)}}))):Xp=Vf();return Xp}().has(e)},av=function(e){return Yp(ov?Vn.env[e.toUpperCase().replaceAll("-","_")]:Zp.getItem(e))},uv=function(e){return iv("--"+e)||null!==av(e)};uv("production");var lv,cv=ov&&(lv=Vn.env.FORCE_COLOR,["true","1","2"].includes(lv))||!iv("--no-colors")&&!uv("no-color")&&(!ov||Vn.stdout.isTTY)&&(!ov||iv("--color")||null!==av("COLORTERM")||(av("TERM")||"").includes("color")),sv=ll((function e(t,n){sl(this,e),this.left=t,this.right=n})),dv=function(e,t){return new sv(e,t)};"undefined"!=typeof DOMParser&&new DOMParser;var fv=function(e){return function(e,t){var n,r=[],o=Nf(e);try{for(o.s();!(n=o.n()).done;){var i=Tf(n.value,2),a=i[0],u=i[1];r.push(t(u,a))}}catch(e){o.e(e)}finally{o.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")},pv=Symbol,vv=pv(),hv=pv(),gv=pv(),mv=pv(),yv=pv(),bv=pv(),wv=pv(),_v=pv(),kv=pv(),Cv=il(il(il(il(il(il(il(il(il({},vv,dv("font-weight","bold")),hv,dv("font-weight","normal")),gv,dv("color","blue")),yv,dv("color","green")),mv,dv("color","grey")),bv,dv("color","red")),wv,dv("color","purple")),_v,dv("color","orange")),kv,dv("color","black")),Ev=cv?function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=Vf(),i=[],a=0;a<e.length;a++){var u=e[a],l=Cv[u];if(void 0!==l)o.set(l.left,l.right);else{if(void 0===u)break;if(u.constructor!==String&&u.constructor!==Number)break;var c=fv(o);a>0||c.length>0?(n.push("%c"+u),r.push(c)):n.push(u)}}for(a>0&&(i=r).unshift(n.join(""));a<e.length;a++){var s=e[a];s instanceof Symbol||i.push(s)}return i}:function(e){var t;1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.constructor)===Function&&(e=e[0]());for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o];if(void 0===i)break;if(i.constructor===String||i.constructor===Number)n.push(i);else if(i.constructor===Object)break}for(o>0&&r.push(n.join(""));o<e.length;o++){var a=e[o];a instanceof Symbol||r.push(a)}return r},Ov=Uf(),Sv=function(e){return il(il({},Symbol.iterator,(function(){return this})),"next",e)},xv=function(e,t){return Sv((function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:t(o)}}))};class jv{constructor(e,t){this.clock=e,this.len=t}}class Dv{constructor(){this.clients=new Map}}const Av=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const i=t[r];lh(e,o,i.clock,i.len,n)}})),Rv=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Kf((n+r)/2),i=e[o],a=i.clock;if(a<=t){if(t<a+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},Fv=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=Xf(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},Iv=e=>{const t=new Dv;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let t=n+1;t<e.length;t++)qf(i,e[t].clients.get(o)||[]);t.clients.set(o,i)}}));return Fv(t),t},Pv=(e,t,n,r)=>{zf(e.clients,t,(()=>[])).push(new jv(n,r))},Mv=Pp;class Tv extends Gf{constructor({guid:e=Tp(),collectionid:t=null,gc:n=!0,gcFilter:r=(()=>!0),meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=Mv(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Qv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Bp((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const u=()=>Bp((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=u()),this.isSynced=void 0===e||!0===e,this.isLoaded||this.emit("load",[])})),this.whenSynced=u()}load(){const e=this._item;null===e||this.shouldLoad||ph(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Wf(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return ph(this,e,t)}get(e,t=xh){const n=zf(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==xh&&r!==t){if(r===xh){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Wh)}getText(e=""){return this.get(e,cg)}getMap(e=""){return this.get(e,Gh)}getXmlFragment(e=""){return this.get(e,dg)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){Wf(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Tv({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ph(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class Nv{constructor(){this.restEncoder=sp()}toUint8Array(){return dp(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){vp(this.restEncoder,e)}writeDsLen(e){vp(this.restEncoder,e)}}class Bv extends Nv{writeLeftID(e){vp(this.restEncoder,e.client),vp(this.restEncoder,e.clock)}writeRightID(e){vp(this.restEncoder,e.client),vp(this.restEncoder,e.clock)}writeClient(e){vp(this.restEncoder,e)}writeInfo(e){pp(this.restEncoder,e)}writeString(e){yp(this.restEncoder,e)}writeParentInfo(e){vp(this.restEncoder,e?1:0)}writeTypeRef(e){vp(this.restEncoder,e)}writeLen(e){vp(this.restEncoder,e)}writeAny(e){Cp(this.restEncoder,e)}writeBuf(e){wp(this.restEncoder,e)}writeJSON(e){yp(this.restEncoder,JSON.stringify(e))}writeKey(e){yp(this.restEncoder,e)}}class Vv{constructor(){this.restEncoder=sp(),this.dsCurrVal=0}toUint8Array(){return dp(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,vp(this.restEncoder,t)}writeDsLen(e){0===e&&Fp(),vp(this.restEncoder,e-1),this.dsCurrVal+=e}}class Lv extends Vv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new jp,this.clientEncoder=new Sp,this.leftClockEncoder=new jp,this.rightClockEncoder=new jp,this.infoEncoder=new Ep(pp),this.stringEncoder=new Dp,this.parentInfoEncoder=new Ep(pp),this.typeRefEncoder=new Sp,this.lenEncoder=new Sp}toUint8Array(){const e=sp();return vp(e,0),wp(e,this.keyClockEncoder.toUint8Array()),wp(e,this.clientEncoder.toUint8Array()),wp(e,this.leftClockEncoder.toUint8Array()),wp(e,this.rightClockEncoder.toUint8Array()),wp(e,dp(this.infoEncoder)),wp(e,this.stringEncoder.toUint8Array()),wp(e,dp(this.parentInfoEncoder)),wp(e,this.typeRefEncoder.toUint8Array()),wp(e,this.lenEncoder.toUint8Array()),bp(e,dp(this.restEncoder)),dp(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Cp(this.restEncoder,e)}writeBuf(e){wp(this.restEncoder,e)}writeJSON(e){Cp(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const zv=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{th(t,n)>e&&r.set(n,e)})),eh(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),vp(e.restEncoder,r.size),Wf(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=Xf(r,t[0].id.clock);const o=rh(t,r);vp(e.restEncoder,t.length-o),e.writeClient(n),vp(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))};class Uv{constructor(){this.l=[]}}const Hv=()=>new Uv,qv=(e,t)=>e.l.push(t),Wv=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},$v=(e,t,n)=>rv(e.l,[t,n]);class Gv{constructor(e,t){this.client=e,this.clock=t}}const Kv=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Yv=(e,t)=>new Gv(e,t),Jv=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},Xv=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Rv(t.ds,e.id),Zv=(e,t)=>{const n=zf(e.meta,Zv,Uf),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<th(r,n)&&ah(e,Yv(n,t))})),Av(e,t.ds,(e=>{})),n.add(t))};class Qv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const eh=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},th=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},nh=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Fp()}n.push(t)},rh=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let a=Kf(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[a],i=o.id.clock,i<=t){if(t<i+o.length)return a;n=a+1}else r=a-1;a=Kf((n+r)/2)}throw Fp()},oh=(e,t)=>{const n=e.clients.get(t.client);return n[rh(n,t.clock)]},ih=(e,t,n)=>{const r=rh(t,n),o=t[r];return o.id.clock<n&&o instanceof Pg?(t.splice(r+1,0,Rg(e,o,n-o.id.clock)),r+1):r},ah=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[ih(e,n,t.clock)]},uh=(e,t,n)=>{const r=t.clients.get(n.client),o=rh(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==hg&&r.splice(o+1,0,Rg(e,i,n.clock-i.id.clock+1)),i},lh=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,u=ih(e,t,n);do{a=t[u++],i<a.id.clock+a.length&&ih(e,t,i),o(a)}while(u<t.length&&t[u].id.clock<i)};const ch=(e,t)=>!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=Nf(e);try{for(r.s();!(n=r.n()).done;){var o=Tf(n.value,2),i=o[0];if(t(o[1],i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(Fv(t.deleteSet),((e,t)=>{zv(e,t.doc.store,t.beforeState)})(e,t),((e,t)=>{vp(e.restEncoder,t.clients.size),Wf(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),vp(e.restEncoder,t);const r=n.length;vp(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))})(e,t.deleteSet),!0),sh=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&zf(e.changed,t,Uf).add(n)},dh=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--o-1])n instanceof Pg&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},fh=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,a=n._mergeStructs;try{Fv(i),n.afterState=eh(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),$v(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),rv(e,[]),n._needFormattingCleanup&&ag(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=rh(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof Pg&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(i,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Jf(r.length-1,1+rh(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+dh(r,e)}}))})(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=Xf(rh(e,r),1);for(let t=e.length-1;t>=n;)t-=1+dh(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=rh(r,n);i+1<r.length&&dh(r,i+1)>1||i>0&&dh(r,i)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(!function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,tl(Ev(n))),Ov.forEach((function(e){return e.print(n)}))}(_v,vv,"[yjs] ",hv,bv,"Changed the client-id because another client seems to be using it."),r.clientID=Mv()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Bv;ch(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new Lv;ch(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:u,subdocsLoaded:l,subdocsRemoved:c}=n;(u.size>0||c.size>0||l.size>0)&&(u.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:l,added:u,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):fh(e,t+1)}}},ph=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new class{constructor(e,t,n){this.doc=e,this.deleteSet=new Dv,this.beforeState=eh(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&fh(o,0)}}return a};class vh{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const hh=(e,t,n)=>{Av(e,n.deletions,(e=>{e instanceof Pg&&t.scope.some((t=>Jv(t,e)))&&Ag(e,!1)}))},gh=(e,t,n)=>{let r=null,o=null;const i=e.doc,a=e.scope;if(ph(i,(n=>{for(;t.length>0&&null===r;){const o=i.store,u=t.pop(),l=new Set,c=[];let s=!1;Av(n,u.insertions,(e=>{if(e instanceof Pg){if(null!==e.redone){let{item:t,diff:r}=Dg(o,e.id);r>0&&(t=ah(n,Yv(t.id.client,t.id.clock+r))),e=t}!e.deleted&&a.some((t=>Jv(t,e)))&&c.push(e)}})),Av(n,u.deletions,(e=>{e instanceof Pg&&a.some((t=>Jv(t,e)))&&!Rv(u.insertions,e.id)&&l.add(e)})),l.forEach((t=>{s=null!==Ig(n,t,l,u.insertions,e.ignoreRemoteMapChanges,e)||s}));for(let t=c.length-1;t>=0;t--){const r=c[t];e.deleteFilter(r)&&(r.delete(n),s=!0)}r=s?u:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),o=n}),e),null!=r){const t=o.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:t},e])}return r};class mh extends Gf{constructor(e,{captureTimeout:t=500,captureTransaction:n=(e=>!0),deleteFilter:r=(()=>!0),trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=($f(e)?e[0].doc:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new Dv;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&Pv(o,n,r,i)}));const i=Np();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=Iv([t.deletions,e.deleteSet]),t.insertions=Iv([t.insertions,o])}else r.push(new vh(e.deleteSet,o)),a=!0;t||n||(this.lastChange=i),Av(e,e.deleteSet,(e=>{e instanceof Pg&&this.scope.some((t=>Jv(t,e)))&&Ag(e,!0)}));const u=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",u):this.emit("stack-item-updated",u)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){(e=$f(e)?e:[e]).forEach((e=>{this.scope.every((t=>t!==e))&&(e.doc!==this.doc&&function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,tl(Ev(n))),n.unshift(_v),Ov.forEach((function(e){return e.print(n)}))}("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>hh(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>hh(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=gh(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=gh(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}const yh="You must not compute changes after the event-handler fired.";class bh{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=wh(this.currentTarget,this.target))}deletes(e){return Rv(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Ap(yh);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=Hf(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=Hf(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=Hf(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Ap(yh);const t=this.target,n=Uf(),r=Uf(),o=[];e={added:n,deleted:r,delta:o,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const wh=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n};let _h=0;class kh{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=_h++}}const Ch=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=_h++},Eh=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Yf(t-e.index)<Yf(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=_h++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&Yf(n.index-o)<r.parent.length/80?(Ch(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return Ch(r,t,n),r}{const r=new kh(t,n);return e.push(r),r}})(e._searchMarker,r,o)},Oh=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Xf(t,o.index+n))}},Sh=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;zf(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;$v(r._eH,n,t)};class xh{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Hv(),this._dEH=Hv(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Rp()}clone(){throw Rp()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){qv(this._eH,e)}observeDeep(e){qv(this._dEH,e)}unobserve(e){Wv(this._eH,e)}unobserveDeep(e){Wv(this._dEH,e)}toJSON(){}}const jh=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},Dh=e=>{const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Ah=(e,t)=>{let n=0,r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},Rh=(e,t)=>{const n=[];return Ah(e,((r,o)=>{n.push(t(r,o,e))})),n},Fh=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Ih=(e,t)=>{const n=Eh(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Ph=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,u=i.store,l=null===n?t._start:n.right;let c=[];const s=()=>{c.length>0&&(o=new Pg(Yv(a,th(u,a)),o,o&&o.lastId,l,l&&l.id,t,null,new _g(c)),o.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(s(),n.constructor){case Uint8Array:case ArrayBuffer:o=new Pg(Yv(a,th(u,a)),o,o&&o.lastId,l,l&&l.id,t,null,new gg(new Uint8Array(n))),o.integrate(e,0);break;case Tv:o=new Pg(Yv(a,th(u,a)),o,o&&o.lastId,l,l&&l.id,t,null,new yg(n)),o.integrate(e,0);break;default:if(!(n instanceof xh))throw new Error("Unexpected content type in insert operation");o=new Pg(Yv(a,th(u,a)),o,o&&o.lastId,l,l&&l.id,t,null,new jg(n)),o.integrate(e,0)}}})),s()},Mh=()=>Ap("Length exceeded!"),Th=(e,t,n,r)=>{if(n>t._length)throw Mh();if(0===n)return t._searchMarker&&Oh(t._searchMarker,n,r.length),Ph(e,t,null,r);const o=n,i=Eh(t,n);let a=t._start;for(null!==i&&(a=i.p,0===(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&ah(e,Yv(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&Oh(t._searchMarker,o,r.length),Ph(e,t,a,r)},Nh=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=Eh(t,n);let u=t._start;for(null!==a&&(u=a.p,n-=a.index);null!==u&&n>0;u=u.right)!u.deleted&&u.countable&&(n<u.length&&ah(e,Yv(u.id.client,u.id.clock+n)),n-=u.length);for(;r>0&&null!==u;)u.deleted||(r<u.length&&ah(e,Yv(u.id.client,u.id.clock+r)),u.delete(e),r-=u.length),u=u.right;if(r>0)throw Mh();t._searchMarker&&Oh(t._searchMarker,o,-i+r)},Bh=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Vh=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let u;if(null==r)u=new _g([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:u=new _g([r]);break;case Uint8Array:u=new gg(r);break;case Tv:u=new yg(r);break;default:if(!(r instanceof xh))throw new Error("Unexpected content type");u=new jg(r)}new Pg(Yv(a,th(i.store,a)),o,o&&o.lastId,null,null,t,n,u).integrate(e,0)},Lh=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},zh=e=>{const t={};return e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Uh=(e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted},Hh=e=>{return t=e.entries(),n=e=>!e[1].deleted,Sv((function(){var e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n};class qh extends bh{constructor(e,t){super(e,t),this._transaction=t}}class Wh extends xh{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Wh;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wh}clone(){const e=new Wh;return e.insert(0,this.toArray().map((e=>e instanceof xh?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),Sh(this,e,new qh(this,e))}insert(e,t){null!==this.doc?ph(this.doc,(n=>{Th(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?ph(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;Ph(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?ph(this.doc,(n=>{Nh(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return Ih(this,e)}toArray(){return Dh(this)}slice(e=0,t=this.length){return jh(this,e,t)}toJSON(){return this.map((e=>e instanceof xh?e.toJSON():e))}map(e){return Rh(this,e)}forEach(e){Ah(this,e)}[Symbol.iterator](){return Fh(this)}_write(e){e.writeTypeRef(Cg)}}class $h extends bh{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Gh extends xh{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Gh}clone(){const e=new Gh;return this.forEach(((t,n)=>{e.set(n,t instanceof xh?t.clone():t)})),e}_callObserver(e,t){Sh(this,e,new $h(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof xh?r.toJSON():r}})),e}get size(){return[...Hh(this._map)].length}keys(){return xv(Hh(this._map),(e=>e[0]))}values(){return xv(Hh(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return xv(Hh(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?ph(this.doc,(t=>{Bh(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?ph(this.doc,(n=>{Vh(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Lh(this,e)}has(e){return Uh(this,e)}clear(){null!==this.doc?ph(this.doc,(e=>{this.forEach((function(t,n,r){Bh(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(Eg)}}const Kh=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&nv(e,t);class Yh{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&Fp(),this.right.content.constructor===wg)this.right.deleted||Qh(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Jh=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===wg)t.right.deleted||Qh(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&ah(e,Yv(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Xh=(e,t,n)=>{const r=new Map,o=Eh(t,n);if(o){const t=new Yh(o.p.left,o.p,o.index,r);return Jh(e,t,n-o.index)}{const o=new Yh(null,t._start,0,r);return Jh(e,o,n)}},Zh=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===wg&&Kh(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,a)=>{const u=n.left,l=n.right,c=new Pg(Yv(i,th(o.store,i)),u,u&&u.lastId,l,l&&l.id,t,null,new wg(a,r));c.integrate(e,0),n.right=c,n.forward()}))},Qh=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},eg=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===wg&&Kh(t[e.right.content.key]||null,e.right.content.value));)e.forward()},tg=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const u in r){const l=r[u],c=n.currentAttributes.get(u)||null;if(!Kh(c,l)){a.set(u,c);const{left:r,right:s}=n;n.right=new Pg(Yv(i,th(o.store,i)),r,r&&r.lastId,s,s&&s.id,t,null,new wg(u,l)),n.right.integrate(e,0),n.forward()}}return a},ng=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,a=i.clientID;eg(n,o);const u=tg(e,t,n,o),l=r.constructor===String?new kg(r):r instanceof xh?new jg(r):new bg(r);let{left:c,right:s,index:d}=n;t._searchMarker&&Oh(t._searchMarker,n.index,l.getLength()),s=new Pg(Yv(a,th(i.store,a)),c,c&&c.lastId,s,s&&s.id,t,null,l),s.integrate(e,0),n.right=s,n.index=d,n.forward(),Zh(e,t,n,u)},rg=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;eg(n,o);const u=tg(e,t,n,o);e:for(;null!==n.right&&(r>0||u.size>0&&(n.right.deleted||n.right.content.constructor===wg));){if(!n.right.deleted)switch(n.right.content.constructor){case wg:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(Kh(a,i))u.delete(t);else{if(0===r)break e;u.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&ah(e,Yv(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new Pg(Yv(a,th(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new kg(o)),n.right.integrate(e,0),n.forward()}Zh(e,t,n,u)},og=(e,t,n,r,o)=>{let i=t;const a=Vf();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===wg){const e=i.content;a.set(e.key,e)}i=i.right}let u=0,l=!1;for(;t!==i;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case wg:{const{key:i,value:c}=n,s=r.get(i)||null;a.get(i)===n&&s!==c||(t.delete(e),u++,l||(o.get(i)||null)!==c||s===c||(null===s?o.delete(i):o.set(i,s))),l||t.deleted||Qh(o,n);break}}}t=t.right}return u},ig=e=>{let t=0;return ph(e.doc,(n=>{let r=e._start,o=e._start,i=Vf();const a=Lf(i);for(;o;){if(!1===o.deleted)if(o.content.constructor===wg)Qh(a,o.content);else t+=og(n,r,o,i,a),i=Lf(a),r=o;o=o.right}})),t},ag=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&lh(e,n.store.clients.get(r),i,o,(e=>{e.deleted||e.content.constructor!==wg||e.constructor===hg||t.add(e.parent)}))}ph(n,(n=>{Av(e,e.deleteSet,(e=>{if(e instanceof hg||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===wg?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===wg){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)ig(e)}))},ug=(e,t,n)=>{const r=n,o=Lf(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case jg:case bg:case kg:n<t.right.length&&ah(e,Yv(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&og(e,i,t.right,o,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&Oh(a._searchMarker,t.index,-r+n),t};class lg extends bh{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];ph(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let u="",l=0,c=0;const s=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof u||u.length>0)&&(e={insert:u},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),u="";break;case"retain":l>0&&(e={retain:l},function(e){for(var t in e)return!1;return!0}(a)||(e.attributes=Qp({},a))),l=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case jg:case bg:this.adds(o)?this.deletes(o)||(s(),i="insert",u=o.content.getContent()[0],s()):this.deletes(o)?("delete"!==i&&(s(),i="delete"),c+=1):o.deleted||("retain"!==i&&(s(),i="retain"),l+=1);break;case kg:this.adds(o)?this.deletes(o)||("insert"!==i&&(s(),i="insert"),u+=o.content.str):this.deletes(o)?("delete"!==i&&(s(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(s(),i="retain"),l+=o.length);break;case wg:{const{key:t,value:u}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=n.get(t)||null;Kh(l,u)?null!==u&&o.delete(e):("retain"===i&&s(),Kh(u,r.get(t)||null)?delete a[t]:a[t]=u)}}else if(this.deletes(o)){r.set(t,u);const e=n.get(t)||null;Kh(e,u)||("retain"===i&&s(),a[t]=e)}else if(!o.deleted){r.set(t,u);const n=a[t];void 0!==n&&(Kh(n,u)?null!==n&&o.delete(e):("retain"===i&&s(),null===u?delete a[t]:a[t]=u))}o.deleted||("insert"===i&&s(),Qh(n,o.content));break}}o=o.right}for(s();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class cg extends xh{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new cg}clone(){const e=new cg;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new lg(this,e,t);Sh(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===kg&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?ph(this.doc,(n=>{const r=new Yh(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&ng(n,this,r,a,i.attributes||{})}else void 0!==i.retain?rg(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&ug(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){const r=[],o=new Map,i=this.doc;let a="",u=this._start;function l(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==u;){if(Xv(u,e)||void 0!==t&&Xv(u,t))switch(u.content.constructor){case kg:{const r=o.get("ychange");void 0===e||Xv(u,e)?void 0===t||Xv(u,t)?void 0!==r&&(l(),o.delete("ychange")):void 0!==r&&r.user===u.id.client&&"added"===r.type||(l(),o.set("ychange",n?n("added",u.id):{type:"added"})):void 0!==r&&r.user===u.id.client&&"removed"===r.type||(l(),o.set("ychange",n?n("removed",u.id):{type:"removed"})),a+=u.content.str;break}case jg:case bg:{l();const e={insert:u.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case wg:Xv(u,e)&&(l(),Qh(o,u.content))}u=u.right}l()};return e||t?ph(i,(n=>{e&&Zv(n,e),t&&Zv(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?ph(r,(r=>{const o=Xh(r,this,e);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),ng(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n={}){const r=this.doc;null!==r?ph(r,(r=>{const o=Xh(r,this,e);ng(r,this,o,t,n)})):this._pending.push((()=>this.insertEmbed(e,t,n)))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?ph(n,(n=>{ug(n,Xh(n,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?ph(r,(r=>{const o=Xh(r,this,e);null!==o.right&&rg(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?ph(this.doc,(t=>{Bh(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?ph(this.doc,(n=>{Vh(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Lh(this,e)}getAttributes(){return zh(this)}_write(e){e.writeTypeRef(Og)}}class sg{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==fg&&t.constructor!==dg||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class dg extends xh{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new dg}clone(){const e=new dg;return e.insert(0,this.toArray().map((e=>e instanceof xh?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new sg(this,e)}querySelector(e){e=e.toUpperCase();const t=new sg(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Wf(new sg(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){Sh(this,e,new pg(this,t,e))}toString(){return Rh(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Ah(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?ph(this.doc,(n=>{Th(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)ph(this.doc,(n=>{const r=e&&e instanceof xh?e._item:e;Ph(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw Ap("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?ph(this.doc,(n=>{Nh(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return Dh(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ih(this,e)}slice(e=0,t=this.length){return jh(this,e,t)}forEach(e){Ah(this,e)}_write(e){e.writeTypeRef(xg)}}class fg extends dg{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new fg(this.nodeName)}clone(){const e=new fg(this.nodeName);return function(e,t){for(var n in e)t(e[n],n)}(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof xh?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?ph(this.doc,(t=>{Bh(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?ph(this.doc,(n=>{Vh(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Lh(this,e)}hasAttribute(e){return Uh(this,e)}getAttributes(){return zh(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return Ah(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(Sg),e.writeKey(this.nodeName)}}class pg extends bh{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class vg{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Rp()}mergeWith(e){return!1}write(e,t,n){throw Rp()}integrate(e,t){throw Rp()}}class hg extends vg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),nh(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class gg{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new gg(this.content)}splice(e){throw Rp()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class mg{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new mg(this.len)}splice(e){const t=new mg(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Pv(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}class yg{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new yg((e=this.doc.guid,t=this.opts,new Tv({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1})));var e,t}splice(e){throw Rp()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class bg{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new bg(this.embed)}splice(e){throw Rp()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class wg{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new wg(this.key,this.value)}splice(e){throw Rp()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class _g{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new _g(this.arr)}splice(e){const t=new _g(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class kg{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new kg(this.str)}splice(e){const t=new kg(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const Cg=0,Eg=1,Og=2,Sg=3,xg=4;class jg{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new jg(this.type._copy())}splice(e){throw Rp()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Dg=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=Yv(r.client,r.clock+o)),n=oh(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Pg);return{item:n,diff:o}},Ag=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},Rg=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Pg(Yv(r,o+n),t,Yv(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Yv(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},Fg=(e,t)=>function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}(e,(e=>Rv(e.deletions,t))),Ig=(e,t,n,r,o,i)=>{const a=e.doc,u=a.store,l=a.clientID,c=t.redone;if(null!==c)return ah(e,c);let s,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===Ig(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=ah(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,s=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:ah(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==s;){let t=s;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:ah(e,t.redone);if(null!==t&&t.parent._item===d){s=t;break}s=s.right}}else if(s=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||Rv(r,f.right.id)||Fg(i.undoStack,f.right.id)||Fg(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=ah(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const v=th(u,l),h=Yv(l,v),g=new Pg(h,f,f&&f.lastId,s,s&&s.id,p,t.parentSub,t.content.copy());return t.redone=h,Ag(g,!0),g.integrate(e,0),g};let Pg=class e extends vg{constructor(e,t,n,r,o,i,a,u){super(e,u.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=u,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=th(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=th(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Gv&&this.id.client!==this.parent.client&&this.parent.clock>=th(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=uh(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ah(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===hg||this.right&&this.right.constructor===hg)this.parent=null;else if(this.parent){if(this.parent.constructor===Gv){const e=oh(n,this.parent);e.constructor===hg?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===e&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===e&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=uh(e,e.doc.store,Yv(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),Kv(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Kv(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(oh(e.doc.store,t.origin)))break;r.has(oh(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),nh(e.doc.store,this),this.content.integrate(e,this),sh(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new hg(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Yv(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Kv(e.origin,this.lastId)&&this.right===e&&Kv(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),Pv(e.deleteSet,this.id.client,this.id.clock,this.length),sh(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Fp();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[rh(r,t.id.clock)]=n})(e,this,new hg(this.id,this.length)):this.content=new mg(this.length)}write(e,t){const n=t>0?Yv(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:Zf)|(null===r?0:64)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=(e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Fp()})(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Gv?(e.writeParentInfo(!1),e.writeLeftID(t)):Fp();null!==o&&e.writeString(o)}this.content.write(e,t)}};const Mg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{},Tg="__ $YJS$ __";!0===Mg[Tg]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Mg[Tg]=!0;var Ng={};!function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==Ln(r))throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},o={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(t)}(Ng);var Bg={},Vg={},Lg={},zg=Ng,Ug=0,Hg=1;function qg(e){for(var t=e.length;--t>=0;)e[t]=0}var Wg=0,$g=29,Gg=256,Kg=Gg+1+$g,Yg=30,Jg=19,Xg=2*Kg+1,Zg=15,Qg=16,em=7,tm=256,nm=16,rm=17,om=18,im=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],am=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],um=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],lm=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],cm=new Array(2*(Kg+2));qg(cm);var sm=new Array(2*Yg);qg(sm);var dm=new Array(512);qg(dm);var fm=new Array(256);qg(fm);var pm=new Array($g);qg(pm);var vm,hm,gm,mm=new Array(Yg);function ym(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function bm(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function wm(e){return e<256?dm[e]:dm[256+(e>>>7)]}function _m(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function km(e,t,n){e.bi_valid>Qg-n?(e.bi_buf|=t<<e.bi_valid&65535,_m(e,e.bi_buf),e.bi_buf=t>>Qg-e.bi_valid,e.bi_valid+=n-Qg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Cm(e,t,n){km(e,n[2*t],n[2*t+1])}function Em(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Om(e,t,n){var r,o,i=new Array(Zg+1),a=0;for(r=1;r<=Zg;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=t;o++){var u=e[2*o+1];0!==u&&(e[2*o]=Em(i[u]++,u))}}function Sm(e){var t;for(t=0;t<Kg;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Yg;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Jg;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*tm]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function xm(e){e.bi_valid>8?_m(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function jm(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function Dm(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&jm(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!jm(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function Am(e,t,n){var r,o,i,a,u=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],o=e.pending_buf[e.l_buf+u],u++,0===r?Cm(e,o,t):(Cm(e,(i=fm[o])+Gg+1,t),0!==(a=im[i])&&km(e,o-=pm[i],a),Cm(e,i=wm(--r),n),0!==(a=am[i])&&km(e,r-=mm[i],a))}while(u<e.last_lit);Cm(e,tm,t)}function Rm(e,t){var n,r,o,i=t.dyn_tree,a=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=Xg,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,u&&(e.static_len-=a[2*o+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Dm(e,i,n);o=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Dm(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,Dm(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,i,a,u,l=t.dyn_tree,c=t.max_code,s=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,h=0;for(i=0;i<=Zg;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Xg;n++)(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)>v&&(i=v,h++),l[2*r+1]=i,r>c||(e.bl_count[i]++,a=0,r>=p&&(a=f[r-p]),u=l[2*r],e.opt_len+=u*(i+a),d&&(e.static_len+=u*(s[2*r+1]+a)));if(0!==h){do{for(i=v-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[v]--,h-=2}while(h>0);for(i=v;0!==i;i--)for(r=e.bl_count[i];0!==r;)(o=e.heap[--n])>c||(l[2*o+1]!==i&&(e.opt_len+=(i-l[2*o+1])*l[2*o],l[2*o+1]=i),r--)}}(e,t),Om(i,c,e.bl_count)}function Fm(e,t,n){var r,o,i=-1,a=t[1],u=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++u<l&&o===a||(u<c?e.bl_tree[2*o]+=u:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*nm]++):u<=10?e.bl_tree[2*rm]++:e.bl_tree[2*om]++,u=0,i=o,0===a?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4))}function Im(e,t,n){var r,o,i=-1,a=t[1],u=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++u<l&&o===a)){if(u<c)do{Cm(e,o,e.bl_tree)}while(0!=--u);else 0!==o?(o!==i&&(Cm(e,o,e.bl_tree),u--),Cm(e,nm,e.bl_tree),km(e,u-3,2)):u<=10?(Cm(e,rm,e.bl_tree),km(e,u-3,3)):(Cm(e,om,e.bl_tree),km(e,u-11,7));u=0,i=o,0===a?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4)}}qg(mm);var Pm=!1;function Mm(e,t,n,r){km(e,(Wg<<1)+(r?1:0),3),function(e,t,n,r){xm(e),_m(e,n),_m(e,~n),zg.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}Lg._tr_init=function(e){Pm||(!function(){var e,t,n,r,o,i=new Array(Zg+1);for(n=0,r=0;r<$g-1;r++)for(pm[r]=n,e=0;e<1<<im[r];e++)fm[n++]=r;for(fm[n-1]=r,o=0,r=0;r<16;r++)for(mm[r]=o,e=0;e<1<<am[r];e++)dm[o++]=r;for(o>>=7;r<Yg;r++)for(mm[r]=o<<7,e=0;e<1<<am[r]-7;e++)dm[256+o++]=r;for(t=0;t<=Zg;t++)i[t]=0;for(e=0;e<=143;)cm[2*e+1]=8,e++,i[8]++;for(;e<=255;)cm[2*e+1]=9,e++,i[9]++;for(;e<=279;)cm[2*e+1]=7,e++,i[7]++;for(;e<=287;)cm[2*e+1]=8,e++,i[8]++;for(Om(cm,Kg+1,i),e=0;e<Yg;e++)sm[2*e+1]=5,sm[2*e]=Em(e,5);vm=new ym(cm,im,Gg+1,Kg,Zg),hm=new ym(sm,am,0,Yg,Zg),gm=new ym(new Array(0),um,0,Jg,em)}(),Pm=!0),e.l_desc=new bm(e.dyn_ltree,vm),e.d_desc=new bm(e.dyn_dtree,hm),e.bl_desc=new bm(e.bl_tree,gm),e.bi_buf=0,e.bi_valid=0,Sm(e)},Lg._tr_stored_block=Mm,Lg._tr_flush_block=function(e,t,n,r){var o,i,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Ug;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Hg;for(t=32;t<Gg;t++)if(0!==e.dyn_ltree[2*t])return Hg;return Ug}(e)),Rm(e,e.l_desc),Rm(e,e.d_desc),a=function(e){var t;for(Fm(e,e.dyn_ltree,e.l_desc.max_code),Fm(e,e.dyn_dtree,e.d_desc.max_code),Rm(e,e.bl_desc),t=Jg-1;t>=3&&0===e.bl_tree[2*lm[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?Mm(e,t,n,r):4===e.strategy||i===o?(km(e,2+(r?1:0),3),Am(e,cm,sm)):(km(e,4+(r?1:0),3),function(e,t,n,r){var o;for(km(e,t-257,5),km(e,n-1,5),km(e,r-4,4),o=0;o<r;o++)km(e,e.bl_tree[2*lm[o]+1],3);Im(e,e.dyn_ltree,t-1),Im(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Am(e,e.dyn_ltree,e.dyn_dtree)),Sm(e),r&&xm(e)},Lg._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(fm[n]+Gg+1)]++,e.dyn_dtree[2*wm(t)]++),e.last_lit===e.lit_bufsize-1},Lg._tr_align=function(e){km(e,2,3),Cm(e,tm,cm),function(e){16===e.bi_valid?(_m(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var Tm=function(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(o=o+t[r++]|0)|0}while(--a);o%=65521,i%=65521}return o|i<<16|0};var Nm=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var Bm,Vm=function(e,t,n,r){var o=Nm,i=r+n;e^=-1;for(var a=r;a<i;a++)e=e>>>8^o[255&(e^t[a])];return-1^e},Lm={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zm=Ng,Um=Lg,Hm=Tm,qm=Vm,Wm=Lm,$m=0,Gm=4,Km=0,Ym=-2,Jm=-1,Xm=4,Zm=2,Qm=8,ey=9,ty=286,ny=30,ry=19,oy=2*ty+1,iy=15,ay=3,uy=258,ly=uy+ay+1,cy=42,sy=103,dy=113,fy=666,py=1,vy=2,hy=3,gy=4;function my(e,t){return e.msg=Wm[t],t}function yy(e){return(e<<1)-(e>4?9:0)}function by(e){for(var t=e.length;--t>=0;)e[t]=0}function wy(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(zm.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function _y(e,t){Um._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wy(e.strm)}function ky(e,t){e.pending_buf[e.pending++]=t}function Cy(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Ey(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,zm.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=Hm(e.adler,t,o,n):2===e.state.wrap&&(e.adler=qm(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function Oy(e,t){var n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,u=e.nice_match,l=e.strstart>e.w_size-ly?e.strstart-(e.w_size-ly):0,c=e.window,s=e.w_mask,d=e.prev,f=e.strstart+uy,p=c[i+a-1],v=c[i+a];e.prev_length>=e.good_match&&(o>>=2),u>e.lookahead&&(u=e.lookahead);do{if(c[(n=t)+a]===v&&c[n+a-1]===p&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=uy-(f-i),i=f-uy,r>a){if(e.match_start=t,a=r,r>=u)break;p=c[i+a-1],v=c[i+a]}}}while((t=d[t&s])>l&&0!=--o);return a<=e.lookahead?a:e.lookahead}function Sy(e){var t,n,r,o,i,a=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ly)){zm.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);o+=a}if(0===e.strm.avail_in)break;if(n=Ey(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=ay)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+ay-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<ay)););}while(e.lookahead<ly&&0!==e.strm.avail_in)}function xy(e,t){for(var n,r;;){if(e.lookahead<ly){if(Sy(e),e.lookahead<ly&&t===$m)return py;if(0===e.lookahead)break}if(n=0,e.lookahead>=ay&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ay-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ly&&(e.match_length=Oy(e,n)),e.match_length>=ay)if(r=Um._tr_tally(e,e.strstart-e.match_start,e.match_length-ay),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ay){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ay-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Um._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(_y(e,!1),0===e.strm.avail_out))return py}return e.insert=e.strstart<ay-1?e.strstart:ay-1,t===Gm?(_y(e,!0),0===e.strm.avail_out?hy:gy):e.last_lit&&(_y(e,!1),0===e.strm.avail_out)?py:vy}function jy(e,t){for(var n,r,o;;){if(e.lookahead<ly){if(Sy(e),e.lookahead<ly&&t===$m)return py;if(0===e.lookahead)break}if(n=0,e.lookahead>=ay&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ay-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ay-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ly&&(e.match_length=Oy(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===ay&&e.strstart-e.match_start>4096)&&(e.match_length=ay-1)),e.prev_length>=ay&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-ay,r=Um._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ay),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ay-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ay-1,e.strstart++,r&&(_y(e,!1),0===e.strm.avail_out))return py}else if(e.match_available){if((r=Um._tr_tally(e,0,e.window[e.strstart-1]))&&_y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return py}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Um._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ay-1?e.strstart:ay-1,t===Gm?(_y(e,!0),0===e.strm.avail_out?hy:gy):e.last_lit&&(_y(e,!1),0===e.strm.avail_out)?py:vy}function Dy(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function Ay(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Qm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new zm.Buf16(2*oy),this.dyn_dtree=new zm.Buf16(2*(2*ny+1)),this.bl_tree=new zm.Buf16(2*(2*ry+1)),by(this.dyn_ltree),by(this.dyn_dtree),by(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new zm.Buf16(iy+1),this.heap=new zm.Buf16(2*ty+1),by(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new zm.Buf16(2*ty+1),by(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ry(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Zm,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?cy:dy,e.adler=2===t.wrap?0:1,t.last_flush=$m,Um._tr_init(t),Km):my(e,Ym)}function Fy(e){var t,n=Ry(e);return n===Km&&((t=e.state).window_size=2*t.w_size,by(t.head),t.max_lazy_match=Bm[t.level].max_lazy,t.good_match=Bm[t.level].good_length,t.nice_match=Bm[t.level].nice_length,t.max_chain_length=Bm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ay-1,t.match_available=0,t.ins_h=0),n}function Iy(e,t,n,r,o,i){if(!e)return Ym;var a=1;if(t===Jm&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>ey||n!==Qm||r<8||r>15||t<0||t>9||i<0||i>Xm)return my(e,Ym);8===r&&(r=9);var u=new Ay;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ay-1)/ay),u.window=new zm.Buf8(2*u.w_size),u.head=new zm.Buf16(u.hash_size),u.prev=new zm.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new zm.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=i,u.method=n,Fy(e)}Bm=[new Dy(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Sy(e),0===e.lookahead&&t===$m)return py;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,_y(e,!1),0===e.strm.avail_out))return py;if(e.strstart-e.block_start>=e.w_size-ly&&(_y(e,!1),0===e.strm.avail_out))return py}return e.insert=0,t===Gm?(_y(e,!0),0===e.strm.avail_out?hy:gy):(e.strstart>e.block_start&&(_y(e,!1),e.strm.avail_out),py)})),new Dy(4,4,8,4,xy),new Dy(4,5,16,8,xy),new Dy(4,6,32,32,xy),new Dy(4,4,16,16,jy),new Dy(8,16,32,32,jy),new Dy(8,16,128,128,jy),new Dy(8,32,128,256,jy),new Dy(32,128,258,1024,jy),new Dy(32,258,258,4096,jy)],Vg.deflateInit=function(e,t){return Iy(e,t,Qm,15,8,0)},Vg.deflateInit2=Iy,Vg.deflateReset=Fy,Vg.deflateResetKeep=Ry,Vg.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?Ym:(e.state.gzhead=t,Km):Ym},Vg.deflate=function(e,t){var n,r,o,i;if(!e||!e.state||t>5||t<0)return e?my(e,Ym):Ym;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===fy&&t!==Gm)return my(e,0===e.avail_out?-5:Ym);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===cy)if(2===r.wrap)e.adler=0,ky(r,31),ky(r,139),ky(r,8),r.gzhead?(ky(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ky(r,255&r.gzhead.time),ky(r,r.gzhead.time>>8&255),ky(r,r.gzhead.time>>16&255),ky(r,r.gzhead.time>>24&255),ky(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),ky(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ky(r,255&r.gzhead.extra.length),ky(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=qm(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(ky(r,0),ky(r,0),ky(r,0),ky(r,0),ky(r,0),ky(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),ky(r,3),r.status=dy);else{var a=Qm+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=dy,Cy(r,a),0!==r.strstart&&(Cy(r,e.adler>>>16),Cy(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),wy(e),o=r.pending,r.pending!==r.pending_buf_size));)ky(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),wy(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ky(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),wy(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ky(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=qm(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.status=sy)}else r.status=sy;if(r.status===sy&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&wy(e),r.pending+2<=r.pending_buf_size&&(ky(r,255&e.adler),ky(r,e.adler>>8&255),e.adler=0,r.status=dy)):r.status=dy),0!==r.pending){if(wy(e),0===e.avail_out)return r.last_flush=-1,Km}else if(0===e.avail_in&&yy(t)<=yy(n)&&t!==Gm)return my(e,-5);if(r.status===fy&&0!==e.avail_in)return my(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==$m&&r.status!==fy){var u=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(Sy(e),0===e.lookahead)){if(t===$m)return py;break}if(e.match_length=0,n=Um._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(_y(e,!1),0===e.strm.avail_out))return py}return e.insert=0,t===Gm?(_y(e,!0),0===e.strm.avail_out?hy:gy):e.last_lit&&(_y(e,!1),0===e.strm.avail_out)?py:vy}(r,t):3===r.strategy?function(e,t){for(var n,r,o,i,a=e.window;;){if(e.lookahead<=uy){if(Sy(e),e.lookahead<=uy&&t===$m)return py;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ay&&e.strstart>0&&(r=a[o=e.strstart-1])===a[++o]&&r===a[++o]&&r===a[++o]){i=e.strstart+uy;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<i);e.match_length=uy-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ay?(n=Um._tr_tally(e,1,e.match_length-ay),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Um._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(_y(e,!1),0===e.strm.avail_out))return py}return e.insert=0,t===Gm?(_y(e,!0),0===e.strm.avail_out?hy:gy):e.last_lit&&(_y(e,!1),0===e.strm.avail_out)?py:vy}(r,t):Bm[r.level].func(r,t);if(u!==hy&&u!==gy||(r.status=fy),u===py||u===hy)return 0===e.avail_out&&(r.last_flush=-1),Km;if(u===vy&&(1===t?Um._tr_align(r):5!==t&&(Um._tr_stored_block(r,0,0,!1),3===t&&(by(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),wy(e),0===e.avail_out))return r.last_flush=-1,Km}return t!==Gm?Km:r.wrap<=0?1:(2===r.wrap?(ky(r,255&e.adler),ky(r,e.adler>>8&255),ky(r,e.adler>>16&255),ky(r,e.adler>>24&255),ky(r,255&e.total_in),ky(r,e.total_in>>8&255),ky(r,e.total_in>>16&255),ky(r,e.total_in>>24&255)):(Cy(r,e.adler>>>16),Cy(r,65535&e.adler)),wy(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Km:1)},Vg.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==cy&&69!==t&&73!==t&&91!==t&&t!==sy&&t!==dy&&t!==fy?my(e,Ym):(e.state=null,t===dy?my(e,-3):Km):Ym},Vg.deflateSetDictionary=function(e,t){var n,r,o,i,a,u,l,c,s=t.length;if(!e||!e.state)return Ym;if(2===(i=(n=e.state).wrap)||1===i&&n.status!==cy||n.lookahead)return Ym;for(1===i&&(e.adler=Hm(e.adler,t,s,0)),n.wrap=0,s>=n.w_size&&(0===i&&(by(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new zm.Buf8(n.w_size),zm.arraySet(c,t,s-n.w_size,n.w_size,0),t=c,s=n.w_size),a=e.avail_in,u=e.next_in,l=e.input,e.avail_in=s,e.next_in=0,e.input=t,Sy(n);n.lookahead>=ay;){r=n.strstart,o=n.lookahead-(ay-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ay-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=ay-1,Sy(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ay-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=a,n.wrap=i,Km},Vg.deflateInfo="pako deflate (from Nodeca project)";var Py={},My=Ng,Ty=!0,Ny=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Ty=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ny=!1}for(var By=new My.Buf8(256),Vy=0;Vy<256;Vy++)By[Vy]=Vy>=252?6:Vy>=248?5:Vy>=240?4:Vy>=224?3:Vy>=192?2:1;function Ly(e,t){if(t<65534&&(e.subarray&&Ny||!e.subarray&&Ty))return String.fromCharCode.apply(null,My.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}By[254]=By[254]=1,Py.string2buf=function(e){var t,n,r,o,i,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new My.Buf8(u),i=0,o=0;i<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},Py.buf2binstring=function(e){return Ly(e,e.length)},Py.binstring2buf=function(e){for(var t=new My.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},Py.buf2string=function(e,t){var n,r,o,i,a=t||e.length,u=new Array(2*a);for(r=0,n=0;n<a;)if((o=e[n++])<128)u[r++]=o;else if((i=By[o])>4)u[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<a;)o=o<<6|63&e[n++],i--;i>1?u[r++]=65533:o<65536?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return Ly(u,r)},Py.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+By[e[n]]>t?n:t};var zy=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Uy=Vg,Hy=Ng,qy=Py,Wy=Lm,$y=zy,Gy=Object.prototype.toString,Ky=0,Yy=-1,Jy=0,Xy=8;function Zy(e){if(!(this instanceof Zy))return new Zy(e);this.options=Hy.assign({level:Yy,method:Xy,chunkSize:16384,windowBits:15,memLevel:8,strategy:Jy,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $y,this.strm.avail_out=0;var n=Uy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ky)throw new Error(Wy[n]);if(t.header&&Uy.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?qy.string2buf(t.dictionary):"[object ArrayBuffer]"===Gy.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Uy.deflateSetDictionary(this.strm,r))!==Ky)throw new Error(Wy[n]);this._dict_set=!0}}function Qy(e,t){var n=new Zy(t);if(n.push(e,!0),n.err)throw n.msg||Wy[n.err];return n.result}Zy.prototype.push=function(e,t){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=qy.string2buf(e):"[object ArrayBuffer]"===Gy.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Hy.Buf8(i),o.next_out=0,o.avail_out=i),1!==(n=Uy.deflate(o,r))&&n!==Ky)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(qy.buf2binstring(Hy.shrinkBuf(o.output,o.next_out))):this.onData(Hy.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===r?(n=Uy.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Ky):2!==r||(this.onEnd(Ky),o.avail_out=0,!0)},Zy.prototype.onData=function(e){this.chunks.push(e)},Zy.prototype.onEnd=function(e){e===Ky&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Hy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Bg.Deflate=Zy,Bg.deflate=Qy,Bg.deflateRaw=function(e,t){return(t=t||{}).raw=!0,Qy(e,t)},Bg.gzip=function(e,t){return(t=t||{}).gzip=!0,Qy(e,t)};var eb={},tb={},nb=Ng,rb=15,ob=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ib=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ab=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ub=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],lb=Ng,cb=Tm,sb=Vm,db=function(e,t){var n,r,o,i,a,u,l,c,s,d,f,p,v,h,g,m,y,b,w,_,k,C,E,O,S;n=e.state,r=e.next_in,O=e.input,o=r+(e.avail_in-5),i=e.next_out,S=e.output,a=i-(t-e.avail_out),u=i+(e.avail_out-257),l=n.dmax,c=n.wsize,s=n.whave,d=n.wnext,f=n.window,p=n.hold,v=n.bits,h=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{v<15&&(p+=O[r++]<<v,v+=8,p+=O[r++]<<v,v+=8),b=h[p&m];t:for(;;){if(p>>>=w=b>>>24,v-=w,0===(w=b>>>16&255))S[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=h[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(v<w&&(p+=O[r++]<<v,v+=8),_+=p&(1<<w)-1,p>>>=w,v-=w),v<15&&(p+=O[r++]<<v,v+=8,p+=O[r++]<<v,v+=8),b=g[p&y];n:for(;;){if(p>>>=w=b>>>24,v-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,v<(w&=15)&&(p+=O[r++]<<v,(v+=8)<w&&(p+=O[r++]<<v,v+=8)),(k+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,v-=w,k>(w=i-a)){if((w=k-w)>s&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,E=f,0===d){if(C+=c-w,w<_){_-=w;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}}else if(d<w){if(C+=c+d-w,(w-=d)<_){_-=w;do{S[i++]=f[C++]}while(--w);if(C=0,d<_){_-=w=d;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}}}else if(C+=d-w,w<_){_-=w;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}for(;_>2;)S[i++]=E[C++],S[i++]=E[C++],S[i++]=E[C++],_-=3;_&&(S[i++]=E[C++],_>1&&(S[i++]=E[C++]))}else{C=i-k;do{S[i++]=S[C++],S[i++]=S[C++],S[i++]=S[C++],_-=3}while(_>2);_&&(S[i++]=S[C++],_>1&&(S[i++]=S[C++]))}break}}break}}while(r<o&&i<u);r-=_=v>>3,p&=(1<<(v-=_<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<u?u-i+257:257-(i-u),n.hold=p,n.bits=v},fb=function(e,t,n,r,o,i,a,u){var l,c,s,d,f,p,v,h,g,m=u.bits,y=0,b=0,w=0,_=0,k=0,C=0,E=0,O=0,S=0,x=0,j=null,D=0,A=new nb.Buf16(16),R=new nb.Buf16(16),F=null,I=0;for(y=0;y<=rb;y++)A[y]=0;for(b=0;b<r;b++)A[t[n+b]]++;for(k=m,_=rb;_>=1&&0===A[_];_--);if(k>_&&(k=_),0===_)return o[i++]=20971520,o[i++]=20971520,u.bits=1,0;for(w=1;w<_&&0===A[w];w++);for(k<w&&(k=w),O=1,y=1;y<=rb;y++)if(O<<=1,(O-=A[y])<0)return-1;if(O>0&&(0===e||1!==_))return-1;for(R[1]=0,y=1;y<rb;y++)R[y+1]=R[y]+A[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[R[t[n+b]]++]=b);if(0===e?(j=F=a,p=19):1===e?(j=ob,D-=257,F=ib,I-=257,p=256):(j=ab,F=ub,p=-1),x=0,b=0,y=w,f=i,C=k,E=0,s=-1,d=(S=1<<k)-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){v=y-E,a[b]<p?(h=0,g=a[b]):a[b]>p?(h=F[I+a[b]],g=j[D+a[b]]):(h=96,g=0),l=1<<y-E,w=c=1<<C;do{o[f+(x>>E)+(c-=l)]=v<<24|h<<16|g|0}while(0!==c);for(l=1<<y-1;x&l;)l>>=1;if(0!==l?(x&=l-1,x+=l):x=0,b++,0==--A[y]){if(y===_)break;y=t[n+a[b]]}if(y>k&&(x&d)!==s){for(0===E&&(E=k),f+=w,O=1<<(C=y-E);C+E<_&&!((O-=A[C+E])<=0);)C++,O<<=1;if(S+=1<<C,1===e&&S>852||2===e&&S>592)return 1;o[s=x&d]=k<<24|C<<16|f-i|0}}return 0!==x&&(o[f+x]=y-E<<24|64<<16|0),u.bits=k,0},pb=1,vb=2,hb=0,gb=-2,mb=1,yb=12,bb=30,wb=852,_b=592;function kb(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Cb(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new lb.Buf16(320),this.work=new lb.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Eb(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=mb,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new lb.Buf32(wb),t.distcode=t.distdyn=new lb.Buf32(_b),t.sane=1,t.back=-1,hb):gb}function Ob(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,Eb(e)):gb}function Sb(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?gb:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ob(e))):gb}function xb(e,t){var n,r;return e?(r=new Cb,e.state=r,r.window=null,(n=Sb(e,t))!==hb&&(e.state=null),n):gb}var jb,Db,Ab=!0;function Rb(e){if(Ab){var t;for(jb=new lb.Buf32(512),Db=new lb.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fb(pb,e.lens,0,288,jb,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fb(vb,e.lens,0,32,Db,0,e.work,{bits:5}),Ab=!1}e.lencode=jb,e.lenbits=9,e.distcode=Db,e.distbits=5}function Fb(e,t,n,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new lb.Buf8(i.wsize)),r>=i.wsize?(lb.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>r&&(o=r),lb.arraySet(i.window,t,n-r,o,i.wnext),(r-=o)?(lb.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}tb.inflateReset=Ob,tb.inflateReset2=Sb,tb.inflateResetKeep=Eb,tb.inflateInit=function(e){return xb(e,15)},tb.inflateInit2=xb,tb.inflate=function(e,t){var n,r,o,i,a,u,l,c,s,d,f,p,v,h,g,m,y,b,w,_,k,C,E,O,S=0,x=new lb.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return gb;(n=e.state).mode===yb&&(n.mode=13),a=e.next_out,o=e.output,l=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,c=n.hold,s=n.bits,d=u,f=l,C=hb;e:for(;;)switch(n.mode){case mb:if(0===n.wrap){n.mode=13;break}for(;s<16;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(2&n.wrap&&35615===c){n.check=0,x[0]=255&c,x[1]=c>>>8&255,n.check=sb(n.check,x,2,0),c=0,s=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=bb;break}if(8!=(15&c)){e.msg="unknown compression method",n.mode=bb;break}if(s-=4,k=8+(15&(c>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=bb;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&c?10:yb,c=0,s=0;break;case 2:for(;s<16;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=bb;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=bb;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=sb(n.check,x,2,0)),c=0,s=0,n.mode=3;case 3:for(;s<32;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.head&&(n.head.time=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=sb(n.check,x,4,0)),c=0,s=0,n.mode=4;case 4:for(;s<16;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=sb(n.check,x,2,0)),c=0,s=0,n.mode=5;case 5:if(1024&n.flags){for(;s<16;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=sb(n.check,x,2,0)),c=0,s=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>u&&(p=u),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),lb.arraySet(n.head.extra,r,i,p,k)),512&n.flags&&(n.check=sb(n.check,r,p,i)),u-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&p<u);if(512&n.flags&&(n.check=sb(n.check,r,p,i)),u-=p,i+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&p<u);if(512&n.flags&&(n.check=sb(n.check,r,p,i)),u-=p,i+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;s<16;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=bb;break}c=0,s=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=yb;break;case 10:for(;s<32;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}e.adler=n.check=kb(c),c=0,s=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=c,n.bits=s,2;e.adler=n.check=1,n.mode=yb;case yb:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&s,s-=7&s,n.mode=27;break}for(;s<3;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}switch(n.last=1&c,s-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(Rb(n),n.mode=20,6===t){c>>>=2,s-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=bb}c>>>=2,s-=2;break;case 14:for(c>>>=7&s,s-=7&s;s<32;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=bb;break}if(n.length=65535&c,c=0,s=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>u&&(p=u),p>l&&(p=l),0===p)break e;lb.arraySet(o,r,i,p,a),u-=p,i+=p,l-=p,a+=p,n.length-=p;break}n.mode=yb;break;case 17:for(;s<14;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(n.nlen=257+(31&c),c>>>=5,s-=5,n.ndist=1+(31&c),c>>>=5,s-=5,n.ncode=4+(15&c),c>>>=4,s-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=bb;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;s<3;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.lens[j[n.have++]]=7&c,c>>>=3,s-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},C=fb(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,C){e.msg="invalid code lengths set",n.mode=bb;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(y<16)c>>>=g,s-=g,n.lens[n.have++]=y;else{if(16===y){for(O=g+2;s<O;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(c>>>=g,s-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=bb;break}k=n.lens[n.have-1],p=3+(3&c),c>>>=2,s-=2}else if(17===y){for(O=g+3;s<O;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}s-=g,k=0,p=3+(7&(c>>>=g)),c>>>=3,s-=3}else{for(O=g+7;s<O;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}s-=g,k=0,p=11+(127&(c>>>=g)),c>>>=7,s-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=bb;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===bb)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=bb;break}if(n.lenbits=9,E={bits:n.lenbits},C=fb(pb,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,C){e.msg="invalid literal/lengths set",n.mode=bb;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},C=fb(vb,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,C){e.msg="invalid distances set",n.mode=bb;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(u>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=c,n.bits=s,db(e,f),a=e.next_out,o=e.output,l=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,c=n.hold,s=n.bits,n.mode===yb&&(n.back=-1);break}for(n.back=0;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(m&&0==(240&m)){for(b=g,w=m,_=y;m=(S=n.lencode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&S,!(b+(g=S>>>24)<=s);){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=yb;break}if(64&m){e.msg="invalid literal/length code",n.mode=bb;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(O=n.extra;s<O;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(S=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(0==(240&m)){for(b=g,w=m,_=y;m=(S=n.distcode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&S,!(b+(g=S>>>24)<=s);){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,64&m){e.msg="invalid distance code",n.mode=bb;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(O=n.extra;s<O;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=bb;break}n.mode=25;case 25:if(0===l)break e;if(p=f-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=bb;break}p>n.wnext?(p-=n.wnext,v=n.wsize-p):v=n.wnext-p,p>n.length&&(p=n.length),h=n.window}else h=o,v=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{o[a++]=h[v++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;o[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;s<32;){if(0===u)break e;u--,c|=r[i++]<<s,s+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?sb(n.check,o,f,a-f):cb(n.check,o,f,a-f)),f=l,(n.flags?c:kb(c))!==n.check){e.msg="incorrect data check",n.mode=bb;break}c=0,s=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;s<32;){if(0===u)break e;u--,c+=r[i++]<<s,s+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=bb;break}c=0,s=0}n.mode=29;case 29:C=1;break e;case bb:C=-3;break e;case 31:return-4;default:return gb}return e.next_out=a,e.avail_out=l,e.next_in=i,e.avail_in=u,n.hold=c,n.bits=s,(n.wsize||f!==e.avail_out&&n.mode<bb&&(n.mode<27||4!==t))&&Fb(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?sb(n.check,o,f,e.next_out-f):cb(n.check,o,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===yb?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&C===hb&&(C=-5),C},tb.inflateEnd=function(e){if(!e||!e.state)return gb;var t=e.state;return t.window&&(t.window=null),e.state=null,hb},tb.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?gb:(n.head=t,t.done=!1,hb):gb},tb.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?gb:11===n.mode&&cb(1,t,r,0)!==n.check?-3:Fb(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,hb):gb},tb.inflateInfo="pako inflate (from Nodeca project)";var Ib={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Pb=tb,Mb=Ng,Tb=Py,Nb=Ib,Bb=Lm,Vb=zy,Lb=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},zb=Object.prototype.toString;function Ub(e){if(!(this instanceof Ub))return new Ub(e);this.options=Mb.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vb,this.strm.avail_out=0;var n=Pb.inflateInit2(this.strm,t.windowBits);if(n!==Nb.Z_OK)throw new Error(Bb[n]);if(this.header=new Lb,Pb.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Tb.string2buf(t.dictionary):"[object ArrayBuffer]"===zb.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Pb.inflateSetDictionary(this.strm,t.dictionary))!==Nb.Z_OK))throw new Error(Bb[n])}function Hb(e,t){var n=new Ub(t);if(n.push(e,!0),n.err)throw n.msg||Bb[n.err];return n.result}Ub.prototype.push=function(e,t){var n,r,o,i,a,u=this.strm,l=this.options.chunkSize,c=this.options.dictionary,s=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?Nb.Z_FINISH:Nb.Z_NO_FLUSH,"string"==typeof e?u.input=Tb.binstring2buf(e):"[object ArrayBuffer]"===zb.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new Mb.Buf8(l),u.next_out=0,u.avail_out=l),(n=Pb.inflate(u,Nb.Z_NO_FLUSH))===Nb.Z_NEED_DICT&&c&&(n=Pb.inflateSetDictionary(this.strm,c)),n===Nb.Z_BUF_ERROR&&!0===s&&(n=Nb.Z_OK,s=!1),n!==Nb.Z_STREAM_END&&n!==Nb.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==Nb.Z_STREAM_END&&(0!==u.avail_in||r!==Nb.Z_FINISH&&r!==Nb.Z_SYNC_FLUSH)||("string"===this.options.to?(o=Tb.utf8border(u.output,u.next_out),i=u.next_out-o,a=Tb.buf2string(u.output,o),u.next_out=i,u.avail_out=l-i,i&&Mb.arraySet(u.output,u.output,o,i,0),this.onData(a)):this.onData(Mb.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(s=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==Nb.Z_STREAM_END);return n===Nb.Z_STREAM_END&&(r=Nb.Z_FINISH),r===Nb.Z_FINISH?(n=Pb.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Nb.Z_OK):r!==Nb.Z_SYNC_FLUSH||(this.onEnd(Nb.Z_OK),u.avail_out=0,!0)},Ub.prototype.onData=function(e){this.chunks.push(e)},Ub.prototype.onEnd=function(e){e===Nb.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Mb.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},eb.Inflate=Ub,eb.inflate=Hb,eb.inflateRaw=function(e,t){return(t=t||{}).raw=!0,Hb(e,t)},eb.ungzip=Hb;var qb={};(0,Ng.assign)(qb,Bg,eb,Ib);const Wb=kn(qb);var $b,Gb,Kb={exports:{}};function Yb(){if(Gb)return $b;Gb=1;var e=1e3,t=60*e,n=60*t,r=24*n,o=7*r,i=365.25*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}return $b=function(u,l){l=l||{};var c=Ln(u);if("string"===c&&u.length>0)return function(a){if((a=String(a)).length>100)return;var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!u)return;var l=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*r;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(u);if("number"===c&&isFinite(u))return l.long?function(o){var i=Math.abs(o);if(i>=r)return a(o,i,r,"day");if(i>=n)return a(o,i,n,"hour");if(i>=t)return a(o,i,t,"minute");if(i>=e)return a(o,i,e,"second");return o+" ms"}(u):function(o){var i=Math.abs(o);if(i>=r)return Math.round(o/r)+"d";if(i>=n)return Math.round(o/n)+"h";if(i>=t)return Math.round(o/t)+"m";if(i>=e)return Math.round(o/e)+"s";return o+"ms"}(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))},$b}var Jb,Xb,Zb=function(e){function t(e){var r,o,i,a=null;function u(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(u.enabled){var i=u,a=Number(new Date),l=a-(r||a);i.diff=l,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var o=t.formatters[r];if("function"==typeof o){var a=n[c];e=o.call(i,a),n.splice(c,1),c--}return e})),t.formatArgs.call(i,n),(i.log||t.log).apply(i,n)}}return u.namespace=e,u.useColors=t.useColors(),u.color=t.selectColor(e),u.extend=n,u.destroy=t.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(u),u}function n(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(tl(t.names.map(r)),tl(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Yb(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};Jb=Kb,(Xb=Kb.exports).formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Jb.exports.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,t)}},Xb.save=function(e){try{e?Xb.storage.setItem("debug",e):Xb.storage.removeItem("debug")}catch(e){}},Xb.load=function(){var e;try{e=Xb.storage.getItem("debug")}catch(e){}return!e&&void 0!==Vn&&"env"in Vn&&(e=Vn.env.DEBUG),e},Xb.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));var e},Xb.storage=function(){try{return localStorage}catch(e){}}(),Xb.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),Xb.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],Xb.log=console.debug||console.log||function(){},Jb.exports=Zb(Xb),Jb.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};const Qb=kn(Kb.exports);var ew=1e6,tw=1e6,nw="[big.js] ",rw=nw+"Invalid ",ow=rw+"decimal places",iw=rw+"rounding mode",aw=nw+"Division by zero",uw={},lw=void 0,cw=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function sw(e,t,n,r){var o=e.c;if(n===lw&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(iw);if(t<1)r=3===n&&(r||!!o[0])||0===t&&(1===n&&o[0]>=5||2===n&&(o[0]>5||5===o[0]&&(r||o[1]!==lw))),o.length=1,r?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(r=1===n&&o[t]>=5||2===n&&(o[t]>5||5===o[t]&&(r||o[t+1]!==lw||1&o[t-1]))||3===n&&(r||!!o[0]),o.length=t,r)for(;++o[--t]>9;)if(o[t]=0,0===t){++e.e,o.unshift(1);break}for(t=o.length;!o[--t];)o.pop()}return e}function dw(e,t,n){var r=e.e,o=e.c.join(""),i=o.length;if(t)o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)o="0"+o;o="0."+o}else if(r>0)if(++r>i)for(r-=i;r--;)o+="0";else r<i&&(o=o.slice(0,r)+"."+o.slice(r));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&n?"-"+o:o}uw.abs=function(){var e=new this.constructor(this);return e.s=1,e},uw.cmp=function(e){var t,n=this,r=n.c,o=(e=new n.constructor(e)).c,i=n.s,a=e.s,u=n.e,l=e.e;if(!r[0]||!o[0])return r[0]?i:o[0]?-a:0;if(i!=a)return i;if(t=i<0,u!=l)return u>l^t?1:-1;for(a=(u=r.length)<(l=o.length)?u:l,i=-1;++i<a;)if(r[i]!=o[i])return r[i]>o[i]^t?1:-1;return u==l?0:u>l^t?1:-1},uw.div=function(e){var t=this,n=t.constructor,r=t.c,o=(e=new n(e)).c,i=t.s==e.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>ew)throw Error(ow);if(!o[0])throw Error(aw);if(!r[0])return e.s=i,e.c=[e.e=0],e;var u,l,c,s,d,f=o.slice(),p=u=o.length,v=r.length,h=r.slice(0,u),g=h.length,m=e,y=m.c=[],b=0,w=a+(m.e=t.e-e.e)+1;for(m.s=i,i=w<0?0:w,f.unshift(0);g++<u;)h.push(0);do{for(c=0;c<10;c++){if(u!=(g=h.length))s=u>g?1:-1;else for(d=-1,s=0;++d<u;)if(o[d]!=h[d]){s=o[d]>h[d]?1:-1;break}if(!(s<0))break;for(l=g==u?o:f;g;){if(h[--g]<l[g]){for(d=g;d&&!h[--d];)h[d]=9;--h[d],h[g]+=10}h[g]-=l[g]}for(;!h[0];)h.shift()}y[b++]=s?c:++c,h[0]&&s?h[g]=r[p]||0:h=[r[p]]}while((p++<v||h[0]!==lw)&&i--);return y[0]||1==b||(y.shift(),m.e--,w--),b>w&&sw(m,w,n.RM,h[0]!==lw),m},uw.eq=function(e){return 0===this.cmp(e)},uw.gt=function(e){return this.cmp(e)>0},uw.gte=function(e){return this.cmp(e)>-1},uw.lt=function(e){return this.cmp(e)<0},uw.lte=function(e){return this.cmp(e)<1},uw.minus=uw.sub=function(e){var t,n,r,o,i=this,a=i.constructor,u=i.s,l=(e=new a(e)).s;if(u!=l)return e.s=-l,i.plus(e);var c=i.c.slice(),s=i.e,d=e.c,f=e.e;if(!c[0]||!d[0])return d[0]?e.s=-l:c[0]?e=new a(i):e.s=1,e;if(u=s-f){for((o=u<0)?(u=-u,r=c):(f=s,r=d),r.reverse(),l=u;l--;)r.push(0);r.reverse()}else for(n=((o=c.length<d.length)?c:d).length,u=l=0;l<n;l++)if(c[l]!=d[l]){o=c[l]<d[l];break}if(o&&(r=c,c=d,d=r,e.s=-e.s),(l=(n=d.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;n>u;){if(c[--n]<d[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=d[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--f;return c[0]||(e.s=1,c=[f=0]),e.c=c,e.e=f,e},uw.mod=function(e){var t,n=this,r=n.constructor,o=n.s,i=(e=new r(e)).s;if(!e.c[0])throw Error(aw);return n.s=e.s=1,t=1==e.cmp(n),n.s=o,e.s=i,t?new r(n):(o=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=o,r.RM=i,this.minus(n.times(e)))},uw.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},uw.plus=uw.add=function(e){var t,n,r,o=this,i=o.constructor;if(e=new i(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var a=o.e,u=o.c,l=e.e,c=e.c;if(!u[0]||!c[0])return c[0]||(u[0]?e=new i(o):e.s=o.s),e;if(u=u.slice(),t=a-l){for(t>0?(l=a,r=c):(t=-t,r=u),r.reverse();t--;)r.push(0);r.reverse()}for(u.length-c.length<0&&(r=c,c=u,u=r),t=c.length,n=0;t;u[t]%=10)n=(u[--t]=u[t]+c[t]+n)/10|0;for(n&&(u.unshift(n),++l),t=u.length;0===u[--t];)u.pop();return e.c=u,e.e=l,e},uw.pow=function(e){var t=this,n=new t.constructor("1"),r=n,o=e<0;if(e!==~~e||e<-1e6||e>tw)throw Error(rw+"exponent");for(o&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return o?n.div(r):r},uw.prec=function(e,t){if(e!==~~e||e<1||e>ew)throw Error(rw+"precision");return sw(new this.constructor(this),e,t)},uw.round=function(e,t){if(e===lw)e=0;else if(e!==~~e||e<-ew||e>ew)throw Error(ow);return sw(new this.constructor(this),e+this.e+1,t)},uw.sqrt=function(){var e,t,n,r=this,o=r.constructor,i=r.s,a=r.e,u=new o("0.5");if(!r.c[0])return new o(r);if(i<0)throw Error(nw+"No square root");0===(i=Math.sqrt(r+""))||i===1/0?((t=r.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new o(((i=Math.sqrt(t))==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+a)):e=new o(i+""),a=e.e+(o.DP+=4);do{n=e,e=u.times(n.plus(r.div(n)))}while(n.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return sw(e,(o.DP-=4)+e.e+1,o.RM)},uw.times=uw.mul=function(e){var t,n=this,r=n.constructor,o=n.c,i=(e=new r(e)).c,a=o.length,u=i.length,l=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!o[0]||!i[0])return e.c=[e.e=0],e;for(e.e=l+c,a<u&&(t=o,o=i,i=t,c=a,a=u,u=c),t=new Array(c=a+u);c--;)t[c]=0;for(l=u;l--;){for(u=0,c=a+l;c>l;)u=t[c]+i[l]*o[c-l-1]+u,t[c--]=u%10,u=u/10|0;t[c]=u}for(u?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},uw.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==lw){if(e!==~~e||e<0||e>ew)throw Error(ow);for(n=sw(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return dw(n,!0,!!r)},uw.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==lw){if(e!==~~e||e<0||e>ew)throw Error(ow);for(e=e+(n=sw(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return dw(n,!1,!!r)},uw[Symbol.for("nodejs.util.inspect.custom")]=uw.toJSON=uw.toString=function(){var e=this,t=e.constructor;return dw(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},uw.toNumber=function(){var e=Number(dw(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(nw+"Imprecise conversion");return e},uw.toPrecision=function(e,t){var n=this,r=n.constructor,o=n.c[0];if(e!==lw){if(e!==~~e||e<1||e>ew)throw Error(rw+"precision");for(n=sw(new r(n),e,t);n.c.length<e;)n.c.push(0)}return dw(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!o)},uw.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(nw+"valueOf disallowed");return dw(e,e.e<=t.NE||e.e>=t.PE,!0)};var fw=function e(){function t(n){var r=this;if(!(r instanceof t))return n===lw?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(rw+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,o;if(!cw.test(t))throw Error(rw+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length);for(o=t.length,r=0;r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=n-r-1,e.c=[],n=0;r<=o;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=uw,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();function pw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vw(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function hw(e,t){if(e){if("string"==typeof e)return pw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pw(e,t):void 0}}function gw(e){return function(e){if(Array.isArray(e))return pw(e)}(e)||vw(e)||hw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mw(e){return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yw(e){var t=function(e,t){if("object"!=mw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mw(t)?t:t+""}function bw(e,t,n){return(t=yw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ww=Object.freeze(Object.defineProperty({__proto__:null,default:bw},Symbol.toStringTag,{value:"Module"}));function _w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var kw=Object.freeze(Object.defineProperty({__proto__:null,default:_w},Symbol.toStringTag,{value:"Module"}));function Cw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yw(r.key),r)}}function Ew(e,t,n){return t&&Cw(e.prototype,t),n&&Cw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ow=Object.freeze(Object.defineProperty({__proto__:null,default:Ew},Symbol.toStringTag,{value:"Module"}));function Sw(e){if(Array.isArray(e))return e}function xw(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var jw,Dw=function(e){return e[e.Waiting=-1]="Waiting",e[e.Init=0]="Init",e[e.Configed=1]="Configed",e[e.Inited=2]="Inited",e[e.WorkbenchInited=3]="WorkbenchInited",e[e.Starting=4]="Starting",e[e.Ready=5]="Ready",e[e.RecordInit=6]="RecordInit",e[e.RecordReady=7]="RecordReady",e[e.Rendered=8]="Rendered",e[e.beforeDestroy=9]="beforeDestroy",e[e.Destroyed=10]="Destroyed",e}(Dw||{}),Aw=Is.defineToken("LifecycleService"),Rw=Object.defineProperty,Fw=Object.getOwnPropertyDescriptor,Iw=(bw(bw(bw(bw(bw(bw(bw(bw(bw(bw(jw={},Dw.Waiting,"Waiting"),Dw.Init,"Init"),Dw.Configed,"Configed"),Dw.Inited,"Inited"),Dw.Starting,"Starting"),Dw.Ready,"Ready"),Dw.RecordInit,"RecordInit"),Dw.RecordReady,"RecordReady"),Dw.Rendered,"Rendered"),Dw.WorkbenchInited,"WorkbenchInited"),bw(bw(jw,Dw.beforeDestroy,"beforeDestroy"),Dw.Destroyed,"Destroyed")),Pw=function(){return Ew((function e(){_w(this,e),this._status=Dw.Waiting,this.statusWhen=new Map,this._statusChangedAt=new Map}),[{key:"statusStr",get:function(){return Iw[this.status]}},{key:"status",get:function(){return this._status},set:function(e){if(e<this.status){var t=JSON.stringify({current:this.status,setStatus:e});throw new Error("Lifecycle cannot go backwards"+t)}this.status!==e&&(this._status=e,this._statusChangedAt.set(e,+new Date),this._runCallback())}},{key:"when",value:function(e,t){if(!(e<=this.status)){var n=this.statusWhen.get(e);if(Array.isArray(n)){var r=[].concat(gw(n),[t]);this.statusWhen.set(e,r)}else this.statusWhen.set(e,[t])}}},{key:"_runCallback",value:function(){var e=this.statusWhen.get(this.status);e&&e.length&&e.forEach((function(e){e()}))}},{key:"getStatusChangedAt",value:function(e){return this._statusChangedAt.get(e)}}])}();function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mw(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Pw=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fw(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rw(t,n,i),i}([Gs({token:Aw})],Pw);var Nw=/\$(\d+)/g;var Bw=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"setLanguage",value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN"}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._data=Tw(Tw({},e._data),t)}},{key:"get",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.length?(t="zhCN"===e._lang?t:e._data[t]||t)?((r=r.map((function(t){return"zhCN"===e._lang?t:e._data[t]||r}))).unshift(""),t.replace(Nw,(function(e,t){return r[t]||""}))):"":"zhCN"===e._lang?t:e._data[t]||t}}])}();Bw._lang="zhCN",Bw._data={};var Vw=Bw;function Lw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vw.get.apply(Vw,[e].concat(n))}Vw.setLanguage(function(){var e,t="zh-cn";if("undefined"!=typeof window&&"undefined"!=typeof document){if(null==(e=window.appData)?void 0:e.locale)return window.appData.locale;var n=window.location.search,r=new URLSearchParams(n).get("language");if(r)return r;var o=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return o?o[1]:t}return t}()||"zhCN");var zw=function(e){return setTimeout((function(){e()}),1e3/60)},Uw="abcdefghigklmnopqrstuvwxyz",Hw=Uw+"0123456789"+Uw.toUpperCase();function qw(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=Hw.charAt(Math.floor(Math.random()*Hw.length));return t}var Ww={}.toString,$w=function(e,t){return Ww.call(e)==="[object "+t+"]"};function Gw(e){return"function"==typeof e}var Kw=function(e){return $w(e,"RegExp")},Yw=function(e){return $w(e,"String")},Jw=function(e){return $w(e,"Object")},Xw=function(e){return e instanceof Date},Zw=function(e){return null==e};function Qw(e){return!/\s/gi.test(e)&&/.+@.+\..+/gi.test(e)}var e_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==wn?wn:"undefined"!=typeof self?self:{};function t_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n_(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var r_={exports:{}};!function(e,t){e.exports=function(e,t,n){t.prototype.isBetween=function(e,t,r,o){var i=n(e),a=n(t),u="("===(o=o||"()")[0],l=")"===o[1];return(u?this.isAfter(i,r):!this.isBefore(i,r))&&(l?this.isBefore(a,r):!this.isAfter(a,r))||(u?this.isBefore(i,r):!this.isAfter(i,r))&&(l?this.isAfter(a,r):!this.isBefore(a,r))}}}(r_);var o_=t_(r_.exports),i_={exports:{}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}(i_);var a_=t_(i_.exports),u_={exports:{}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}(u_);var l_=t_(u_.exports);!function(e,t){e.exports=function(e){function t(e){return e&&"object"==mw(e)&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(i.a)}({exports:{}});function c_(e){if(Bu(e))return null;e>=31708800&&(e+=i()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1);return i()("1899-12-30").add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}i.a.extend(o_),i.a.extend(a_),i.a.extend(l_),"zhCN"===Vw._lang&&i.a.locale("zh-cn");var s_=function(e){var t=e;if(""===e)return"";Yw(e)&&4===e.length&&(/^(0[1-9]|1[0-2]).*(0[1-9]|[12][0-9]|3[01])/g.test(e)&&(t=i()().year()+e));return i()(t).format("YYYY-MM-DD")};function d_(e){return Number.parseInt(e.format("YYYYMMDD"),10)}function f_(){return i()().startOf("month")}var p_=/^(?:\w+:)?\/\//,v_=/^(javascript:)?\/\//,h_=/^(?:\w+:)?\/\/(\S+)$/,g_=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,m_=/^[^\s.]+\.\S{2,}$/;function y_(e){return function(e){if("string"!=typeof e)return!1;if(e.match(v_))return!1;var t=e.match(h_);if(!t)return!1;var n=t[1];return!(!n||!g_.test(n)&&!m_.test(n))}(e)?e:(t=e,(t=String(t).trim()).match(p_)&&!t.match(v_)?t:"http://"+t);var t}function b_(e){return/^-?\d*[.]?\d*$/.test(e)||/^[-+]?\d{1,3}(,\d{3})*(\.(\d*))?$/.test(e)?e+"":""}var w_=function(e){return!(""!==e&&!Bu(e))||""!==b_(e)},__={exports:{}},k_={exports:{}};!function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default}(k_,k_.exports);var C_=k_.exports,E_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i;(0,r.default)(e),"object"===o(t)?(n=t.min||0,i=t.max):(n=arguments[1],i=arguments[2]);var a=encodeURI(e).split(/%..|./).length-1;return a>=n&&(void 0===i||a<=i)};var n,r=(n=C_)&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default}(E_,E_.exports);var O_=E_.exports,S_={exports:{}},x_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default}(x_,x_.exports);var j_=x_.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),t=(0,r.default)(t,i),t.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var o=e.split("."),a=o[o.length-1];if(t.require_tld){if(o.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a))return!1;if(/\s/.test(a))return!1}if(!t.allow_numeric_tld&&/^\d+$/.test(a))return!1;return o.every((function(e){return!(e.length>63&&!t.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var n=o(C_),r=o(j_);function o(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default}(S_,S_.exports);var D_=S_.exports,A_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,r.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n)return a.test(t);if("6"===n)return l.test(t);return!1};var n,r=(n=C_)&&n.__esModule?n:{default:n};var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(o,"[.]){3}").concat(o),a=new RegExp("^".concat(i,"$")),u="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(i,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(i,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(i,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(i,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(i,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(i,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(i,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default}(A_,A_.exports);var R_=A_.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),t=(0,a.default)(t,l),t.require_display_name||t.allow_display_name){var u=e.match(c);if(u){var g=u[1];if(e=e.replace(g,"").replace(/(^<|>$)/g,""),g.endsWith(" ")&&(g=g.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(g))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>h)return!1;var m=e.split("@"),y=m.pop(),b=y.toLowerCase();if(t.host_blacklist.includes(b))return!1;if(t.host_whitelist.length>0&&!t.host_whitelist.includes(b))return!1;var w=m.join("@");if(t.domain_specific_validation&&("gmail.com"===b||"googlemail.com"===b)){var _=(w=w.toLowerCase()).split("+")[0];if(!(0,r.default)(_.replace(/\./g,""),{min:6,max:30}))return!1;for(var k=_.split("."),C=0;C<k.length;C++)if(!d.test(k[C]))return!1}if(!(!1!==t.ignore_max_length||(0,r.default)(w,{max:64})&&(0,r.default)(y,{max:254})))return!1;if(!(0,o.default)(y,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,i.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var E=y.slice(1,-1);if(0===E.length||!(0,i.default)(E))return!1}}if('"'===w[0])return w=w.slice(1,w.length-1),t.allow_utf8_local_part?v.test(w):f.test(w);for(var O=t.allow_utf8_local_part?p:s,S=w.split("."),x=0;x<S.length;x++)if(!O.test(S[x]))return!1;if(t.blacklisted_chars&&-1!==w.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var n=u(C_),r=u(O_),o=u(D_),i=u(R_),a=u(j_);function u(e){return e&&e.__esModule?e:{default:e}}var l={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,h=254;e.exports=t.default,e.exports.default=t.default}(__,__.exports);var F_=t_(__.exports),I_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),!e||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;if(t=(0,i.default)(t,l),t.validate_length&&e.length>=2083)return!1;if(!t.allow_fragments&&e.includes("#"))return!1;if(!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var a,d,f,p,v,h,g,m;if(g=e.split("#"),e=g.shift(),g=e.split("?"),e=g.shift(),(g=e.split("://")).length>1){if(a=g.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(a))return!1}else{if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!t.allow_protocol_relative_urls)return!1;g[0]=e.slice(2)}}if(""===(e=g.join("://")))return!1;if(g=e.split("/"),""===(e=g.shift())&&!t.require_host)return!0;if((g=e.split("@")).length>1){if(t.disallow_auth)return!1;if(""===g[0])return!1;if((d=g.shift()).indexOf(":")>=0&&d.split(":").length>2)return!1;var y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d.split(":"),2),b=y[0],w=y[1];if(""===b&&""===w)return!1}p=g.join("@"),h=null,m=null;var _=p.match(c);_?(f="",m=_[1],h=_[2]||null):(f=(g=p.split(":")).shift(),g.length&&(h=g.join(":")));if(null!==h&&h.length>0){if(v=parseInt(h,10),!/^[0-9]+$/.test(h)||v<=0||v>65535)return!1}else if(t.require_port)return!1;if(t.host_whitelist)return s(f,t.host_whitelist);if(""===f&&!t.require_host)return!0;if(!((0,o.default)(f)||(0,r.default)(f,t)||m&&(0,o.default)(m,6)))return!1;if(f=f||m,t.host_blacklist&&s(f,t.host_blacklist))return!1;return!0};var n=a(C_),r=a(D_),o=a(R_),i=a(j_);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||(o=r,"[object RegExp]"===Object.prototype.toString.call(o)&&r.test(e)))return!0}var o;return!1}e.exports=t.default,e.exports.default=t.default}(I_,I_.exports);var P_=t_(I_.exports);function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M_(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return P_(e,T_(T_({},{require_protocol:!0}),t))},B_=function(e){return"Invalid Date"!==i()(e).toString()},V_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;"number"==typeof e&&(e=String(e));var n=t.precision||18,r=t.scale||2,o=t.forceDecimal||!1;return!(e.replace(/[-+.]/gi,"").length>n)&&new RegExp("^[-+]?([0-9]+)?(\\.[0-9]{0,".concat(r,"})").concat(o?"":"?","$")).test(e)},L_=Is.defineToken("DatabaseToken");function z_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return U_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U_(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function U_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H_=function(){return Ew((function e(){_w(this,e),this.ydoc=new Tv,this.ydata=this.ydoc.getMap()}),[{key:"data",get:function(){return this.ydata}},{key:"newMap",value:function(e,t){var n=new Gh;e&&Object.keys(e).forEach((function(t){n.set(t,e[t])}));var r=n.get;if(n.get=function(e){var t,o,i,a=r.call(n,e);if(!a){var u=null==(t=n._map)?void 0:t.get(e);if(u)return null==(i=null==(o=u.content)?void 0:o.arr)?void 0:i[0]}return a},t){var o,i=z_(t);try{var a=function(){var e=o.value;Object.defineProperty(n,e.name,{get:function(){return console.warn("please use .get('".concat(e.name,"').")),n.get(e.name)}})};for(i.s();!(o=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}return n}},{key:"newArray",value:function(e){var t=this,n=new Wh;return e&&n.push(e.map((function(e){return Ci(e)?t.newMap(e):e}))),n}},{key:"transact",value:function(e,t){this.ydoc.transact(e,t||this)}},{key:"destroy",value:function(){var e;null==(e=this.ydoc)||e.destroy(),this.ydoc=null,this.ydata=null,this._spellEventObj=null,this._storageEventObj=null}}])}(),q_=function(){return Ew((function e(t){var n=this;_w(this,e),this.canUndo=!1,this.canRedo=!1,this._yUndoManager=new mh(t.ydata,{captureTimeout:0,trackedOrigins:new Set([t])}),this._yUndoManager.on("stack-item-added",(function(){n._setCanUndoRedo()})),this._yUndoManager.on("stack-item-popped",(function(){n._setCanUndoRedo()}))}),[{key:"_setCanUndoRedo",value:function(){var e=this._yUndoManager;this.canRedo=e.canRedo(),this.canUndo=e.canUndo()}},{key:"stopCapturing",value:function(){this._yUndoManager.stopCapturing()}},{key:"undo",value:function(){this._yUndoManager.undo()}},{key:"redo",value:function(){this._yUndoManager.redo()}},{key:"destroy",value:function(){this._yUndoManager.destroy()}}])}(),W_=function(){return Ew((function e(){_w(this,e),this._ystruct=new H_,this._yhistory=new q_(this._ystruct)}),[{key:"ystruct",get:function(){return this._ystruct}},{key:"doc",get:function(){return this._ystruct.ydoc}},{key:"data",get:function(){return this._ystruct.data}},{key:"newMap",value:function(e,t){return(null==e?void 0:e._map)?e:this._ystruct.newMap(e,t)}},{key:"newArray",value:function(e){return this._ystruct.newArray(e)}},{key:"transact",value:function(e){this._ystruct.transact(e)}},{key:"canUndo",value:function(){return this._yhistory.canUndo}},{key:"canRedo",value:function(){return this._yhistory.canRedo}},{key:"undo",value:function(){this._yhistory.undo()}},{key:"redo",value:function(){this._yhistory.redo()}},{key:"destroy",value:function(){this._ystruct.destroy(),this._yhistory.destroy()}}])}();function $_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G_(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function G_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var K_=function(){function e(t){var n=this;_w(this,e),this._arr=[],Array.isArray(t)?t.forEach((function(e){return n._arr.push(e)})):t&&this._arr.push(t)}return Ew(e,[{key:"origin",get:function(){return this._arr}},{key:"length",get:function(){return this._arr.length}},{key:"clone",value:function(){var t=new e;return this._arr.forEach((function(e){t.push([Object.assign({},e)])})),t}},{key:"insert",value:function(e){}},{key:"push",value:function(e){var t,n=$_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"get",value:function(e){return this._arr[e]}},{key:"toArray",value:function(){return this._arr}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this._arr.slice(e,t)}},{key:"toJSON",value:function(){return JSON.parse(JSON.stringify(this._arr))}},{key:"map",value:function(e){return this._arr.map(e)}},{key:"forEach",value:function(e){return this._arr.forEach(e)}},{key:"delete",value:function(e,t){return this._arr.splice(e,t)}},{key:"unshift",value:function(e){var t,n=$_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.unshift(r)}}catch(e){n.e(e)}finally{n.f()}return this._arr}},{key:Symbol.iterator,value:function(){return e=this,t=0,bw(bw({},Symbol.iterator,(function(){return this})),"next",(function(){if(0===e.origin.length||null==e.origin[t])return{done:!0,value:void 0};var n=e.origin[t];return t+=1,{done:!1,value:n}}));var e,t}}])}(),Y_=function(){return Ew((function e(t){var n=this;_w(this,e),this._map=new Map,t&&Object.keys(t).forEach((function(e){n.set(e,t[e])}))}),[{key:"clone",value:function(){return this}},{key:"keys",value:function(){return this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"delete",value:function(e){return this._map.delete(e)}},{key:"values",value:function(){return this._map.values()}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(e){return this._map.forEach(e)}},{key:"toJSON",value:function(){return Object.fromEntries(this._map)}},{key:Symbol.iterator,value:function(){return this._map[Symbol.iterator]()}},{key:"uuid",get:function(){return this.get("uuid")}},{key:"updated_at",get:function(){return this.get("updated_at")}},{key:"created_at",get:function(){return this.get("created_at")}}])}();function J_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return X_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X_(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function X_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z_(e,t){var n,r=J_(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t(o))return o}}catch(e){r.e(e)}finally{r.f()}return null}function Q_(e,t){var n,r=new K_,o=J_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t(i)&&r.push([i])}}catch(e){o.e(e)}finally{o.f()}return r}function ek(e,t){var n=-1;return e?(e.forEach((function(e,r){-1===n&&t(e)&&(n=r)})),n):n}function tk(e,t,n){return e.forEach((function(e){t(n,e)})),n}function nk(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function rk(e,t){var n,r=J_(e);try{for(r.s();!(n=r.n()).done;){if(t(n.value))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}function ok(e,t,n){return e.slice(t,n)}function ik(e,t){var n,r=J_(e);try{for(r.s();!(n=r.n()).done;){if(!t(n.value))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}function ak(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function uk(e,t){var n,r=new K_,o=J_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t(i)&&r.push([i])}}catch(e){o.e(e)}finally{o.f()}return r}var lk=Is.defineToken("ConfigurationToken");function ck(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sk(e,t){if(t&&("object"==mw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ck(e)}function dk(e){return(dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fk(){return fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=dk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fk.apply(null,arguments)}function pk(e,t){return(pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vk(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pk(e,t)}function hk(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gk(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var mk=Object.defineProperty,yk=Object.getOwnPropertyDescriptor,bk=function(){return Ew((function e(){_w(this,e),this._store=new Set,this._isDestroyed=!1}),[{key:"_register",value:function(e){return this._store.add(e),e}},{key:"destroy",value:function(){if(!this._isDestroyed){var e,t=hk(this._store.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.destroy()}}catch(e){t.e(e)}finally{t.f()}this._store.clear(),this._isDestroyed=!0}}}])}();bk=function(e,t,n,r){for(var o,i=r>1?void 0:r?yk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mk(t,n,i),i}([$s()],bk);var wk=function(){return Ew((function e(){_w(this,e),this.destroy=function(){},this.unset=function(){},this.isset=function(){return!1}}),[{key:"set",value:function(e){var t=this,n=e;return this.unset=function(){return n=void 0},this.isset=function(){return void 0!==n},this.destroy=function(){n&&(n(),n=void 0,t.unset=void 0,t.isset=void 0)},this}}])}(),_k=function(e){return{destroy:e}},kk=function(){return Ew((function e(){_w(this,e),this.destroyableList=[],this._isDisposing=!1}),[{key:"destroyed",get:function(){return 0===this.destroyableList.length}},{key:"destroy",value:function(){if(!this.destroyed&&!this._isDisposing){for(this._isDisposing=!0;!this.destroyed;)try{this.destroyableList.pop().destroy()}catch(e){console.error(e)}this._isDisposing=!1}}},{key:"push",value:function(e){var t=this.destroyableList;t.push(e);var n=e.destroy.bind(e),r=_k((function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}));return e.destroy=function(){r.destroy(),n()},r}}])}(),Ck={exports:{}},Ek={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ek);var Ok=Ek.exports;!function(e){var t=Ok.default;function n(){e.exports=n=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var r,o={},i=Object.prototype,a=i.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new I(r||[]);return u(i,"_invoke",{value:D(e,n,a)}),i}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var h="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function k(){}var C={};f(C,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(P([])));O&&O!==i&&a.call(O,c)&&(C=O);var S=k.prototype=w.prototype=Object.create(C);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,n){function r(o,i,u,l){var c=v(e[o],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):n.resolve(d).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var o;u(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function D(e,t,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=v(e,t,n);if("normal"===c.type){if(o=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=v(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=k,u(S,"constructor",{value:k,configurable:!0}),u(k,"constructor",{value:_,configurable:!0}),_.displayName=f(k,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},o.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,s,(function(){return this})),o.AsyncIterator=j,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new j(p(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,d,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},o.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return u.type="throw",u.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Ck);var Sk=(0,Ck.exports)(),xk=Sk;try{regeneratorRuntime=Sk}catch(e){"object"===("undefined"==typeof globalThis?"undefined":mw(globalThis))?globalThis.regeneratorRuntime=Sk:Function("r","regeneratorRuntime = r")(Sk)}var jk=t_(xk),Dk=Ew((function e(t){_w(this,e),this.element=t,this.next=e.Undefined,this.prev=e.Undefined}));Dk.Undefined=new Dk(void 0);var Ak=Dk,Rk=function(){return Ew((function e(){_w(this,e),this._first=Ak.Undefined,this._last=Ak.Undefined,this._size=0}),[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return this._first===Ak.Undefined}},{key:"clear",value:function(){for(var e=this._first;e!==Ak.Undefined;){var t=e.next;e.prev=Ak.Undefined,e.next=Ak.Undefined,e=t}this._first=Ak.Undefined,this._last=Ak.Undefined,this._size=0}},{key:"unshift",value:function(e){return this._insert(e,!1)}},{key:"push",value:function(e){return this._insert(e,!0)}},{key:"_insert",value:function(e,t){var n=this,r=new Ak(e);if(this._first===Ak.Undefined)this._first=r,this._last=r;else if(t){var o=this._last;this._last=r,r.prev=o,o.next=r}else{var i=this._first;this._first=r,r.next=i,i.prev=r}this._size+=1;var a=!1;return function(){a||(a=!0,n._remove(r))}}},{key:"shift",value:function(){if(this._first!==Ak.Undefined){var e=this._first.element;return this._remove(this._first),e}}},{key:"pop",value:function(){if(this._last!==Ak.Undefined){var e=this._last.element;return this._remove(this._last),e}}},{key:"_remove",value:function(e){if(e.prev!==Ak.Undefined&&e.next!==Ak.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ak.Undefined&&e.next===Ak.Undefined?(this._first=Ak.Undefined,this._last=Ak.Undefined):e.next===Ak.Undefined?(this._last=this._last.prev,this._last.next=Ak.Undefined):e.prev===Ak.Undefined&&(this._first=this._first.next,this._first.prev=Ak.Undefined);this._size-=1}},{key:Symbol.iterator,value:jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._first;case 1:if(t===Ak.Undefined){e.next=7;break}return e.next=4,t.element;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}])}();function Fk(e,t,n){return t=dk(t),sk(e,Ik()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Ik(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ik=function(){return!!e})()}function Pk(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mk(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Mk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tk=function(){return Ew((function e(t,n,r){_w(this,e),this.callback=t,this.callbackThis=n,this.stack=r,this.subscription=new wk}),[{key:"invoke",value:function(e){this.callback.call(this.callbackThis,e)}}])}(),Nk=Ew((function e(t,n,r){_w(this,e),this.emitter=t,this.listener=n,this.event=r})),Bk=function(){return Ew((function e(){_w(this,e),this._queue=new Rk}),[{key:"size",get:function(){return this._queue.size}},{key:"push",value:function(e,t,n){this._queue.push(new Nk(e,t,n))}},{key:"clear",value:function(e){var t,n=new Rk,r=Pk(this._queue);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.emitter!==e&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}this._queue=n}},{key:"deliver",value:function(){for(;this._queue.size>0;){var e=this._queue.shift();try{e.listener.invoke(e.event)}catch(e){console.error(e)}}}}])}(),Vk=function(e){function t(){return _w(this,t),Fk(this,t,arguments)}return vk(t,e),Ew(t,[{key:"clear",value:function(e){this._queue.clear()}}])}(Bk),Lk=function(e){function t(){var e;return _w(this,t),(e=Fk(this,t,arguments))._id=qw(6),e._disposed=!1,e}return vk(t,e),Ew(t,[{key:"event",get:function(){var e=this;return this._event||(this._event=function(t,n,r){e._listeners||(e._listeners=new Rk);var o=new Tk(t,n,undefined),i=e._listeners.push(o),a=o.subscription.set((function(){e._disposed||i()}));return Array.isArray(r)&&r.push(a),a}),this._event}},{key:"id",get:function(){return this._id}},{key:"listeners",get:function(){return this._listeners?this._listeners:null}},{key:"destroy",value:function(){var e;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(this))}},{key:"emit",value:function(e){if(this.listeners){this._deliveryQueue||(this._deliveryQueue=new Vk);var t,n=Pk(this.listeners);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._deliveryQueue.push(this,r,e)}}catch(e){n.e(e)}finally{n.f()}this._deliveryQueue.deliver()}}},{key:"hasListeners",value:function(){return!!this._listeners&&!this._listeners.isEmpty()}}])}(bk);function zk(e){return Sw(e)||vw(e)||hw(e)||xw()}var Uk=/\\(\\)?/g,Hk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qk=Object.defineProperty,Wk=Object.getOwnPropertyDescriptor,$k=function(){return Ew((function e(){_w(this,e),this._configurationProperties={}}),[{key:"getSchema",value:function(){return{title:"数据表配置列表",type:"object",properties:this._configurationProperties}}},{key:"register",value:function(e){this._doRegister(e)}},{key:"_doRegister",value:function(e){var t=e.id;if(!t)throw new Error("配置不合法: ".concat(JSON.stringify(e),", configuration.id 是必填"));var n=t.split(".");if(1===n.length)this._configurationProperties[n[0]]=e;else{this._configurationProperties[n[0]]?this._configurationProperties[n[0]].properties||(this._configurationProperties[n[0]].properties={}):this._configurationProperties[n[0]]={id:n[0],type:"object",properties:{}};var r=this._configurationProperties[n[0]].properties;n.forEach((function(t,o){if(0!==o)if(r[t])r[t].properties||(r[t].properties={}),r=r[t].properties;else if(o===n.length-1)r[t]=e;else{var i=n.slice(o+1);r[t]={id:i.join("."),type:"object",properties:{}}}}))}}},{key:"getProperty",value:function(e){for(var t=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Hk,(function(e,n,r,o){t.push(r?o.replace(Uk,"$1"):n||e)})),t}(e),n=zk(t),r=n[0],o=n.slice(1),i=this._configurationProperties[r],a=r,u=0;u<o.length;u++){var l=o[u];if(a+="."+l,!i)return null;if(/^\d+$/g.test(l))i=null==i?void 0:i.items;else if(i.properties){for(var c=Object.keys(i.properties),s=!1,d=0;d<c.length;d++){var f=c[d],p=r+"."+f;if(p===a){i=i.properties[f],s=!0;break}if(p.startsWith(a)){s=!0;break}}if(s)continue;i=i.properties[l]}}return i}},{key:"validate",value:function(e,t){return!!this.getProperty(e)}}])}();function Gk(e,t,n){return t=dk(t),sk(e,Kk()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Kk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kk=function(){return!!e})()}$k=function(e,t,n,r){for(var o,i=r>1?void 0:r?Wk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qk(t,n,i),i}([Gs()],$k);var Yk=Object.defineProperty,Jk=Object.getOwnPropertyDescriptor,Xk=function(e,t,n,r){for(var o,i=r>1?void 0:r?Jk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yk(t,n,i),i},Zk=function(e){function t(){var e;return _w(this,t),(e=Gk(this,t,arguments))._defaultModel={},e._overrideModel={},e._onDidChange=e._register(new Lk),e.onDidChange=e._onDidChange.event,e._cacheMap={},e}return vk(t,e),Ew(t,[{key:"registerDefaultValue",value:function(e){for(var t=Object.keys(e),n=0,r=t;n<r.length;n++){var o=r[n];this._configurationRegistry.validate(o,e[o])}for(var i=0,a=t;i<a.length;i++){var u=a[i];Wu(this._defaultModel,u,e[u])}}},{key:"setValue",value:function(e,t){var n=this;this._configurationRegistry.validate(e,t);var r=this.getValue(e);return zw((function(){n._onDidChange.emit({type:"valueChanged",path:e,pre:r,cur:t})})),this._cacheMap={},Wu(this._overrideModel,e,t)}},{key:"getValue",value:function(e){if(!e)return this.getValues();if(null!=this._cacheMap[e])return this._cacheMap[e];this._configurationRegistry.validate(e);var t=si(this._overrideModel,e);return null==t&&(t=si(this._defaultModel,e)),this._cacheMap[e]=t,t}},{key:"getValues",value:function(){return zu({},this._defaultModel,this._overrideModel)}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function Qk(e,t,n){return t=dk(t),sk(e,eC()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function eC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eC=function(){return!!e})()}Xk([Ks($k)],Zk.prototype,"_configurationRegistry",2),Xk([Ts()],Zk.prototype,"destroy",1),Zk=Xk([Gs()],Zk);var tC=Object.defineProperty,nC=Object.getOwnPropertyDescriptor,rC=function(e,t,n,r){for(var o,i=r>1?void 0:r?nC(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tC(t,n,i),i},oC=function(e){function t(){var e;return _w(this,t),(e=Qk(this,t,arguments))._onConfigurationChange=e._register(new Lk),e.onConfigurationChange=e._onConfigurationChange.event,e}return vk(t,e),Ew(t,[{key:"registerConfiguration",value:function(e){this._configurationRegistry.register(e)}},{key:"registerDefaultValue",value:function(e){this._configurationModel.registerDefaultValue(e)}},{key:"setValue",value:function(e,t){if("object"===mw(e))for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];this._configurationModel.setValue(o,e[o])}else"string"==typeof e&&this._configurationModel.setValue(e,t);this._onConfigurationChange.emit({key:e,value:t})}},{key:"getValue",value:function(e){return this._configurationModel.getValue(e)}},{key:"getAllValues",value:function(){return this._configurationModel.getValues()}},{key:"getSchema",value:function(){return this._configurationRegistry.getSchema()}},{key:"onValueChange",value:function(e){this._configurationModel.onDidChange((function(t){"valueChanged"===t.type&&e(t)}))}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);rC([Ks($k)],oC.prototype,"_configurationRegistry",2),rC([Ks(Zk)],oC.prototype,"_configurationModel",2),rC([Ts()],oC.prototype,"destroy",1),oC=rC([Gs({token:lk})],oC);var iC=dd().register($k).register(Zk).register(oC),aC=function(){return Ew((function e(t){_w(this,e),this._struct=t,this._onUndo=new Lk,this.onUndo=this._onUndo.event,this._onRedo=new Lk,this.onRedo=this._onRedo.event}),[{key:"transact",value:function(e){this._struct.transact(e)}},{key:"canUndo",value:function(){return this._struct.canUndo()}},{key:"canRedo",value:function(){return this._struct.canRedo()}},{key:"undo",value:function(){this._struct.undo(),this._onUndo.emit(this)}},{key:"redo",value:function(){this._struct.redo(),this._onRedo.emit(this)}}])}();function uC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function lC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var cC=function(){return Ew((function e(){_w(this,e)}),[{key:"where",value:function(e,t,n){var r=this,o=Object.keys(t),i=o.length===(null==n?void 0:n.length)&&(null==n?void 0:n.every((function(e){return o.includes(e)})));if(n&&n.length>0&&(e=this.getDataByIndexes(e,t,n)),!e)return new K_;if(i)return e;if(t)for(var a=0,u=Object.keys(t);a<u.length;a++){var l=u[a];if(Array.isArray(t[l])){for(var c={},s=0;s<t[l].length;s++)c[t[l][s]]=!0;t["$__".concat(l)]=c}}var d=new K_;return e.forEach((function(e){r._matchRow(e,t)&&d.push([e])})),d}},{key:"getDataByIndexes",value:function(e,t,n){if(!e)return new K_;var r=new K_;if(2===n.length){var o=[],i=null==t?void 0:t[n[0]];i?Array.isArray(i)||(i=[i]):i=e.keys();var a,u=uC(i);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=e.get(l);c&&(o=o.concat(c))}}catch(e){u.e(e)}finally{u.f()}var s=null==t?void 0:t[n[1]];if(s){Array.isArray(s)||(s=[s]);var d,f=uC(s);try{for(f.s();!(d=f.n()).done;){var p,v=d.value,h=uC(o);try{for(h.s();!(p=h.n()).done;){var g=p.value.get(v);g&&r.push(g)}}catch(e){h.e(e)}finally{h.f()}}}catch(e){f.e(e)}finally{f.f()}}else{var m,y=uC(o);try{for(y.s();!(m=y.n()).done;){var b,w=m.value,_=uC(w.keys());try{for(_.s();!(b=_.n()).done;){var k=b.value;r.push(w.get(k))}}catch(e){_.e(e)}finally{_.f()}}}catch(e){y.e(e)}finally{y.f()}}}else{var C=null==t?void 0:t[n[0]];C?Array.isArray(C)||(C=[C]):C=Array.from(e.keys());var E,O=uC(C);try{for(O.s();!(E=O.n()).done;){var S=E.value,x=e.get(S);x&&r.push(x)}}catch(e){O.e(e)}finally{O.f()}}return r}},{key:"_matchRow",value:function(e,t){var n=!1;if(!t)return!0;var r=Object.keys(t);if(0===r.length)return!0;if(!t)return!0;for(var o=0,i=r;o<i.length;o++){var a=i[o];if(!a.startsWith("$__")&&!(n=this._match(e,a,t)))return!1}return n}},{key:"_match",value:function(e,t,n){var r,o=n[t];return(null==o?void 0:o.$not)?(o=o.$not,Array.isArray(o)?!o.find((function(n){return n==e.get(t)})):e.get(t)!=o):Array.isArray(o)?!!(null==(r=n["$__".concat(t)])?void 0:r[e.get(t)]):e.get(t)==o}}])}();function sC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function dC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fC=["uuid","uid"],pC=function(){return Ew((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_w(this,e),this._onBeforeChange=new Lk,this.onBeforeChange=this._onBeforeChange.event,this._options=n,this._struct=t,this._dataHelper=new cC}),[{key:"root",get:function(){return this._struct.data||new Y_}},{key:"getIndexes",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("indexes"))||[]}},{key:"getColumns",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("columns"))||[]}},{key:"setTable",value:function(e,t,n){var r=this.root.get(e);r||(r=this._struct.newMap(),this.root.set(e,r));var o,i=[],a=sC(t);try{for(a.s();!(o=a.n()).done;){var u=o.value;u.uuid||(u.uuid=qw(32)),i.push(u)}}catch(e){a.e(e)}finally{a.f()}r.set("columns",i),r.set("indexes",n)}},{key:"dropTable",value:function(e){this.root.delete(e)}},{key:"setData",value:function(e,t){var n,r=this,o=this.getIndexes(e),i=this.getColumns(e);this._filterColumns(t),this._onBeforeChange.emit({type:"init",table:e,data:t});var a=this.root.get(e);if(a){if(o&&o.length>0){var u=this._struct.newMap(null,i);a.set("data",u);var l,c=sC(t);try{var s=function(){var e=l.value;if(2===o.length){var t=e[o[0]],a=e[o[1]];if(!u.get(t)){var c=r._struct.newMap(null,i);c.set(a,r._struct.newArray()),u.set(t,c)}if((null==(n=u.get(t))?void 0:n.get(a))||u.get(t).set(a,r._struct.newArray()),Z_(u.get(t).get(a),(function(t){return(null==t?void 0:t.get("uuid"))===e.uuid})))return 1;u.get(t).get(a).push([r._struct.newMap(e,i)])}else{var s=e[o[0]],d=u.get(s);d||(d=r._struct.newArray(),u.set(s,d)),d.push([r._struct.newMap(e,i)])}};for(c.s();!(l=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}else a.set("data",this._struct.newArray(t));return t}}},{key:"update",value:function(e,t,n){var r=this.getIndexes(e),o=this.getColumns(e),i=this.root.get(e);if(i){var a,u=i.get("data");if(r&&r.length>0)if(u||(u=this._struct.newMap(null,o),i.set("data",u)),2===r.length){var l=t.get(0).get(r[0]),c=t.get(0).get(r[1]);a=u.get(l).get(c)}else if(fC.includes(r[0])){var s,d=sC(t);try{for(d.s();!(s=d.n()).done;){var f=s.value,p=u.get(f.get(r[0])).get(0);if(p)for(var v in n)p.set(v,n[v])}}catch(e){d.e(e)}finally{d.f()}}else{var h=t.get(0).get(r[0]);a=u.get(h)}else a=u;if(a){var g,m={},y=sC(a);try{for(y.s();!(g=y.n()).done;){var b=g.value;m[b.get("uuid")]=b}}catch(e){y.e(e)}finally{y.f()}var w,_=sC(t);try{for(_.s();!(w=_.n()).done;){var k=m[w.value.get("uuid")];if(k)for(var C in n)k.set(C,n[C])}}catch(e){_.e(e)}finally{_.f()}}}}},{key:"append",value:function(e,t,n){var r,o=this;Array.isArray(t)||(t=[t]);var i=this.getIndexes(e),a=this.getColumns(e),u=this.root.get(e);if(u){var l=u.get("data");if(this._filterColumns(t),i&&i.length>0)if(l||(l=this._struct.newMap(null,a),u.set("data",l)),2===i.length){var c=t[0][i[0]],s=t[0][i[1]];if(!l.get(c)){var d=this._struct.newMap(null,a);d.set(s,this._struct.newArray()),l.set(c,d)}(null==(r=l.get(c))?void 0:r.get(s))||l.get(c).set(s,this._struct.newArray());var f=l.get(c).get(s);if(n){var p=ek(f,(function(e){return e.get("uuid")===n.get("uuid")}));if(p>-1)return void f.insert(p+1,t.map((function(e){return o._struct.newMap(e,a)})))}f.push(t.map((function(e){return o._struct.newMap(e,a)})))}else if(fC.includes(i[0])){var v,h=sC(t);try{for(h.s();!(v=h.n()).done;){var g=v.value,m=g[i[0]];if(l.get(m)||l.set(m,this._struct.newArray()),l.get(m).length>0)return;l.get(m).push([this._struct.newMap(g,a)])}}catch(e){h.e(e)}finally{h.f()}}else{var y=t[0][i[0]];if(l.get(y)||l.set(y,this._struct.newArray()),n){var b=ek(l.get(n.get(i[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(b>-1)return void l.get(y).insert(b+1,t.map((function(e){return o._struct.newMap(e,a)})))}l.get(y).push(t.map((function(e){return o._struct.newMap(e,a)})))}else{if(l||(l=this._struct.newArray(),u.set("data",l)),n){var w=ek(l,(function(e){return e.get("uuid")===n.get("uuid")}));if(w>-1)return void l.insert(w+1,t.map((function(e){return o._struct.newMap(e,a)})))}l.push(t.map((function(e){return o._struct.newMap(e,a)})))}}}},{key:"before",value:function(e,t,n){var r=this;Array.isArray(t)||(t=[t]);var o=this.getIndexes(e),i=this.getColumns(e);t=this._filterColumns(t);var a=this.root.get(e);if(a){var u=a.get("data");if(o&&o.length>0)if(u||(u=this._struct.newMap(null,i),a.set("data",u)),2===o.length){var l=t[0][o[0]],c=t[0][o[1]];if(!u.get(l)){var s=this._struct.newMap(null,i);s.set(c,this._struct.newArray()),u.set(l,s)}if(u.get(l).get(c)||u.get(l).set(c,this._struct.newArray()),n){var d=ek(u.get(l).get(c),(function(e){return e.get("uuid")===n.get("uuid")}));if(d>-1)return void u.get(l).get(c).insert(d,t.map((function(e){return r._struct.newMap(e,i)})))}u.get(l).get(c).unshift(t.map((function(e){return r._struct.newMap(e,i)})))}else{var f=t[0][o[0]];if(u.get(f)||u.set(f,this._struct.newArray()),n){var p=ek(u.get(n.get(o[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(p>-1)return void u.get(f).insert(p,t.map((function(e){return r._struct.newMap(e,i)})))}u.get(f).unshift(t.map((function(e){return r._struct.newMap(e,i)})))}else{if(u||(u=this._struct.newArray(),a.set("data",u)),n){var v=ek(u,(function(e){return e.get("uuid")===n.get("uuid")}));if(v>-1)return void u.insert(v,t.map((function(e){return r._struct.newMap(e,i)})))}u.unshift(t.map((function(e){return r._struct.newMap(e,i)})))}}}},{key:"remove",value:function(e,t){var n,r=this.getIndexes(e),o=this.getColumns(e),i=this.root.get(e);if(i){var a=i.get("data"),u=t.toJSON();if(r&&r.length>0)if(a||(a=this._struct.newMap(null,o),i.set("data",a)),2===r.length){var l,c=sC(t);try{var s,d=function(){var e=l.value,t=e.get(r[0]),o=e.get(r[1]),i=null==(n=a.get(t))?void 0:n.get(o);if(!i)return{v:void 0};var u={};i.forEach((function(e,t){u[e.get("uuid")]=t}));var c=u[e.get("uuid")];i.delete(c)};for(c.s();!(l=c.n()).done;)if(s=d())return s.v}catch(e){c.e(e)}finally{c.f()}}else if(fC.includes(r[0])){var f,p=sC(u);try{var v,h=function(){var e=f.value,t=e[r[0]],n=a.get(t);if(!n)return{v:void 0};var o={};n.forEach((function(e,t){o[e.get("uuid")]=t}));var i=o[e.uuid];n.delete(i)};for(p.s();!(f=p.n()).done;)if(v=h())return v.v}catch(e){p.e(e)}finally{p.f()}}else{var g=u[0][r[0]],m=a.get(g);if(!m)return;var y={},b=m.length;m.forEach((function(e,t){y[e.get("uuid")]=t}));var w,_=u.map((function(e){return e.uuid})),k=Array.from({length:b}),C=sC(_);try{for(C.s();!(w=C.n()).done;){var E=w.value;k[y[E]]=E}}catch(e){C.e(e)}finally{C.f()}for(var O=b-1;O>=0;)k[O]&&m.delete(O),O--}else{var S={};a.forEach((function(e,t){S[e.get("uuid")]=t}));var x,j=a.length,D=u.map((function(e){return e.uuid})),A=Array.from({length:j}),R=sC(D);try{for(R.s();!(x=R.n()).done;){var F=x.value;A[S[F]]=F}}catch(e){R.e(e)}finally{R.f()}for(var I=j-1;I>=0;)A[I]&&a.delete(I),I--}}}},{key:"query",value:function(e,t){var n,r,o=null==(r=null==(n=this.root)?void 0:n.get(e))?void 0:r.get("data");if(!o)return new K_;var i=this.getIndexes(e);return t?this._dataHelper.where(o,t,i)||new K_:i&&i.length>0?this._dataHelper.getDataByIndexes(o,t,i)||new K_:o}},{key:"getOriginData",value:function(e){var t=this.root.get(e);return(null==t?void 0:t.get("data"))||new K_}},{key:"getAll",value:function(){return this.root.toJSON()}},{key:"clear",value:function(e){var t=this;return(e||Array.from(this.root.keys())).forEach((function(e){var n,r;(null==(n=t._options.frozenTable)?void 0:n.includes(e))||null==(r=t.root.get(e))||r.delete("data")})),this}},{key:"_filterColumns",value:function(e){var t=function(e){e._map&&(e=e.toJSON()),e.uuid||(e.uuid=qw(32));var t=new Date;return e.created_at?Xw(e.created_at)&&(e.created_at=e.created_at.getTime()):e.created_at=+t,e.updated_at?Xw(e.updated_at)&&(e.updated_at=e.updated_at.getTime()):e.updated_at=+t,e};if(!Array.isArray(e))return t(e);var n,r=sC(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(e){r.e(e)}finally{r.f()}return e}},{key:"destroy",value:function(){var e,t;null==(e=this._webrtc)||e.disconnect(),null==(t=this._ws)||t.disconnect(),this._struct.destroy(),this._webrtc=null,this._ws=null}}])}();function vC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gC=Object.defineProperty,mC=Object.getOwnPropertyDescriptor,yC=function(e,t,n,r){for(var o,i=r>1?void 0:r?mC(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gC(t,n,i),i},bC=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e;this._struct=new W_,this._stack=new aC(this._struct);var t=null==(e=this._configuration)?void 0:e.getValue("model.frozenTable");this._storage=new pC(this._struct,{frozenTable:t}),this._dataHelper=new cC}},{key:"struct",get:function(){return this._struct}},{key:"stack",get:function(){return this._stack}},{key:"root",get:function(){return this._storage.root}},{key:"setTable",value:function(e,t,n){this._storage.setTable(e,t,n)}},{key:"setData",value:function(e,t){this._storage.setData(e,t)}},{key:"getData",value:function(){return this._storage.getAll()}},{key:"query",value:function(e,t){return this._storage.query(e,t)}},{key:"upsert",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);return i&&0!==i.length?(this._storage.update(e,i,n),n):(n.uuid||(n.uuid=qw(32)),this._storage.append(e,n),n)}},{key:"update",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);return 0===i.length||this._storage.update(e,i,n),n}},{key:"insert",value:function(e,t,n){return n.uuid||(n.uuid=qw(32)),this._storage.append(e,n),n}},{key:"insertAfter",value:function(e,t,n){var r,o,i,a=this._storage.getOriginData(e),u=this._storage.getIndexes(e),l=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,l,u))?void 0:r.get(0)))return t&&(i=null==(o=this._dataHelper.where(a,t,u))?void 0:o.get(0)),this._storage.append(e,l,i),l}},{key:"insertBefore",value:function(e,t,n){var r,o,i,a=this._storage.getOriginData(e),u=this._storage.getIndexes(e),l=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,l,u))?void 0:r.get(0)))return t&&(i=null==(o=this._dataHelper.where(a,t,u))?void 0:o.get(0)),this._storage.before(e,l,i),l}},{key:"remove",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);if(0===i.length)return n;var a={};if(o&&o.length>0){i.forEach((function(e){var t=o.map((function(t){return e.get(t)})).join(",");a[t]||(a[t]=new K_),a[t].push([e])}));for(var u=0,l=Object.values(a);u<l.length;u++){var c=l[u];this._storage.remove(e,c)}}else this._storage.remove(e,i);return n}},{key:"bulkInsert",value:function(e,t,n){var r,o=vC(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.uuid||(i.uuid=qw(32))}}catch(e){o.e(e)}finally{o.f()}var a={},u=this._storage.getIndexes(e);if(u&&u.length>0){n.forEach((function(e){var t=u.map((function(t){return e[t]})).join(",");a[t]||(a[t]=[]),a[t].push(e)}));for(var l=0,c=Object.values(a);l<c.length;l++){var s=c[l];this._storage.append(e,s)}}else this._storage.append(e,n);return n}},{key:"moveAfter",value:function(e,t,n){var r,o=this._storage.getOriginData(e),i=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,u=this._dataHelper.where(o,a,i);if(u){var l;t&&(l=null==(r=this._dataHelper.where(o,t,i))?void 0:r.get(0));var c=u.toJSON(),s=null==l?void 0:l.toJSON();return this._storage.remove(e,u),s?this._storage.append(e,c,new Y_(s)):this._storage.append(e,c),u}}},{key:"moveBefore",value:function(e,t,n){var r,o=this._storage.getOriginData(e),i=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,u=this._dataHelper.where(o,a,i);if(u){var l;t&&(l=null==(r=this._dataHelper.where(o,t,i))?void 0:r.get(0));var c=u.toJSON(),s=null==l?void 0:l.toJSON();return this._storage.remove(e,u),s?this._storage.before(e,c,new Y_(s)):this._storage.before(e,c),u}}},{key:"clear",value:function(e){this._storage.clear(e)}},{key:"destroy",value:function(){this._storage.destroy(),this._struct.destroy(),this._storage.clear()}}])}();yC([Ks(lk)],bC.prototype,"_configuration",2),yC([Ms()],bC.prototype,"init",1),yC([Ts()],bC.prototype,"destroy",1),bC=yC([Gs({token:L_})],bC);var wC=dd().register(bC),_C=Mf,kC=Pf;function CC(e,t,n){return t=dk(t),sk(e,EC()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function EC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EC=function(){return!!e})()}var OC,SC=function(e){function t(){var e;return _w(this,t),(e=CC(this,t,arguments))._Plugin=new Map,e._unregisterToDestroy=new kk,e}return vk(t,e),Ew(t,[{key:"registerPlugins",value:function(e,t){var n=this;Array.isArray(e)&&e.forEach((function(e){var r=e.pluginName;if(!r)throw new Error('static property "pluginName" in Plugin is required!'+e);if(n._Plugin.get(r))throw Error('Plugin "'.concat(r,'" has been registered'));if(!e.pluginModule)throw Error('static property "pluginModule" in Plugin is required!'+e);var o=e.pluginModule(),i=t.container.load(o);n._unregisterToDestroy.push({destroy:i.dispose}),n._Plugin.set(r,e)}))}},{key:"unregisterPlugins",value:function(e){this._Plugin.size&&(this._unregisterToDestroy.destroy(),this._Plugin.clear())}}])}(bk),xC=Zw(navigator)?"":navigator.userAgent,jC=!Zw(window)&&window.h5,DC=void 0!==Vn&&"string"==typeof Vn.platform&&"number"==typeof Vn.pid?Vn:null,AC=/edge/i.test(xC),RC=!AC&&/chrome/i.test(xC),FC=/firefox/i.test(xC),IC=!AC&&!RC&&/safari/i.test(xC),PC=/dingtalk/i.test(xC),MC=/mobile/i.test(xC),TC=/os [._\d]+ like mac os/i.test(xC),NC={isAndroid:/android/i.test(xC),isIOS:TC,isMac:DC?"darwin"===DC.platform:!TC&&/mac os x/i.test(xC),isWin:DC?"win32"===DC.platform:/windows\s*(?:nt)?\s*[._\d]+/i.test(xC),isMobile:jC||MC},BC={isChrome:RC,isEdge:AC,isFirefox:FC,isSafari:IC,isDingtalk:PC},VC=function(){return Ew((function e(){_w(this,e)}),null,[{key:"onBeforeUnLoad",value:function(e){return window.addEventListener("beforeunload",e),{destroy:function(){window.removeEventListener("beforeunload",e)}}}}])}(),LC=function(e){window.requestIdleCallback?requestIdleCallback(e):e()};function zC(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function UC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){zC(i,r,o,a,u,"next",e)}function u(e){zC(i,r,o,a,u,"throw",e)}a(void 0)}))}}var HC=function(e){return e.TEXT="text",e.NUMBER="number",e.SELECT="select",e.MULTI_SELECT="multiSelect",e.DATE="date",e.MENTION="mention",e.IMAGE="image",e.FILE="file",e.CHECKBOX="checkbox",e.LINK="link",e.EMAIL="email",e.PHONE="phone",e.CREATED_AT="createdAt",e.UPDATED_AT="updatedAt",e.USER_ID="userId",e.MODIFIER_ID="modifierId",e.TITLE="title",e.TEXTAREA="textarea",e.INPUT="input",e.RATE="rate",e.PROGRESS="progress",e}(HC||{}),qC=function(e){return e.STRING="string",e.NUMBER="number",e.SELECT="select",e.URI="uri",e.BOOLEAN="boolean",e.DATE="date",e.SYSTEM="system",e}(qC||{}),WC=(bw(bw(bw(bw(bw(bw(bw(bw(bw(bw(OC={},"text","string"),"email","string"),"phone","string"),"title","string"),"select","select"),"multiSelect","select"),"number","number"),"rate","number"),"progress","number"),"date","date"),bw(bw(bw(bw(bw(bw(bw(bw(bw(OC,"mention","uri"),"image","uri"),"file","uri"),"link","uri"),"checkbox","boolean"),"createdAt","system"),"updatedAt","system"),"userId","system"),"modifierId","system"));Object.values(HC);var $C=[{name:"文本",type:HC.TEXT},{name:"单选",type:HC.SELECT,color:!0,options:[{name:"待开始",color:"#FBD3D0"},{name:"进行中",color:"#E4F7D2"},{name:"已完成",color:"#F7E9BC"}]},{name:"日期",type:HC.DATE}],GC=[{type:HC.TITLE,name:Lw("标题")},{type:HC.TEXT,name:Lw("文本")},{type:HC.NUMBER,name:Lw("数字")},{type:HC.SELECT,name:Lw("单选")},{type:HC.MULTI_SELECT,name:Lw("多选")},{type:HC.DATE,name:Lw("日期")},{type:HC.MENTION,name:Lw("人员")},{type:HC.IMAGE,name:Lw("图片"),disableGroup:!0,disableSort:!0},{type:HC.FILE,name:Lw("附件"),disableGroup:!0,disableSort:!0},{type:HC.CHECKBOX,name:Lw("复选框")},{type:HC.LINK,name:Lw("链接")},{type:HC.EMAIL,name:Lw("邮箱")},{type:HC.PHONE,name:Lw("手机号码")},{type:HC.RATE,name:Lw("评分")},{type:HC.PROGRESS,name:Lw("进度")},{type:HC.USER_ID,name:Lw("创建人"),isAdvanced:!0,disableForm:!0},{type:HC.CREATED_AT,name:Lw("创建时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0},{type:HC.MODIFIER_ID,name:Lw("修改人"),isAdvanced:!0,disableForm:!0},{type:HC.UPDATED_AT,name:Lw("修改时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0}];function KC(e,t){var n={};GC.forEach((function(e){n[e.type]=e.name}));for(var r=n[e],o=t.map((function(e){return e.name})),i=1,a=r;o.includes(a);)a="".concat(r," ").concat(i),i+=1;return a}function YC(e){var t=GC.find((function(t){return t.type===e}));return(null==t?void 0:t.name)||""}Is.defineToken("KernelModelToken");var JC,XC=function(e){return e[e.ACTIVE=0]="ACTIVE",e[e.INACTIVE=1]="INACTIVE",e}(XC||{}),ZC=function(e){return e.equalTo="equalTo",e.notEqualTo="notEqualTo",e.greaterThan="greaterThan",e.greaterThanOrEqualTo="greaterThanOrEqualTo",e.lessThan="lessThan",e.lessThanOrEqualTo="lessThanOrEqualTo",e.isEmpty="isEmpty",e.isNotEmpty="isNotEmpty",e.startsWith="startsWith",e.notStartsWith="notStartsWith",e.endsWith="endsWith",e.notEndsWith="notEndsWith",e.contains="contains",e.notContains="notContains",e.yesterday="yesterday",e.today="today",e.tomorrow="tomorrow",e.last7days="last7days",e.lastWeek="lastWeek",e.thisWeek="thisWeek",e.nextWeek="nextWeek",e.lastMonth="lastMonth",e.thisMonth="thisMonth",e.nextMonth="nextMonth",e.is="is",e.isNot="isNot",e.isEmptySelect="isEmptySelect",e.isNotEmptySelect="isNotEmptySelect",e.isExactly="isExactly",e.hasAnyOf="hasAnyOf",e.hasAllOf="hasAllOf",e.hasNoneOf="hasNoneOf",e}(ZC||{}),QC=function(e){return e.And="and",e.Or="or",e}(QC||{}),eE=function(e){return e.forward="forward",e.reverse="reverse",e}(eE||{}),tE=function(e){return e.Clip="clip",e.Fit="fit",e}(tE||{}),nE=function(e){return e.LOW="low",e.MIDDLE="middle",e.HIGH="high",e}(nE||{}),rE=function(e){return e.CUSTOM="custom",e.FOLLOW_FIELD="follow_field",e}(rE||{}),oE=function(e){return e.ASC="asc",e.DESC="desc",e}(oE||{}),iE=function(e){return e.ASC="asc",e.DESC="desc",e}(iE||{}),aE=[{type:"number",func:ZC.equalTo,text:Lw("等于")},{type:"number",func:ZC.notEqualTo,text:Lw("不等于")},{type:"number",func:ZC.greaterThan,text:Lw("大于")},{type:"number",func:ZC.greaterThanOrEqualTo,text:Lw("大于等于")},{type:"number",func:ZC.lessThan,text:Lw("小于")},{type:"number",func:ZC.lessThanOrEqualTo,text:Lw("小于等于")},{type:"number",func:ZC.isEmpty,text:Lw("为空")},{type:"number",func:ZC.isNotEmpty,text:Lw("非空")},{type:"text",func:ZC.startsWith,text:Lw("开头是")},{type:"text",func:ZC.notStartsWith,text:Lw("开头不是")},{type:"text",func:ZC.endsWith,text:Lw("结尾是")},{type:"text",func:ZC.notEndsWith,text:Lw("结尾不是")},{type:"text",func:ZC.contains,text:Lw("包含")},{type:"text",func:ZC.notContains,text:Lw("不包含")},{type:"text",func:ZC.isEmpty,text:Lw("为空")},{type:"text",func:ZC.isNotEmpty,text:Lw("非空")},{type:"timePeriod",func:ZC.equalTo,text:Lw("等于")},{type:"timePeriod",func:ZC.lessThan,text:Lw("早于")},{type:"timePeriod",func:ZC.greaterThan,text:Lw("晚于")},{type:"timePeriod",func:ZC.isEmpty,text:Lw("为空")},{type:"timePeriod",func:ZC.isNotEmpty,text:Lw("非空")},{type:"select",func:ZC.is,text:Lw("是")},{type:"select",func:ZC.isNot,text:Lw("不是")},{type:"select",func:ZC.isEmptySelect,text:Lw("为空")},{type:"select",func:ZC.isNotEmptySelect,text:Lw("非空")},{type:"multiSelect",func:ZC.isExactly,text:Lw("是")},{type:"multiSelect",func:ZC.isNot,text:Lw("不是")},{type:"multiSelect",func:ZC.hasAnyOf,text:Lw("包含一个")},{type:"multiSelect",func:ZC.hasAllOf,text:Lw("包含所有")},{type:"multiSelect",func:ZC.hasNoneOf,text:Lw("不包含")},{type:"multiSelect",func:ZC.isEmptySelect,text:Lw("为空")},{type:"multiSelect",func:ZC.isNotEmptySelect,text:Lw("非空")},{type:"checkbox",func:ZC.equalTo,text:Lw("等于")},{type:"file",func:ZC.isEmpty,text:Lw("为空")},{type:"file",func:ZC.isNotEmpty,text:Lw("非空")}],uE=(bw(bw(bw(bw(bw(bw(bw(bw(bw(bw(JC={},HC.TITLE,"text"),HC.TEXT,"text"),HC.LINK,"text"),HC.EMAIL,"text"),HC.PHONE,"text"),HC.DATE,"timePeriod"),HC.CREATED_AT,"timePeriod"),HC.UPDATED_AT,"timePeriod"),HC.NUMBER,"number"),HC.RATE,"number"),bw(bw(bw(bw(bw(bw(bw(bw(bw(JC,HC.PROGRESS,"number"),HC.SELECT,"select"),HC.MULTI_SELECT,"multiSelect"),HC.MENTION,"multiSelect"),HC.USER_ID,"select"),HC.MODIFIER_ID,"select"),HC.CHECKBOX,"checkbox"),HC.IMAGE,"file"),HC.FILE,"file")),lE=["isEmpty","isNotEmpty","duplicate","unique","isEmptySelect","isNotEmptySelect"],cE=[{name:"custom",text:Lw("具体日期")},{name:"today",text:Lw("今天")},{name:"tomorrow",text:Lw("明天")},{name:"yesterday",text:Lw("昨天")},{name:"thisWeek",text:Lw("本周")},{name:"lastWeek",text:Lw("上周")},{name:"nextWeek",text:Lw("下周")},{name:"lastMonth",text:Lw("上月")},{name:"thisMonth",text:Lw("本月")},{name:"nextMonth",text:Lw("下月")},{name:"last7days",text:Lw("过去7天内"),matchFuncs:[ZC.equalTo]},{name:"next7days",text:Lw("未来7天内"),matchFuncs:[ZC.equalTo]},{name:"last30days",text:Lw("过去30天内"),matchFuncs:[ZC.equalTo]},{name:"next30days",text:Lw("未来30天内"),matchFuncs:[ZC.equalTo]}],sE=function(e){return e.GRID="GRID",e.CARD="CARD",e.KANBAN="KANBAN",e.FORM="FORM",e.CALENDAR="CALENDAR",e}(sE||{});Object.values(sE);var dE=bw(bw(bw(bw(bw({},"GRID",{type:"GRID",name:Lw("表格视图")}),"CARD",{type:"CARD",name:Lw("画册视图")}),"KANBAN",{type:"KANBAN",name:Lw("看板视图")}),"FORM",{type:"FORM",name:Lw("表单")}),"CALENDAR",{type:"CALENDAR",name:Lw("日历视图")}),fE=function(){return Ew((function e(){_w(this,e)}),null,[{key:"isBoolean",value:function(e){return e===HC.CHECKBOX}},{key:"isDate",value:function(e){return e===HC.DATE}},{key:"isDateLike",value:function(e){return e===HC.DATE||e===HC.UPDATED_AT||e===HC.CREATED_AT}},{key:"isSystemDate",value:function(e){return e===HC.CREATED_AT||e===HC.UPDATED_AT}},{key:"isNumberLike",value:function(e){return e===HC.NUMBER||e===HC.RATE||e===HC.PROGRESS}},{key:"isSelectLike",value:function(e){return e===HC.SELECT||e===HC.MULTI_SELECT}},{key:"isSelect",value:function(e){return e===HC.SELECT}},{key:"isMultiSelect",value:function(e){return e===HC.MULTI_SELECT}},{key:"isSystemType",value:function(e){return e===HC.CREATED_AT||e===HC.UPDATED_AT||e===HC.USER_ID||e===HC.MODIFIER_ID}},{key:"isCreateDisable",value:function(e){return e===HC.TITLE}},{key:"isTransformDisable",value:function(e){return e===HC.TITLE}},{key:"isDeleteDisable",value:function(e){return e===HC.TITLE}},{key:"isSystemUser",value:function(e){return e===HC.USER_ID||e===HC.MODIFIER_ID}},{key:"isString",value:function(e){return e===HC.TITLE||e===HC.TEXT||e===HC.EMAIL||e===HC.PHONE}},{key:"isUri",value:function(e){return e===HC.IMAGE||e===HC.FILE||e===HC.MENTION||e===HC.LINK}},{key:"isLink",value:function(e){return e===HC.LINK}},{key:"isMultiple",value:function(e){return e===HC.MULTI_SELECT||e===HC.IMAGE||e===HC.FILE||e===HC.MENTION}},{key:"isMention",value:function(e){return e===HC.MENTION}},{key:"isMentionLike",value:function(e){return e===HC.MENTION||e===HC.USER_ID||e===HC.MODIFIER_ID}},{key:"isImage",value:function(e){return e===HC.IMAGE}},{key:"isCheckbox",value:function(e){return e===HC.CHECKBOX}},{key:"isGroup",value:function(e){return e===HC.TITLE||e===HC.TEXT||e===HC.NUMBER||e===HC.RATE||e===HC.PROGRESS||e===HC.SELECT||e===HC.MULTI_SELECT||e===HC.DATE||e===HC.MENTION||e===HC.CHECKBOX||e===HC.LINK||e===HC.EMAIL||e===HC.PHONE||e===HC.USER_ID||e===HC.MODIFIER_ID}},{key:"isSort",value:function(e){return e===HC.TITLE||e===HC.TEXT||e===HC.NUMBER||e===HC.RATE||e===HC.PROGRESS||e===HC.SELECT||e===HC.MULTI_SELECT||e===HC.DATE||e===HC.MENTION||e===HC.CHECKBOX||e===HC.LINK||e===HC.EMAIL||e===HC.PHONE||e===HC.USER_ID||e===HC.CREATED_AT||e===HC.MODIFIER_ID||e===HC.UPDATED_AT}},{key:"isFilter",value:function(e){return e===HC.TITLE||e===HC.TEXT||e===HC.NUMBER||e===HC.RATE||e===HC.PROGRESS||e===HC.SELECT||e===HC.MULTI_SELECT||e===HC.DATE||e===HC.MENTION||e===HC.IMAGE||e===HC.FILE||e===HC.CHECKBOX||e===HC.LINK||e===HC.EMAIL||e===HC.PHONE||e===HC.USER_ID||e===HC.CREATED_AT||e===HC.MODIFIER_ID||e===HC.UPDATED_AT}},{key:"getBaseType",value:function(e){return WC[e]}}])}(),pE=Is.defineToken("DriverToken"),vE=function(e){return e.Pending="pending",e.Runing="Runing",e}(vE||{}),hE=Is.defineToken("ModelEventToken"),gE=Is.defineToken("ModelInitialToken"),mE=function(e){return e.SELECT="select",e.INSERT="insert",e.UPDATE="update",e.DELETE="remove",e.UPSERT="upsert",e.BULK_INSERT="bulkInsert",e.MOVE_BEFORE="moveBefore",e.MOVE_AFTER="moveAfter",e.INSERT_AFTER="insertAfter",e.INSERT_BEFORE="insertBefore",e}(mE||{}),yE=Object.defineProperty,bE=Object.getOwnPropertyDescriptor,wE=function(e,t,n,r){for(var o,i=r>1?void 0:r?bE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yE(t,n,i),i},_E=function(){return Ew((function e(){_w(this,e),this._status=vE.Pending,this._tableMap={}}),[{key:"initTable",value:function(e){this._tableMap[e.name]=e}},{key:"tables",get:function(){return Object.values(this._tableMap)}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.command===mE.SELECT)return this._read(e);if(e.command===mE.INSERT||e.command===mE.UPDATE||e.command===mE.UPSERT||e.command===mE.DELETE||e.command===mE.BULK_INSERT||e.command===mE.MOVE_AFTER||e.command===mE.MOVE_BEFORE||e.command===mE.INSERT_AFTER||e.command===mE.INSERT_BEFORE)return t.slient?this._modelEvent.emitChangeWithSilent({spell:e}):this._modelEvent.emitChange({spell:e}),this._modelEvent.emitChangeAllways({spell:e}),this._write(e);throw new Error("".concat(e.command," 指令没有实现驱动"))}},{key:"_read",value:function(e){var t=this._database.query(e.table,e.where);return this._parseRes(t)}},{key:"_write",value:function(e){var t=this._database[e.command](e.table,e.where,e.sets);return this._parseRes(t)}},{key:"_parseRes",value:function(e){var t=0;return e?{rows:e,rowCount:t=Array.isArray(e)?e.length:1}:{rows:new K_,rowCount:t}}}])}();wE([Ks(L_)],_E.prototype,"_database",2),wE([Ks(hE)],_E.prototype,"_modelEvent",2),_E=wE([Gs({token:pE})],_E);var kE=Is.defineToken("ModelContribution");function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CE(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=t.constructor;r.columns||(r.columns={}),r.columns[n]=EE(EE({},e),{},{name:n})}}function SE(e,t){if(null!=e&&null!=t){for(var n in t){var r=e[n],o=t[n].defaultValue;void 0===r&&null!=o&&(e[n]=o)}return e}}function xE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jE(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function jE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DE(e,t){var n=e.Model,r={};for(var o in t){var i=n.columns[o],a=t[o];i&&(i.type?r[o]=i.type.toValue(a):r[o]=a)}return r}function AE(e,t){var n;if(Array.isArray(t)){n=[];var r,o=xE(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.push(DE(e,i))}}catch(e){o.e(e)}finally{o.f()}}else n=DE(e,t);return n}function RE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RE(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var IE=function(){return Ew((function e(t,n,r){_w(this,e),this.sets=[],this.groups=[],this.orders=[],this.offset=0,this.Model=t,this.table=t.table,this.command=mE.SELECT,this._driver=n,this._executeOpts=r}),[{key:"execute",value:function(){if(this._driver){var e=this._driver.execute(this.toObject(),this._executeOpts);return e=FE(FE({},e),{},{spell:this})}}},{key:"$insert",value:function(e){return this.command=mE.INSERT,this.sets=AE(this,e),this}},{key:"$update",value:function(e){return this.command=mE.UPDATE,this.sets=AE(this,e),this}},{key:"$upsert",value:function(e){return this.command=mE.UPSERT,this.sets=AE(this,e),this}},{key:"$delete",value:function(){return this.command=mE.DELETE,this}},{key:"$bulkInsert",value:function(e){return this.command=mE.BULK_INSERT,this.sets=AE(this,e),this}},{key:"$insertAfter",value:function(e){return this.command=mE.INSERT_AFTER,this.sets=AE(this,e),this}},{key:"$insertBefore",value:function(e){return this.command=mE.INSERT_BEFORE,this.sets=AE(this,e),this}},{key:"$moveAfter",value:function(e){return this.command=mE.MOVE_AFTER,this.sets=AE(this,e),this}},{key:"$moveBefore",value:function(e){return this.command=mE.MOVE_BEFORE,this.sets=AE(this,e),this}},{key:"$where",value:function(e){return this.where=e,this}},{key:"$offset",value:function(e){if(Number.isNaN(e))throw new Error("invalid offset ".concat(e));return this.offset=e,this}},{key:"$limit",value:function(e){if(Number.isNaN(e))throw new Error("invalid limit ".concat(e));return this.limit=e,this}},{key:"toObject",value:function(){return{table:this.table,command:this.command,where:this.where,sets:this.sets,offset:this.offset,limit:this.limit}}}])}();function PE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ME(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PE(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return NE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NE(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function NE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var BE=function(){return Ew((function e(t,n){_w(this,e),this.timestamps={updatedAt:"updated_at",createdAt:"created_at"},this.Model=t,this.driver=n}),[{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new IE(this.Model,this.driver);if(n.$where(e),t)for(var r=0,o=["order","limit","offset","select"];r<o.length;r++){var i=o[r],a=t[i];null!=a&&n["$".concat(i)](a)}var u=n.execute();return(null==u?void 0:u.rows)&&0!==u.rows.length?u.rows:new K_}},{key:"findOne",value:function(e){var t=this.find(e);return t&&t.get(0)?t.get(0):null}},{key:"findById",value:function(e){var t={uuid:e},n=this.find(t);return n&&n.get(0)?n.get(0):null}},{key:"remove",value:function(e){return new IE(this.Model,this.driver).$where(e).$delete().execute().affectedRows}},{key:"update",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.timestamps.updatedAt,i=Object.assign({},n);return!(null==(t=this.Model.columns)?void 0:t[o])||i[o]||r.silent||(i[o]=+new Date),new IE(this.Model,this.driver,r).$where(e).$update(i).execute().rows}},{key:"upsert",value:function(e,t,n){var r,o=this.timestamps.updatedAt,i=Object.assign({},t);(null==(r=this.Model.columns)?void 0:r[o])&&!i[o]&&(i[o]=+new Date);var a=new IE(this.Model,this.driver,n).$where(e).$upsert(i).execute();return null==a?void 0:a.rows}},{key:"bulkCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.length)return e;var n,r=this.columns,o=this.timestamps,i=o.createdAt,a=o.updatedAt,u=new Date,l=TE(e);try{for(l.s();!(n=l.n()).done;){var c=n.value;i&&(c[i]=+u),a&&(c[a]=+u),SE(c,r)}}catch(e){l.e(e)}finally{l.f()}return t=ME(ME({},t),{},{columns:r}),new IE(this.Model,this.driver).$bulkInsert(e).execute(),e}},{key:"moveAfter",value:function(e,t){return t=Object.assign({},t),new IE(this.Model,this.driver).$where(e).$moveAfter(t).execute().rows}},{key:"moveBefore",value:function(e,t){return t=Object.assign({},t),new IE(this.Model,this.driver).$where(e).$moveBefore(t).execute().rows}},{key:"create",value:function(e){var t=new IE(this.Model,this.driver).$insert(this._getCreateValue(e)).execute();return this.findOne({uuid:t.rows.uuid}).toJSON()}},{key:"createAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new IE(this.Model,this.driver).$where(e).$insertAfter(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"createBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new IE(this.Model,this.driver).$where(e).$insertBefore(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"_getCreateValue",value:function(e){var t=this.Model.columns,n=this.timestamps,r=n.createdAt,o=n.updatedAt,i={},a=new Date;for(var u in(null==t?void 0:t[r])&&(this[r]=+a),(null==t?void 0:t[o])&&(this[o]=+a),t){var l=e[u],c=t[u].defaultValue;null!=l?i[u]=l:void 0===l&&null!=c&&(i[u]=c)}return i}}])}();function VE(e,t,n){return t=dk(t),sk(e,LE()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function LE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LE=function(){return!!e})()}var zE=Object.defineProperty,UE=Object.getOwnPropertyDescriptor,HE=function(e,t,n,r){for(var o,i=r>1?void 0:r?UE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zE(t,n,i),i},qE=function(e){function t(){var e;return _w(this,t),(e=VE(this,t,arguments))._onChange=e._register(new Lk),e.onChange=e._onChange.event,e.emitChange=function(t){zw((function(){e._onChange.emit(t)}))},e._onChangeWithSlient=e._register(new Lk),e.onChangeWithSlient=e._onChange.event,e.emitChangeWithSilent=function(t){zw((function(){e._onChangeWithSlient.emit(t)}))},e._onChangeAllways=e._register(new Lk),e.onChangeAllways=e._onChange.event,e.emitChangeAllways=function(t){zw((function(){e._onChangeAllways.emit(t)}))},e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function WE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$E(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function $E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}HE([Ts()],qE.prototype,"destroy",1),qE=HE([Gs({token:hE})],qE);var GE=Object.defineProperty,KE=Object.getOwnPropertyDescriptor,YE=function(e,t,n,r){for(var o,i=r>1?void 0:r?KE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GE(t,n,i),i},JE=function(){return Ew((function e(){_w(this,e),this._modelMap=new Map}),[{key:"init",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=WE(this._modelProvider.getContributions());try{for(n.s();!(e=n.n()).done;){var r=e.value;try{r.registerModel&&t.push(r.registerModel()),r.registerModels&&(t=t.concat(r.registerModels()))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}var o,i=WE(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._initTable(a),this._modelMap.set(a.table,a)}}catch(e){i.e(e)}finally{i.f()}}},{key:"getModel",value:function(e){return this._modelMap.get(e)}},{key:"_initTable",value:function(e){if(!e.table)throw new Error("Model must have a name");var t=e.columns||{};t.uuid={name:"uuid"},t.created_at={name:"created_at"},t.updated_at={name:"updated_at"};var n=t?Object.keys(t).map((function(e){return t[e]})):[];return this._driver.initTable({name:e.table,indexes:e.indexes,columns:n}),this._database.setTable(e.table,n,e.indexes),this}}])}();YE([yd(kE)],JE.prototype,"_modelProvider",2),YE([Ks(pE)],JE.prototype,"_driver",2),YE([Ks(L_)],JE.prototype,"_database",2),JE=YE([Gs()],JE);var XE=Object.defineProperty,ZE=Object.getOwnPropertyDescriptor,QE=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XE(t,n,i),i},eO=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){this._configuration.registerConfiguration({id:"model",type:"object",title:"数据模型",properties:{frozenTable:{type:"array",description:"固化表，普通刷新不清空内容"}}}),this._modelRegistry.init(null==e?void 0:e.models)}}])}();QE([Ks(lk)],eO.prototype,"_configuration",2),QE([Ks(JE)],eO.prototype,"_modelRegistry",2),eO=QE([Gs({token:gE})],eO);var tO=Object.defineProperty,nO=Object.getOwnPropertyDescriptor,rO=function(e,t,n,r){for(var o,i=r>1?void 0:r?nO(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tO(t,n,i),i},oO=function(){return Ew((function e(){_w(this,e)}),[{key:"getModel",value:function(e){var t=this._modelRegistry.getModel(e);return new BE(t,this._driver)}}])}();rO([Ks(JE)],oO.prototype,"_modelRegistry",2),rO([Ks(pE)],oO.prototype,"_driver",2),oO=rO([Gs()],oO);var iO=Ew((function e(){_w(this,e)})),aO=dd().contribution(kE).register(_E).register(qE).register(eO).register(oO).register(JE);function uO(e,t,n){return t=dk(t),sk(e,lO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function lO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lO=function(){return!!e})()}var cO=Object.defineProperty,sO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&cO(t,n,i),i},dO=function(e){function t(){return _w(this,t),uO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function fO(e,t,n){return t=dk(t),sk(e,pO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function pO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pO=function(){return!!e})()}dO.table="field_boolean",dO.indexes=["field_uuid","record_uuid"],dO.ignoreColumns=["uuid"],sO([OE()],dO.prototype,"field_uuid"),sO([OE()],dO.prototype,"record_uuid"),sO([OE()],dO.prototype,"value");var vO=Object.defineProperty,hO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&vO(t,n,i),i},gO=function(e){function t(){return _w(this,t),fO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function mO(e,t,n){return t=dk(t),sk(e,yO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function yO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yO=function(){return!!e})()}gO.table="field_date",gO.indexes=["field_uuid","record_uuid"],gO.ignoreColumns=["uuid"],hO([OE()],gO.prototype,"field_uuid"),hO([OE()],gO.prototype,"record_uuid"),hO([OE()],gO.prototype,"value");var bO=Object.defineProperty,wO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&bO(t,n,i),i},_O=function(e){function t(){return _w(this,t),mO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function kO(e,t,n){return t=dk(t),sk(e,CO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function CO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CO=function(){return!!e})()}_O.table="field",_O.indexes=["uuid"],wO([OE()],_O.prototype,"name"),wO([OE()],_O.prototype,"type"),wO([OE()],_O.prototype,"sub_type"),wO([OE()],_O.prototype,"color"),wO([OE()],_O.prototype,"multiple"),wO([OE()],_O.prototype,"config");var EO=Object.defineProperty,OO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&EO(t,n,i),i},SO=function(e){function t(){return _w(this,t),kO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function xO(e,t,n){return t=dk(t),sk(e,jO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function jO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jO=function(){return!!e})()}SO.table="field_number",SO.indexes=["field_uuid","record_uuid"],SO.ignoreColumns=["uuid"],OO([OE()],SO.prototype,"field_uuid"),OO([OE()],SO.prototype,"record_uuid"),OO([OE()],SO.prototype,"value"),OO([OE()],SO.prototype,"format");var DO=Object.defineProperty,AO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&DO(t,n,i),i},RO=function(e){function t(){return _w(this,t),xO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function FO(e,t,n){return t=dk(t),sk(e,IO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function IO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IO=function(){return!!e})()}RO.table="field_option",RO.indexes=["field_uuid"],RO.MAX_LENGTH=128,AO([OE()],RO.prototype,"field_uuid"),AO([OE()],RO.prototype,"name"),AO([OE()],RO.prototype,"color"),AO([OE()],RO.prototype,"temp");var PO=Object.defineProperty,MO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&PO(t,n,i),i},TO=function(e){function t(){return _w(this,t),FO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function NO(e,t,n){return t=dk(t),sk(e,BO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function BO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BO=function(){return!!e})()}TO.table="field_select",TO.indexes=["field_uuid","record_uuid"],TO.ignoreColumns=["uuid"],MO([OE()],TO.prototype,"field_uuid"),MO([OE()],TO.prototype,"record_uuid"),MO([OE()],TO.prototype,"value");var VO=Object.defineProperty,LO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&VO(t,n,i),i},zO=function(e){function t(){return _w(this,t),NO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function UO(e,t,n){return t=dk(t),sk(e,HO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function HO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HO=function(){return!!e})()}zO.table="field_string",zO.indexes=["field_uuid","record_uuid"],zO.ignoreColumns=["uuid"],LO([OE()],zO.prototype,"field_uuid"),LO([OE()],zO.prototype,"record_uuid"),LO([OE()],zO.prototype,"value"),LO([OE()],zO.prototype,"updated_at"),LO([OE()],zO.prototype,"created_at");var qO=Object.defineProperty,WO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&qO(t,n,i),i},$O=function(e){function t(){return _w(this,t),UO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function GO(e,t,n){return t=dk(t),sk(e,KO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function KO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KO=function(){return!!e})()}$O.table="field_uri",$O.indexes=["field_uuid","record_uuid"],$O.ignoreColumns=["uuid"],WO([OE()],$O.prototype,"field_uuid"),WO([OE()],$O.prototype,"record_uuid"),WO([OE()],$O.prototype,"uid"),WO([OE()],$O.prototype,"name"),WO([OE()],$O.prototype,"src"),WO([OE()],$O.prototype,"size"),WO([OE()],$O.prototype,"mime"),WO([OE()],$O.prototype,"icon"),WO([OE()],$O.prototype,"width"),WO([OE()],$O.prototype,"height");var YO=Object.defineProperty,JO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&YO(t,n,i),i},XO=function(e){function t(){return _w(this,t),GO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function ZO(e,t,n){return t=dk(t),sk(e,QO()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QO=function(){return!!e})()}XO.table="filter",XO.indexes=["view_uuid"],JO([OE()],XO.prototype,"view_uuid"),JO([OE()],XO.prototype,"field_uuid"),JO([OE()],XO.prototype,"operator"),JO([OE()],XO.prototype,"func"),JO([OE()],XO.prototype,"expected");var eS=Object.defineProperty,tS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&eS(t,n,i),i},nS=function(e){function t(){return _w(this,t),ZO(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function rS(e,t,n){return t=dk(t),sk(e,oS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function oS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oS=function(){return!!e})()}nS.table="group",nS.indexes=["view_uuid"],tS([OE()],nS.prototype,"view_uuid"),tS([OE()],nS.prototype,"field_uuid"),tS([OE()],nS.prototype,"type");var iS=Object.defineProperty,aS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&iS(t,n,i),i},uS=function(e){function t(){return _w(this,t),rS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function lS(e,t,n){return t=dk(t),sk(e,cS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function cS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cS=function(){return!!e})()}uS.table="group_item",uS.indexes=["view_uuid","field_uuid"],aS([OE()],uS.prototype,"view_uuid"),aS([OE()],uS.prototype,"field_uuid"),aS([OE()],uS.prototype,"key"),aS([OE()],uS.prototype,"collapse");var sS=Object.defineProperty,dS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&sS(t,n,i),i},fS=function(e){function t(){return _w(this,t),lS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function pS(e,t,n){return t=dk(t),sk(e,vS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function vS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vS=function(){return!!e})()}fS.table="record",fS.indexes=["uuid"],dS([OE()],fS.prototype,"id"),dS([OE()],fS.prototype,"desc"),dS([OE()],fS.prototype,"creator_id"),dS([OE()],fS.prototype,"modifier_id");var hS=Object.defineProperty,gS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&hS(t,n,i),i},mS=function(e){function t(){return _w(this,t),pS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function yS(e,t,n){return t=dk(t),sk(e,bS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function bS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bS=function(){return!!e})()}mS.table="sort",mS.indexes=["view_uuid"],gS([OE()],mS.prototype,"view_uuid"),gS([OE()],mS.prototype,"field_uuid"),gS([OE()],mS.prototype,"type");var wS=Object.defineProperty,_S=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&wS(t,n,i),i},kS=function(e){function t(){return _w(this,t),yS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function CS(e,t,n){return t=dk(t),sk(e,ES()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ES(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ES=function(){return!!e})()}kS.table="stat",kS.indexes=["view_uuid","field_uuid"],_S([OE()],kS.prototype,"view_uuid"),_S([OE()],kS.prototype,"field_uuid"),_S([OE()],kS.prototype,"type");var OS=Object.defineProperty,SS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&OS(t,n,i),i},xS=function(e){function t(){return _w(this,t),CS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function jS(e,t,n){return t=dk(t),sk(e,DS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function DS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DS=function(){return!!e})()}xS.table="table",SS([OE()],xS.prototype,"version"),SS([OE()],xS.prototype,"active_view_uuid");var AS=Object.defineProperty,RS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&AS(t,n,i),i},FS=function(e){function t(){return _w(this,t),jS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function IS(e,t,n){return t=dk(t),sk(e,PS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function PS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PS=function(){return!!e})()}FS.table="user",FS.indexes=["uid"],RS([OE()],FS.prototype,"uid"),RS([OE()],FS.prototype,"login"),RS([OE()],FS.prototype,"work_id"),RS([OE()],FS.prototype,"name"),RS([OE()],FS.prototype,"icon");var MS=Object.defineProperty,TS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&MS(t,n,i),i},NS=function(e){function t(){return _w(this,t),IS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function BS(e,t,n){return t=dk(t),sk(e,VS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function VS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VS=function(){return!!e})()}NS.table="view_config",NS.indexes=["view_uuid"],TS([OE()],NS.prototype,"view_uuid"),TS([OE()],NS.prototype,"cover_field_uuid"),TS([OE()],NS.prototype,"cover_display"),TS([OE()],NS.prototype,"show_field_name"),TS([OE()],NS.prototype,"keep_sort"),TS([OE()],NS.prototype,"frozen_field"),TS([OE()],NS.prototype,"record_height"),TS([OE()],NS.prototype,"start_date_field_uuid"),TS([OE()],NS.prototype,"end_date_field_uuid"),TS([OE()],NS.prototype,"active_date"),TS([OE()],NS.prototype,"date_title_field_uuid"),TS([OE()],NS.prototype,"show_lunar"),TS([OE()],NS.prototype,"date_color_type"),TS([OE()],NS.prototype,"date_color");var LS=Object.defineProperty,zS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&LS(t,n,i),i},US=function(e){function t(){return _w(this,t),BS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function HS(e,t,n){return t=dk(t),sk(e,qS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function qS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qS=function(){return!!e})()}US.table="view_field",US.indexes=["view_uuid"],zS([OE()],US.prototype,"view_uuid"),zS([OE()],US.prototype,"field_uuid"),zS([OE()],US.prototype,"group_uuid"),zS([OE()],US.prototype,"name"),zS([OE()],US.prototype,"size"),zS([OE()],US.prototype,"display_type"),zS([OE()],US.prototype,"required"),zS([OE()],US.prototype,"hidden");var WS=Object.defineProperty,$S=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&WS(t,n,i),i},GS=function(e){function t(){return _w(this,t),HS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function KS(e,t,n){return t=dk(t),sk(e,YS()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function YS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YS=function(){return!!e})()}GS.table="view",$S([OE()],GS.prototype,"id"),$S([OE()],GS.prototype,"type"),$S([OE()],GS.prototype,"name"),$S([OE()],GS.prototype,"desc");var JS=Object.defineProperty,XS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&JS(t,n,i),i},ZS=function(e){function t(){return _w(this,t),KS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function QS(e,t,n){return t=dk(t),sk(e,ex()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ex(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ex=function(){return!!e})()}ZS.table="view_record",ZS.indexes=["view_uuid"],XS([OE()],ZS.prototype,"view_uuid"),XS([OE()],ZS.prototype,"record_uuid"),XS([OE()],ZS.prototype,"group_item_key"),XS([OE()],ZS.prototype,"hidden");var tx=Object.defineProperty,nx=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&tx(t,n,i),i},rx=function(e){function t(){return _w(this,t),QS(this,t,arguments)}return vk(t,e),Ew(t)}(iO);function ox(e,t,n){return t=dk(t),sk(e,ix()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ix(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ix=function(){return!!e})()}rx.table="view_share",rx.indexes=["view_uuid"],nx([OE()],rx.prototype,"view_uuid"),nx([OE()],rx.prototype,"src"),nx([OE()],rx.prototype,"status");var ax=Object.defineProperty,ux=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&ax(t,n,i),i},lx=function(e){function t(){return _w(this,t),ox(this,t,arguments)}return vk(t,e),Ew(t)}(iO);lx.table="cell",lx.indexes=["field_uuid","record_uuid"],lx.ignoreColumns=["uuid"],ux([OE()],lx.prototype,"field_uuid"),ux([OE()],lx.prototype,"field_type"),ux([OE()],lx.prototype,"record_uuid"),ux([OE()],lx.prototype,"format_value"),ux([OE()],lx.prototype,"key_value"),ux([OE()],lx.prototype,"verify"),ux([OE()],lx.prototype,"verify_message"),ux([OE()],lx.prototype,"by_system");var cx=Object.defineProperty,sx=Object.getOwnPropertyDescriptor,dx=function(e,t,n,r){for(var o,i=r>1?void 0:r?sx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cx(t,n,i),i},fx=function(){return Ew((function e(){_w(this,e)}),[{key:"cellModel",get:function(){return this._modelService.getModel(lx.table)}},{key:"fieldBooleanModel",get:function(){return this._modelService.getModel(dO.table)}},{key:"fieldDateModel",get:function(){return this._modelService.getModel(gO.table)}},{key:"fieldModel",get:function(){return this._modelService.getModel(_O.table)}},{key:"fieldNumberModel",get:function(){return this._modelService.getModel(SO.table)}},{key:"fieldOptionModel",get:function(){return this._modelService.getModel(RO.table)}},{key:"fieldSelectModel",get:function(){return this._modelService.getModel(TO.table)}},{key:"fieldStringModel",get:function(){return this._modelService.getModel(zO.table)}},{key:"fieldUriModel",get:function(){return this._modelService.getModel($O.table)}},{key:"filterModel",get:function(){return this._modelService.getModel(XO.table)}},{key:"groupModel",get:function(){return this._modelService.getModel(nS.table)}},{key:"groupItemModel",get:function(){return this._modelService.getModel(uS.table)}},{key:"recordModel",get:function(){return this._modelService.getModel(fS.table)}},{key:"sortModel",get:function(){return this._modelService.getModel(mS.table)}},{key:"statModel",get:function(){return this._modelService.getModel(kS.table)}},{key:"tableModel",get:function(){return this._modelService.getModel(xS.table)}},{key:"userModel",get:function(){return this._modelService.getModel(FS.table)}},{key:"viewConfigModel",get:function(){return this._modelService.getModel(NS.table)}},{key:"viewFieldModel",get:function(){return this._modelService.getModel(US.table)}},{key:"viewModel",get:function(){return this._modelService.getModel(GS.table)}},{key:"viewRecordModel",get:function(){return this._modelService.getModel(ZS.table)}},{key:"viewShareModel",get:function(){return this._modelService.getModel(rx.table)}}])}();dx([Ks(oO)],fx.prototype,"_modelService",2),fx=dx([Gs()],fx);var px=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,hx=function(){return Ew((function e(){_w(this,e)}),[{key:"currentUser",get:function(){return this._user}},{key:"setCurrentUser",value:function(e){e.uuid||(e.uuid=e.uid),this._user=e}}])}();function gx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}hx=function(e,t,n,r){for(var o,i=r>1?void 0:r?vx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&px(t,n,i),i}([Gs()],hx);var mx=Object.defineProperty,yx=Object.getOwnPropertyDescriptor,bx=function(e,t,n,r){for(var o,i=r>1?void 0:r?yx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mx(t,n,i),i},wx=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewConfig",value:function(e){return this._model.viewConfigModel.findOne({view_uuid:e})}},{key:"create",value:function(e){var t,n=this._model.viewModel.findById(e);if(n){if(n.get("type")===sE.CARD){var r=this._model.fieldModel.findOne({type:HC.IMAGE});return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1,cover_field_uuid:(null==r?void 0:r.get("uuid"))||null,cover_display:tE.Clip})}if(n.get("type")===sE.KANBAN)return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1});if(n.get("type")===sE.CALENDAR){var o=this._model.fieldModel.findOne({type:HC.DATE}),i=this._model.fieldModel.findOne({type:HC.TEXT}),a=this._model.fieldModel.find();return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),start_date_field_uuid:(null==o?void 0:o.get("uuid"))||null,end_date_field_uuid:(null==o?void 0:o.get("uuid"))||null,active_date:f_().format("YYYY-MM-DD"),date_title_field_uuid:(null==i?void 0:i.get("uuid"))||(null==(t=a.get(0))?void 0:t.get("uuid"))||null,show_lunar:!1,date_color_type:rE.CUSTOM,date_color:null})}return this._model.viewConfigModel.create({view_uuid:n.get("uuid")})}}},{key:"update",value:function(e,t){if(e)return this._model.viewConfigModel.upsert({view_uuid:e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gx(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({view_uuid:e},t))}},{key:"copy",value:function(e,t){var n=this.getViewConfig(e);if(n){var r=n.toJSON();delete r.uuid,r.view_uuid=t,this._model.viewConfigModel.create(r)}}},{key:"refresh",value:function(e){var t,n=this.getViewConfig(e);if(!n)return this.create(e);var r=this._model.fieldModel.find(),o=tk(r,(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{}),i=o[(null==n?void 0:n.get("cover_field_uuid"))||""];if(n&&n.get("cover_field_uuid")&&(!i||i!==HC.IMAGE)){var a=Z_(r,(function(e){return e.get("type")===HC.IMAGE}));a?this.update(e,{cover_field_uuid:a.get("uuid")}):this.update(e,{cover_field_uuid:null})}var u=o[(null==n?void 0:n.get("start_date_field_uuid"))||""];if(!u||!fE.isDateLike(u)){var l=Z_(r,(function(e){return e.get("type")===HC.DATE}));l?this.update(e,{start_date_field_uuid:l.get("uuid")}):this.update(e,{start_date_field_uuid:null})}var c=o[(null==n?void 0:n.get("end_date_field_uuid"))||""];if(!c||!fE.isDateLike(c)){var s=Z_(r,(function(e){return e.get("type")===HC.DATE}));s?this.update(e,{end_date_field_uuid:s.get("uuid")}):this.update(e,{end_date_field_uuid:null})}if(!o[(null==n?void 0:n.get("date_title_field_uuid"))||""]){var d=Z_(r,(function(e){return e.get("type")===HC.TEXT}));this.update(e,{date_title_field_uuid:(null==d?void 0:d.get("uuid"))||(null==(t=r.get(0))?void 0:t.get("uuid"))||null})}var f=null==n?void 0:n.get("date_color_type"),p=o[(null==n?void 0:n.get("date_color"))||""];f!==rE.FOLLOW_FIELD||p&&fE.isSelect(p)||this.update(e,{date_color:null})}},{key:"remove",value:function(e){this._model.viewConfigModel.remove({view_uuid:e})}}])}();bx([Ks(fx)],wx.prototype,"_model",2),wx=bx([Gs()],wx);var _x=Object.defineProperty,kx=Object.getOwnPropertyDescriptor,Cx=function(){return Ew((function e(){_w(this,e),this._fieldMap=new Map}),[{key:"registerField",value:function(e){this._fieldMap.set(e.type,e)}},{key:"getValueModel",value:function(e){var t;return null==(t=this.getValueField(e))?void 0:t.model}},{key:"getValueField",value:function(e){return this._fieldMap.get(e)}}])}();function Ex(e,t,n){return t=dk(t),sk(e,Ox()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Ox(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ox=function(){return!!e})()}Cx=function(e,t,n,r){for(var o,i=r>1?void 0:r?kx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_x(t,n,i),i}([Gs()],Cx);var Sx=Object.defineProperty,xx=Object.getOwnPropertyDescriptor,jx=function(e,t,n,r){for(var o,i=r>1?void 0:r?xx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Sx(t,n,i),i},Dx=function(e){function t(){var e;return _w(this,t),(e=Ex(this,t,arguments))._onCellChange=e._register(new Lk),e.onCellChange=e._onCellChange.event,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function Ax(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rx(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Rx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}jx([Ts()],Dx.prototype,"destroy",1),Dx=jx([Gs()],Dx);var Fx=Object.defineProperty,Ix=Object.getOwnPropertyDescriptor,Px=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ix(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fx(t,n,i),i},Mx=function(){return Ew((function e(){_w(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this.getCell(e,t)})}},{key:"setCell",value:function(e,t,n){var r,o,i=n.fieldType,a=this._model.fieldModel.findById(e),u=null==a?void 0:a.get("config");i||(i=null==a?void 0:a.get("type")),null==(o=null==(r=this._fieldRegistry.getValueField(i))?void 0:r.setCell)||o.call(r,e,t,n,u),this.updateRecord(t),this._notifyCellChange(e,t)}},{key:"bulkSetCell",value:function(e){var t,n,r=this;if(0!==e.length){var o=e[0].fieldType,i=e[0].fieldId,a=this._model.fieldModel.findById(i),u=null==a?void 0:a.get("config");o||(o=null==a?void 0:a.get("type")),null==(n=null==(t=this._fieldRegistry.getValueField(o))?void 0:t.bulkSetCell)||n.call(t,e,u),e.forEach((function(e){r.updateRecord(e.recordId),r._notifyCellChange(e.fieldId,e.recordId)}))}}},{key:"updateRecord",value:function(e){var t=this._model.fieldModel.find({type:HC.UPDATED_AT});if(t.length>0){var n,r=Ax(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.updateRecordUpdatedAt(o.get("uuid"),e)}}catch(e){r.e(e)}finally{r.f()}}var i=this._model.fieldModel.find({type:HC.MODIFIER_ID});if(i.length>0){var a,u=Ax(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;this.updateRecordModifierId(l.get("uuid"),e)}}catch(e){u.e(e)}finally{u.f()}}}},{key:"updateRecordUpdatedAt",value:function(e,t){this._model.recordModel.update({uuid:t},{updated_at:+new Date}),this._notifyCellChange(e,t)}},{key:"updateRecordModifierId",value:function(e,t){var n;this._model.recordModel.update({uuid:t},{modifier_id:null==(n=this._contextService.currentUser)?void 0:n.uid}),this._notifyCellChange(e,t)}},{key:"removeByRecordId",value:function(e,t){var n;if(0!==(n=t?this._model.fieldModel.find({uuid:t}):this._model.fieldModel.find()).length){var r=[];if(e)Array.isArray(e)?r=e:r.push(e);else r=nk(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var o,i=Ax(n);try{for(i.s();!(o=i.n()).done;){var a=o.value,u=this._fieldRegistry.getValueModel(a.get("type"));if(!u)return;var l={field_uuid:a.get("uuid"),record_uuid:r};u.remove(l),this._model.cellModel.remove(l)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getFieldCells",value:function(e){if(!this._model.fieldModel.findById(e))return[];var t,n=[],r=Ax(this._model.recordModel.find());try{for(r.s();!(t=r.n()).done;){var o=t.value,i=this.getCell(e,o.get("uuid"));i&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getFieldFormatValues",value:function(e,t){var n,r,o,i,a,u,l,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("type"),p=f===HC.DATE?null==d?void 0:d.get("config"):null==d?void 0:d.get("options");if(!f)return[];t=t||nk(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var v=this._fieldRegistry.getValueField(f);if(!v)return[];var h,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=v.model)?void 0:n.find({field_uuid:e}),y=tk(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?tk(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=Ax(t);try{var k=function(){var t=h.value;if(fE.isSystemType(f))w.push({recordId:t,formatValue:s.getCellFormattedValue(e,t,p)});else if(y[t])w.push({recordId:t,formatValue:null==(r=y[t])?void 0:r.get("format_value")});else{var n=fE.isMultiple(f)?fE.isMultiSelect(f)?null==(o=b[t])?void 0:o.map((function(e){return e.get("value")})):null==(i=b[t])?void 0:i.map((function(e){return e.toJSON()})):fE.isUri(f)?null==(u=null==(a=b[t])?void 0:a[0])?void 0:u.toJSON():null==(c=null==(l=b[t])?void 0:l[0])?void 0:c.get("value");w.push({recordId:t,formatValue:null==v?void 0:v.formatted(n,void 0,p)}),zw((function(){var r;null==(r=v.upsertModelCell)||r.call(v,e,t,n,!0,p)}))}};for(_.s();!(h=_.n()).done;)k()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getFieldKeyValues",value:function(e,t){var n,r,o,i,a,u,l,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("type"),p=null==d?void 0:d.get("config");if(!f)return[];t=t||nk(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var v=this._fieldRegistry.getValueField(f);if(!v)return[];var h,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=v.model)?void 0:n.find({field_uuid:e}),y=tk(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?tk(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=Ax(t);try{var k=function(){var t=h.value;if(fE.isSystemType(f))w.push({recordId:t,keyValue:s.getCellKeyValue(e,t)});else if(y[t])w.push({recordId:t,keyValue:null==(r=y[t])?void 0:r.get("key_value")});else{var n=fE.isMultiple(f)?fE.isMultiSelect(f)?null==(o=b[t])?void 0:o.map((function(e){return e.get("value")})):null==(i=b[t])?void 0:i.map((function(e){return e.toJSON()})):fE.isUri(f)?null==(u=null==(a=b[t])?void 0:a[0])?void 0:u.toJSON():null==(c=null==(l=b[t])?void 0:l[0])?void 0:c.get("value");w.push({recordId:t,keyValue:null==v?void 0:v.keyValue(n)}),zw((function(){var r;null==(r=v.upsertModelCell)||r.call(v,e,t,n,!0,p)}))}};for(_.s();!(h=_.n()).done;)k()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getViewRecordCells",value:function(e,t){var n,r,o=this;if(null==t&&(t=e,e=null),!this._model.recordModel.findById(t))return new K_;var i=new K_,a={},u=function(e){if(a[e])return a[e];var t=o._model.fieldModel.findById(e),n=null==t?void 0:t.get("type");if(n){var r=o._fieldRegistry.getValueField(n);return a[e]=r,r}};if(e){var l,c=Ax(this._model.viewFieldModel.find({view_uuid:e}));try{for(c.s();!(l=c.n()).done;){var s=l.value;if(!s.get("hidden")){var d=s.get("field_uuid"),f=this._model.fieldModel.findById(d),p=null==f?void 0:f.get("config"),v=null==(n=u(d))?void 0:n.getCell(d,t,p);v&&i.push([v])}}}catch(e){c.e(e)}finally{c.f()}}else{var h,g=Ax(this._model.viewFieldModel.find());try{for(g.s();!(h=g.n()).done;){var m=h.value.get("field_uuid"),y=this._model.fieldModel.findById(m),b=null==y?void 0:y.get("config"),w=null==(r=u(m))?void 0:r.getCell(m,t,b);w&&i.push([w])}}catch(e){g.e(e)}finally{g.f()}}return i}},{key:"getRecordCells",value:function(e){if(!this._model.recordModel.findById(e))return new K_;var t,n=this._model.fieldModel.find(),r=new K_,o=Ax(n);try{for(o.s();!(t=o.n()).done;){var i=t.value,a=this.getCell(i.get("uuid"),e);a&&r.push([a])}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getCell",value:function(e,t){var n=this._model.fieldModel.findById(e),r=null==n?void 0:n.get("type");if(!r)return null;var o=this._fieldRegistry.getValueField(r),i=null==n?void 0:n.get("config");return null==o?void 0:o.getCell(e,t,i)}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this._model.fieldModel.findById(e);if(!r)return"";var o=this._fieldRegistry.getValueField(r.get("type"));return o?o.getCellFormattedValue(e,t,n):""}},{key:"getCellKeyValue",value:function(e,t){var n=this._model.fieldModel.findById(e);if(!n)return null;var r=this._fieldRegistry.getValueField(n.get("type"));if(!r)return null;var o=null==n?void 0:n.get("config");return r.getCellKeyValue(e,t,o)}},{key:"keyValue",value:function(e){if(!e||!(null==e?void 0:e.value))return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return null==n?void 0:n.keyValue(e.value)}},{key:"groupValue",value:function(e){if(!e||!(null==e?void 0:e.value))return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return this.toGroupValue(t,n,e.value)}},{key:"toGroupValue",value:function(e,t,n){return e.get("type")===HC.DATE?null==t?void 0:t.formatted(n,e.get("uuid"),e.get("config")):null==t?void 0:t.keyValue(n)}},{key:"copy",value:function(e,t,n,r){var o=this.getCell(e,t);o&&this.setCell(n,r,o)}},{key:"updateOrder",value:function(e){var t=e.fieldId,n=e.fieldType,r=e.recordId,o=e.sourceValueId,i=e.targetValueId,a=this._fieldRegistry.getValueModel(n);if(a){var u=a.find({field_uuid:t,record_uuid:r}),l=ek(u,(function(e){return e.get("uuid")===o})),c=ek(u,(function(e){return e.get("uuid")===i})),s={},d=u.get(l),f=u.get(c);f&&(s={uuid:i,field_uuid:f.get("field_uuid"),record_uuid:f.get("record_uuid")}),l<c?a.moveAfter(s,{uuid:o,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}):a.moveBefore(s,{uuid:o,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}),this._notifyCellChange(t,r)}}}])}();Px([Ks(fx)],Mx.prototype,"_model",2),Px([Ks(Cx)],Mx.prototype,"_fieldRegistry",2),Px([Ks(Dx)],Mx.prototype,"_eventService",2),Px([Ks(hx)],Mx.prototype,"_contextService",2),Mx=Px([Gs()],Mx);var Tx=Is.defineToken("CellEditContribution"),Nx=Object.defineProperty,Bx=Object.getOwnPropertyDescriptor,Vx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Nx(t,n,i),i},Lx=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e,t=this.userProvider.getContributions(),n=t[t.length-1];return null==(e=null==n?void 0:n.registerCellEdit)?void 0:e.call(n)}}])}();Vx([yd(Tx)],Lx.prototype,"userProvider",2),Lx=Vx([Gs()],Lx);var zx=Object.defineProperty,Ux=Object.getOwnPropertyDescriptor,Hx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ux(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zx(t,n,i),i},qx=function(){return Ew((function e(){_w(this,e)}),[{key:"provider",get:function(){return this._cellEditRegistry.getProvider()}},{key:"setCell",value:function(e){var t;return null==(t=this.provider)?void 0:t.setCell(e)}}])}();Hx([Ks(Lx)],qx.prototype,"_cellEditRegistry",2),qx=Hx([Gs()],qx);var Wx=dd().contribution(Tx).register(Lx).register(qx);function $x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$x(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kx=Object.defineProperty,Yx=Object.getOwnPropertyDescriptor,Jx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kx(t,n,i),i},Xx=function(){return Ew((function e(){_w(this,e)}),[{key:"changeCellType",value:function(e,t,n,r,o){var i,a,u,l,c=this._fieldRegistry.getValueField(t),s=this._fieldRegistry.getValueField(n);if(c&&s){var d=null;if(c.baseType!==s.baseType||c.type===HC.TEXT){var f=c.formatted(e.value,r);d=fE.isSelectLike(s.type)&&!o?s.transform(f,r):s.transform(f,o)}else if(fE.isUri(s.type)){var p=e.value;fE.isMultiple(c.type)&&!fE.isMultiple(s.type)&&(p=(null==e?void 0:e.value)[0]),d=s.transform(p)}else if(fE.isSelectLike(s.type)){var v=e.value,h=e.formatValue||"";if(fE.isMultiple(c.type)&&!fE.isMultiple(s.type)&&(v=null==(i=null==e?void 0:e.value)?void 0:i[0],h=(null==(a=null==e?void 0:e.formatValue)?void 0:a.split(",")[0])||""),fE.isMultiple(c.type)&&fE.isMultiple(s.type)&&r&&o){var g=(null==s?void 0:s.getFieldOptionName(v,r))||[];0===g.length&&(g=(null==h?void 0:h.split(","))||[]),d=s.transform(g,o)}else if(r&&o&&r!==o){var m=c.formatted(v,r);m||(m=h),d=s.transform(m,o)}else{var y=Zw(r)?o:void 0;d=s.transform(v,y)}}else d=s.transform(null==e?void 0:e.value);if(null!==d){if(s.validate(d.value)){var b=Gx(Gx({},e),{},{value:d.value});if(null==(u=this._cellEditService)?void 0:u.provider)if(!this._cellEditService.setCell({cells:[b]}))return;e.fieldId&&e.recordId&&(null==(l=s.setCell)||l.call(s,e.fieldId,e.recordId,b),this._eventService._onCellChange.emit({fieldId:e.fieldId,recordId:e.recordId,cellValue:b}))}}else c.model&&c.model.remove({field_uuid:e.fieldId,record_uuid:e.recordId})}}}])}();function Zx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qx(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Qx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Jx([Ks(Cx)],Xx.prototype,"_fieldRegistry",2),Jx([Ks(qx)],Xx.prototype,"_cellEditService",2),Jx([Ks(Dx)],Xx.prototype,"_eventService",2),Xx=Jx([Gs()],Xx);var ej=Object.defineProperty,tj=Object.getOwnPropertyDescriptor,nj=function(e,t,n,r){for(var o,i=r>1?void 0:r?tj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ej(t,n,i),i},rj=function(){return Ew((function e(){_w(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this._cellService.getCell(e,t)})}},{key:"getFields",value:function(){var e=this,t=this._model.fieldModel.find(),n=new K_;return t.forEach((function(t){var r=new Y_(t.toJSON()),o=r.get("type");if(fE.isSelectLike(o)){var i=e.getFieldOptions(t.get("uuid"));null==r||r.set("options",i)}n.push([r])})),n}},{key:"getField",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});if(t){var n=new Y_(t.toJSON()),r=n.get("type");if(fE.isSelectLike(r)){var o=this.getFieldOptions(n.get("uuid"));null==n||n.set("options",o)}return n}}},{key:"getFieldDetail",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});return t?{field:t,options:this.getFieldOptions(e)}:null}},{key:"getFieldOption",value:function(e){return this._model.fieldOptionModel.findOne({uuid:e})}},{key:"getFieldOptions",value:function(e){return this._model.fieldOptionModel.find({field_uuid:e})}},{key:"getFieldOptionName",value:function(e){var t=this,n=e.split(",");if(Array.isArray(n)){var r=[];return n.forEach((function(e){var n=t._model.fieldOptionModel.findOne({uuid:e});n&&r.push(n.get("name"))})),r.join(",")}var o=this._model.fieldOptionModel.findOne({uuid:e});return o?o.get("name"):""}},{key:"create",value:function(e){var t=this._model.fieldModel.create({name:e.name,type:e.type,color:e.color,config:e.config,uuid:e.uuid,multiple:!!e.multiple});if(e.options){var n,r=Zx(e.options);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._model.fieldOptionModel.create({uuid:o.uuid,field_uuid:t.uuid,name:o.name.slice(0,RO.MAX_LENGTH),color:o.color})}}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"remove",value:function(e){this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"removeAll",value:function(){var e=nk(this._model.fieldModel.find(),(function(e){return e.get("uuid")}));return this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"update",value:function(e){var t,n,r=e.uuid;if(this._model.fieldModel.update({uuid:r},e),e.config&&e.config.date_format){var o,i=this._model.recordModel.find(),a=null==(t=this._model.tableModel.find().get(0))?void 0:t.get("active_view_uuid"),u=this._model.groupModel.findOne({view_uuid:a}),l=u&&u.get("field_uuid")===r,c=Zx(i);try{for(c.s();!(o=c.n()).done;){var s=o.value,d=this._model.fieldModel.findById(r);if(!d)return;var f=s.get("uuid"),p=null==d?void 0:d.get("config"),v=null==(n=this._fieldRegistry.getValueField(d.get("type")))?void 0:n.getCellFormattedValue(r,f,p);this._model.cellModel.update({field_uuid:r,record_uuid:f},{format_value:v}),l&&this._model.viewRecordModel.update({record_uuid:f},{group_item_key:v}),this._notifyCellChange(r,f)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"createFieldOption",value:function(e,t,n){if(!this._model.fieldModel.findOne({uuid:e}))throw new Error(Lw("不存在对应字段"));if(!t.name)throw new Error(Lw("选项名不能为空"));if(t.name.length>RO.MAX_LENGTH)throw new Error(Lw("选项名不能超过最大长度限制"));if(rk(this._model.fieldOptionModel.find({field_uuid:e}),(function(e){return e.get("name")===t.name})))throw new Error(Lw("已存在该选项，不可重复创建！"));var r=this._model.fieldOptionModel.create({uuid:t.uuid,field_uuid:e,name:t.name,color:t.color});if(t.users){var o,i=Zx(t.users);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._model.userModel.upsert({uid:a.uid},{uid:a.uid,login:a.login,work_id:a.work_id,name:a.name,icon:a.icon})}}catch(e){i.e(e)}finally{i.f()}}return n&&this._model.fieldOptionModel.moveAfter({uuid:n},{uuid:r.uuid}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()}),r}},{key:"updateFieldOption",value:function(e,t){var n=this._model.fieldOptionModel.findOne({uuid:e});if(!n)throw new Error(Lw("不存在对应选项"));if(!t.name)throw new Error(Lw("选项名不能为空"));if(t.name.length>RO.MAX_LENGTH)throw new Error(Lw("选项名不能超过最大长度限制"));if(rk(this._model.fieldOptionModel.find({field_uuid:n.get("field_uuid"),uuid:{$not:e}}),(function(e){return e.get("name")===t.name})))throw new Error(Lw("已存在该选项，不可重复创建！"));var r={name:t.name,color:t.color};this._model.fieldOptionModel.update({uuid:n.get("uuid"),field_uuid:n.get("field_uuid")},r),this._model.fieldModel.update({uuid:n.get("field_uuid")},{updated_at:(new Date).getTime()})}},{key:"updateMentionFieldOptionId",value:function(e,t){this._model.fieldOptionModel.update({uuid:e},{uuid:t})}},{key:"updateFieldOptions",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(r.length>0){var o=this._model.fieldSelectModel.find({value:r,field_uuid:e});o.forEach((function(e){n._model.fieldSelectModel.remove({uuid:e.get("uuid")})}));var i,a=Zx(o);try{for(a.s();!(i=a.n()).done;){var u=i.value;this._notifyCellChange(e,u.get("record_uuid"))}}catch(e){a.e(e)}finally{a.f()}this._model.fieldOptionModel.remove({uuid:r,field_uuid:e})}t.map((function(t){var n;return{uuid:t.uuid,field_uuid:e,name:(null==(n=t.name)?void 0:n.slice(0,RO.MAX_LENGTH))||"",color:t.color}})).forEach((function(t,r){var o=n._model.fieldOptionModel.find({field_uuid:e}),i=ek(o,(function(e){return e.get("uuid")===t.uuid}));if(n._model.fieldOptionModel.update({uuid:t.uuid},t),r===i){var a=o.get(i);(null!=t.name&&t.name!==a.get("name")||null!=t.color&&t.color!==a.get("color"))&&n._model.fieldOptionModel.update({uuid:t.uuid},t)}else if(-1===i)if(0===r)n._model.fieldOptionModel.createBefore(null,t);else{var u=o.get(r-1);n._model.fieldOptionModel.createAfter({uuid:u.get("uuid")},t)}else if(0===r)n._model.fieldOptionModel.moveBefore(null,t);else{var l=o.get(r-1);n._model.fieldOptionModel.moveAfter(null==l?void 0:l.toJSON(),t)}})),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}},{key:"updateFieldOptionOrder",value:function(e,t,n){if(t!==n){var r=this._model.fieldOptionModel.find({field_uuid:e}),o=ek(r,(function(e){return e.get("uuid")===t})),i=ek(r,(function(e){return e.get("uuid")===n})),a=r.get(i),u={};a&&(u={field_uuid:e,uuid:a.get("uuid")}),o<i?this._model.fieldOptionModel.moveAfter(u,{uuid:t,field_uuid:e}):this._model.fieldOptionModel.moveBefore(u,{uuid:t,field_uuid:e}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}}},{key:"removeFieldOption",value:function(e){var t=this._model.fieldOptionModel.findOne({uuid:e});if(t){var n=t.get("field_uuid");this._model.fieldOptionModel.remove({uuid:e,field_uuid:n}),this._model.fieldSelectModel.remove({field_uuid:n,value:e}),this._model.fieldModel.update({uuid:n},{updated_at:(new Date).getTime()})}}},{key:"changeFieldType",value:function(e,t,n,r){if(this._model.fieldModel.update({uuid:e},{type:n}),(null==r?void 0:r[0].fieldType)===n)this._cellService.bulkSetCell(r);else{var o,i=Zx(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._processService.changeCellType(a,t,n,e)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"clone",value:function(e,t){var n=this._model.fieldModel.findOne({uuid:e});if(n){var r=this._model.fieldOptionModel.find({field_uuid:n.get("uuid")}),o=this._model.fieldModel.create({uuid:t,name:this.getCloneFieldName(n.get("type"),n.get("name")),type:n.get("type"),sub_type:n.get("sub_type"),config:n.get("config"),color:n.get("color"),multiple:n.get("multiple")});return r.length>0&&this._model.fieldOptionModel.bulkCreate(nk(r,(function(e){return{field_uuid:o.uuid,name:e.get("name"),color:e.get("color")}}))),o}}},{key:"getCloneFieldName",value:function(e,t){var n=this._model.fieldModel.find({type:e}),r=function(o){var i,a=(t||(null==(i=GC.find((function(t){return t.type===e})))?void 0:i.name))+"-"+Lw("复制")+(o>0?" ".concat(o):"");return Z_(n,(function(e){return e.get("name")===a}))?(o++,r(o)):a};return r(0)}}])}();function oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ij(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function uj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}nj([Ks(Mx)],rj.prototype,"_cellService",2),nj([Ks(Xx)],rj.prototype,"_processService",2),nj([Ks(Dx)],rj.prototype,"_eventService",2),nj([Ks(Cx)],rj.prototype,"_fieldRegistry",2),nj([Ks(fx)],rj.prototype,"_model",2),rj=nj([Gs()],rj);var lj=Object.defineProperty,cj=Object.getOwnPropertyDescriptor,sj=function(e,t,n,r){for(var o,i=r>1?void 0:r?cj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lj(t,n,i),i},dj=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewField",value:function(e,t){return this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t})}},{key:"getViewFields",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n,r=new K_,o=aj(this._model.viewFieldModel.find(t));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=new Y_(i.toJSON());a.set("field",this._fieldService.getField(i.get("field_uuid"))),r.push([a])}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getViewFieldsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewFieldModel.find(t).length}},{key:"getAllViewFields",value:function(e){return this.getViewFields(e,!1)}},{key:"create",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,o=e.sourceFieldId,i=e.direction,a=this._model.viewModel.findOne({uuid:t});if(a){var u=fE.isMultiple(n.type),l=this._fieldService.create({uuid:n.uuid,name:n.name,type:n.type,color:n.color,multiple:u,config:n.config,options:n.options}),c=this._model.viewFieldModel.find({view_uuid:t}),s=ek(c,(function(e){return e.get("field_uuid")===o})),d={uuid:null==r?void 0:r.uuid,size:null==r?void 0:r.size,created_at:null==r?void 0:r.created_at,updated_at:null==r?void 0:r.updated_at,view_uuid:t,field_uuid:l.uuid};return a.get("type")===sE.FORM&&(d.required=!0),this._model.viewFieldModel.create(d),c=this._model.viewFieldModel.find({view_uuid:t}),"before"===i?this._model.viewFieldModel.moveBefore({view_uuid:t,field_uuid:o},{view_uuid:t,field_uuid:n.uuid}):s!==c.length-1&&this._model.viewFieldModel.moveAfter({view_uuid:t,field_uuid:o},{view_uuid:t,field_uuid:n.uuid}),l}}},{key:"copy",value:function(e,t,n){var r,o=[],i=aj(this.getAllViewFields(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;n&&n(a)||o.push({field_uuid:a.get("field_uuid"),view_uuid:t,name:a.get("name"),size:a.get("size"),display_type:a.get("display_type"),required:a.get("required"),hidden:a.get("hidden")})}}catch(e){i.e(e)}finally{i.f()}this._model.viewFieldModel.bulkCreate(o)}},{key:"insert",value:function(e,t){var n=this._model.viewModel.findOne({uuid:t}),r=this._model.fieldModel.findOne({uuid:e});if(n&&r)return this._model.viewFieldModel.upsert({view_uuid:n.get("uuid"),field_uuid:r.get("uuid")},{view_uuid:n.get("uuid"),field_uuid:r.get("uuid"),hidden:!1})}},{key:"remove",value:function(e,t,n){var r={field_uuid:e,view_uuid:t};if(this._model.viewFieldModel.remove(r),!n)return this._fieldService.remove(e)}},{key:"removeAll",value:function(e){return this._model.viewFieldModel.remove({view_uuid:e}),this._fieldService.removeAll()}},{key:"update",value:function(e,t,n,r){return this._model.viewFieldModel.update({view_uuid:e,field_uuid:t},bw({},n,r))}},{key:"updateOrder",value:function(e,t,n){var r=this._model.viewFieldModel.find({view_uuid:e}),o=ek(r,(function(e){return e.get("field_uuid")===t})),i=n?ek(r,(function(e){return e.get("field_uuid")===n})):0,a=r.get(i);o<i?this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t}):this._model.viewFieldModel.moveBefore({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t})}},{key:"refresh",value:function(e){var t=this.getViewFields(e,!1),n=tk(this._model.fieldModel.find(),(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{});this._viewConfigService.refresh(e);var r,o=aj(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n[i.get("field_uuid")]?delete n[i.get("field_uuid")]:this._model.viewFieldModel.remove({field_uuid:i.get("field_uuid"),view_uuid:i.get("view_uuid")})}}catch(e){o.e(e)}finally{o.f()}var a=Object.keys(n);if(a.length>0){var u,l=aj(a);try{for(l.s();!(u=l.n()).done;){var c=u.value;this._model.viewFieldModel.create({view_uuid:e,field_uuid:c})}}catch(e){l.e(e)}finally{l.f()}}}},{key:"clone",value:function(e,t,n){var r=this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t});if(r){var o=this._fieldService.clone(r.get("field_uuid"),n);if(o){var i=this._model.viewFieldModel.create({view_uuid:r.get("view_uuid"),field_uuid:n,size:null==r?void 0:r.get("size"),name:o.name,display_type:r.get("display_type"),required:r.get("required")});return this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:n}),i}}}},{key:"copyField",value:function(e){var t,n=e.viewId,r=e.uuid,o=e.sourceFieldId,i=this._model.fieldModel.findOne({uuid:o}),a=this.clone(n,o,r),u=this._model.fieldModel.findOne({uuid:a.field_uuid});if(i&&u){var l=this._fieldService.getFieldOptions(o),c=this._fieldService.getFieldOptions(u.get("uuid")),s=new Map,d=new Map;nk(l,(function(e){d.set(e.get("name"),e.get("uuid"))})),nk(c,(function(e){s.set(d.get(e.get("name"))||"",e.get("uuid"))}));var f,p=aj(this._model.viewRecordModel.find({view_uuid:n}));try{for(p.s();!(f=p.n()).done;){var v=f.value;if(u.get("type")===HC.SELECT||u.get("type")==HC.MULTI_SELECT){var h=u.get("type")==HC.MULTI_SELECT,g=this._cellService.getCell(o,v.get("record_uuid")),m=(h?null==(t=null==g?void 0:g.value)?void 0:t.map((function(e){return s.get(e)})):s.get(null==g?void 0:g.value))||"";this._cellService.setCell(u.get("uuid"),v.get("record_uuid"),ij(ij({},g),{},{value:m}))}else this._cellService.copy(o,v.get("record_uuid"),u.get("uuid"),v.get("record_uuid"))}}catch(e){p.e(e)}finally{p.f()}}}}])}();sj([Ks(fx)],dj.prototype,"_model",2),sj([Ks(rj)],dj.prototype,"_fieldService",2),sj([Ks(wx)],dj.prototype,"_viewConfigService",2),sj([Ks(Mx)],dj.prototype,"_cellService",2),dj=sj([Gs()],dj);var fj=Object.defineProperty,pj=Object.getOwnPropertyDescriptor,vj=function(e,t,n,r){for(var o,i=r>1?void 0:r?pj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fj(t,n,i),i},hj=function(){return Ew((function e(){_w(this,e)}),[{key:"getRecords",value:function(){return this._model.recordModel.find()}},{key:"getRecordById",value:function(e){return this._model.recordModel.findById(e)}},{key:"getRecordDesc",value:function(e){var t=this._model.recordModel.findById(e);if(t)return t.get("desc")}},{key:"create",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid,r={uuid:e.uuid,creator_id:(null==e?void 0:e.modifier_id)||n,modifier_id:(null==e?void 0:e.modifier_id)||n,updated_at:+new Date,created_at:+new Date};return Array.isArray(e.uuid)?this._model.recordModel.bulkCreate(e.uuid.map((function(t){return{uuid:t,creator_id:n,modifier_id:(null==e?void 0:e.modifier_id)||n}}))):(this._model.recordModel.create(r),[r])}},{key:"update",value:function(e,t){if(this._model.recordModel.findById(e))return this._model.recordModel.update({uuid:e},t)}},{key:"bulkCreate",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid;return this._model.recordModel.bulkCreate(e.map((function(e){return{uuid:e.uuid,creator_id:e.creator_id||n,modifier_id:e.modifier_id||n}})))}},{key:"remove",value:function(e){return this._model.recordModel.remove({uuid:e})}},{key:"removeAll",value:function(){var e=this._model.recordModel.find();return this._model.recordModel.remove({uuid:nk(e,(function(e){return e.get("uuid")}))})}}])}();function gj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function mj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}vj([Ks(hx)],hj.prototype,"_contextService",2),vj([Ks(fx)],hj.prototype,"_model",2),hj=vj([Gs()],hj);var yj=Object.defineProperty,bj=Object.getOwnPropertyDescriptor,wj=function(e,t,n,r){for(var o,i=r>1?void 0:r?bj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yj(t,n,i),i},_j=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewGroup",value:function(e){var t=this._model.groupModel.findOne({view_uuid:e});if(t){var n=this._model.fieldModel.findOne({uuid:t.get("field_uuid")});if(n){var r=this._model.fieldOptionModel.find({field_uuid:t.get("field_uuid")});return{group:t,field:n,options:r}}this._model.groupModel.remove({uuid:t.get("uuid"),view_uuid:e})}}},{key:"getGroupItems",value:function(e,t){return this._model.groupItemModel.find({view_uuid:e,field_uuid:t})}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._model.groupItemModel.upsert({view_uuid:e,field_uuid:t,key:n},{view_uuid:e,field_uuid:t,key:n,collapse:r})}},{key:"isGroup",value:function(e){return!!this.getViewGroup(e)}},{key:"create",value:function(e,t){var n=this._model.groupModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});this.refreshGroup(e,n)}},{key:"remove",value:function(e){this._model.groupModel.remove({view_uuid:e}),this._model.viewRecordModel.update({view_uuid:e},{group_item_key:""})}},{key:"update",value:function(e,t){var n=this._model.groupModel.update({view_uuid:e},{field_uuid:t.field_uuid,view_uuid:e,type:t.type});return this.refreshGroup(e,t),n}},{key:"refreshGroup",value:function(e,t){var n,r,o=this._model.viewRecordModel.find({view_uuid:e}),i=nk(o,(function(e){return e.get("record_uuid")})),a=this._fieldService.getField(t.field_uuid),u=(n=(null==a?void 0:a.get("type"))===HC.DATE?this._cellService.getFieldFormatValues(t.field_uuid,i):this._cellService.getFieldKeyValues(t.field_uuid,i)).map((function(e){return e.formatValue||e.keyValue})).filter((function(e){return null!=e})),l=tk(o,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),c=[],s=gj(n);try{var d=function(){var e=r.value,t=e.formatValue||e.keyValue,n=l[e.recordId];if(!n)return 1;if((null==n?void 0:n.get("group_item_key"))!=t){var o=c.find((function(e){return e.key===t})),i=n.get("record_uuid");o?o.recordIds.push(i):c.push({key:t,recordIds:[i]})}};for(s.s();!(r=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}if(c.length>0){var f,p=gj(c);try{for(p.s();!(f=p.n()).done;){var v=f.value;this._model.viewRecordModel.update({view_uuid:e,record_uuid:v.recordIds},{group_item_key:v.key}),a&&a.get("type")===HC.MENTION&&this._refreshMentionFieldOption(e,a,t,v.key)}}catch(e){p.e(e)}finally{p.f()}}a&&a.get("type")===HC.MENTION&&this._removeMentionFieldOption(u,a)}},{key:"_refreshMentionFieldOption",value:function(e,t,n,r){if(r&&!rk(this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}),(function(e){return e.get("uuid")===r}))){var o=this._model.viewModel.findOne({uuid:e});this._model.fieldOptionModel.create({field_uuid:n.field_uuid,uuid:r,name:r,temp:(null==o?void 0:o.get("type"))!==sE.KANBAN})}}},{key:"_removeMentionFieldOption",value:function(e,t){var n=this;this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}).forEach((function(t){e.indexOf(t.get("uuid"))<0&&n._model.fieldOptionModel.remove({uuid:t.get("uuid"),temp:!0})}))}},{key:"copy",value:function(e,t){var n=this._model.groupModel.find({view_uuid:e});n&&0!==n.length&&this._model.groupModel.bulkCreate(nk(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"createDefaultKanbanViewGroup",value:function(e){var t=this._fieldService.getFields(),n=Z_(t,(function(e){return HC.SELECT===e.get("type")}));return n||(n=Z_(t,(function(e){return HC.MENTION===e.get("type")}))),this.create(e,{field_uuid:(null==n?void 0:n.get("uuid"))||"",type:oE.ASC}),this.getViewGroup(e)}}])}();function kj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Cj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Cj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}wj([Ks(fx)],_j.prototype,"_model",2),wj([Ks(rj)],_j.prototype,"_fieldService",2),wj([Ks(Mx)],_j.prototype,"_cellService",2),_j=wj([Gs()],_j);var Ej=Object.defineProperty,Oj=Object.getOwnPropertyDescriptor,Sj=function(){return Ew((function e(){_w(this,e)}),[{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t=fE.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,r):this.descSortSelect(t,r):fE.isNumberLike(n.get("type"))||HC.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):fE.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):fE.isSystemDate(n.get("type"))?"asc"===e?this.ascSortSystemDate(t):this.descSortSystemDate(t):fE.isUri(n.get("type"))||fE.isMentionLike(n.get("type"))?"asc"===e?this.ascSortUri(t):this.descSortUri(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"",r=t.option.value||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"";return(t.option.value||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){return Number(e.option.value)-Number(t.option.value)}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){return Number(t.option.value)-Number(e.option.value)}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){return i()(e.option.formatValue).unix()-i()(t.option.formatValue).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){return i()(t.option.formatValue).unix()-i()(e.option.formatValue).unix()}))}},{key:"ascSortSystemDate",value:function(e){return e.sort((function(e,t){return i()(e.option.value).unix()-i()(t.option.value).unix()}))}},{key:"descSortSystemDate",value:function(e){return e.sort((function(e,t){return i()(t.option.value).unix()-i()(e.option.value).unix()}))}},{key:"ascSortUri",value:function(e){return e.sort((function(e,t){var n,r,o=(null==(n=e.option.value)?void 0:n.toJSON)?e.option.value.toJSON():e.option.value,i=(null==(r=t.option.value)?void 0:r.toJSON)?t.option.value.toJSON():t.option.value,a=(Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"",u=(Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"";return a.localeCompare(u)}))}},{key:"descSortUri",value:function(e){return e.sort((function(e,t){var n,r,o=(null==(n=e.option.value)?void 0:n.toJSON)?e.option.value.toJSON():e.option.value,i=(null==(r=t.option.value)?void 0:r.toJSON)?t.option.value.toJSON():t.option.value,a=(Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"";return((Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"").localeCompare(a)}))}},{key:"ascSortSelect",value:function(e,t){var n=nk(t,(function(e){return e.get("uuid")}));return this._getlistOrderByOptions(e,n)}},{key:"descSortSelect",value:function(e,t){var n=nk(t,(function(e){return e.get("uuid")})).reverse();return this._getlistOrderByOptions(e,n)}},{key:"_getlistOrderByOptions",value:function(e,t){var n,r,o=t.reduce((function(e,t){return e[t]=[],e}),{}),i=[],a=kj(e);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=u.option.value;if(l){var c=Array.isArray(l)?l[0]:l;null==(n=o[c])||n.push(u)}else i.push(u)}}catch(e){a.e(e)}finally{a.f()}var s=[];return t.forEach((function(e){s=s.concat(o[e])})),s=s.concat(i)}}])}();function xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Aj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Sj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Oj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ej(t,n,i),i}([Gs()],Sj);var Rj=Object.defineProperty,Fj=Object.getOwnPropertyDescriptor,Ij=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rj(t,n,i),i},Pj=function(){return Ew((function e(){_w(this,e)}),[{key:"groupViewRecords",value:function(e,t,n){var r,o,i=this,a={},u=this._model.viewModel.findOne({uuid:t.get("view_uuid")}),l=tk(this._model.groupItemModel.find({view_uuid:t.get("view_uuid"),field_uuid:t.get("field_uuid")}),(function(e,t){return e[t.get("key")]=t.get("collapse"),e}),{}),c=Dj(e);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.get("group_item_key")?(a[s.get("group_item_key")]=a[s.get("group_item_key")]||[],a[s.get("group_item_key")].push(s)):(a[""]=a[""]||[],a[""].push(s))}}catch(e){c.e(e)}finally{c.f()}var d=[],f=this._fieldService.getField(t.get("field_uuid"));if(d=fE.isSelect(f.get("type"))||fE.isMention(f.get("type"))?nk(n,(function(e){if(!e||!e.get("uuid"))return null;var t=jj(jj({},e.toJSON()),{},{fieldId:e.get("field_uuid"),value:e.get("uuid")});if(fE.isMention(f.get("type"))){var n=i._model.userModel.find({uid:e.get("uuid").split(",")});if(0===n.length)return null;t.value=n}var r=e.get("uuid");return{key:r,option:t,field:f,viewRecords:a[r]||[],collapse:l[r]||!1}})).filter((function(e){return!!e})):Object.keys(a).map((function(e){if(""!==e){var n=a[e][0].get("record_uuid");return{key:e,option:i._cellService.getCell(t.get("field_uuid"),n),field:f,viewRecords:a[e]||[],collapse:l[e]||!1}}})).filter((function(e){return!!e})),(null==f?void 0:f.get("type"))===HC.CHECKBOX&&d.push({key:"",field:f,option:{value:!1},viewRecords:a[""],collapse:l[""]||!1}),(null==u?void 0:u.get("type"))!==sE.KANBAN&&(d=this._groupSortService.sort(t.get("type"),d,f,n)),(null==f?void 0:f.get("type"))!==HC.CHECKBOX&&d.push({key:"",field:f,option:null,viewRecords:a[""],collapse:l[""]||!1}),(null==u?void 0:u.get("type"))===sE.KANBAN){var p=d.findIndex((function(e){return!e.option}));if(p>-1){var v=d.splice(p,1)[0];v.viewRecords&&v.viewRecords.length>0&&d.unshift(v)}var h,g=Dj(d);try{for(g.s();!(h=g.n()).done;){null==(r=h.value.viewRecords)||r.reverse()}}catch(e){g.e(e)}finally{g.f()}}return d}}])}();function Mj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Tj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Ij([Ks(fx)],Pj.prototype,"_model",2),Ij([Ks(rj)],Pj.prototype,"_fieldService",2),Ij([Ks(Mx)],Pj.prototype,"_cellService",2),Ij([Ks(Sj)],Pj.prototype,"_groupSortService",2),Pj=Ij([Gs()],Pj);var Nj=Object.defineProperty,Bj=Object.getOwnPropertyDescriptor,Vj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Nj(t,n,i),i},Lj=function(){return Ew((function e(){_w(this,e)}),[{key:"getOriginViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e})}},{key:"getViewRecords",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewRecordModel.find(t)}},{key:"getGroupViewRecords",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._groupService.getViewGroup(e);if(!n)return[];var r=this.getViewRecords(e,t);return this._groupRecordService.groupViewRecords(r,n.group,n.options)}},{key:"getViewRecordsDetail",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};Array.isArray(t)||(t=[t]);var o=this._model.viewRecordModel.find({view_uuid:e,record_uuid:t}),i={view_uuid:e};r.filterHidden&&(i.hidden={$not:!0});var a,u=this._model.viewFieldModel.find(i),l=[],c=Mj(o);try{var s=function(){var e=a.value,t=n._model.recordModel.findOne({uuid:e.get("record_uuid")});if(!t)return 1;var r=[],o={};o.cellMap=new Map,u.forEach((function(e,i){var a=n._fieldService.getField(e.get("field_uuid"));if(a&&t){var u=n._cellService.getCell(a.get("uuid"),t.get("uuid"));r.push(u),o.cellMap.set(a.get("uuid"),i)}})),o.record=t,o.cells=r,l.push(o)};for(c.s();!(a=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}return l}},{key:"getViewRecordsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),(this._model.viewRecordModel.find(t)||[]).length}},{key:"getFlatViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}})}},{key:"getGroupFlatViewRecords",value:function(e){var t,n=this._groupService.getViewGroup(e),r=this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}}),o=new K_,i=Mj(this._groupRecordService.groupViewRecords(r,n.group,n.options));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.viewRecords){var u,l=Mj(a.viewRecords);try{for(l.s();!(u=l.n()).done;){var c=u.value;o.push([c])}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getViewRecordByRecordId",value:function(e,t){return this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:t})}},{key:"getVisibleRecordIds",value:function(e){return nk(this._model.viewRecordModel.find({view_uuid:e}),(function(e){return e.get("record_uuid")}))||[]}},{key:"getFieldRecords",value:function(e,t,n){var r={view_uuid:e,hidden:{$not:!0}};null!=n&&(r.group_item_key=n);var o,i=this._model.viewRecordModel.find(r),a=function(e,t){var n,r=new Map,o=J_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.set(i.get(t),i)}}catch(e){o.e(e)}finally{o.f()}return r}(this._recordService.getRecords(),"uuid"),u=[],l=Mj(i);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c.get("record_uuid")){var s=a.get(c.get("record_uuid"));if(s){var d=this._cellService.getCell(t,s.get("uuid"));d&&u.push({view_uuid:c.get("view_uuid"),record_uuid:c.get("record_uuid"),cells:[d]})}}}}catch(e){l.e(e)}finally{l.f()}return u}},{key:"getExpectedValue",value:function(e,t,n){var r=null;if(e!==HC.TEXT&&e!==HC.SELECT||(r=n),fE.isNumberLike(e)&&(r=n?parseFloat(n):""),e===HC.MULTI_SELECT&&(r=(null==n?void 0:n.split(","))||[]),e===HC.MENTION){var o=(null==n?void 0:n.split(","))||[];r=nk(this._model.userModel.find({uid:o}),(function(e){return{uid:e.get("uid"),name:e.get("name"),icon:e.get("icon"),login:e.get("login")}}))}return e===HC.DATE&&(r="yesterday"===n?i()().add(-1,"days").toString():"today"===n?i()(new Date).toString():"tomorrow"===n?i()().add(1,"days").toString():n),e===HC.CHECKBOX&&(r="true"===n),r}},{key:"createEmpty",value:function(e){var t=this,n=e.uuid,r=e.viewId,o=e.viewRecord,i=e.sourceRecordId,a=e.direction,u=e.groupOption,l=e.filter,c=e.modifierId,s=this._recordService.create({uuid:n,modifier_id:c});Array.isArray(s)||(s=[s]);var d,f=Mj(s);try{for(f.s();!(d=f.n()).done;){var p=d.value;if(null!=u){var v=u.value;this._cellService.setCell(u.fieldId,p.uuid,{fieldId:u.fieldId,recordId:p.uuid,value:(null==v?void 0:v.toJSON)?v.toJSON():v})}if(l){var h=l.field_uuid,g=this._model.fieldModel.findById(h);if(g&&!fE.isSystemType(g.get("type"))){var m=this.getExpectedValue(g.get("type"),l.func,l.expected);m&&this._cellService.setCell(h,p.uuid,{fieldId:h,recordId:p.uuid,value:m})}}}}catch(e){f.e(e)}finally{f.f()}return s.forEach((function(e){var n={uuid:null==o?void 0:o.uuid,created_at:null==o?void 0:o.created_at,updated_at:null==o?void 0:o.updated_at,view_uuid:r,record_uuid:e.uuid};null!=u&&(n.group_item_key=t._cellService.groupValue(u)),i?"after"===a?t._model.viewRecordModel.createAfter({view_uuid:r,record_uuid:i},n):t._model.viewRecordModel.createBefore({view_uuid:r,record_uuid:i},n):t._model.viewRecordModel.create(n)})),s}},{key:"createRecord",value:function(e,t,n){for(var r=this.createEmpty({uuid:n.uuid,viewId:e,direction:"after",sourceRecordId:t}),o=0,i=Object.keys(n);o<i.length;o++){var a=i[o],u=this._fieldService.getField(a);if(u){var l=n[a];Array.isArray(l)||(l=[l]);var c,s=Mj(l);try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.setCell(u.get("uuid"),r[0].uuid,d)}}catch(e){s.e(e)}finally{s.f()}}}return r}},{key:"createRecords",value:function(e,t){this._recordService.bulkCreate(t),this._model.viewRecordModel.bulkCreate(t.map((function(t){return{view_uuid:e,record_uuid:t.uuid}})),{validate:!1})}},{key:"copy",value:function(e,t){var n,r=[],o=Mj(this._model.viewRecordModel.find({view_uuid:e}));try{for(o.s();!(n=o.n()).done;){var i=n.value;i&&r.push({uuid:qw(32),view_uuid:t,record_uuid:i.get("record_uuid"),hidden:i.get("hidden"),group_item_key:i.get("group_item_key")})}}catch(e){o.e(e)}finally{o.f()}this._model.viewRecordModel.bulkCreate(r)}},{key:"copyRecord",value:function(e){var t=e.uuid,n=e.viewId,r=e.sourceRecordId,o=e.modifierId,i=this._recordService.create({uuid:t,modifier_id:o})[0],a=this._model.viewRecordModel.find({view_uuid:n}),u=ek(a,(function(e){return e.get("record_uuid")===r})),l=a.get(u);if(l){var c,s=Mj(this._model.viewFieldModel.find({view_uuid:n}));try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.copy(d.get("field_uuid"),l.get("record_uuid"),d.get("field_uuid"),i.uuid)}}catch(e){s.e(e)}finally{s.f()}this._model.viewRecordModel.create({uuid:qw(32),view_uuid:l.get("view_uuid"),record_uuid:i.uuid,hidden:l.get("hidden"),group_item_key:l.get("group_item_key")}),u!==(a=this._model.viewRecordModel.find({view_uuid:n})).length-1&&this._model.viewRecordModel.moveAfter({view_uuid:n,record_uuid:r},{view_uuid:n,record_uuid:i.uuid})}}},{key:"remove",value:function(e,t){this._model.viewRecordModel.remove({view_uuid:e,record_uuid:t}),this._cellService.removeByRecordId(t),this._recordService.remove(t)}},{key:"removeAll",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n=nk(this._model.viewRecordModel.find(t),(function(e){return e.get("record_uuid")}));return this._model.viewRecordModel.remove({view_uuid:e,record_uuid:n}),this._cellService.removeByRecordId(n),this._recordService.remove(n)}},{key:"updateOrder",value:function(e,t,n,r){var o,i,a=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eE.forward,l=this.getOriginViewRecords(e),c="string"==typeof t?[t]:t,s=l.toArray();null!=r&&(this._model.viewRecordModel.find({view_uuid:e,record_uuid:c}).forEach((function(e){a.updateGroupByViewRecord(e,r)})),s=Q_(l,(function(e){var t;return e.get("group_item_key")===(null==(t=r.option)?void 0:t.value)})).toArray());var d,f=ek(l,(function(e){return e.get("record_uuid")===c[0]})),p=ek(l,(function(e){return e.get("record_uuid")===n})),v=l.get(p);if(v&&(d={view_uuid:e,record_uuid:v.get("record_uuid")}),u===eE.forward)if(f<=p){if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:null==(o=s[0])?void 0:o.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}else if(f<=p){if(d||(d={view_uuid:e,record_uuid:null==(i=s[0])?void 0:i.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}}},{key:"updateGroupByViewRecord",value:function(e,t){var n,r;if(e.get("group_item_key")!==(null==(n=null==t?void 0:t.option)?void 0:n.value)){var o=t.field,i=o.get("type"),a=this._fieldRegistry.getValueField(i),u=o.get("uuid"),l=e.get("record_uuid");this._cellService.removeByRecordId(l,u);var c=null==(r=null==t?void 0:t.option)?void 0:r.value;if(a){var s=this._cellService.toGroupValue(o,a,c);this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:s}),this._cellService.setCell(u,l,{fieldId:u,recordId:l,value:((null==c?void 0:c.toJSON)?c.toJSON():c)||""})}else this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:""})}}}])}();function zj(e,t,n){var r;e=""===e||null===e?0:e,t=""===t||null===t?0:t;try{r=(e=new fw(e))[n](t).valueOf()}catch(e){r=NaN}return r}Vj([Ks(fx)],Lj.prototype,"_model",2),Vj([Ks(hj)],Lj.prototype,"_recordService",2),Vj([Ks(rj)],Lj.prototype,"_fieldService",2),Vj([Ks(Mx)],Lj.prototype,"_cellService",2),Vj([Ks(_j)],Lj.prototype,"_groupService",2),Vj([Ks(Cx)],Lj.prototype,"_fieldRegistry",2),Vj([Ks(Pj)],Lj.prototype,"_groupRecordService",2),Lj=Vj([Gs()],Lj);var Uj=function(e,t){return zj(e,t,"plus")},Hj=function(e,t){return zj(e,t,"times")},qj=function(e,t){return isNaN(e)?NaN:""===t||0===parseFloat(t)?1/0:zj(e,t,"div")},Wj=function(e,t){return zj(e,t,"lt")};function $j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Gj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kj=Object.defineProperty,Yj=Object.getOwnPropertyDescriptor,Jj=function(){return Ew((function e(){_w(this,e)}),[{key:"sort",value:function(e,t,n,r){return t=this.ascSortCreatedAt(t),t=fE.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,n,r):this.descSortSelect(t,n,r):fE.isNumberLike(n.get("type"))||HC.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):fE.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortCreatedAt",value:function(e){return e.sort((function(e,t){return+new Date(e.created_at)-+new Date(t.created_at)}))}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"";return(t.sortValue||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:Wj(n,r)?-1:1}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:Wj(r,n)?-1:1}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return i()(n).unix()-i()(r).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return i()(r).unix()-i()(n).unix()}))}},{key:"ascSortSelect",value:function(e,t,n){var r=nk(n,(function(e){return e.get("uuid")}));return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"descSortSelect",value:function(e,t,n){var r=nk(n,(function(e){return e.get("uuid")})).reverse();return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"_getViewRecordsOrderByOptions",value:function(e,t,n){var r,o=t.reduce((function(e,t){return e[t]=[],e}),{}),i=[],a=$j(e);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(fE.isSelect(n.get("type"))&&null!=u.sortValue)o[u.sortValue].push(u);else if(fE.isMultiSelect(n.get("type"))&&0!==u.sortValue.length){var l=u.sortValue.split(",")[0];o[l].push(u)}else i.push(u)}}catch(e){a.e(e)}finally{a.f()}var c=[];return t.forEach((function(e){c=c.concat(o[e])})),c=c.concat(i)}}])}();function Xj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Zj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Jj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kj(t,n,i),i}([Gs()],Jj);var Qj=Object.defineProperty,eD=Object.getOwnPropertyDescriptor,tD=function(e,t,n,r){for(var o,i=r>1?void 0:r?eD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qj(t,n,i),i},nD=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewSort",value:function(e){return this._model.sortModel.findOne({view_uuid:e})}},{key:"isKeepSort",value:function(e){var t=this._model.viewConfigModel.findOne({view_uuid:e});return!!(null==t?void 0:t.get("keep_sort"))}},{key:"create",value:function(e,t,n){if(this._fieldService.getField(t.field_uuid)){var r=this._model.sortModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}}},{key:"remove",value:function(e){var t=this._model.sortModel.remove({view_uuid:e});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:!1}),this.refresh(e),t}},{key:"update",value:function(e,t,n){var r=this._model.sortModel.upsert({view_uuid:e},{view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}},{key:"copy",value:function(e,t){var n=this._model.sortModel.find({view_uuid:e});n&&0!==n.length&&this._model.sortModel.bulkCreate(nk(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"refresh",value:function(e){var t=this._model.viewModel.findOne({uuid:e}),n=this.getViewSort(e);if(n){var r=n.get("type"),o=this._fieldService.getField(n.get("field_uuid"));if(o)if(this._groupService.isGroup(e)){(null==t?void 0:t.get("type"))===sE.KANBAN&&(r&&r!==iE.ASC?n.get("type")===iE.DESC&&(r=iE.ASC):r=iE.DESC);var i,a=[],u=[],l=Xj(this._viewRecordService.getGroupViewRecords(e));try{for(l.s();!(i=l.n()).done;){var c=i.value;if(c.viewRecords){var s=this._sortViewRecords(c.viewRecords,r,o);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:s.map((function(e){return e.record_uuid}))}),a=[].concat(gw(a),gw(s.map((function(e){return e.record_uuid})))),u=[].concat(gw(u),gw(s.map((function(e){return{uuid:e.uuid,hidden:e.hidden,view_uuid:e.view_uuid,record_uuid:e.record_uuid,group_item_key:e.group_item_key}}))))}}}catch(e){l.e(e)}finally{l.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a}),u.length>0&&this._model.viewRecordModel.bulkCreate(u)}else{var d=this._model.viewRecordModel.find({view_uuid:e}),f=this._sortViewRecords(d,r,o);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:f.map((function(e){return e.record_uuid}))}),this._model.viewRecordModel.bulkCreate(f.map((function(e){return{uuid:e.uuid,view_uuid:e.view_uuid,hidden:e.hidden,record_uuid:e.record_uuid,group_item_key:e.group_item_key}})))}}}},{key:"_sortViewRecords",value:function(e,t,n){var r=[],o=[],i=nk(e,(function(e){return e.get("record_uuid")})),a=tk(this._model.recordModel.find({uuid:i}),(function(e,t){return e[t.get("uuid")]=t.get("created_at"),e}),{}),u={};if(fE.isSelectLike(null==n?void 0:n.get("type"))){var l=this._cellService.getFieldKeyValues(n.get("uuid"),i);u=l.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}else{var c=this._cellService.getFieldFormatValues(n.get("uuid"),i);u=c.reduce((function(e,t){return e[t.recordId]=t.formatValue,e}),{})}return e.forEach((function(e){var t=e.get("record_uuid"),i={uuid:e.get("uuid"),hidden:e.get("hidden"),record_uuid:t,view_uuid:e.get("view_uuid"),group_item_key:e.get("group_item_key"),created_at:a[t],sortValue:u[t]};fE.isCheckbox(null==n?void 0:n.get("type"))&&(i.sortValue="true"===i.sortValue?1:0),""===i.sortValue||null==i.sortValue?o.push(i):r.push(i)})),r=this._sortFuncService.sort(t,r,n,this._fieldService.getFieldOptions(n.get("uuid"))),r=[].concat(gw(r),o)}}])}();tD([Ks(fx)],nD.prototype,"_model",2),tD([Ks(Jj)],nD.prototype,"_sortFuncService",2),tD([Ks(Lj)],nD.prototype,"_viewRecordService",2),tD([Ks(rj)],nD.prototype,"_fieldService",2),tD([Ks(Mx)],nD.prototype,"_cellService",2),tD([Ks(_j)],nD.prototype,"_groupService",2),nD=tD([Gs()],nD);var rD=Object.defineProperty,oD=Object.getOwnPropertyDescriptor,iD=function(){return Ew((function e(){_w(this,e)}),[{key:"equalTo",value:function(e,t){return null===t||e===t}},{key:"notEqualTo",value:function(e,t){return null===t||e!==t}},{key:"greaterThan",value:function(e,t){return null===t||e>t}},{key:"greaterThanOrEqualTo",value:function(e,t){return null===t||e>=t}},{key:"lessThan",value:function(e,t){return null===t||e<t}},{key:"lessThanOrEqualTo",value:function(e,t){return null===t||e<=t}},{key:"startsWith",value:function(e,t){return null===t||"string"==typeof e&&e.startsWith(t)}},{key:"notStartsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.startsWith(t)}},{key:"endsWith",value:function(e,t){return null===t||"string"==typeof e&&e.endsWith(t)}},{key:"notEndsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.endsWith(t)}},{key:"contains",value:function(e,t){return null===t||-1!==e.indexOf(t)}},{key:"notContains",value:function(e,t){return null===t||-1===e.indexOf(t)}},{key:"is",value:function(e,t){return null===t||(Array.isArray(e)?e[0]===t:e===t)}},{key:"isNot",value:function(e,t){if(null===t)return!0;if(!Array.isArray(t))return!e||(Array.isArray(e)?e[0]!==t:e!==t);if(!e)return!0;if(Array.isArray(e)&&e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!0;return!1}},{key:"isEmpty",value:function(e){return null==e||""===e}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isEmptySelect",value:function(e){return!e||!!Array.isArray(e)&&0===e.length}},{key:"isNotEmptySelect",value:function(e){return!!e&&(!Array.isArray(e)||e.length>0)}},{key:"hasAnyOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!0}else if(Mu(e,t[n]))return!0;return!1}},{key:"hasAllOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(!e.includes(t[n]))return!1}else if(!Mu(e,t[n]))return!1;return!0}},{key:"isExactly",value:function(e,t){return null===t||(t=Array.isArray(t)?t:[t],!(!(null==e?void 0:e.sort)||!(null==t?void 0:t.sort))&&Mu(e.sort(),t.sort()))}},{key:"hasNoneOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!1}else if(Mu(e,t[n]))return!1;return!0}}])}();iD=function(e,t,n,r){for(var o,i=r>1?void 0:r?oD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rD(t,n,i),i}([Gs()],iD);var aD=Object.defineProperty,uD=Object.getOwnPropertyDescriptor,lD=function(e,t,n,r){for(var o,i=r>1?void 0:r?uD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aD(t,n,i),i},cD=function(){return Ew((function e(){_w(this,e)}),[{key:"isMatchCondition",value:function(e,t,n){if(e===ZC.isEmpty||e===ZC.isNotEmpty)return this._filterFuncService[e](t);if(!t)return!1;var r;if(B_(n)?r=[n+" 00:00:00",n+" 23:59:59"]:"today"===n?r=this.getTodayRange():"tomorrow"===n?r=this.getTomorrowRange():"yesterday"===n?r=this.getYesterdayRange():"thisWeek"===n?r=this.getThisWeekRange():"lastWeek"===n?r=this.getLastWeekRange():"nextWeek"===n?r=this.getNextWeekRange():"lastMonth"===n?r=this.getLastMonthRange():"thisMonth"===n?r=this.getThisMonthRange():"nextMonth"===n?r=this.getNextMonthRange():"last7days"===n?r=this.getLast7daysRange():"next7days"===n?r=this.getNext7daysRange():"last30days"===n?r=this.getLast30daysRange():"next30days"===n&&(r=this.getNext30daysRange()),!r)return!1;var o=i()(t);return e===ZC.equalTo?(o.isAfter(r[0])||o.isSame(r[0]))&&(o.isBefore(r[1])||o.isSame(r[1])):e===ZC.lessThan?o.isBefore(r[0]):e===ZC.greaterThan&&o.isAfter(r[1])}},{key:"getYesterdayRange",value:function(){var e=i()().add(-1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getTodayRange",value:function(){var e=i()();return[e.startOf("day"),e.endOf("day")]}},{key:"getTomorrowRange",value:function(){var e=i()().add(1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getLastWeekRange",value:function(){var e=i()().startOf("week");return[e.add(-7,"days"),e.add(-1,"millisecond")]}},{key:"getThisWeekRange",value:function(){var e=i()().endOf("week");return[e.add(-7,"days"),e]}},{key:"getNextWeekRange",value:function(){var e=i()().endOf("week");return[e,e.add(7,"days")]}},{key:"getLastMonthRange",value:function(){var e=i()().startOf("month");return[e.add(-1,"months"),e.add(-1,"millisecond")]}},{key:"getThisMonthRange",value:function(){return[i()().startOf("month"),i()().endOf("month")]}},{key:"getNextMonthRange",value:function(){var e=i()().endOf("month"),t=e.add(1,"months");return[e,t]}},{key:"getLast7daysRange",value:function(){return[i()().add(-7,"days"),i()()]}},{key:"getNext7daysRange",value:function(){return[i()(),i()().add(7,"days")]}},{key:"getLast30daysRange",value:function(){return[i()().add(-30,"days"),i()()]}},{key:"getNext30daysRange",value:function(){return[i()(),i()().add(30,"days")]}}])}();function sD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function dD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}lD([Ks(iD)],cD.prototype,"_filterFuncService",2),cD=lD([Gs()],cD);var fD=Object.defineProperty,pD=Object.getOwnPropertyDescriptor,vD=function(e,t,n,r){for(var o,i=r>1?void 0:r?pD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fD(t,n,i),i},hD=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewFilters",value:function(e){var t=this,n=this._model.filterModel.find({view_uuid:e}),r=new K_;return n.forEach((function(e){var n=t._fieldService.getField(e.get("field_uuid"));if(n){var o=new Y_(e.toJSON());o.set("field",n.toJSON()),r.push([o])}})),r}},{key:"refresh",value:function(e){var t=this.getViewFilters(e);if(0===t.length)this._model.viewRecordModel.update({view_uuid:e},{hidden:!1});else{if(ik(t,(function(e){return(null==e.get("expected")||""===e.get("expected"))&&!lE.includes(e.get("func"))})))return;if(this._groupService.isGroup(e)){var n,r=sD(this._viewRecordService.getGroupViewRecords(e,!1));try{for(r.s();!(n=r.n()).done;){var o=n.value;this.refreshViewRecord(e,o.viewRecords,t)}}catch(e){r.e(e)}finally{r.f()}}else{var i=this._viewRecordService.getViewRecords(e,!1);this.refreshViewRecord(e,i,t)}}}},{key:"refreshViewRecord",value:function(e,t,n){var r=this;t=t||this._model.viewRecordModel.find({view_uuid:e}),n=n||this.getViewFilters(e);var o,i={false:[],true:[]},a=tk(this._model.fieldModel.find({uuid:nk(n,(function(e){return e.get("field_uuid")}))}),(function(e,t){return e[t.get("uuid")]=t,e}),{}),u={},l=sD(Ju(nk(n,(function(e){return e.get("field_uuid")}))));try{for(l.s();!(o=l.n()).done;){var c=o.value,s=this._cellService.getFieldKeyValues(c);u[c]=s.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}}catch(e){l.e(e)}finally{l.f()}var d,f=sD(t);try{var p=function(){var e=d.value,t=e.get("record_uuid"),o=!1;if(o="and"===(n.get(0).get("operator")||"and")?ik(n,(function(e){var n=u&&u[e.get("field_uuid")][t];return r._checkFilter(e,t,n,null==a?void 0:a[e.get("field_uuid")])})):rk(n,(function(e){var n=u&&u[e.get("field_uuid")][t];return r._checkFilter(e,t,n,null==a?void 0:a[e.get("field_uuid")])})),!0===o&&!1===e.get("hidden")||!1===o&&e.get("hidden"))return 1;o?i.false.push(e):i.true.push(e)};for(f.s();!(d=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}i.true.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.true.map((function(e){return e.get("record_uuid")}))},{hidden:!0}),i.false.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.false.map((function(e){return e.get("record_uuid")}))},{hidden:!1})}},{key:"checkIsFilterMatch",value:function(e,t,n){var r=this;return"and"===(t.get(0).get("operator")||"and")?ik(t,(function(t){return r._checkFilter(t,e,n)})):rk(t,(function(t){return r._checkFilter(t,e,n)}))}},{key:"_checkFilter",value:function(e,t,n,r){if((null==e.get("expected")||""===e.get("expected"))&&!lE.includes(e.get("func")))return!0;if(null==n&&(n=this._cellService.getCellKeyValue(e.get("field_uuid"),t)),r||(r=this._fieldService.getField(e.get("field_uuid"))),!r)return!1;var o=r.get("type"),i=uE[o];return this._matchCondition(n,i,o,e.get("func"),e.get("expected"))}},{key:"_matchCondition",value:function(e,t,n,r,o){var i,a;if("text"===t||"file"===t||"select"===t){var u=null==e?"":e+"";return n!==HC.LINK||r!==ZC.startsWith&&r!==ZC.notStartsWith&&r!==ZC.endsWith&&r!==ZC.notEndsWith||(u=u.split("|")[1]||""),"text"===t?this._filterFuncService[r](null==(i=null==u?void 0:u.toLowerCase)?void 0:i.call(u),null==(a=null==o?void 0:o.toLowerCase)?void 0:a.call(o)):this._filterFuncService[r](u,o)}if("number"===t){var l=e;return n!=HC.RATE&&n!==HC.PROGRESS||""!==l||(l="0"),(""===l||null==l||!isNaN(parseFloat(l)))&&this._filterFuncService[r](""===l||null==l?"":parseFloat(l),parseFloat(o))}if("timePeriod"===t)return""===e||null==e?this._filterFuncService[r](""):this._filterDateService.isMatchCondition(r,e,o);if("checkbox"===t)return e=e?"true":"false",o=!0===o||"true"===o?"true":"false",this._filterFuncService[r](e,o);if("multiSelect"===t){var c=[];return e?Array.isArray(e)?c=e.map((function(e){return e.value})):"string"==typeof e&&(c=e.split(",")):c=[],o&&"string"==typeof o&&(o=o.split(",")),this._filterFuncService[r](c,o)}return!1}},{key:"create",value:function(e,t){var n=this._model.filterModel.create({uuid:t.uuid,view_uuid:e,field_uuid:t.field_uuid,func:t.func,expected:t.expected,operator:t.operator});return this.refresh(e),n}},{key:"remove",value:function(e){var t=this._model.filterModel.findOne({uuid:e});if(!t)return null;var n=t.get("view_uuid");return this._model.filterModel.remove({view_uuid:n,uuid:e}),this.refresh(n),t}},{key:"removeByViewId",value:function(e){var t=this._model.filterModel.findOne({view_uuid:e});if(t)return this.remove(t.get("uuid"))}},{key:"update",value:function(e,t){var n,r=sD(Array.isArray(t)?t:[t]);try{for(r.s();!(n=r.n()).done;)t=n.value,this._model.filterModel.update({uuid:t.uuid},{field_uuid:t.field_uuid,view_uuid:e,func:t.func,expected:t.expected,operator:t.operator})}catch(e){r.e(e)}finally{r.f()}this.refresh(e)}},{key:"copy",value:function(e,t){var n=this._model.filterModel.find({view_uuid:e});n&&0!==n.length&&this._model.filterModel.bulkCreate(nk(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),operator:e.get("operator"),func:e.get("func"),expected:e.get("expected")}})))}}])}();vD([Ks(fx)],hD.prototype,"_model",2),vD([Ks(rj)],hD.prototype,"_fieldService",2),vD([Ks(Mx)],hD.prototype,"_cellService",2),vD([Ks(iD)],hD.prototype,"_filterFuncService",2),vD([Ks(cD)],hD.prototype,"_filterDateService",2),vD([Ks(_j)],hD.prototype,"_groupService",2),vD([Ks(Lj)],hD.prototype,"_viewRecordService",2),hD=vD([Gs()],hD);var gD=Object.defineProperty,mD=Object.getOwnPropertyDescriptor;function yD(e,t){if(0===t)return"";var n=Hj(qj(e,t),100);return-1===n.indexOf(".")?n+"%":parseFloat(n).toFixed(2)+"%"}var bD=function(){return Ew((function e(){_w(this,e)}),[{key:"count",value:function(e){return e.length}},{key:"sum",value:function(e){return e.reduce((function(e,t){return Uj(e,t)}),0)}},{key:"average",value:function(e){var t=this.sum(e),n=qj(t,e.length);return isNaN(n)?0:parseFloat(n).toFixed(2)}},{key:"max",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.max.apply(Math,gw(e))}},{key:"min",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.min.apply(Math,gw(e))}},{key:"filled",value:function(e){return e.filter((function(e){return""!==e})).length}},{key:"empty",value:function(e){return e.filter((function(e){return""===e})).length}},{key:"unique",value:function(e){var t={};return e.forEach((function(e){""!==e&&(t[e]=!0)})),Object.keys(t).length}},{key:"percentFilled",value:function(e){return yD(this.filled(e),e.length)}},{key:"percentEmpty",value:function(e){return yD(this.empty(e),e.length)}},{key:"percentUnique",value:function(e){return yD(this.unique(e),e.length)}},{key:"earliestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&(e[n]<t||""===t)&&(t=e[n]);return t}},{key:"latestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&e[n]>t&&(t=e[n]);return t}},{key:"dateRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:i()(n).diff(i()(t),"days")}},{key:"monthRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:i()(n).diff(i()(t),"months")}},{key:"checked",value:function(e){return e.reduce((function(e,t){return"是"===t||"true"===t||!0===t?e+1:e}),0)}},{key:"unchecked",value:function(e){return e.reduce((function(e,t){return"是"!==t&&"true"!==t&&!0!==t?e+1:e}),0)}},{key:"percentChecked",value:function(e){return yD(this.checked(e),e.length)}},{key:"percentUnchecked",value:function(e){return yD(this.unchecked(e),e.length)}}])}();function wD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_D(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function _D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}bD=function(e,t,n,r){for(var o,i=r>1?void 0:r?mD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gD(t,n,i),i}([Gs()],bD);var kD=Object.defineProperty,CD=Object.getOwnPropertyDescriptor,ED=function(e,t,n,r){for(var o,i=r>1?void 0:r?CD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kD(t,n,i),i},OD=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewStats",value:function(e){var t=this._model.statModel.find({view_uuid:e});if(0!==t.length)return t}},{key:"getStatValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this._model.statModel.findOne({view_uuid:e,field_uuid:t});if(n=n.filter((function(e){return!!e})),r&&0!==n.length)return{stat:r,value:this._calc(r,n)}}},{key:"_calc",value:function(e,t){var n,r=[],o=wD(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=this._cellService.getCellFormattedValue(e.get("field_uuid"),i);a?r.push(a):r.push("")}}catch(e){o.e(e)}finally{o.f()}return this._statFuncService[e.get("type")]?this._statFuncService[e.get("type")](r):null}},{key:"upsert",value:function(e,t,n){this._model.statModel.upsert({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:t,type:n})}},{key:"remove",value:function(e,t){this._model.statModel.remove({view_uuid:e,field_uuid:t})}},{key:"copy",value:function(e,t){var n=this._model.statModel.find({view_uuid:e});n&&0!==n.length&&this._model.statModel.bulkCreate(nk(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}}])}();function SD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function jD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ED([Ks(fx)],OD.prototype,"_model",2),ED([Ks(bD)],OD.prototype,"_statFuncService",2),ED([Ks(Mx)],OD.prototype,"_cellService",2),OD=ED([Gs()],OD);var DD=Object.defineProperty,AD=Object.getOwnPropertyDescriptor,RD=function(e,t,n,r){for(var o,i=r>1?void 0:r?AD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DD(t,n,i),i},FD=function(){return Ew((function e(){_w(this,e)}),[{key:"getView",value:function(e){return this._model.viewModel.findById(e)}},{key:"getViews",value:function(e){var t={};return(null==e?void 0:e.skipType)&&(t.type={$not:e.skipType}),(null==e?void 0:e.type)&&(t.type=e.type),this._model.viewModel.find(t)}},{key:"setActiveView",value:function(e){var t=this._model.viewModel.findById(e);if(t||(t=this._model.viewModel.find()[0])){var n=this._model.tableModel.find().get(0).get("uuid");this._activeViewId=t.get("uuid"),this._model.tableModel.update({uuid:n},{active_view_uuid:t.get("uuid")})}}},{key:"getActiveView",value:function(){var e,t;if(this._activeViewId)t=this._model.viewModel.findOne({uuid:this._activeViewId});else{var n=null==(e=this._model.tableModel.find().get(0))?void 0:e.get("active_view_uuid");n&&(t=this.getView(n))}return t||(t=this._model.viewModel.find().get(0)),this._activeViewId=null==t?void 0:t.get("uuid"),t}},{key:"create",value:function(e){var t,n=this,r=null==(t=this.getActiveView())?void 0:t.get("uuid"),o=this._model.viewModel.create({uuid:e.uuid,name:e.name,type:e.type}),i=o.uuid;return this._viewConfigService.create(i),r&&(this._viewFieldService.copy(r,i,(function(e){var t=n._fieldService.getField(e.get("field_uuid"));return o.type===sE.FORM&&fE.isSystemType(t.get("type"))})),this._viewRecordService.copy(r,i)),e.type===sE.CARD?this._createCard(i):e.type===sE.KANBAN?this._createKanban(i):e.type===sE.FORM&&this._createForm(i),this.refresh(i),this._model.viewModel.findOne({uuid:i})}},{key:"_createCard",value:function(e){var t,n,r=0,o=xD(this._viewFieldService.getViewFields(e));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=this._fieldService.getField(i.get("field_uuid"));(null==a?void 0:a.get("type"))===HC.IMAGE&&(t||(t=a.get("uuid"))),this._model.viewFieldModel.update({view_uuid:i.get("view_uuid"),field_uuid:i.get("field_uuid")},{hidden:r>=3}),r++}}catch(e){o.e(e)}finally{o.f()}t&&this._model.viewConfigModel.update({view_uuid:e},{cover_field_uuid:t})}},{key:"_createKanban",value:function(e){var t=this._fieldService.getFields(),n=this._getKanbanGroupField(t);n&&this._groupService.create(e,{field_uuid:n.get("uuid"),type:oE.ASC})}},{key:"_createForm",value:function(e){var t,n=xD(this._viewFieldService.getViewFields(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._fieldService.getField(r.get("field_uuid"));fE.isSystemType(null==o?void 0:o.get("type"))?this._model.viewFieldModel.remove({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")}):this._model.viewFieldModel.update({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")},{required:!0})}}catch(e){n.e(e)}finally{n.f()}}},{key:"_getKanbanGroupField",value:function(e){for(var t=[],n=0,r=[HC.SELECT,HC.MENTION];n<r.length;n++){var o,i=r[n],a=xD(e);try{for(a.s();!(o=a.n()).done;){var u=o.value;i===(null==u?void 0:u.get("type"))&&t.push(u)}}catch(e){a.e(e)}finally{a.f()}}for(var l=0,c=t;l<c.length;l++){var s=c[l];if((null==s?void 0:s.get("type"))===HC.SELECT&&s.get("color"))return s}if(0===t.length){var d=$C.find((function(e){return e.type===HC.SELECT})),f=this._fieldService.create({name:d.name,type:d.type,color:d.color,multiple:!!d.multiple,options:d.options});return this._fieldService.getField(f.uuid)}return t[0]}},{key:"createByType",value:function(e,t){var n=this._model.viewModel.find({type:t}),r=dE[t].name;return n.length>0&&(r+=n.length),this.create({uuid:e,name:r,type:t})}},{key:"update",value:function(e,t){if(!this.getView(e))throw new Error("视图 ".concat(e," 没有找到"));return this._model.viewModel.update({uuid:e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SD(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}},{key:"remove",value:function(e){if(!this.getView(e))throw new Error("view not found. id: ".concat(e));return this._viewConfigService.remove(e),this._model.viewRecordModel.remove({view_uuid:e}),this._groupService.remove(e),this._sortService.remove(e),this._filterService.removeByViewId(e),this._model.viewModel.remove({uuid:e})}},{key:"copy",value:function(e,t){if(e&&t){var n=this.getView(t);if(!n)throw new Error("view not found. id: ".concat(t));var r=n.get("name")+" (".concat(Lw("副本"),")"),o=n.get("type");return this._model.viewModel.create({uuid:e,name:r,type:o}),this._viewConfigService.copy(t,e),this._viewFieldService.copy(t,e),this._viewRecordService.copy(t,e),this._groupService.copy(t,e),this._sortService.copy(t,e),this._filterService.copy(t,e),this._statService.copy(t,e),this._model.viewModel.findOne({uuid:e})}}},{key:"updateOrder",value:function(e,t){var n=this._model.viewModel.find(),r=ek(n,(function(t){return t.get("uuid")===e})),o=ek(n,(function(e){return e.get("uuid")===t}));r<o&&(o=Math.min(o,n.length-1));var i=n.get(o),a={};i&&(a={uuid:i.get("uuid")}),r<o?this._model.viewModel.moveAfter(a,{uuid:e}):this._model.viewModel.moveBefore(a,{uuid:e})}},{key:"refresh",value:function(e){var t=this.getView(e);if((null==t?void 0:t.get("type"))!==sE.FORM){var n=this._groupService.getViewGroup(e);(null==t?void 0:t.get("type"))===sE.KANBAN&&((null==n?void 0:n.group)||(n=this._groupService.createDefaultKanbanViewGroup(e))),this._viewFieldService.refresh(e);var r={},o={};this._model.recordModel.find().forEach((function(e){r[e.get("uuid")]=!0}));var i,a=[],u=xD(this._model.viewRecordModel.find({view_uuid:e}));try{for(u.s();!(i=u.n()).done;){var l=i.value.get("record_uuid");o[l]=!0,r[l]||a.push(l)}}catch(e){u.e(e)}finally{u.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a});var c=this._filterService.getViewFilters(e),s=[];if(Object.keys(r).forEach((function(e){o[e]||s.push(e)})),s.length>0){var d=s.map((function(t){return{uuid:qw(32),view_uuid:e,record_uuid:t}}));this._model.viewRecordModel.bulkCreate(d)}var f=this._model.viewRecordModel.find({view_uuid:e});(null==n?void 0:n.group)&&this._groupService.refreshGroup(e,n.group.toJSON()),c.length>0&&this._filterService.refreshViewRecord(e,f),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}}}])}();RD([Ks(fx)],FD.prototype,"_model",2),RD([Ks(rj)],FD.prototype,"_fieldService",2),RD([Ks(wx)],FD.prototype,"_viewConfigService",2),RD([Ks(Lj)],FD.prototype,"_viewRecordService",2),RD([Ks(dj)],FD.prototype,"_viewFieldService",2),RD([Ks(_j)],FD.prototype,"_groupService",2),RD([Ks(nD)],FD.prototype,"_sortService",2),RD([Ks(hD)],FD.prototype,"_filterService",2),RD([Ks(OD)],FD.prototype,"_statService",2),FD=RD([Gs()],FD);var ID=Object.defineProperty,PD=Object.getOwnPropertyDescriptor,MD=function(e,t,n,r){for(var o,i=r>1?void 0:r?PD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ID(t,n,i),i},TD=function(){return Ew((function e(){_w(this,e)}),[{key:"setProcessor",value:function(e){this._processor=e}},{key:"setContent",value:function(e){this._database.clear(),this._processor.toModel(e,this._database)}},{key:"setRecords",value:function(e){var t;this._database.clear([dO.table,gO.table,SO.table,TO.table,zO.table,$O.table,fS.table]),this._processor.toRecordModel(e,this._database);var n=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid");n&&this._viewService.refresh(n)}},{key:"setUsers",value:function(e){this._database.clear([FS.table]),this._processor.toUserModel(e,this._database)}},{key:"getContent",value:function(){return this._processor.toData(this._database)}}])}();function ND(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ND(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return LD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function LD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}MD([Ks(L_)],TD.prototype,"_database",2),MD([Ks(FD)],TD.prototype,"_viewService",2),TD=MD([Gs()],TD);var zD=Object.defineProperty,UD=Object.getOwnPropertyDescriptor,HD=function(e,t,n,r){for(var o,i=r>1?void 0:r?UD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zD(t,n,i),i},qD=function(){return Ew((function e(){_w(this,e)}),[{key:"getTable",value:function(){return this._model.tableModel.find().get(0)}},{key:"getVersion",value:function(){return this._model.tableModel.find().get(0).get("version")}},{key:"getViewList",value:function(){return this._model.viewModel.find()}},{key:"createTable",value:function(){this._model.tableModel.create({version:"2.0.0"})}},{key:"create",value:function(){this.createTable();var e,t=VD($C);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._fieldService.create(n)}}catch(e){t.e(e)}finally{t.f()}var r=dE[sE.GRID],o=qw(32);this._viewService.create({uuid:o,name:r.name,type:r.type});for(var i=0,a=Array.from({length:3});i<a.length;i++){a[i];var u=qw(32);this._model.recordModel.create({uuid:u}),this._model.viewRecordModel.create({view_uuid:o,record_uuid:u})}}},{key:"replaceTable",value:function(e){var t=this,n=e.sheet[0],r=Object.values(n.views);this._viewService.getViews().forEach((function(e){t._viewRecordService.removeAll(e.get("uuid"),!1),t._viewFieldService.removeAll(e.get("uuid")),t._model.viewConfigModel.remove({view_uuid:e.get("uuid")}),t._model.statModel.remove({view_uuid:e.get("uuid")}),t._viewService.remove(e.get("uuid"))})),r.forEach((function(r){var o;t._viewService.create({id:r.id,uuid:r.id,type:r.type,name:r.name}),r.type!==sE.FORM&&(n.columns.forEach((function(e){var n,o={uuid:e.id,name:e.name,type:e.type,color:e.color,options:null==(n=e.options)?void 0:n.map((function(e){return{uuid:e.id,name:e.value,color:e.color}}))},i=fE.isMultiple(e.type),a=t._fieldService.create(BD(BD({},o),{},{multiple:i})),u={view_uuid:r.id,field_uuid:a.uuid};r.type===sE.FORM&&(u.required=!0),t._model.viewFieldModel.create(u)})),null==(o=e.records)||o.forEach((function(e){var n=JSON.parse(e.data),o=e.id||e.uuid;n.uuid=o,t._viewRecordService.createRecord(r.id,o,n)})))})),this._viewService.setActiveView(n.activeView)}}])}();HD([Ks(fx)],qD.prototype,"_model",2),HD([Ks(rj)],qD.prototype,"_fieldService",2),HD([Ks(FD)],qD.prototype,"_viewService",2),HD([Ks(Lj)],qD.prototype,"_viewRecordService",2),HD([Ks(dj)],qD.prototype,"_viewFieldService",2),qD=HD([Gs()],qD);var WD=Object.defineProperty,$D=Object.getOwnPropertyDescriptor,GD=function(e,t,n,r){for(var o,i=r>1?void 0:r?$D(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WD(t,n,i),i},KD=function(){return Ew((function e(){_w(this,e)}),[{key:"getViewShare",value:function(e){return this._model.viewShareModel.findOne({view_uuid:e})}},{key:"upsertViewShare",value:function(e,t){this._model.viewShareModel.upsert({view_uuid:e},{view_uuid:e,src:null==t?void 0:t.src,status:null==t?void 0:t.status})}}])}();GD([Ks(fx)],KD.prototype,"_model",2),KD=GD([Gs()],KD);var YD=Object.defineProperty,JD=Object.getOwnPropertyDescriptor,XD=function(e,t,n,r){for(var o,i=r>1?void 0:r?JD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YD(t,n,i),i},ZD=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).processor;this._modelInitial.init({models:[xS,GS,NS,US,ZS,rx,lx,FS,kS,mS,fS,nS,uS,XO,_O,RO,$O,zO,TO,SO,gO,dO]}),e&&this._contentService.setProcessor(e)}},{key:"start",value:function(){}},{key:"initData",value:function(e){this._contentService.setContent(e);var t=this._contextService.currentUser;t&&this._modelService.getModel("user").upsert({uid:t.uid},{uid:String(t.uid),work_id:t.work_id,name:t.name,login:t.login,icon:t.icon})}},{key:"initRecords",value:function(e){this._contentService.setRecords(e)}},{key:"initUsers",value:function(e){this._contentService.setUsers(e)}}])}();XD([Ks(gE)],ZD.prototype,"_modelInitial",2),XD([Ks(oO)],ZD.prototype,"_modelService",2),XD([Ks(TD)],ZD.prototype,"_contentService",2),XD([Ks(hx)],ZD.prototype,"_contextService",2),ZD=XD([Gs()],ZD);function QD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function eA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tA=Object.defineProperty,nA=Object.getOwnPropertyDescriptor,rA=function(e,t,n,r){for(var o,i=r>1?void 0:r?nA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tA(t,n,i),i},oA=function(){return Ew((function e(){_w(this,e)}),[{key:"currentUser",get:function(){return this._contextService.currentUser}},{key:"maxRecordCount",get:function(){return this._configuration.getValue("record.maxCount")}},{key:"version",get:function(){return"1.1.0"}},{key:"getTable",value:function(){return this._tableService.getTable()}},{key:"getContent",value:function(){return this._contentService.getContent()}},{key:"isEmptyTable",value:function(){var e,t,n,r=this.getAllFields();if(3!==r.length)return!1;if(r.get(0).get("type")!==$C[0].type)return!1;if(r.get(1).get("type")!==$C[1].type)return!1;if(r.get(2).get("type")!==$C[2].type)return!1;if(this.getViews().length>1)return!1;var o=this.getFieldOptions(r.get(1).get("uuid"));if(3!==o.length)return!1;if(o.get(0).get("name")!==(null==(e=$C[1].options)?void 0:e[0].name))return!1;if(o.get(1).get("name")!==(null==(t=$C[1].options)?void 0:t[1].name))return!1;if(o.get(2).get("name")!==(null==(n=$C[1].options)?void 0:n[2].name))return!1;var i,a=QD(this.getRecords());try{for(a.s();!(i=a.n()).done;){var u,l=i.value,c=QD(r);try{for(c.s();!(u=c.n()).done;){var s=u.value;if(""!==this.getCellFormattedValue(s.get("uuid"),l.get("uuid")))return!1}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}return!0}},{key:"getActiveView",value:function(){return this._viewService.getActiveView()}},{key:"getView",value:function(e){return e=e||this.getActiveViewId(),this._viewService.getView(e)}},{key:"getViews",value:function(e){return this._viewService.getViews(e)}},{key:"getViewConfig",value:function(e){return e=e||this.getActiveViewId(),this._viewConfigService.getViewConfig(e)}},{key:"getViewFilters",value:function(e){return e=e||this.getActiveViewId(),this._filterService.getViewFilters(e)}},{key:"getViewGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.getViewGroup(e)}},{key:"getViewSort",value:function(e){return e=e||this.getActiveViewId(),this._sortService.getViewSort(e)}},{key:"getViewStats",value:function(e){return this._statService.getViewStats(e)}},{key:"getViewShare",value:function(e){return this._viewShareService.getViewShare(e)}},{key:"getStatValue",value:function(e,t,n){return this._statService.getStatValue(e,t,n)}},{key:"getCell",value:function(e,t){return this._cellService.getCell(e,t)}},{key:"getFieldCells",value:function(e){return this._cellService.getFieldCells(e)}},{key:"getFieldFormatValues",value:function(e,t){return this._cellService.getFieldFormatValues(e,t)}},{key:"getViewRecordCells",value:function(e,t){return null==t&&(t=e,e=this.getActiveViewId()),this._cellService.getViewRecordCells(e,t)}},{key:"getRecordCells",value:function(e){return this._cellService.getRecordCells(e)}},{key:"getOriginRecord",value:function(e){return this._recordService.getRecordById(e)}},{key:"getViewRecordByRecordId",value:function(e){var t=this._viewService.getActiveView().get("uuid");return this._viewRecordService.getViewRecordByRecordId(t,e)}},{key:"getRecordDesc",value:function(e){return this._recordService.getRecordDesc(e)}},{key:"getViewRecordsDetail",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};return this._viewRecordService.getViewRecordsDetail(e,t,n)}},{key:"getRecordByIndex",value:function(e){return this.getFlatViewRecords().get(e)}},{key:"getFieldByIndex",value:function(e){var t=this.getViewFields().get(e);return t?this._fieldService.getField(t.get("field_uuid")):null}},{key:"getCellByIndexes",value:function(e,t){var n=this.getFieldByIndex(t),r=this.getRecordByIndex(e);return n&&r?this.getCell(null==n?void 0:n.get("uuid"),r.get("record_uuid")):null}},{key:"getVisibleRecordIdsInActiveView",value:function(){var e=this.getActiveViewId();return this._viewRecordService.getVisibleRecordIds(e)}},{key:"getPrimaryCellInRecord",value:function(e,t){var n=this;if(this._recordService.getRecordById(e)){var r=t;if(!r){var o=this.getViewFields(),i=Z_(o,(function(e){var t=n._fieldService.getField(e.get("field_uuid"));return(null==t?void 0:t.get("type"))===HC.TITLE}))||(null==o?void 0:o.get(0));r=null==i?void 0:i.get("field_uuid")}return r?{formattedValue:this._cellService.getCellFormattedValue(r,e),recordId:e,fieldId:r}:null}return null}},{key:"getAllFields",value:function(){return this._fieldService.getFields()}},{key:"getRecords",value:function(){return this._recordService.getRecords()}},{key:"getViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecords(e)}},{key:"getGroupViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getGroupViewRecords(e)}},{key:"getOriginViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getOriginViewRecords(e)}},{key:"getFlatViewRecords",value:function(e){return e=e||this.getActiveViewId(),this.isGroup(e)?this._viewRecordService.getGroupFlatViewRecords(e):this._viewRecordService.getFlatViewRecords(e)}},{key:"getViewRecordsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecordsCount(e)}},{key:"getFieldOptionCells",value:function(e,t){var n=this.getField(t.field_uuid),r=[];if((null==n?void 0:n.get("type"))===HC.MENTION){var o=this.getUsers(t.uuid.split(",").map((function(e){return String(e)}))),i=this.keyValue({fieldId:t.field_uuid,value:gw(o)});r=(this.getFieldRecords(e,t.field_uuid,i)||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}else{r=(this.getFieldRecords(e,t.field_uuid,t.uuid)||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}return r}},{key:"getFieldRecords",value:function(e,t,n){return this._viewRecordService.getFieldRecords(e,t,n)}},{key:"getField",value:function(e){return this._fieldService.getField(e)}},{key:"getFieldOption",value:function(e){return this._fieldService.getFieldOption(e)}},{key:"getFieldOptions",value:function(e){return this._fieldService.getFieldOptions(e)}},{key:"getViewField",value:function(e,t){return this._viewFieldService.getViewField(e,t)}},{key:"isGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.isGroup(e)}},{key:"getViewFields",value:function(e,t){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,t)}},{key:"getViewFieldsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFieldsCount(e)}},{key:"getAllViewFields",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,!1)}},{key:"getCellFormattedValue",value:function(e,t){return this._cellService.getCellFormattedValue(e,t)||""}},{key:"getActiveViewId",value:function(){var e=this._viewService.getActiveView();return e?null==e?void 0:e.get("uuid"):this.getViews().get(0).get("uuid")}},{key:"getActiveViewType",value:function(){var e;return null==(e=this._viewService.getActiveView())?void 0:e.get("type")}},{key:"getUser",value:function(e){return this._model.userModel.findOne({uid:e})}},{key:"getUsers",value:function(e){return this._model.userModel.find({uid:e})}},{key:"getValueField",value:function(e){return this._fieldRegistry.getValueField(e)}},{key:"keyValue",value:function(e){return this._cellService.keyValue(e)}},{key:"groupValue",value:function(e){return this._cellService.groupValue(e)}},{key:"getGroupItems",value:function(e,t){return this._groupService.getGroupItems(e,t)}}])}();function iA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function aA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uA(e,t,n){return t=dk(t),sk(e,lA()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function lA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lA=function(){return!!e})()}rA([Ks(qD)],oA.prototype,"_tableService",2),rA([Ks(rj)],oA.prototype,"_fieldService",2),rA([Ks(hj)],oA.prototype,"_recordService",2),rA([Ks(FD)],oA.prototype,"_viewService",2),rA([Ks(wx)],oA.prototype,"_viewConfigService",2),rA([Ks(dj)],oA.prototype,"_viewFieldService",2),rA([Ks(Lj)],oA.prototype,"_viewRecordService",2),rA([Ks(KD)],oA.prototype,"_viewShareService",2),rA([Ks(OD)],oA.prototype,"_statService",2),rA([Ks(_j)],oA.prototype,"_groupService",2),rA([Ks(nD)],oA.prototype,"_sortService",2),rA([Ks(hD)],oA.prototype,"_filterService",2),rA([Ks(Mx)],oA.prototype,"_cellService",2),rA([Ks(Cx)],oA.prototype,"_fieldRegistry",2),rA([Ks(lk)],oA.prototype,"_configuration",2),rA([Ks(hx)],oA.prototype,"_contextService",2),rA([Ks(TD)],oA.prototype,"_contentService",2),rA([Ks(fx)],oA.prototype,"_model",2),oA=rA([Gs()],oA);var cA=Object.defineProperty,sA=Object.getOwnPropertyDescriptor,dA=function(e,t,n,r){for(var o,i=r>1?void 0:r?sA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cA(t,n,i),i},fA=function(e){return e.GROUP="group",e.SORT="sort",e.FILTER="filter",e.ACTIVE_VIEW="activeView",e}(fA||{}),pA=function(e){function t(){var e;return _w(this,t),(e=uA(this,t,arguments))._onBeforeRefresh=e._register(new Lk),e.onBeforeRefresh=e._onBeforeRefresh.event,e._onAfterRefresh=e._register(new Lk),e.onAfterRefresh=e._onAfterRefresh.event,e}return vk(t,e),Ew(t,[{key:"isNeedRefreshGroup",value:function(e,t){var n,r=this._groupService.getViewGroup(e);if(!(null==r?void 0:r.group))return!1;return("string"==typeof t?[t]:t).includes(null==(n=r.group)?void 0:n.get("field_uuid"))}},{key:"isNeedRefreshSort",value:function(e,t){var n=this._sortService.getViewSort(e),r=[];return r="string"==typeof t?[t]:t,this._sortService.isKeepSort(e)&&!!n&&r.includes(n.get("field_uuid"))}},{key:"isNeedRefreshFilter",value:function(e,t,n,r,o){var i,a=!1,u=iA(nk(this._model.filterModel.find({view_uuid:e}),(function(e){return e.get("field_uuid")})));try{for(u.s();!(i=u.n()).done;){var l=i.value;if(!t||t===l){var c=this._filterService.getViewFilters(e),s=this._model.fieldModel.findOne({uuid:l}),d=this._fieldRegistry.getValueField(null==s?void 0:s.get("type")),f=this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:n}),p=!this._filterService.checkIsFilterMatch(n,c,null==d?void 0:d.keyValue(r));a=o?p:p!=(null==f?void 0:f.get("hidden"));break}}}catch(e){u.e(e)}finally{u.f()}return a}},{key:"getRefreshType",value:function(e,t,n,r){return this.isNeedRefreshGroup(e,t)?"group":this.isNeedRefreshSort(e,t)?"sort":n&&"string"==typeof t&&this.isNeedRefreshFilter(e,t,n,r)?"filter":""}},{key:"emitBeforeRefresh",value:function(e,t,n,r){this._onBeforeRefresh.emit({type:e,commandName:t,params:n,action:r})}},{key:"emitAfterRefresh",value:function(e){this._onAfterRefresh.emit({type:e})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vA(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function mA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}dA([Ks(_j)],pA.prototype,"_groupService",2),dA([Ks(nD)],pA.prototype,"_sortService",2),dA([Ks(hD)],pA.prototype,"_filterService",2),dA([Ks(Cx)],pA.prototype,"_fieldRegistry",2),dA([Ks(fx)],pA.prototype,"_model",2),dA([Ts()],pA.prototype,"destroy",1),pA=dA([Gs()],pA);var yA=Object.defineProperty,bA=Object.getOwnPropertyDescriptor,wA=function(e,t,n,r){for(var o,i=r>1?void 0:r?bA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yA(t,n,i),i},_A=function(){return Ew((function e(){_w(this,e)}),[{key:"setActiveView",value:function(e){var t=this,n=this._viewService.setActiveView(e),r=function(){t._viewService.refresh(e),t._refreshEventService.emitAfterRefresh(fA.ACTIVE_VIEW)};return globalThis.localStorage.debugPerformance?r():LC((function(){r()})),n}},{key:"createView",value:function(e){return this._viewService.create(e)}},{key:"createViewByType",value:function(e,t){return this._viewService.createByType(e,t)}},{key:"updateView",value:function(e,t){return this._viewService.update(e,t)}},{key:"removeView",value:function(e){return this._viewService.remove(e)}},{key:"copyView",value:function(e,t){return this._viewService.copy(e,t)}},{key:"updateViewConfig",value:function(e,t){return this._viewConfigService.update(e,t)}},{key:"updateViewOrder",value:function(e,t){this._viewService.updateOrder(e,t)}},{key:"updateRecordOrder",value:function(e,t,n,r,o){this._viewRecordService.updateOrder(e,t,n,r,o),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}},{key:"updateRecord",value:function(e,t){this._recordService.update(e,t)}},{key:"updateFieldOrder",value:function(e,t,n){this._viewFieldService.updateOrder(e,t,n)}},{key:"updateFieldOptionOrder",value:function(e,t,n){this._fieldService.updateFieldOptionOrder(e,t,n)}},{key:"createFieldOption",value:function(e,t,n){return this._fieldService.createFieldOption(e,t,n)}},{key:"updateFieldOption",value:function(e,t){if(t.users){var n=this._readService.getFieldOption(e);if(0===t.users.length)return void this.removeFieldOption(e);var r=this._viewService.getActiveView();if(!r)return;var o=this._readService.getFieldOptionCells(r.get("uuid"),null==n?void 0:n.toJSON()),i=null==o?void 0:o.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:t.users||[],fieldType:e.fieldType,uuid:e.uuid}})),a=this._cellService.keyValue({fieldId:t.field_uuid,value:gw(t.users)});return this.updateMentionFieldOptionId(e,a||""),void this.bulkSetCell(i)}this._fieldService.updateFieldOption(e,t)}},{key:"updateMentionFieldOptionId",value:function(e,t){this._fieldService.updateMentionFieldOptionId(e,t)}},{key:"createSort",value:function(e,t,n){return this._sortService.create(e,t,n)}},{key:"removeSort",value:function(e){return this._sortService.remove(e)}},{key:"updateSort",value:function(e,t,n){return this._sortService.update(e,t,n)}},{key:"refreshSort",value:function(e){return this._sortService.refresh(e)}},{key:"createGroup",value:function(e,t){this._groupService.create(e,t)}},{key:"removeGroup",value:function(e){this._groupService.remove(e)}},{key:"updateGroup",value:function(e,t){return this._groupService.update(e,t)}},{key:"createFilter",value:function(e,t){return this._filterService.create(e,t)}},{key:"removeFilter",value:function(e){return this._filterService.remove(e)}},{key:"updateFilter",value:function(e,t){this._filterService.update(e,t)}},{key:"refreshFilter",value:function(e){this._filterService.refresh(e)}},{key:"createField",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,o=e.sourceFieldId,i=e.direction,a=this._viewFieldService.create({viewId:t,field:n,viewField:r,sourceFieldId:o,direction:i});return this.refreshView(),a}},{key:"copyField",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceFieldId;return this._viewFieldService.copyField({viewId:t,uuid:n,sourceFieldId:r})}},{key:"changeFieldType",value:function(e,t,n,r){var o=this;if(r=r||this._readService.getFieldCells(e),this._fieldService.changeFieldType(e,t,n,r),n!==HC.SELECT||n!==HC.MENTION){var i=this._readService.getViews(),a=Z_(this._readService.getAllFields(),(function(e){return e.get("type")===HC.SELECT||e.get("type")===HC.MENTION}));i.forEach((function(t){var n=o._readService.getViewGroup(t.get("uuid"));(null==n?void 0:n.group)&&(null==n?void 0:n.group.get("field_uuid"))===e&&t.get("type")===sE.KANBAN&&(a?o.updateGroup(t.get("uuid"),{field_uuid:a.get("uuid"),type:oE.ASC}):o.removeGroup(t.get("uuid")))}))}}},{key:"removeField",value:function(e){var t=this._viewService.getActiveView(),n=t&&this._readService.getAllViewFields(t.get("uuid"));if(n){var r=ek(n,(function(t){return t.get("field_uuid")===e}));if(n&&-1!==r){var o,i=this._readService.getViewFilters(t.get("uuid")),a=this._readService.getViewSort(t.get("uuid")),u=gA(i);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.get("field_uuid")===e&&this.removeFilter(l.get("uuid"));break}}catch(e){u.e(e)}finally{u.f()}(null==a?void 0:a.get("field_uuid"))===e&&this.removeSort(t.get("uuid"));var c=this._readService.getFieldCells(e);this.removeCells(c);var s=this._viewFieldService.remove(e,t.get("uuid"));return this.refreshView(t.get("uuid")),s}}}},{key:"removeFieldOption",value:function(e){var t=this._readService.getFieldOption(e),n=this._readService.getActiveView();if(n){var r=this._readService.getFieldOptionCells(n.get("uuid"),null==t?void 0:t.toJSON()),o=null==r?void 0:r.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:null,fieldType:e.fieldType,uuid:e.uuid}}));this.bulkSetCell(o),this._fieldService.removeFieldOption(e)}}},{key:"createRecord",value:function(e,t,n){return this._viewRecordService.createRecord(e,t,n)}},{key:"createEmptyRecord",value:function(e){var t,n,r=e.viewId,o=e.uuid,i=e.viewRecord,a=e.direction,u=void 0===a?"after":a,l=e.groupItemKey,c=e.filter,s=e.modifierId,d=e.sourceRecordId,f=e.groupOption,p=this._viewService.getActiveView();if(!p)return[];if(!d){var v=this._readService.getOriginViewRecords();d=null==(t=v.get(v.length-1))?void 0:t.get("record_uuid")}if(l){var h,g=gA(this._viewRecordService.getGroupViewRecords(p.get("uuid")));try{for(g.s();!(h=g.n()).done;){var m=h.value.option;if((null==(n=null==m?void 0:m.value)?void 0:n.toJSON)&&(m.value=m.value.toJSON()),this._cellService.groupValue(m)===l){f=m;break}}}catch(e){g.e(e)}finally{g.f()}}return this._viewRecordService.createEmpty({uuid:o,viewId:r,viewRecord:i,sourceRecordId:d,direction:u,groupOption:f,filter:c,modifierId:s})}},{key:"createRecords",value:function(e,t){return this._viewRecordService.createRecords(e,t)}},{key:"copyRecord",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceRecordId,o=e.modifierId;return this._viewRecordService.copyRecord({viewId:t,uuid:n,sourceRecordId:r,modifierId:o})}},{key:"removeRecord",value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=this._viewService.getActiveView();if(n){var r,o=gA(e);try{var i=function(){var e=r.value,o=t._readService.getOriginRecord(e),i=ek(t._readService.getOriginViewRecords(),(function(t){return t.get("record_uuid")===e}));if(!o||i<0)return 1;var a=t._readService.getViewRecordCells(e);t.removeCells(a.toJSON()),t._viewRecordService.remove(n.get("uuid"),e)};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}}},{key:"removeCells",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.map((function(e){return hA(hA({},e),{},{value:""})})),r=Fu(n,"fieldId"),o=Object.values(r),i=0,a=Object.values(o);i<a.length;i++){var u=a[i];this.bulkSetCell(u,t)}}},{key:"removeAllRecords",value:function(e){return this._viewRecordService.removeAll(e)}},{key:"upsertStat",value:function(e,t,n){this._statService.upsert(e,t,n)}},{key:"removeStat",value:function(e,t){this._statService.remove(e,t)}},{key:"setCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((null==(t=this._cellEditService)?void 0:t.provider)&&!this._cellEditService.setCell({cells:[e]}))return;if(this._cellService.setCell(e.fieldId,e.recordId,e),n){var r=this._viewService.getActiveView(),o=this._groupService.getViewGroup(r.get("uuid"));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),e.fieldId)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),e.fieldId)&&this.refreshGroup(r.get("uuid"),null==o?void 0:o.group.toJSON()),this._refreshEventService.isNeedRefreshFilter(r.get("uuid"),e.fieldId,e.recordId,e.value)&&this.refreshFilter(r.get("uuid"))}}},{key:"bulkSetCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((null==(t=this._cellEditService)?void 0:t.provider)&&!this._cellEditService.setCell({cells:e}))return;if(this._cellService.bulkSetCell(e),n){var r=this._viewService.getActiveView(),o=this._groupService.getViewGroup(r.get("uuid")),i=e.map((function(e){return e.fieldId}));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),i)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),i)&&this.refreshGroup(r.get("uuid"),null==o?void 0:o.group.toJSON())}}},{key:"safeSetCell",value:function(e,t,n,r,o){this._valueProcessService.changeCellType(e,t,n,r,o)}},{key:"updateValueOrder",value:function(e){this._cellService.updateOrder(e)}},{key:"updateFieldSize",value:function(e,t,n){this._viewFieldService.update(e,t,"size",n)}},{key:"updateFieldName",value:function(e,t){this._fieldService.update({uuid:e,name:t})}},{key:"updateFieldHidden",value:function(e,t,n){this._viewFieldService.update(e,t,"hidden",n)}},{key:"updateFieldColor",value:function(e,t){this._fieldService.update({uuid:e,color:t})}},{key:"updateFieldConfig",value:function(e,t){this._fieldService.update({uuid:e,config:t})}},{key:"updateFieldProperty",value:function(e){var t,n=e.uuid,r=e.color,o=e.options;Zw(r)||this._fieldService.update({uuid:n,color:r});var i=this._viewService.getActiveView(),a=this._groupService.getViewGroup(i.get("uuid")),u=nk(this._fieldService.getFieldOptions(n),(function(e){return e.get("uuid")})),l=(o||[]).map((function(e){return e.uuid})),c=wu(u,l);this._fieldService.updateFieldOptions(n,o||[],c),(null==(t=null==a?void 0:a.group)?void 0:t.get("field_uuid"))===n&&c.length>0&&this._groupService.refreshGroup(i.get("uuid"),null==a?void 0:a.group.toJSON())}},{key:"refreshGroup",value:function(e,t){this._groupService.refreshGroup(e,t)}},{key:"refreshView",value:function(e){var t;(e||(e=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid")))&&this._viewService.refresh(e)}},{key:"upsertViewShare",value:function(e,t){this._viewShareService.upsertViewShare(e,t)}},{key:"removeViewField",value:function(e,t){this._viewFieldService.remove(t,e,!0),this.refreshView()}},{key:"insertViewField",value:function(e,t){this._viewFieldService.insert(t,e),this.refreshView()}},{key:"updateViewField",value:function(e,t,n){var r=this;Object.keys(n).forEach((function(o){r._viewFieldService.update(e,t,o,n[o])})),this.refreshView()}},{key:"cloneViewField",value:function(e,t,n){this._viewFieldService.clone(e,t,n),this.refreshView()}},{key:"importTable",value:function(e){this._tableService.replaceTable(e)}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._groupService.setGroupItemCollapse(e,t,n,r)}}])}();wA([Ks(oA)],_A.prototype,"_readService",2),wA([Ks(qD)],_A.prototype,"_tableService",2),wA([Ks(rj)],_A.prototype,"_fieldService",2),wA([Ks(hj)],_A.prototype,"_recordService",2),wA([Ks(FD)],_A.prototype,"_viewService",2),wA([Ks(wx)],_A.prototype,"_viewConfigService",2),wA([Ks(Lj)],_A.prototype,"_viewRecordService",2),wA([Ks(OD)],_A.prototype,"_statService",2),wA([Ks(_j)],_A.prototype,"_groupService",2),wA([Ks(nD)],_A.prototype,"_sortService",2),wA([Ks(hD)],_A.prototype,"_filterService",2),wA([Ks(Mx)],_A.prototype,"_cellService",2),wA([Ks(dj)],_A.prototype,"_viewFieldService",2),wA([Ks(Xx)],_A.prototype,"_valueProcessService",2),wA([Ks(KD)],_A.prototype,"_viewShareService",2),wA([Ks(pA)],_A.prototype,"_refreshEventService",2),wA([Ks(qx)],_A.prototype,"_cellEditService",2),_A=wA([Gs()],_A);var kA=dd().register(fx).register(ZD).register(qD).register(Dx).register(pA).register(FD).register(Mx).register(Xx).register(rj).register(Cx).register(hj).register(wx).register(Lj).register(dj).register(KD).register(OD).register(_j).register(Pj).register(Sj).register(nD).register(Jj).register(hD).register(iD).register(cD).register(bD).register(TD).register(hx).register(oA).register(_A),CA=Object.defineProperty,EA=Object.getOwnPropertyDescriptor,OA=function(e,t,n,r){for(var o,i=r>1?void 0:r?EA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&CA(t,n,i),i},SA=function(){return Ew((function e(){_w(this,e)}),[{key:"rules",get:function(){return[]}},{key:"getModelCell",value:function(e,t){return this._model.cellModel.findOne({field_uuid:e,record_uuid:t})}},{key:"updateModelCell",value:function(e,t,n,r,o,i,a){var u=this._model.fieldModel.findOne({uuid:e});e&&t&&this._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:n,key_value:null!=r?r:"",field_type:null==u?void 0:u.get("type"),verify:o,verify_message:i,by_system:!!a})}},{key:"getVerify",value:function(e){if(!e)return{};if(!this.rules||0===this.rules.length)return{};var t=this.rules.reduce((function(t,n){var r;return t+((null==(r=n.validator)?void 0:r.call(n,"",e))?"":n.errorMsg)}),"");return t?{verify:!1,errorMessage:t}:{verify:!0}}},{key:"bulkSetCell",value:function(e){}}])}();OA([Ks(fx)],SA.prototype,"_model",2),SA=OA([$s()],SA);var xA=function(e){return e.core="core",e.kernel="kernel",e.command="command",e.workbench="workbench",e.render="render",e}(xA||{}),jA=Is.defineToken("LoggerToken"),DA=Object.defineProperty,AA=Object.getOwnPropertyDescriptor,RA=function(e,t,n,r){for(var o,i=r>1?void 0:r?AA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DA(t,n,i),i},FA="lakex_table_logs",IA=function(){return Ew((function e(){var t=this;_w(this,e),this._logs=[],this._save=fu((function(){var e;try{null==(e=window.localStorage)||e.setItem(FA,t.safeGetStorageValue())}catch(e){console.error(e)}}),300)}),[{key:"_init",value:function(){var e;this.configuration.registerConfiguration({id:"logger",type:"object",title:"日志",properties:{maxLen:{type:"number",description:"最大日志长度"}}}),this.configuration.registerDefaultValue({"logger.maxLen":200}),"undefined"!=typeof window?window.addEventListener("beforeunload",this._save):void 0!==Vn&&Vn.on("exit",this._save);var t=null==(e=window.localStorage)?void 0:e.getItem(FA);t&&(this._logs=JSON.parse(t))}},{key:"log",value:function(e){var t=this;e.time=i()().format("YYYY-MM-DD HH:mm:ss"),zw((function(){try{var n=t.configuration.getValue("logger.maxLen");t._logs=t._shiftLogs(t._logs,n),e.data&&(e.data=JSON.stringify(e.data)),t._logs.push(e),t._save()}catch(e){console.error(e)}}))}},{key:"_shiftLogs",value:function(e,t){return e.length>=t?(e.shift(),this._shiftLogs(e,t)):e}},{key:"getLogs",value:function(){return this._logs}},{key:"download",value:function(){var e=document.createElement("a");e.download="lakex_table_".concat((new Date).toISOString(),".json"),e.style.display="none",e.href=URL.createObjectURL(new Blob([JSON.stringify(gw(this._logs))],{type:"application/json"})),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"safeGetStorageValue",value:function(){var e=JSON.stringify(this._logs);return e.length>=2621440?(this._logs=this._logs.map((function(e){return"kernelInited"===e.action&&(e.data=""),e})),JSON.stringify(this._logs)):e}},{key:"destroy",value:function(){this._save(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._save):void 0!==Vn&&Vn.off("exit",this._save)}}])}();RA([Ks(lk)],IA.prototype,"configuration",2),RA([Ms()],IA.prototype,"_init",1),RA([Ts()],IA.prototype,"destroy",1),IA=RA([Gs({token:jA})],IA);var PA=dd().register(IA);Is.defineToken("KernelService");var MA=Is.defineToken("KernelPluginContribution"),TA=Is.defineToken("UserContribution"),NA=Object.defineProperty,BA=Object.getOwnPropertyDescriptor,VA=function(e,t,n,r){for(var o,i=r>1?void 0:r?BA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NA(t,n,i),i},LA=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e=this.userProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerUser()}}])}();VA([yd(TA)],LA.prototype,"userProvider",2),LA=VA([Gs()],LA);var zA=Object.defineProperty,UA=Object.getOwnPropertyDescriptor,HA=function(e,t,n,r){for(var o,i=r>1?void 0:r?UA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zA(t,n,i),i},qA=function(){return Ew((function e(){_w(this,e)}),[{key:"provider",get:function(){return this._userRegistry.getProvider()}},{key:"searchUser",value:(t=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(n=this.provider)?void 0:n.searchUser(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"contextUsers",value:(e=UC(jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=this.provider)?void 0:t.contextUsers();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"getCurrentUser",value:function(){var e;return null==(e=this.provider)?void 0:e.getCurrentUser()}}]);var e,t}();HA([Ks(LA)],qA.prototype,"_userRegistry",2),qA=HA([Gs()],qA);var WA=dd().contribution(TA).register(LA).register(qA),$A=function(){return Ew((function e(t,n,r,o,i){_w(this,e),this.kernel=t,this.plugin=n,this.readService=r,this.writeService=o,this.modelService=i}),[{key:"init",value:function(){}},{key:"destroy",value:function(){}}])}(),GA=Is.defineToken("CommandRegistry"),KA=Is.defineToken("CommandExecutor");function YA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return JA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function JA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function XA(e,t,n){return t=dk(t),sk(e,ZA()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ZA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZA=function(){return!!e})()}var QA=Object.defineProperty,eR=Object.getOwnPropertyDescriptor,tR=function(e,t,n,r){for(var o,i=r>1?void 0:r?eR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QA(t,n,i),i},nR=function(e){function t(){var e;return _w(this,t),(e=XA(this,t,arguments))._onDidUndoCommand=e._register(new Lk),e.onDidUndoCommand=e._onDidUndoCommand.event,e._onDidRedoCommand=e._register(new Lk),e.onDidRedoCommand=e._onDidRedoCommand.event,e}return vk(t,e),Ew(t,[{key:"onWillExecuteCommand",get:function(){return this._commandExecutor.onWillExecuteCommand}},{key:"onDidExecuteCommand",get:function(){return this._commandExecutor.onDidExecuteCommand}},{key:"onCancelExecuteCommand",get:function(){return this._commandExecutor.onCancelExecuteCommand}},{key:"onFinishExecuteCommand",get:function(){return this._commandExecutor.onFinishExecuteCommand}},{key:"destroy",value:function(){this._commandRegistry.destroy(),this._commandExecutor.destroy()}},{key:"seal",value:function(){this._commandRegistry.seal()}},{key:"registerCommand",value:function(e,t,n){this._commandRegistry.register(e,t,n)}},{key:"registerCommandHook",value:function(e,t){this._commandRegistry.registerCommandHook(e,t)}},{key:"getCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._commandRegistry.getByName(e,t,n)}},{key:"getCommandHook",value:function(e){return this._commandRegistry.getCommandHooks(e)}},{key:"execCommand",value:function(e,t,n){var r=this,o=this.getCommand(e,n);if(!o)return null;o.beforeExecute&&(t=o.beforeExecute.call(o,t));var i,a=this._commandRegistry.getCommandHooks(e);if(a.length>0){var u,l=YA(a);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.beforeExecute&&(t=c.beforeExecute(t,this._readService))}}catch(e){l.e(e)}finally{l.f()}}return this._logger.log({type:xA.command,action:e,data:t}),this._database.stack.transact((function(){var e;if(i=null==o?void 0:o.execute.call(o,t),a.length>0){var n,u=YA(a);try{for(u.s();!(n=u.n()).done;){var l=n.value;l.afterExecute&&l.afterExecute(null==i?void 0:i.result,t,r._readService)}}catch(e){u.e(e)}finally{u.f()}}o.afterExecute?t=o.afterExecute.call(o,t,null==i?void 0:i.result,r._refreshEventService):(null==(e=o.context)||e.destroy(),o.context=null)})),i}},{key:"execRemoteCommand",value:function(e,t,n,r){var o=this.getCommand(e,r,!0);return o?(n&&(n.modifierId=null==t?void 0:t.uid),this._contentService.setUsers([t]),null==o?void 0:o.execute.call(o,n)):null}},{key:"undo",value:function(){var e;if(!(null==(e=this._database.stack)?void 0:e.canUndo()))return!1;this._database.stack.undo(),this._onDidUndoCommand.emit()}},{key:"redo",value:function(){var e;if(!(null==(e=this._database.stack)?void 0:e.canRedo()))return!1;this._database.stack.redo(),this._onDidRedoCommand.emit()}}])}(bk);tR([Ks(oA)],nR.prototype,"_readService",2),tR([Ks(TD)],nR.prototype,"_contentService",2),tR([Ks(GA)],nR.prototype,"_commandRegistry",2),tR([Ks(KA)],nR.prototype,"_commandExecutor",2),tR([Ks(pA)],nR.prototype,"_refreshEventService",2),tR([Ks(L_)],nR.prototype,"_database",2),tR([Ks(jA)],nR.prototype,"_logger",2),tR([Ts()],nR.prototype,"destroy",1),nR=tR([Gs()],nR);var rR=Object.defineProperty,oR=Object.getOwnPropertyDescriptor,iR=function(e,t,n,r){for(var o,i=r>1?void 0:r?oR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rR(t,n,i),i},aR=function(){return Ew((function e(){_w(this,e),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}),[{key:"destroy",value:function(){var e=this;Object.keys(this._commands).forEach((function(t){e._commands[t].destroy()})),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}},{key:"seal",value:function(){this._isSealed||(this._isSealed=!0,this.initCommand())}},{key:"getByName",value:function(e,t,n){var r=this._commands[e];return r?r=this.trap(e,r,t,n):(console.warn('This command "'.concat(e,'" is not registered')),null)}},{key:"getCommandHooks",value:function(e){return this._commands[e]?this._commandHooks[e]||[]:(console.warn('This command "'.concat(e,'" is not registered')),[])}},{key:"register",value:function(e,t,n){if(this._pool[e])throw new Error("The command ".concat(e," has been registered"));if(this._isSealed)throw new Error("No command can be registered at this stage");this._pool[e]={clazz:t,plugin:n}}},{key:"registerCommandHook",value:function(e,t){this._pool[e]&&(this._commandHooks[e]||(this._commandHooks[e]=[]),this._commandHooks[e].push(t))}},{key:"trap",value:function(e,t,n,r){var o=this,i=t._rawExec||t.execute;return t._rawExec=i,t.execute=new Proxy(t.execute,{apply:function(a,u,l){return o._commandExecutor.exec(e,t,n,r,i,u,l)}}),t}},{key:"initCommand",value:function(){var e=this;Object.keys(this._pool).forEach((function(t){var n=e._pool[t],r=n.clazz,o=n.plugin,i=e.trap(t,new r(e._kernel,o,e._readService,e._writeService,e._modelService),!1,!1);i.init(),e._commands[t]=i}))}}])}();iR([Ks(KA)],aR.prototype,"_commandExecutor",2),iR([Ks(oA)],aR.prototype,"_readService",2),iR([Ks(_A)],aR.prototype,"_writeService",2),iR([Ks(oO)],aR.prototype,"_modelService",2),aR=iR([Gs({token:GA})],aR);var uR=function(){return Ew((function e(t,n,r){_w(this,e),this.commandExecutor=t,this.commandName=n,this.argArray=r,this.startTime=0,this.usedTime=0}),[{key:"destroy",value:function(){delete this._remote,delete this._user,this.startTime=0,this.usedTime=0}},{key:"isRemote",get:function(){return this._remote}},{key:"user",get:function(){return this._user}},{key:"setRemote",value:function(e){this._remote=e}},{key:"setUser",value:function(e){this._user=e}},{key:"setStartTime",value:function(e){this.startTime=e}},{key:"setUsedTime",value:function(e){this.usedTime=e}},{key:"cancel",value:function(){}}])}(),lR=function(){return Ew((function e(t){_w(this,e),this.notify=t}),[{key:"destroy",value:function(){var e=this;delete e.notify,delete e._operations,delete e.notify}},{key:"execute",value:function(e){var t,n,r,o,i,a,u,l,c;null==(n=null==(t=this.notify)?void 0:t.beforeExecute)||n.call(t,this);try{c=e(),null==(o=null==(r=this.notify)?void 0:r.afterExecute)||o.call(r,this)}catch(e){return console.error(e),this.rollback(),null==(a=null==(i=this.notify)?void 0:i.completed)||a.call(i,this,!1),{isSuccess:!1,error:e}}return null==(l=null==(u=this.notify)?void 0:u.completed)||l.call(u,this,!0),{isSuccess:!0,result:c}}},{key:"rollback",value:function(){}}])}();function cR(e,t,n){return t=dk(t),sk(e,sR()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function sR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sR=function(){return!!e})()}var dR=Object.defineProperty,fR=Object.getOwnPropertyDescriptor,pR=function(e,t,n,r){for(var o,i=r>1?void 0:r?fR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dR(t,n,i),i},vR=function(e){function t(){var e;return _w(this,t),(e=cR(this,t,arguments))._onWillExecuteCommand=e._register(new Lk),e.onWillExecuteCommand=e._onWillExecuteCommand.event,e._onDidExecuteCommand=e._register(new Lk),e.onDidExecuteCommand=e._onDidExecuteCommand.event,e._onCancelExecuteCommand=e._register(new Lk),e.onCancelExecuteCommand=e._onCancelExecuteCommand.event,e._onFinishExecuteCommand=e._register(new Lk),e.onFinishExecuteCommand=e._onFinishExecuteCommand.event,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"_process",value:function(e,t){var n=this,r=new lR({beforeExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onWillExecuteCommand.emit({context:e})},afterExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onDidExecuteCommand.emit({context:e})},completed:function(t,r){if(!r)return n._onCancelExecuteCommand.emit({changed:!0});e.setUsedTime(+new Date-e.startTime),n._onFinishExecuteCommand.emit({context:e})}}),o=r.execute(t);return r.destroy(),o}},{key:"execCommand",value:function(e,t){return this._process(e,t)}},{key:"exec",value:function(e,t,n,r,o,i,a){var u=this,l=new uR(this,e,a);return l.setStartTime(+new Date),this.execCommand(l,(function(){return l.setRemote(r),l.setUser(u.readService.currentUser),t.context=l,o.call.apply(o,[i].concat(gw(a)))}))}}])}(bk);pR([Ks(oA)],vR.prototype,"readService",2),pR([Ks(_A)],vR.prototype,"writeService",2),pR([Ks(oO)],vR.prototype,"modelService",2),pR([Ts()],vR.prototype,"destroy",1),vR=pR([Gs({token:KA})],vR);var hR=dd().register(vR).register(aR).register(nR),gR=function(e){return e.CREATE="create",e.DELETE="delete",e.READ="read",e.UPDATE="update",e.EDIT="edit",e.TRANSFORM="transform",e}(gR||{}),mR=function(e){return e.TABLE="table",e.FIELD="field",e.RECORD="record",e}(mR||{}),yR=Object.defineProperty,bR=Object.getOwnPropertyDescriptor,wR=function(e,t,n,r){for(var o,i=r>1?void 0:r?bR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yR(t,n,i),i},_R=function(){return Ew((function e(){_w(this,e),this._abilityMap=new Map}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability",type:"object",title:"权限"})}},{key:"getAbilities",value:function(){return Array.from(this._abilityMap.values())}},{key:"getAbility",value:function(e){return this._abilityMap.get(e)}},{key:"registerAbility",value:function(e){this._abilityMap.set(e.id,e)}}])}();function kR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return CR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function CR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}wR([Ks(lk)],_R.prototype,"_configuration",2),wR([Ms()],_R.prototype,"registerConfiguration",1),_R=wR([Gs()],_R);var ER=Object.defineProperty,OR=Object.getOwnPropertyDescriptor,SR=function(e,t,n,r){for(var o,i=r>1?void 0:r?OR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ER(t,n,i),i},xR=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e,t,n=kR(this._abilityRegistry.getAbilities());try{for(n.s();!(t=n.n()).done;){var r=t.value;null==(e=r.init)||e.call(r)}}catch(e){n.e(e)}finally{n.f()}}}])}();SR([Ks(_R)],xR.prototype,"_abilityRegistry",2),xR=SR([Gs()],xR);var jR=Object.defineProperty,DR=Object.getOwnPropertyDescriptor,AR=function(e,t,n,r){for(var o,i=r>1?void 0:r?DR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jR(t,n,i),i},RR=function(){return Ew((function e(){_w(this,e)}),[{key:"isReadonly",value:function(e){var t=this._abilityRegistry.getAbility(mR.TABLE);if(!t.read()||t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.read.apply(n,o)&&!n.update.apply(n,o)}},{key:"can",value:function(e,t){for(var n,r,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(e===gR.CREATE)return this.canCreate.apply(this,[t].concat(i));if(e===gR.DELETE)return this.canDelete.apply(this,[t].concat(i));if(e===gR.READ)return this.canRead.apply(this,[t].concat(i));if(e===gR.UPDATE)return this.canUpdate.apply(this,[t].concat(i));if(!t)return!1;var u=this._abilityRegistry.getAbility(t);return!!u&&!!(null==(r=u[e])?void 0:(n=r).call.apply(n,[u].concat(i)))}},{key:"canCreate",value:function(e){var t=this._abilityRegistry.getAbility(mR.TABLE);if(!e||e===mR.TABLE)return t.create();if(!t.create()||!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.create.apply(n,o)}},{key:"canDelete",value:function(e){var t=this._abilityRegistry.getAbility(mR.TABLE);if(!e||e===mR.TABLE)return t.delete();if(!t.delete()||!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.delete.apply(n,o)}},{key:"canRead",value:function(e){var t=this._abilityRegistry.getAbility(mR.TABLE);if(!e||e===mR.TABLE)return t.read();if(!t.read())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.read.apply(n,o)}},{key:"canUpdate",value:function(e){var t=this._abilityRegistry.getAbility(mR.TABLE);if(!e||e===mR.TABLE)return t.update();if(!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.update.apply(n,o)}}])}();AR([Ks(_R)],RR.prototype,"_abilityRegistry",2),RR=AR([Gs()],RR);var FR=Object.defineProperty,IR=Object.getOwnPropertyDescriptor,PR=function(e,t,n,r){for(var o,i=r>1?void 0:r?IR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FR(t,n,i),i},MR=function(){return Ew((function e(){_w(this,e),this.id=mR.TABLE}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.table",type:"object",title:"table表权限",properties:{create:{type:"boolean",description:"新增权限，控制能否新增字段或记录"},delete:{type:"boolean",description:"删除权限，控制能否删除字段或记录"},read:{type:"boolean",description:"可读权限，控制字段或记录是否可读"},update:{type:"boolean",description:"更新权限，控制能否更新字段或记录，能否新增、删除、复制、拖拽视图，能否拖拽记录、字段"}}}),this._configuration.registerDefaultValue({"ability.table.create":!0,"ability.table.delete":!0,"ability.table.read":!0,"ability.table.update":!0})}},{key:"init",value:function(){}},{key:"getAbilities",value:function(){return this._configuration.getValue("ability.table")}},{key:"create",value:function(){return this._configuration.getValue("ability.table.create")}},{key:"delete",value:function(){return this._configuration.getValue("ability.table.delete")}},{key:"read",value:function(){return this._configuration.getValue("ability.table.read")}},{key:"update",value:function(){return this._configuration.getValue("ability.table.update")}}])}();PR([Ks(lk)],MR.prototype,"_configuration",2),PR([Ms()],MR.prototype,"registerConfiguration",1),MR=PR([Gs()],MR);var TR=Object.defineProperty,NR=Object.getOwnPropertyDescriptor,BR=function(e,t,n,r){for(var o,i=r>1?void 0:r?NR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TR(t,n,i),i},VR=function(){return Ew((function e(){_w(this,e),this.id=mR.FIELD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.field",type:"object",title:"field表权限",properties:{create:{type:"boolean",description:"字段新增权限"},delete:{type:"boolean",description:"字段删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除字段列表"},read:{type:"boolean",description:"字段可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读字段列表"},update:{type:"boolean",description:"字段更新权限，控制能否修改字段名称、新增字段选项"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新字段列表"},transform:{type:"boolean",description:"字段类型转换权限"},transformAllowList:{type:"array",items:{type:"string"},description:"可类型转换字段列表"},edit:{type:"boolean",description:"字段内容编辑权限"},editAllowList:{type:"boolean",description:"可编辑字段列表"}}}),this._configuration.registerDefaultValue({"ability.field.create":!0,"ability.field.delete":!0,"ability.field.read":!0,"ability.field.update":!0,"ability.field.transform":!0,"ability.field.edit":!0,"ability.field.readAllowList":["*"],"ability.field.editAllowList":["*"],"ability.field.updateAllowList":["*"],"ability.field.deleteAllowList":["*"],"ability.field.transformAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(e){if(e&&this._fieldRegistry.getValueField(e.get("type")).createDisable)return!1;return this._configuration.getValue("ability.field.create")}},{key:"delete",value:function(e){if(this._fieldRegistry.getValueField(e.get("type")).deleteDisable)return!1;var t=this._configuration.getValue("ability.field.delete"),n=this._configuration.getValue("ability.field.deleteAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.field.read"),n=this._configuration.getValue("ability.field.readAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.field.update"),n=this._configuration.getValue("ability.field.updateAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"transform",value:function(e){var t=this._fieldRegistry.getValueField(e.get("type"));if(null==t?void 0:t.transformDisable)return!1;var n=this._configuration.getValue("ability.field.transform"),r=this._configuration.getValue("ability.field.transformAllowList");return!0===n?this.isAllow(e.get("uuid"),r):n}},{key:"edit",value:function(e){if(this._fieldRegistry.getValueField(e.get("type")).editDisable)return!1;var t=this._configuration.getValue("ability.field.edit"),n=this._configuration.getValue("ability.field.editAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}}])}();BR([Ks(Cx)],VR.prototype,"_fieldRegistry",2),BR([Ks(lk)],VR.prototype,"_configuration",2),BR([Ms()],VR.prototype,"registerConfiguration",1),VR=BR([Gs()],VR);var LR=Object.defineProperty,zR=Object.getOwnPropertyDescriptor,UR=function(e,t,n,r){for(var o,i=r>1?void 0:r?zR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LR(t,n,i),i},HR=function(){return Ew((function e(){_w(this,e),this.id=mR.RECORD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.record",type:"object",title:"record表权限",properties:{create:{type:"boolean",description:"记录新增权限"},delete:{type:"boolean",description:"记录删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除记录列表"},read:{type:"boolean",description:"记录可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读记录列表"},update:{type:"boolean",description:"记录更新权限，控制能否修改记录描述"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新记录列表"},edit:{type:"boolean",description:"记录内容编辑权限"},editAllowList:{type:"array",items:{type:"string"},description:"可编辑记录列表"}}}),this._configuration.registerDefaultValue({"ability.record.create":!0,"ability.record.delete":!0,"ability.record.read":!0,"ability.record.update":!0,"ability.record.edit":!0,"ability.record.readAllowList":["*"],"ability.record.editAllowList":["*"],"ability.record.updateAllowList":["*"],"ability.record.deleteAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(){return this._configuration.getValue("ability.record.create")}},{key:"delete",value:function(e){var t=this._configuration.getValue("ability.record.delete"),n=this._configuration.getValue("ability.record.deleteAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.record.read"),n=this._configuration.getValue("ability.record.readAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.record.update"),n=this._configuration.getValue("ability.record.updateAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"edit",value:function(e){var t=this._configuration.getValue("ability.record.edit"),n=this._configuration.getValue("ability.record.editAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}}])}();UR([Ks(lk)],HR.prototype,"_configuration",2),UR([Ms()],HR.prototype,"registerConfiguration",1),HR=UR([Gs()],HR);var qR=dd().register(xR).register(MR).register(VR).register(HR).register(_R).register(RR);function WR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$R(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function $R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function GR(e,t,n){return t=dk(t),sk(e,KR()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function KR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KR=function(){return!!e})()}var YR=Object.defineProperty,JR=Object.getOwnPropertyDescriptor,XR=function(e,t,n,r){for(var o,i=r>1?void 0:r?JR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YR(t,n,i),i},ZR=function(e){function t(){var e;return _w(this,t),(e=GR(this,t,arguments))._onDataLoaded=e._register(new Lk),e.onDataLoaded=e._onDataLoaded.event,e._onDataChanged=e._register(new Lk),e.onDataChanged=e._onDataChanged.event,e._onCollabUsersChange=e._register(new Lk),e.onCollabUsersChange=e._onCollabUsersChange.event,e._isFirstLoad=!0,e._isRecordFirstLoad=!0,e.hooks={init:new _C,destroy:new kC},e}return vk(t,e),Ew(t,[{key:"init",value:(n=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,this.registerAbility(this._tableAbility),this.registerAbility(this._fieldAbility),this.registerAbility(this._recordAbility),n.get(xR).init(),this._listenEvent(),this._initPlugins(),e.next=9,this.hooks.init.promise();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initCommandHooks",value:function(e){var t,n=WR(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._commandService.registerCommandHook(r.commandName,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_initPlugins",value:function(){var e=this;this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)})),this._commandService.seal()}},{key:"_listenEvent",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(){e._onDataChanged.emit("command-execute")})),this._database.stack.onUndo((function(){e._onDataChanged.emit("stack-undo")})),this._database.stack.onRedo((function(){e._onDataChanged.emit("stack-redo")})),this._refreshEventService.onAfterRefresh((function(){e._onDataChanged.emit("refresh-event")}))}},{key:"registerField",value:function(e){this._fieldRegistry.registerField(e)}},{key:"registerAbility",value:function(e){this._abilityRegistry.registerAbility(e)}},{key:"setContent",value:function(e){var t=this;e&&(this._lifeService.status<Dw.WorkbenchInited?this._lifeService.when(Dw.WorkbenchInited,(function(){t._loadData(e)})):this._loadData(e))}},{key:"_loadData",value:function(e){this._isFirstLoad&&(this._lifeService.status=Dw.Starting);var t=(e="string"==typeof e?JSON.parse(e):Object.assign({},e)).records,n=(null==t?void 0:t.map((function(e){return e.content?{recordId:e.uuid,content:e.content}:null})).filter((function(e){return!!e})))||[];delete e.records,n.length>0&&(e.contents=n),this._kernelModel.initData(e),this._isFirstLoad&&(this._lifeService.status=Dw.Ready,this._logger.log({type:xA.kernel,action:"dataReady"})),this._onDataLoaded.emit("loadedData"),t&&this.setRecords(t),this._isFirstLoad=!1}},{key:"setRecords",value:function(e){var t=this;e&&(this._lifeService.status<Dw.Ready?this._lifeService.when(Dw.Ready,(function(){t._loadRecords(e)})):this._loadRecords(e))}},{key:"_loadRecords",value:function(e){this._isRecordFirstLoad?(this._lifeService.status=Dw.RecordInit,this._kernelModel.initRecords(e),this._lifeService.status=Dw.RecordReady,this._isRecordFirstLoad=!1,this._logger.log({type:xA.kernel,action:"recordReady",data:[]})):this._kernelModel.initRecords(e),this._onDataLoaded.emit("loadedRecords")}},{key:"setUsers",value:function(e){e&&this._kernelModel.initUsers(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this.hooks.destroy.call()}}]);var n}(bk);function QR(e,t,n){return t=dk(t),sk(e,eF()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function eF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eF=function(){return!!e})()}XR([yd(MA)],ZR.prototype,"kernelPluginProvider",2),XR([Ks(nR)],ZR.prototype,"_commandService",2),XR([Ks(L_)],ZR.prototype,"_database",2),XR([Ks(ZD)],ZR.prototype,"_kernelModel",2),XR([Ks(pA)],ZR.prototype,"_refreshEventService",2),XR([Ks(Aw)],ZR.prototype,"_lifeService",2),XR([Ks(Cx)],ZR.prototype,"_fieldRegistry",2),XR([Ks(_R)],ZR.prototype,"_abilityRegistry",2),XR([Ks(MR)],ZR.prototype,"_tableAbility",2),XR([Ks(VR)],ZR.prototype,"_fieldAbility",2),XR([Ks(HR)],ZR.prototype,"_recordAbility",2),XR([Ks(jA)],ZR.prototype,"_logger",2),XR([Ts()],ZR.prototype,"destroy",1),ZR=XR([Gs()],ZR);var tF=Object.defineProperty,nF=Object.getOwnPropertyDescriptor,rF=function(e){function t(){var e;return _w(this,t),(e=QR(this,t,arguments))._onError=e._register(new Lk),e.onError=e._onError.event,e}return vk(t,e),Ew(t,[{key:"error",value:function(e){this._onError.emit(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function oF(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iF(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function iF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aF(e,t,n){return t=dk(t),sk(e,uF()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function uF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uF=function(){return!!e})()}rF=function(e,t,n,r){for(var o,i=r>1?void 0:r?nF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tF(t,n,i),i}([Gs()],rF),hd.config({lifecycle:Is.Lifecycle.singleton});var lF=function(e){function t(e){var n;return _w(this,t),(n=aF(this,t))._onFinishExecuteCommand=n._register(new Lk),n.onFinishExecuteCommand=n._onFinishExecuteCommand.event,n._options=e,n.container=e.container||new hd,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:xA.kernel,action:"kernelInited",data:{body:e.data,settings:e.settings}}),n}return vk(t,e),Ew(t,[{key:"onDataLoaded",get:function(){return this.kernelService.onDataLoaded}},{key:"start",value:function(){this._options.data&&this.kernelService.setContent(this._options.data)}},{key:"init",value:function(){var e=this;this.container.get(ZD).init();var t=this.container.get(qA).getCurrentUser();t&&this.container.get(hx).setCurrentUser(t),this.kernelService.init({container:this.container}),this._options.commandHooks&&this.kernelService.initCommandHooks(this._options.commandHooks),this.container.get(nR).onFinishExecuteCommand((function(t){e._onFinishExecuteCommand.emit(t)})),this._lifeService.status=Dw.Inited}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this.kernelService.destroy(),this.logService.destroy(),this.unregisterPlugins(this.container)}},{key:"_logger",get:function(){return this.container.get(jA)}},{key:"_loadCoreServices",value:function(){var e=this;this._lifeService=this.container.get(Aw),this.container.get(pE),this.container.get(FD),this.kernelService=this.container.get(ZR),this.logService=this.container.get(rF),this.logService.onError((function(t){var n,r;null==(r=(n=e._options).onError)||r.call(n,t)}))}},{key:"getContent",value:function(){return this.container.get(TD).getContent()}},{key:"setContent",value:function(e){this.kernelService.setContent(e)}},{key:"setRecords",value:function(e){this.kernelService.setRecords(e)}},{key:"setUsers",value:function(e){this.kernelService.setUsers(e)}},{key:"_registerContribs",value:function(e){if(e){var t,n=oF(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(SC),cF=dd().contribution(MA).register(ZR).register(rF),sF=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e.WAITING="waiting",e}(sF||{});function dF(e,t,n){return t=dk(t),sk(e,fF()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function fF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fF=function(){return!!e})()}var pF=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _w(this,t),(e=dF(this,t))._retryCount=0,e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new Lk),e.onDidStatusChange=e._onDidStatusChange.event,e.name=n.name,e._interval=n.interval||1e3,e._maxRetries=n.maxRetries||3,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this._job=null,this._retryCount=null,this._isRuning=null,this._lastRunAt=null,this._isStop=null,clearTimeout(this._timer),this._timer=null}},{key:"addJob",value:function(e){this._job=e}},{key:"hasRuningJob",value:function(){return!this._isStop}},{key:"run",value:(n=UC(jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isStop&&this._job){e.next=2;break}return e.abrupt("return");case 2:if(!(this._retryCount>=this._maxRetries)){e.next=4;break}return e.abrupt("return");case 4:if(!this._isRuning){e.next=6;break}return e.abrupt("return");case 6:if(t=+new Date,!(this._lastRunAt&&t-this._lastRunAt<this._interval)){e.next=9;break}return e.abrupt("return");case 9:return this._isRuning=!0,this._onDidStatusChange.emit(sF.RUNNING),e.prev=11,e.next=14,this._job();case 14:e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(11),console.error(e.t0),this._retryCount++,e.next=22,this.run();case 22:return e.abrupt("return");case 23:this._isRuning=!1,this._retryCount=0,this._lastRunAt=+new Date;case 26:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(){return n.apply(this,arguments)})},{key:"start",value:function(){var e=this;this.run().then((function(){e._timer=setTimeout(UC(jk.mark((function t(){return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.start();case 1:case"end":return t.stop()}}),t)}))),e._interval)}))}},{key:"stop",value:function(){this._isStop=!0,clearTimeout(this._timer),this._onDidStatusChange.emit(sF.ABORTED)}},{key:"resume",value:function(){this._isStop=!1,this.start()}}]);var n}(bk);function vF(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hF(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gF(e,t,n){return t=dk(t),sk(e,mF()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function mF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mF=function(){return!!e})()}var yF=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _w(this,t),(e=gF(this,t))._jobs=[],e._penddingJobs=[],e._runingJobs=[],e._successJobs=[],e._errorJobs=[],e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new Lk),e.onDidStatusChange=e._onDidStatusChange.event,e.stop=function(){e._isStop=!0,e._onDidStatusChange.emit({status:sF.ABORTED})},e.resume=function(){e._isStop&&(e._isStop=!1,e.start())},e.name=n.name,e._parallel=n.parallel||5,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this._jobs=[],this._penddingJobs=[],this._runingJobs=[],this._successJobs=[],this._errorJobs=[],this._isRuning=!1,this._isStop=!1}},{key:"getJob",value:function(e){return this._jobs.find((function(t){return t.id===e}))}},{key:"getSuccessJobs",value:function(){var e=this;return this._successJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"getRunningJobs",value:function(){var e=this;return this._runingJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"hasRuningJob",value:function(){return!this._isStop&&!!this._runingJobs.length}},{key:"hasPenddingJob",value:function(){return!!this._penddingJobs.length}},{key:"runJob",value:function(e){var t=this,n=this._jobs.find((function(t){return t.id===e}));if(n&&!this._runingJobs.find((function(t){return t===e}))&&!this._successJobs.find((function(t){return t===e}))){this._errorJobs.find((function(t){return t===e}))&&qu(this._errorJobs,(function(t){return t===e})),qu(this._penddingJobs,(function(t){return t===e})),this._runingJobs.push(e),n.runAt=new Date;var r=function(){n.endAt=new Date,n.spend=Number(n.endAt)-Number(n.runAt),n.runCount=n.runCount?n.runCount+1:1,qu(t._runingJobs,(function(t){return t===e})),t._run()};try{n.handler({jobId:e,onSuccess:function(){n.status=sF.SUCCESS,t._onDidStatusChange.emit({status:sF.SUCCESS,jobId:n.id}),t._successJobs.push(n.id),r()},onError:function(){n.status=sF.ERROR,t._errorJobs.push(n.id),r()},onProcess:function(e){n.percent=e,t._onDidStatusChange.emit({status:sF.RUNNING,jobId:n.id,percent:e})}})}catch(e){console.error(e)}}}},{key:"_run",value:function(){if(!this._isStop){var e=this._runingJobs.length;if(e<this._parallel){var t=(i=this._penddingJobs,a=0,u=this._parallel-e,(l=null==i?0:i.length)?(u&&"number"!=typeof u&&po(i,a,u)?(a=0,u=l):(a=null==a?0:wr(a),u=void 0===u?l:wr(u)),Ei(i,a,u)):[]);if(0===t.length)return this._isRuning=!1,void this._onDidStatusChange.emit({status:sF.WAITING});var n,r=vF(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._isRuning=!0,this.runJob(o)}}catch(e){r.e(e)}finally{r.f()}}else{var i,a,u,l;0===e&&(this._isRuning=!1,this._onDidStatusChange.emit({status:sF.WAITING}))}}}},{key:"start",value:function(){this._onDidStatusChange.emit({status:sF.PENDING}),this._run()}},{key:"addJob",value:function(e,t){1===arguments.length?(t=e,e=qw(16)):"string"==typeof e&&(qu(this._jobs,(function(t){return t===e})),qu(this._penddingJobs,(function(t){return t===e})));var n={id:e,status:sF.PENDING,handler:t};return this._jobs.push(n),this._penddingJobs.push(n.id),this._isRuning||this._isStop||this.start(),n}},{key:"removeSuccessJob",value:function(e){qu(this._successJobs,(function(t){return t===e}))}}])}(bk);function bF(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wF(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function wF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _F=Object.defineProperty,kF=Object.getOwnPropertyDescriptor,CF=function(e,t,n,r){for(var o,i=r>1?void 0:r?kF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_F(t,n,i),i},EF=function(){return Ew((function e(){_w(this,e),this._queueTasks=[]}),[{key:"init",value:function(){var e=this;this.beforeUnload=VC.onBeforeUnLoad((function(t){var n,r=bF(e._queueTasks);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.hasRuningJob())return t.preventDefault(),t.returnValue="",Lw("还有 ".concat(o.name," 正在运行中，确认要离开页面吗."))}}catch(e){r.e(e)}finally{r.f()}}))}},{key:"createRepeatTask",value:function(e){return new pF(e)}},{key:"createQueueTask",value:function(e){var t=new yF(e);return this._queueTasks.push(t),t}},{key:"destroy",value:function(){var e;null==(e=this.beforeUnload)||e.destroy()}}])}();CF([Ms()],EF.prototype,"init",1),CF([Ts()],EF.prototype,"destroy",1),EF=CF([Gs()],EF);var OF=dd().register(EF),SF=Is.defineToken("LinkDetailContribution"),xF=Object.defineProperty,jF=Object.getOwnPropertyDescriptor,DF=function(e,t,n,r){for(var o,i=r>1?void 0:r?jF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xF(t,n,i),i},AF=function(){return Ew((function e(){_w(this,e)}),[{key:"getLinkDetailProvider",value:function(){var e=this.linkDetailProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerLinkDetail()}}])}();DF([yd(SF)],AF.prototype,"linkDetailProvider",2),AF=DF([Gs()],AF);var RF=Object.defineProperty,FF=Object.getOwnPropertyDescriptor,IF=function(e,t,n,r){for(var o,i=r>1?void 0:r?FF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&RF(t,n,i),i},PF=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=this;this._queueTask=new yF({name:"获取连接详情任务队列",parallel:1}),this.timerId=setInterval((function(){var t;null==(t=e._queueTask)||t.resume()}),1e3)}},{key:"addUpdateLinkDetailJob",value:function(e){var t;null==(t=this._queueTask)||t.addJob(function(){var t=UC(jk.mark((function t(n){return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",n.onError(t.t0));case 9:n.onSuccess();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"getLinkDetail",value:(e=UC(jk.mark((function e(t){var n,r,o;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=null==(r=null==(n=this._linkRegistry.getLinkDetailProvider())?void 0:n.getLinkDetail)?void 0:r.call(n,t),e.abrupt("return",o);case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(t){return e.apply(this,arguments)})},{key:"getIconByDetail",value:function(e){var t=(null==e?void 0:e.image)||"";return e.target_type&&(t="yuqueicon:".concat(e.target_type,":").concat(e.type)),t}},{key:"destroy",value:function(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}}]);var e}();function MF(e,t,n){return t=dk(t),sk(e,TF()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function TF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TF=function(){return!!e})()}IF([Ks(AF)],PF.prototype,"_linkRegistry",2),IF([Ms()],PF.prototype,"init",1),IF([Ts()],PF.prototype,"destroy",1),PF=IF([Gs()],PF);var NF=Object.defineProperty,BF=Object.getOwnPropertyDescriptor,VF=function(e,t,n,r){for(var o,i=r>1?void 0:r?BF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NF(t,n,i),i},LF=function(e){function t(){return _w(this,t),MF(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return LF.type}},{key:"baseType",get:function(){return LF.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return!(!Zw(t)&&null!=t)||y_(t.src||t)},errorMsg:Lw("输入格式有误")}]}},{key:"validate",value:function(e){if(!e)return!0;var t=e.name,n=e.src;return!(!t||!n)&&((null==t?void 0:t.length)>LF.MAX_LENGTH&&(e.name=t.substring(0,LF.MAX_LENGTH)),!!N_(n))}},{key:"transform",value:function(e){var t;if(!e)return null;if("string"==typeof e){if(N_(e))return{value:{name:e,src:e}};var n;try{n=new URL(e)}catch(r){try{n=new URL("http://"+e)}catch(n){return{value:{name:e,src:(null==(t=globalThis.location)?void 0:t.href)||"https://www.yuque.com"}}}}var r=n.host.split(".");return 1===r.length&&(n.host=r[0]+".com"),{value:{name:e,src:n.toString().replace(/\/$/gi,"")}}}return{value:{name:e.name||"",src:e.src||""}}}},{key:"formatted",value:function(e){return null==e?"":e.name||e.src||""}},{key:"keyValue",value:function(e){return e&&e.name&&e.src?"".concat(e.name,"|").concat(e.src):""}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r={name:(null==n?void 0:n.get("name"))||"",src:(null==n?void 0:n.get("src"))||"",icon:(null==n?void 0:n.get("icon"))||""},o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"_asyncUpdateLinkDetail",value:function(e,t,n){var r=this;n.icon||this._linkService.addUpdateLinkDetailJob(UC(jk.mark((function o(){var i,a,u,l,c;return jk.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r._linkService.getLinkDetail(n.src);case 2:if((a=o.sent)&&a.title){o.next=6;break}return r._database.stack.transact((function(){r.model.upsert({field_uuid:e,record_uuid:t},{icon:null})})),o.abrupt("return");case 6:if(u=r.getCell(e,t)){o.next=9;break}return o.abrupt("return");case 9:if((null==(i=u.value)?void 0:i.src)===n.src){o.next=11;break}return o.abrupt("return");case 11:if(a.target_type||!n.name){o.next=13;break}return o.abrupt("return");case 13:l=a.title,n.name&&n.name!==n.src&&(l=n.name),c=r._linkService.getIconByDetail(a),r._database.stack.transact((function(){r.model.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,name:l,icon:c}),r._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:r.formatted({name:l,src:n.src,icon:n.icon})})})),r._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:r.getCell(e,t)});case 18:case"end":return o.stop()}}),o)}))))}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,name:n.value.name||n.value.src,src:n.value.src,icon:n.value.icon}),this.upsertModelCell(e,t,n.value),this._asyncUpdateLinkDetail(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r,o,i,a;return t.upsertModelCell(n,e.recordId,e.value),t._asyncUpdateLinkDetail(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,name:(null==(r=e.value)?void 0:r.name)||(null==(o=e.value)?void 0:o.src),src:null==(i=e.value)?void 0:i.src,icon:null==(a=e.value)?void 0:a.icon}})))}}])}(SA);function zF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zF(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HF(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qF(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}LF.type=HC.LINK,LF.baseType=qC.URI,LF.MAX_LENGTH=128,VF([Ks(PF)],LF.prototype,"_linkService",2),VF([Ks(Dx)],LF.prototype,"_eventService",2),VF([Ks(L_)],LF.prototype,"_database",2),LF=VF([Gs()],LF);var WF=Object.defineProperty,$F=Object.getOwnPropertyDescriptor,GF=function(e,t,n,r){for(var o,i=r>1?void 0:r?$F(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WF(t,n,i),i},KF=function(){return Ew((function e(){_w(this,e)}),[{key:"toValue",value:function(e){var t=this,n=this._readService.getField(e.fieldId),r=e.value||"";if(Array.isArray(r))(null==n?void 0:n.get("type"))===HC.MENTION&&(r=null==r?void 0:r.map((function(e){var n=t._readService.getUser(e.uid);return{id:(null==n?void 0:n.get("uid"))||e.uid,name:(null==n?void 0:n.get("name"))||e.name,login:(null==n?void 0:n.get("login"))||e.login,avatar_url:(null==n?void 0:n.get("icon"))||e.icon,work_id:(null==n?void 0:n.get("work_id"))||e.work_id}})));else if((null==n?void 0:n.get("type"))===HC.LINK)return(null==r?void 0:r.src)?{value:{src:(null==r?void 0:r.src)||"",name:(null==r?void 0:r.name)||"",icon:(null==r?void 0:r.icon)||""}}:{value:null};return(null==n?void 0:n.get("type"))===HC.DATE?{value:{time:r}}:{value:r}}},{key:"toColumn",value:function(e){var t={id:e.get("uuid"),name:e.get("name"),type:e.get("type"),color:e.get("color"),config:e.get("config")},n=this._readService.getFieldOptions(e.get("uuid"));return n&&(t.options=nk(n,(function(e){return{id:e.get("uuid"),color:e.get("color"),value:e.get("name")}}))),t}},{key:"toRecord",value:function(e,t){var n,r,o={userId:e.get("creator_id"),modifierId:e.get("modifier_id")},i=HF(this._readService.getRecordCells(e.get("uuid")));try{for(i.s();!(r=i.n()).done;){var a=r.value;a&&(t&&a.fieldId!==t||null==a.value&&null===(null==(n=a.value)?void 0:n.name)||Array.isArray(a.value)&&0===a.value.length||(o[a.fieldId]=this.toValue(a)))}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"toView",value:function(e){var t=this,n=e.view,r=e.sort,o=e.stats,i=e.viewGroup,a=e.filters,u=e.groupViewRecords,l=e.viewConfig,c=this._readService.getAllViewFields(n.get("uuid")),s=this._readService.getOriginViewRecords(n.get("uuid")),d=UF(UF({id:n.get("uuid"),type:n.get("type"),name:n.get("name"),colCount:(null==c?void 0:c.length)||0,columns:nk(c,(function(e){return{id:e.get("field_uuid"),size:e.get("size"),hidden:e.get("hidden")}})),data:{},filter:this.toFilter(a),sort:this.toSort(r,l),stats:this.toStats(o)},(null==i?void 0:i.group)?this.toGroup(i.group,u):{}),{},{frozenCol:0,index:0,rowCount:s.length,rows:nk(s,(function(e){return{id:e.get("record_uuid")}})),rowHeight:this.toRowHeight(l),scrollX:0,scrollY:0,selections:{},tableId:""});return n.get("type")===sE.CARD&&l&&(d.cover={show:!!l.get("cover_field_uuid"),id:l.get("cover_field_uuid"),display:l.get("cover_display")}),n.get("type")!==sE.KANBAN&&n.get("type")!==sE.CARD||(d.showField=null==l?void 0:l.get("show_field_name")),n.get("type")===sE.FORM?{id:n.get("uuid"),type:n.get("type"),name:n.get("name"),desc:n.get("desc"),fields:Q_(c,(function(e){return!e.get("hidden")&&(!!e.get("field")&&!fE.isSystemType(e.get("field").get("type")))})).map((function(e){var n={columnId:e.get("field_uuid"),columnName:e.get("field").get("name")||"",type:e.get("field").get("type")||HC.TEXT,title:e.get("name")||e.get("field").get("name"),display:e.get("display_type")};if(fE.isSelectLike(e.get("field").get("type"))){var r=t.toColumn(e.get("field"));n.options=r.options}return e.get("required")?n.validations=[{required:!0}]:n.validations=[{required:!1}],n})),viewId:n.get("uuid"),createdAt:n.get("created_at")}:(n.get("type")===sE.CALENDAR&&l&&(d.date={startId:l.get("start_date_field_uuid")||"",endId:l.get("end_date_field_uuid")||"",activeDate:l.get("active_date")||"",titleId:l.get("date_title_field_uuid")||"",showLunar:l.get("show_lunar")||!1,colorType:l.get("date_color_type")||rE.CUSTOM,colorId:l.get("date_color")||""}),d)}},{key:"toFilter",value:function(e){var t={};return e&&e.length>0&&(t.operator=e.get(0).get("operator"),t.options=nk(e,(function(e){return{id:e.get("field_uuid"),func:e.get("func"),expected:e.get("expected")}})),0===t.options.length)?null:t}},{key:"toSort",value:function(e,t){if(!e)return null;var n={};return(null==t?void 0:t.get("keep_sort"))&&(n.auto=!0),n.options=[{id:e.get("field_uuid"),type:e.get("type")}],n}},{key:"toStats",value:function(e){var t={};return e&&e.length>0&&e.forEach((function(e){t[e.get("field_uuid")]=e.get("type")})),t}},{key:"toGroup",value:function(e,t){var n={};if(!e)return n;var r={id:e.get("field_uuid"),type:e.get("type")};return n.groupData=t.map((function(e){var t,n,o,i,a={value:(null==(t=e.option)?void 0:t.name)||"",titleValue:(null==(n=e.option)?void 0:n.value)?[null==(o=e.option)?void 0:o.value]:""};return a.rows=(null==(i=e.viewRecords)?void 0:i.map((function(e){return e.get("record_uuid")})))||[],a.groupBy=r.id,a.key=e.key,a.collapse=e.collapse,a})),n.group=[r],n}},{key:"toRowHeight",value:function(e){return(null==e?void 0:e.get("record_height"))?{low:{type:nE.LOW,name:"低",value:36},middle:{type:nE.MIDDLE,name:"中",value:58},high:{type:nE.HIGH,name:"高",value:146}}[e.get("record_height")]:{type:nE.LOW,name:"低",value:36}}},{key:"toTable",value:function(){var e,t=this,n=this._readService.getTable(),r=this._readService.getOriginViewRecords(),o=this._readService.getAllFields(),i=this._readService.getViews(),a={format:"laketable",type:"Table"};a.version=n.get("version"),a.larkJson=!0;var u={};u.rowIds=nk(r,(function(e){return e.get("record_uuid")})),u.rowCount=r.length,u.columns=nk(o,(function(e){var n=t._readService.getFieldOptions(e.get("uuid")),r={id:e.get("uuid"),name:e.get("name"),type:e.get("type")};return null!=e.get("color")&&(r.color=e.get("color")),null!=e.get("config")&&(r.config=e.get("config")),n&&n.length>0&&(r.options=nk(n,(function(e){var t={id:e.get("uuid"),value:e.get("name")};return e.get("color")&&(t.color=e.get("color")),t}))),r})),u.colCount=o.length,u.activeView=n.get("active_view_uuid"),u.id=n.get("uuid"),u.views={};var l,c=HF(i);try{for(c.s();!(l=c.n()).done;){var s=l.value,d={};d.view=this._readService.getView(s.get("uuid")),d.sort=this._readService.getViewSort(s.get("uuid")),d.stats=this._readService.getViewStats(s.get("uuid")),d.viewGroup=this._readService.getViewGroup(s.get("uuid")),d.filters=this._readService.getViewFilters(s.get("uuid")),d.groupViewRecords=(null==(e=d.viewGroup)?void 0:e.group)?this._readService.getGroupViewRecords(s.get("uuid")):null,d.viewConfig=this._readService.getViewConfig(s.get("uuid"));var f=this.toView(d);u.views[f.id]=f}}catch(e){c.e(e)}finally{c.f()}return a.sheet=[u],a}}])}();GF([Ks(oA)],KF.prototype,"_readService",2),KF=GF([Gs()],KF);var YF="lakex-table",JF=function(e,t){return YF+":"+e+":"+t},XF=function(){return Ew((function e(){_w(this,e)}),null,[{key:"enable",value:function(e,t){var n=JF(e,t);(function(e){var t=localStorage.debug;return"*"===t||t==="".concat(YF,":*")||t==="".concat(YF,":").concat(e,":*")})(e)||Qb.enable(n)}},{key:"Infra",value:function(e){var t=JF("infra",e);return Qb(t)}},{key:"Plugin",value:function(e){return Qb(JF("plugin",e))}}])}(),ZF=Is.defineToken("ProcessKernelPluginContribution"),QF=Object.defineProperty,eI=Object.getOwnPropertyDescriptor,tI=function(e,t,n,r){for(var o,i=r>1?void 0:r?eI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QF(t,n,i),i},nI=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e,t=this.processProvider.getContributions()||[],n=t[t.length-1];return null==(e=null==n?void 0:n.registerProcess)?void 0:e.call(n)}},{key:"getTableMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessTableMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getUsersMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessUsersMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getRecordsMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessRecordsMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}();function rI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oI(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oI(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}tI([yd(ZF)],nI.prototype,"processProvider",2),nI=tI([Gs()],nI);var iI=Object.defineProperty,aI=Object.getOwnPropertyDescriptor,uI=function(e,t,n,r){for(var o,i=r>1?void 0:r?aI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iI(t,n,i),i},lI=XF.Plugin("process"),cI=function(){return Ew((function e(){_w(this,e)}),[{key:"toModel",value:function(e,t){var n,r,o;if(o="string"==typeof e?JSON.parse(e):e,lI("服务端数据",o),o.version){if("string"==typeof o.sheet?o.sheet=JSON.parse(Wb.inflate(o.sheet,{to:"string"}))[0]:o.sheet=null==(n=o.sheet)?void 0:n[0],!o.sheet)return;try{var i=this._processRegistry.getTableMiddlewares();if(i&&i.length>0){var a,u=rI(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;o=l?l(o,t):o}}catch(e){u.e(e)}finally{u.f()}}}catch(e){lI("process table error:",e)}var c=o.sheet;lI("处理前数据",c);var s=c.activeView||c.defaultView,d=c.views[s];d&&(null==(r=this._configuration.getValue("viewerManage.viewTypes"))?void 0:r.includes(d.type))||(s=Object.keys(c.views)[0]),t.setData("table",[{uuid:c.id,version:"1.4",active_view_uuid:s}]),this._columnToModel(t,c.columns),o.records&&("string"==typeof o.records&&(o.records=JSON.parse(Wb.inflate(o.records,{to:"string"}))),this._recordToModel(t,o.records)),o.users&&("string"==typeof o.users&&(o.users=JSON.parse(Wb.inflate(o.users,{to:"string"}))),this._userToModel(t,o.users)),this._viewsToModel(t,c.views,c.columns)}}},{key:"toRecordModel",value:function(e,t){"string"==typeof e.records&&(e=JSON.parse(Wb.inflate(e,{to:"string"})));try{var n=this._processRegistry.getRecordsMiddlewares();if(n&&n.length>0){var r,o=rI(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;e=i?i({records:e},t).records:e}}catch(e){o.e(e)}finally{o.f()}}}catch(e){lI("process records error:",e)}this._recordToModel(t,e)}},{key:"toUserModel",value:function(e,t){try{var n=this._processRegistry.getUsersMiddlewares();if(n&&n.length>0){var r,o=rI(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;e=i?i({users:e},t).users:e}}catch(e){o.e(e)}finally{o.f()}}}catch(e){lI("process users error:",e)}this._userToModel(t,e)}},{key:"_columnToModel",value:function(e,t){if(t){var n,r=rI(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("input"!==o.type&&"textarea"!==o.type||(o.type="text"),Object.values(HC).includes(o.type)||(o.type="text"),o.uuid=o.uuid||o.id,o.options){var i,a=rI(o.options);try{for(a.s();!(i=a.n()).done;){var u=i.value;u.name=u.name||u.value,u.uuid=u.uuid||u.id}}catch(e){a.e(e)}finally{a.f()}}fE.isMultiple(o.type)&&(o.multiple=!0)}}catch(e){r.e(e)}finally{r.f()}e.setData("field",t);var l,c=[],s=rI(t);try{for(s.s();!(l=s.n()).done;){var d=l.value;if(d.options){var f,p=rI(d.options);try{for(p.s();!(f=p.n()).done;){var v=f.value;c.push({uuid:v.uuid,field_uuid:d.uuid,name:v.name,color:v.color})}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){s.e(e)}finally{s.f()}e.setData("field_option",c)}}},{key:"_getField",value:function(e,t){var n=e.query("field").toJSON().find((function(e){return e.uuid===t}));if(n){if("select"===n.type||"multiSelect"===n.type){var r=e.query("field_option").toJSON();n.options=r.filter((function(e){return e.field_uuid===n.uuid}))}return n}}},{key:"_userToModel",value:function(e,t){var n,r=e.query("user").toJSON()||[],o=rI(t);try{var i=function(){var e=n.value;if(!e)return 0;var t=String(e.id||e.uid);if(r.some((function(e){return e.uid===t})))return 0;r.push({uuid:qw(32),uid:t,login:e.login,name:e.name,icon:e.avatar_url||e.icon,work_id:e.work_id,created_at:+new Date,updated_at:+new Date})};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}e.setData("user",r)}},{key:"_recordToModel",value:function(e,t){var n,r,o,i=(null==(n=e.query("record"))?void 0:n.toJSON())||[],a=[],u=rI(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(i.push({id:l.id,uuid:l.uuid,creator_id:l.user_id,modifier_id:l.modifier_id,created_at:+new Date(l.created_at),updated_at:+new Date(l.updated_at)}),l.data)for(var c=JSON.parse(l.data),s=0,d=Object.keys(c);s<d.length;s++){var f=d[s],p=this._getField(e,f);if(p){var v=p.type,h=c[f],g=null==(r=this._processRegistry.getProvider())?void 0:r.processFieldModel,m=void 0;if(null!=(m=g?g(p,h.value):null==h?void 0:h.value)){if(fE.isUri(v)){if(!m)continue;m&&"string"==typeof m&&(m={src:m,name:m,icon:""})}if(Array.isArray(m)){var y,b=rI(m);try{for(b.s();!(y=b.n()).done;){var w=y.value;fE.isMention(v)&&(w.uid=w.id,w.icon=w.avatar_url),a.push({fieldType:v,field_uuid:f,record_uuid:l.uuid,value:w})}}catch(e){b.e(e)}finally{b.f()}}else fE.isDate(v)&&(null!=m.time?m=m.time:null!=m.seconds&&(m=c_(m.seconds))),a.push({fieldType:v,field_uuid:f,record_uuid:l.uuid,value:m})}}}}}catch(e){u.e(e)}finally{u.f()}e.setData("record",i),this._createValues(e,a)}},{key:"_createValues",value:function(e,t){var n={field_boolean:[],field_date:[],field_number:[],field_select:[],field_string:[],field_uri:[],user:{}};t.forEach((function(e){var t,r,o,i,a,u,l,c=e.fieldType;if(delete e.fieldType,fE.isBoolean(c))n.field_boolean.push(e);else if(fE.isDate(c))n.field_date.push(e);else if(fE.isNumberLike(c))n.field_number.push(e);else if(fE.isSelectLike(c))n.field_select.push(e);else if(fE.isString(c))n.field_string.push(e);else if(fE.isUri(c)){if(n.field_uri.push({field_uuid:e.field_uuid,record_uuid:e.record_uuid,uid:null==(t=e.value)?void 0:t.uid,src:null==(r=e.value)?void 0:r.src,icon:null==(o=e.value)?void 0:o.icon,name:null==(i=e.value)?void 0:i.name,size:null==(a=e.value)?void 0:a.size,width:null==(u=e.value)?void 0:u.width,height:null==(l=e.value)?void 0:l.height}),fE.isMention(c)){if(!e.value)return;n.user[e.value.uid]={uid:String(e.value.uid),name:e.value.name,icon:e.value.icon,login:e.value.login,work_id:e.value.work_id}}}else if(fE.isSystemUser(c)){if(!e.value)return;n.user[e.value.id]={uid:String(e.value.id),name:e.value.name,icon:e.value.avatar_url,login:e.value.login,work_id:e.value.work_id}}})),n.user=Object.values(n.user);for(var r=0,o=Object.keys(n);r<o.length;r++){var i=o[r];if("user"===i){var a=e.query("user").toJSON(),u=Xu([].concat(gw(a),gw(Object.values(n[i]))),"uid");return void e.setData("user",u)}e.setData(i,n[i])}}},{key:"_viewsToModel",value:function(e,t,n){for(var r=[],o=0,i=Object.values(t);o<i.length;o++){var a=i[o];r.push({id:a.iid,uuid:a.id,name:a.name,type:a.type,desc:a.desc}),this._viewToModel(e,a,n)}e.setData("view",r)}},{key:"_viewToModel",value:function(e,t,n){var r,o,i,a,u,l,c,s,d,f,p,v,h,g,m=e.query("view_config").toJSON()||[],y=e.query("view_field").toJSON()||[],b=e.query("view_record").toJSON()||[],w=e.query("group").toJSON()||[],_=e.query("group_item").toJSON()||[],k=e.query("filter").toJSON()||[],C=e.query("sort").toJSON()||[],E=e.query("stat").toJSON()||[],O=n.reduce((function(e,t){return e[t.id]=t,e}),{});if(m.push({view_uuid:t.id,cover_field_uuid:(null==(r=t.cover)?void 0:r.show)?null==(o=t.cover)?void 0:o.id:"",cover_display:null==(i=t.cover)?void 0:i.display,show_field_name:t.showField,keep_sort:null==(a=t.sort)?void 0:a.auto,frozen_field:t.frozenCol,record_height:null==(u=t.rowHeight)?void 0:u.type,start_date_field_uuid:null==(l=t.date)?void 0:l.startId,end_date_field_uuid:null==(c=t.date)?void 0:c.endId,active_date:null==(s=t.date)?void 0:s.activeDate,date_title_field_uuid:null==(d=t.date)?void 0:d.titleId,show_lunar:null==(f=t.date)?void 0:f.showLunar,date_color_type:null==(p=t.date)?void 0:p.colorType,date_color:null==(v=t.date)?void 0:v.colorId}),t.type===sE.FORM){if(t.fields){var S,x=rI(t.fields);try{for(x.s();!(S=x.n()).done;){var j=S.value;O[j.columnId]&&y.push({view_uuid:t.id,field_uuid:j.columnId,name:j.title||j.columnName,display_type:j.display,required:(null==(g=null==(h=j.validations)?void 0:h[0])?void 0:g.required)||!1})}}catch(e){x.e(e)}finally{x.f()}}}else{var D,A=rI(t.columns);try{for(A.s();!(D=A.n()).done;){var R=D.value;O[R.id]&&(("rate"===R.type||"progress"===R.type)&&R.size<134&&(R.size=134),y.push({view_uuid:t.id,field_uuid:R.id,size:R.size,hidden:R.hidden}))}}catch(e){A.e(e)}finally{A.f()}}if(t.rows){var F={};t.group&&t.groupData&&t.groupData.forEach((function(e){if(null!=e.key&&e.collapse&&t.group.length>0){var r=t.group[0],o=n.find((function(e){return e.id===r.id}));o&&_.push({view_uuid:t.id,field_uuid:null==o?void 0:o.id,key:e.key,collapse:e.collapse})}e.rows.forEach((function(t){Array.isArray(e.titleValue)?"string"==typeof e.titleValue[0]?F[t]=e.titleValue[0]:F[t]=e.titleValue.map((function(e){return e.uid})).join(","):F[t]=e.titleValue}))}));var I,P=rI(t.rows);try{for(P.s();!(I=P.n()).done;){var M=I.value,T={view_uuid:t.id,record_uuid:M.id};if(t.group){var N=F[M.id];T.group_item_key=(null==N?void 0:N.id)?String(null==N?void 0:N.id):N}b.push(T)}}catch(e){P.e(e)}finally{P.f()}}if(t.filter&&t.filter.options){var B,V=rI(t.filter.options);try{var L=function(){var e=B.value;if(!y.some((function(t){return t.field_uuid===e.id})))return 1;var n=e.func,r=Array.isArray(e.expected)?e.expected.join(","):e.expected;["today","tomorrow","yesterday","thisWeek","lastWeek","nextWeek","lastMonth","thisMonth","nextMonth","last7days"].includes(n)&&(r=n,n="equalTo"),k.push({view_uuid:t.id,field_uuid:e.id,operator:t.filter.operator||QC.And,func:n,expected:r})};for(V.s();!(B=V.n()).done;)L()}catch(e){V.e(e)}finally{V.f()}}if(t.group&&t.group.length>0){var z=t.group[0],U=n.find((function(e){return e.id===z.id}));U&&y.some((function(e){return e.field_uuid===U.id}))&&w.push({view_uuid:t.id,field_uuid:U.id,type:z.type})}if(t.sort&&t.sort.options){var H,q=rI(t.sort.options);try{var W=function(){var e=H.value;if(!y.some((function(t){return t.field_uuid===e.id})))return 1;C.push({view_uuid:t.id,field_uuid:e.id,type:e.type})};for(q.s();!(H=q.n()).done;)W()}catch(e){q.e(e)}finally{q.f()}}if(t.stats)for(var $=0,G=Object.keys(t.stats);$<G.length;$++){var K=G[$];E.push({view_uuid:t.id,field_uuid:K,type:t.stats[K]})}e.setData("view_config",m),e.setData("view_field",y),e.setData("view_record",b),e.setData("group",w),e.setData("group_item",_),e.setData("filter",k),e.setData("sort",C),e.setData("stat",E)}},{key:"toData",value:function(e){var t,n=this,r=null==(t=e.query("record"))?void 0:t.toJSON(),o=this._toProcess.toTable();return o.records=r.map((function(e){var t=n._readService.getOriginRecord(e.uuid);return{id:e.id,uuid:e.uuid,user_id:e.creator_id,modifier_id:e.modifier_id,sheet_id:o.sheet[0].id,data:JSON.stringify(n._toProcess.toRecord(t)),updated_at:+new Date(e.updated_at),created_at:+new Date(e.created_at)}})).filter((function(e){return!!e})),o}}])}();function sI(e){return(sI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}uI([Ks(KF)],cI.prototype,"_toProcess",2),uI([Ks(nI)],cI.prototype,"_processRegistry",2),uI([Ks(lk)],cI.prototype,"_configuration",2),uI([Ks(oA)],cI.prototype,"_readService",2),cI=uI([Gs()],cI);var dI=/^\s+/,fI=/\s+$/;function pI(e,t){if(t=t||{},(e=e||"")instanceof pI)return e;if(!(this instanceof pI))return new pI(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,u=!1;"string"==typeof e&&(e=function(e){e=e.replace(dI,"").replace(fI,"").toLowerCase();var t,n=!1;if(AI[e])e=AI[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=HI.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=HI.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=HI.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=HI.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=HI.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=HI.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=HI.hex8.exec(e))return{r:MI(t[1]),g:MI(t[2]),b:MI(t[3]),a:VI(t[4]),format:n?"name":"hex8"};if(t=HI.hex6.exec(e))return{r:MI(t[1]),g:MI(t[2]),b:MI(t[3]),format:n?"name":"hex"};if(t=HI.hex4.exec(e))return{r:MI(t[1]+""+t[1]),g:MI(t[2]+""+t[2]),b:MI(t[3]+""+t[3]),a:VI(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=HI.hex3.exec(e))return{r:MI(t[1]+""+t[1]),g:MI(t[2]+""+t[2]),b:MI(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==sI(e)&&(qI(e.r)&&qI(e.g)&&qI(e.b)?(l=e.r,c=e.g,s=e.b,t={r:255*II(l,255),g:255*II(c,255),b:255*II(s,255)},a=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):qI(e.h)&&qI(e.s)&&qI(e.v)?(r=NI(e.s),o=NI(e.v),t=function(e,t,n){e=6*II(e,360),t=II(t,100),n=II(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),u=n*(1-(1-o)*t),l=r%6,c=[n,a,i,i,u,n][l],s=[u,n,n,a,i,i][l],d=[i,i,u,n,n,a][l];return{r:255*c,g:255*s,b:255*d}}(e.h,r,o),a=!0,u="hsv"):qI(e.h)&&qI(e.s)&&qI(e.l)&&(r=NI(e.s),i=NI(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=II(e,360),t=II(t,100),n=II(n,100),0===t)r=o=i=n;else{var u=n<.5?n*(1+t):n+t-n*t,l=2*n-u;r=a(l,u,e+1/3),o=a(l,u,e),i=a(l,u,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,u="hsl"),e.hasOwnProperty("a")&&(n=e.a));var l,c,s;return n=FI(n),{ok:a,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function vI(e,t,n){e=II(e,255),t=II(t,255),n=II(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),u=(i+a)/2;if(i==a)r=o=0;else{var l=i-a;switch(o=u>.5?l/(2-i-a):l/(i+a),i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,l:u}}function hI(e,t,n){e=II(e,255),t=II(t,255),n=II(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),u=i,l=i-a;if(o=0===i?0:l/i,i==a)r=0;else{switch(i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,v:u}}function gI(e,t,n,r){var o=[TI(Math.round(e).toString(16)),TI(Math.round(t).toString(16)),TI(Math.round(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function mI(e,t,n,r){return[TI(BI(r)),TI(Math.round(e).toString(16)),TI(Math.round(t).toString(16)),TI(Math.round(n).toString(16))].join("")}function yI(e,t){t=0===t?0:t||10;var n=pI(e).toHsl();return n.s-=t/100,n.s=PI(n.s),pI(n)}function bI(e,t){t=0===t?0:t||10;var n=pI(e).toHsl();return n.s+=t/100,n.s=PI(n.s),pI(n)}function wI(e){return pI(e).desaturate(100)}function _I(e,t){t=0===t?0:t||10;var n=pI(e).toHsl();return n.l+=t/100,n.l=PI(n.l),pI(n)}function kI(e,t){t=0===t?0:t||10;var n=pI(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),pI(n)}function CI(e,t){t=0===t?0:t||10;var n=pI(e).toHsl();return n.l-=t/100,n.l=PI(n.l),pI(n)}function EI(e,t){var n=pI(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,pI(n)}function OI(e){var t=pI(e).toHsl();return t.h=(t.h+180)%360,pI(t)}function SI(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=pI(e).toHsl(),r=[pI(e)],o=360/t,i=1;i<t;i++)r.push(pI({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function xI(e){var t=pI(e).toHsl(),n=t.h;return[pI(e),pI({h:(n+72)%360,s:t.s,l:t.l}),pI({h:(n+216)%360,s:t.s,l:t.l})]}function jI(e,t,n){t=t||6,n=n||30;var r=pI(e).toHsl(),o=360/n,i=[pI(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(pI(r));return i}function DI(e,t){t=t||6;for(var n=pI(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],u=1/t;t--;)a.push(pI({h:r,s:o,v:i})),i=(i+u)%1;return a}pI.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=FI(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=hI(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=hI(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=vI(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=vI(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return gI(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[TI(Math.round(e).toString(16)),TI(Math.round(t).toString(16)),TI(Math.round(n).toString(16)),TI(BI(r))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*II(this._r,255))+"%",g:Math.round(100*II(this._g,255))+"%",b:Math.round(100*II(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*II(this._r,255))+"%, "+Math.round(100*II(this._g,255))+"%, "+Math.round(100*II(this._b,255))+"%)":"rgba("+Math.round(100*II(this._r,255))+"%, "+Math.round(100*II(this._g,255))+"%, "+Math.round(100*II(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(RI[gI(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+mI(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=pI(e);n="#"+mI(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return pI(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_I,arguments)},brighten:function(){return this._applyModification(kI,arguments)},darken:function(){return this._applyModification(CI,arguments)},desaturate:function(){return this._applyModification(yI,arguments)},saturate:function(){return this._applyModification(bI,arguments)},greyscale:function(){return this._applyModification(wI,arguments)},spin:function(){return this._applyModification(EI,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(jI,arguments)},complement:function(){return this._applyCombination(OI,arguments)},monochromatic:function(){return this._applyCombination(DI,arguments)},splitcomplement:function(){return this._applyCombination(xI,arguments)},triad:function(){return this._applyCombination(SI,[3])},tetrad:function(){return this._applyCombination(SI,[4])}},pI.fromRatio=function(e,t){if("object"==sI(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:NI(e[r]));e=n}return pI(e,t)},pI.equals=function(e,t){return!(!e||!t)&&pI(e).toRgbString()==pI(t).toRgbString()},pI.random=function(){return pI.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},pI.mix=function(e,t,n){n=0===n?0:n||50;var r=pI(e).toRgb(),o=pI(t).toRgb(),i=n/100;return pI({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},pI.readability=function(e,t){var n=pI(e),r=pI(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},pI.isReadable=function(e,t,n){var r,o,i=pI.readability(e,t);switch(o=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},pI.mostReadable=function(e,t,n){var r,o,i,a,u=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=pI.readability(e,t[c]))>l&&(l=r,u=pI(t[c]));return pI.isReadable(e,u,{level:i,size:a})||!o?u:(n.includeFallbackColors=!1,pI.mostReadable(e,["#fff","#000"],n))};var AI=pI.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},RI=pI.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(AI);function FI(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function II(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function PI(e){return Math.min(1,Math.max(0,e))}function MI(e){return parseInt(e,16)}function TI(e){return 1==e.length?"0"+e:""+e}function NI(e){return e<=1&&(e=100*e+"%"),e}function BI(e){return Math.round(255*parseFloat(e)).toString(16)}function VI(e){return MI(e)/255}var LI,zI,UI,HI=(zI="[\\s|\\(]+("+(LI="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+LI+")[,|\\s]+("+LI+")\\s*\\)?",UI="[\\s|\\(]+("+LI+")[,|\\s]+("+LI+")[,|\\s]+("+LI+")[,|\\s]+("+LI+")\\s*\\)?",{CSS_UNIT:new RegExp(LI),rgb:new RegExp("rgb"+zI),rgba:new RegExp("rgba"+UI),hsl:new RegExp("hsl"+zI),hsla:new RegExp("hsla"+UI),hsv:new RegExp("hsv"+zI),hsva:new RegExp("hsva"+UI),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function qI(e){return!!HI.CSS_UNIT.exec(e)}function WI(e,t){return Sw(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||hw(e,t)||xw()}var $I={colorToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E"},colorDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0"},themeToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E","@yuque-color-theme":"#00B96B","@yuque-color-normal":"#D8DAD9","@yuque-color-bg-primary":"#FFFFFF","@yuque-color-bg-secondary":"#FAFAFA","@yuque-color-bg-tertiary":"#F4F5F5","@yuque-color-bg-primary-hover":"#EFF0F0","@yuque-color-bg-primary-hover-light":"#E7E9E8","@yuque-color-bg-foreground":"#FFFFFF","@yuque-color-bg-pre-foreground":"#FFFFFF","@yuque-color-bg-pre-secondary":"#F4F5F5","@yuque-color-bg-card-dialog":"#FAFAFA","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-border-primary":"#E7E9E8","@yuque-color-border-primary-active":"#00B96B","@yuque-color-border-light":"rgba(0, 0, 0, 0.04)","@yuque-color-border-heavy":"#EFF0F0","@yuque-color-cardborder-hover":"#81BBF8","@yuque-color-cardborder-selected":"#2F8EF4","@yuque-color-sheetborder":"rgba(0, 0, 0, 0.1)","@yuque-color-text-primary":"#262626","@yuque-color-text-body":"#585A5A","@yuque-color-text-caption":"#8A8F8D","@yuque-color-text-disable":"#BEC0BF","@yuque-color-text-link":"#117CEE","@yuque-color-text-link-hover":"#5FA8F6","@yuque-color-icon-primary":"#262626","@yuque-color-icon-secondary":"#585A5A","@yuque-color-icon-caption":"#8A8F8D","@yuque-color-icon-disable":"#BEC0BF","@yuque-color-icon-hover":"#D8DAD9","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#00B96B","@yuque-color-function-info":"#117CEE","@yuque-color-function-warning":"#ECAA04","@yuque-color-function-error":"#DF2A3F","@yuque-color-badge":"#2F8EF4","@yuque-color-popover-bg":"#FFFFFF","@yuque-color-disable-color":"#BEC0BF"},themeDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0","@yuque-color-theme":"#2ED790","@yuque-color-normal":"#424242","@yuque-color-bg-primary":"#141414","@yuque-color-bg-secondary":"#1F1F1F","@yuque-color-bg-tertiary":"rgba(255, 255, 255, 0.04)","@yuque-color-bg-primary-hover":"rgba(255, 255, 255, 0.12)","@yuque-color-bg-primary-hover-light":"#333333","@yuque-color-bg-foreground":"#1F1F1F","@yuque-color-bg-pre-foreground":"#292929","@yuque-color-bg-pre-secondary":"#292929","@yuque-color-bg-card-dialog":"#292929","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"#292929","@yuque-color-border-primary":"rgba(255, 255, 255, 0.12)","@yuque-color-border-primary-active":"#29AD76","@yuque-color-border-light":"rgba(255, 255, 255, 0.08)","@yuque-color-border-heavy":"rgba(255, 255, 255, 0.12)","@yuque-color-cardborder-hover":"#253C56","@yuque-color-cardborder-selected":"#1D4672","@yuque-color-sheetborder":"rgba(255, 255, 255, 0.12)","@yuque-color-text-primary":"#E2E2E2","@yuque-color-text-body":"#B3B3B3","@yuque-color-text-caption":"#848484","@yuque-color-text-disable":"#505050","@yuque-color-text-link":"#3B82CE","@yuque-color-text-link-hover":"#245A94","@yuque-color-icon-primary":"#E2E2E2","@yuque-color-icon-secondary":"#B3B3B3","@yuque-color-icon-caption":"#848484","@yuque-color-icon-disable":"#505050","@yuque-color-icon-hover":"#424242","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#51B88D","@yuque-color-function-info":"#3B82CE","@yuque-color-function-warning":"#D2A638","@yuque-color-function-error":"#CA3F4F","@yuque-color-badge":"#2B6BB1","@yuque-color-popover-bg":"#1F1F1F","@yuque-color-disable-color":"#505050"}};function GI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GI(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YI=KI(KI({},$I.themeToken),{},{"@yuque-color-table-bg":"#FAFAFA","@yuque-color-table-darg":"#D8DAD9","@yuque-color-table-temp":"#F9EFCD","@yuque-color-table-header-border":"#E7E9E8"}),JI=KI(KI({},$I.themeDarkToken),{},{"@yuque-color-table-bg":"#141414","@yuque-color-table-darg":"#404040","@yuque-color-table-header-border":"#373838"}),XI=function(e){return e.default="default",e.dark="dark",e}(XI||{}),ZI=Is.defineToken("ThemeContribution"),QI={},eP={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(eP);var tP=eP.exports,nP=n_(kw),rP=n_(Ow),oP=n_(ww),iP={};Object.defineProperty(iP,"__esModule",{value:!0});var aP=iP.Theme=void 0;aP=iP.Theme=function(e){return e.default="default",e.dark="dark",e}({});var uP={},lP=pI;function cP(e){return Math.min(1,Math.max(0,e))}function sP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;"string"==typeof n&&n.endsWith("%")&&(n=parseInt(n,10)/100);var r=lP(e).toRgb(),o=lP(t).toRgb(),i=2*n-1,a=r.a-o.a,u=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,l=1-u,c={r:r.r*u+o.r*l,g:r.g*u+o.g*l,b:r.b*u+o.b*l,a:r.a*n+o.a*(1-n)};return lP(c).toRgbString()}lP=lP.default||lP;var dP,fP={lagacy:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],dark:[["@black","@yuque-grey-900","@yuque-grey-800","@yuque-grey-700","@yuque-grey-500","@yuque-grey-400","@yuque-grey-300","@yuque-grey-200","@yuque-grey-100","@white"],["@red-600","@orange-600","@yellow-600","@bright-yellow-500","@pea-green-600","@cyan-500","@blue-600","@sea-blue-600","@purple-600","@magenta-600"],["@red-100","@orange-100","@yellow-100","@bright-yellow-100","@pea-green-100","@cyan-100","@blue-100","@sea-blue-100","@purple-100","@magenta-100"],["@red-300","@orange-300","@yellow-300","@bright-yellow-400","@pea-green-300","@cyan-300","@blue-300","@sea-blue-300","@purple-300","@magenta-300"],["@red-500","@orange-500","@yellow-500","@bright-yellow-600","@pea-green-500","@cyan-600","@blue-500","@sea-blue-500","@purple-500","@magenta-500"],["@red-700","@orange-700","@yellow-700","@bright-yellow-800","@pea-green-700","@cyan-800","@blue-700","@sea-blue-700","@purple-700","@magenta-700"],["@red-900","@orange-900","@yellow-900","@bright-yellow-900","@pea-green-900","@cyan-900","@blue-900","@sea-blue-900","@purple-900","@magenta-900"]],getTokenFromColor:function(e){var t,n,r;return fP.lagacy.map((function(t,o){t.map((function(t,i){e===t&&(n=o,r=i)}))})),null===(t=fP.dark[n])||void 0===t?void 0:t[r]}},pP={toLight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=lP(e).toHsl();return"white"===lP(n).toName()||"black"===lP(n).toName()?"#ffffff":(n.l+=t/100,n.l=cP(n.l),lP(n).toRgbString())},toDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=lP(e).toHsl();return"white"===lP(n).toName()||"black"===lP(n).toName()?"#000000":(n.l-=t/100,n.l=cP(n.l),lP(n).toRgbString())},fade:function(e,t){return"string"==typeof t&&t.endsWith("%")&&(t=parseInt(t,10)/100),(e=lP(e)).setAlpha(t).toRgbString()},fadeout:function(e,t){var n=lP(e).toHsl();return n.a-=t/100,n.a=cP(n.a),lP(n).toRgbString()},mix:sP,autoDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#141414",n=function(e){var t=lP(e).toHsl().l;return t>.9&&t<1?.1:t>.8&&t<.9?.2:t>.7&&t<.8?.3:t>.6&&t<.7?.4:t>.5&&t<.6?.5:t>.4&&t<.5?.6:t>.3&&t<.4?.7:t>.2&&t<.3?.8:t<.2?.9:.5}(e),r=function(e){var t=lP(e).toHsl();return 0===t.h?t.s=.2:t.h>255?t.s=.7:t.s=.9,t.l=.4,lP(t).toHexString()}(e);return lP(sP(r,t,n)).toHexString()},reverseL:function(e){var t=lP(e).toHsl();return t.l=1-t.l,lP(t).toRgbString()},LagacyPalette:fP};var vP=tP;Object.defineProperty(QI,"__esModule",{value:!0});var hP=QI.DefaultThemeManager=void 0,gP=vP(nP),mP=vP(rP),yP=vP(oP),bP=iP,wP=$I,_P=vP(function(){if(dP)return uP;dP=1,Object.defineProperty(uP,"__esModule",{value:!0}),uP.default=void 0;var e=iP,t=pP,n=$I,r=pI;return uP.default={transform:function(o,i,a){var u=o||e.Theme.default,l=i||e.Theme.default;if(u===l)return a;if(a.startsWith("rgb(")&&a.indexOf(",")<0)return a;if(u===e.Theme.default&&l===e.Theme.dark){if(t.LagacyPalette.getTokenFromColor(a)&&(a=t.LagacyPalette.getTokenFromColor(a)),a.startsWith("@")&&n.themeToken[a])return Number(a.split("-").reverse()[0])<10?n.themeDarkToken["".concat(a,"00")]:n.themeDarkToken[a];var c=Object.keys(n.colorToken).find((function(e){return r(n.colorToken[e]).toHex8String()===r(a).toHex8String()}));return c?n.colorDarkToken[c]:(0,t.reverseL)(a)}if(u===e.Theme.dark&&l===e.Theme.default){if(a.startsWith("@")&&n.themeDarkToken[a])return n.themeToken[a];var s=Object.keys(n.colorDarkToken).find((function(e){return n.colorDarkToken[e]&&r(n.colorDarkToken[e]).toHex8String()===r(a).toHex8String()}));return s?n.colorToken[s]:(0,t.reverseL)(a)}return a},get:function(t,r){return t.startsWith("@")?r===e.Theme.dark?n.themeDarkToken[t]:n.themeToken[t]:t}},uP}()),kP="data-kumuhana";hP=QI.DefaultThemeManager=function(){function e(){(0,gP.default)(this,e),(0,yP.default)(this,"_current",null),(0,yP.default)(this,"listeners",[])}return(0,mP.default)(e,[{key:"current",get:function(){return this._current}},{key:"themeToken",get:function(){return this._current===bP.Theme.dark?wP.themeDarkToken:wP.themeToken}},{key:"_getStorageKey",value:function(e){return"".concat("yuque:prefers-color",":").concat(e)}},{key:"_getStorage",value:function(e){return e&&localStorage.getItem(this._getStorageKey(e))===bP.Theme.dark?bP.Theme.dark:bP.Theme.default}},{key:"init",value:function(e){var t=this._getStorage(e)||bP.Theme.default;return document.documentElement.setAttribute(kP,"dark"===t?"pouli":"default"),this._current!==t&&(this._current=t,!0)}},{key:"switch",value:function(e,t){var n=this._current;if(n===e)return!1;var r=e===bP.Theme.dark?bP.Theme.dark:bP.Theme.default;return document.documentElement.setAttribute(kP,"dark"===r?"pouli":"default"),this._current=r,t&&localStorage.setItem(this._getStorageKey(t),r),this.emitChange(n),!0}},{key:"emitChange",value:function(e){var t=this._current;this.listeners.forEach((function(n){n(t,e)}))}},{key:"onChange",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"transformColor",value:function(e,t,n){return _P.default.transform(e,t,n)}},{key:"getColor",value:function(e,t){return t||(t=this._current),_P.default.get(e,t)}}]),e}();var CP=Object.defineProperty,EP=Object.getOwnPropertyDescriptor,OP=function(e,t,n,r){for(var o,i=r>1?void 0:r?EP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&CP(t,n,i),i},SP=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e=this.themeProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerTheme()}},{key:"getThemeManager",value:function(){var e;return this._themeManager?this._themeManager:(this._themeManager=null==(e=this.getProvider())?void 0:e.getThemeManager(),this._themeManager||new hP)}}])}();OP([yd(ZI)],SP.prototype,"themeProvider",2),SP=OP([Gs()],SP);var xP=Object.defineProperty,jP=Object.getOwnPropertyDescriptor,DP=function(e,t,n,r){for(var o,i=r>1?void 0:r?jP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xP(t,n,i),i};var AP=function(){return Ew((function e(){_w(this,e)}),[{key:"getThemeManager",value:function(){return this._themeRegistry.getThemeManager()}},{key:"isCurrentInDarkTheme",value:function(){var e=this._themeRegistry.getThemeManager();return(null==e?void 0:e.current)===aP.dark}},{key:"getCurrentTheme",value:function(){var e=this._themeRegistry.getThemeManager();return null==e?void 0:e.current}},{key:"toThemeColor",value:function(e){var t,n=this._themeRegistry.getThemeManager();if(!e)return e;if(e.toLowerCase().startsWith("@"))return"dark"===(null==n?void 0:n.current)?JI[e]:YI[e];if(e.toLowerCase().startsWith("fade")){var r=WI(e.match(/^fade\((.*),(.*)\)$/),3),o=r[1],i=r[2];return pP.fade(this.toThemeColor(o.trim()),(t=i.trim()).endsWith("%")?parseFloat(t.replace("%",""))/100:parseFloat(t))}return(null==n?void 0:n.transformColor(XI.default,null==n?void 0:n.current,e))||e}},{key:"transToThemeColor",value:function(e){var t=this._themeRegistry.getThemeManager();return e&&t&&t?this.isCurrentInDarkTheme()?t.transformColor(aP.default,aP.dark,e):t.getColor(e,XI.default):e}},{key:"addThemeChangeListener",value:function(e){var t=this._themeRegistry.getThemeManager();return null==t?void 0:t.onChange(e)}}])}();DP([Ks(SP)],AP.prototype,"_themeRegistry",2),AP=DP([Gs()],AP);var RP=Object.defineProperty,FP=Object.getOwnPropertyDescriptor,IP=function(e,t,n,r){for(var o,i=r>1?void 0:r?FP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&RP(t,n,i),i},PP={},MP=function(){return Ew((function e(){_w(this,e),this._themeCache={},this._isColor=function(e){return e.toLowerCase().startsWith("@")||e.toLowerCase().startsWith("#")||e.toLowerCase().startsWith("rgb(")||e.toLowerCase().startsWith("rgba(")||e.toLowerCase().startsWith("fade(")}}),[{key:"_getThemeValue",value:function(e){var t=this;if(this._isColor(e))return this._themeHelper.toThemeColor(e);var n=e.split(".").reduce((function(e,t){return e?e[t]:null}),PP);if(null==n)return null;var r=function(e){if(null==e)return e;if("string"==typeof e&&t._isColor(e))return t._themeHelper.toThemeColor(e);"object"!==mw(e)||Array.isArray(e)||Object.keys(e).forEach((function(t){e[t]=r(e[t])}));return e};return r(n)}},{key:"getThemeValue",value:function(e){var t=e,n=this._themeRegistry.getThemeManager();if(!t)return null;var r=(null==n?void 0:n.current)||"light";r&&(t=r+"$"+t);var o=this._themeCache[t];if(o)return o;var i=this._getThemeValue(e);return this._themeCache[t]=i,i}},{key:"getCurrent",value:function(){return this._themeHelper.getCurrentTheme()}},{key:"onChange",value:function(e){this._themeRegistry.getThemeManager().onChange(e)}}])}();IP([Ks(SP)],MP.prototype,"_themeRegistry",2),IP([Ks(AP)],MP.prototype,"_themeHelper",2),MP=IP([Gs()],MP);var TP=dd().contribution(ZI).register(MP).register(SP).register(AP),NP={"#FFA39E":"#FBD3D0","#FFEC3D":"#F7E9BC","#91D5FF":"#C4E4F5","#FFADD2":"#E4F7D2","#FFD591":"#E8D5CB","#87E8DE":"#C0EBE5","#D3ADF7":"#DBCEF5","#FFBB96":"#E8E8E8","#B7EB8F":"#E5EDCA","#ADC6FF":"#C2CDF0"},BP=["#F1A2AB","#F5D480","#C1E77E","#82EDC0","#81DFE4","#81BBF8","#96A7FD","#BA9BF2","#DBC39A","#BEC0BF"],VP=[["$label-back-color:0-0","$label-back-color:0-1","$label-back-color:0-2","$label-back-color:0-3","$label-back-color:0-4"],["$label-back-color:1-0","$label-back-color:1-1","$label-back-color:1-2","$label-back-color:1-3","$label-back-color:1-4"],["$label-back-color:2-0","$label-back-color:2-1","$label-back-color:2-2","$label-back-color:2-3","$label-back-color:2-4"],["$label-back-color:3-0","$label-back-color:3-1","$label-back-color:3-2","$label-back-color:3-3","$label-back-color:3-4"]],LP={labelColor:[["@yuque-green-1","@yellow-1","@blue-1","@yuque-grey-3","@red-1"],["@brown-1","@cyan-1","@purple-1","@pea-green-1","@sea-blue-1"],["@red-3","@yellow-3","@pea-green-3","@yuque-green-3","@cyan-3"],["@blue-3","@sea-blue-3","@purple-3","@brown-3","@yuque-grey-6"]],labelTextColor:[["@yuque-green-9","@yellow-9","@blue-9","@yuque-grey-9","@red-9"],["@brown-9","@cyan-9","@purple-9","@pea-green-9","@sea-blue-9"],["@red-9","@yellow-9","@pea-green-9","@yuque-green-9","@cyan-9"],["@blue-9","@sea-blue-9","@purple-9","@brown-9","@yuque-grey-9"]]},zP="$label-back-color:",UP=Object.defineProperty,HP=Object.getOwnPropertyDescriptor,qP=function(e,t,n,r){for(var o,i=r>1?void 0:r?HP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UP(t,n,i),i},WP=new Map,$P=function(){return Ew((function e(){_w(this,e)}),[{key:"getLabelColorTokenByBackColorId",value:function(e){var t="@yuque-color-bg-primary";if(!e.startsWith(zP))return this._themeHelper.transToThemeColor(t);var n=WI($P.getIndexesByBackColorId(e),2),r=n[0],o=n[1];return LP.labelColor[r][o]||t}},{key:"getColorByBackColorId",value:function(e){var t=this.getLabelColorTokenByBackColorId(e);return this._themeHelper.transToThemeColor(t)}},{key:"getTextColorByBackColorId",value:function(e){var t="@yuque-color-text-primary";if(!e.startsWith(zP))return this._themeHelper.transToThemeColor(t);var n=WI($P.getIndexesByBackColorId(e),2),r=n[0],o=n[1],i=LP.labelTextColor[r][o]||t;return this._themeHelper.transToThemeColor(i)}},{key:"getByIndex",value:function(e){var t=hi(VP);return t[e%t.length]}},{key:"getRenderColor",value:function(e){var t="labelColor:".concat(this._themeHelper.getCurrentTheme(),":").concat(e),n=WP.get(t);if(n)return n;var r=$P.getColor(e),o="";return o=$P.isLabelColorId(r)?this.getColorByBackColorId(r):this._themeHelper.transToThemeColor(r),WP.set(t,o),o}},{key:"getRenderTextColor",value:function(e){var t="labelTextColor:".concat(this._themeHelper.getCurrentTheme(),":").concat(e),n=WP.get(t);if(n)return n;var r="";return r=e?$P.isLabelColorId(e)?this.getTextColorByBackColorId(e):this._themeHelper.isCurrentInDarkTheme()||pI(e).getBrightness()<200&&!BP.includes(e)?"#fff":"rgba(0,0,0,0.65)":this._themeHelper.transToThemeColor("@yuque-color-text-primary"),WP.set(t,r),r}}],[{key:"isLabelColorId",value:function(e){return Yw(e)&&e.startsWith(zP)}},{key:"getColor",value:function(e){return Yw(e)?$P.isLabelColorId(e)?e:NP[e.toUpperCase()]||e:""}},{key:"getNextColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=$P.getColor(e),n=hi(VP),r=n.indexOf(t);return r>=0?n[(r+1)%n.length]:n[0]}},{key:"getIndexesByBackColorId",value:function(e){if(e.startsWith(zP)){var t=WI(e.split(zP),2);t[0];var n=WI(t[1].split("-"),2),r=n[0],o=n[1],i=[Number(r),Number(o)];return[i[0],i[1]]}return[0,0]}}])}();qP([Ks(AP)],$P.prototype,"_themeHelper",2),$P=qP([Gs()],$P);var GP=dd().register($P),KP=dd().register(Pw);function YP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return JP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JP(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function JP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function XP(e,t,n){return t=dk(t),sk(e,ZP()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ZP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZP=function(){return!!e})()}var QP=Object.defineProperty,eM=Object.getOwnPropertyDescriptor,tM=function(e){function t(){return _w(this,t),XP(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return tM.type}},{key:"baseType",get:function(){return tM.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?$P.getNextColor(e.color):"":$P.getNextColor()}},{key:"validate",value:function(e){return!!e}},{key:"transform",value:function(e,t){if(t){var n,r=this._model.fieldOptionModel.find({field_uuid:t}),o=YP(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.get("name")===e||i.get("uuid")===e)return{value:i.get("uuid")}}}catch(e){o.e(e)}finally{o.f()}var a=qw(6),u=r.get(r.length-1),l={uuid:a,field_uuid:t,name:e.slice(0,RO.MAX_LENGTH),color:u&&this._getNewOptionColor(u.toJSON())};return this._model.fieldOptionModel.create(l),{value:a}}return{value:e}}},{key:"formatted",value:function(e,t,n){if(!e)return"";if(n){var r,o=YP(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.uuid===e)return i.name||""}}catch(e){o.e(e)}finally{o.f()}}if(!t)return Iu(e)?e:"";var a=this._getOptionValue(t,e);return(null==a?void 0:a.get("name"))||""}},{key:"_getOptionValue",value:function(e,t){var n,r=YP(this._model.fieldOptionModel.find({field_uuid:e}));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.get("uuid")===t)return o}}catch(e){r.e(e)}finally{r.f()}}},{key:"keyValue",value:function(e){return e||null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null;n&&(r=n.get("value"));var o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,value:e.value}})))}}])}(SA);tM.type=HC.SELECT,tM.baseType=qC.SELECT,tM=function(e,t,n,r){for(var o,i=r>1?void 0:r?eM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QP(t,n,i),i}([Gs()],tM);var nM=Object.defineProperty,rM=Object.getOwnPropertyDescriptor,oM=function(e,t,n,r){for(var o,i=r>1?void 0:r?rM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nM(t,n,i),i},iM=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._selectField)}}],[{key:"pluginModule",value:function(){return dd().register(tM).register(this)}}])}();function aM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function uM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lM(e,t,n){return t=dk(t),sk(e,cM()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function cM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cM=function(){return!!e})()}iM.pluginName="kernel-field-select",oM([Ks(tM)],iM.prototype,"_selectField",2),iM=oM([Gs({contrib:MA})],iM);var sM=Object.defineProperty,dM=Object.getOwnPropertyDescriptor,fM=function(e){function t(){return _w(this,t),lM(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return fM.type}},{key:"baseType",get:function(){return fM.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?$P.getNextColor(e.color):"":$P.getNextColor()}},{key:"validate",value:function(e){return!0}},{key:"transform",value:function(e,t){var n=this;if(t){var r=this._model.fieldOptionModel.find({field_uuid:t});if(Array.isArray(e)){var o,i=[],a=aM(e);try{var u=function(){var e=o.value,a=ek(r,(function(t){return t.get("name")===e}));if(a>=0)i.push({value:r.get(a).get("uuid")});else{var u=qw(6),l=r.get(r.length-1),c={uuid:u,field_uuid:t,name:(null==e?void 0:e.slice(0,RO.MAX_LENGTH))||"",color:n._getNewOptionColor(null==l?void 0:l.toJSON())};n._model.fieldOptionModel.create(c),i.push({value:c.uuid})}};for(a.s();!(o=a.n()).done;)u()}catch(e){a.e(e)}finally{a.f()}return{value:i}}var l,c=aM(r);try{for(c.s();!(l=c.n()).done;){var s=l.value;if(s.get("name")===e||s.get("uuid")===e)return{value:[s.get("uuid")]}}}catch(e){c.e(e)}finally{c.f()}var d=qw(6),f=r.get(r.length-1),p={uuid:d,field_uuid:t,name:(null==e?void 0:e.slice(0,RO.MAX_LENGTH))||"",color:this._getNewOptionColor(null==f?void 0:f.toJSON())};return this._model.fieldOptionModel.create(p),{value:[d]}}return{value:[e]}}},{key:"formatted",value:function(e,t,n){if(null==e)return"";if(n){var r,o=[],i=aM(n);try{for(i.s();!(r=i.n()).done;){var a,u=r.value,l=aM(e);try{for(l.s();!(a=l.n()).done;){var c=a.value;u.uuid===c&&o.push(u.name)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}return o.join(",")}return t?nk(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})).join(","):Array.isArray(e)?e.join(","):""}},{key:"getFieldOptionName",value:function(e,t){return null==e?[]:t?nk(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})):[]}},{key:"keyValue",value:function(e){return Array.isArray(e)?e.join(","):e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.find({field_uuid:e,record_uuid:t}),r=null;if(n.length>0){r=[];var o,i=aM(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.get("value")&&r.push(a.get("value"))}}catch(e){i.e(e)}finally{i.f()}}var u=this._safeGetCell(e,t,r);return{uuid:u.get("uuid"),fieldId:u.get("field_uuid"),recordId:u.get("record_uuid"),fieldType:u.get("field_type"),updated_at:u.get("updated_at"),formatValue:u.get("format_value"),keyValue:u.get("key_value"),value:r,by_system:u.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var o=r.map((function(n){var r=Zw(n)?null:"string"==typeof n?n:n.value;return{field_uuid:e,record_uuid:t,value:r}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o.map((function(e){return e.value})))}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=(e.value||[]).map((function(t){var r=Zw(t)?null:"string"==typeof t?t:t.value;return{field_uuid:n,record_uuid:e.recordId,value:r}}));o=o.concat(r),t.upsertModelCell(n,e.recordId,r.map((function(e){return e.value})))})),this.model.bulkCreate(o)}}])}(SA);fM.type=HC.MULTI_SELECT,fM.baseType=qC.SELECT,fM=function(e,t,n,r){for(var o,i=r>1?void 0:r?dM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sM(t,n,i),i}([Gs()],fM);var pM=Object.defineProperty,vM=Object.getOwnPropertyDescriptor,hM=function(e,t,n,r){for(var o,i=r>1?void 0:r?vM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pM(t,n,i),i},gM=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._multiSelectField)}}],[{key:"pluginModule",value:function(){return dd().register(fM).register(this)}}])}();function mM(e,t,n){return t=dk(t),sk(e,yM()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function yM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yM=function(){return!!e})()}gM.pluginName="kernel-field-multi-select",hM([Ks(fM)],gM.prototype,"_multiSelectField",2),gM=hM([Gs({contrib:MA})],gM);var bM=Object.defineProperty,wM=Object.getOwnPropertyDescriptor,_M=function(e){function t(){var e;return _w(this,t),(e=mM(this,t,arguments)).strict=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return _M.type}},{key:"baseType",get:function(){return _M.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||w_(t)},errorMsg:Lw("数字类型只能输入数字")}]}},{key:"validate",value:function(e){return null==e||V_(String(e),{precision:_M.DECIMAL_PRECISION,scale:_M.DECIMAL_SCALE})}},{key:"transform",value:function(e){return V_(e,{precision:_M.DECIMAL_PRECISION,scale:_M.DECIMAL_SCALE})?{value:e}:null}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n)return n.value?void(this.strict&&!this.getVerify(n.value).verify||(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value))):(this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value))}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(SA);_M.type=HC.NUMBER,_M.baseType=qC.NUMBER,_M.DECIMAL_PRECISION=27,_M.DECIMAL_SCALE=9,_M=function(e,t,n,r){for(var o,i=r>1?void 0:r?wM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bM(t,n,i),i}([Gs()],_M);var kM=Object.defineProperty,CM=Object.getOwnPropertyDescriptor,EM=function(e,t,n,r){for(var o,i=r>1?void 0:r?CM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kM(t,n,i),i},OM=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._numberField)}}],[{key:"pluginModule",value:function(){return dd().register(_M).register(this)}}])}();function SM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function xM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jM(e,t,n){return t=dk(t),sk(e,DM()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function DM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DM=function(){return!!e})()}OM.pluginName="kernel-field-number",EM([Ks(_M)],OM.prototype,"_numberField",2),OM=EM([Gs({contrib:MA})],OM);var AM=Object.defineProperty,RM=Object.getOwnPropertyDescriptor,FM=function(e){function t(){return _w(this,t),jM(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return FM.type}},{key:"baseType",get:function(){return FM.baseType}},{key:"validate",value:function(e){return!!e&&!(null==e?void 0:e.some((function(e){return null==(null==e?void 0:e.uid)||null==(null==e?void 0:e.name)||null==(null==e?void 0:e.login)})))}},{key:"transform",value:function(e){if("string"==typeof e)return null;var t=[];if(Array.isArray(e)){var n,r=SM(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.uid&&o.name&&o.login&&o.icon&&t.push({uid:o.uid,name:o.name,icon:o.icon,login:o.login})}}catch(e){r.e(e)}finally{r.f()}}return 0===t.length?null:{value:t}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?(e instanceof K_&&(e=e.toJSON()),Array.isArray(e)?e.filter((function(e){return!!e.uid&&"null"!==e.uid})).map((function(e){return"".concat(e.uid)})).join(","):null):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this,r=nk(this.model.find({field_uuid:e,record_uuid:t}),(function(e){var t=n._model.userModel.findOne({uid:String(e.get("uid"))});if(t)return{uuid:e.get("uuid"),uid:e.get("uid"),name:t.get("name")||e.get("name"),login:t.get("login"),icon:t.get("icon")||e.get("icon")}})).filter((function(e){return!!e})),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){var r=this;if(n){var o=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),o&&0!==o.length){var i=o.map((function(n){var o=String(n.uid),i=r._model.userModel.findOne({uid:o}),a=null;return i||(a=r._model.userModel.create({uid:o,name:n.name,icon:n.icon,login:n.login})),{uuid:n.uuid||(null==a?void 0:a.uuid),field_uuid:e,record_uuid:t,uid:o,name:n.name,icon:n.icon||(null==i?void 0:i.get("icon")),login:n.login||(null==i?void 0:i.get("login"))}}));i=Xu(i,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(i),this.upsertModelCell(e,t,i)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(r){var o=String(r.uid),i=null;return t._model.userModel.findOne({uid:o})||(i=t._model.userModel.create({uid:o,name:r.name,icon:r.icon,login:r.login})),{uuid:r.uuid||(null==i?void 0:i.uuid),field_uuid:n,record_uuid:e.recordId,uid:o,name:r.name,icon:r.icon,login:r.login}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),o=Xu(o,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(o)}}])}(SA);FM.type=HC.MENTION,FM.baseType=qC.URI,FM.MAX_LENGTH=128,FM=function(e,t,n,r){for(var o,i=r>1?void 0:r?RM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AM(t,n,i),i}([Gs()],FM);var IM=Object.defineProperty,PM=Object.getOwnPropertyDescriptor,MM=function(e,t,n,r){for(var o,i=r>1?void 0:r?PM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IM(t,n,i),i},TM=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._mentionField)}}],[{key:"pluginModule",value:function(){return dd().register(FM).register(this)}}])}();function NM(e,t,n){return t=dk(t),sk(e,BM()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function BM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BM=function(){return!!e})()}TM.pluginName="kernel-field-mention",MM([Ks(FM)],TM.prototype,"_mentionField",2),TM=MM([Gs({contrib:MA})],TM);var VM=Object.defineProperty,LM=Object.getOwnPropertyDescriptor,zM=function(e){function t(){return _w(this,t),NM(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldDateModel}},{key:"type",get:function(){return zM.type}},{key:"baseType",get:function(){return zM.baseType}},{key:"validate",value:function(e){return!!e&&!!B_(e)}},{key:"transform",value:function(e){try{return{value:i()(e).toString()}}catch(e){return null}}},{key:"formatted",value:function(e,t,n){return null==e||""===e?"":w_(e)?13===String(e).length?i()(Number(e)).format((null==n?void 0:n.date_format)||zM.format):i.a.unix(Number(e)).format((null==n?void 0:n.date_format)||zM.format):i()(e).format((null==n?void 0:n.date_format)||zM.format)}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t);return this.formatted(r.value,void 0,n)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this.model.findOne({field_uuid:e,record_uuid:t}),o=null==r?void 0:r.get("value"),i=this._safeGetCell(e,t,o,n);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),value:null==r?void 0:r.get("value"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n,r){var o=this.getModelCell(e,t);return o||(this.upsertModelCell(e,t,n,!0,r),o=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),o||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r,o){this.updateModelCell(e,t,this.formatted(n,void 0,o),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n,r){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value,void 0,r);if(this.validate(n.value)&&n){var o=Xw(n.value)?n.value.getTime():n.value;this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:o}),this.upsertModelCell(e,t,o,void 0,r)}}}},{key:"bulkSetCell",value:function(e,t){var n=this,r=e[0].fieldId,o=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:r,record_uuid:o}),this.model.bulkCreate(e.map((function(e){if(!n.validate(e.value||""))return null;var o=Xw(e.value)?e.value.getTime():e.value;return n.upsertModelCell(r,e.recordId,o,void 0,t),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:o}})).filter((function(e){return!!e})))}}])}(SA);zM.type=HC.DATE,zM.baseType=qC.DATE,zM.format="YYYY-MM-DD",zM=function(e,t,n,r){for(var o,i=r>1?void 0:r?LM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VM(t,n,i),i}([Gs()],zM);var UM=Object.defineProperty,HM=Object.getOwnPropertyDescriptor,qM=function(e,t,n,r){for(var o,i=r>1?void 0:r?HM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UM(t,n,i),i},WM=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._dateField)}}],[{key:"pluginModule",value:function(){return dd().register(zM).register(this)}}])}();function $M(e,t,n){return t=dk(t),sk(e,GM()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function GM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GM=function(){return!!e})()}WM.pluginName="kernel-field-date",qM([Ks(zM)],WM.prototype,"_dateField",2),WM=qM([Gs({contrib:MA})],WM);var KM=Object.defineProperty,YM=Object.getOwnPropertyDescriptor,JM=function(e){function t(){return _w(this,t),$M(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldBooleanModel}},{key:"type",get:function(){return JM.type}},{key:"baseType",get:function(){return JM.baseType}},{key:"validate",value:function(e){return Pu(e)}},{key:"transform",value:function(e){return e&&("1"===e||"是"===e||"true"===e||"yes"===e.toLowerCase()||"✅"===e)?{value:!0}:null}},{key:"formatted",value:function(e){return null==e?"false":e?"true":"false"}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=(null==n?void 0:n.get("value"))||!1,o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:(null==n?void 0:n.get("value"))||!1,updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){n&&(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value))}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(SA);JM.type=HC.CHECKBOX,JM.baseType=qC.BOOLEAN,JM=function(e,t,n,r){for(var o,i=r>1?void 0:r?YM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KM(t,n,i),i}([Gs()],JM);var XM=Object.defineProperty,ZM=Object.getOwnPropertyDescriptor,QM=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XM(t,n,i),i},eT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._checkboxField)}}],[{key:"pluginModule",value:function(){return dd().register(JM).register(this)}}])}();function tT(e,t,n){return t=dk(t),sk(e,nT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function nT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nT=function(){return!!e})()}eT.pluginName="kernel-field-checkbox",QM([Ks(JM)],eT.prototype,"_checkboxField",2),eT=QM([Gs({contrib:MA})],eT);var rT=Object.defineProperty,oT=Object.getOwnPropertyDescriptor,iT=function(e){function t(){var e;return _w(this,t),(e=tT(this,t,arguments)).editDisable=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return iT.type}},{key:"baseType",get:function(){return iT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("creator_id"))}),o=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),uid:r.get("uid"),login:r.get("login")}:null;return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:null==n?void 0:n.get("updated_at"),value:o,formatValue:o?this.formatted(o):""}}}])}(SA);iT.type=HC.USER_ID,iT.baseType=qC.SYSTEM,iT=function(e,t,n,r){for(var o,i=r>1?void 0:r?oT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rT(t,n,i),i}([Gs()],iT);var aT=Object.defineProperty,uT=Object.getOwnPropertyDescriptor,lT=function(e,t,n,r){for(var o,i=r>1?void 0:r?uT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aT(t,n,i),i},cT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._userIdField)}}],[{key:"pluginModule",value:function(){return dd().register(iT).register(this)}}])}();function sT(e,t,n){return t=dk(t),sk(e,dT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function dT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dT=function(){return!!e})()}cT.pluginName="kernel-field-user-id",lT([Ks(iT)],cT.prototype,"_userIdField",2),cT=lT([Gs({contrib:MA})],cT);var fT=Object.defineProperty,pT=Object.getOwnPropertyDescriptor,vT=function(e){function t(){var e;return _w(this,t),(e=sT(this,t,arguments)).editDisable=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return vT.type}},{key:"baseType",get:function(){return vT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":(w_(e)&&(e=new Date(Number(e))),i()(e).format(vT.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=null==n?void 0:n.get("created_at");return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:r,formatValue:this.formatted(r),keyValue:this.keyValue(r),updated_at:null==n?void 0:n.get("updated_at")}}}])}(SA);vT.type=HC.CREATED_AT,vT.baseType=qC.SYSTEM,vT.format="YYYY-MM-DD HH:mm:ss",vT=function(e,t,n,r){for(var o,i=r>1?void 0:r?pT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fT(t,n,i),i}([Gs()],vT);var hT=Object.defineProperty,gT=Object.getOwnPropertyDescriptor,mT=function(e,t,n,r){for(var o,i=r>1?void 0:r?gT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hT(t,n,i),i},yT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._createdAtField)}}],[{key:"pluginModule",value:function(){return dd().register(vT).register(this)}}])}();function bT(e,t,n){return t=dk(t),sk(e,wT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function wT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wT=function(){return!!e})()}yT.pluginName="kernel-field-created-at",mT([Ks(vT)],yT.prototype,"_createdAtField",2),yT=mT([Gs({contrib:MA})],yT);var _T=Object.defineProperty,kT=Object.getOwnPropertyDescriptor,CT=function(e){function t(){var e;return _w(this,t),(e=bT(this,t,arguments)).editDisable=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return CT.type}},{key:"baseType",get:function(){return CT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("modifier_id"))}),o=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),login:r.get("login"),uid:r.get("uid")}:null;return{uuid:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:o,formatValue:o?this.formatted(o):"",updated_at:n.get("updated_at")}}}])}(SA);CT.type=HC.MODIFIER_ID,CT.baseType=qC.SYSTEM,CT=function(e,t,n,r){for(var o,i=r>1?void 0:r?kT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_T(t,n,i),i}([Gs()],CT);var ET=Object.defineProperty,OT=Object.getOwnPropertyDescriptor,ST=function(e,t,n,r){for(var o,i=r>1?void 0:r?OT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ET(t,n,i),i},xT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._modifierIdField)}}],[{key:"pluginModule",value:function(){return dd().register(CT).register(this)}}])}();function jT(e,t,n){return t=dk(t),sk(e,DT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function DT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DT=function(){return!!e})()}xT.pluginName="kernel-field-modifier-id",ST([Ks(CT)],xT.prototype,"_modifierIdField",2),xT=ST([Gs({contrib:MA})],xT);var AT=Object.defineProperty,RT=Object.getOwnPropertyDescriptor,FT=function(e){function t(){var e;return _w(this,t),(e=jT(this,t,arguments)).editDisable=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return FT.type}},{key:"baseType",get:function(){return FT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":(w_(e)&&(e=new Date(Number(e))),i()(e).format(FT.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=n.get("updated_at");return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:r,value:r,formatValue:this.formatted(r),keyValue:this.keyValue(r)}}}])}(SA);FT.type=HC.UPDATED_AT,FT.baseType=qC.SYSTEM,FT.format="YYYY-MM-DD HH:mm:ss",FT=function(e,t,n,r){for(var o,i=r>1?void 0:r?RT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AT(t,n,i),i}([Gs()],FT);var IT=Object.defineProperty,PT=Object.getOwnPropertyDescriptor,MT=function(e,t,n,r){for(var o,i=r>1?void 0:r?PT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IT(t,n,i),i},TT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._updatedAtField)}}],[{key:"pluginModule",value:function(){return dd().register(FT).register(this)}}])}();function NT(e,t,n){return t=dk(t),sk(e,BT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function BT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BT=function(){return!!e})()}TT.pluginName="kernel-field-updated-at",MT([Ks(FT)],TT.prototype,"_updatedAtField",2),TT=MT([Gs({contrib:MA})],TT);var VT=Object.defineProperty,LT=Object.getOwnPropertyDescriptor,zT=function(e){function t(){return _w(this,t),NT(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return zT.type}},{key:"baseType",get:function(){return zT.baseType}},{key:"validate",value:function(e){return null==e||(!((null==e?void 0:e.length)>zT.MAX_LENGTH)||(e=e.substring(0,zT.MAX_LENGTH),!1))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e||"string"!=typeof e?"":e.replace(/[\n\t\r]/gi,"").trim()}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:null==n?void 0:n.get("value"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(SA);zT.type=HC.TEXT,zT.baseType=qC.STRING,zT.MAX_LENGTH=5e3,zT=function(e,t,n,r){for(var o,i=r>1?void 0:r?LT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VT(t,n,i),i}([Gs()],zT);var UT=Object.defineProperty,HT=Object.getOwnPropertyDescriptor,qT=function(e,t,n,r){for(var o,i=r>1?void 0:r?HT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UT(t,n,i),i},WT=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._textField)}}],[{key:"pluginModule",value:function(){return dd().register(zT).register(this)}}])}();function $T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return GT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function GT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function KT(e,t,n){return t=dk(t),sk(e,YT()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function YT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YT=function(){return!!e})()}WT.pluginName="kernel-field-text",qT([Ks(zT)],WT.prototype,"_textField",2),WT=qT([Gs({contrib:MA})],WT);var JT=Object.defineProperty,XT=Object.getOwnPropertyDescriptor,ZT=function(e){function t(){return _w(this,t),KT(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return ZT.type}},{key:"baseType",get:function(){return ZT.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=$T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size||null==r.width||null==r.height)return!1;var o=r.name;if(o.length>ZT.MAX_LENGTH&&(r.name=o.substring(0,ZT.MAX_LENGTH)),!N_(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e)return null;if("string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n))return null}else if(Jw(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return e?"string"==typeof e||null==e.name||null==e.src||null==e.size||null==e.width||null==e.height?null:{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}:null}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return null==e?null:e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(",")}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=nk(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon"),width:e.get("width"),height:e.get("height")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var o=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(o)}}])}(SA);ZT.type=HC.IMAGE,ZT.baseType=qC.URI,ZT.MAX_LENGTH=128,ZT=function(e,t,n,r){for(var o,i=r>1?void 0:r?XT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JT(t,n,i),i}([Gs()],ZT);var QT=Object.defineProperty,eN=Object.getOwnPropertyDescriptor,tN=function(e,t,n,r){for(var o,i=r>1?void 0:r?eN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QT(t,n,i),i},nN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._imageField)}}],[{key:"pluginModule",value:function(){return dd().register(ZT).register(this)}}])}();function rN(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oN(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iN(e,t,n){return t=dk(t),sk(e,aN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function aN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aN=function(){return!!e})()}nN.pluginName="kernel-field-image",tN([Ks(ZT)],nN.prototype,"_imageField",2),nN=tN([Gs({contrib:MA})],nN);var uN=Object.defineProperty,lN=Object.getOwnPropertyDescriptor,cN=function(e){function t(){return _w(this,t),iN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return cN.type}},{key:"baseType",get:function(){return cN.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=rN(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size)return!1;var o=r.name;if(o.length>cN.MAX_LENGTH&&(r.name=o.substring(0,cN.MAX_LENGTH)),!N_(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e)return null;if("string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n))return null;if(0===n.length)return null}else if(Jw(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return"string"==typeof e||null==e.name||null==e.src||null==e.size?null:{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(","):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=nk(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var o=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(o)}}])}(SA);cN.type=HC.FILE,cN.baseType=qC.URI,cN.MAX_LENGTH=128,cN=function(e,t,n,r){for(var o,i=r>1?void 0:r?lN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uN(t,n,i),i}([Gs()],cN);var sN=Object.defineProperty,dN=Object.getOwnPropertyDescriptor,fN=function(e,t,n,r){for(var o,i=r>1?void 0:r?dN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sN(t,n,i),i},pN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._fileField)}}],[{key:"pluginModule",value:function(){return dd().register(cN).register(this)}}])}();pN.pluginName="kernel-field-file",fN([Ks(cN)],pN.prototype,"_fileField",2),pN=fN([Gs({contrib:MA})],pN);var vN=Object.defineProperty,hN=Object.getOwnPropertyDescriptor,gN=function(e,t,n,r){for(var o,i=r>1?void 0:r?hN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vN(t,n,i),i},mN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._linkField)}}],[{key:"pluginModule",value:function(){return dd().contribution(SF).register(LF).register(AF).register(PF).register(this)}}])}();function yN(e,t,n){return t=dk(t),sk(e,bN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function bN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bN=function(){return!!e})()}mN.pluginName="kernel-field-link",gN([Ks(LF)],mN.prototype,"_linkField",2),mN=gN([Gs({contrib:MA})],mN);var wN=Object.defineProperty,_N=Object.getOwnPropertyDescriptor,kN=function(e){function t(){return _w(this,t),yN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return kN.type}},{key:"baseType",get:function(){return kN.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||Qw(t)},errorMsg:Lw("请输入有效邮箱")}]}},{key:"validate",value:function(e){if(null!=e)return!((null==e?void 0:e.length)>kN.MAX_LENGTH)&&!("string"==typeof e&&!F_(e))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e?"":e}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:null==n?void 0:n.get("value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(SA);kN.type=HC.EMAIL,kN.baseType=qC.STRING,kN.MAX_LENGTH=128,kN=function(e,t,n,r){for(var o,i=r>1?void 0:r?_N(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wN(t,n,i),i}([Gs()],kN);var CN=Object.defineProperty,EN=Object.getOwnPropertyDescriptor,ON=function(e,t,n,r){for(var o,i=r>1?void 0:r?EN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&CN(t,n,i),i},SN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._emailField)}}],[{key:"pluginModule",value:function(){return dd().register(kN).register(this)}}])}();function xN(e,t,n){return t=dk(t),sk(e,jN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function jN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jN=function(){return!!e})()}SN.pluginName="kernel-field-email",ON([Ks(kN)],SN.prototype,"_emailField",2),SN=ON([Gs({contrib:MA})],SN);var DN=Object.defineProperty,AN=Object.getOwnPropertyDescriptor,RN=function(e){function t(){return _w(this,t),xN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return RN.type}},{key:"baseType",get:function(){return RN.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||/^([0-9]|\+|-)+$/gi.test(t)},errorMsg:Lw("请输入有效手机号")}]}},{key:"validate",value:function(e){return null==e||!(e.length>RN.MAX_LENGTH)}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e?"":e}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:r,verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(SA);RN.type=HC.PHONE,RN.baseType=qC.STRING,RN.MAX_LENGTH=128,RN=function(e,t,n,r){for(var o,i=r>1?void 0:r?AN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DN(t,n,i),i}([Gs()],RN);var FN=Object.defineProperty,IN=Object.getOwnPropertyDescriptor,PN=function(e,t,n,r){for(var o,i=r>1?void 0:r?IN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FN(t,n,i),i},MN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._phoneField)}}],[{key:"pluginModule",value:function(){return dd().register(RN).register(this)}}])}();function TN(e,t,n){return t=dk(t),sk(e,NN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function NN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NN=function(){return!!e})()}MN.pluginName="kernel-field-phone",PN([Ks(RN)],MN.prototype,"_phoneField",2),MN=PN([Gs({contrib:MA})],MN);var BN=function(e){function t(){return _w(this,t),TN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createFilter(e.viewId,e.filter),!0}}])}($A);function VN(e,t,n){return t=dk(t),sk(e,LN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function LN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LN=function(){return!!e})()}BN.commandName="createFilter";var zN=function(e){function t(){return _w(this,t),VN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.viewId||(e.viewId=this.readService.getActiveView().get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.removeFilter(e.filterId),!0}}])}($A);function UN(e,t,n){return t=dk(t),sk(e,HN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function HN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HN=function(){return!!e})()}zN.commandName="removeFilter";var qN=function(e){function t(){return _w(this,t),UN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFilter(e.viewId,e.filter),!0}}])}($A);qN.commandName="updateFilter";var WN=Object.defineProperty,$N=Object.getOwnPropertyDescriptor,GN=function(e,t,n,r){for(var o,i=r>1?void 0:r?$N(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WN(t,n,i),i},KN=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(BN.commandName,BN),this.commandService.registerCommand(zN.commandName,zN),this.commandService.registerCommand(qN.commandName,qN)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function YN(e,t,n){return t=dk(t),sk(e,JN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function JN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JN=function(){return!!e})()}KN.pluginName="kernel-filter",GN([Ks(nR)],KN.prototype,"commandService",2),KN=GN([Gs({contrib:MA})],KN);var XN=function(e){function t(){return _w(this,t),YN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.removeFieldOption(e.optionId),!0}}])}($A);function ZN(e,t,n){return t=dk(t),sk(e,QN()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QN=function(){return!!e})()}XN.commandName="removeFieldOption";var eB=function(e){function t(){return _w(this,t),ZN(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=this.readService.getFieldOptions(e.fieldId)||[],r=null==(t=n.get(n.length-1))?void 0:t.get("uuid");return this.writeService.createFieldOption(e.fieldId,e.fieldOption,r),!0}}])}($A);function tB(e,t,n){return t=dk(t),sk(e,nB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function nB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nB=function(){return!!e})()}eB.commandName="createFieldOption";var rB=function(e){function t(){return _w(this,t),tB(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.updateFieldOption(e.optionId,e.fieldOption),!0}}])}($A);rB.commandName="updateFieldOption";var oB=Object.defineProperty,iB=Object.getOwnPropertyDescriptor,aB=function(e,t,n,r){for(var o,i=r>1?void 0:r?iB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oB(t,n,i),i},uB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(eB.commandName,eB),this.commandService.registerCommand(rB.commandName,rB),this.commandService.registerCommand(XN.commandName,XN)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function lB(e,t,n){return t=dk(t),sk(e,cB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function cB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cB=function(){return!!e})()}uB.pluginName="kernel-group",aB([Ks(nR)],uB.prototype,"commandService",2),uB=aB([Gs({contrib:MA})],uB);var sB=function(e){function t(){return _w(this,t),lB(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createSort(e.viewId,e.sort,!1),!0}}])}($A);function dB(e,t,n){return t=dk(t),sk(e,fB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fB=function(){return!!e})()}sB.commandName="createSort";var pB=function(e){function t(){return _w(this,t),dB(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeSort(e.viewId),!0}}])}($A);function vB(e,t,n){return t=dk(t),sk(e,hB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function hB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hB=function(){return!!e})()}pB.commandName="removeSort";var gB=function(e){function t(){return _w(this,t),vB(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateSort(e.viewId,e.sort,e.auto),!0}}])}($A);gB.commandName="updateSort";var mB=Object.defineProperty,yB=Object.getOwnPropertyDescriptor,bB=function(e,t,n,r){for(var o,i=r>1?void 0:r?yB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mB(t,n,i),i},wB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(sB.commandName,sB),this.commandService.registerCommand(pB.commandName,pB),this.commandService.registerCommand(gB.commandName,gB)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();wB.pluginName="kernel-sort",bB([Ks(nR)],wB.prototype,"commandService",2),wB=bB([Gs({contrib:MA})],wB);var _B=Object.defineProperty,kB=Object.getOwnPropertyDescriptor,CB=function(e,t,n,r){for(var o,i=r>1?void 0:r?kB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_B(t,n,i),i},EB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this._contentService.setProcessor(this._processor)}}],[{key:"pluginModule",value:function(){return dd().contribution(ZF).register(nI).register(KF).register(cI).register(this)}}])}();function OB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OB(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jB(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function jB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DB(e,t,n){return t=dk(t),sk(e,AB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function AB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AB=function(){return!!e})()}EB.pluginName="kernel-process",CB([Ks(TD)],EB.prototype,"_contentService",2),CB([Ks(cI)],EB.prototype,"_processor",2),EB=CB([Gs({contrib:MA})],EB);var RB=function(e){function t(){var e;return _w(this,t),(e=DB(this,t,arguments))._bulkSetCellMap=new Map,e._targetRecordIndexCache=new Map,e._targetFieldIndexCache=new Map,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n,r=e.pasteData,o=e.selection,i=e.colCount,a=r.cells,u=r.tableId,l=o.startRowIndex,c=o.startColIndex,s=o.rowCount,d=o.colCount,f=s*d,p=a.length,v=a[0].length,h=p*v,g=1===h,m=g&&f>1,y=m?s:p,b=m?d:v,w=[],_=[],k=(null==(t=this.readService.getActiveView())?void 0:t.get("uuid"))||"";try{if(g&&!m){var C=a[0][0],E=this.readService.getCellByIndexes(l,c);if(_.push(null==E?void 0:E.recordId),!C||!E)return{code:-1,message:"fromCell, targetCell不存在 never"};if(fE.isSystemType(E.fieldType))return{code:1,message:Lw("系统字段不支持粘贴修改")};var O=this._getPasteCellDataToUpdate(C,E.fieldType,E.fieldId,E.recordId,l,u);this._setCell(E.recordId,E.fieldId,O,!1)}else{var S=this.readService.getViewGroup(),x=this._getRecordByIndex(l),j=(null==x?void 0:x.get("group_item_key"))||"",D=0,A="",R=Number.MAX_SAFE_INTEGER;if(S){var F=ek(S.options,(function(e){return e.get("uuid")===j}));-1===F&&(F=S.options.length),R=this.readService.getGroupViewRecords().slice(0,F+1).map((function(e){return e.viewRecords.length})).reduce((function(e,t){return e+t}),0)-1}for(var I=0;I<y;I++){var P=I+l,M=this._getRecordByIndex(P),T=null==M?void 0:M.get("record_uuid");!T||P>R?D+=1:(_.push(T),A=T)}if(D>0){for(var N=0;N<D;N++)w.push(qw(32));this.writeService.createEmptyRecord({uuid:w,viewId:k,groupItemKey:j,sourceRecordId:A}),this._updateRecordIndexCache()}for(var B=0,V=0;V<y;V++){var L=V+l,z=this._getRecordByIndex(L);if(z)for(var U=z.get("record_uuid"),H=0;H<b;H++){var q=H+c;if(!(q>=i)){var W=m?a[0][0]:null==(n=null==a?void 0:a[V])?void 0:n[H];if(W){var $=this._getFieldByIndex(q);if(!$)throw new Error("targetField不存在 never");if(fE.isSystemType($.get("type")))B++;else{var G=$.get("uuid");if((null==S?void 0:S.field.get("uuid"))!==G){var K=this._getPasteCellDataToUpdate(W,$.get("type"),G,U,L,u);this._setCell(U,G,K,!0)}}}}}}var Y=gw(this._bulkSetCellMap.keys());if(Y.length>0){var J,X=xB(Y);try{for(X.s();!(J=X.n()).done;){var Z=J.value,Q=this._bulkSetCellMap.get(Z);Q&&this.writeService.bulkSetCell(Q)}}catch(e){X.e(e)}finally{X.f()}}if(B===h)return{code:1,message:Lw("系统字段不支持粘贴修改")}}}catch(e){var ee="";return e instanceof Error?(ee=e.message,console.error(e.stack)):ee="string"==typeof e?e:"Unknown error",{code:-1,message:ee}}finally{this._bulkSetCellMap.clear(),this._targetRecordIndexCache.clear(),this._targetFieldIndexCache.clear()}return{code:0,message:Lw("粘贴成功"),data:{createRecordIds:w,updateRecordIds:_}}}},{key:"_setCell",value:function(e,t,n,r){var o=this.readService.getCell(t,e);if(!o)throw new Error("oldCell 不存在 never");var i=this.readService.getTable().get("uuid"),a=SB(SB({},o),{},{value:n.cellValue,formatValue:n.cellFormatValue||""}),u=n.fromTableId&&n.fromTableId!==i;if(n.fromFieldId!==n.toFieldId||u)n.fromFieldType&&this.writeService.safeSetCell(a,n.fromFieldType,n.toFieldType,n.fromFieldId,n.toFieldId);else if(r){var l=this._bulkSetCellMap.get(n.toFieldId)||[];l=l.concat(a),this._bulkSetCellMap.set(n.toFieldId,l)}else this.writeService.setCell(a)}},{key:"_getPasteCellDataToUpdate",value:function(e,t,n,r,o,i){return{cellValue:e.value,cellFormatValue:e.formatValue,toFieldType:t,toFieldId:n,toRecordId:r,toRecordIndex:o,fromFieldType:e.fieldType,fromFieldId:e.fieldId,fromTableId:i}}},{key:"_updateRecordIndexCache",value:function(){var e=this;return nk(this.readService.getFlatViewRecords(),(function(t,n){e._targetRecordIndexCache.set(n,t)})),this._targetRecordIndexCache}},{key:"_getRecordByIndex",value:function(e){var t=this._targetRecordIndexCache.get(e);return t||(this._updateRecordIndexCache(),this._targetRecordIndexCache.get(e)||null)}},{key:"_getFieldByIndex",value:function(e){var t=this._targetFieldIndexCache.get(e);if(t)return t;var n=this.readService.getFieldByIndex(e);return n?(this._targetFieldIndexCache.set(e,n),n):null}}])}($A);RB.commandName="pasteUpdateRecords";var FB=Object.defineProperty,IB=Object.getOwnPropertyDescriptor,PB=function(e,t,n,r){for(var o,i=r>1?void 0:r?IB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FB(t,n,i),i},MB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this._commandService.registerCommand(RB.commandName,RB)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();MB.pluginName="kernel-clipboard",PB([Ks(nR)],MB.prototype,"_commandService",2),MB=PB([Gs({contrib:MA})],MB);var TB=Is.defineToken("SelectionKernelPluginContribution"),NB=function(e){return e.NONE="none",e.CARET="caret",e.RANGE="range",e}(NB||{}),BB=function(){function e(t,n,r,o){_w(this,e),this._row=t,this._column=n,this._rowCount=r,this._columnCount=o}return Ew(e,[{key:"row",get:function(){return this._row}},{key:"column",get:function(){return this._column}},{key:"rowCount",get:function(){return this._rowCount}},{key:"columnCount",get:function(){return this._columnCount}},{key:"isAtRowStart",get:function(){return 0===this._row}},{key:"isAtRowEnd",get:function(){return this._row===this._rowCount-1}},{key:"isAtColumnStart",get:function(){return 0===this._column}},{key:"isAtColumnEnd",get:function(){return this._column===this._columnCount-1}},{key:"isAtStart",get:function(){return this.isAtRowStart&&this.isAtColumnStart}},{key:"isAtEnd",get:function(){return this.isAtRowEnd&&this.isAtColumnEnd}},{key:"clone",value:function(){return new e(this._row,this._column,this._rowCount,this._columnCount)}}],[{key:"equal",value:function(e,t){return e===t||e._row===t._row&&e._column===t._column}}])}();function VB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return LB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LB(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function LB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zB(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HB(e,t,n){return t=dk(t),sk(e,qB()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function qB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qB=function(){return!!e})()}var WB=function(e){function t(){return _w(this,t),HB(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"_getCellsByRange",value:function(e,t,n,r){for(var o=e.start,i=e.end,a=i.row-o.row+1,u=i.column-o.column+1,l=Array.from({length:a}).fill(null).map((function(){return Array.from({length:u}).fill(null)})),c=[],s=0;s<u;s++){var d=t.get(s+o.column).get("field"),f=(null==d?void 0:d.get("uuid"))||"";if((null==r?void 0:r.field.get("uuid"))===f)break;if(fE.isSystemType(null==d?void 0:d.get("type")))break;d&&c.push(UB({},d.toJSON()));for(var p=0;p<a;p++){var v=n.get(p+o.row).get("record_uuid"),h=this.readService.getCell(f,v);h&&(l[p][s]=h)}}return{fields:c,cells:l}}},{key:"getCellsBySelection",value:function(e,t,n,r){if(!e)return null;var o,i=[],a=VB(e.ranges);try{for(a.s();!(o=a.n()).done;){var u=o.value,l=this._getCellsByRange(u,t,n,r);i=[].concat(gw(i),gw(l.cells))}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"execute",value:function(e){var t=this,n=e.preSelection,r=e.newSelection,o=this.readService.getActiveView(),i=this.readService.getViewGroup(),a=this.readService.getViewFields(null==o?void 0:o.get("uuid"))||[],u=this.readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[],l=this.getCellsBySelection(n,a,u,i)||[],c=[],s=n.getRangeAt(0).start,d=n.getRangeAt(n.rangeCount-1).end,f=r.getRangeAt(0).start,p=r.getRangeAt(r.rangeCount-1).end;if(p.row>d.row)for(var v=p.row-d.row,h=0;h<v;h++)for(var g=u.get(h+d.row+1).get("record_uuid"),m=l[0].length,y=0;y<m;y++){var b=l[0][y];if(!b)break;var w=this.readService.getCell(b.fieldId,g),_=l[h%l.length][y];w&&_&&c.push(UB(UB({},w),{},{value:_.value,formatValue:_.formatValue||""}))}else if(f.row<s.row)for(var k=s.row-f.row,C=0;C<k;C++)for(var E=u.get(s.row-C-1).get("record_uuid"),O=l[0].length,S=0;S<O;S++){var x=l[0][S];if(!x)break;var j=this.readService.getCell(x.fieldId,E),D=l[(C+l.length-1)%l.length][S];j&&D&&c.push(UB(UB({},j),{},{value:D.value,formatValue:D.formatValue||""}))}return Object.values(Fu(c,(function(e){return e.fieldId}))).forEach((function(e){t.writeService.bulkSetCell(e)})),!0}}])}($A);WB.commandName="autofillCells";var $B=Object.defineProperty,GB=Object.getOwnPropertyDescriptor,KB=function(e,t,n,r){for(var o,i=r>1?void 0:r?GB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$B(t,n,i),i},YB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(WB.commandName,WB)}}],[{key:"pluginModule",value:function(){return dd().contribution(TB).register(this).register(BB)}}])}();YB.pluginName="kernel-selection",KB([Ks(nR)],YB.prototype,"commandService",2),YB=KB([Gs({contrib:MA})],YB);var JB=Object.defineProperty,XB=Object.getOwnPropertyDescriptor,ZB=function(e,t,n,r){for(var o,i=r>1?void 0:r?XB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JB(t,n,i),i},QB=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function eV(e,t,n){return t=dk(t),sk(e,tV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function tV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tV=function(){return!!e})()}QB.pluginName="kernel-expand-record",ZB([Ks(nR)],QB.prototype,"commandService",2),QB=ZB([Gs({contrib:MA})],QB);var nV=function(e){function t(){return _w(this,t),eV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.upsertStat(e.viewId,e.fieldId,e.type),!0}}])}($A);function rV(e,t,n){return t=dk(t),sk(e,oV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function oV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oV=function(){return!!e})()}nV.commandName="updateStat";var iV=function(e){function t(){return _w(this,t),rV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeStat(e.viewId,e.fieldId),!0}}])}($A);iV.commandName="removeStat";var aV=Object.defineProperty,uV=Object.getOwnPropertyDescriptor,lV=function(e,t,n,r){for(var o,i=r>1?void 0:r?uV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aV(t,n,i),i},cV=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(nV.commandName,nV),this.commandService.registerCommand(iV.commandName,iV)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function sV(e,t,n){return t=dk(t),sk(e,dV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function dV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dV=function(){return!!e})()}cV.pluginName="kernel-statistics",lV([Ks(nR)],cV.prototype,"commandService",2),cV=lV([Gs({contrib:MA})],cV);var fV=function(e){function t(){return _w(this,t),sV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t,n=null==(t=this.readService.getActiveView())?void 0:t.get("uuid"),r=this.readService.getViewFilters(n).toJSON();if(e||(e={direction:"after"}),e.uuid||(e.uuid=qw(32)),e.recordCount>1){e.uuid=[];for(var o=0;o<e.recordCount;o++)e.uuid.push(qw(32))}if(e.viewId||(e.viewId=n),1===r.length){var i=r[0],a=i.func;a!==ZC.equalTo&&a!==ZC.is&&a!==ZC.isExactly&&a!==ZC.hasAnyOf&&a!==ZC.hasAllOf||(e.filter=i)}return e}},{key:"execute",value:function(e){return this.writeService.createEmptyRecord(e)}},{key:"afterExecute",value:function(e,t,n){var r,o=this,i=e.viewId,a=this.readService.getViewFilters(i).length>0&&!e.filter&&n.isNeedRefreshFilter(e.viewId,null,t[0].uuid,null,!0),u=!!(null==(r=this.readService.getViewConfig(i))?void 0:r.get("keep_sort"));if(a||u){var l=a?fA.FILTER:fA.SORT;setTimeout((function(){null==n||n.emitBeforeRefresh(l,"addEmptyRecord",{uuid:e.uuid},UC(jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.writeService.refreshView(i),n.emitAfterRefresh(l),null==(t=o.context)||t.destroy();case 3:case"end":return e.stop()}}),e)}))))}),300)}}}])}($A);function pV(e,t,n){return t=dk(t),sk(e,vV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function vV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vV=function(){return!!e})()}fV.commandName="addEmptyRecord";var hV=function(e){function t(){return _w(this,t),pV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.uuid||(e.uuid=qw(32)),e}},{key:"execute",value:function(e){var t=e.uuid,n=e.sourceRecordId,r=e.modifierId,o=this.readService.getActiveView();return!o||(this.writeService.copyRecord({uuid:t,viewId:null==o?void 0:o.get("uuid"),sourceRecordId:n,modifierId:r}),!0)}}])}($A);function gV(e,t,n){return t=dk(t),sk(e,mV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function mV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mV=function(){return!!e})()}hV.commandName="copyRecord";var yV=function(e){function t(){return _w(this,t),gV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveView();if(!t)return!0;var n=e.recordIds||[];return e.all||!1?this.writeService.removeAllRecords(t.get("uuid")):this.writeService.removeRecord(n),!0}}])}($A);yV.commandName="removeRecords";var bV=Object.defineProperty,wV=Object.getOwnPropertyDescriptor,_V=function(e,t,n,r){for(var o,i=r>1?void 0:r?wV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bV(t,n,i),i},kV=100,CV=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(fV.commandName,fV),this.commandService.registerCommand(hV.commandName,hV),this.commandService.registerCommand(yV.commandName,yV)}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"record",type:"object",title:"记录",properties:{maxCount:{type:"number",description:"最大记录数量"}}}),e.registerDefaultValue({"record.maxCount":kV})}}])}();function EV(e,t,n){return t=dk(t),sk(e,OV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function OV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OV=function(){return!!e})()}CV.pluginName="kernel-add-record",_V([Ks(nR)],CV.prototype,"commandService",2),CV=_V([Gs({contrib:MA})],CV);var SV=function(e){function t(){return _w(this,t),EV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceRecordId,r=e.targetRecordId,o=e.targetGroupItem,i=e.direction;return this.writeService.updateRecordOrder(t,n,r,o,i),!0}}])}($A);function xV(e,t,n){return t=dk(t),sk(e,jV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function jV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jV=function(){return!!e})()}SV.commandName="changeRecordOrder";var DV=function(e){function t(){return _w(this,t),xV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceFieldId,r=e.targetFieldId;return this.writeService.updateFieldOrder(t,n,r),!0}}])}($A);function AV(e,t,n){return t=dk(t),sk(e,RV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function RV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RV=function(){return!!e})()}DV.commandName="changeFieldOrder";var FV=function(e){function t(){return _w(this,t),AV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.fieldId,n=e.sourceFieldOptionId,r=e.targetFieldOptionId;return this.writeService.updateFieldOptionOrder(t,n,r),!0}}])}($A);function IV(e,t,n){return t=dk(t),sk(e,PV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function PV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PV=function(){return!!e})()}FV.commandName="changeFieldOptionOrder";var MV=function(e){function t(){return _w(this,t),IV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.sourceViewId,n=e.targetViewId;return this.writeService.updateViewOrder(t,n),!0}}])}($A);function TV(e,t,n){return t=dk(t),sk(e,NV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function NV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NV=function(){return!!e})()}MV.commandName="changeViewOrder";var BV=function(e){function t(){return _w(this,t),TV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateValueOrder({fieldId:e.fieldId,fieldType:e.fieldType,recordId:e.recordId,sourceValueId:e.sourceValueId,targetValueId:e.targetValueId}),!0}}])}($A);BV.commandName="updateValueOrder";var VV=Object.defineProperty,LV=Object.getOwnPropertyDescriptor,zV=function(e,t,n,r){for(var o,i=r>1?void 0:r?LV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VV(t,n,i),i},UV=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(SV.commandName,SV),this.commandService.registerCommand(DV.commandName,DV),this.commandService.registerCommand(FV.commandName,FV),this.commandService.registerCommand(MV.commandName,MV),this.commandService.registerCommand(BV.commandName,BV)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function HV(e,t,n){return t=dk(t),sk(e,qV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function qV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qV=function(){return!!e})()}UV.pluginName="kernel-order",zV([Ks(nR)],UV.prototype,"commandService",2),UV=zV([Gs({contrib:MA})],UV);var WV=function(e){function t(){return _w(this,t),HV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.writeService.createViewByType(e.uuid,e.type||sE.GRID);return!t||e.noSwitchView||this.context.isRemote||this.writeService.setActiveView(t.get("uuid")),!0}}])}($A);function $V(e,t,n){return t=dk(t),sk(e,GV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function GV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GV=function(){return!!e})()}WV.commandName="addView";var KV=function(e){function t(){return _w(this,t),$V(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setActiveView(e.viewId),!0}}])}($A);function YV(e,t,n){return t=dk(t),sk(e,JV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function JV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JV=function(){return!!e})()}KV.commandName="switchView";var XV=function(e){function t(){return _w(this,t),YV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeView(e.viewId),!0}}])}($A);function ZV(e,t,n){return t=dk(t),sk(e,QV()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QV=function(){return!!e})()}XV.commandName="removeView";var eL=function(e){function t(){return _w(this,t),ZV(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.targetViewId=qw(32),e}},{key:"execute",value:function(e){var t=this.writeService.copyView(e.targetViewId,e.viewId);return t&&this.writeService.setActiveView(t.get("uuid")),!0}}])}($A);function tL(e,t,n){return t=dk(t),sk(e,nL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function nL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nL=function(){return!!e})()}eL.commandName="copyView";var rL=function(e){function t(){return _w(this,t),tL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateView(e.viewId,{name:e.name}),!0}}])}($A);rL.commandName="updateViewName";var oL=Object.defineProperty,iL=Object.getOwnPropertyDescriptor,aL=function(e,t,n,r){for(var o,i=r>1?void 0:r?iL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oL(t,n,i),i},uL=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(WV.commandName,WV),this.commandService.registerCommand(KV.commandName,KV),this.commandService.registerCommand(XV.commandName,XV),this.commandService.registerCommand(eL.commandName,eL),this.commandService.registerCommand(rL.commandName,rL)}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{maxCount:{type:"number",description:"最大视图数量"}}})}}])}();function lL(e,t,n){return t=dk(t),sk(e,cL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function cL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cL=function(){return!!e})()}uL.pluginName="kernel-viewer-manage",aL([Ks(nR)],uL.prototype,"commandService",2),uL=aL([Gs({contrib:MA})],uL);var sL=function(e){function t(){return _w(this,t),lL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.sourceFieldId,n=e.direction,r=void 0===n?"after":n;return this.writeService.createField({viewId:e.viewId,field:e.field,sourceFieldId:t,direction:r}),!0}}])}($A);function dL(e,t,n){return t=dk(t),sk(e,fL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function fL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fL=function(){return!!e})()}sL.commandName="addField";var pL=function(e){function t(){return _w(this,t),dL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=e.field,r=e.newFieldProperty,o=null==n?void 0:n.get("type"),i=null==n?void 0:n.get("name"),a=null==n?void 0:n.get("color"),u=null==n?void 0:n.get("config"),l=n.get("uuid"),c=!Zw(r.type)&&o!==r.type,s=!Zw(r.name)&&i!==r.name,d=!Zw(r.color)&&a!==r.color,f=!Zw(r.config)&&u!==r.config;if(c&&this.writeService.changeFieldType(l,o,r.type),s&&this.writeService.updateFieldName(l,r.name),d&&this.writeService.updateFieldColor(l,r.color),f&&this.writeService.updateFieldConfig(l,r.config),!c&&fE.isSelectLike(o)||fE.isSelectLike(r.type)){var p=null==(t=r.options)?void 0:t.map((function(e){return e.name=e.name.trim(),e})),v=!Zw(r.color)&&r.color!==(null==n?void 0:n.get("color")),h=this.readService.getFieldOptions(n.get("uuid")).toJSON(),g=!Zw(p)&&p!==h,m={uuid:l};if(v&&(m.color=!!r.color),g){var y=Yu(p,"name");m.options=y}if(v||g){var b=c?this.readService.getFieldCells(l).filter((function(e){return!!e.value})):[];if(this.writeService.updateFieldProperty(m),c){var w=b.map((function(e){var t,n,r=e.fieldType,o=null==(n=null==(t=m.options)?void 0:t.find((function(t){var n;return(null==(n=null==t?void 0:t.name)?void 0:n.slice(0,RO.MAX_LENGTH))===e.formatValue})))?void 0:n.uuid,i=Zw(o)?null:r===HC.MULTI_SELECT?[o]:o;return{recordId:e.recordId,fieldId:e.fieldId,value:i,cellId:e.uuid,fieldType:r,uuid:e.uuid}}));this.writeService.bulkSetCell(w)}}}return!0}}])}($A);function vL(e,t,n){return t=dk(t),sk(e,hL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function hL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hL=function(){return!!e})()}pL.commandName="updateField";var gL=function(e){function t(){return _w(this,t),vL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeField(e.fieldId),!0}}])}($A);gL.commandName="removeField";var mL=Object.defineProperty,yL=Object.getOwnPropertyDescriptor,bL=function(e,t,n,r){for(var o,i=r>1?void 0:r?yL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mL(t,n,i),i},wL=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(sL.commandName,sL),this.commandService.registerCommand(pL.commandName,pL),this.commandService.registerCommand(gL.commandName,gL)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function _L(e,t,n){return t=dk(t),sk(e,kL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function kL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kL=function(){return!!e})()}wL.pluginName="kernel-add-field",bL([Ks(nR)],wL.prototype,"commandService",2),wL=bL([Gs({contrib:MA})],wL);var CL=function(e){function t(){return _w(this,t),_L(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_display:e.coverDisplay}),!0}}])}($A);function EL(e,t,n){return t=dk(t),sk(e,OL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function OL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OL=function(){return!!e})()}CL.commandName="updateCoverDisplay";var SL=function(e){function t(){return _w(this,t),EL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_field_name:e.showFieldName}),!0}}])}($A);function xL(e,t,n){return t=dk(t),sk(e,jL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function jL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jL=function(){return!!e})()}SL.commandName="updateShowFieldName";var DL=function(e){function t(){return _w(this,t),xL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_field_uuid:e.coverFieldId}),!0}}])}($A);function AL(e,t,n){return t=dk(t),sk(e,RL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function RL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RL=function(){return!!e})()}DL.commandName="updateCoverSource";var FL=function(e){function t(){return _w(this,t),AL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFieldHidden(e.viewId,e.fieldId,e.hidden),!0}}])}($A);FL.commandName="updateFieldHidden";var IL=Object.defineProperty,PL=Object.getOwnPropertyDescriptor,ML=function(e,t,n,r){for(var o,i=r>1?void 0:r?PL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IL(t,n,i),i},TL=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(CL.commandName,CL),this.commandService.registerCommand(SL.commandName,SL),this.commandService.registerCommand(DL.commandName,DL),this.commandService.registerCommand(FL.commandName,FL)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function NL(e,t,n){return t=dk(t),sk(e,BL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BL=function(){return!!e})()}TL.pluginName="kernel-viewer-field-setting",ML([Ks(nR)],TL.prototype,"commandService",2),TL=ML([Gs({contrib:MA})],TL);var VL=function(e){function t(){return _w(this,t),NL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.fieldId,r=e.size;return this.writeService.updateFieldSize(t,n,r),!0}}])}($A);VL.commandName="changeColWidth";var LL=Object.defineProperty,zL=Object.getOwnPropertyDescriptor,UL=function(e,t,n,r){for(var o,i=r>1?void 0:r?zL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LL(t,n,i),i},HL=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(VL.commandName,VL)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function qL(e,t,n){return t=dk(t),sk(e,WL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function WL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WL=function(){return!!e})()}HL.pluginName="kernel-viewer-grid",UL([Ks(nR)],HL.prototype,"commandService",2),HL=UL([Gs({contrib:MA})],HL);var $L=function(e){function t(){return _w(this,t),qL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createGroup(e.viewId,e.group),!0}}])}($A);function GL(e,t,n){return t=dk(t),sk(e,KL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function KL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KL=function(){return!!e})()}$L.commandName="createGridGroup";var YL=function(e){function t(){return _w(this,t),GL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeGroup(e.viewId),!0}}])}($A);function JL(e,t,n){return t=dk(t),sk(e,XL()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function XL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XL=function(){return!!e})()}YL.commandName="removeGridGroup";var ZL=function(e){function t(){return _w(this,t),JL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}($A);function QL(e,t,n){return t=dk(t),sk(e,ez()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ez(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ez=function(){return!!e})()}ZL.commandName="updateGridGroup";var tz=function(e){function t(){return _w(this,t),QL(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setGroupItemCollapse(e.viewId,e.fieldId,e.groupId,e.value),!0}}])}($A);tz.commandName="updateGridGroupFold";var nz=Object.defineProperty,rz=Object.getOwnPropertyDescriptor,oz=function(e,t,n,r){for(var o,i=r>1?void 0:r?rz(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nz(t,n,i),i},iz=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand($L.commandName,$L),this.commandService.registerCommand(YL.commandName,YL),this.commandService.registerCommand(ZL.commandName,ZL),this.commandService.registerCommand(tz.commandName,tz)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function az(e,t,n){return t=dk(t),sk(e,uz()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uz=function(){return!!e})()}iz.pluginName="kernel-viewer-grid-group",oz([Ks(nR)],iz.prototype,"commandService",2),iz=oz([Gs({contrib:MA})],iz);var lz=function(e){function t(){return _w(this,t),az(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{record_height:e.recordHeight}),!0}}])}($A),cz=Object.defineProperty,sz=Object.getOwnPropertyDescriptor,dz=function(e,t,n,r){for(var o,i=r>1?void 0:r?sz(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cz(t,n,i),i},fz=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand("updateGridRecordHeight",lz)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function pz(e,t,n){return t=dk(t),sk(e,vz()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vz=function(){return!!e})()}fz.pluginName="kernel-viewer-grid-record-height",dz([Ks(nR)],fz.prototype,"commandService",2),fz=dz([Gs({contrib:MA})],fz);var hz=function(e){function t(){return _w(this,t),pz(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeCells(e.cells,!1),!0}},{key:"afterExecute",value:function(e,n,r){var o,i=this,a=e.cells,u=a[0],l=this.readService.getActiveView(),c=this.readService.getViewGroup(l.get("uuid")),s=a.map((function(e){return e.fieldId})),d=r.isNeedRefreshSort(l.get("uuid"),s),f=r.isNeedRefreshGroup(l.get("uuid"),s);if(u&&(o=r.isNeedRefreshFilter(l.get("uuid"),u.fieldId,u.recordId,u.value)),d||f||o){var p=d?fA.SORT:f?fA.GROUP:fA.FILTER;d&&this.writeService.refreshSort(l.get("uuid")),f&&this.writeService.refreshGroup(l.get("uuid"),null==c?void 0:c.group.toJSON()),o&&this.writeService.refreshFilter(l.get("uuid")),null==r||r.emitBeforeRefresh(p,t.commandName,e,UC(jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(p),null==(t=i.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}($A);hz.commandName="removeCells";var gz=hz;function mz(e,t,n){return t=dk(t),sk(e,yz()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yz=function(){return!!e})()}var bz=function(e){function t(){return _w(this,t),mz(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setCell(e,!1),!0}},{key:"afterExecute",value:function(e,n,r){var o=this,i=this.readService.getActiveView(),a=this.readService.getViewGroup(i.get("uuid")),u=r.isNeedRefreshSort(i.get("uuid"),e.fieldId),l=r.isNeedRefreshGroup(i.get("uuid"),e.fieldId),c=r.isNeedRefreshFilter(i.get("uuid"),e.fieldId,e.recordId,e.value);if(u||l||c){var s=u?fA.SORT:l?fA.GROUP:fA.FILTER;u&&this.writeService.refreshSort(i.get("uuid")),l&&this.writeService.refreshGroup(i.get("uuid"),null==a?void 0:a.group.toJSON()),c&&this.writeService.refreshFilter(i.get("uuid")),null==r||r.emitBeforeRefresh(s,t.commandName,e,UC(jk.mark((function e(){var t;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(s),null==(t=o.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}($A);bz.commandName="setCell";var wz=bz,_z=Object.defineProperty,kz=Object.getOwnPropertyDescriptor,Cz=function(e,t,n,r){for(var o,i=r>1?void 0:r?kz(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_z(t,n,i),i},Ez=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(gz.commandName,gz),this.commandService.registerCommand(wz.commandName,wz)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Ez.pluginName="kernel-viewer-grid-cell-editor",Cz([Ks(nR)],Ez.prototype,"commandService",2),Ez=Cz([Gs({contrib:MA})],Ez);var Oz=Object.defineProperty,Sz=Object.getOwnPropertyDescriptor,xz=function(e,t,n,r){for(var o,i=r>1?void 0:r?Sz(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Oz(t,n,i),i},jz=function(){return Ew((function e(){_w(this,e),this.viewType=sE.CARD}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function Dz(e,t,n){return t=dk(t),sk(e,Az()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Az(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Az=function(){return!!e})()}jz.pluginName="kernel-viewer-card",xz([Ks(nR)],jz.prototype,"commandService",2),jz=xz([Gs({contrib:MA})],jz);var Rz=function(e){function t(){return _w(this,t),Dz(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}($A);Rz.commandName="updateKanbanGroup";var Fz=Object.defineProperty,Iz=Object.getOwnPropertyDescriptor,Pz=function(e,t,n,r){for(var o,i=r>1?void 0:r?Iz(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fz(t,n,i),i},Mz=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Rz.commandName,Rz)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Mz.pluginName="kernel-viewer-kanban",Pz([Ks(nR)],Mz.prototype,"commandService",2),Mz=Pz([Gs({contrib:MA})],Mz);var Tz={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,TAB:9,BACKSPACE:8,DELETE:46,DEL:46,END:35,SPACE:32},Nz=function(e){return e.ESC="Escape",e.LEFT="ArrowLeft",e.UP="ArrowUp",e.RIGHT="ArrowRight",e.DOWN="ArrowDown",e.ENTER="Enter",e.TAB="Tab",e.SPACE=" ",e.DEL="Backspace",e.BACKSPACE="Backspace",e}(Nz||{});function Bz(e){var t=e.metaKey,n=e.ctrlKey,r=e.keyCode;return!t&&!n&&32!==r&&(r>=65&&r<=90||r>=48&&r<=57||r>=96&&r<=105||r>=186&&r<=192||r>=219&&r<=222||r>=106&&r<=111||32===r||61===r||173===r||(229===r||0===r)&&"Shift"!==e.key)}function Vz(e,t,n){for(var r=0,o=t>0?1:-1;Math.abs(r)<Math.abs(t)&&!1!==n(e+r);)r+=o}var Lz={exports:{}};!function(e,t){var n;e.exports=(n=function(e,t,n,r){var o={features:null,bind:function(e,t,n,r){var o=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var i=0;i<t.length;i++)t[i]&&e[o](t[i],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);i&&i.length>0&&(i=parseInt(i[1],10))>=1&&i<8&&(n.isOldIOSPhone=!0)}var a=r.match(/Android\s([0-9\.]*)/),u=a?a[1]:0;(u=parseFloat(u))>=1&&(u<4.4&&(n.isOldAndroid=!0),n.androidVersion=u),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var l,c,s=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],f=0;f<4;f++){t=d[f];for(var p=0;p<3;p++)l=s[p],c=t+(t?l.charAt(0).toUpperCase()+l.slice(1):l),!n[l]&&c in e&&(n[l]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var v=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-v)),r=window.setTimeout((function(){e(t+n)}),n);return v=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=n,n}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,r){t=t.split(" ");for(var o,i=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},u=0;u<t.length;u++)if(o=t[u])if("object"===Ln(n)&&n.handleEvent){if(r){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[i]("on"+o,n["oldIE"+o])}else e[i]("on"+o,n)});var i=this,a=25,u=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(l,r);var c,s,d,f,p,v,h,g,m,y,b,w,_,k,C,E,O,S,x,j,D,A,R,F,I,P,M,T,N,B,V,L,z,U,H,q,W,$,G,K,Y,J,X,Z,Q,ee,te,ne,re,oe,ie,ae,ue,le,ce,se,de=function(){return{x:0,y:0}},fe=de(),pe=de(),ve=de(),he={},ge=0,me={},ye=de(),be=0,we=!0,_e=[],ke={},Ce=!1,Ee=function(e,t){o.extend(i,t.publicMethods),_e.push(e)},Oe=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},Se={},xe=function(e,t){return Se[e]||(Se[e]=[]),Se[e].push(t)},je=function(e){var t=Se[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(i,n)}},De=function(){return(new Date).getTime()},Ae=function(e){le=e,i.bg.style.opacity=e*l.bgOpacity},Re=function(e,t,n,r,o){(!Ce||o&&o!==i.currItem)&&(r/=o?o.fitRatio:i.currItem.fitRatio),e[A]=w+t+"px, "+n+"px"+_+" scale("+r+")"},Fe=function(e){re&&(e&&(y>i.currItem.fitRatio?Ce||(dn(i.currItem,!1,!0),Ce=!0):Ce&&(dn(i.currItem),Ce=!1)),Re(re,ve.x,ve.y,y))},Ie=function(e){e.container&&Re(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Pe=function(e,t){t[A]=w+e+"px, 0px"+_},Me=function(e,t){if(!l.loop&&t){var n=f+(ye.x*ge-e)/ye.x,r=Math.round(e-yt.x);(n<0&&r>0||n>=Qt()-1&&r<0)&&(e=yt.x+r*l.mainScrollEndFriction)}yt.x=e,Pe(e,p)},Te=function(e,t){var n=bt[e]-me[e];return pe[e]+fe[e]+n-n*(t/b)},Ne=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Be=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ve=null,Le=function(){Ve&&(o.unbind(document,"mousemove",Le),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,je("mouseUsed")),Ve=setTimeout((function(){Ve=null}),100)},ze=function(){o.bind(document,"keydown",i),V.transform&&o.bind(i.scrollWrap,"click",i),l.mouseUsed||o.bind(document,"mousemove",Le),o.bind(window,"resize scroll orientationchange",i),je("bindEvents")},Ue=function(){o.unbind(window,"resize scroll orientationchange",i),o.unbind(window,"scroll",m.scroll),o.unbind(document,"keydown",i),o.unbind(document,"mousemove",Le),V.transform&&o.unbind(i.scrollWrap,"click",i),G&&o.unbind(window,h,i),clearTimeout(L),je("unbindEvents")},He=function(e,t){var n=un(i.currItem,he,e);return t&&(ne=n),n},qe=function(e){return e||(e=i.currItem),e.initialZoomLevel},We=function(e){return e||(e=i.currItem),e.w>0?l.maxSpreadZoom:1},$e=function(e,t,n,r){return r===i.currItem.initialZoomLevel?(n[e]=i.currItem.initialPosition[e],!0):(n[e]=Te(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(A){var t=V.perspective&&!F;return w="translate"+(t?"3d(":"("),void(_=V.perspective?", 0px)":")")}A="left",o.addClass(e,"pswp--ie"),Pe=function(e,t){t.left=e+"px"},Ie=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,o=t*e.h;n.width=r+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Fe=function(){if(re){var e=re,t=i.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,o=n*t.h;e.width=r+"px",e.height=o+"px",e.left=ve.x+"px",e.top=ve.y+"px"}}},Ke=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,i[t]()))},Ye=function(e){e&&(J||Y||oe||W)&&(e.preventDefault(),e.stopPropagation())},Je=function(){i.setScrollOffset(0,o.getScrollY())},Xe={},Ze=0,Qe=function(e){Xe[e]&&(Xe[e].raf&&P(Xe[e].raf),Ze--,delete Xe[e])},et=function(e){Xe[e]&&Qe(e),Xe[e]||(Ze++,Xe[e]={})},tt=function(){for(var e in Xe)Xe.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,r,o,i,a){var u,l=De();et(e);var c=function(){if(Xe[e]){if((u=De()-l)>=r)return Qe(e),i(n),void(a&&a());i((n-t)*o(u/r)+t),Xe[e].raf=I(c)}};c()},rt={shout:je,listen:xe,viewportSize:he,options:l,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return y},getCurrentIndex:function(){return f},isDragging:function(){return G},isZooming:function(){return ee},setScrollOffset:function(e,t){me.x=e,B=me.y=t,je("updateScrollOffset",me)},applyZoomPan:function(e,t,n,r){ve.x=t,ve.y=n,y=e,Fe(r)},init:function(){if(!c&&!s){var n;i.framework=o,i.template=e,i.bg=o.getChildByClass(e,"pswp__bg"),M=e.className,c=!0,V=o.detectFeatures(),I=V.raf,P=V.caf,A=V.transform,N=V.oldIE,i.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),i.container=o.getChildByClass(i.scrollWrap,"pswp__container"),p=i.container.style,i.itemHolders=E=[{el:i.container.children[0],wrap:0,index:-1},{el:i.container.children[1],wrap:0,index:-1},{el:i.container.children[2],wrap:0,index:-1}],E[0].el.style.display=E[2].el.style.display="none",Ge(),m={resize:i.updateSize,orientationchange:function(){clearTimeout(L),L=setTimeout((function(){he.x!==i.scrollWrap.clientWidth&&i.updateSize()}),500)},scroll:Je,keydown:Ke,click:Ye};var r=V.isOldIOSPhone||V.isOldAndroid||V.isMobileOpera;for(V.animationName&&V.transform&&!r||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<_e.length;n++)i["init"+_e[n]]();t&&(i.ui=new t(i,o)).init(),je("firstUpdate"),f=f||l.index||0,(isNaN(f)||f<0||f>=Qt())&&(f=0),i.currItem=Zt(f),(V.isOldIOSPhone||V.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),l.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===B&&(je("initialLayout"),B=T=o.getScrollY());var a="pswp--open ";for(l.mainClass&&(a+=l.mainClass+" "),l.showHideOpacity&&(a+="pswp--animate_opacity "),a+=F?"pswp--touch":"pswp--notouch",a+=V.animationName?" pswp--css_animation":"",a+=V.svg?" pswp--svg":"",o.addClass(e,a),i.updateSize(),v=-1,be=null,n=0;n<u;n++)Pe((n+v)*ye.x,E[n].el.style);N||o.bind(i.scrollWrap,g,i),xe("initialZoomInEnd",(function(){i.setContent(E[0],f-1),i.setContent(E[2],f+1),E[0].el.style.display=E[2].el.style.display="block",l.focus&&e.focus(),ze()})),i.setContent(E[1],f),i.updateCurrItem(),je("afterInit"),we||(k=setInterval((function(){Ze||G||ee||y!==i.currItem.initialZoomLevel||i.updateSize()}),1e3)),o.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,s=!0,je("close"),Ue(),en(i.currItem,null,!0,i.destroy))},destroy:function(){je("destroy"),Kt&&clearTimeout(Kt),e.setAttribute("aria-hidden","true"),e.className=M,k&&clearInterval(k),o.unbind(i.scrollWrap,g,i),o.unbind(window,"scroll",i),Et(),tt(),Se=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),ve.x=e,ve.y=t,Fe()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=Oe(e))-f;be=t,f=e,i.currItem=Zt(f),ge-=t,Me(ye.x*ge),tt(),oe=!1,i.updateCurrItem()},next:function(){i.goTo(f+1)},prev:function(){i.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&je("beforeChange",0),E[1].el.children.length){var t=E[1].el.children[0];re=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=i.currItem.bounds,b=y=i.currItem.initialZoomLevel,ve.x=ne.center.x,ve.y=ne.center.y,e&&je("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<u;e++)E[e].item&&(E[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&n<2)){i.currItem=Zt(f),Ce=!1,je("beforeChange",be),n>=u&&(v+=be+(be>0?-u:u),n=u);for(var r=0;r<n;r++)be>0?(t=E.shift(),E[u-1]=t,v++,Pe((v+2)*ye.x,t.el.style),i.setContent(t,f-n+r+1+1)):(t=E.pop(),E.unshift(t),v--,Pe(v*ye.x,t.el.style),i.setContent(t,f+n-r-1-1));if(re&&1===Math.abs(be)){var o=Zt(O);o.initialZoomLevel!==y&&(un(o,he),dn(o),Ie(o))}be=0,i.updateCurrZoomItem(),O=f,je("afterChange")}}},updateSize:function(t){if(!we&&l.modal){var n=o.getScrollY();if(B!==n&&(e.style.top=n+"px",B=n),!t&&ke.x===window.innerWidth&&ke.y===window.innerHeight)return;ke.x=window.innerWidth,ke.y=window.innerHeight,e.style.height=ke.y+"px"}if(he.x=i.scrollWrap.clientWidth,he.y=i.scrollWrap.clientHeight,Je(),ye.x=he.x+Math.round(he.x*l.spacing),ye.y=he.y,Me(ye.x*ge),je("beforeResize"),void 0!==v){for(var r,a,c,s=0;s<u;s++)r=E[s],Pe((s+v)*ye.x,r.el.style),c=f+s-1,l.loop&&Qt()>2&&(c=Oe(c)),(a=Zt(c))&&(C||a.needsUpdate||!a.bounds)?(i.cleanSlide(a),i.setContent(r,c),1===s&&(i.currItem=a,i.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&i.setContent(r,c),a&&a.container&&(un(a,he),dn(a),Ie(a));C=!1}b=y=i.currItem.initialZoomLevel,(ne=i.currItem.bounds)&&(ve.x=ne.center.x,ve.y=ne.center.y,Fe(!0)),je("resize")},zoomTo:function(e,t,n,r,i){t&&(b=y,bt.x=Math.abs(t.x)-ve.x,bt.y=Math.abs(t.y)-ve.y,Ne(pe,ve));var a=He(e,!1),u={};$e("x",a,u,e),$e("y",a,u,e);var l=y,c={x:ve.x,y:ve.y};Be(u);var s=function(t){1===t?(y=e,ve.x=u.x,ve.y=u.y):(y=(e-l)*t+l,ve.x=(u.x-c.x)*t+c.x,ve.y=(u.y-c.y)*t+c.y),i&&i(t),Fe(1===t)};n?nt("customZoomTo",0,1,n,r||o.easing.sine.inOut,s):s(1)}},ot=30,it=10,at={},ut={},lt={},ct={},st={},dt=[],ft={},pt=[],vt={},ht=0,gt=de(),mt=0,yt=de(),bt=de(),wt=de(),_t=function(e,t){return e.x===t.x&&e.y===t.y},kt=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ct=function(e,t){return vt.x=Math.abs(e.x-t.x),vt.y=Math.abs(e.y-t.y),Math.sqrt(vt.x*vt.x+vt.y*vt.y)},Et=function(){X&&(P(X),X=null)},Ot=function(){G&&(X=I(Ot),zt())},St=function(){return!("fit"===l.scaleMode&&y===i.currItem.initialZoomLevel)},xt=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:xt(e.parentNode,t))},jt={},Dt=function(e,t){return jt.prevent=!xt(e.target,l.isClickableElement),je("preventDragEvent",e,t,jt),jt.prevent},At=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Ft=function(e,t,n){if(e-U>50){var r=pt.length>2?pt.shift():{};r.x=t,r.y=n,pt.push(r),U=e}},It=function(){var e=ve.y-i.currItem.initialPosition.y;return 1-Math.abs(e/(he.y/2))},Pt={},Mt={},Tt=[],Nt=function(e){for(;Tt.length>0;)Tt.pop();return R?(se=0,dt.forEach((function(e){0===se?Tt[0]=e:1===se&&(Tt[1]=e),se++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Tt[0]=At(e.touches[0],Pt),e.touches.length>1&&(Tt[1]=At(e.touches[1],Mt))):(Pt.x=e.pageX,Pt.y=e.pageY,Pt.id="",Tt[0]=Pt),Tt},Bt=function(e,t){var n,r,o,a,u=ve[e]+t[e],c=t[e]>0,s=yt.x+t.x,d=yt.x-ft.x;if(n=u>ne.min[e]||u<ne.max[e]?l.panEndFriction:1,u=ve[e]+t[e]*n,(l.allowPanToNext||y===i.currItem.initialZoomLevel)&&(re?"h"!==ie||"x"!==e||Y||(c?(u>ne.min[e]&&(n=l.panEndFriction,ne.min[e],r=ne.min[e]-pe[e]),(r<=0||d<0)&&Qt()>1?(a=s,d<0&&s>ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=u)):(u<ne.max[e]&&(n=l.panEndFriction,ne.max[e],r=pe[e]-ne.max[e]),(r<=0||d>0)&&Qt()>1?(a=s,d>0&&s<ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=u))):a=s,"x"===e))return void 0!==a&&(Me(a,!0),Z=a!==ft.x),ne.min.x!==ne.max.x&&(void 0!==o?ve.x=o:Z||(ve.x+=t.x*n)),void 0!==a;oe||Z||y>i.currItem.fitRatio&&(ve[e]+=t[e]*n)},Vt=function(e){if(!("mousedown"===e.type&&e.button>0))if(Xt)e.preventDefault();else if(!$||"mousedown"!==e.type){if(Dt(e,!0)&&e.preventDefault(),je("pointerDown"),R){var t=o.arraySearch(dt,e.pointerId,"id");t<0&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Nt(e),r=n.length;Q=null,tt(),G&&1!==r||(G=ae=!0,o.bind(window,h,i),q=ce=ue=W=Z=J=K=Y=!1,ie=null,je("firstTouchStart",n),Ne(pe,ve),fe.x=fe.y=0,Ne(ct,n[0]),Ne(st,ct),ft.x=ye.x*ge,pt=[{x:ct.x,y:ct.y}],U=z=De(),He(y,!0),Et(),Ot()),!ee&&r>1&&!oe&&!Z&&(b=y,Y=!1,ee=K=!0,fe.y=fe.x=0,Ne(pe,ve),Ne(at,n[0]),Ne(ut,n[1]),Rt(at,ut,wt),bt.x=Math.abs(wt.x)-ve.x,bt.y=Math.abs(wt.y)-ve.y,te=Ct(at,ut))}},Lt=function(e){if(e.preventDefault(),R){var t=o.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if(G){var r=Nt(e);if(ie||J||ee)Q=r;else if(yt.x!==ye.x*ge)ie="h";else{var i=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(i)>=it&&(ie=i>0?"h":"v",Q=r)}}},zt=function(){if(Q){var e=Q.length;if(0!==e)if(Ne(at,Q[0]),lt.x=at.x-ct.x,lt.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!lt.x&&!lt.y&&_t(Q[1],ut))return;Ne(ut,Q[1]),Y||(Y=!0,je("zoomGestureStarted"));var t=Ct(at,ut),n=$t(t);n>i.currItem.initialZoomLevel+i.currItem.initialZoomLevel/15&&(ce=!0);var r=1,o=qe(),a=We();if(n<o)if(l.pinchToClose&&!ce&&b<=i.currItem.initialZoomLevel){var u=1-(o-n)/(o/1.2);Ae(u),je("onPinchClose",u),ue=!0}else(r=(o-n)/o)>1&&(r=1),n=o-r*(o/3);else n>a&&((r=(n-a)/(6*o))>1&&(r=1),n=a+r*o);r<0&&(r=0),Rt(at,ut,gt),fe.x+=gt.x-wt.x,fe.y+=gt.y-wt.y,Ne(wt,gt),ve.x=Te("x",n),ve.y=Te("y",n),q=n>y,y=n,Fe()}else{if(!ie)return;if(ae&&(ae=!1,Math.abs(lt.x)>=it&&(lt.x-=Q[0].x-st.x),Math.abs(lt.y)>=it&&(lt.y-=Q[0].y-st.y)),ct.x=at.x,ct.y=at.y,0===lt.x&&0===lt.y)return;if("v"===ie&&l.closeOnVerticalDrag&&!St()){fe.y+=lt.y,ve.y+=lt.y;var c=It();return W=!0,je("onVerticalDrag",c),Ae(c),void Fe()}Ft(De(),at.x,at.y),J=!0,ne=i.currItem.bounds,Bt("x",lt)||(Bt("y",lt),Be(ve),Fe())}}},Ut=function(e){if(V.isOldAndroid){if($&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout($),$=setTimeout((function(){$=0}),600))}var t;if(je("pointerUp"),Dt(e,!1)&&e.preventDefault(),R){var n=o.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,u=Nt(e),c=u.length;if("mouseup"===e.type&&(c=0),2===c)return Q=null,!0;1===c&&Ne(st,u[0]),0!==c||ie||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),je("touchRelease",e,t));var s=-1;if(0===c&&(G=!1,o.unbind(window,h,i),Et(),ee?s=0:-1!==mt&&(s=De()-mt)),mt=1===c?De():-1,a=-1!==s&&s<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(a="zoomPointerUp"),je("zoomGestureEnded")),Q=null,J||Y||oe||W)if(tt(),H||(H=Ht()),H.calculateSwipeSpeed("x"),W)if(It()<l.verticalDragRange)i.close();else{var d=ve.y,f=le;nt("verticalDrag",0,1,300,o.easing.cubic.out,(function(e){ve.y=(i.currItem.initialPosition.y-d)*e+d,Ae((1-f)*e+f),Fe()})),je("onVerticalDrag",1)}else{if((Z||oe)&&0===c){if(Wt(a,H))return;a="zoomPointerUp"}oe||("swipe"===a?!Z&&y>i.currItem.fitRatio&&qt(H):Gt())}},Ht=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){pt.length>1?(e=De()-U+50,t=pt[pt.length-2][r]):(e=De()-z,t=st[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(ve[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:ve[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,ve[e],n.backAnimDestination[e],t||300,o.easing.sine.out,(function(t){ve[e]=t,Fe()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,ve[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Xe.zoomPan&&(Xe.zoomPan.raf=I(n.panAnimLoop),n.now=De(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Fe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return ve.x=Math.round(ve.x),ve.y=Math.round(ve.y),Fe(),void Qe("zoomPan")}};return n},qt=function(e){if(e.calculateSwipeSpeed("y"),ne=i.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=De(),e.panAnimLoop()},Wt=function(e,t){var n,r,a;if(oe||(ht=f),"swipe"===e){var u=ct.x-st.x,c=t.lastFlickDist.x<10;u>ot&&(c||t.lastFlickOffset.x>20)?r=-1:u<-ot&&(c||t.lastFlickOffset.x<-20)&&(r=1)}r&&((f+=r)<0?(f=l.loop?Qt()-1:0,a=!0):f>=Qt()&&(f=l.loop?0:Qt()-1,a=!0),a&&!l.loop||(be+=r,ge-=r,n=!0));var s,d=ye.x*ge,p=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(s=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),s=Math.max(s,250)):s=333,ht===f&&(n=!1),oe=!0,je("mainScrollAnimStart"),nt("mainScroll",yt.x,d,s,o.easing.cubic.out,Me,(function(){tt(),oe=!1,ht=-1,(n||ht!==f)&&i.updateCurrItem(),je("mainScrollAnimComplete")})),n&&i.updateCurrItem(!0),n},$t=function(e){return 1/te*e*b},Gt=function(){var e=y,t=qe(),n=We();y<t?e=t:y>n&&(e=n);var r,a=1,u=le;return ue&&!q&&!ce&&y<t?(i.close(),!0):(ue&&(r=function(e){Ae((a-u)*e+u)}),i.zoomTo(e,0,200,o.easing.cubic.out,r),!0)};Ee("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,o){S=e+t,x=e+n,j=e+r,D=o?e+o:""};(R=V.pointerEvent)&&V.touch&&(V.touch=!1),R?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):V.touch?(e("touch","start","move","end","cancel"),F=!0):e("mouse","down","move","up"),h=x+" "+j+" "+D,g=S,R&&!F&&(F=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),i.likelyTouchDevice=F,m[S]=Vt,m[x]=Lt,m[j]=Ut,D&&(m[D]=m[j]),V.touch&&(g+=" mousedown",h+=" mousemove mouseup",m.mousedown=m[S],m.mousemove=m[x],m.mouseup=m[j]),F||(l.allowPanToNext=!1)}}});var Kt,Yt,Jt,Xt,Zt,Qt,en=function(t,n,r,a){var u;Kt&&clearTimeout(Kt),Xt=!0,Jt=!0,t.initialLayout?(u=t.initialLayout,t.initialLayout=null):u=l.getThumbBoundsFn&&l.getThumbBoundsFn(f);var c,s,p=r?l.hideAnimationDuration:l.showAnimationDuration,v=function(){Qe("initialZoom"),r?(i.template.removeAttribute("style"),i.bg.removeAttribute("style")):(Ae(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),je("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Xt=!1};if(!p||!u||void 0===u.x)return je("initialZoom"+(r?"Out":"In")),y=t.initialZoomLevel,Ne(ve,t.initialPosition),Fe(),e.style.opacity=r?0:1,Ae(1),void(p?setTimeout((function(){v()}),p):v());c=d,s=!i.currItem.src||i.currItem.loadError||l.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(y=u.w/t.w,ve.x=u.x,ve.y=u.y-T,i[s?"template":"bg"].style.opacity=.001,Fe()),et("initialZoom"),r&&!c&&o.removeClass(e,"pswp--animated-in"),s&&(r?o[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){o.addClass(e,"pswp--animate_opacity")}),30)),Kt=setTimeout((function(){if(je("initialZoom"+(r?"Out":"In")),r){var n=u.w/t.w,i={x:ve.x,y:ve.y},a=y,l=le,d=function(t){1===t?(y=n,ve.x=u.x,ve.y=u.y-B):(y=(n-a)*t+a,ve.x=(u.x-i.x)*t+i.x,ve.y=(u.y-B-i.y)*t+i.y),Fe(),s?e.style.opacity=1-t:Ae(l-t*l)};c?nt("initialZoom",0,1,p,o.easing.cubic.out,d,v):(d(1),Kt=setTimeout(v,p+20))}else y=t.initialZoomLevel,Ne(ve,t.initialPosition),Fe(),Ae(1),s?e.style.opacity=1:Ae(1),Kt=setTimeout(v,p+20)}),r?25:90)},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),je("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var o=tn.x/e.w,i=tn.y/e.h;e.fitRatio=o<i?o:i;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return an(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},ln=function(e,t,n,r,o,a){t.loadError||r&&(t.imageAppended=!0,dn(t,r,t===i.currItem&&Ce),n.appendChild(r),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},sn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},dn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=o+"px"),t.style.width=r+"px",t.style.height=o+"px"}},fn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&ln(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Ee("Controller",{publicMethods:{lazyLoadItem:function(e){e=Oe(e);var t=Zt(e);t&&(!t.loaded&&!t.loading||C)&&(je("gettingData",e,t),t.src&&cn(t))},initController:function(){o.extend(l,rn,!0),i.items=Yt=n,Zt=i.getItemAt,Qt=l.getNumItemsFn,l.loop,Qt()<3&&(l.loop=!1),xe("beforeChange",(function(e){var t,n=l.preload,r=null===e||e>=0,o=Math.min(n[0],Qt()),a=Math.min(n[1],Qt());for(t=1;t<=(r?a:o);t++)i.lazyLoadItem(f+t);for(t=1;t<=(r?o:a);t++)i.lazyLoadItem(f-t)})),xe("initialLayout",(function(){i.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(f)})),xe("mainScrollAnimComplete",fn),xe("initialZoomInEnd",fn),xe("destroy",(function(){for(var e,t=0;t<Yt.length;t++)(e=Yt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==Yt[e]&&Yt[e]},allowProgressiveImg:function(){return l.forceProgressiveLoading||!F||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Oe(t));var n=i.getItemAt(e.index);n&&(n.container=null);var r,a=i.getItemAt(t);if(a){je("gettingData",t,a),e.index=t,e.item=a;var u=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?u.appendChild(a.html):u.innerHTML=a.html),sn(a),un(a,he),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((r=o.createEl("pswp__img","img")).style.opacity=1,r.src=a.src,dn(a,r),ln(t,a,u,r));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(sn(n,!0))return n.loadComplete=n.img=null,un(n,he),Ie(n),void(e.index===f&&i.updateCurrZoomItem());n.imageAppended?!Xt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):V.transform&&(oe||Xt)?nn.push({item:n,baseDiv:u,img:n.img,index:t,holder:e,clearPlaceholder:!0}):ln(t,n,u,n.img,oe||Xt,!0)}n.loadComplete=null,n.img=null,je("imageLoadComplete",t,n)}},o.features.transform){var s="pswp__img pswp__img--placeholder";s+=a.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(s,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),dn(a,d),u.appendChild(d),a.placeholder=d}a.loading||cn(a),i.allowProgressiveImg()&&(!Jt&&V.transform?nn.push({item:a,baseDiv:u,img:a.img,index:t,holder:e}):ln(t,a,u,a.img,!0,!0))}Jt||t!==f?Ie(a):(re=u.style,en(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(u)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var pn,vn,hn={},gn=function(e,t,n){var r=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(r)};Ee("Tap",{publicMethods:{initTap:function(){xe("firstTouchStart",i.onTapStart),xe("touchRelease",i.onTapRelease),xe("destroy",(function(){hn={},pn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(pn),pn=null)},onTapRelease:function(e,t){if(t&&!J&&!K&&!Ze){var n=t;if(pn&&(clearTimeout(pn),pn=null,kt(n,hn)))return void je("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||o.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);Ne(hn,n),pn=setTimeout((function(){gn(e,t),pn=null}),300)}}}}),Ee("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(F?xe("mouseUsed",(function(){i.setupDesktopZoom()})):i.setupDesktopZoom(!0))},setupDesktopZoom:function(t){vn={};var n="wheel mousewheel DOMMouseScroll";xe("bindEvents",(function(){o.bind(e,n,i.handleMouseWheel)})),xe("unbindEvents",(function(){vn&&o.unbind(e,n,i.handleMouseWheel)})),i.mouseZoomedIn=!1;var r,a=function(){i.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),i.mouseZoomedIn=!1),y<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),u()},u=function(){r&&(o.removeClass(e,"pswp--dragging"),r=!1)};xe("resize",a),xe("afterChange",a),xe("pointerDown",(function(){i.mouseZoomedIn&&(r=!0,o.addClass(e,"pswp--dragging"))})),xe("pointerUp",u),t||a()},handleMouseWheel:function(e){if(y<=i.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Ze||G?e.preventDefault():A&&Math.abs(e.deltaY)>2&&(d=!0,i.close())),!0;if(e.stopPropagation(),vn.x=0,"deltaX"in e)1===e.deltaMode?(vn.x=18*e.deltaX,vn.y=18*e.deltaY):(vn.x=e.deltaX,vn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(vn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?vn.y=-.16*e.wheelDeltaY:vn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;vn.y=e.detail}He(y,!0);var t=ve.x-vn.x,n=ve.y-vn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),i.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:he.x/2+me.x,y:he.y/2+me.y};var n=l.getDoubleTapZoom(!0,i.currItem),r=y===n;i.mouseZoomedIn=!r,i.zoomTo(r?i.currItem.initialZoomLevel:n,t,333),o[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,yn,bn,wn,_n,kn,Cn,En,On,Sn,xn,jn,Dn={history:!0,galleryUID:1},An=function(){return xn.hash.substring(1)},Rn=function(){mn&&clearTimeout(mn),bn&&clearTimeout(bn)},Fn=function(){var e=An(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var o=r[n].split("=");o.length<2||(t[o[0]]=o[1])}if(l.galleryPIDs){var i=t.pid;for(t.pid=0,n=0;n<Yt.length;n++)if(Yt[n].pid===i){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},In=function(){if(bn&&clearTimeout(bn),Ze||G)bn=setTimeout(In,500);else{wn?clearTimeout(yn):wn=!0;var e=f+1,t=Zt(f);t.hasOwnProperty("pid")&&(e=t.pid);var n=Cn+"&gid="+l.galleryUID+"&pid="+e;En||-1===xn.hash.indexOf(n)&&(Sn=!0);var r=xn.href.split("#")[0]+"#"+n;jn?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,r):En?xn.replace(r):xn.hash=n,En=!0,yn=setTimeout((function(){wn=!1}),60)}};Ee("History",{publicMethods:{initHistory:function(){if(o.extend(l,Dn,!0),l.history){xn=window.location,Sn=!1,On=!1,En=!1,Cn=An(),jn="pushState"in history,Cn.indexOf("gid=")>-1&&(Cn=(Cn=Cn.split("&gid=")[0]).split("?gid=")[0]),xe("afterChange",i.updateURL),xe("unbindEvents",(function(){o.unbind(window,"hashchange",i.onHashChange)}));var e=function(){kn=!0,On||(Sn?history.back():Cn?xn.hash=Cn:jn?history.pushState("",document.title,xn.pathname+xn.search):xn.hash=""),Rn()};xe("unbindEvents",(function(){d&&e()})),xe("destroy",(function(){kn||e()})),xe("firstUpdate",(function(){f=Fn().pid}));var t=Cn.indexOf("pid=");t>-1&&"&"===(Cn=Cn.substring(0,t)).slice(-1)&&(Cn=Cn.slice(0,-1)),setTimeout((function(){c&&o.bind(window,"hashchange",i.onHashChange)}),40)}},onHashChange:function(){if(An()===Cn)return On=!0,void i.close();wn||(_n=!0,i.goTo(Fn().pid),_n=!1)},updateURL:function(){Rn(),_n||(En?mn=setTimeout(In,800):In())}}}),o.extend(i,rt)},n)}(Lz);const zz=kn(Lz.exports);var Uz={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new o(r,i||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],u]:e._events[l].push(u):(e._events[l]=u,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,o,i,a){var u=n?n+e:e;if(!this._events[u])return!1;var l,c,s=this._events[u],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];s.fn.apply(s.context,l)}else{var f,p=s.length;for(c=0;c<p;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),d){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,r);break;case 4:s[c].fn.call(s[c].context,t,r,o);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];s[c].fn.apply(s[c].context,l)}}return!0},u.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==t||o&&!u.once||r&&u.context!==r||a(this,i);else{for(var l=0,c=[],s=u.length;l<s;l++)(u[l].fn!==t||o&&!u[l].once||r&&u[l].context!==r)&&c.push(u[l]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u}(Uz);const Hz=kn(Uz.exports);function qz(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Wz(){return Wz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Sd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Wz.apply(null,arguments)}function $z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($z=function(){return!!e})()}function Gz(e){var t="function"==typeof Map?new Map:void 0;return Gz=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if($z())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&xd(o,n.prototype),o}(e,arguments,Sd(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xd(n,e)},Gz(e)}function Kz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yz="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function Jz(e){var t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function Xz(e){return"nodeType"in e}function Zz(e){var t,n;return e?Jz(e)?e:Xz(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function Qz(e){return e instanceof Zz(e).Document}function eU(e){return!Jz(e)&&e instanceof Zz(e).HTMLElement}function tU(e){return e instanceof Zz(e).SVGElement}function nU(e){return e?Jz(e)?e.document:Xz(e)?Qz(e)?e:eU(e)||tU(e)?e.ownerDocument:document:document:document}var rU=Yz?a.useLayoutEffect:a.useEffect;function oU(e){var t=Object(a.useRef)(e);return rU((function(){t.current=e})),Object(a.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current.apply(t,n)}),[])}function iU(e,t){void 0===t&&(t=[e]);var n=Object(a.useRef)(e);return rU((function(){n.current!==e&&(n.current=e)}),t),n}function aU(e,t){var n=Object(a.useRef)();return Object(a.useMemo)((function(){var t=e(n.current);return n.current=t,t}),tl(t))}function uU(e){var t=oU(e),n=Object(a.useRef)(null),r=Object(a.useCallback)((function(e){e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function lU(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var cU={};function sU(e,t){return Object(a.useMemo)((function(){if(t)return t;var n=null==cU[e]?0:cU[e]+1;return cU[e]=n,e+"-"+n}),[e,t])}function dU(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((function(t,n){for(var r=0,o=Object.entries(n);r<o.length;r++){var i=Tf(o[r],2),a=i[0],u=i[1],l=t[a];null!=l&&(t[a]=l+e*u)}return t}),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kz(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}}var fU=dU(1),pU=dU(-1);function vU(e){if(!e)return!1;var t=Zz(e.target).KeyboardEvent;return t&&e instanceof t}function hU(e){if(function(e){if(!e)return!1;var t=Zz(e.target).TouchEvent;return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){var t=e.touches[0];return{x:t.clientX,y:t.clientY}}if(e.changedTouches&&e.changedTouches.length){var n=e.changedTouches[0];return{x:n.clientX,y:n.clientY}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}var gU=Object.freeze({Translate:{toString:function(e){if(e){var t=e.x,n=e.y;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}}},Scale:{toString:function(e){if(e)return"scaleX("+e.scaleX+") scaleY("+e.scaleY+")"}},Transform:{toString:function(e){if(e)return[gU.Translate.toString(e),gU.Scale.toString(e)].join(" ")}},Transition:{toString:function(e){return e.property+" "+e.duration+"ms "+e.easing}}}),mU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yU(e){return e.matches(mU)?e:e.querySelector(mU)}var bU={display:"none"};function wU(e){var t=e.id,n=e.value;return u.a.createElement("div",{id:t,style:bU},n)}function _U(e){var t=e.id,n=e.announcement,r=e.ariaLiveType,o=void 0===r?"assertive":r;return u.a.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}var kU=["transform"],CU=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],EU=["active","dragOverlay","transform"];function OU(e,t,n){return t=Sd(t),Od(e,SU()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function SU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SU=function(){return!!e})()}function xU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xU(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DU(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return AU(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AU(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function AU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var RU=Object(a.createContext)(null);var FU,IU,PU={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},MU={onDragStart:function(e){return"Picked up draggable item "+e.active.id+"."},onDragOver:function(e){var t=e.active,n=e.over;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd:function(e){var t=e.active,n=e.over;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel:function(e){return"Dragging was cancelled. Draggable item "+e.active.id+" was dropped."}};function TU(e){var t,n,r=e.announcements,o=void 0===r?MU:r,i=e.container,c=e.hiddenTextDescribedById,s=e.screenReaderInstructions,d=void 0===s?PU:s,f=function(){var e=Tf(Object(a.useState)(""),2),t=e[0],n=e[1],r=Object(a.useCallback)((function(e){null!=e&&n(e)}),[]);return{announce:r,announcement:t}}(),p=f.announce,v=f.announcement,h=sU("DndLiveRegion"),g=Tf(Object(a.useState)(!1),2),m=g[0],y=g[1];if(Object(a.useEffect)((function(){y(!0)}),[]),t=Object(a.useMemo)((function(){return{onDragStart:function(e){var t=e.active;p(o.onDragStart({active:t}))},onDragMove:function(e){var t=e.active,n=e.over;o.onDragMove&&p(o.onDragMove({active:t,over:n}))},onDragOver:function(e){var t=e.active,n=e.over;p(o.onDragOver({active:t,over:n}))},onDragEnd:function(e){var t=e.active,n=e.over;p(o.onDragEnd({active:t,over:n}))},onDragCancel:function(e){var t=e.active,n=e.over;p(o.onDragCancel({active:t,over:n}))}}}),[p,o]),n=Object(a.useContext)(RU),Object(a.useEffect)((function(){if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(t)}),[t,n]),!m)return null;var b=u.a.createElement(u.a.Fragment,null,u.a.createElement(wU,{id:c,value:d.draggable}),u.a.createElement(_U,{id:h,announcement:v}));return i?Object(l.createPortal)(b,i):b}function NU(){}function BU(e,t){return Object(a.useMemo)((function(){return{sensor:e,options:null!=t?t:{}}}),[e,t])}function VU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useMemo)((function(){return[].concat(t).filter((function(e){return null!=e}))}),[].concat(t))}(IU=FU||(FU={})).DragStart="dragStart",IU.DragMove="dragMove",IU.DragEnd="dragEnd",IU.DragCancel="dragCancel",IU.DragOver="dragOver",IU.RegisterDroppable="registerDroppable",IU.SetDroppableDisabled="setDroppableDisabled",IU.UnregisterDroppable="unregisterDroppable";var LU=Object.freeze({x:0,y:0});function zU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function UU(e,t){var n=hU(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function HU(e,t){return e.data.value-t.data.value}function qU(e,t){var n=e.data.value;return t.data.value-n}function WU(e,t){return e&&0!==e.length?Tf(e,1)[0][t]:null}function $U(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}var GU=function(e){var t,n=e.collisionRect,r=e.droppableRects,o=e.droppableContainers,i=$U(n,n.left,n.top),a=[],u=DU(o);try{for(u.s();!(t=u.n()).done;){var l=t.value,c=l.id,s=r.get(c);if(s){var d=zU($U(s),i);a.push({id:c,data:{droppableContainer:l,value:d}})}}}catch(e){u.e(e)}finally{u.f()}return a.sort(HU)};function KU(e,t){var n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,u=i-n;if(r<o&&n<i){var l=t.width*t.height,c=e.width*e.height,s=a*u;return Number((s/(l+c-s)).toFixed(4))}return 0}var YU=function(e){var t,n=e.collisionRect,r=e.droppableRects,o=[],i=DU(e.droppableContainers);try{for(i.s();!(t=i.n()).done;){var a=t.value,u=a.id,l=r.get(u);if(l){var c=KU(l,n);c>0&&o.push({id:u,data:{droppableContainer:a,value:c}})}}}catch(e){i.e(e)}finally{i.f()}return o.sort(qU)};function JU(e,t){var n=t.top,r=t.left,o=t.bottom,i=t.right;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=i}function XU(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:LU}function ZU(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((function(t,n){return jU(jU({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})}),jU({},t))}}var QU=ZU(1);function eH(e){if(e.startsWith("matrix3d(")){var t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){var n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}var tH,nH,rH={ignoreTransform:!1};function oH(e,t){void 0===t&&(t=rH);var n=e.getBoundingClientRect();if(t.ignoreTransform){var r=Zz(e).getComputedStyle(e),o=r.transform,i=r.transformOrigin;o&&(n=function(e,t,n){var r=eH(t);if(!r)return e;var o=r.scaleX,i=r.scaleY,a=r.x,u=r.y,l=e.left-a-(1-o)*parseFloat(n),c=e.top-u-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),s=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:s,height:d,top:c,right:l+s,bottom:c+d,left:l}}(n,o,i))}var a=n;return{top:a.top,left:a.left,width:a.width,height:a.height,bottom:a.bottom,right:a.right}}function iH(e){return oH(e,{ignoreTransform:!0})}function aH(e,t){var n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(Qz(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!eU(o)||tU(o))return n;if(n.includes(o))return n;var i=Zz(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=Zz(e).getComputedStyle(e));var n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((function(e){var r=t[e];return"string"==typeof r&&n.test(r)}))}(o,i)&&n.push(o),function(e,t){return void 0===t&&(t=Zz(e).getComputedStyle(e)),"fixed"===t.position}(o,i)?n:r(o.parentNode)}(e):n}function uH(e){var t=Tf(aH(e,1),1)[0];return null!=t?t:null}function lH(e){return Yz&&e?Jz(e)?e:Xz(e)?Qz(e)||e===nU(e).scrollingElement?window:eU(e)?e:null:null:null}function cH(e){return Jz(e)?e.scrollX:e.scrollLeft}function sH(e){return Jz(e)?e.scrollY:e.scrollTop}function dH(e){return{x:cH(e),y:sH(e)}}function fH(e){return!(!Yz||!e)&&e===document.scrollingElement}function pH(e){var t={x:0,y:0},n=fH(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(nH=tH||(tH={}))[nH.Forward=1]="Forward",nH[nH.Backward=-1]="Backward";var vH={x:.2,y:.2};function hH(e,t,n,r,o){var i=n.top,a=n.left,u=n.right,l=n.bottom;void 0===r&&(r=10),void 0===o&&(o=vH);var c=pH(e),s=c.isTop,d=c.isBottom,f=c.isLeft,p=c.isRight,v={x:0,y:0},h={x:0,y:0},g=t.height*o.y,m=t.width*o.x;return!s&&i<=t.top+g?(v.y=tH.Backward,h.y=r*Math.abs((t.top+g-i)/g)):!d&&l>=t.bottom-g&&(v.y=tH.Forward,h.y=r*Math.abs((t.bottom-g-l)/g)),!p&&u>=t.right-m?(v.x=tH.Forward,h.x=r*Math.abs((t.right-m-u)/m)):!f&&a<=t.left+m&&(v.x=tH.Backward,h.x=r*Math.abs((t.left+m-a)/m)),{direction:v,speed:h}}function gH(e){if(e===document.scrollingElement){var t=window,n=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}var o=e.getBoundingClientRect();return{top:o.top,left:o.left,right:o.right,bottom:o.bottom,width:e.clientWidth,height:e.clientHeight}}function mH(e){return e.reduce((function(e,t){return fU(e,dH(t))}),LU)}function yH(e,t){if(void 0===t&&(t=oH),e){var n=t(e),r=n.top,o=n.left,i=n.bottom,a=n.right;uH(e)&&(i<=0||a<=0||r>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}}var bH,wH,_H,kH,CH=[["x",["left","right"],function(e){return e.reduce((function(e,t){return e+cH(t)}),0)}],["y",["top","bottom"],function(e){return e.reduce((function(e,t){return e+sH(t)}),0)}]],EH=ll((function e(t,n){var r=this;sl(this,e),this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;var o=aH(n),i=mH(o);this.rect=jU({},t),this.width=t.width,this.height=t.height;for(var a=function(){var e,t=Tf(l[u],3),n=t[0],a=t[1],c=t[2],s=DU(a);try{var d=function(){var t=e.value;Object.defineProperty(r,t,{get:function(){var e=c(o),a=i[n]-e;return r.rect[t]+a},enumerable:!0})};for(s.s();!(e=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}},u=0,l=CH;u<l.length;u++)a();Object.defineProperty(this,"rect",{enumerable:!1})})),OH=function(){return ll((function e(t){var n=this;sl(this,e),this.target=void 0,this.listeners=[],this.removeAll=function(){n.listeners.forEach((function(e){var t,r;return null==(r=n.target)?void 0:(t=r).removeEventListener.apply(t,tl(e))}))},this.target=t}),[{key:"add",value:function(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}])}();function SH(e,t){var n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(Math.pow(n,2)+Math.pow(r,2))>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function xH(e){e.preventDefault()}function jH(e){e.stopPropagation()}(wH=bH||(bH={})).Click="click",wH.DragStart="dragstart",wH.Keydown="keydown",wH.ContextMenu="contextmenu",wH.Resize="resize",wH.SelectionChange="selectionchange",wH.VisibilityChange="visibilitychange",(kH=_H||(_H={})).Space="Space",kH.Down="ArrowDown",kH.Right="ArrowRight",kH.Left="ArrowLeft",kH.Up="ArrowUp",kH.Esc="Escape",kH.Enter="Enter";var DH={start:[_H.Space,_H.Enter],cancel:[_H.Esc],end:[_H.Space,_H.Enter]},AH=function(e,t){var n=t.currentCoordinates;switch(e.code){case _H.Right:return jU(jU({},n),{},{x:n.x+25});case _H.Left:return jU(jU({},n),{},{x:n.x-25});case _H.Down:return jU(jU({},n),{},{y:n.y+25});case _H.Up:return jU(jU({},n),{},{y:n.y-25})}},RH=function(){return ll((function e(t){sl(this,e),this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;var n=t.event.target;this.props=t,this.listeners=new OH(nU(n)),this.windowListeners=new OH(Zz(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}),[{key:"attach",value:function(){var e=this;this.handleStart(),this.windowListeners.add(bH.Resize,this.handleCancel),this.windowListeners.add(bH.VisibilityChange,this.handleCancel),setTimeout((function(){return e.listeners.add(bH.Keydown,e.handleKeyDown)}))}},{key:"handleStart",value:function(){var e=this.props,t=e.activeNode,n=e.onStart,r=t.node.current;r&&yH(r),n(LU)}},{key:"handleKeyDown",value:function(e){if(vU(e)){var t=this.props,n=t.active,r=t.context,o=t.options,i=o.keyboardCodes,a=void 0===i?DH:i,u=o.coordinateGetter,l=void 0===u?AH:u,c=o.scrollBehavior,s=void 0===c?"smooth":c,d=e.code;if(a.end.includes(d))return void this.handleEnd(e);if(a.cancel.includes(d))return void this.handleCancel(e);var f=r.current.collisionRect,p=f?{x:f.left,y:f.top}:LU;this.referenceCoordinates||(this.referenceCoordinates=p);var v=l(e,{active:n,context:r.current,currentCoordinates:p});if(v){var h,g=pU(v,p),m={x:0,y:0},y=DU(r.current.scrollableAncestors);try{for(y.s();!(h=y.n()).done;){var b=h.value,w=e.code,_=pH(b),k=_.isTop,C=_.isRight,E=_.isLeft,O=_.isBottom,S=_.maxScroll,x=_.minScroll,j=gH(b),D={x:Math.min(w===_H.Right?j.right-j.width/2:j.right,Math.max(w===_H.Right?j.left:j.left+j.width/2,v.x)),y:Math.min(w===_H.Down?j.bottom-j.height/2:j.bottom,Math.max(w===_H.Down?j.top:j.top+j.height/2,v.y))},A=w===_H.Right&&!C||w===_H.Left&&!E,R=w===_H.Down&&!O||w===_H.Up&&!k;if(A&&D.x!==v.x){var F=b.scrollLeft+g.x,I=w===_H.Right&&F<=S.x||w===_H.Left&&F>=x.x;if(I&&!g.y)return void b.scrollTo({left:F,behavior:s});m.x=I?b.scrollLeft-F:w===_H.Right?b.scrollLeft-S.x:b.scrollLeft-x.x,m.x&&b.scrollBy({left:-m.x,behavior:s});break}if(R&&D.y!==v.y){var P=b.scrollTop+g.y,M=w===_H.Down&&P<=S.y||w===_H.Up&&P>=x.y;if(M&&!g.x)return void b.scrollTo({top:P,behavior:s});m.y=M?b.scrollTop-P:w===_H.Down?b.scrollTop-S.y:b.scrollTop-x.y,m.y&&b.scrollBy({top:-m.y,behavior:s});break}}}catch(e){y.e(e)}finally{y.f()}this.handleMove(e,fU(pU(v,this.referenceCoordinates),m))}}}},{key:"handleMove",value:function(e,t){var n=this.props.onMove;e.preventDefault(),n(t)}},{key:"handleEnd",value:function(e){var t=this.props.onEnd;e.preventDefault(),this.detach(),t()}},{key:"handleCancel",value:function(e){var t=this.props.onCancel;e.preventDefault(),this.detach(),t()}},{key:"detach",value:function(){this.listeners.removeAll(),this.windowListeners.removeAll()}}])}();function FH(e){return Boolean(e&&"distance"in e)}function IH(e){return Boolean(e&&"delay"in e)}RH.activators=[{eventName:"onKeyDown",handler:function(e,t,n){var r=t.keyboardCodes,o=void 0===r?DH:r,i=t.onActivation,a=n.active,u=e.nativeEvent.code;if(o.start.includes(u)){var l=a.activatorNode.current;return(!l||e.target===l)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];var PH=function(){return ll((function e(t,n,r){var o;sl(this,e),void 0===r&&(r=function(e){return e instanceof Zz(e).EventTarget?e:nU(e)}(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;var i=t.event,a=i.target;this.props=t,this.events=n,this.document=nU(a),this.documentListeners=new OH(this.document),this.listeners=new OH(r),this.windowListeners=new OH(Zz(a)),this.initialCoordinates=null!=(o=hU(i))?o:LU,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}),[{key:"attach",value:function(){var e=this.events,t=this.props.options,n=t.activationConstraint,r=t.bypassActivationConstraint;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(bH.Resize,this.handleCancel),this.windowListeners.add(bH.DragStart,xH),this.windowListeners.add(bH.VisibilityChange,this.handleCancel),this.windowListeners.add(bH.ContextMenu,xH),this.documentListeners.add(bH.Keydown,this.handleKeydown),n){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(IH(n))return void(this.timeoutId=setTimeout(this.handleStart,n.delay));if(FH(n))return}this.handleStart()}},{key:"detach",value:function(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"handleStart",value:function(){var e=this.initialCoordinates,t=this.props.onStart;e&&(this.activated=!0,this.documentListeners.add(bH.Click,jH,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(bH.SelectionChange,this.removeTextSelection),t(e))}},{key:"handleMove",value:function(e){var t,n=this.activated,r=this.initialCoordinates,o=this.props,i=o.onMove,a=o.options.activationConstraint;if(r){var u=null!=(t=hU(e))?t:LU,l=pU(r,u);if(!n&&a){if(FH(a)){if(null!=a.tolerance&&SH(l,a.tolerance))return this.handleCancel();if(SH(l,a.distance))return this.handleStart()}return IH(a)&&SH(l,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),i(u)}}},{key:"handleEnd",value:function(){var e=this.props.onEnd;this.detach(),e()}},{key:"handleCancel",value:function(){var e=this.props.onCancel;this.detach(),e()}},{key:"handleKeydown",value:function(e){e.code===_H.Esc&&this.handleCancel()}},{key:"removeTextSelection",value:function(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}])}(),MH={move:{name:"pointermove"},end:{name:"pointerup"}},TH=function(e){function t(e){sl(this,t);var n=nU(e.event.target);return OU(this,t,[e,MH,n])}return jd(t,e),ll(t)}(PH);TH.activators=[{eventName:"onPointerDown",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];var NH,BH,VH={move:{name:"mousemove"},end:{name:"mouseup"}};(BH=NH||(NH={}))[BH.RightClick=2]="RightClick";var LH=function(e){function t(e){return sl(this,t),OU(this,t,[e,VH,nU(e.event.target)])}return jd(t,e),ll(t)}(PH);LH.activators=[{eventName:"onMouseDown",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return n.button!==NH.RightClick&&(null==r||r({event:n}),!0)}}];var zH,UH,HH,qH,WH={move:{name:"touchmove"},end:{name:"touchend"}};function $H(e){var t,n=e.acceleration,r=e.activator,o=void 0===r?zH.Pointer:r,i=e.canScroll,u=e.draggingRect,l=e.enabled,c=e.interval,s=void 0===c?5:c,d=e.order,f=void 0===d?HH.TreeOrder:d,p=e.pointerCoordinates,v=e.scrollableAncestors,h=e.scrollableAncestorRects,g=e.delta,m=e.threshold,y=function(e){var t=e.delta,n=e.disabled,r=lU(t);return aU((function(e){if(n||!r||!e)return JH;var o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:il(il({},tH.Backward,e.x[tH.Backward]||-1===o.x),tH.Forward,e.x[tH.Forward]||1===o.x),y:il(il({},tH.Backward,e.y[tH.Backward]||-1===o.y),tH.Forward,e.y[tH.Forward]||1===o.y)}}),[n,t,r])}({delta:g,disabled:!l}),b=Tf((t=Object(a.useRef)(null),[Object(a.useCallback)((function(e,n){t.current=setInterval(e,n)}),[]),Object(a.useCallback)((function(){null!==t.current&&(clearInterval(t.current),t.current=null)}),[])]),2),w=b[0],_=b[1],k=Object(a.useRef)({x:0,y:0}),C=Object(a.useRef)({x:0,y:0}),E=Object(a.useMemo)((function(){switch(o){case zH.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case zH.DraggableRect:return u}}),[o,u,p]),O=Object(a.useRef)(null),S=Object(a.useCallback)((function(){var e=O.current;if(e){var t=k.current.x*C.current.x,n=k.current.y*C.current.y;e.scrollBy(t,n)}}),[]),x=Object(a.useMemo)((function(){return f===HH.TreeOrder?tl(v).reverse():v}),[f,v]);Object(a.useEffect)((function(){if(l&&v.length&&E){var e,t=DU(x);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!1!==(null==i?void 0:i(r))){var o=v.indexOf(r),a=h[o];if(a){for(var u=hH(r,a,E,n,m),c=u.direction,d=u.speed,f=0,p=["x","y"];f<p.length;f++){var g=p[f];y[g][c[g]]||(d[g]=0,c[g]=0)}if(d.x>0||d.y>0)return _(),O.current=r,w(S,s),k.current=d,void(C.current=c)}}}}catch(e){t.e(e)}finally{t.f()}k.current={x:0,y:0},C.current={x:0,y:0},_()}else _()}),[n,S,i,_,l,s,JSON.stringify(E),JSON.stringify(y),w,v,x,h,JSON.stringify(m)])}(function(e){function t(e){return sl(this,t),OU(this,t,[e,WH])}return jd(t,e),ll(t,null,[{key:"setup",value:function(){return window.addEventListener(WH.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(WH.move.name,e)};function e(){}}}])}(PH)).activators=[{eventName:"onTouchStart",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return!(n.touches.length>1)&&(null==r||r({event:n}),!0)}}],(UH=zH||(zH={}))[UH.Pointer=0]="Pointer",UH[UH.DraggableRect=1]="DraggableRect",(qH=HH||(HH={}))[qH.TreeOrder=0]="TreeOrder",qH[qH.ReversedTreeOrder=1]="ReversedTreeOrder";var GH,KH,YH,JH={x:il(il({},tH.Backward,!1),tH.Forward,!1),y:il(il({},tH.Backward,!1),tH.Forward,!1)};(KH=GH||(GH={}))[KH.Always=0]="Always",KH[KH.BeforeDragging=1]="BeforeDragging",KH[KH.WhileDragging=2]="WhileDragging",(YH||(YH={})).Optimized="optimized";var XH=new Map;function ZH(e,t){return aU((function(n){return e?n||("function"==typeof t?t(e):e):null}),[t,e])}function QH(e){var t=e.callback,n=e.disabled,r=oU(t),o=Object(a.useMemo)((function(){if(!n&&"undefined"!=typeof window&&void 0!==window.ResizeObserver)return new(0,window.ResizeObserver)(r)}),[n]);return Object(a.useEffect)((function(){return function(){return null==o?void 0:o.disconnect()}}),[o]),o}function eq(e){return new EH(oH(e),e)}function tq(e,t,n){void 0===t&&(t=eq);var r=Tf(Object(a.useReducer)((function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;var i=t(e);if(JSON.stringify(r)===JSON.stringify(i))return r;return i}),null),2),o=r[0],i=r[1],u=function(e){var t=e.callback,n=e.disabled,r=oU(t),o=Object(a.useMemo)((function(){if(!n&&"undefined"!=typeof window&&void 0!==window.MutationObserver)return new(0,window.MutationObserver)(r)}),[r,n]);return Object(a.useEffect)((function(){return function(){return null==o?void 0:o.disconnect()}}),[o]),o}({callback:function(t){if(e){var n,r=DU(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o.type,u=o.target;if("childList"===a&&u instanceof HTMLElement&&u.contains(e)){i();break}}}catch(e){r.e(e)}finally{r.f()}}}}),l=QH({callback:i});return rU((function(){i(),e?(null==l||l.observe(e),null==u||u.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==u||u.disconnect())}),[e]),o}var nq=[];function rq(e,t){void 0===t&&(t=[]);var n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current=null}),t),Object(a.useEffect)((function(){var t=e!==LU;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?pU(e,n.current):LU}function oq(e){return Object(a.useMemo)((function(){return e?function(e){var t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null}),[e])}var iq=[];function aq(e){if(!e)return null;if(e.children.length>1)return e;var t=e.children[0];return eU(t)?t:e}var uq=[{sensor:TH,options:{}},{sensor:RH,options:{}}],lq={current:{}},cq={draggable:{measure:iH},droppable:{measure:iH,strategy:GH.WhileDragging,frequency:YH.Optimized},dragOverlay:{measure:oH}},sq=function(e){function t(){return sl(this,t),OU(this,t,arguments)}return jd(t,e),ll(t,[{key:"get",value:function(e){var n;return null!=e&&null!=(n=function(e,t,n,r){var o=Wz(Sd(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}(t,"get",this,3)([e]))?n:void 0}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"getEnabled",value:function(){return this.toArray().filter((function(e){return!e.disabled}))}},{key:"getNodeFor",value:function(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}])}(Gz(Map)),dq={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new sq,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:NU},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cq,measureDroppableContainers:NU,windowRect:null,measuringScheduled:!1},fq={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:NU,draggableNodes:new Map,over:null,measureDroppableContainers:NU},pq=Object(a.createContext)(fq),vq=Object(a.createContext)(dq);function hq(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new sq}}}function gq(e,t){switch(t.type){case FU.DragStart:return jU(jU({},e),{},{draggable:jU(jU({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case FU.DragMove:return e.draggable.active?jU(jU({},e),{},{draggable:jU(jU({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})}):e;case FU.DragEnd:case FU.DragCancel:return jU(jU({},e),{},{draggable:jU(jU({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case FU.RegisterDroppable:var n=t.element,r=n.id,o=new sq(e.droppable.containers);return o.set(r,n),jU(jU({},e),{},{droppable:jU(jU({},e.droppable),{},{containers:o})});case FU.SetDroppableDisabled:var i=t.id,a=t.key,u=t.disabled,l=e.droppable.containers.get(i);if(!l||a!==l.key)return e;var c=new sq(e.droppable.containers);return c.set(i,jU(jU({},l),{},{disabled:u})),jU(jU({},e),{},{droppable:jU(jU({},e.droppable),{},{containers:c})});case FU.UnregisterDroppable:var s=t.id,d=t.key,f=e.droppable.containers.get(s);if(!f||d!==f.key)return e;var p=new sq(e.droppable.containers);return p.delete(s),jU(jU({},e),{},{droppable:jU(jU({},e.droppable),{},{containers:p})});default:return e}}function mq(e){var t=e.disabled,n=Object(a.useContext)(pq),r=n.active,o=n.activatorEvent,i=n.draggableNodes,u=lU(o),l=lU(null==r?void 0:r.id);return Object(a.useEffect)((function(){if(!t&&!o&&u&&null!=l){if(!vU(u))return;if(document.activeElement===u.target)return;var e=i.get(l);if(!e)return;var n=e.activatorNode,r=e.node;if(!n.current&&!r.current)return;requestAnimationFrame((function(){for(var e=0,t=[n.current,r.current];e<t.length;e++){var o=t[e];if(o){var i=yU(o);if(i){i.focus();break}}}}))}}),[o,t,i,l,u]),null}function yq(e,t){var n=t.transform,r=qz(t,kU);return null!=e&&e.length?e.reduce((function(e,t){return t(jU({transform:e},r))}),n):n}var bq,wq,_q=Object(a.createContext)(jU(jU({},LU),{},{scaleX:1,scaleY:1}));(wq=bq||(bq={}))[wq.Uninitialized=0]="Uninitialized",wq[wq.Initializing=1]="Initializing",wq[wq.Initialized=2]="Initialized";var kq=Object(a.memo)((function(e){var t,n,r,o,i,c,s,d=e.id,f=e.accessibility,p=e.autoScroll,v=void 0===p||p,h=e.children,g=e.sensors,m=void 0===g?uq:g,y=e.collisionDetection,b=void 0===y?YU:y,w=e.measuring,_=e.modifiers,k=qz(e,CU),C=Tf(Object(a.useReducer)(gq,void 0,hq),2),E=C[0],O=C[1],S=(i=Tf(Object(a.useState)((function(){return new Set})),1)[0],c=Object(a.useCallback)((function(e){return i.add(e),function(){return i.delete(e)}}),[i]),[Object(a.useCallback)((function(e){var t=e.type,n=e.event;i.forEach((function(e){var r;return null==(r=e[t])?void 0:r.call(e,n)}))}),[i]),c]),x=Tf(S,2),j=x[0],D=x[1],A=Tf(Object(a.useState)(bq.Uninitialized),2),R=A[0],F=A[1],I=R===bq.Initialized,P=E.draggable,M=P.active,T=P.nodes,N=P.translate,B=E.droppable.containers,V=M?T.get(M):null,L=Object(a.useRef)({initial:null,translated:null}),z=Object(a.useMemo)((function(){var e;return null!=M?{id:M,data:null!=(e=null==V?void 0:V.data)?e:lq,rect:L}:null}),[M,V]),U=Object(a.useRef)(null),H=Tf(Object(a.useState)(null),2),q=H[0],W=H[1],$=Tf(Object(a.useState)(null),2),G=$[0],K=$[1],Y=iU(k,Object.values(k)),J=sU("DndDescribedBy",d),X=Object(a.useMemo)((function(){return B.getEnabled()}),[B]),Z=(s=w,Object(a.useMemo)((function(){return{draggable:jU(jU({},cq.draggable),null==s?void 0:s.draggable),droppable:jU(jU({},cq.droppable),null==s?void 0:s.droppable),dragOverlay:jU(jU({},cq.dragOverlay),null==s?void 0:s.dragOverlay)}}),[null==s?void 0:s.draggable,null==s?void 0:s.droppable,null==s?void 0:s.dragOverlay])),Q=function(e,t){var n=t.dragging,r=t.dependencies,o=t.config,i=Tf(Object(a.useState)(null),2),u=i[0],l=i[1],c=o.frequency,s=o.measure,d=o.strategy,f=Object(a.useRef)(e),p=function(){switch(d){case GH.Always:return!1;case GH.BeforeDragging:return n;default:return!n}}(),v=iU(p),h=Object(a.useCallback)((function(e){void 0===e&&(e=[]),v.current||l((function(t){return null===t?e:t.concat(e.filter((function(e){return!t.includes(e)})))}))}),[v]),g=Object(a.useRef)(null),m=aU((function(t){if(p&&!n)return XH;if(!t||t===XH||f.current!==e||null!=u){var r,o=new Map,i=DU(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a)if(u&&u.length>0&&!u.includes(a.id)&&a.rect.current)o.set(a.id,a.rect.current);else{var l=a.node.current,c=l?new EH(s(l),l):null;a.rect.current=c,c&&o.set(a.id,c)}}}catch(e){i.e(e)}finally{i.f()}return o}return t}),[e,u,n,p,s]);return Object(a.useEffect)((function(){f.current=e}),[e]),Object(a.useEffect)((function(){p||h()}),[n,p]),Object(a.useEffect)((function(){u&&u.length>0&&l(null)}),[JSON.stringify(u)]),Object(a.useEffect)((function(){p||"number"!=typeof c||null!==g.current||(g.current=setTimeout((function(){h(),g.current=null}),c))}),[c,p,h].concat(tl(r))),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:null!=u}}(X,{dragging:I,dependencies:[N.x,N.y],config:Z.droppable}),ee=Q.droppableRects,te=Q.measureDroppableContainers,ne=Q.measuringScheduled,re=function(e,t){var n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return aU((function(e){var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(T,M),oe=Object(a.useMemo)((function(){return G?hU(G):null}),[G]),ie=function(){var e=!1===(null==q?void 0:q.autoScrollEnabled),t="object"===Ln(v)?!1===v.enabled:!1===v,n=I&&!e&&!t;if("object"===Ln(v))return jU(jU({},v),{},{enabled:n});return{enabled:n}}(),ae=function(e,t){return ZH(e,t)}(re,Z.draggable.measure);!function(e){var t=e.activeNode,n=e.measure,r=e.initialRect,o=e.config,i=void 0===o||o,u=Object(a.useRef)(!1),l="boolean"==typeof i?{x:i,y:i}:i,c=l.x,s=l.y;rU((function(){if((c||s)&&t){if(!u.current&&r){var e=null==t?void 0:t.node.current;if(e&&!1!==e.isConnected){var o=XU(n(e),r);if(c||(o.x=0),s||(o.y=0),u.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){var i=uH(e);i&&i.scrollBy({top:o.y,left:o.x})}}}}else u.current=!1}),[t,c,s,r,n])}({activeNode:M?T.get(M):null,config:ie.layoutShiftCompensation,initialRect:ae,measure:Z.draggable.measure});var ue,le,ce,se,de,fe,pe,ve=tq(re,Z.draggable.measure,ae),he=tq(re?re.parentElement:null),ge=Object(a.useRef)({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=B.getNodeFor(null==(t=ge.current.over)?void 0:t.id),ye=function(e){var t=e.measure,n=Tf(Object(a.useState)(null),2),r=n[0],o=n[1],i=QH({callback:Object(a.useCallback)((function(e){var n,r=DU(e);try{var i=function(){var e=n.value.target;if(eU(e))return o((function(n){var r=t(e);return n?jU(jU({},n),{},{width:r.width,height:r.height}):r})),1};for(r.s();!(n=r.n()).done&&!i(););}catch(e){r.e(e)}finally{r.f()}}),[t])}),u=Tf(uU(Object(a.useCallback)((function(e){var n=aq(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),o(n?t(n):null)}),[t,i])),2),l=u[0],c=u[1];return Object(a.useMemo)((function(){return{nodeRef:l,rect:r,setRef:c}}),[r,l,c])}({measure:Z.dragOverlay.measure}),be=null!=(n=ye.nodeRef.current)?n:re,we=I?null!=(r=ye.rect)?r:ve:null,_e=Boolean(ye.nodeRef.current&&ye.rect),ke=XU(ue=_e?null:ve,ZH(ue)),Ce=oq(be?Zz(be):null),Ee=function(e){var t=Object(a.useRef)(e),n=aU((function(n){return e?n&&n!==nq&&e&&t.current&&e.parentNode===t.current.parentNode?n:aH(e):nq}),[e]);return Object(a.useEffect)((function(){t.current=e}),[e]),n}(I?null!=me?me:re:null),Oe=function(e,t){void 0===t&&(t=oH);var n=Tf(e,1)[0],r=oq(n?Zz(n):null),o=Tf(Object(a.useReducer)((function(){return e.length?e.map((function(e){return fH(e)?r:new EH(t(e),e)})):iq}),iq),2),i=o[0],u=o[1],l=QH({callback:u});return e.length>0&&i===iq&&u(),rU((function(){e.length?e.forEach((function(e){return null==l?void 0:l.observe(e)})):(null==l||l.disconnect(),u())}),[e]),i}(Ee),Se=yq(_,{transform:{x:N.x-ke.x,y:N.y-ke.y,scaleX:1,scaleY:1},activatorEvent:G,active:z,activeNodeRect:ve,containerNodeRect:he,draggingNodeRect:we,over:ge.current.over,overlayNodeRect:ye.rect,scrollableAncestors:Ee,scrollableAncestorRects:Oe,windowRect:Ce}),xe=oe?fU(oe,N):null,je=(le=Ee,ce=Tf(Object(a.useState)(null),2),se=ce[0],de=ce[1],fe=Object(a.useRef)(le),pe=Object(a.useCallback)((function(e){var t=lH(e.target);t&&de((function(e){return e?(e.set(t,dH(t)),new Map(e)):null}))}),[]),Object(a.useEffect)((function(){var e=fe.current;if(le!==e){n(e);var t=le.map((function(e){var t=lH(e);return t?(t.addEventListener("scroll",pe,{passive:!0}),[t,dH(t)]):null})).filter((function(e){return null!=e}));de(t.length?new Map(t):null),fe.current=le}return function(){n(le),n(e)};function n(e){e.forEach((function(e){var t=lH(e);null==t||t.removeEventListener("scroll",pe)}))}}),[pe,le]),Object(a.useMemo)((function(){return le.length?se?Array.from(se.values()).reduce((function(e,t){return fU(e,t)}),LU):mH(le):LU}),[le,se])),De=rq(je),Ae=rq(je,[ve]),Re=fU(Se,De),Fe=we?QU(we,Se):null,Ie=z&&Fe?b({active:z,collisionRect:Fe,droppableRects:ee,droppableContainers:X,pointerCoordinates:xe}):null,Pe=WU(Ie,"id"),Me=Tf(Object(a.useState)(null),2),Te=Me[0],Ne=Me[1],Be=function(e,t,n){return jU(jU({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(_e?Se:fU(Se,Ae),null!=(o=null==Te?void 0:Te.rect)?o:null,ve),Ve=Object(a.useCallback)((function(e,t){var n=t.sensor,r=t.options;if(null!=U.current){var o=T.get(U.current);if(o){var i=e.nativeEvent,a=new n({active:U.current,activeNode:o,event:i,options:r,context:ge,onStart:function(e){var t=U.current;if(null!=t){var n=T.get(t);if(n){var r=Y.current.onDragStart,o={active:{id:t,data:n.data,rect:L}};Object(l.unstable_batchedUpdates)((function(){null==r||r(o),F(bq.Initializing),O({type:FU.DragStart,initialCoordinates:e,active:t}),j({type:"onDragStart",event:o})}))}}},onMove:function(e){O({type:FU.DragMove,coordinates:e})},onEnd:u(FU.DragEnd),onCancel:u(FU.DragCancel)});Object(l.unstable_batchedUpdates)((function(){W(a),K(e.nativeEvent)}))}}function u(e){return function(){var t=rl(ml.mark((function t(){var n,r,o,a,u,c,s;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=ge.current,r=n.active,o=n.collisions,a=n.over,u=n.scrollAdjustedTranslate,c=null,!r||!u){t.next=10;break}if(s=Y.current.cancelDrop,c={activatorEvent:i,active:r,collisions:o,delta:u,over:a},e!==FU.DragEnd||"function"!=typeof s){t.next=10;break}return t.next=8,Promise.resolve(s(c));case 8:t.sent&&(e=FU.DragCancel);case 10:U.current=null,Object(l.unstable_batchedUpdates)((function(){O({type:e}),F(bq.Uninitialized),Ne(null),W(null),K(null);var t=e===FU.DragEnd?"onDragEnd":"onDragCancel";if(c){var n=Y.current[t];null==n||n(c),j({type:t,event:c})}}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}),[T]),Le=function(e,t){return Object(a.useMemo)((function(){return e.reduce((function(e,n){var r=n.sensor.activators.map((function(e){return{eventName:e.eventName,handler:t(e.handler,n)}}));return[].concat(tl(e),tl(r))}),[])}),[e,t])}(m,Object(a.useCallback)((function(e,t){return function(n,r){var o=n.nativeEvent,i=T.get(r);if(null===U.current&&i&&!o.dndKit&&!o.defaultPrevented){var a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},U.current=r,Ve(n,t))}}}),[T,Ve]));!function(e){Object(a.useEffect)((function(){if(Yz){var t=e.map((function(e){var t=e.sensor;return null==t.setup?void 0:t.setup()}));return function(){var e,n=DU(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;null==r||r()}}catch(e){n.e(e)}finally{n.f()}}}}),e.map((function(e){return e.sensor})))}(m),rU((function(){ve&&R===bq.Initializing&&F(bq.Initialized)}),[ve,R]),Object(a.useEffect)((function(){var e=Y.current.onDragMove,t=ge.current,n=t.active,r=t.activatorEvent,o=t.collisions,i=t.over;if(n&&r){var a={active:n,activatorEvent:r,collisions:o,delta:{x:Re.x,y:Re.y},over:i};Object(l.unstable_batchedUpdates)((function(){null==e||e(a),j({type:"onDragMove",event:a})}))}}),[Re.x,Re.y]),Object(a.useEffect)((function(){var e=ge.current,t=e.active,n=e.activatorEvent,r=e.collisions,o=e.droppableContainers,i=e.scrollAdjustedTranslate;if(t&&null!=U.current&&n&&i){var a=Y.current.onDragOver,u=o.get(Pe),c=u&&u.rect.current?{id:u.id,rect:u.rect.current,data:u.data,disabled:u.disabled}:null,s={active:t,activatorEvent:n,collisions:r,delta:{x:i.x,y:i.y},over:c};Object(l.unstable_batchedUpdates)((function(){Ne(c),null==a||a(s),j({type:"onDragOver",event:s})}))}}),[Pe]),rU((function(){ge.current={activatorEvent:G,active:z,activeNode:re,collisionRect:Fe,collisions:Ie,droppableRects:ee,draggableNodes:T,draggingNode:be,draggingNodeRect:we,droppableContainers:B,over:Te,scrollableAncestors:Ee,scrollAdjustedTranslate:Re},L.current={initial:we,translated:Fe}}),[z,re,Ie,Fe,T,be,we,ee,B,Te,Ee,Re]),$H(jU(jU({},ie),{},{delta:N,draggingRect:Fe,pointerCoordinates:xe,scrollableAncestors:Ee,scrollableAncestorRects:Oe}));var ze=Object(a.useMemo)((function(){return{active:z,activeNode:re,activeNodeRect:ve,activatorEvent:G,collisions:Ie,containerNodeRect:he,dragOverlay:ye,draggableNodes:T,droppableContainers:B,droppableRects:ee,over:Te,measureDroppableContainers:te,scrollableAncestors:Ee,scrollableAncestorRects:Oe,measuringConfiguration:Z,measuringScheduled:ne,windowRect:Ce}}),[z,re,ve,G,Ie,he,ye,T,B,ee,Te,te,Ee,Oe,Z,ne,Ce]),Ue=Object(a.useMemo)((function(){return{activatorEvent:G,activators:Le,active:z,activeNodeRect:ve,ariaDescribedById:{draggable:J},dispatch:O,draggableNodes:T,over:Te,measureDroppableContainers:te}}),[G,Le,z,ve,O,J,T,Te,te]);return u.a.createElement(RU.Provider,{value:D},u.a.createElement(pq.Provider,{value:Ue},u.a.createElement(vq.Provider,{value:ze},u.a.createElement(_q.Provider,{value:Be},h)),u.a.createElement(mq,{disabled:!1===(null==f?void 0:f.restoreFocus)})),u.a.createElement(TU,jU(jU({},f),{},{hiddenTextDescribedById:J})))})),Cq=Object(a.createContext)(null),Eq="button",Oq="Droppable";function Sq(e){var t=e.id,n=e.data,r=e.disabled,o=void 0!==r&&r,i=e.attributes,u=sU(Oq),l=Object(a.useContext)(pq),c=l.activators,s=l.activatorEvent,d=l.active,f=l.activeNodeRect,p=l.ariaDescribedById,v=l.draggableNodes,h=l.over,g=null!=i?i:{},m=g.role,y=void 0===m?Eq:m,b=g.roleDescription,w=void 0===b?"draggable":b,_=g.tabIndex,k=void 0===_?0:_,C=(null==d?void 0:d.id)===t,E=Object(a.useContext)(C?_q:Cq),O=Tf(uU(),2),S=O[0],x=O[1],j=Tf(uU(),2),D=j[0],A=j[1],R=function(e,t){return Object(a.useMemo)((function(){return e.reduce((function(e,n){var r=n.eventName,o=n.handler;return e[r]=function(e){o(e,t)},e}),{})}),[e,t])}(c,t),F=iU(n);return rU((function(){return v.set(t,{id:t,key:u,node:S,activatorNode:D,data:F}),function(){var e=v.get(t);e&&e.key===u&&v.delete(t)}}),[v,t]),{active:d,activatorEvent:s,activeNodeRect:f,attributes:Object(a.useMemo)((function(){return{role:y,tabIndex:k,"aria-disabled":o,"aria-pressed":!(!C||y!==Eq)||void 0,"aria-roledescription":w,"aria-describedby":p.draggable}}),[o,y,k,C,w,p.draggable]),isDragging:C,listeners:o?void 0:R,node:S,over:h,setNodeRef:x,setActivatorNodeRef:A,transform:E}}function xq(){return Object(a.useContext)(vq)}var jq="Droppable",Dq={timeout:25};function Aq(e){var t=e.animation,n=e.children,r=Tf(Object(a.useState)(null),2),o=r[0],i=r[1],l=Tf(Object(a.useState)(null),2),c=l[0],s=l[1],d=lU(n);return n||o||!d||i(d),rU((function(){if(c){var e=null==o?void 0:o.key,n=null==o?void 0:o.props.id;null!=e&&null!=n?Promise.resolve(t(n,c)).then((function(){i(null)})):i(null)}}),[t,o,c]),u.a.createElement(u.a.Fragment,null,n,o?Object(a.cloneElement)(o,{ref:s}):null)}var Rq={x:0,y:0,scaleX:1,scaleY:1};function Fq(e){var t=e.children;return u.a.createElement(pq.Provider,{value:fq},u.a.createElement(_q.Provider,{value:Rq},t))}var Iq={position:"fixed",touchAction:"none"},Pq=function(e){return vU(e)?"transform 250ms ease":void 0},Mq=Object(a.forwardRef)((function(e,t){var n=e.as,r=e.activatorEvent,o=e.adjustScale,i=e.children,a=e.className,l=e.rect,c=e.style,s=e.transform,d=e.transition,f=void 0===d?Pq:d;if(!l)return null;var p=o?s:jU(jU({},s),{},{scaleX:1,scaleY:1}),v=jU(jU({},Iq),{},{width:l.width,height:l.height,top:l.top,left:l.left,transform:gU.Transform.toString(p),transformOrigin:o&&r?UU(r,l):void 0,transition:"function"==typeof f?f(r):f},c);return u.a.createElement(n,{className:a,style:v,ref:t},i)})),Tq=function(e){return function(t){var n=t.active,r=t.dragOverlay,o={},i=e.styles,a=e.className;if(null!=i&&i.active)for(var u=0,l=Object.entries(i.active);u<l.length;u++){var c=Tf(l[u],2),s=c[0],d=c[1];void 0!==d&&(o[s]=n.node.style.getPropertyValue(s),n.node.style.setProperty(s,d))}if(null!=i&&i.dragOverlay)for(var f=0,p=Object.entries(i.dragOverlay);f<p.length;f++){var v=Tf(p[f],2),h=v[0],g=v[1];void 0!==g&&r.node.style.setProperty(h,g)}return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(var e=0,t=Object.entries(o);e<t.length;e++){var r=Tf(t[e],2),i=r[0],u=r[1];n.node.style.setProperty(i,u)}null!=a&&a.active&&n.node.classList.remove(a.active)}}},Nq={duration:250,easing:"ease",keyframes:function(e){var t=e.transform,n=t.initial,r=t.final;return[{transform:gU.Transform.toString(n)},{transform:gU.Transform.toString(r)}]},sideEffects:Tq({styles:{active:{opacity:"0"}}})};function Bq(e){var t=e.config,n=e.draggableNodes,r=e.droppableContainers,o=e.measuringConfiguration;return oU((function(e,i){if(null!==t){var a=n.get(e);if(a){var u=a.node.current;if(u){var l=aq(i);if(l){var c=eH(Zz(i).getComputedStyle(i).transform);if(c){var s="function"==typeof t?t:function(e){var t=jU(jU({},Nq),e),n=t.duration,r=t.easing,o=t.sideEffects,i=t.keyframes;return function(e){var t=e.active,a=e.dragOverlay,u=e.transform,l=qz(e,EU);if(n){var c={x:a.rect.left-t.rect.left,y:a.rect.top-t.rect.top},s={scaleX:1!==u.scaleX?t.rect.width*u.scaleX/a.rect.width:1,scaleY:1!==u.scaleY?t.rect.height*u.scaleY/a.rect.height:1},d=jU({x:u.x-c.x,y:u.y-c.y},s),f=i(jU(jU({},l),{},{active:t,dragOverlay:a,transform:{initial:u,final:d}})),p=Tf(f,1)[0],v=f[f.length-1];if(JSON.stringify(p)!==JSON.stringify(v)){var h=null==o?void 0:o(jU({active:t,dragOverlay:a},l)),g=a.node.animate(f,{duration:n,easing:r,fill:"forwards"});return new Promise((function(e){g.onfinish=function(){null==h||h(),e()}}))}}}}(t);return yH(u,o.draggable.measure),s({active:{id:e,data:a.data,node:u,rect:o.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(l)},droppableContainers:r,measuringConfiguration:o,transform:c})}}}}}}))}var Vq=0;var Lq=u.a.memo((function(e){var t,n=e.adjustScale,r=void 0!==n&&n,o=e.children,i=e.dropAnimation,l=e.style,c=e.transition,s=e.modifiers,d=e.wrapperElement,f=void 0===d?"div":d,p=e.className,v=e.zIndex,h=void 0===v?999:v,g=xq(),m=g.activatorEvent,y=g.active,b=g.activeNodeRect,w=g.containerNodeRect,_=g.draggableNodes,k=g.droppableContainers,C=g.dragOverlay,E=g.over,O=g.measuringConfiguration,S=g.scrollableAncestors,x=g.scrollableAncestorRects,j=g.windowRect,D=Object(a.useContext)(_q),A=(t=null==y?void 0:y.id,Object(a.useMemo)((function(){if(null!=t)return++Vq}),[t])),R=yq(s,{activatorEvent:m,active:y,activeNodeRect:b,containerNodeRect:w,draggingNodeRect:C.rect,over:E,overlayNodeRect:C.rect,scrollableAncestors:S,scrollableAncestorRects:x,transform:D,windowRect:j}),F=ZH(b),I=Bq({config:i,draggableNodes:_,droppableContainers:k,measuringConfiguration:O}),P=F?C.setRef:void 0;return u.a.createElement(Fq,null,u.a.createElement(Aq,{animation:I},y&&A?u.a.createElement(Mq,{key:A,id:y.id,ref:P,as:f,activatorEvent:m,adjustScale:r,className:p,transition:c,rect:F,style:jU({zIndex:h},l),transform:R},o):null))}));function zq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zq(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hq(e,t,n){var r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function qq(e,t){return e.reduce((function(e,n,r){var o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function Wq(e){return null!==e&&e>=0}var $q={scaleX:1,scaleY:1},Gq=function(e){var t,n=e.rects,r=e.activeNodeRect,o=e.activeIndex,i=e.overIndex,a=e.index,u=null!=(t=n[o])?t:r;if(!u)return null;var l=function(e,t,n){var r=e[t],o=e[t-1],i=e[t+1];if(!r||!o&&!i)return 0;if(n<t)return o?r.left-(o.left+o.width):i.left-(r.left+r.width);return i?i.left-(r.left+r.width):r.left-(o.left+o.width)}(n,a,o);if(a===o){var c=n[i];return c?Uq({x:o<i?c.left+c.width-(u.left+u.width):c.left-u.left,y:0},$q):null}return Uq(a>o&&a<=i?{x:-u.width-l,y:0}:a<o&&a>=i?{x:u.width+l,y:0}:{x:0,y:0},$q)};var Kq=function(e){var t=e.rects,n=e.activeIndex,r=e.overIndex,o=e.index,i=Hq(t,r,n),a=t[o],u=i[o];return u&&a?{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}:null},Yq={scaleX:1,scaleY:1},Jq=function(e){var t,n=e.activeIndex,r=e.activeNodeRect,o=e.index,i=e.rects,a=e.overIndex,u=null!=(t=i[n])?t:r;if(!u)return null;if(o===n){var l=i[a];return l?Uq({x:0,y:n<a?l.top+l.height-(u.top+u.height):l.top-u.top},Yq):null}var c=function(e,t,n){var r=e[t],o=e[t-1],i=e[t+1];if(!r)return 0;if(n<t)return o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0;return i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0}(i,o,n);return Uq(o>n&&o<=a?{x:0,y:-u.height-c}:o<n&&o>=a?{x:0,y:u.height+c}:{x:0,y:0},Yq)};var Xq="Sortable",Zq=u.a.createContext({activeIndex:-1,containerId:Xq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Kq,disabled:{draggable:!1,droppable:!1}});function Qq(e){var t=e.children,n=e.id,r=e.items,o=e.strategy,i=void 0===o?Kq:o,l=e.disabled,c=void 0!==l&&l,s=xq(),d=s.active,f=s.dragOverlay,p=s.droppableRects,v=s.over,h=s.measureDroppableContainers,g=sU(Xq,n),m=Boolean(null!==f.rect),y=Object(a.useMemo)((function(){return r.map((function(e){return"object"===Ln(e)&&"id"in e?e.id:e}))}),[r]),b=null!=d,w=d?y.indexOf(d.id):-1,_=v?y.indexOf(v.id):-1,k=Object(a.useRef)(y),C=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(y,k.current),E=-1!==_&&-1===w||C,O=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(c);rU((function(){C&&b&&h(y)}),[C,y,b,h]),Object(a.useEffect)((function(){k.current=y}),[y]);var S=Object(a.useMemo)((function(){return{activeIndex:w,containerId:g,disabled:O,disableTransforms:E,items:y,overIndex:_,useDragOverlay:m,sortedRects:qq(y,p),strategy:i}}),[w,g,O.draggable,O.droppable,E,y,_,p,m,i]);return u.a.createElement(Zq.Provider,{value:S},t)}var eW=function(e){var t=e.id;return Hq(e.items,e.activeIndex,e.overIndex).indexOf(t)},tW=function(e){var t=e.containerId,n=e.isSorting,r=e.wasDragging,o=e.index,i=e.items,a=e.newIndex,u=e.previousItems,l=e.previousContainerId;return!(!e.transition||!r)&&((u===i||o!==a)&&(!!n||a!==o&&t===l))},nW={duration:200,easing:"ease"},rW="transform",oW=gU.Transition.toString({property:rW,duration:0,easing:"linear"}),iW={roleDescription:"sortable"};function aW(e){var t=e.animateLayoutChanges,n=void 0===t?tW:t,r=e.attributes,o=e.disabled,i=e.data,u=e.getNewIndex,l=void 0===u?eW:u,c=e.id,s=e.strategy,d=e.resizeObserverConfig,f=e.transition,p=void 0===f?nW:f,v=Object(a.useContext)(Zq),h=v.items,g=v.containerId,m=v.activeIndex,y=v.disabled,b=v.disableTransforms,w=v.sortedRects,_=v.overIndex,k=v.useDragOverlay,C=v.strategy,E=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(o,y),O=h.indexOf(c),S=Object(a.useMemo)((function(){return Uq({sortable:{containerId:g,index:O,items:h}},i)}),[g,i,O,h]),x=Object(a.useMemo)((function(){return h.slice(h.indexOf(c))}),[h,c]),j=function(e){var t=e.data,n=e.disabled,r=void 0!==n&&n,o=e.id,i=e.resizeObserverConfig,u=sU(jq),l=Object(a.useContext)(pq),c=l.active,s=l.dispatch,d=l.over,f=l.measureDroppableContainers,p=Object(a.useRef)({disabled:r}),v=Object(a.useRef)(!1),h=Object(a.useRef)(null),g=Object(a.useRef)(null),m=jU(jU({},Dq),i),y=m.disabled,b=m.updateMeasurementsFor,w=m.timeout,_=iU(null!=b?b:o),k=QH({callback:Object(a.useCallback)((function(){v.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout((function(){f(Array.isArray(_.current)?_.current:[_.current]),g.current=null}),w)):v.current=!0}),[w]),disabled:y||!c}),C=Tf(uU(Object(a.useCallback)((function(e,t){k&&(t&&(k.unobserve(t),v.current=!1),e&&k.observe(e))}),[k])),2),E=C[0],O=C[1],S=iU(t);return Object(a.useEffect)((function(){k&&E.current&&(k.disconnect(),v.current=!1,k.observe(E.current))}),[E,k]),rU((function(){return s({type:FU.RegisterDroppable,element:{id:o,key:u,disabled:r,node:E,rect:h,data:S}}),function(){return s({type:FU.UnregisterDroppable,key:u,id:o})}}),[o]),Object(a.useEffect)((function(){r!==p.current.disabled&&(s({type:FU.SetDroppableDisabled,id:o,key:u,disabled:r}),p.current.disabled=r)}),[o,u,r,s]),{active:c,rect:h,isOver:(null==d?void 0:d.id)===o,node:E,over:d,setNodeRef:O}}({id:c,data:S,disabled:E.droppable,resizeObserverConfig:Uq({updateMeasurementsFor:x},d)}),D=j.rect,A=j.node,R=j.isOver,F=j.setNodeRef,I=Sq({id:c,data:S,attributes:Uq(Uq({},iW),r),disabled:E.draggable}),P=I.active,M=I.activatorEvent,T=I.activeNodeRect,N=I.attributes,B=I.setNodeRef,V=I.listeners,L=I.isDragging,z=I.over,U=I.setActivatorNodeRef,H=I.transform,q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useMemo)((function(){return function(e){t.forEach((function(t){return t(e)}))}}),t)}(F,B),W=Boolean(P),$=W&&!b&&Wq(m)&&Wq(_),G=!k&&L,K=G&&$?H:null,Y=$?null!=K?K:(null!=s?s:C)({rects:w,activeNodeRect:T,activeIndex:m,overIndex:_,index:O}):null,J=Wq(m)&&Wq(_)?l({id:c,items:h,activeIndex:m,overIndex:_}):O,X=null==P?void 0:P.id,Z=Object(a.useRef)({activeId:X,items:h,newIndex:J,containerId:g}),Q=h!==Z.current.items,ee=n({active:P,containerId:g,isDragging:L,isSorting:W,id:c,index:O,items:h,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:p,wasDragging:null!=Z.current.activeId}),te=function(e){var t=e.disabled,n=e.index,r=e.node,o=e.rect,i=Tf(Object(a.useState)(null),2),u=i[0],l=i[1],c=Object(a.useRef)(n);return rU((function(){if(!t&&n!==c.current&&r.current){var e=o.current;if(e){var i=oH(r.current,{ignoreTransform:!0}),a={x:e.left-i.left,y:e.top-i.top,scaleX:e.width/i.width,scaleY:e.height/i.height};(a.x||a.y)&&l(a)}}n!==c.current&&(c.current=n)}),[t,n,r,o]),Object(a.useEffect)((function(){u&&l(null)}),[u]),u}({disabled:!ee,index:O,node:A,rect:D});return Object(a.useEffect)((function(){W&&Z.current.newIndex!==J&&(Z.current.newIndex=J),g!==Z.current.containerId&&(Z.current.containerId=g),h!==Z.current.items&&(Z.current.items=h)}),[W,J,g,h]),Object(a.useEffect)((function(){if(X!==Z.current.activeId){if(!X||Z.current.activeId){var e=setTimeout((function(){Z.current.activeId=X}),50);return function(){return clearTimeout(e)}}Z.current.activeId=X}}),[X]),{active:P,activeIndex:m,attributes:N,data:S,rect:D,index:O,newIndex:J,items:h,isOver:R,isSorting:W,isDragging:L,listeners:V,node:A,overIndex:_,over:z,setNodeRef:q,setActivatorNodeRef:U,setDroppableNodeRef:F,setDraggableNodeRef:B,transform:null!=te?te:Y,transition:function(){if(te||Q&&Z.current.newIndex===O)return oW;if(G&&!vU(M)||!p)return;if(W||ee)return gU.Transition.toString(Uq(Uq({},p),{},{property:rW}));return}()}}function uW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_H.Down,_H.Right,_H.Up,_H.Left;var cW=function(e){return lW(lW({},e.transform),{},{y:0})};function sW(e,t,n){var r=lW({},e);return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}var dW=function(e){var t=e.containerNodeRect,n=e.draggingNodeRect,r=e.transform;return n&&t?sW(r,n,t):r},fW=function(e){var t=e.draggingNodeRect,n=e.transform,r=e.scrollableAncestorRects[0];return t&&r?sW(n,t,r):n},pW=function(e){return lW(lW({},e.transform),{},{x:0})};function vW(e){var t=a.useRef();t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function hW(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var gW=hW()?a.useLayoutEffect:a.useEffect,mW=function(e,t){var n=a.useRef(!0);gW((function(){return e(n.current)}),t),gW((function(){return n.current=!1,function(){n.current=!0}}),[])},yW=function(e,t){mW((function(t){if(!t)return e()}),t)};function bW(e){var t=a.useRef(!1),n=Tf(a.useState(e),2),r=n[0],o=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}function wW(e){return void 0!==e}function _W(e,t){var n=t||{},r=n.defaultValue,o=n.value,i=n.onChange,a=n.postState,u=Tf(bW((function(){return wW(o)?o:wW(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),l=u[0],c=u[1],s=void 0!==o?o:l,d=a?a(s):s,f=vW(i),p=Tf(bW([s]),2),v=p[0],h=p[1];return yW((function(){var e=v[0];l!==e&&f(l,e)}),[v]),yW((function(){wW(o)||c(o)}),[o]),[d,vW((function(e,t){c(e,t),h([s],t)}))]}var kW,CW={exports:{}},EW={},OW=Symbol.for("react.element"),SW=Symbol.for("react.portal"),xW=Symbol.for("react.fragment"),jW=Symbol.for("react.strict_mode"),DW=Symbol.for("react.profiler"),AW=Symbol.for("react.provider"),RW=Symbol.for("react.context"),FW=Symbol.for("react.server_context"),IW=Symbol.for("react.forward_ref"),PW=Symbol.for("react.suspense"),MW=Symbol.for("react.suspense_list"),TW=Symbol.for("react.memo"),NW=Symbol.for("react.lazy"),BW=Symbol.for("react.offscreen");function VW(e){if("object"===Ln(e)&&null!==e){var t=e.$$typeof;switch(t){case OW:switch(e=e.type){case xW:case DW:case jW:case PW:case MW:return e;default:switch(e=e&&e.$$typeof){case FW:case RW:case IW:case NW:case TW:case AW:return e;default:return t}}case SW:return t}}}kW=Symbol.for("react.module.reference"),EW.ContextConsumer=RW,EW.ContextProvider=AW,EW.Element=OW,EW.ForwardRef=IW,EW.Fragment=xW,EW.Lazy=NW,EW.Memo=TW,EW.Portal=SW,EW.Profiler=DW,EW.StrictMode=jW,EW.Suspense=PW,EW.SuspenseList=MW,EW.isAsyncMode=function(){return!1},EW.isConcurrentMode=function(){return!1},EW.isContextConsumer=function(e){return VW(e)===RW},EW.isContextProvider=function(e){return VW(e)===AW},EW.isElement=function(e){return"object"===Ln(e)&&null!==e&&e.$$typeof===OW},EW.isForwardRef=function(e){return VW(e)===IW},EW.isFragment=function(e){return VW(e)===xW},EW.isLazy=function(e){return VW(e)===NW},EW.isMemo=function(e){return VW(e)===TW},EW.isPortal=function(e){return VW(e)===SW},EW.isProfiler=function(e){return VW(e)===DW},EW.isStrictMode=function(e){return VW(e)===jW},EW.isSuspense=function(e){return VW(e)===PW},EW.isSuspenseList=function(e){return VW(e)===MW},EW.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===xW||e===DW||e===jW||e===PW||e===MW||e===BW||"object"===Ln(e)&&null!==e&&(e.$$typeof===NW||e.$$typeof===TW||e.$$typeof===AW||e.$$typeof===RW||e.$$typeof===IW||e.$$typeof===kW||void 0!==e.getModuleId)},EW.typeOf=VW,CW.exports=EW;var LW=CW.exports;function zW(e,t,n){var r=a.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}var UW=function(e,t){"function"==typeof e?e(t):"object"===Ln(e)&&e&&"current"in e&&(e.current=t)},HW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){UW(t,e)}))}},qW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zW((function(){return HW.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},WW=function(e){var t,n,r=LW.isMemo(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===LW.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===LW.ForwardRef)};function $W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$W(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Number(a.version.split(".")[0]);var KW={};function YW(e,t){}function JW(e,t){}function XW(e,t,n){t||KW[n]||(e(!1,n),KW[n]=!0)}function ZW(e,t){XW(YW,e,t)}function QW(e){var t=$z();return function(){var n,r=Sd(e);if(t){var o=Sd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Od(this,n)}}function e$(){return e$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e$.apply(null,arguments)}ZW.preMessage=function(e){},ZW.resetWarned=function(){KW={}},ZW.noteOnce=function(e,t){XW(JW,e,t)};var t$={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=t$.F1&&t<=t$.F12)return!1;switch(t){case t$.ALT:case t$.CAPS_LOCK:case t$.CONTEXT_MENU:case t$.CTRL:case t$.DOWN:case t$.END:case t$.ESC:case t$.HOME:case t$.INSERT:case t$.LEFT:case t$.MAC_FF_META:case t$.META:case t$.NUMLOCK:case t$.NUM_CENTER:case t$.PAGE_DOWN:case t$.PAGE_UP:case t$.PAUSE:case t$.PRINT_SCREEN:case t$.RIGHT:case t$.SHIFT:case t$.UP:case t$.WIN_KEY:case t$.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=t$.ZERO&&e<=t$.NINE)return!0;if(e>=t$.NUM_ZERO&&e<=t$.NUM_MULTIPLY)return!0;if(e>=t$.A&&e<=t$.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case t$.SPACE:case t$.QUESTION_MARK:case t$.NUM_PLUS:case t$.NUM_MINUS:case t$.NUM_PERIOD:case t$.NUM_DIVISION:case t$.SEMICOLON:case t$.DASH:case t$.EQUALS:case t$.COMMA:case t$.PERIOD:case t$.SLASH:case t$.APOSTROPHE:case t$.SINGLE_QUOTE:case t$.OPEN_SQUARE_BRACKET:case t$.BACKSLASH:case t$.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},n$=a.createContext({}),r$={visibility:"hidden"};function o$(e){var t=e.prefixCls,n=e.prevIcon,r=void 0===n?"‹":n,o=e.nextIcon,i=void 0===o?"›":o,u=e.superPrevIcon,l=void 0===u?"«":u,c=e.superNextIcon,s=void 0===c?"»":c,d=e.onSuperPrev,f=e.onSuperNext,p=e.onPrev,v=e.onNext,h=e.children,g=a.useContext(n$),m=g.hideNextBtn,y=g.hidePrevBtn;return a.createElement("div",{className:t},d&&a.createElement("button",{type:"button",onClick:d,tabIndex:-1,className:"".concat(t,"-super-prev-btn"),style:y?r$:{}},l),p&&a.createElement("button",{type:"button",onClick:p,tabIndex:-1,className:"".concat(t,"-prev-btn"),style:y?r$:{}},r),a.createElement("div",{className:"".concat(t,"-view")},h),v&&a.createElement("button",{type:"button",onClick:v,tabIndex:-1,className:"".concat(t,"-next-btn"),style:m?r$:{}},i),f&&a.createElement("button",{type:"button",onClick:f,tabIndex:-1,className:"".concat(t,"-super-next-btn"),style:m?r$:{}},s))}function i$(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecades,i=e.onNextDecades;if(a.useContext(n$).hideHeader)return null;var u="".concat(t,"-header"),l=n.getYear(r),c=Math.floor(l/A$)*A$,s=c+A$-1;return a.createElement(o$,e$({},e,{prefixCls:u,onSuperPrev:o,onSuperNext:i}),c,"-",s)}function a$(e,t,n,r,o){var i=e.setHour(t,n);return i=e.setMinute(i,r),i=e.setSecond(i,o)}function u$(e,t,n){if(!n)return t;var r=t;return r=e.setHour(r,e.getHour(n)),r=e.setMinute(r,e.getMinute(n)),r=e.setSecond(r,e.getSecond(n))}function l$(e,t){var n=e.getYear(t),r=e.getMonth(t)+1,o=e.getEndDate(e.getFixedDate("".concat(n,"-").concat(r,"-01"))),i=e.getDate(o),a=r<10?"0".concat(r):"".concat(r);return"".concat(n,"-").concat(a,"-").concat(i)}function c$(e){for(var t=e.prefixCls,n=e.disabledDate,r=e.onSelect,o=e.picker,i=e.rowNum,u=e.colNum,l=e.prefixColumn,c=e.rowClassName,s=e.baseDate,d=e.getCellClassName,f=e.getCellText,p=e.getCellNode,v=e.getCellDate,h=e.generateConfig,g=e.titleCell,m=e.headerCells,y=a.useContext(n$),b=y.onDateMouseEnter,w=y.onDateMouseLeave,_=y.mode,k="".concat(t,"-cell"),C=[],E=0;E<i;E+=1){for(var O=[],S=void 0,x=function(){var e,t=v(s,E*u+j),i=W$({cellDate:t,mode:_,disabledDate:n,generateConfig:h});0===j&&(S=t,l&&O.push(l(S)));var c=g&&g(t);O.push(a.createElement("td",{key:j,title:c,className:I()(k,GW((e={},il(e,"".concat(k,"-disabled"),i),il(e,"".concat(k,"-start"),1===f(t)||"year"===o&&Number(c)%10==0),il(e,"".concat(k,"-end"),c===l$(h,t)||"year"===o&&Number(c)%10==9),e),d(t))),onClick:function(){i||r(t)},onMouseEnter:function(){!i&&b&&b(t)},onMouseLeave:function(){!i&&w&&w(t)}},p?p(t):a.createElement("div",{className:"".concat(k,"-inner")},f(t))))},j=0;j<u;j+=1)x();C.push(a.createElement("tr",{key:E,className:c&&c(S)},O))}return a.createElement("div",{className:"".concat(t,"-body")},a.createElement("table",{className:"".concat(t,"-content")},m&&a.createElement("thead",null,a.createElement("tr",null,m)),a.createElement("tbody",null,C)))}var s$=3,d$=4;function f$(e){var t=D$-1,n=e.prefixCls,r=e.viewDate,o=e.generateConfig,i="".concat(n,"-cell"),u=o.getYear(r),l=Math.floor(u/D$)*D$,c=Math.floor(u/A$)*A$,s=c+A$-1,d=o.setYear(r,c-Math.ceil((s$*d$*D$-A$)/2));return a.createElement(c$,e$({},e,{rowNum:d$,colNum:s$,baseDate:d,getCellText:function(e){var n=o.getYear(e);return"".concat(n,"-").concat(n+t)},getCellClassName:function(e){var n,r=o.getYear(e),a=r+t;return il(n={},"".concat(i,"-in-view"),c<=r&&a<=s),il(n,"".concat(i,"-selected"),r===l),n},getCellDate:function(e,t){return o.addYear(e,t*D$)}}))}var p$=function(e){return+setTimeout(e,16)},v$=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(p$=function(e){return window.requestAnimationFrame(e)},v$=function(e){return window.cancelAnimationFrame(e)});var h$=0,g$=new Map;function m$(e){g$.delete(e)}var y$=function(e){var t=h$+=1;return function n(r){if(0===r)m$(t),e();else{var o=p$((function(){n(r-1)}));g$.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};y$.cancel=function(e){var t=g$.get(e);return m$(e),v$(t)};const b$=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var w$=new Map;function _$(e,t,n){if(w$.get(e)&&cancelAnimationFrame(w$.get(e)),n<=0)w$.set(e,requestAnimationFrame((function(){e.scrollTop=t})));else{var r=(t-e.scrollTop)/n*10;w$.set(e,requestAnimationFrame((function(){e.scrollTop+=r,e.scrollTop!==t&&_$(e,t,n-10)})))}}function k$(e,t){var n=t.onLeftRight,r=t.onCtrlLeftRight,o=t.onUpDown,i=t.onPageUpDown,a=t.onEnter,u=e.which,l=e.ctrlKey,c=e.metaKey;switch(u){case t$.LEFT:if(l||c){if(r)return r(-1),!0}else if(n)return n(-1),!0;break;case t$.RIGHT:if(l||c){if(r)return r(1),!0}else if(n)return n(1),!0;break;case t$.UP:if(o)return o(-1),!0;break;case t$.DOWN:if(o)return o(1),!0;break;case t$.PAGE_UP:if(i)return i(-1),!0;break;case t$.PAGE_DOWN:if(i)return i(1),!0;break;case t$.ENTER:if(a)return a(),!0}return!1}function C$(e,t,n,r){var o=e;if(!o)switch(t){case"time":o=r?"hh:mm:ss a":"HH:mm:ss";break;case"week":o="gggg-wo";break;case"month":o="YYYY-MM";break;case"quarter":o="YYYY-[Q]Q";break;case"year":o="YYYY";break;default:o=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}return o}function E$(e,t,n){var r="time"===e?8:10,o="function"==typeof t?t(n.getNow()).length:t.length;return Math.max(r,o)+2}var O$=null,S$=new Set;var x$={year:function(e){return"month"===e||"date"===e?"year":e},month:function(e){return"date"===e?"month":e},quarter:function(e){return"month"===e||"date"===e?"quarter":e},week:function(e){return"date"===e?"week":e},time:null,date:null};function j$(e,t){return e.some((function(e){return e&&e.contains(t)}))}var D$=10,A$=10*D$;function R$(e){var t=e.prefixCls,n=e.onViewDateChange,r=e.generateConfig,o=e.viewDate,i=e.operationRef,u=e.onSelect,l=e.onPanelChange,c="".concat(t,"-decade-panel");i.current={onKeyDown:function(e){return k$(e,{onLeftRight:function(e){u(r.addYear(o,e*D$),"key")},onCtrlLeftRight:function(e){u(r.addYear(o,e*A$),"key")},onUpDown:function(e){u(r.addYear(o,e*D$*s$),"key")},onEnter:function(){l("year",o)}})}};var s=function(e){var t=r.addYear(o,e*A$);n(t),l(null,t)};return a.createElement("div",{className:c},a.createElement(i$,e$({},e,{prefixCls:t,onPrevDecades:function(){s(-1)},onNextDecades:function(){s(1)}})),a.createElement(f$,e$({},e,{prefixCls:t,onSelect:function(e){u(e,"mouse"),l("year",e)}})))}var F$=7;function I$(e,t){return!e&&!t||!(!e||!t)&&void 0}function P$(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)}function M$(e,t){return Math.floor(e.getMonth(t)/3)+1}function T$(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:P$(e,t,n)&&M$(e,t)===M$(e,n)}function N$(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:P$(e,t,n)&&e.getMonth(t)===e.getMonth(n)}function B$(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)&&e.getMonth(t)===e.getMonth(n)&&e.getDate(t)===e.getDate(n)}function V$(e,t,n,r){var o=I$(n,r);return"boolean"==typeof o?o:P$(e,n,r)&&e.locale.getWeek(t,n)===e.locale.getWeek(t,r)}function L$(e,t,n){return B$(e,t,n)&&function(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)}(e,t,n)}function z$(e,t,n,r){return!!(t&&n&&r)&&(!B$(e,t,r)&&!B$(e,n,r)&&e.isAfter(r,t)&&e.isAfter(n,r))}function U$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(t){case"year":return n.addYear(e,10*r);case"quarter":case"month":return n.addYear(e,r);default:return n.addMonth(e,r)}}function H$(e,t){var n=t.generateConfig,r=t.locale,o=t.format;return"function"==typeof o?o(e):n.locale.format(r.locale,e,o)}function q$(e,t){var n=t.generateConfig,r=t.locale,o=t.formatList;return e&&"function"!=typeof o[0]?n.locale.parse(r.locale,e,o):null}function W$(e){var t=e.cellDate,n=e.mode,r=e.disabledDate,o=e.generateConfig;if(!r)return!1;var i=function(e,n,i){for(var a=n;a<=i;){var u=void 0;switch(e){case"date":if(u=o.setDate(t,a),!r(u))return!1;break;case"month":if(!W$({cellDate:u=o.setMonth(t,a),mode:"month",generateConfig:o,disabledDate:r}))return!1;break;case"year":if(!W$({cellDate:u=o.setYear(t,a),mode:"year",generateConfig:o,disabledDate:r}))return!1}a+=1}return!0};switch(n){case"date":case"week":return r(t);case"month":return i("date",1,o.getDate(o.getEndDate(t)));case"quarter":var a=3*Math.floor(o.getMonth(t)/3);return i("month",a,a+2);case"year":return i("month",0,11);case"decade":var u=o.getYear(t),l=Math.floor(u/D$)*D$;return i("year",l,l+D$-1)}}function $$(e){if(a.useContext(n$).hideHeader)return null;var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i=e.format,u="".concat(t,"-header");return a.createElement(o$,{prefixCls:u},o?H$(o,{locale:r,format:i,generateConfig:n}):" ")}function G$(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(e);return r}function K$(e){return null==e?[]:Array.isArray(e)?e:[e]}function Y$(e){var t={};return Object.keys(e).forEach((function(n){"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n&&"name"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n])})),t}function J$(e,t){return e?e[t]:null}function X$(e,t,n){var r=[J$(e,0),J$(e,1)];return r[n]="function"==typeof t?t(r[n]):t,r[0]||r[1]?r:null}function Z$(e){var t=e.prefixCls,n=e.units,r=e.onSelect,o=e.value,i=e.active,u=e.hideDisabledOptions,l="".concat(t,"-cell"),c=a.useContext(n$).open,s=Object(a.useRef)(null),d=Object(a.useRef)(new Map),f=Object(a.useRef)();return Object(a.useLayoutEffect)((function(){var e=d.current.get(o);e&&!1!==c&&_$(s.current,e.offsetTop,120)}),[o]),Object(a.useLayoutEffect)((function(){if(c){var e=d.current.get(o);e&&(f.current=(t=e,n=function(){_$(s.current,e.offsetTop,0)},function e(){b$(t)?n():r=y$((function(){e()}))}(),function(){y$.cancel(r)}))}var t,n,r;return function(){var e;null===(e=f.current)||void 0===e||e.call(f)}}),[c]),a.createElement("ul",{className:I()("".concat(t,"-column"),il({},"".concat(t,"-column-active"),i)),ref:s,style:{position:"relative"}},n.map((function(e){var t;return u&&e.disabled?null:a.createElement("li",{key:e.value,ref:function(t){d.current.set(e.value,t)},className:I()(l,(t={},il(t,"".concat(l,"-disabled"),e.disabled),il(t,"".concat(l,"-selected"),o===e.value),t)),onClick:function(){e.disabled||r(e.value)}},a.createElement("div",{className:"".concat(l,"-inner")},e.label))})))}function Q$(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n+=1)if(e[n].disabled!==t[n].disabled)return!0;return!1}function eG(e,t,n,r){for(var o=[],i=n>=1?0|n:1,a=e;a<=t;a+=i)o.push({label:G$(a,2),value:a,disabled:(r||[]).includes(a)});return o}function tG(e){var t,n=e.generateConfig,r=e.prefixCls,o=e.operationRef,i=e.activeColumnIndex,u=e.value,l=e.showHour,c=e.showMinute,s=e.showSecond,d=e.use12Hours,f=e.hourStep,p=void 0===f?1:f,v=e.minuteStep,h=void 0===v?1:v,g=e.secondStep,m=void 0===g?1:g,y=e.disabledHours,b=e.disabledMinutes,w=e.disabledSeconds,_=e.disabledTime,k=e.hideDisabledOptions,C=e.onSelect,E=[],O="".concat(r,"-content"),S="".concat(r,"-time-panel"),x=u?n.getHour(u):-1,j=x,D=u?n.getMinute(u):-1,A=u?n.getSecond(u):-1,R=n.getNow(),F=Tf(a.useMemo((function(){if(_){var e=_(R);return[e.disabledHours,e.disabledMinutes,e.disabledSeconds]}return[y,b,w]}),[y,b,w,_,R]),3),I=F[0],P=F[1],M=F[2],T=eG(0,23,p,I&&I()),N=zW((function(){return T}),T,Q$);d&&(t=j>=12,j%=12);var B=Tf(a.useMemo((function(){if(!d)return[!1,!1];var e=[!0,!0];return N.forEach((function(t){var n=t.disabled,r=t.value;n||(r>=12?e[1]=!1:e[0]=!1)})),e}),[d,N]),2),V=B[0],L=B[1],z=a.useMemo((function(){return d?N.filter(t?function(e){return e.value>=12}:function(e){return e.value<12}).map((function(e){var t=e.value%12,n=0===t?"12":G$(t,2);return GW(GW({},e),{},{label:n,value:t})})):N}),[d,t,N]),U=eG(0,59,h,P&&P(x)),H=eG(0,59,m,M&&M(x,D)),q=function(e){var t=e.value,n=e.generateConfig,r=e.disabledMinutes,o=e.disabledSeconds,i=e.minutes,a=e.seconds,u=e.use12Hours;return function(e,l,c,s){var d=t||n.getNow(),f=Math.max(0,l),p=Math.max(0,c),v=Math.max(0,s),h=r&&r(f);if(null==h?void 0:h.includes(p)){var g=i.find((function(e){return!h.includes(e.value)}));if(!g)return null;p=g.value}var m=o&&o(f,p);if(null==m?void 0:m.includes(v)){var y=a.find((function(e){return!m.includes(e.value)}));if(!y)return null;v=y.value}return a$(n,d,u&&e?f+12:f,p,v)}}({value:u,generateConfig:n,disabledMinutes:P,disabledSeconds:M,minutes:U,seconds:H,use12Hours:d});function W(e,t,n,r,o){!1!==e&&E.push({node:a.cloneElement(t,{prefixCls:S,value:n,active:i===E.length,onSelect:o,units:r,hideDisabledOptions:k}),onSelect:o,value:n,units:r})}o.current={onUpDown:function(e){var t=E[i];if(t)for(var n=t.units.findIndex((function(e){return e.value===t.value})),r=t.units.length,o=1;o<r;o+=1){var a=t.units[(n+e*o+r)%r];if(!0!==a.disabled){t.onSelect(a.value);break}}}},W(l,a.createElement(Z$,{key:"hour"}),j,z,(function(e){C(q(t,e,D,A),"mouse")})),W(c,a.createElement(Z$,{key:"minute"}),D,U,(function(e){C(q(t,j,e,A),"mouse")})),W(s,a.createElement(Z$,{key:"second"}),A,H,(function(e){C(q(t,j,D,e),"mouse")}));var $=-1;return"boolean"==typeof t&&($=t?1:0),W(!0===d,a.createElement(Z$,{key:"12hours"}),$,[{label:"AM",value:0,disabled:V},{label:"PM",value:1,disabled:L}],(function(e){C(q(!!e,j,D,A),"mouse")})),a.createElement("div",{className:O},E.map((function(e){return e.node})))}var nG=function(e){return e.filter((function(e){return!1!==e})).length};function rG(e){var t=e.generateConfig,n=e.format,r=void 0===n?"HH:mm:ss":n,o=e.prefixCls,i=e.active,u=e.operationRef,l=e.showHour,c=e.showMinute,s=e.showSecond,d=e.use12Hours,f=void 0!==d&&d,p=e.onSelect,v=e.value,h="".concat(o,"-time-panel"),g=a.useRef(),m=Tf(a.useState(-1),2),y=m[0],b=m[1],w=nG([l,c,s,f]);return u.current={onKeyDown:function(e){return k$(e,{onLeftRight:function(e){b((y+e+w)%w)},onUpDown:function(e){-1===y?b(0):g.current&&g.current.onUpDown(e)},onEnter:function(){p(v||t.getNow(),"key"),b(-1)}})},onBlur:function(){b(-1)}},a.createElement("div",{className:I()(h,il({},"".concat(h,"-active"),i))},a.createElement($$,e$({},e,{format:r,prefixCls:o})),a.createElement(tG,e$({},e,{prefixCls:o,activeColumnIndex:y,operationRef:g})))}var oG=a.createContext({});function iG(e){var t=e.cellPrefixCls,n=e.generateConfig,r=e.rangedValue,o=e.hoverRangedValue,i=e.isInView,a=e.isSameCell,u=e.offsetCell,l=e.today,c=e.value;return function(e){var s,d=u(e,-1),f=u(e,1),p=J$(r,0),v=J$(r,1),h=J$(o,0),g=J$(o,1),m=z$(n,h,g,e);function y(e){return a(p,e)}function b(e){return a(v,e)}var w=a(h,e),_=a(g,e),k=(m||_)&&(!i(d)||b(d)),C=(m||w)&&(!i(f)||y(f));return il(s={},"".concat(t,"-in-view"),i(e)),il(s,"".concat(t,"-in-range"),z$(n,p,v,e)),il(s,"".concat(t,"-range-start"),y(e)),il(s,"".concat(t,"-range-end"),b(e)),il(s,"".concat(t,"-range-start-single"),y(e)&&!v),il(s,"".concat(t,"-range-end-single"),b(e)&&!p),il(s,"".concat(t,"-range-start-near-hover"),y(e)&&(a(d,h)||z$(n,h,g,d))),il(s,"".concat(t,"-range-end-near-hover"),b(e)&&(a(f,g)||z$(n,h,g,f))),il(s,"".concat(t,"-range-hover"),m),il(s,"".concat(t,"-range-hover-start"),w),il(s,"".concat(t,"-range-hover-end"),_),il(s,"".concat(t,"-range-hover-edge-start"),k),il(s,"".concat(t,"-range-hover-edge-end"),C),il(s,"".concat(t,"-range-hover-edge-start-near-range"),k&&a(d,v)),il(s,"".concat(t,"-range-hover-edge-end-near-range"),C&&a(f,p)),il(s,"".concat(t,"-today"),a(l,e)),il(s,"".concat(t,"-selected"),a(c,e)),s}}function aG(e){var t=e.prefixCls,n=e.generateConfig,r=e.prefixColumn,o=e.locale,i=e.rowCount,u=e.viewDate,l=e.value,c=e.dateRender,s=a.useContext(oG),d=s.rangedValue,f=s.hoverRangedValue,p=function(e,t,n){var r=t.locale.getWeekFirstDay(e),o=t.setDate(n,1),i=t.getWeekDay(o),a=t.addDate(o,r-i);return t.getMonth(a)===t.getMonth(n)&&t.getDate(a)>1&&(a=t.addDate(a,-7)),a}(o.locale,n,u),v="".concat(t,"-cell"),h=n.locale.getWeekFirstDay(o.locale),g=n.getNow(),m=[],y=o.shortWeekDays||(n.locale.getShortWeekDays?n.locale.getShortWeekDays(o.locale):[]);r&&m.push(a.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var b=0;b<F$;b+=1)m.push(a.createElement("th",{key:b},y[(b+h)%F$]));var w=iG({cellPrefixCls:v,today:g,value:l,generateConfig:n,rangedValue:r?null:d,hoverRangedValue:r?null:f,isSameCell:function(e,t){return B$(n,e,t)},isInView:function(e){return N$(n,e,u)},offsetCell:function(e,t){return n.addDate(e,t)}}),_=c?function(e){return c(e,g)}:void 0;return a.createElement(c$,e$({},e,{rowNum:i,colNum:F$,baseDate:p,getCellNode:_,getCellText:n.getDate,getCellClassName:w,getCellDate:n.addDate,titleCell:function(e){return H$(e,{locale:o,format:"YYYY-MM-DD",generateConfig:n})},headerCells:m}))}function uG(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextMonth,u=e.onPrevMonth,l=e.onNextYear,c=e.onPrevYear,s=e.onYearClick,d=e.onMonthClick;if(a.useContext(n$).hideHeader)return null;var f="".concat(t,"-header"),p=r.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(r.locale):[]),v=n.getMonth(o),h=a.createElement("button",{type:"button",key:"year",onClick:s,tabIndex:-1,className:"".concat(t,"-year-btn")},H$(o,{locale:r,format:r.yearFormat,generateConfig:n})),g=a.createElement("button",{type:"button",key:"month",onClick:d,tabIndex:-1,className:"".concat(t,"-month-btn")},r.monthFormat?H$(o,{locale:r,format:r.monthFormat,generateConfig:n}):p[v]),m=r.monthBeforeYear?[g,h]:[h,g];return a.createElement(o$,e$({},e,{prefixCls:f,onSuperPrev:c,onPrev:u,onNext:i,onSuperNext:l}),m)}var lG=6;function cG(e){var t=e.prefixCls,n=e.panelName,r=void 0===n?"date":n,o=e.keyboardConfig,i=e.active,u=e.operationRef,l=e.generateConfig,c=e.value,s=e.viewDate,d=e.onViewDateChange,f=e.onPanelChange,p=e.onSelect,v="".concat(t,"-").concat(r,"-panel");u.current={onKeyDown:function(e){return k$(e,GW({onLeftRight:function(e){p(l.addDate(c||s,e),"key")},onCtrlLeftRight:function(e){p(l.addYear(c||s,e),"key")},onUpDown:function(e){p(l.addDate(c||s,e*F$),"key")},onPageUpDown:function(e){p(l.addMonth(c||s,e),"key")}},o))}};var h=function(e){var t=l.addYear(s,e);d(t),f(null,t)},g=function(e){var t=l.addMonth(s,e);d(t),f(null,t)};return a.createElement("div",{className:I()(v,il({},"".concat(v,"-active"),i))},a.createElement(uG,e$({},e,{prefixCls:t,value:c,viewDate:s,onPrevYear:function(){h(-1)},onNextYear:function(){h(1)},onPrevMonth:function(){g(-1)},onNextMonth:function(){g(1)},onMonthClick:function(){f("month",s)},onYearClick:function(){f("year",s)}})),a.createElement(aG,e$({},e,{onSelect:function(e){return p(e,"mouse")},prefixCls:t,value:c,viewDate:s,rowCount:lG})))}var sG=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}("date","time");function dG(e){var t=e.prefixCls,n=e.operationRef,r=e.generateConfig,o=e.value,i=e.defaultValue,u=e.disabledTime,l=e.showTime,c=e.onSelect,s="".concat(t,"-datetime-panel"),d=Tf(a.useState(null),2),f=d[0],p=d[1],v=a.useRef({}),h=a.useRef({}),g="object"===Ln(l)?GW({},l):{};var m=function(e){h.current.onBlur&&h.current.onBlur(e),p(null)};n.current={onKeyDown:function(e){if(e.which===t$.TAB){var t=(n=e.shiftKey?-1:1,r=sG.indexOf(f)+n,sG[r]||null);return p(t),t&&e.preventDefault(),!0}var n,r;if(f){var o="date"===f?v:h;return o.current&&o.current.onKeyDown&&o.current.onKeyDown(e),!0}return!![t$.LEFT,t$.RIGHT,t$.UP,t$.DOWN].includes(e.which)&&(p("date"),!0)},onBlur:m,onClose:m};var y=function(e,t){var n=e;"date"===t&&!o&&g.defaultValue?(n=r.setHour(n,r.getHour(g.defaultValue)),n=r.setMinute(n,r.getMinute(g.defaultValue)),n=r.setSecond(n,r.getSecond(g.defaultValue))):"time"===t&&!o&&i&&(n=r.setYear(n,r.getYear(i)),n=r.setMonth(n,r.getMonth(i)),n=r.setDate(n,r.getDate(i))),c&&c(n,"mouse")},b=u?u(o||null):{};return a.createElement("div",{className:I()(s,il({},"".concat(s,"-active"),f))},a.createElement(cG,e$({},e,{operationRef:v,active:"date"===f,onSelect:function(e){y(u$(r,e,o||"object"!==Ln(l)?null:l.defaultValue),"date")}})),a.createElement(rG,e$({},e,{format:void 0},g,b,{disabledTime:null,defaultValue:void 0,operationRef:h,active:"time"===f,onSelect:function(e){y(e,"time")}})))}function fG(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i="".concat(t,"-cell"),u="".concat(t,"-week-panel-row");return a.createElement(cG,e$({},e,{panelName:"week",prefixColumn:function(e){return a.createElement("td",{key:"week",className:I()(i,"".concat(i,"-week"))},n.locale.getWeek(r.locale,e))},rowClassName:function(e){return I()(u,il({},"".concat(u,"-selected"),V$(n,r.locale,o,e)))},keyboardConfig:{onLeftRight:null}}))}function pG(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,u=e.onPrevYear,l=e.onYearClick;if(a.useContext(n$).hideHeader)return null;var c="".concat(t,"-header");return a.createElement(o$,e$({},e,{prefixCls:c,onSuperPrev:u,onSuperNext:i}),a.createElement("button",{type:"button",onClick:l,className:"".concat(t,"-year-btn")},H$(o,{locale:r,format:r.yearFormat,generateConfig:n})))}var vG=3,hG=4;function gG(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,u=e.monthCellRender,l=a.useContext(oG),c=l.rangedValue,s=l.hoverRangedValue,d=iG({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:c,hoverRangedValue:s,isSameCell:function(e,t){return N$(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,t)}}),f=n.shortMonths||(i.locale.getShortMonths?i.locale.getShortMonths(n.locale):[]),p=i.setMonth(o,0),v=u?function(e){return u(e,n)}:void 0;return a.createElement(c$,e$({},e,{rowNum:hG,colNum:vG,baseDate:p,getCellNode:v,getCellText:function(e){return n.monthFormat?H$(e,{locale:n,format:n.monthFormat,generateConfig:i}):f[i.getMonth(e)]},getCellClassName:d,getCellDate:i.addMonth,titleCell:function(e){return H$(e,{locale:n,format:"YYYY-MM",generateConfig:i})}}))}function mG(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,u=e.viewDate,l=e.onPanelChange,c=e.onSelect,s="".concat(t,"-month-panel");n.current={onKeyDown:function(e){return k$(e,{onLeftRight:function(e){c(o.addMonth(i||u,e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||u,e),"key")},onUpDown:function(e){c(o.addMonth(i||u,e*vG),"key")},onEnter:function(){l("date",i||u)}})}};var d=function(e){var t=o.addYear(u,e);r(t),l(null,t)};return a.createElement("div",{className:s},a.createElement(pG,e$({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){l("year",u)}})),a.createElement(gG,e$({},e,{prefixCls:t,onSelect:function(e){c(e,"mouse"),l("date",e)}})))}function yG(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,u=e.onPrevYear,l=e.onYearClick;if(a.useContext(n$).hideHeader)return null;var c="".concat(t,"-header");return a.createElement(o$,e$({},e,{prefixCls:c,onSuperPrev:u,onSuperNext:i}),a.createElement("button",{type:"button",onClick:l,className:"".concat(t,"-year-btn")},H$(o,{locale:r,format:r.yearFormat,generateConfig:n})))}var bG=4,wG=1;function _G(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,u=a.useContext(oG),l=u.rangedValue,c=u.hoverRangedValue,s=iG({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:l,hoverRangedValue:c,isSameCell:function(e,t){return T$(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,3*t)}}),d=i.setDate(i.setMonth(o,0),1);return a.createElement(c$,e$({},e,{rowNum:wG,colNum:bG,baseDate:d,getCellText:function(e){return H$(e,{locale:n,format:n.quarterFormat||"[Q]Q",generateConfig:i})},getCellClassName:s,getCellDate:function(e,t){return i.addMonth(e,3*t)},titleCell:function(e){return H$(e,{locale:n,format:"YYYY-[Q]Q",generateConfig:i})}}))}function kG(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,u=e.viewDate,l=e.onPanelChange,c=e.onSelect,s="".concat(t,"-quarter-panel");n.current={onKeyDown:function(e){return k$(e,{onLeftRight:function(e){c(o.addMonth(i||u,3*e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||u,e),"key")},onUpDown:function(e){c(o.addYear(i||u,e),"key")}})}};var d=function(e){var t=o.addYear(u,e);r(t),l(null,t)};return a.createElement("div",{className:s},a.createElement(yG,e$({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){l("year",u)}})),a.createElement(_G,e$({},e,{prefixCls:t,onSelect:function(e){c(e,"mouse")}})))}function CG(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecade,i=e.onNextDecade,u=e.onDecadeClick;if(a.useContext(n$).hideHeader)return null;var l="".concat(t,"-header"),c=n.getYear(r),s=Math.floor(c/xG)*xG,d=s+xG-1;return a.createElement(o$,e$({},e,{prefixCls:l,onSuperPrev:o,onSuperNext:i}),a.createElement("button",{type:"button",onClick:u,className:"".concat(t,"-decade-btn")},s,"-",d))}var EG=3,OG=4;function SG(e){var t=e.prefixCls,n=e.value,r=e.viewDate,o=e.locale,i=e.generateConfig,u=a.useContext(oG),l=u.rangedValue,c=u.hoverRangedValue,s="".concat(t,"-cell"),d=i.getYear(r),f=Math.floor(d/xG)*xG,p=f+xG-1,v=i.setYear(r,f-Math.ceil((EG*OG-xG)/2)),h=iG({cellPrefixCls:s,value:n,generateConfig:i,rangedValue:l,hoverRangedValue:c,isSameCell:function(e,t){return P$(i,e,t)},isInView:function(e){var t=i.getYear(e);return f<=t&&t<=p},offsetCell:function(e,t){return i.addYear(e,t)}});return a.createElement(c$,e$({},e,{rowNum:OG,colNum:EG,baseDate:v,getCellText:i.getYear,getCellClassName:h,getCellDate:i.addYear,titleCell:function(e){return H$(e,{locale:o,format:"YYYY",generateConfig:i})}}))}var xG=10;function jG(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,u=e.viewDate,l=e.sourceMode,c=e.onSelect,s=e.onPanelChange,d="".concat(t,"-year-panel");n.current={onKeyDown:function(e){return k$(e,{onLeftRight:function(e){c(o.addYear(i||u,e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||u,e*xG),"key")},onUpDown:function(e){c(o.addYear(i||u,e*EG),"key")},onEnter:function(){s("date"===l?"date":"month",i||u)}})}};var f=function(e){var t=o.addYear(u,10*e);r(t),s(null,t)};return a.createElement("div",{className:d},a.createElement(CG,e$({},e,{prefixCls:t,onPrevDecade:function(){f(-1)},onNextDecade:function(){f(1)},onDecadeClick:function(){s("decade",u)}})),a.createElement(SG,e$({},e,{prefixCls:t,onSelect:function(e){s("date"===l?"date":"month",e),c(e,"mouse")}})))}function DG(e,t,n){return n?a.createElement("div",{className:"".concat(e,"-footer-extra")},n(t)):null}function AG(e){var t,n,r=e.prefixCls,o=e.rangeList,i=void 0===o?[]:o,u=e.components,l=void 0===u?{}:u,c=e.needConfirmButton,s=e.onNow,d=e.onOk,f=e.okDisabled,p=e.showNow,v=e.locale;if(i.length){var h=l.rangeItem||"span";t=a.createElement(a.Fragment,null,i.map((function(e){var t=e.label,n=e.onClick,o=e.onMouseEnter,i=e.onMouseLeave;return a.createElement("li",{key:t,className:"".concat(r,"-preset")},a.createElement(h,{onClick:n,onMouseEnter:o,onMouseLeave:i},t))})))}if(c){var g=l.button||"button";s&&!t&&!1!==p&&(t=a.createElement("li",{className:"".concat(r,"-now")},a.createElement("a",{className:"".concat(r,"-now-btn"),onClick:s},v.now))),n=c&&a.createElement("li",{className:"".concat(r,"-ok")},a.createElement(g,{disabled:f,onClick:d},v.ok))}return t||n?a.createElement("ul",{className:"".concat(r,"-ranges")},t,n):null}var RG=["date","month"];function FG(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.className,i=e.style,u=e.locale,l=e.generateConfig,c=e.value,s=e.defaultValue,d=e.pickerValue,f=e.defaultPickerValue,p=e.disabledDate,v=e.mode,h=e.picker,g=void 0===h?"date":h,m=e.tabIndex,y=void 0===m?0:m,b=e.showNow,w=e.showTime,_=e.showToday,k=e.renderExtraFooter,C=e.hideHeader,E=e.onSelect,O=e.onChange,S=e.onPanelChange,x=e.onMouseDown,j=e.onPickerValueChange,D=e.onOk,A=e.components,R=e.direction,F=e.hourStep,P=void 0===F?1:F,M=e.minuteStep,T=void 0===M?1:M,N=e.secondStep,B=void 0===N?1:N,V="date"===g&&!!w||"time"===g,L=24%P==0,z=60%T==0,U=60%B==0,H=a.useContext(n$),q=H.operationRef,W=H.panelRef,$=H.onSelect,G=H.hideRanges,K=H.defaultOpenValue,Y=a.useContext(oG),J=Y.inRange,X=Y.panelPosition,Z=Y.rangedValue,Q=Y.hoverRangedValue,ee=a.useRef({}),te=a.useRef(!0),ne=Tf(_W(null,{value:c,defaultValue:s,postState:function(e){return!e&&K&&"time"===g?K:e}}),2),re=ne[0],oe=ne[1],ie=Tf(_W(null,{value:d,defaultValue:f||re,postState:function(e){var t=l.getNow();if(!e)return t;if(!re&&w){var n="object"===Ln(w)?w.defaultValue:s;return u$(l,Array.isArray(e)?e[0]:e,n||t)}return Array.isArray(e)?e[0]:e}}),2),ae=ie[0],ue=ie[1],le=function(e){ue(e),j&&j(e)},ce=function(e){var t=x$[g];return t?t(e):e},se=Tf(_W((function(){return"time"===g?"time":ce("date")}),{value:v}),2),de=se[0],fe=se[1];a.useEffect((function(){fe(g)}),[g]);var pe,ve=Tf(a.useState((function(){return de})),2),he=ve[0],ge=ve[1],me=function(e,t){(de===g||arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(oe(e),E&&E(e),$&&$(e,t),!O||L$(l,e,re)||(null==p?void 0:p(e))||O(e))},ye=function(e){if(ee.current&&ee.current.onKeyDown){var t=!0,n=e.which;if([t$.LEFT,t$.RIGHT,t$.UP,t$.DOWN,t$.PAGE_UP,t$.PAGE_DOWN,t$.ENTER].includes(n)&&(e.preventDefault(),n!==t$.ENTER&&0===y&&(t=function(e){if(RG.includes(de)){var t,n,r="date"===de;switch(n=e===t$.PAGE_UP||e===t$.PAGE_DOWN?r?l.addMonth:l.addYear:r?l.addDate:l.addMonth,e){case t$.LEFT:case t$.PAGE_UP:t=n(ae,-1);break;case t$.RIGHT:case t$.PAGE_DOWN:t=n(ae,1);break;case t$.UP:case t$.DOWN:t=n(ae,Number("".concat(e===t$.UP?"-":"").concat(r?F$:vG)))}if(t)return!(null==p?void 0:p(t))}return!0}(n))),t)return ee.current.onKeyDown(e)}return ZW(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1};q&&"right"!==X&&(q.current={onKeyDown:ye,onClose:function(){ee.current&&ee.current.onClose&&ee.current.onClose()}}),a.useEffect((function(){c&&!te.current&&ue(c)}),[c]),a.useEffect((function(){te.current=!1}),[]);var be,we,_e=GW(GW({},e),{},{operationRef:ee,prefixCls:r,viewDate:ae,value:re,onViewDateChange:le,sourceMode:he,onPanelChange:function(e,t){var n=ce(e||de);ge(de),fe(n),S&&(de!==n||L$(l,ae,ae))&&S(t,n)},disabledDate:p});switch(delete _e.onChange,delete _e.onSelect,de){case"decade":pe=a.createElement(R$,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}));break;case"year":pe=a.createElement(jG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}));break;case"month":pe=a.createElement(mG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}));break;case"quarter":pe=a.createElement(kG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}));break;case"week":pe=a.createElement(fG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}));break;case"time":delete _e.showTime,pe=a.createElement(rG,e$({},_e,"object"===Ln(w)?w:null,{onSelect:function(e,t){le(e),me(e,t)}}));break;default:pe=w?a.createElement(dG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}})):a.createElement(cG,e$({},_e,{onSelect:function(e,t){le(e),me(e,t)}}))}var ke;if(G||(be=DG(r,de,k),we=AG({prefixCls:r,components:A,needConfirmButton:V,okDisabled:!re||p&&p(re),locale:u,showNow:b,onNow:V&&function(){var e=l.getNow(),t=function(e,t,n,r,o,i){var a=Math.floor(e/r)*r;if(a<e)return[a,60-o,60-i];var u=Math.floor(t/o)*o;return u<t?[a,u,60-i]:[a,u,Math.floor(n/i)*i]}(l.getHour(e),l.getMinute(e),l.getSecond(e),L?P:1,z?T:1,U?B:1),n=a$(l,e,t[0],t[1],t[2]);me(n,"submit")},onOk:function(){re&&(me(re,"submit",!0),D&&D(re))}})),_&&"date"===de&&"date"===g&&!w){var Ce=l.getNow(),Ee="".concat(r,"-today-btn"),Oe=p&&p(Ce);ke=a.createElement("a",{className:I()(Ee,Oe&&"".concat(Ee,"-disabled")),"aria-disabled":Oe,onClick:function(){Oe||me(Ce,"mouse",!0)}},u.today)}return a.createElement(n$.Provider,{value:GW(GW({},H),{},{mode:de,hideHeader:"hideHeader"in e?C:H.hideHeader,hidePrevBtn:J&&"right"===X,hideNextBtn:J&&"left"===X})},a.createElement("div",{tabIndex:y,className:I()("".concat(r,"-panel"),o,(t={},il(t,"".concat(r,"-panel-has-range"),Z&&Z[0]&&Z[1]),il(t,"".concat(r,"-panel-has-range-hover"),Q&&Q[0]&&Q[1]),il(t,"".concat(r,"-panel-rtl"),"rtl"===R),t)),style:i,onKeyDown:ye,onBlur:function(e){ee.current&&ee.current.onBlur&&ee.current.onBlur(e)},onMouseDown:x,ref:W},pe,be||we||ke?a.createElement("div",{className:"".concat(r,"-footer")},be,we,ke):null))}function IG(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function PG(e){return e instanceof HTMLElement||e instanceof SVGElement}function MG(e){var t,n=function(e){return e&&"object"===Ln(e)&&PG(e.nativeElement)?e.nativeElement:PG(e)?e:null}(e);return n||(e instanceof u.a.Component?null===(t=c.a.findDOMNode)||void 0===t?void 0:t.call(c.a,e):null)}function TG(e,t,n,r){var o=c.a.unstable_batchedUpdates?function(e){c.a.unstable_batchedUpdates(n,e)}:n;return null!=e&&e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(t,o,r)}}}var NG=Object(a.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,o=e.children,i=Object(a.useRef)(),u=Object(a.useRef)();Object(a.useImperativeHandle)(t,(function(){return{}}));var l=Object(a.useRef)(!1);return!l.current&&hW()&&(u.current=r(),i.current=u.current.parentNode,l.current=!0),Object(a.useEffect)((function(){null==n||n(e)})),Object(a.useEffect)((function(){return null===u.current.parentNode&&null!==i.current&&i.current.appendChild(u.current),function(){var e;null===(e=u.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(u.current)}}),[]),u.current?c.a.createPortal(o,u.current):null}));function BG(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}const VG=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};var LG=a.createContext({}),zG=function(e){jd(n,e);var t=QW(n);function n(){return sl(this,n),t.apply(this,arguments)}return ll(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component);var UG="none",HG="appear",qG="enter",WG="leave",$G="none",GG="prepare",KG="start",YG="active",JG="end",XG="prepared";function ZG(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var QG,eK,tK,nK=(QG=hW(),eK="undefined"!=typeof window?window:{},tK={animationend:ZG("Animation","AnimationEnd"),transitionend:ZG("Transition","TransitionEnd")},QG&&("AnimationEvent"in eK||delete tK.animationend.animation,"TransitionEvent"in eK||delete tK.transitionend.transition),tK),rK={};if(hW()){var oK=document.createElement("div");rK=oK.style}var iK={};function aK(e){if(iK[e])return iK[e];var t=nK[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in rK)return iK[e]=t[i],iK[e]}return""}var uK=aK("animationend"),lK=aK("transitionend"),cK=!(!uK||!lK),sK=uK||"animationend",dK=lK||"transitionend";function fK(e,t){return e?"object"===Ln(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const pK=function(e){var t=Object(a.useRef)();function n(t){t&&(t.removeEventListener(dK,e),t.removeEventListener(sK,e))}return a.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(dK,e),r.addEventListener(sK,e),t.current=r)},n]};var vK=hW()?a.useLayoutEffect:a.useEffect;var hK=[GG,KG,YG,JG],gK=[GG,XG],mK=!1,yK=!0;function bK(e){return e===YG||e===JG}const wK=function(e,t,n){var r=Tf(bW($G),2),o=r[0],i=r[1],u=function(){var e=a.useRef(null);function t(){y$.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=y$((function(){o<=1?r({isCanceled:function(){return i!==e.current}}):n(r,o-1)}));e.current=i},t]}(),l=Tf(u,2),c=l[0],s=l[1];var d=t?gK:hK;return vK((function(){if(o!==$G&&o!==JG){var e=d.indexOf(o),t=d[e+1],r=n(o);r===mK?i(t,!0):t&&c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),a.useEffect((function(){return function(){s()}}),[]),[function(){i(GG,!0)},o]};function _K(e,t,n,r){var o,i,u,l=r.motionEnter,c=void 0===l||l,s=r.motionAppear,d=void 0===s||s,f=r.motionLeave,p=void 0===f||f,v=r.motionDeadline,h=r.motionLeaveImmediately,g=r.onAppearPrepare,m=r.onEnterPrepare,y=r.onLeavePrepare,b=r.onAppearStart,w=r.onEnterStart,_=r.onLeaveStart,k=r.onAppearActive,C=r.onEnterActive,E=r.onLeaveActive,O=r.onAppearEnd,S=r.onEnterEnd,x=r.onLeaveEnd,j=r.onVisibleChanged,D=Tf(bW(),2),A=D[0],R=D[1],F=(o=UG,i=Tf(a.useReducer((function(e){return e+1}),0),2)[1],u=a.useRef(o),[vW((function(){return u.current})),vW((function(e){u.current="function"==typeof e?e(u.current):e,i()}))]),I=Tf(F,2),P=I[0],M=I[1],T=Tf(bW(null),2),N=T[0],B=T[1],V=P(),L=Object(a.useRef)(!1),z=Object(a.useRef)(null);function U(){return n()}var H=Object(a.useRef)(!1);function q(){M(UG),B(null,!0)}var W=vW((function(e){var t=P();if(t!==UG){var n=U();if(!e||e.deadline||e.target===n){var r,o=H.current;t===HG&&o?r=null==O?void 0:O(n,e):t===qG&&o?r=null==S?void 0:S(n,e):t===WG&&o&&(r=null==x?void 0:x(n,e)),o&&!1!==r&&q()}}})),$=Tf(pK(W),1)[0],G=function(e){switch(e){case HG:return il(il(il({},GG,g),KG,b),YG,k);case qG:return il(il(il({},GG,m),KG,w),YG,C);case WG:return il(il(il({},GG,y),KG,_),YG,E);default:return{}}},K=a.useMemo((function(){return G(V)}),[V]),Y=Tf(wK(V,!e,(function(e){if(e===GG){var t=K[GG];return t?t(U()):mK}var n;X in K&&B((null===(n=K[X])||void 0===n?void 0:n.call(K,U(),null))||null);return X===YG&&V!==UG&&($(U()),v>0&&(clearTimeout(z.current),z.current=setTimeout((function(){W({deadline:!0})}),v))),X===XG&&q(),yK})),2),J=Y[0],X=Y[1],Z=bK(X);H.current=Z,vK((function(){R(t);var n,r=L.current;L.current=!0,!r&&t&&d&&(n=HG),r&&t&&c&&(n=qG),(r&&!t&&p||!r&&h&&!t&&p)&&(n=WG);var o=G(n);n&&(e||o[GG])?(M(n),J()):M(UG)}),[t]),Object(a.useEffect)((function(){(V===HG&&!d||V===qG&&!c||V===WG&&!p)&&M(UG)}),[d,c,p]),Object(a.useEffect)((function(){return function(){L.current=!1,clearTimeout(z.current)}}),[]);var Q=a.useRef(!1);Object(a.useEffect)((function(){A&&(Q.current=!0),void 0!==A&&V===UG&&((Q.current||A)&&(null==j||j(A)),Q.current=!0)}),[A,V]);var ee=N;return K[GG]&&X===KG&&(ee=GW({transition:"none"},ee)),[V,X,ee,null!=A?A:t]}const kK=function(e){var t=e;"object"===Ln(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,i=e.removeOnLeave,u=void 0===i||i,l=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,p=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(LG).motion),v=Object(a.useRef)(),h=Object(a.useRef)();var g=Tf(_K(p,o,(function(){try{return v.current instanceof HTMLElement?v.current:MG(h.current)}catch(e){return null}}),e),4),m=g[0],y=g[1],b=g[2],w=g[3],_=a.useRef(w);w&&(_.current=!0);var k,C=a.useCallback((function(e){v.current=e,UW(n,e)}),[n]),E=GW(GW({},f),{},{visible:o});if(c)if(m===UG)k=w?c(GW({},E),C):!u&&_.current&&d?c(GW(GW({},E),{},{className:d}),C):l||!u&&!d?c(GW(GW({},E),{},{style:{display:"none"}}),C):null;else{var O;y===GG?O="prepare":bK(y)?O="active":y===KG&&(O="start");var S=fK(s,"".concat(m,"-").concat(O));k=c(GW(GW({},E),{},{className:I()(fK(s,m),il(il({},S,S&&O),s,"string"==typeof s)),style:b}),C)}else k=null;a.isValidElement(k)&&WW(k)&&(k.ref||(k=a.cloneElement(k,{ref:C})));return a.createElement(zG,{ref:h},k)}));return n.displayName="CSSMotion",n}(cK);var CK="add",EK="keep",OK="remove",SK="removed";function xK(e){var t;return GW(GW({},t=e&&"object"===Ln(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function jK(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(xK)}var DK,AK=["component","children","onVisibleChanged","onAllRemoved"],RK=["status"],FK=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function IK(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function PK(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,o=e.mask,i=e.maskMotion,u=e.maskAnimation,l=e.maskTransitionName;if(!o)return null;var c={};return(i||l||u)&&(c=GW({motionAppear:!0},IK({motion:i,prefixCls:t,transitionName:l,animation:u}))),a.createElement(kK,e$({},c,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:I()("".concat(t,"-mask"),n)})}))}function MK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MK(Object(n),!0).forEach((function(t){BK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NK(e){return(NK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kK,n=function(e){jd(r,e);var n=QW(r);function r(){var e;sl(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return il(Ed(e=n.call.apply(n,[this].concat(o))),"state",{keyEntities:[]}),il(Ed(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:GW(GW({},e),{},{status:SK})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==SK})).length})),e}return ll(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,i=r.children,u=r.onVisibleChanged,l=r.onAllRemoved,c=qz(r,AK),s=o||a.Fragment,d={};return FK.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,a.createElement(s,c,n.map((function(n,r){var o=n.status,c=qz(n,RK),s=o===CK||o===EK;return a.createElement(t,e$({},d,{key:c.key,visible:s,eventProps:c,onVisibleChanged:function(t){(null==u||u(t,{key:c.key}),t)||0===e.removeKey(c.key)&&l&&l()}}),(function(e,t){return i(GW(GW({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=jK(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,i=jK(e),a=jK(t);i.forEach((function(e){for(var t=!1,i=r;i<o;i+=1){var u=a[i];if(u.key===e.key){r<i&&(n=n.concat(a.slice(r,i).map((function(e){return GW(GW({},e),{},{status:CK})}))),r=i),n.push(GW(GW({},u),{},{status:EK})),r+=1,t=!0;break}}t||n.push(GW(GW({},e),{},{status:OK}))})),r<o&&(n=n.concat(a.slice(r).map((function(e){return GW(GW({},e),{},{status:CK})}))));var u={};return n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==OK}))).forEach((function(t){t.key===e&&(t.status=EK)}))})),n}(r,o);return{keyEntities:i.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==SK||e.status!==OK}))}}}]),r}(a.Component);il(n,"defaultProps",{component:"div"})}(cK);var VK={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function LK(){if(void 0!==DK)return DK;DK="";var e=document.createElement("p").style;for(var t in VK)t+"Transform"in e&&(DK=t);return DK}function zK(){return LK()?"".concat(LK(),"TransitionProperty"):"transitionProperty"}function UK(){return LK()?"".concat(LK(),"Transform"):"transform"}function HK(e,t){var n=zK();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function qK(e,t){var n=UK();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var WK,$K=/matrix\((.*)\)/,GK=/matrix3d\((.*)\)/;function KK(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function YK(e,t,n){var r=n;if("object"!==NK(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):WK(e,t);for(var o in t)t.hasOwnProperty(o)&&YK(e,o,t[o])}function JK(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function XK(e){return JK(e)}function ZK(e){return JK(e,!0)}function QK(e){var t=function(e){var t,n,r,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||i.clientLeft||0,top:r-=a.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=XK(r),t.top+=ZK(r),t}function eY(e){return null!=e&&e==e.window}function tY(e){return eY(e)?e.document:9===e.nodeType?e:e.ownerDocument}var nY=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),rY=/^(top|right|bottom|left)$/,oY="currentStyle",iY="runtimeStyle",aY="left";function uY(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function lY(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function cY(e,t,n){"static"===YK(e,"position")&&(e.style.position="relative");var r=-999,o=-999,i=uY("left",n),a=uY("top",n),u=lY(i),l=lY(a);"left"!==i&&(r=999),"top"!==a&&(o=999);var c,s="",d=QK(e);("left"in t||"top"in t)&&(s=(c=e).style.transitionProperty||c.style[zK()]||"",HK(e,"none")),"left"in t&&(e.style[u]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[a]="".concat(o,"px")),KK(e);var f=QK(e),p={};for(var v in t)if(t.hasOwnProperty(v)){var h=uY(v,n),g="left"===v?r:o,m=d[v]-f[v];p[h]=h===v?g+m:g-m}YK(e,p),KK(e),("left"in t||"top"in t)&&HK(e,s);var y={};for(var b in t)if(t.hasOwnProperty(b)){var w=uY(b,n),_=t[b]-d[b];y[w]=b===w?p[w]+_:p[w]-_}YK(e,y)}function sY(e,t){var n=QK(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(UK());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(UK());if(r&&"none"!==r){var o,i=r.match($K);i?((o=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,qK(e,"matrix(".concat(o.join(","),")"))):((o=r.match(GK)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,qK(e,"matrix3d(".concat(o.join(","),")")))}else qK(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function dY(e,t){for(var n=0;n<e.length;n++)t(e[n])}function fY(e){return"border-box"===WK(e,"boxSizing")}"undefined"!=typeof window&&(WK=window.getComputedStyle?function(e,t,n){var r=n,o="",i=tY(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e[oY]&&e[oY][t];if(nY.test(n)&&!rY.test(t)){var r=e.style,o=r[aY],i=e[iY][aY];e[iY][aY]=e[oY][aY],r[aY]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[aY]=o,e[iY][aY]=i}return""===n?"auto":n});var pY=["margin","border","padding"],vY=-1,hY=2,gY=1;function mY(e,t,n){var r,o,i,a=0;for(o=0;o<t.length;o++)if(r=t[o])for(i=0;i<n.length;i++){var u=void 0;u="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],a+=parseFloat(WK(e,u))||0}return a}var yY={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function bY(e,t,n){var r=n;if(eY(e))return"width"===t?yY.viewportWidth(e):yY.viewportHeight(e);if(9===e.nodeType)return"width"===t?yY.docWidth(e):yY.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=fY(e),u=0;(null==i||i<=0)&&(i=void 0,(null==(u=WK(e,t))||Number(u)<0)&&(u=e.style[t]||0),u=Math.floor(parseFloat(u))||0),void 0===r&&(r=a?gY:vY);var l=void 0!==i||a,c=i||u;return r===vY?l?c-mY(e,["border","padding"],o):u:l?r===gY?c:c+(r===hY?-mY(e,["border"],o):mY(e,["margin"],o)):u+mY(e,pY.slice(r),o)}dY(["Width","Height"],(function(e){yY["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],yY["viewport".concat(e)](n))},yY["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||o&&o[n]||i}}));var wY={position:"absolute",visibility:"hidden",display:"block"};function _Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=bY.apply(void 0,t):function(e,t,n){var r,o={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=o[r])}(o,wY,(function(){r=bY.apply(void 0,t)})),r}function kY(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}dY(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);yY["outer".concat(t)]=function(t,n){return t&&_Y(t,e,n?0:gY)};var n="width"===e?["Left","Right"]:["Top","Bottom"];yY[e]=function(t,r){var o=r;return void 0!==o?t?(fY(t)&&(o+=mY(t,["padding","border"],n)),YK(t,e,o)):void 0:t&&_Y(t,e,vY)}}));var CY={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:tY,offset:function(e,t,n){if(void 0===t)return QK(e);!function(e,t,n){if(n.ignoreShake){var r=QK(e),o=r.left.toFixed(0),i=r.top.toFixed(0),a=t.left.toFixed(0),u=t.top.toFixed(0);if(o===a&&i===u)return}n.useCssRight||n.useCssBottom?cY(e,t,n):n.useCssTransform&&UK()in document.body.style?sY(e,t):cY(e,t,n)}(e,t,n||{})},isWindow:eY,each:dY,css:YK,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:kY,getWindowScrollLeft:function(e){return XK(e)},getWindowScrollTop:function(e){return ZK(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)CY.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};kY(CY,yY);var EY=CY.getParent;function OY(e){if(CY.isWindow(e)||9===e.nodeType)return null;var t,n=CY.getDocument(e).body,r=CY.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:EY(e);for(t=EY(e);t&&t!==n&&9!==t.nodeType;t=EY(t))if("static"!==(r=CY.css(t,"position")))return t;return null}var SY=CY.getParent;function xY(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=OY(e),o=CY.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,u=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===u||"visible"===CY.css(r,"overflow")){if(r===a||r===u)break}else{var l=CY.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=OY(r)}var c=null;CY.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===CY.css(e,"position")&&(e.style.position="fixed"));var s=CY.getWindowScrollLeft(i),d=CY.getWindowScrollTop(i),f=CY.viewportWidth(i),p=CY.viewportHeight(i),v=u.scrollWidth,h=u.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(v=i.innerWidth),"hidden"===g.overflowY&&(h=i.innerHeight),e.style&&(e.style.position=c),t||function(e){if(CY.isWindow(e)||9===e.nodeType)return!1;var t=CY.getDocument(e),n=t.body,r=null;for(r=SY(e);r&&r!==n&&r!==t;r=SY(r))if("fixed"===CY.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,s),n.top=Math.max(n.top,d),n.right=Math.min(n.right,s+f),n.bottom=Math.min(n.bottom,d+p);else{var m=Math.max(v,s+f);n.right=Math.min(n.right,m);var y=Math.max(h,d+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function jY(e){var t,n,r;if(CY.isWindow(e)||9===e.nodeType){var o=CY.getWindow(e);t={left:CY.getWindowScrollLeft(o),top:CY.getWindowScrollTop(o)},n=CY.viewportWidth(o),r=CY.viewportHeight(o)}else t=CY.offset(e),n=CY.outerWidth(e),r=CY.outerHeight(e);return t.width=n,t.height=r,t}function DY(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=e.left,u=e.top;return"c"===n?u+=i/2:"b"===n&&(u+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:u}}function AY(e,t,n,r,o){var i=DY(t,n[1]),a=DY(e,n[0]),u=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-u[0]+r[0]-o[0]),top:Math.round(e.top-u[1]+r[1]-o[1])}}function RY(e,t,n){return e.left<n.left||e.left+t.width>n.right}function FY(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function IY(e,t,n){var r=[];return CY.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function PY(e,t){return e[t]=-e[t],e}function MY(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function TY(e,t){e[0]=MY(e[0],t.width),e[1]=MY(e[1],t.height)}function NY(e,t,n,r){var o=n.points,i=n.offset||[0,0],a=n.targetOffset||[0,0],u=n.overflow,l=n.source||e;i=[].concat(i),a=[].concat(a);var c={},s=0,d=xY(l,!(!(u=u||{})||!u.alwaysByViewport)),f=jY(l);TY(i,f),TY(a,t);var p=AY(f,t,o,i,a),v=CY.merge(f,p);if(d&&(u.adjustX||u.adjustY)&&r){if(u.adjustX&&RY(p,f,d)){var h=IY(o,/[lr]/gi,{l:"r",r:"l"}),g=PY(i,0),m=PY(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(AY(f,t,h,g,m),f,d)||(s=1,o=h,i=g,a=m)}if(u.adjustY&&FY(p,f,d)){var y=IY(o,/[tb]/gi,{t:"b",b:"t"}),b=PY(i,1),w=PY(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(AY(f,t,y,b,w),f,d)||(s=1,o=y,i=b,a=w)}s&&(p=AY(f,t,o,i,a),CY.mix(v,p));var _=RY(p,f,d),k=FY(p,f,d);if(_||k){var C=o;_&&(C=IY(o,/[lr]/gi,{l:"r",r:"l"})),k&&(C=IY(o,/[tb]/gi,{t:"b",b:"t"})),o=C,i=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=u.adjustX&&_,c.adjustY=u.adjustY&&k,(c.adjustX||c.adjustY)&&(v=function(e,t,n,r){var o=CY.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),CY.mix(o,i)}(p,f,d,c))}return v.width!==f.width&&CY.css(l,"width",CY.width(l)+v.width-f.width),v.height!==f.height&&CY.css(l,"height",CY.height(l)+v.height-f.height),CY.offset(l,{left:v.left,top:v.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:c}}function BY(e,t,n){var r=n.target||t,o=jY(r),i=!function(e,t){var n=xY(e,t),r=jY(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return NY(e,o,n,i)}function VY(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(ZW(!a,"Warning: There may be circular references"),a)return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var u=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],o[l],u))return!1;return!0}if(t&&o&&"object"===Ln(t)&&"object"===Ln(o)){var c=Object.keys(t);return c.length===Object.keys(o).length&&c.every((function(n){return e(t[n],o[n],u)}))}return!1}(e,t)}BY.__getOffsetParent=OY,BY.__getVisibleRectForElement=xY;var LY=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),zY="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,UY=void 0!==wn&&wn.Math===Math?wn:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),HY="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(UY):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var qY=["top","right","bottom","left","width","height","size","weight"],WY="undefined"!=typeof MutationObserver,$Y=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&u()}function a(){HY(i)}function u(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){zY&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),WY?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){zY&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;qY.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),GY=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},KY=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||UY},YY=tJ(0,0,0,0);function JY(e){return parseFloat(e)||0}function XY(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+JY(e["border-"+n+"-width"])}),0)}function ZY(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return YY;var r=KY(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=JY(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,u=JY(r.width),l=JY(r.height);if("border-box"===r.boxSizing&&(Math.round(u+i)!==t&&(u-=XY(r,"left","right")+i),Math.round(l+a)!==n&&(l-=XY(r,"top","bottom")+a)),!function(e){return e===KY(e).document.documentElement}(e)){var c=Math.round(u+i)-t,s=Math.round(l+a)-n;1!==Math.abs(c)&&(u-=c),1!==Math.abs(s)&&(l-=s)}return tJ(o.left,o.top,u,l)}var QY="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof KY(e).SVGGraphicsElement}:function(e){return e instanceof KY(e).SVGElement&&"function"==typeof e.getBBox};function eJ(e){return zY?QY(e)?function(e){var t=e.getBBox();return tJ(0,0,t.width,t.height)}(e):ZY(e):YY}function tJ(e,t,n,r){return{x:e,y:t,width:n,height:r}}var nJ=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=tJ(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=eJ(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),rJ=function(){return function(e,t){var n,r,o,i,a,u,l,c=(r=(n=t).x,o=n.y,i=n.width,a=n.height,u="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(u.prototype),GY(l,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),l);GY(this,{target:e,contentRect:c})}}(),oJ=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new LY,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof KY(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new nJ(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof KY(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new rJ(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),iJ="undefined"!=typeof WeakMap?new WeakMap:new LY,aJ=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=$Y.getInstance(),r=new oJ(t,n,this);iJ.set(this,r)}}();["observe","unobserve","disconnect"].forEach((function(e){aJ.prototype[e]=function(){var t;return(t=iJ.get(this))[e].apply(t,arguments)}}));var uJ=void 0!==UY.ResizeObserver?UY.ResizeObserver:aJ;function lJ(e,t){var n=null,r=null;var o=new uJ((function(e){var o=Tf(e,1)[0].target;if(document.documentElement.contains(o)){var i=o.getBoundingClientRect(),a=i.width,u=i.height,l=Math.floor(a),c=Math.floor(u);n===l&&r===c||Promise.resolve().then((function(){t({width:l,height:c})})),n=l,r=c}}));return e&&o.observe(e),function(){o.disconnect()}}function cJ(e){return"function"!=typeof e?null:e()}function sJ(e){return"object"===Ln(e)&&e?e:null}var dJ=function(e,t){var n=e.children,r=e.disabled,o=e.target,i=e.align,a=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,s=void 0===c?0:c,d=u.a.useRef({}),f=u.a.useRef(),p=u.a.Children.only(n),v=u.a.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=i,v.current.onAlign=a;var h=function(e,t){var n=u.a.useRef(!1),r=u.a.useRef(null);function o(){window.clearTimeout(r.current)}return[function i(a){if(o(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,i()}),t);else{if(!1===e(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,o()}]}((function(){var e=v.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign,i=f.current;if(!t&&n&&i){var a,u=cJ(n),l=sJ(n);d.current.element=u,d.current.point=l,d.current.align=r;var c=document.activeElement;return u&&b$(u)?a=BY(i,u,r):l&&(a=function(e,t,n){var r,o,i=CY.getDocument(e),a=i.defaultView||i.parentWindow,u=CY.getWindowScrollLeft(a),l=CY.getWindowScrollTop(a),c=CY.viewportWidth(a),s=CY.viewportHeight(a),d={left:r="pageX"in t?t.pageX:u+t.clientX,top:o="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},f=r>=0&&r<=u+c&&o>=0&&o<=l+s,p=[n.points[0],"cc"];return NY(e,d,TK(TK({},n),{},{points:p}),f)}(i,l,r)),function(e,t){e!==document.activeElement&&IG(t,e)&&"function"==typeof e.focus&&e.focus()}(c,i),o&&a&&o(i,a),!0}return!1}),s),g=Tf(h,2),m=g[0],y=g[1],b=Tf(u.a.useState(),2),w=b[0],_=b[1],k=Tf(u.a.useState(),2),C=k[0],E=k[1];return mW((function(){_(cJ(o)),E(sJ(o))})),u.a.useEffect((function(){var e,t;d.current.element===w&&((e=d.current.point)===(t=C)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&VY(d.current.align,i)||m()})),u.a.useEffect((function(){return lJ(f.current,m)}),[f.current]),u.a.useEffect((function(){return lJ(w,m)}),[w]),u.a.useEffect((function(){r?y():m()}),[r]),u.a.useEffect((function(){if(l)return TG(window,"resize",m).remove}),[l]),u.a.useEffect((function(){return function(){y()}}),[]),u.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return m(!0)}}})),u.a.isValidElement(p)&&(p=u.a.cloneElement(p,{ref:HW(p.ref,f)})),p},fJ=u.a.forwardRef(dJ);function pJ(){pJ=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:S(e,n,u)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",v="executing",h="completed",g={};function m(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(R([])));k&&k!==n&&r.call(k,a)&&(w=k);var C=b.prototype=m.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,a,u){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Ln(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=x(u,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?h:p,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ln(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},E(O.prototype),c(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new O(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}fJ.displayName="Align";var vJ=["measure","alignPre","align",null,"motion"];var hJ=a.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,o=e.className,i=e.style,u=e.children,l=e.zIndex,c=e.stretch,s=e.destroyPopupOnHide,d=e.forceRender,f=e.align,p=e.point,v=e.getRootDomNode,h=e.getClassNameFromAlign,g=e.onAlign,m=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,w=e.onTouchStart,_=e.onClick,k=Object(a.useRef)(),C=Object(a.useRef)(),E=Tf(Object(a.useState)(),2),O=E[0],S=E[1],x=function(e){var t=Tf(a.useState({width:0,height:0}),2),n=t[0],r=t[1];return[a.useMemo((function(){var t={};if(e){var r=n.width,o=n.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){var t=e.offsetWidth,n=e.offsetHeight,o=e.getBoundingClientRect(),i=o.width,a=o.height;Math.abs(t-i)<1&&Math.abs(n-a)<1&&(t=i,n=a),r({width:t,height:n})}]}(c),j=Tf(x,2),D=j[0],A=j[1];var R=function(e,t){var n=Tf(bW(null),2),r=n[0],o=n[1],i=Object(a.useRef)();function u(e){o(e,!0)}function l(){y$.cancel(i.current)}return Object(a.useEffect)((function(){u("measure")}),[e]),Object(a.useEffect)((function(){"measure"===r&&t(),r&&(i.current=y$(rl(pJ().mark((function e(){var t,n;return pJ().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=vJ.indexOf(r),(n=vJ[t+1])&&-1!==t&&u(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),Object(a.useEffect)((function(){return function(){l()}}),[]),[r,function(e){l(),i.current=y$((function(){u((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n,(function(){c&&A(v())})),F=Tf(R,2),P=F[0],M=F[1],T=Tf(Object(a.useState)(0),2),N=T[0],B=T[1],V=Object(a.useRef)();function L(){var e;null===(e=k.current)||void 0===e||e.forceAlign()}function z(e,t){var n=h(t);O!==n&&S(n),B((function(e){return e+1})),"align"===P&&(null==g||g(e,t))}mW((function(){"alignPre"===P&&B(0)}),[P]),mW((function(){"align"===P&&(N<3?L():M((function(){var e;null===(e=V.current)||void 0===e||e.call(V)})))}),[N]);var U=GW({},IK(e));function H(){return new Promise((function(e){V.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=U[e];U[e]=function(e,n){return M(),null==t?void 0:t(e,n)}})),a.useEffect((function(){U.motionName||"motion"!==P||M()}),[U.motionName,P]),a.useImperativeHandle(t,(function(){return{forceAlign:L,getElement:function(){return C.current}}}));var q=GW(GW({},D),{},{zIndex:l,opacity:"motion"!==P&&"stable"!==P&&n?0:void 0,pointerEvents:n||"stable"===P?void 0:"none"},i),W=!0;null==f||!f.points||"align"!==P&&"stable"!==P||(W=!1);var $=u;return a.Children.count(u)>1&&($=a.createElement("div",{className:"".concat(r,"-content")},u)),a.createElement(kK,e$({visible:n,ref:C,leavedClassName:"".concat(r,"-hidden")},U,{onAppearPrepare:H,onEnterPrepare:H,removeOnLeave:s,forceRender:d}),(function(e,t){var n=e.className,i=e.style,u=I()(r,o,O,n);return a.createElement(fJ,{target:p||v,key:"popup",ref:k,monitorWindowResize:!0,disabled:W,align:f,onAlign:z},a.createElement("div",{ref:t,className:u,onMouseEnter:m,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:w,onClick:_,style:GW(GW({},i),q)},$))}))}));hJ.displayName="PopupInner";var gJ=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,o=e.zIndex,i=e.children,u=e.mobile,l=(u=void 0===u?{}:u).popupClassName,c=u.popupStyle,s=u.popupMotion,d=void 0===s?{}:s,f=u.popupRender,p=e.onClick,v=a.useRef();a.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return v.current}}}));var h=GW({zIndex:o},c),g=i;return a.Children.count(i)>1&&(g=a.createElement("div",{className:"".concat(n,"-content")},i)),f&&(g=f(g)),a.createElement(kK,e$({visible:r,ref:v,removeOnLeave:!0},d),(function(e,t){var r=e.className,o=e.style,i=I()(n,l,r);return a.createElement("div",{ref:t,className:i,onClick:p,style:GW(GW({},o),h)},g)}))}));gJ.displayName="MobilePopupInner";var mJ=["visible","mobile"],yJ=a.forwardRef((function(e,t){var n=e.visible,r=e.mobile,o=qz(e,mJ),i=Tf(Object(a.useState)(n),2),u=i[0],l=i[1],c=Tf(Object(a.useState)(!1),2),s=c[0],d=c[1],f=GW(GW({},o),{},{visible:u});Object(a.useEffect)((function(){l(n),n&&r&&d(VG())}),[n,r]);var p=s?a.createElement(gJ,e$({},f,{mobile:r,ref:t})):a.createElement(hJ,e$({},f,{ref:t}));return a.createElement("div",null,a.createElement(PK,f),p)}));yJ.displayName="Popup";var bJ=a.createContext(null);function wJ(){}function _J(){return""}function kJ(e){return e?e.ownerDocument:window.document}var CJ=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const EJ=(OJ=NG,SJ=function(e){jd(n,e);var t=QW(n);function n(e){var r,o;return sl(this,n),il(Ed(r=t.call(this,e)),"popupRef",a.createRef()),il(Ed(r),"triggerRef",a.createRef()),il(Ed(r),"portalContainer",void 0),il(Ed(r),"attachId",void 0),il(Ed(r),"clickOutsideHandler",void 0),il(Ed(r),"touchOutsideHandler",void 0),il(Ed(r),"contextMenuOutsideHandler1",void 0),il(Ed(r),"contextMenuOutsideHandler2",void 0),il(Ed(r),"mouseDownTimeout",void 0),il(Ed(r),"focusTime",void 0),il(Ed(r),"preClickTime",void 0),il(Ed(r),"preTouchTime",void 0),il(Ed(r),"delayTimer",void 0),il(Ed(r),"hasPopupMouseDown",void 0),il(Ed(r),"onMouseEnter",(function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)})),il(Ed(r),"onMouseMove",(function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)})),il(Ed(r),"onMouseLeave",(function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),il(Ed(r),"onPopupMouseEnter",(function(){r.clearDelayTimer()})),il(Ed(r),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&IG(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),il(Ed(r),"onFocus",(function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))})),il(Ed(r),"onMouseDown",(function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()})),il(Ed(r),"onTouchStart",(function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()})),il(Ed(r),"onBlur",(function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)})),il(Ed(r),"onContextMenu",(function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)})),il(Ed(r),"onContextMenuClose",(function(){r.isContextMenuToShow()&&r.close()})),il(Ed(r),"onClick",(function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)})),il(Ed(r),"onPopupMouseDown",(function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)})),il(Ed(r),"onDocumentClick",(function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),o=r.getPopupDomNode();IG(n,t)&&!r.isContextMenuOnly()||IG(o,t)||r.hasPopupMouseDown||r.close()}})),il(Ed(r),"getRootDomNode",(function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=MG(r.triggerRef.current);if(t)return t}catch(e){}return c.a.findDOMNode(Ed(r))})),il(Ed(r),"getPopupClassNameFromAlign",(function(e){var t=[],n=r.props,o=n.popupPlacement,i=n.builtinPlacements,a=n.prefixCls,u=n.alignPoint,l=n.getPopupClassNameFromAlign;return o&&i&&t.push(function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u=i[a];if(BG(e[u].points,o,r))return"".concat(t,"-placement-").concat(u)}return""}(i,a,e,u)),l&&t.push(l(e)),t.join(" ")})),il(Ed(r),"getComponent",(function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,o=e.popupClassName,i=e.onPopupAlign,u=e.popupMotion,l=e.popupAnimation,c=e.popupTransitionName,s=e.popupStyle,d=e.mask,f=e.maskAnimation,p=e.maskTransitionName,v=e.maskMotion,h=e.zIndex,g=e.popup,m=e.stretch,y=e.alignPoint,b=e.mobile,w=e.forceRender,_=e.onPopupClick,k=r.state,C=k.popupVisible,E=k.point,O=r.getPopupAlign(),S={};return r.isMouseEnterToShow()&&(S.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(S.onMouseLeave=r.onPopupMouseLeave),S.onMouseDown=r.onPopupMouseDown,S.onTouchStart=r.onPopupMouseDown,a.createElement(yJ,e$({prefixCls:t,destroyPopupOnHide:n,visible:C,point:y&&E,className:o,align:O,onAlign:i,animation:l,getClassNameFromAlign:r.getPopupClassNameFromAlign},S,{stretch:m,getRootDomNode:r.getRootDomNode,style:s,mask:d,zIndex:h,transitionName:c,maskAnimation:f,maskTransitionName:p,maskMotion:v,ref:r.popupRef,motion:u,mobile:b,forceRender:w,onClick:_}),"function"==typeof g?g():g)})),il(Ed(r),"attachParent",(function(e){y$.cancel(r.attachId);var t,n=r.props,o=n.getPopupContainer,i=n.getDocument,a=r.getRootDomNode();o?(a||0===o.length)&&(t=o(a)):t=i(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=y$((function(){r.attachParent(e)}))})),il(Ed(r),"getContainer",(function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer})),il(Ed(r),"setPoint",(function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),il(Ed(r),"handlePortalUpdate",(function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)})),il(Ed(r),"triggerContextValue",{onPopupMouseDown:r.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:o,popupVisible:o},CJ.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return ll(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=TG(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=TG(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=TG(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=TG(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),y$.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return GW(GW({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,o=t.alignPoint,i=t.className,u=t.autoDestroy,l=a.Children.only(n),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var s=I()(l&&l.props&&l.props.className,i);s&&(c.className=s);var d=GW({},c);WW(l)&&(d.ref=HW(this.triggerRef,l.ref));var f,p=a.cloneElement(l,d);return(e||this.popupRef.current||r)&&(f=a.createElement(OJ,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&u&&(f=null),a.createElement(bJ.Provider,{value:this.triggerContextValue},p,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(a.Component),il(SJ,"contextType",bJ),il(SJ,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:_J,getDocument:kJ,onPopupVisibleChange:wJ,afterPopupVisibleChange:wJ,onPopupAlign:wJ,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),SJ);var OJ,SJ,xJ={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function jJ(e){var t,n=e.prefixCls,r=e.popupElement,o=e.popupStyle,i=e.visible,u=e.dropdownClassName,l=e.dropdownAlign,c=e.transitionName,s=e.getPopupContainer,d=e.children,f=e.range,p=e.popupPlacement,v=e.direction,h="".concat(n,"-dropdown");return a.createElement(EJ,{showAction:[],hideAction:[],popupPlacement:void 0!==p?p:"rtl"===v?"bottomRight":"bottomLeft",builtinPlacements:xJ,prefixCls:h,popupTransitionName:c,popup:r,popupAlign:l,popupVisible:i,popupClassName:I()(u,(t={},il(t,"".concat(h,"-range"),f),il(t,"".concat(h,"-rtl"),"rtl"===v),t)),popupStyle:o,getPopupContainer:s},d)}function DJ(e){var t=e.open,n=e.value,r=e.isClickOutside,o=e.triggerOpen,i=e.forwardKeyDown,u=e.onKeyDown,l=e.blurToCancel,c=e.onSubmit,s=e.onCancel,d=e.onFocus,f=e.onBlur,p=e.currentFocusedKey,v=e.key,h=void 0===v?"start":v,g=Tf(Object(a.useState)(!1),2),m=g[0],y=g[1],b=Tf(Object(a.useState)(!1),2),w=b[0],_=b[1],k=Object(a.useRef)(),C=Object(a.useRef)(!1),E=Object(a.useRef)(!1),O=Object(a.useRef)(!1),S={onMouseDown:function(){y(!0),o(!0)},onKeyDown:function(e){if(u(e,(function(){O.current=!0})),!O.current){switch(e.which){case t$.ENTER:return t?!1!==c()&&y(!0):o(!0),void e.preventDefault();case t$.TAB:return void(m&&t&&!e.shiftKey?(y(!1),e.preventDefault()):!m&&t&&!i(e)&&e.shiftKey&&(y(!0),e.preventDefault()));case t$.ESC:return y(!0),void s()}t||[t$.SHIFT].includes(e.which)?m||i(e):o(!0)}},onFocus:function(e){y(!0),_(!0),p&&(p.current=h),clearTimeout(k.current),d&&d(e)},onBlur:function(e){!C.current&&r(document.activeElement)?(l?setTimeout((function(){for(var e=document.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;r(e)&&s()}),0):t&&(o(!1),E.current&&c()),_(!1),p?(p.current="",k.current=setTimeout((function(){p.current||null==f||f(e)}),100)):null==f||f(e)):C.current=!1}};return Object(a.useEffect)((function(){E.current=!1}),[t]),Object(a.useEffect)((function(){E.current=!0}),[n]),Object(a.useEffect)((function(){return e=function(e){var n=function(e){var t,n=e.target;return e.composed&&n.shadowRoot&&(null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])||n}(e),i=r(n);t?i?w&&!i||o(!1):(C.current=!0,requestAnimationFrame((function(){C.current=!1}))):w&&!i&&(C.current=!0)},!O$&&"undefined"!=typeof window&&window.addEventListener&&(O$=function(e){tl(S$).forEach((function(t){t(e)}))},window.addEventListener("mousedown",O$)),S$.add(e),function(){S$.delete(e),0===S$.size&&(window.removeEventListener("mousedown",O$),O$=null)};var e})),Object(a.useEffect)((function(){return function(){return clearTimeout(k.current)}}),[]),[S,{focused:w,typing:m}]}function AJ(e){var t=e.valueTexts,n=e.onTextChange,r=Tf(a.useState(""),2),o=r[0],i=r[1],u=a.useRef([]);function l(){i(u.current[0])}return u.current=t,a.useEffect((function(){t.every((function(e){return e!==o}))&&l()}),[t.join("||")]),[o,function(e){i(e),n(e)},l]}function RJ(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale;return zW((function(){if(!e)return[[""],""];for(var t="",i=[],a=0;a<n.length;a+=1){var u=n[a],l=H$(e,{generateConfig:r,locale:o,format:u});i.push(l),0===a&&(t=l)}return[i,t]}),[e,n,o],(function(e,t){return!L$(r,e[0],t[0])||!VY(e[1],t[1],!0)||!VY(e[2],t[2],!0)}))}function FJ(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale,i=Tf(Object(a.useState)(null),2),u=i[0],l=i[1],c=Object(a.useRef)(null);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cancelAnimationFrame(c.current),t?l(e):c.current=requestAnimationFrame((function(){l(e)}))}var d=Tf(RJ(u,{formatList:n,generateConfig:r,locale:o}),2)[1];function f(){s(null,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}return Object(a.useEffect)((function(){f(!0)}),[e]),Object(a.useEffect)((function(){return function(){return cancelAnimationFrame(c.current)}}),[]),[d,function(e){s(e)},f]}function IJ(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.id,i=e.tabIndex,u=e.style,l=e.className,c=e.dropdownClassName,s=e.dropdownAlign,d=e.popupStyle,f=e.transitionName,p=e.generateConfig,v=e.locale,h=e.inputReadOnly,g=e.allowClear,m=e.autoFocus,y=e.showTime,b=e.picker,w=void 0===b?"date":b,_=e.format,k=e.use12Hours,C=e.value,E=e.defaultValue,O=e.open,S=e.defaultOpen,x=e.defaultOpenValue,j=e.suffixIcon,D=e.clearIcon,A=e.disabled,R=e.disabledDate,F=e.placeholder,P=e.getPopupContainer,M=e.pickerRef,T=e.panelRender,N=e.onChange,B=e.onOpenChange,V=e.onFocus,L=e.onBlur,z=e.onMouseDown,U=e.onMouseUp,H=e.onMouseEnter,q=e.onMouseLeave,W=e.onContextMenu,$=e.onClick,G=e.onKeyDown,K=e.onSelect,Y=e.direction,J=e.autoComplete,X=void 0===J?"off":J,Z=e.inputRender,Q=a.useRef(null),ee="date"===w&&!!y||"time"===w,te=K$(C$(_,w,y,k)),ne=a.useRef(null),re=a.useRef(null),oe=a.useRef(null),ie=Tf(_W(null,{value:C,defaultValue:E}),2),ae=ie[0],ue=ie[1],le=Tf(a.useState(ae),2),ce=le[0],se=le[1],de=a.useRef(null),fe=Tf(_W(!1,{value:O,defaultValue:S,postState:function(e){return!A&&e},onChange:function(e){B&&B(e),!e&&de.current&&de.current.onClose&&de.current.onClose()}}),2),pe=fe[0],ve=fe[1],he=Tf(RJ(ce,{formatList:te,generateConfig:p,locale:v}),2),ge=he[0],me=he[1],ye=Tf(AJ({valueTexts:ge,onTextChange:function(e){var t=q$(e,{locale:v,formatList:te,generateConfig:p});!t||R&&R(t)||se(t)}}),3),be=ye[0],we=ye[1],_e=ye[2],ke=function(e){se(e),ue(e),N&&!L$(p,ae,e)&&N(e,e?H$(e,{generateConfig:p,locale:v,format:te[0]}):"")},Ce=function(e){A&&e||ve(e)},Ee=DJ({blurToCancel:ee,open:pe,value:be,triggerOpen:Ce,forwardKeyDown:function(e){return pe&&de.current&&de.current.onKeyDown?de.current.onKeyDown(e):(ZW(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},isClickOutside:function(e){return!j$([ne.current,re.current,oe.current],e)},onSubmit:function(){return!(!ce||R&&R(ce))&&(ke(ce),Ce(!1),_e(),!0)},onCancel:function(){Ce(!1),se(ae),_e()},onKeyDown:function(e,t){null==G||G(e,t)},onFocus:V,onBlur:L}),Oe=Tf(Ee,2),Se=Oe[0],xe=Oe[1],je=xe.focused,De=xe.typing;a.useEffect((function(){pe||(se(ae),ge.length&&""!==ge[0]?me!==be&&_e():we(""))}),[pe,ge]),a.useEffect((function(){pe||_e()}),[w]),a.useEffect((function(){se(ae)}),[ae]),M&&(M.current={focus:function(){Q.current&&Q.current.focus()},blur:function(){Q.current&&Q.current.blur()}});var Ae=Tf(FJ(be,{formatList:te,generateConfig:p,locale:v}),3),Re=Ae[0],Fe=Ae[1],Ie=Ae[2],Pe=GW(GW({},e),{},{className:void 0,style:void 0,pickerValue:void 0,onPickerValueChange:void 0,onChange:null}),Me=a.createElement(FG,e$({},Pe,{generateConfig:p,className:I()(il({},"".concat(r,"-panel-focused"),!De)),value:ce,locale:v,tabIndex:-1,onSelect:function(e){null==K||K(e),se(e)},direction:Y,onPanelChange:function(t,n){var r=e.onPanelChange;Ie(!0),null==r||r(t,n)}}));T&&(Me=T(Me));var Te,Ne,Be=a.createElement("div",{className:"".concat(r,"-panel-container"),onMouseDown:function(e){e.preventDefault()}},Me);j&&(Te=a.createElement("span",{className:"".concat(r,"-suffix")},j)),g&&ae&&!A&&(Ne=a.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation(),ke(null),Ce(!1)},className:"".concat(r,"-clear"),role:"button"},D||a.createElement("span",{className:"".concat(r,"-clear-btn")})));var Ve=GW(GW(GW({id:o,tabIndex:i,disabled:A,readOnly:h||"function"==typeof te[0]||!De,value:Re||be,onChange:function(e){we(e.target.value)},autoFocus:m,placeholder:F,ref:Q,title:be},Se),{},{size:E$(w,te[0],p)},Y$(e)),{},{autoComplete:X}),Le=Z?Z(Ve):a.createElement("input",Ve),ze="rtl"===Y?"bottomRight":"bottomLeft";return a.createElement(n$.Provider,{value:{operationRef:de,hideHeader:"time"===w,panelRef:ne,onSelect:function(e,t){("submit"===t||"key"!==t&&!ee)&&(ke(e),Ce(!1))},open:pe,defaultOpenValue:x,onDateMouseEnter:Fe,onDateMouseLeave:Ie}},a.createElement(jJ,{visible:pe,popupElement:Be,popupStyle:d,prefixCls:r,dropdownClassName:c,dropdownAlign:s,getPopupContainer:P,transitionName:f,popupPlacement:ze,direction:Y},a.createElement("div",{ref:oe,className:I()(r,l,(t={},il(t,"".concat(r,"-disabled"),A),il(t,"".concat(r,"-focused"),je),il(t,"".concat(r,"-rtl"),"rtl"===Y),t)),style:u,onMouseDown:z,onMouseUp:U,onMouseEnter:H,onMouseLeave:q,onContextMenu:W,onClick:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==$||$.apply(void 0,t),Q.current&&(Q.current.focus(),Ce(!0))}},a.createElement("div",{className:I()("".concat(r,"-input"),il({},"".concat(r,"-input-placeholder"),!!Re)),ref:re},Le,Te,Ne))))}var PJ=function(e){jd(n,e);var t=QW(n);function n(){var e;sl(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=a.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return ll(n,[{key:"render",value:function(){return a.createElement(IJ,e$({},this.props,{pickerRef:this.pickerRef}))}}]),n}(a.Component);function MJ(e,t,n,r){var o=U$(e,n,r,1);function i(n){return n(e,t)?"same":n(o,t)?"closing":"far"}switch(n){case"year":return i((function(e,t){return function(e,t,n){var r=I$(t,n);return"boolean"==typeof r?r:Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(n)/10)}(r,e,t)}));case"quarter":case"month":return i((function(e,t){return P$(r,e,t)}));default:return i((function(e,t){return N$(r,e,t)}))}}function TJ(e){var t=e.values,n=e.picker,r=e.defaultDates,o=e.generateConfig,i=Tf(a.useState((function(){return[J$(r,0),J$(r,1)]})),2),u=i[0],l=i[1],c=Tf(a.useState(null),2),s=c[0],d=c[1],f=J$(t,0),p=J$(t,1);return[function(e){return u[e]?u[e]:J$(s,e)||function(e,t,n,r){var o=J$(e,0),i=J$(e,1);if(0===t)return o;if(o&&i)switch(MJ(o,i,n,r)){case"same":case"closing":return o;default:return U$(i,n,r,-1)}return o}(t,e,n,o)||f||p||o.getNow()},function(e,n){if(e){var r=X$(s,e,n);l(X$(u,null,n)||[null,null]);var o=(n+1)%2;J$(t,o)||(r=X$(r,e,o)),d(r)}else(f||p)&&d(null)}]}function NJ(e,t){return e&&e[0]&&e[1]&&t.isAfter(e[0],e[1])?[e[1],e[0]]:e}function BJ(e,t,n,r){return!!e||(!(!r||!r[t])||!!n[(t+1)%2])}function VJ(e){var t,n,r,o=e.prefixCls,i=void 0===o?"rc-picker":o,u=e.id,l=e.style,c=e.className,s=e.popupStyle,d=e.dropdownClassName,f=e.transitionName,p=e.dropdownAlign,v=e.getPopupContainer,h=e.generateConfig,g=e.locale,m=e.placeholder,y=e.autoFocus,b=e.disabled,w=e.format,_=e.picker,k=void 0===_?"date":_,C=e.showTime,E=e.use12Hours,O=e.separator,S=void 0===O?"~":O,x=e.value,j=e.defaultValue,D=e.defaultPickerValue,A=e.open,R=e.defaultOpen,F=e.disabledDate,P=e.disabledTime,M=e.dateRender,T=e.panelRender,N=e.ranges,B=e.allowEmpty,V=e.allowClear,L=e.suffixIcon,z=e.clearIcon,U=e.pickerRef,H=e.inputReadOnly,q=e.mode,W=e.renderExtraFooter,$=e.onChange,G=e.onOpenChange,K=e.onPanelChange,Y=e.onCalendarChange,J=e.onFocus,X=e.onBlur,Z=e.onMouseDown,Q=e.onMouseUp,ee=e.onMouseEnter,te=e.onMouseLeave,ne=e.onClick,re=e.onOk,oe=e.onKeyDown,ie=e.components,ae=e.order,ue=e.direction,le=e.activePickerIndex,ce=e.autoComplete,se=void 0===ce?"off":ce,de="date"===k&&!!C||"time"===k,fe=Object(a.useRef)({}),pe=Object(a.useRef)(null),ve=Object(a.useRef)(null),he=Object(a.useRef)(null),ge=Object(a.useRef)(null),me=Object(a.useRef)(null),ye=Object(a.useRef)(null),be=Object(a.useRef)(null),we=Object(a.useRef)(null),_e=K$(C$(w,k,C,E)),ke=Tf(_W(0,{value:le}),2),Ce=ke[0],Ee=ke[1],Oe=Object(a.useRef)(null),Se=a.useMemo((function(){return Array.isArray(b)?b:[b||!1,b||!1]}),[b]),xe=Tf(_W(null,{value:x,defaultValue:j,postState:function(e){return"time"!==k||ae?NJ(e,h):e}}),2),je=xe[0],De=xe[1],Ae=Tf(TJ({values:je,picker:k,defaultDates:D,generateConfig:h}),2),Re=Ae[0],Fe=Ae[1],Ie=_W(je,{postState:function(e){var t=e;if(Se[0]&&Se[1])return t;for(var n=0;n<2;n+=1)!Se[n]||t||J$(t,n)||J$(B,n)||(t=X$(t,h.getNow(),n));return t}}),Pe=Tf(Ie,2),Me=Pe[0],Te=Pe[1],Ne=Tf(_W([k,k],{value:q}),2),Be=Ne[0],Ve=Ne[1];Object(a.useEffect)((function(){Ve([k,k])}),[k]);var Le=function(e,t){Ve(e),K&&K(t,e)},ze=function(e,t,n){var r=e.picker,o=e.locale,i=e.selectedValue,u=e.disabledDate,l=e.disabled,c=e.generateConfig,s=J$(i,0),d=J$(i,1);function f(e){return c.locale.getWeekFirstDate(o.locale,e)}function p(e){return 100*c.getYear(e)+c.getMonth(e)}function v(e){return 10*c.getYear(e)+M$(c,e)}return[a.useCallback((function(e){if(u&&u(e))return!0;if(l[1]&&d)return!B$(c,e,d)&&c.isAfter(e,d);if(t&&d)switch(r){case"quarter":return v(e)>v(d);case"month":return p(e)>p(d);case"week":return f(e)>f(d);default:return!B$(c,e,d)&&c.isAfter(e,d)}return!1}),[u,l[1],d,t]),a.useCallback((function(e){if(u&&u(e))return!0;if(l[0]&&s)return!B$(c,e,d)&&c.isAfter(s,e);if(n&&s)switch(r){case"quarter":return v(e)<v(s);case"month":return p(e)<p(s);case"week":return f(e)<f(s);default:return!B$(c,e,s)&&c.isAfter(s,e)}return!1}),[u,l[0],s,n])]}({picker:k,selectedValue:Me,locale:g,disabled:Se,disabledDate:F,generateConfig:h},fe.current[1],fe.current[0]),Ue=Tf(ze,2),He=Ue[0],qe=Ue[1],We=Tf(_W(!1,{value:A,defaultValue:R,postState:function(e){return!Se[Ce]&&e},onChange:function(e){G&&G(e),!e&&Oe.current&&Oe.current.onClose&&Oe.current.onClose()}}),2),$e=We[0],Ge=We[1],Ke=$e&&0===Ce,Ye=$e&&1===Ce,Je=Tf(Object(a.useState)(0),2),Xe=Je[0],Ze=Je[1];Object(a.useEffect)((function(){!$e&&pe.current&&Ze(pe.current.offsetWidth)}),[$e]);var Qe=a.useRef();function et(e,t){if(e)clearTimeout(Qe.current),fe.current[t]=!0,Ee(t),Ge(e),$e||Fe(null,t);else if(Ce===t){Ge(e);var n=fe.current;Qe.current=setTimeout((function(){n===fe.current&&(fe.current={})}))}}function tt(e){et(!0,e),setTimeout((function(){var t=[ye,be][e];t.current&&t.current.focus()}),0)}function nt(e,t){var n=e,r=J$(n,0),o=J$(n,1);r&&o&&h.isAfter(r,o)&&("week"===k&&!V$(h,g.locale,r,o)||"quarter"===k&&!T$(h,r,o)||"week"!==k&&"quarter"!==k&&"time"!==k&&!B$(h,r,o)?(0===t?(n=[r,null],o=null):(r=null,n=[null,o]),fe.current=il({},t,!0)):"time"===k&&!1===ae||(n=NJ(n,h))),Te(n);var i=n&&n[0]?H$(n[0],{generateConfig:h,locale:g,format:_e[0]}):"",a=n&&n[1]?H$(n[1],{generateConfig:h,locale:g,format:_e[0]}):"";Y&&Y(n,[i,a],{range:0===t?"start":"end"});var u=BJ(r,0,Se,B),l=BJ(o,1,Se,B);(null===n||u&&l)&&(De(n),!$||L$(h,J$(je,0),r)&&L$(h,J$(je,1),o)||$(n,[i,a]));var c=null;0!==t||Se[1]?1!==t||Se[0]||(c=0):c=1,null===c||c===Ce||fe.current[c]&&J$(n,c)||!J$(n,t)?et(!1,t):tt(c)}var rt=function(e){return $e&&Oe.current&&Oe.current.onKeyDown?Oe.current.onKeyDown(e):(ZW(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},ot={formatList:_e,generateConfig:h,locale:g},it=Tf(RJ(J$(Me,0),ot),2),at=it[0],ut=it[1],lt=Tf(RJ(J$(Me,1),ot),2),ct=lt[0],st=lt[1],dt=function(e,t){var n=q$(e,{locale:g,formatList:_e,generateConfig:h});n&&!(0===t?He:qe)(n)&&(Te(X$(Me,n,t)),Fe(n,t))},ft=Tf(AJ({valueTexts:at,onTextChange:function(e){return dt(e,0)}}),3),pt=ft[0],vt=ft[1],ht=ft[2],gt=Tf(AJ({valueTexts:ct,onTextChange:function(e){return dt(e,1)}}),3),mt=gt[0],yt=gt[1],bt=gt[2],wt=Tf(Object(a.useState)(null),2),_t=wt[0],kt=wt[1],Ct=Tf(Object(a.useState)(null),2),Et=Ct[0],Ot=Ct[1],St=Tf(FJ(pt,{formatList:_e,generateConfig:h,locale:g}),3),xt=St[0],jt=St[1],Dt=St[2],At=Tf(FJ(mt,{formatList:_e,generateConfig:h,locale:g}),3),Rt=At[0],Ft=At[1],It=At[2],Pt=function(e,t){return{blurToCancel:de,forwardKeyDown:rt,onBlur:X,isClickOutside:function(e){return!j$([ve.current,he.current,ge.current,pe.current],e)},onFocus:function(t){Ee(e),J&&J(t)},triggerOpen:function(t){et(t,e)},onSubmit:function(){if(!Me||F&&F(Me[e]))return!1;nt(Me,e),t()},onCancel:function(){et(!1,e),Te(je),t()}}},Mt=Object(a.useRef)(""),Tt=DJ(GW(GW({},Pt(0,ht)),{},{open:Ke,value:pt,currentFocusedKey:Mt,key:"start",onKeyDown:function(e,t){null==oe||oe(e,t)}})),Nt=Tf(Tt,2),Bt=Nt[0],Vt=Nt[1],Lt=Vt.focused,zt=Vt.typing,Ut=DJ(GW(GW({},Pt(1,bt)),{},{open:Ye,value:mt,currentFocusedKey:Mt,key:"end",onKeyDown:function(e,t){null==oe||oe(e,t)}})),Ht=Tf(Ut,2),qt=Ht[0],Wt=Ht[1],$t=Wt.focused,Gt=Wt.typing,Kt=je&&je[0]?H$(je[0],{locale:g,format:"YYYYMMDDHHmmss",generateConfig:h}):"",Yt=je&&je[1]?H$(je[1],{locale:g,format:"YYYYMMDDHHmmss",generateConfig:h}):"";Object(a.useEffect)((function(){$e||(Te(je),at.length&&""!==at[0]?ut!==pt&&ht():vt(""),ct.length&&""!==ct[0]?st!==mt&&bt():yt(""))}),[$e,at,ct]),Object(a.useEffect)((function(){Te(je)}),[Kt,Yt]),U&&(U.current={focus:function(){ye.current&&ye.current.focus()},blur:function(){ye.current&&ye.current.blur(),be.current&&be.current.blur()}});var Jt=Object.keys(N||{}).map((function(e){var t=N[e],n="function"==typeof t?t():t;return{label:e,onClick:function(){nt(n,null),et(!1,Ce)},onMouseEnter:function(){kt(n)},onMouseLeave:function(){kt(null)}}}));function Xt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;$e&&Et&&Et[0]&&Et[1]&&h.isAfter(Et[1],Et[0])&&(r=Et);var o=C;if(C&&"object"===Ln(C)&&C.defaultValue){var u=C.defaultValue;o=GW(GW({},C),{},{defaultValue:J$(u,Ce)||void 0})}var l=null;return M&&(l=function(e,t){return M(e,t,{range:Ce?"end":"start"})}),a.createElement(oG.Provider,{value:{inRange:!0,panelPosition:t,rangedValue:_t||Me,hoverRangedValue:r}},a.createElement(FG,e$({},e,n,{dateRender:l,showTime:o,mode:Be[Ce],generateConfig:h,style:void 0,direction:ue,disabledDate:0===Ce?He:qe,disabledTime:function(e){return!!P&&P(e,0===Ce?"start":"end")},className:I()(il({},"".concat(i,"-panel-focused"),0===Ce?!zt:!Gt)),value:J$(Me,Ce),locale:g,tabIndex:-1,onPanelChange:function(e,n){0===Ce&&Dt(!0),1===Ce&&It(!0),Le(X$(Be,n,Ce),X$(Me,e,Ce));var r=e;"right"===t&&Be[Ce]===n&&(r=U$(r,n,h,-1)),Fe(r,Ce)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:J$(Me,0===Ce?1:0)})))}var Zt=0,Qt=0;if(Ce&&he.current&&me.current&&ve.current){Zt=he.current.offsetWidth+me.current.offsetWidth;var en=we.current.offsetLeft>Zt?we.current.offsetLeft-Zt:we.current.offsetLeft;ve.current.offsetWidth&&we.current.offsetWidth&&Zt>ve.current.offsetWidth-we.current.offsetWidth-("rtl"===ue?0:en)&&(Qt=Zt)}var tn="rtl"===ue?{right:Zt}:{left:Zt};var nn,rn,on=a.createElement("div",{className:I()("".concat(i,"-range-wrapper"),"".concat(i,"-").concat(k,"-range-wrapper")),style:{minWidth:Xe}},a.createElement("div",{ref:we,className:"".concat(i,"-range-arrow"),style:tn}),function(){var e,t=DG(i,Be[Ce],W),n=AG({prefixCls:i,components:ie,needConfirmButton:de,okDisabled:!J$(Me,Ce)||F&&F(Me[Ce]),locale:g,rangeList:Jt,onOk:function(){J$(Me,Ce)&&(nt(Me,Ce),re&&re(Me))}});if("time"===k||C)e=Xt();else{var r=Re(Ce),o=U$(r,k,h),u=Be[Ce]===k,l=Xt(!!u&&"left",{pickerValue:r,onPickerValueChange:function(e){Fe(e,Ce)}}),c=Xt("right",{pickerValue:o,onPickerValueChange:function(e){Fe(U$(e,k,h,-1),Ce)}});e="rtl"===ue?a.createElement(a.Fragment,null,c,u&&l):a.createElement(a.Fragment,null,l,u&&c)}var s=a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(i,"-panels")},e),(t||n)&&a.createElement("div",{className:"".concat(i,"-footer")},t,n));return T&&(s=T(s)),a.createElement("div",{className:"".concat(i,"-panel-container"),style:{marginLeft:Qt},ref:ve,onMouseDown:function(e){e.preventDefault()}},s)}());L&&(nn=a.createElement("span",{className:"".concat(i,"-suffix")},L)),V&&(J$(je,0)&&!Se[0]||J$(je,1)&&!Se[1])&&(rn=a.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation();var t=je;Se[0]||(t=X$(t,null,0)),Se[1]||(t=X$(t,null,1)),nt(t,null),et(!1,Ce)},className:"".concat(i,"-clear")},z||a.createElement("span",{className:"".concat(i,"-clear-btn")})));var an={size:E$(k,_e[0],h)},un=0,ln=0;he.current&&ge.current&&me.current&&(0===Ce?ln=he.current.offsetWidth:(un=Zt,ln=ge.current.offsetWidth));var cn="rtl"===ue?{right:un}:{left:un};return a.createElement(n$.Provider,{value:{operationRef:Oe,hideHeader:"time"===k,onDateMouseEnter:function(e){Ot(X$(Me,e,Ce)),0===Ce?jt(e):Ft(e)},onDateMouseLeave:function(){Ot(X$(Me,null,Ce)),0===Ce?Dt():It()},hideRanges:!0,onSelect:function(e,t){var n=X$(Me,e,Ce);"submit"===t||"key"!==t&&!de?(nt(n,Ce),0===Ce?Dt():It()):Te(n)},open:$e}},a.createElement(jJ,{visible:$e,popupElement:on,popupStyle:s,prefixCls:i,dropdownClassName:d,dropdownAlign:p,getPopupContainer:v,transitionName:f,range:!0,direction:ue},a.createElement("div",e$({ref:pe,className:I()(i,"".concat(i,"-range"),c,(t={},il(t,"".concat(i,"-disabled"),Se[0]&&Se[1]),il(t,"".concat(i,"-focused"),0===Ce?Lt:$t),il(t,"".concat(i,"-rtl"),"rtl"===ue),t)),style:l,onClick:function(e){ne&&ne(e),$e||ye.current.contains(e.target)||be.current.contains(e.target)||(Se[0]?Se[1]||tt(1):tt(0))},onMouseEnter:ee,onMouseLeave:te,onMouseDown:function(e){Z&&Z(e),!$e||!Lt&&!$t||ye.current.contains(e.target)||be.current.contains(e.target)||e.preventDefault()},onMouseUp:Q},Y$(e)),a.createElement("div",{className:I()("".concat(i,"-input"),(n={},il(n,"".concat(i,"-input-active"),0===Ce),il(n,"".concat(i,"-input-placeholder"),!!xt),n)),ref:he},a.createElement("input",e$({id:u,disabled:Se[0],readOnly:H||"function"==typeof _e[0]||!zt,value:xt||pt,onChange:function(e){vt(e.target.value)},autoFocus:y,placeholder:J$(m,0)||"",ref:ye},Bt,an,{autoComplete:se}))),a.createElement("div",{className:"".concat(i,"-range-separator"),ref:me},S),a.createElement("div",{className:I()("".concat(i,"-input"),(r={},il(r,"".concat(i,"-input-active"),1===Ce),il(r,"".concat(i,"-input-placeholder"),!!Rt),r)),ref:ge},a.createElement("input",e$({disabled:Se[1],readOnly:H||"function"==typeof _e[0]||!Gt,value:Rt||mt,onChange:function(e){yt(e.target.value)},placeholder:J$(m,1)||"",ref:be},qt,an,{autoComplete:se}))),a.createElement("div",{className:"".concat(i,"-active-bar"),style:GW(GW({},cn),{},{width:ln,position:"absolute"})}),nn,rn)))}var LJ=function(e){jd(n,e);var t=QW(n);function n(){var e;sl(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=a.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return ll(n,[{key:"render",value:function(){return a.createElement(VJ,e$({},this.props,{pickerRef:this.pickerRef}))}}]),n}(a.Component);function zJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||HJ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UJ(e){return function(e){if(Array.isArray(e))return qJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||HJ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HJ(e,t){if(e){if("string"==typeof e)return qJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qJ(e,t):void 0}}function qJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var WJ=u.a.createContext(null);function $J(e,t){var n={rafId:null,timeoutId:null};return n.rafId=window.requestAnimationFrame((function(){n.timeoutId=setTimeout(e,t)})),n}function GJ(e){var t=e.timeoutId,n=e.rafId;window.clearTimeout(t),window.cancelAnimationFrame(n)}function KJ(e,t){return function(t){var n=u.a.useContext(WJ),r=(null==n?void 0:n.register)||$J,o=null==n?void 0:n.next,i=(null==n?void 0:n.cleanUp)||GJ,a=zJ(u.a.useState(!1),2),l=a[0],c=a[1];return u.a.useEffect((function(){var e=r((function(){return c(!0)}));return function(){return i(e)}}),[]),u.a.useEffect((function(){l&&"function"==typeof o&&o()}),[l]),l?u.a.createElement(e,t):null}}function YJ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JJ(e,t){return e(t={exports:{}},t.exports),t.exports}var XJ=JJ((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,s=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===Ln(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case d:case i:case u:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case h:case l:return e;default:return t}}case o:return t}}}function _(e){return w(e)===d}t.typeOf=w,t.AsyncMode=s,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=g,t.Memo=h,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===u||e===a||e===p||e===v||"object"===Ln(e)&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===m||e.$$typeof===y||e.$$typeof===b)},t.isAsyncMode=function(e){return _(e)||w(e)===s},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===Ln(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===h},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p}}));YJ(XJ),XJ.typeOf,XJ.AsyncMode,XJ.ConcurrentMode,XJ.ContextConsumer,XJ.ContextProvider,XJ.Element,XJ.ForwardRef,XJ.Fragment,XJ.Lazy,XJ.Memo,XJ.Portal,XJ.Profiler,XJ.StrictMode,XJ.Suspense,XJ.isValidElementType,XJ.isAsyncMode,XJ.isConcurrentMode,XJ.isContextConsumer,XJ.isContextProvider,XJ.isElement,XJ.isForwardRef,XJ.isFragment,XJ.isLazy,XJ.isMemo,XJ.isPortal,XJ.isProfiler,XJ.isStrictMode,XJ.isSuspense;var ZJ=JJ((function(e,t){}));YJ(ZJ),ZJ.typeOf,ZJ.AsyncMode,ZJ.ConcurrentMode,ZJ.ContextConsumer,ZJ.ContextProvider,ZJ.Element,ZJ.ForwardRef,ZJ.Fragment,ZJ.Lazy,ZJ.Memo,ZJ.Portal,ZJ.Profiler,ZJ.StrictMode,ZJ.Suspense,ZJ.isValidElementType,ZJ.isAsyncMode,ZJ.isConcurrentMode,ZJ.isContextConsumer,ZJ.isContextProvider,ZJ.isElement,ZJ.isForwardRef,ZJ.isFragment,ZJ.isLazy,ZJ.isMemo,ZJ.isPortal,ZJ.isProfiler,ZJ.isStrictMode,ZJ.isSuspense,JJ((function(e){e.exports=XJ}));Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()||Object.assign;function QJ(){}function eX(){}Function.call.bind(Object.prototype.hasOwnProperty),eX.resetWarningCache=QJ;var tX=JJ((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:eX,resetWarningCache:QJ};return n.PropTypes=n,n}()})),nX=0,rX=1,oX=2,iX="sequential",aX="sync",uX="async-concurrent";function lX(e){var t=e.delay,n=void 0===t?0:t,r=e.batchSize,o=e.mode,i=void 0===o?iX:o,a=e.children,l=u.a.useRef(nX),c=u.a.useRef(0),s=u.a.useRef([]),d=u.a.useRef([]),f=u.a.useRef(n);f.current!==n&&(f.current=n);var p=u.a.useRef(i);p.current!==i&&(p.current=i);var v=u.a.useRef(r);function h(e){s.current=s.current.filter((function(t){return t.index!==e.index})),d.current=d.current.filter((function(t){return t.index!==e.index})),0===d.current.length&&l.current!==rX&&(l.current=nX,b())}function g(e){e.work(),e.done=!0,h(e)}function m(){l.current!==rX&&(l.current=oX,d.current.forEach((function(e){e.rafId=window.requestAnimationFrame((function(){e.timeoutId=setTimeout((function(){return g(e)}),f.current)}))})))}function y(){l.current!==rX&&(l.current=oX,d.current.forEach(g))}function b(){l.current===nX&&s.current.length>0&&function(){if(0!==s.current.length)if(l.current=oX,p.current===iX){if(0===d.current.length){var e=s.current[0];e.ready=!0,d.current.push(e)}m()}else if(p.current===aX){if(0===d.current.length){var t,n=s.current.slice(0,v.current||s.current.length);(t=d.current).push.apply(t,UJ(n)),d.current.forEach((function(e){e.ready=!0}))}setTimeout(y,f.current)}else if(p.current===uX){if(0===d.current.length){var r,o=s.current.slice(0,v.current||s.current.length);(r=d.current).push.apply(r,UJ(o)),d.current.forEach((function(e){e.ready=!0}))}m()}}()}return v.current!==r&&(v.current=r),u.a.useEffect((function(){b()})),u.a.createElement(WJ.Provider,{value:{next:b,pause:function(){l.current=rX},resume:function(){l.current=nX,b()},cleanUp:function(e){var t=d.current.find((function(t){return t.index===e}));t&&t.ready&&!t.done&&(window.cancelAnimationFrame(null==t?void 0:t.rafId),clearTimeout(null==t?void 0:t.timeoutId)),h({index:e})},register:function(e){var t=function(e,t){return{work:e,index:t,ready:!1,done:!1,timeoutId:null,rafId:null}}(e,++c.current);return s.current.push(t),1===s.current.length&&setTimeout(b),t.index}}},a)}lX.propTypes={children:tX.any,delay:tX.number,batchSize:tX.number,mode:tX.oneOf(["sequential","sync","async-concurrent"])};var cX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sX=function(){return sX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sX.apply(this,arguments)},dX={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},fX={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},pX={width:"20px",height:"20px",position:"absolute"},vX={top:sX(sX({},dX),{top:"-5px"}),right:sX(sX({},fX),{left:void 0,right:"-5px"}),bottom:sX(sX({},dX),{top:void 0,bottom:"-5px"}),left:sX(sX({},fX),{left:"-5px"}),topRight:sX(sX({},pX),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:sX(sX({},pX),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:sX(sX({},pX),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:sX(sX({},pX),{left:"-10px",top:"-10px",cursor:"nw-resize"})},hX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return cX(t,e),t.prototype.render=function(){return a.createElement("div",{className:this.props.className||"",style:sX(sX({position:"absolute",userSelect:"none"},vX[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(a.PureComponent),gX=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mX=function(){return mX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mX.apply(this,arguments)},yX={width:"auto",height:"auto"},bX=function(e,t,n){return Math.max(Math.min(e,n),t)},wX=function(e,t){return Math.round(e/t)*t},_X=function(e,t){return new RegExp(e,"i").test(t)},kX=function(e){return Boolean(e.touches&&e.touches.length)},CX=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,o){return Math.abs(r-e)<Math.abs(t[n]-e)?o:n}),0),o=Math.abs(t[r]-e);return 0===n||o<n?t[r]:e},EX=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},OX=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},SX=["as","ref","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],xX="__resizable_base__",jX=function(e){function t(t){var n,r,o,i,a=e.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.appendBase=function(){if(!a.resizable||!a.window)return null;var e=a.parentNode;if(!e)return null;var t=a.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(xX):t.className+=xX,e.appendChild(t),t},a.removeBase=function(e){var t=a.parentNode;t&&t.removeChild(e)},a.state={isResizing:!1,width:null!==(r=null===(n=a.propsSize)||void 0===n?void 0:n.width)&&void 0!==r?r:"auto",height:null!==(i=null===(o=a.propsSize)||void 0===o?void 0:o.height)&&void 0!==i?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return gX(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||yX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,o=this.resizable.style.position;"relative"!==o&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=o}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){var n;if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null===(n=e.propsSize[t])||void 0===n?void 0:n.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var r=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/r[t]*100+"%"}return EX(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?EX(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?EX(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,o=this.props.boundsByDirection,i=this.state.direction,a=o&&_X("left",i),u=o&&_X("top",i);if("parent"===this.props.bounds){var l=this.parentNode;l&&(n=a?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),r=u?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n,r=this.props.scale||1,o=(n=this.props.resizeRatio||1,Array.isArray(n)?n:[n,n]),i=o[0],a=o[1],u=this.state,l=u.direction,c=u.original,s=this.props,d=s.lockAspectRatio,f=s.lockAspectRatioExtraHeight,p=s.lockAspectRatioExtraWidth,v=c.width,h=c.height,g=f||0,m=p||0;return _X("right",l)&&(v=c.width+(e-c.x)*i/r,d&&(h=(v-m)/this.ratio+g)),_X("left",l)&&(v=c.width-(e-c.x)*i/r,d&&(h=(v-m)/this.ratio+g)),_X("bottom",l)&&(h=c.height+(t-c.y)*a/r,d&&(v=(h-g)*this.ratio+m)),_X("top",l)&&(h=c.height-(t-c.y)*a/r,d&&(v=(h-g)*this.ratio+m)),{newWidth:v,newHeight:h}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var o=this.props,i=o.lockAspectRatio,a=o.lockAspectRatioExtraHeight,u=o.lockAspectRatioExtraWidth,l=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,s=void 0===r.height?10:r.height,d=void 0===n.height||n.height<0?t:n.height,f=a||0,p=u||0;if(i){var v=(s-f)*this.ratio+p,h=(d-f)*this.ratio+p,g=(l-p)/this.ratio+f,m=(c-p)/this.ratio+f,y=Math.max(l,v),b=Math.min(c,h),w=Math.max(s,g),_=Math.min(d,m);e=bX(e,y,b),t=bX(t,w,_)}else e=bX(e,l,c),t=bX(t,s,d);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),o=r.left,i=r.top,a=r.right,u=r.bottom;this.resizableLeft=o,this.resizableRight=a,this.resizableTop=i,this.resizableBottom=u}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,o=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,o=e.nativeEvent.clientY):e.nativeEvent&&kX(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,o=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var i=this.window.getComputedStyle(this.resizable);if("auto"!==i.flexBasis){var a=this.parentNode;if(a){var u=this.window.getComputedStyle(a).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",n=i.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:r,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:mX(mX({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(l)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&kX(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var n=this.props,r=n.maxWidth,o=n.maxHeight,i=n.minWidth,a=n.minHeight,u=kX(e)?e.touches[0].clientX:e.clientX,c=kX(e)?e.touches[0].clientY:e.clientY,s=this.state,d=s.direction,f=s.original,p=s.width,v=s.height,h=this.getParentSize(),g=function(e,t,n,r,o,i,a){return r=OX(r,e.width,t,n),o=OX(o,e.height,t,n),i=OX(i,e.width,t,n),a=OX(a,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===o?void 0:Number(o),minWidth:void 0===i?void 0:Number(i),minHeight:void 0===a?void 0:Number(a)}}(h,this.window.innerWidth,this.window.innerHeight,r,o,i,a);r=g.maxWidth,o=g.maxHeight,i=g.minWidth,a=g.minHeight;var m=this.calculateNewSizeFromDirection(u,c),y=m.newHeight,b=m.newWidth,w=this.calculateNewMaxFromBoundary(r,o);this.props.snap&&this.props.snap.x&&(b=CX(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=CX(y,this.props.snap.y,this.props.snapGap));var _=this.calculateNewSizeFromAspectRatio(b,y,{width:w.maxWidth,height:w.maxHeight},{width:i,height:a});if(b=_.newWidth,y=_.newHeight,this.props.grid){var k=wX(b,this.props.grid[0]),C=wX(y,this.props.grid[1]),E=this.props.snapGap||0;b=0===E||Math.abs(k-b)<=E?k:b,y=0===E||Math.abs(C-y)<=E?C:y}var O={width:b-f.width,height:y-f.height};if(p&&"string"==typeof p)if(p.endsWith("%"))b=b/h.width*100+"%";else if(p.endsWith("vw")){b=b/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){b=b/this.window.innerHeight*100+"vh"}if(v&&"string"==typeof v)if(v.endsWith("%"))y=y/h.height*100+"%";else if(v.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(v.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var S={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?S.flexBasis=S.width:"column"===this.flexDir&&(S.flexBasis=S.height);var x=this.state.width!==S.width,j=this.state.height!==S.height,D=this.state.flexBasis!==S.flexBasis,A=x||j||D;A&&Object(l.flushSync)((function(){t.setState(S)})),this.props.onResize&&A&&this.props.onResize(e,d,this.resizable,O)}},t.prototype.onMouseUp=function(e){var t,n,r=this.state,o=r.isResizing,i=r.direction,a=r.original;if(o&&this.resizable){var u={width:this.size.width-a.width,height:this.size.height-a.height};this.props.onResizeStop&&this.props.onResizeStop(e,i,this.resizable,u),this.props.size&&this.setState({width:null!==(t=this.props.size.width)&&void 0!==t?t:"auto",height:null!==(n=this.props.size.height)&&void 0!==n?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:mX(mX({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){var t,n;this.setState({width:null!==(t=e.width)&&void 0!==t?t:"auto",height:null!==(n=e.height)&&void 0!==n?n:"auto"})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,o=t.handleClasses,i=t.handleWrapperStyle,u=t.handleWrapperClass,l=t.handleComponent;if(!n)return null;var c=Object.keys(n).map((function(t){return!1!==n[t]?a.createElement(hX,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:o&&o[t]},l&&l[t]?l[t]:null):null}));return a.createElement("div",{className:u,style:i},c)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==SX.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=mX(mX(mX({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return a.createElement(r,mX({style:n,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)}}),this.state.isResizing&&a.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(a.PureComponent),DX="object"==Ln(_n)&&_n&&_n.Object===Object&&_n,AX=DX,RX="object"==("undefined"==typeof self?"undefined":Ln(self))&&self&&self.Object===Object&&self,FX=AX||RX||Function("return this")(),IX=FX.Symbol,PX=IX,MX=Object.prototype,TX=MX.hasOwnProperty,NX=MX.toString,BX=PX?PX.toStringTag:void 0;var VX=function(e){var t=TX.call(e,BX),n=e[BX];try{e[BX]=void 0;var r=!0}catch(e){}var o=NX.call(e);return r&&(t?e[BX]=n:delete e[BX]),o},LX=Object.prototype.toString;var zX=function(e){return LX.call(e)},UX=VX,HX=zX,qX=IX?IX.toStringTag:void 0;var WX=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qX&&qX in Object(e)?UX(e):HX(e)};var $X=function(e){return null!=e&&"object"==Ln(e)},GX=WX,KX=$X;var YX=function(e){return"symbol"==Ln(e)||KX(e)&&"[object Symbol]"==GX(e)},JX=YX;var XX=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===u?a==a&&!JX(a):n(a,u)))var u=a,l=i}return l};var ZX=function(e,t){return e>t};var QX=function(e){return e},eZ=XX,tZ=ZX,nZ=QX;const rZ=kn((function(e){return e&&e.length?eZ(e,nZ,tZ):void 0}));var oZ=function(e){var t=Ln(e);return null!=e&&("object"==t||"function"==t)},iZ=WX,aZ=oZ;var uZ=function(e){if(!aZ(e))return!1;var t=iZ(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},lZ=FX["__core-js_shared__"],cZ=function(){var e=/[^.]+$/.exec(lZ&&lZ.keys&&lZ.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var sZ=function(e){return!!cZ&&cZ in e},dZ=Function.prototype.toString;var fZ=function(e){if(null!=e){try{return dZ.call(e)}catch(e){}try{return e+""}catch(e){}}return""},pZ=uZ,vZ=sZ,hZ=oZ,gZ=fZ,mZ=/^\[object .+?Constructor\]$/,yZ=Function.prototype,bZ=Object.prototype,wZ=yZ.toString,_Z=bZ.hasOwnProperty,kZ=RegExp("^"+wZ.call(_Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var CZ=function(e){return!(!hZ(e)||vZ(e))&&(pZ(e)?kZ:mZ).test(gZ(e))};var EZ=CZ,OZ=function(e,t){return null==e?void 0:e[t]};var SZ=function(e,t){var n=OZ(e,t);return EZ(n)?n:void 0},xZ=SZ,jZ=function(){try{var e=xZ(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),DZ=jZ,AZ=DZ;var RZ=function(e,t,n){"__proto__"==t&&AZ?AZ(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var FZ=function(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r};var IZ=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var l=a[e?u:++o];if(!1===n(i[l],l,i))break}return t}}();var PZ=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},MZ=WX,TZ=$X;var NZ=function(e){return TZ(e)&&"[object Arguments]"==MZ(e)},BZ=NZ,VZ=$X,LZ=Object.prototype,zZ=LZ.hasOwnProperty,UZ=LZ.propertyIsEnumerable,HZ=BZ(function(){return arguments}())?BZ:function(e){return VZ(e)&&zZ.call(e,"callee")&&!UZ.call(e,"callee")},qZ=HZ,WZ=Array.isArray,$Z={exports:{}};var GZ=function(){return!1};!function(e,t){var n=FX,r=GZ,o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||r;e.exports=u}($Z,$Z.exports);var KZ=$Z.exports,YZ=/^(?:0|[1-9]\d*)$/;var JZ=function(e,t){var n=Ln(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&YZ.test(e))&&e>-1&&e%1==0&&e<t};var XZ=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ZZ=WX,QZ=XZ,eQ=$X,tQ={};tQ["[object Float32Array]"]=tQ["[object Float64Array]"]=tQ["[object Int8Array]"]=tQ["[object Int16Array]"]=tQ["[object Int32Array]"]=tQ["[object Uint8Array]"]=tQ["[object Uint8ClampedArray]"]=tQ["[object Uint16Array]"]=tQ["[object Uint32Array]"]=!0,tQ["[object Arguments]"]=tQ["[object Array]"]=tQ["[object ArrayBuffer]"]=tQ["[object Boolean]"]=tQ["[object DataView]"]=tQ["[object Date]"]=tQ["[object Error]"]=tQ["[object Function]"]=tQ["[object Map]"]=tQ["[object Number]"]=tQ["[object Object]"]=tQ["[object RegExp]"]=tQ["[object Set]"]=tQ["[object String]"]=tQ["[object WeakMap]"]=!1;var nQ=function(e){return eQ(e)&&QZ(e.length)&&!!tQ[ZZ(e)]};var rQ=function(e){return function(t){return e(t)}},oQ={exports:{}};!function(e,t){var n=DX,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(oQ,oQ.exports);var iQ=oQ.exports,aQ=nQ,uQ=rQ,lQ=iQ&&iQ.isTypedArray,cQ=lQ?uQ(lQ):aQ,sQ=PZ,dQ=qZ,fQ=WZ,pQ=KZ,vQ=JZ,hQ=cQ,gQ=Object.prototype.hasOwnProperty;var mQ=function(e,t){var n=fQ(e),r=!n&&dQ(e),o=!n&&!r&&pQ(e),i=!n&&!r&&!o&&hQ(e),a=n||r||o||i,u=a?sQ(e.length,String):[],l=u.length;for(var c in e)!t&&!gQ.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vQ(c,l))||u.push(c);return u},yQ=Object.prototype;var bQ=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||yQ)};var wQ=function(e,t){return function(n){return e(t(n))}},_Q=wQ(Object.keys,Object),kQ=bQ,CQ=_Q,EQ=Object.prototype.hasOwnProperty;var OQ=uZ,SQ=XZ;var xQ=function(e){return null!=e&&SQ(e.length)&&!OQ(e)},jQ=mQ,DQ=function(e){if(!kQ(e))return CQ(e);var t=[];for(var n in Object(e))EQ.call(e,n)&&"constructor"!=n&&t.push(n);return t},AQ=xQ;var RQ=function(e){return AQ(e)?jQ(e):DQ(e)},FQ=IZ,IQ=RQ;var PQ=xQ;var MQ=function(e,t){return function(n,r){if(null==n)return n;if(!PQ(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}},TQ=MQ((function(e,t){return e&&FQ(e,t,IQ)})),NQ=TQ;var BQ=function(e,t,n,r){return NQ(e,(function(e,o,i){t(r,e,n(e),i)})),r};var VQ=function(){this.__data__=[],this.size=0};var LQ=function(e,t){return e===t||e!=e&&t!=t},zQ=LQ;var UQ=function(e,t){for(var n=e.length;n--;)if(zQ(e[n][0],t))return n;return-1},HQ=UQ,qQ=Array.prototype.splice;var WQ=UQ;var $Q=UQ;var GQ=UQ;var KQ=function(e,t){var n=this.__data__,r=GQ(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},YQ=VQ,JQ=function(e){var t=this.__data__,n=HQ(t,e);return!(n<0)&&(n==t.length-1?t.pop():qQ.call(t,n,1),--this.size,!0)},XQ=function(e){var t=this.__data__,n=WQ(t,e);return n<0?void 0:t[n][1]},ZQ=function(e){return $Q(this.__data__,e)>-1},QQ=KQ;function e0(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}e0.prototype.clear=YQ,e0.prototype.delete=JQ,e0.prototype.get=XQ,e0.prototype.has=ZQ,e0.prototype.set=QQ;var t0=e0,n0=t0;var r0=function(){this.__data__=new n0,this.size=0};var o0=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var i0=function(e){return this.__data__.get(e)};var a0=function(e){return this.__data__.has(e)},u0=SZ(FX,"Map"),l0=SZ(Object,"create"),c0=l0;var s0=function(){this.__data__=c0?c0(null):{},this.size=0};var d0=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},f0=l0,p0=Object.prototype.hasOwnProperty;var v0=function(e){var t=this.__data__;if(f0){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return p0.call(t,e)?t[e]:void 0},h0=l0,g0=Object.prototype.hasOwnProperty;var m0=l0;var y0=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=m0&&void 0===t?"__lodash_hash_undefined__":t,this},b0=s0,w0=d0,_0=v0,k0=function(e){var t=this.__data__;return h0?void 0!==t[e]:g0.call(t,e)},C0=y0;function E0(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}E0.prototype.clear=b0,E0.prototype.delete=w0,E0.prototype.get=_0,E0.prototype.has=k0,E0.prototype.set=C0;var O0=E0,S0=t0,x0=u0;var j0=function(e){var t=Ln(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},D0=j0;var A0=function(e,t){var n=e.__data__;return D0(t)?n["string"==typeof t?"string":"hash"]:n.map},R0=A0;var F0=A0;var I0=A0;var P0=A0;var M0=function(e,t){var n=P0(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},T0=function(){this.size=0,this.__data__={hash:new O0,map:new(x0||S0),string:new O0}},N0=function(e){var t=R0(this,e).delete(e);return this.size-=t?1:0,t},B0=function(e){return F0(this,e).get(e)},V0=function(e){return I0(this,e).has(e)},L0=M0;function z0(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}z0.prototype.clear=T0,z0.prototype.delete=N0,z0.prototype.get=B0,z0.prototype.has=V0,z0.prototype.set=L0;var U0=z0,H0=t0,q0=u0,W0=U0;var $0=function(e,t){var n=this.__data__;if(n instanceof H0){var r=n.__data__;if(!q0||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new W0(r)}return n.set(e,t),this.size=n.size,this},G0=t0,K0=r0,Y0=o0,J0=i0,X0=a0,Z0=$0;function Q0(e){var t=this.__data__=new G0(e);this.size=t.size}Q0.prototype.clear=K0,Q0.prototype.delete=Y0,Q0.prototype.get=J0,Q0.prototype.has=X0,Q0.prototype.set=Z0;var e1=Q0;var t1=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var n1=function(e){return this.__data__.has(e)},r1=U0,o1=t1,i1=n1;function a1(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r1;++t<n;)this.add(e[t])}a1.prototype.add=a1.prototype.push=o1,a1.prototype.has=i1;var u1=a1;var l1=function(e,t){return e.has(t)},c1=u1,s1=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},d1=l1;var f1=function(e,t,n,r,o,i){var a=1&n,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,p=2&n?new c1:void 0;for(i.set(e,t),i.set(t,e);++d<u;){var v=e[d],h=t[d];if(r)var g=a?r(h,v,d,t,e,i):r(v,h,d,e,t,i);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!s1(t,(function(e,t){if(!d1(p,t)&&(v===e||o(v,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(v!==h&&!o(v,h,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f};var p1=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var v1=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},h1=FX.Uint8Array,g1=LQ,m1=f1,y1=p1,b1=v1,w1=IX?IX.prototype:void 0,_1=w1?w1.valueOf:void 0;var k1=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new h1(e),new h1(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return g1(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=y1;case"[object Set]":var l=1&r;if(u||(u=b1),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var s=m1(u(e),u(t),r,o,i,a);return a.delete(e),s;case"[object Symbol]":if(_1)return _1.call(e)==_1.call(t)}return!1};var C1=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},E1=C1,O1=WZ;var S1=function(e,t,n){var r=t(e);return O1(e)?r:E1(r,n(e))};var x1=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var j1=x1,D1=function(){return[]},A1=Object.prototype.propertyIsEnumerable,R1=Object.getOwnPropertySymbols,F1=S1,I1=R1?function(e){return null==e?[]:(e=Object(e),j1(R1(e),(function(t){return A1.call(e,t)})))}:D1,P1=RQ;var M1=function(e){return F1(e,P1,I1)},T1=Object.prototype.hasOwnProperty;var N1=function(e,t,n,r,o,i){var a=1&n,u=M1(e),l=u.length;if(l!=M1(t).length&&!a)return!1;for(var c=l;c--;){var s=u[c];if(!(a?s in t:T1.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<l;){var h=e[s=u[c]],g=t[s];if(r)var m=a?r(g,h,s,t,e,i):r(h,g,s,e,t,i);if(!(void 0===m?h===g||o(h,g,n,r,i):m)){p=!1;break}v||(v="constructor"==s)}if(p&&!v){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},B1=SZ(FX,"DataView"),V1=SZ(FX,"Promise"),L1=SZ(FX,"Set"),z1=B1,U1=u0,H1=V1,q1=L1,W1=SZ(FX,"WeakMap"),$1=WX,G1=fZ,K1="[object Map]",Y1="[object Promise]",J1="[object Set]",X1="[object WeakMap]",Z1="[object DataView]",Q1=G1(z1),e2=G1(U1),t2=G1(H1),n2=G1(q1),r2=G1(W1),o2=$1;(z1&&o2(new z1(new ArrayBuffer(1)))!=Z1||U1&&o2(new U1)!=K1||H1&&o2(H1.resolve())!=Y1||q1&&o2(new q1)!=J1||W1&&o2(new W1)!=X1)&&(o2=function(e){var t=$1(e),n="[object Object]"==t?e.constructor:void 0,r=n?G1(n):"";if(r)switch(r){case Q1:return Z1;case e2:return K1;case t2:return Y1;case n2:return J1;case r2:return X1}return t});var i2=e1,a2=f1,u2=k1,l2=N1,c2=o2,s2=WZ,d2=KZ,f2=cQ,p2="[object Arguments]",v2="[object Array]",h2="[object Object]",g2=Object.prototype.hasOwnProperty;var m2=function(e,t,n,r,o,i){var a=s2(e),u=s2(t),l=a?v2:c2(e),c=u?v2:c2(t),s=(l=l==p2?h2:l)==h2,d=(c=c==p2?h2:c)==h2,f=l==c;if(f&&d2(e)){if(!d2(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new i2),a||f2(e)?a2(e,t,n,r,o,i):u2(e,t,l,n,r,o,i);if(!(1&n)){var p=s&&g2.call(e,"__wrapped__"),v=d&&g2.call(t,"__wrapped__");if(p||v){var h=p?e.value():e,g=v?t.value():t;return i||(i=new i2),o(h,g,n,r,i)}}return!!f&&(i||(i=new i2),l2(e,t,n,r,o,i))},y2=$X;var b2=function e(t,n,r,o,i){return t===n||(null==t||null==n||!y2(t)&&!y2(n)?t!=t&&n!=n:m2(t,n,r,o,e,i))},w2=e1,_2=b2;var k2=oZ;var C2=function(e){return e==e&&!k2(e)},E2=C2,O2=RQ;var S2=function(e){for(var t=O2(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,E2(o)]}return t};var x2=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},j2=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var u=n[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var l=(u=n[o])[0],c=e[l],s=u[1];if(a&&u[2]){if(void 0===c&&!(l in e))return!1}else{var d=new w2;if(r)var f=r(c,s,l,e,t,d);if(!(void 0===f?_2(s,c,3,r,d):f))return!1}}return!0},D2=S2,A2=x2;var R2=function(e){var t=D2(e);return 1==t.length&&t[0][2]?A2(t[0][0],t[0][1]):function(n){return n===e||j2(n,e,t)}},F2=WZ,I2=YX,P2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M2=/^\w*$/;var T2=function(e,t){if(F2(e))return!1;var n=Ln(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!I2(e))||(M2.test(e)||!P2.test(e)||null!=t&&e in Object(t))},N2=U0;function B2(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(B2.Cache||N2),n}B2.Cache=N2;var V2=B2;var L2=function(e){var t=V2(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},z2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U2=/\\(\\)?/g,H2=L2((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(z2,(function(e,n,r,o){t.push(r?o.replace(U2,"$1"):n||e)})),t}));var q2=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},W2=q2,$2=WZ,G2=YX,K2=IX?IX.prototype:void 0,Y2=K2?K2.toString:void 0;var J2=function e(t){if("string"==typeof t)return t;if($2(t))return W2(t,e)+"";if(G2(t))return Y2?Y2.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},X2=J2;var Z2=function(e){return null==e?"":X2(e)},Q2=WZ,e5=T2,t5=H2,n5=Z2;var r5=function(e,t){return Q2(e)?e:e5(e,t)?[e]:t5(n5(e))},o5=YX;var i5=function(e){if("string"==typeof e||o5(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},a5=r5,u5=i5;var l5=function(e,t){for(var n=0,r=(t=a5(t,e)).length;null!=e&&n<r;)e=e[u5(t[n++])];return n&&n==r?e:void 0},c5=l5;var s5=function(e,t,n){var r=null==e?void 0:c5(e,t);return void 0===r?n:r};const d5=kn(s5);var f5=r5,p5=qZ,v5=WZ,h5=JZ,g5=XZ,m5=i5;var y5=function(e,t){return null!=e&&t in Object(e)},b5=function(e,t,n){for(var r=-1,o=(t=f5(t,e)).length,i=!1;++r<o;){var a=m5(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&g5(o)&&h5(a,o)&&(v5(e)||p5(e))};var w5=b2,_5=s5,k5=function(e,t){return null!=e&&b5(e,t,y5)},C5=T2,E5=C2,O5=x2,S5=i5;var x5=l5;var j5=function(e){return function(t){return null==t?void 0:t[e]}},D5=function(e){return function(t){return x5(t,e)}},A5=T2,R5=i5;var F5=R2,I5=function(e,t){return C5(e)&&E5(t)?O5(S5(e),t):function(n){var r=_5(n,e);return void 0===r&&r===t?k5(n,e):w5(t,r,3)}},P5=QX,M5=WZ,T5=function(e){return A5(e)?j5(R5(e)):D5(e)};var N5=function(e){return"function"==typeof e?e:null==e?P5:"object"==Ln(e)?M5(e)?I5(e[0],e[1]):F5(e):T5(e)},B5=FZ,V5=BQ,L5=N5,z5=WZ;var U5=function(e,t){return function(n,r){var o=z5(n)?B5:V5,i=t?t():{};return o(n,e,L5(r),i)}},H5=RZ,q5=U5((function(e,t,n){H5(e,n,t)}));const W5=kn(q5);var $5=qZ,G5=WZ,K5=IX?IX.isConcatSpreadable:void 0;var Y5=function(e){return G5(e)||$5(e)||!!(K5&&e&&e[K5])},J5=C1,X5=Y5;var Z5=function e(t,n,r,o,i){var a=-1,u=t.length;for(r||(r=X5),i||(i=[]);++a<u;){var l=t[a];n>0&&r(l)?n>1?e(l,n-1,r,o,i):J5(i,l):o||(i[i.length]=l)}return i},Q5=TQ,e3=xQ;var t3=function(e,t){var n=-1,r=e3(e)?Array(e.length):[];return Q5(e,(function(e,o,i){r[++n]=t(e,o,i)})),r};var n3=YX;var r3=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=n3(e),a=void 0!==t,u=null===t,l=t==t,c=n3(t);if(!u&&!c&&!i&&e>t||i&&a&&l&&!u&&!c||r&&a&&l||!n&&l||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||u&&n&&o||!a&&o||!l)return-1}return 0},o3=r3;var i3=q2,a3=l5,u3=N5,l3=t3,c3=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},s3=rQ,d3=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,u=n.length;++r<a;){var l=o3(o[r],i[r]);if(l)return r>=u?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},f3=QX,p3=WZ;var v3=function(e,t,n){t=t.length?i3(t,(function(e){return p3(e)?function(t){return a3(t,1===e.length?e[0]:e)}:e})):[f3];var r=-1;t=i3(t,s3(u3));var o=l3(e,(function(e,n,o){return{criteria:i3(t,(function(t){return t(e)})),index:++r,value:e}}));return c3(o,(function(e,t){return d3(e,t,n)}))};var h3=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},g3=h3,m3=Math.max;var y3=function(e,t,n){return t=m3(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=m3(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(a),g3(e,this,u)}};var b3=function(e){return function(){return e}},w3=b3,_3=DZ,k3=_3?function(e,t){return _3(e,"toString",{configurable:!0,enumerable:!1,value:w3(t),writable:!0})}:QX,C3=k3,E3=Date.now;var O3=function(e){var t=0,n=0;return function(){var r=E3(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},S3=O3(C3),x3=QX,j3=y3,D3=S3;var A3=function(e,t){return D3(j3(e,t,x3),e+"")},R3=LQ,F3=xQ,I3=JZ,P3=oZ;var M3=function(e,t,n){if(!P3(n))return!1;var r=Ln(t);return!!("number"==r?F3(n)&&I3(t,n.length):"string"==r&&t in n)&&R3(n[t],e)},T3=Z5,N3=v3,B3=M3;const V3=kn(A3((function(e,t){if(null==e)return[];var n=t.length;return n>1&&B3(e,t[0],t[1])?t=[]:n>2&&B3(t[0],t[1],t[2])&&(t=[t[0]]),N3(e,T3(t,1),[])})));var L3=/\s/;var z3=function(e){for(var t=e.length;t--&&L3.test(e.charAt(t)););return t},U3=/^\s+/;var H3=function(e){return e?e.slice(0,z3(e)+1).replace(U3,""):e},q3=oZ,W3=YX,$3=/^[-+]0x[0-9a-f]+$/i,G3=/^0b[01]+$/i,K3=/^0o[0-7]+$/i,Y3=parseInt;var J3=function(e){if("number"==typeof e)return e;if(W3(e))return NaN;if(q3(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=q3(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=H3(e);var n=G3.test(e);return n||K3.test(e)?Y3(e.slice(2),n?2:8):$3.test(e)?NaN:+e},X3=J3,Z3=1/0;var Q3=function(e){return e?(e=X3(e))===Z3||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},e6=Q3;var t6=function(e){var t=e6(e),n=t%1;return t==t?n?t-n:t:0},n6=t6;var r6=function(e){return"number"==typeof e&&e==n6(e)};const o6=kn(r6);function i6(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}var a6=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,u6=/^#+$/,l6=/^\d\.\d+[Ee]\+\d+$/,c6=String.fromCharCode(165),s6=String.fromCharCode(36),d6=String.fromCharCode(8364),f6=String.fromCharCode(163);function p6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e=function(e){return e.replace(/\\0022/g,"")}(e=function(e,t,n){var r=e.match(/<col[^>]*>/g),o=0;if(r){var i=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);i&&(o=parseInt(i[1],10))}if(o>n){var a=e.split("</tr>");e=(a=a.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(o-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var u=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(u&&u.length>t){var l=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!l)return"<table><tr><td></td></tr></table>";var c=l[l.length-1],s=e.lastIndexOf(c),d=e.slice(0,s+c.length);e=e.slice(s+c.length);var f={};u.forEach((function(e){f[e]=f[e]||{content:e,count:0},f[e].count+=1}));for(var p=Object.values(f),v=(p=V3(p,"count")).length-1;p[v];){var h=p[v];if(h.count>t){var g=h.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(g,"g"),"")}v--}e=d+e}return e}(e,200,200));var i=(new DOMParser).parseFromString(e,"text/html"),a=i.body,u=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++)t(e[o])&&r.push(e[o]);return r}(i.all,(function(e){return"STYLE"===e.tagName}));if(!a)return null;for(var l,c=a.firstChild,s=[],d=[],f={},p={},v=[],h={},g=!1;c;)if(m6(c)){var m=D6(c,s.length,u,o);m.mergeCells&&(d=d.concat(m.mergeCells)),m.startCell&&(l=m.startCell),m.selectOptions&&Object.assign(h,m.selectOptions),Object.assign(p,m.rows),m.columns&&Object.assign(f,m.columns),s=s.concat(m.table),m.cellsNeedFix&&(v=v.concat(m.cellsNeedFix)),c=j6(c),g=!1}else if(C6(c))_6(c)&&(c.innerHTML=""),y6(c)&&(c.innerHTML=c.innerHTML.replace(/\n/g,"<br/>")),c=c.firstChild||j6(c),g=!1;else if(w6(c)){var y=c.innerText.trim(),b=c.getAttribute("href");h6(s,s.length,y,b),g=!1,c=j6(c)}else if(b6(c)){var w=c.getAttribute("src");g6(s,s.length,w,o),g=!1,c=j6(c)}else if(O6(c))c=c.firstChild||j6(c);else if(S6(c))g=!1,c=j6(c);else if(x6(c)){var _=c.data;if(""!==_.trim()||!C6(c.parentNode))v6(s,g?s.length-1:s.length,_),g=!0;c=j6(c)}else c=j6(c);var k=function(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}(s);d=W5(d,(function(e){return"".concat(e.row,":").concat(e.col)}));var C=rZ(s.map((function(e){return e.length})))||20,E={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(s.length,r.rowCount):s.length,colCount:r?Math.max(C,r.colCount):C,data:k,mergeCells:d,rows:p,columns:f,filter:{},index:t,defaults:{}};return l&&(E.startCell=l),Object.keys(h).length>0&&(E.selectOptions=h),v.length>0&&(E.cellsNeedFix=v),E}function v6(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function h6(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function g6(e,t,n,r){n=n.replace(/\?x-oss-process=image\/resize.+/,""),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function m6(e){return"TABLE"===e.tagName}function y6(e){return"PRE"===e.tagName}function b6(e){return"IMG"===e.tagName}function w6(e){return"A"===e.tagName}function _6(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var k6=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function C6(e){return 1===e.nodeType&&k6.includes(e.tagName)}var E6=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function O6(e){return 1===e.nodeType&&E6.includes(e.tagName)}function S6(e){return"BR"===e.tagName}function x6(e){return 3===e.nodeType}function j6(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function D6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.cloneNode(!0);document.body.appendChild(o);var i=function(e,t){return function(e){for(var t,n=e.rows,r=n.length,o=[],i=[],a=0,u=0,l=0,c=0;c<r;c++){for(var s=n[c].cells,d=0,f=0;f<s.length;f++){var p=s[f],v=p.rowSpan,h=p.colSpan;a+=v*h,d+=h,v>1&&(u+=(v-1)*h)}i[c]=d,0===c&&(t=d),l=Math.max(d,l)}if(o6(a/t)&&t===l){var g=0;if(i.forEach((function(e){g+=l-e})),g!==u){var m=u-g;if(m&&o6(m/l)){for(var y=[],b=0;b<r;b++){for(var w=n[b].cells;o[b+y.length]===l;)y.push(b+y.length);for(var _=b+y.length,k=0;k<w.length;k++){var C=w[k],E=C.rowSpan,O=C.colSpan;if(E>1)for(var S=1;S<E;S++)o[_+S]=(o[_+S]||0)+O}}y.forEach((function(t){e.insertRow(t)}))}}}}(e),0===(r=(n=e).rows[0]).cells.length&&r.remove(),n.rows.length>1&&1===r.cells.length&&""===r.cells[0].innerText.trim()&&0===r.cells[0].getElementsByTagName("img").length&&1===r.cells[0].colSpan&&1===r.cells[0].rowSpan&&r.remove(),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var o=parseInt(n[1]);r=parseInt(r)/o||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var o=t.colSpan;t.setAttribute("colSpan",1);for(var i=1;i<o;i++){var a=t.cloneNode();e.insertBefore(a,t.nextSibling)}}})),n){var i=parseInt(n[1]);if(i<1e6)for(var a=1;a<i;a++){var u=e.cloneNode();e.parentNode.insertBefore(u,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,o=r.length,i=100,a=0;a<o;a++){var u=r[a].cells,l=u.length;n[a]=n[a]||[];for(var c=l>16300,s=0;s<l;s++){var d=u[s];if(c&&s>i&&""===d.innerHTML&&i6(d))break;i=Math.max(i,s);for(var f=d.rowSpan,p=void 0===f?1:f,v=d.colSpan,h=void 0===v?1:v,g=p>1||h>1,m=s;n[a][m];)m++;if(n[a][m]={rowSpan:p,colSpan:h,isMulti:g,element:d},g)for(var y=p;y>0;){for(var b=h;b>0;){if(1!==b||1!==y){var w=a+y-1,_=m+b-1;n[w]=n[w]||[],n[w][_]={isEmpty:!0,parent:{row:a,col:m}}}b--}y--}}}var k=n.map((function(e){return e.length})),C=Math.max.apply(Math,tl(k));return n.forEach((function(e,n){if(e.length<C)for(var r=C-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var o=0;o<C;o++)e[o]||(e[o]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:C,table:n}}(e,t);var n,r}(o,r),a={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(a,function(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n,o=e.match(t);if(o){var i=o[1].trim(),a=o[2];if(i.startsWith(".")){var u=a.match(/mso-number-format:(.+);(\n|$)/);u&&(r[i.substr(1)]=-1!==(n=(n=u[1]).replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==n.indexOf("Time")?"time":n.endsWith("%")?"percentage":-1!==n.indexOf(f6)?{name:"currency",symbol:f6}:-1!==n.indexOf(d6)?{name:"currency",symbol:d6}:-1!==n.indexOf(c6)?{name:"currency",symbol:c6}:n.match(/^@$/)?"text":-1!==n.indexOf("General")||-1!==n.indexOf("Standard")||-1!==n.indexOf("Fixed")?"auto":n.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?n.match(/(时|分|秒|s|h)/)?"datetime":n.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==n.indexOf(s6)?{name:"currency",symbol:s6}:"number")}}})),0===Object.keys(r).length?null:r}(e.innerHTML))}));var u={table:[]},l=o.querySelectorAll("col");if(l.length>0){var c={},s=0;l.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&s<i.cols;)c[s]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},s+=1,r+=1})),u.columns=c}var d=Array.from(o.rows);u.rows={},d.forEach((function(e,n){if(0===e.offsetHeight&&n!==d.length-1)u.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,o={size:r};24!==r&&(o.customSize=r),u.rows[n+t]=o}}));var f=o.getAttribute("data-startCell");if(f){var p=f.split(":");u.startCell={row:parseInt(p[0])||0,col:parseInt(p[1])||0}}var v=o.getAttribute("data-selectOptions");if(v)try{u.selectOptions=JSON.parse(decodeURIComponent(v))}catch(e){console.log(e)}return i.table.forEach((function(e,n){u.table[n]=[],e.forEach((function(e,o){if(e.element){var i=function(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if((o=r).class&&("link"===o.class?o.text&&o.url:"file"===o.class||"image"===o.class?o.name&&o.src:"checkbox"===o.class?void 0!==o.value:"select"===o.class?o.value&&(o.options||o.optionId):"mention"===o.class?o.value&&o.value[0].id&&o.value[0].login:"formula"===o.class&&void 0!==o.formula))return r}catch(o){console.log(o)}var o;for(var i=e.querySelectorAll("img"),a=i.length,u=0;u<a;u++){var l=i[u].getAttribute("src");if(l)return t?{class:"image",src:l,name:"image"}:{class:"image",status:"needUpload",originSrc:l,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n/g,"").replace(/<br>\s*/g,"\n");var c,s=e.innerHTML.replace(/<[^>]+>/g,"").trim();s="string"!=typeof(c=s)?c:c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var d=e.querySelector("a");return d&&d.getAttribute("href")?{class:"link",text:s.replace(/\n/g,""),url:d.getAttribute("href")}:(s.endsWith(" %")&&(s=s.replace(/ %$/,"%")),s)}(e.element,r),l=function(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),R6[t])return t;var r=Object.keys(R6).map((function(e){return parseInt(e,10)}));r.sort();for(var o=0;r[o];){if(r[o]>t)return r[o];o++}return r[o-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=A6[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=A6[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch(e){return null}}(e.element),c=function(e){var t=e.getAttribute("data-note");if(t)try{var n=JSON.parse(decodeURIComponent(t));if(n.text)return n}catch(e){console.log(e)}}(e.element),s={name:"auto"},d=!1;if(a){var f=e.element.classList&&e.element.classList[0];a[f]&&("object"===Ln(a[f])?Object.assign(s,a[f]):s.name=a[f],["currency","number","percentage"].includes(s.name)&&(s.decimal=2),u.table[n][o]=u.table[n][o]||{},u.table[n][o].type=s,["text","auto"].includes(s.name)||(d=!0))}l&&(u.table[n][o]=u.table[n][o]||{},u.table[n][o].style=l),c&&(u.table[n][o]=u.table[n][o]||{},u.table[n][o].note=c),void 0!==i&&""!==i?(u.table[n][o]=u.table[n][o]||{},u.table[n][o].type=s,u.table[n][o].value=i,"string"==typeof i&&((u6.test(i)||l6.test(i))&&(d=!0),a6.test(i)&&"auto"===s.name&&(d=!0,u.table[n][o].type.name="currency",u.table[n][o].type.symbol=c6,u.table[n][o].type.decimal=2))):""===i&&u.columns&&u.columns[o]&&u.columns[o].size<=15&&u.columns[o].size>=0&&(d=!0),d&&r&&(u.cellsNeedFix=u.cellsNeedFix||[],u.cellsNeedFix.push({row:n+t,col:o})),e.isMulti&&(u.mergeCells=u.mergeCells||[],u.mergeCells.push({row:n+t,col:o,rowCount:e.rowSpan,colCount:e.colSpan}),l&&(u.table[n+e.rowSpan-1]=u.table[n+e.rowSpan-1]||[],u.table[n+e.rowSpan-1][o+e.colSpan-1]=u.table[n+e.rowSpan-1][o+e.colSpan-1]||{},u.table[n+e.rowSpan-1][o+e.colSpan-1].style=l))}}))})),o.remove(),n&&n.forEach((function(e){e.remove()})),u}var A6={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};var R6={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};var F6={exports:{}},I6={},P6=u.a,M6=60103;if(I6.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var T6=Symbol.for;M6=T6("react.element"),I6.Fragment=T6("react.fragment")}var N6=P6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B6=Object.prototype.hasOwnProperty,V6={key:!0,ref:!0,__self:!0,__source:!0};function L6(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)B6.call(t,r)&&!V6.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:M6,type:e,key:i,ref:a,props:o,_owner:N6.current}}I6.jsx=L6,I6.jsxs=L6,F6.exports=I6;var z6=F6.exports;const U6=0,H6=1,q6=2,W6=4;function $6(e,t){return n=>e(t(n))}function G6(e,t){return t(e)}function K6(e,t){return n=>e(t,n)}function Y6(e,t){return()=>e(t)}function J6(e,t){return t(e),e}function X6(...e){return e}function Z6(e){e()}function Q6(e){return()=>e}function e4(e){return void 0!==e}function t4(){}function n4(e,t){return e(H6,t)}function r4(e,t){e(U6,t)}function o4(e){e(q6)}function i4(e){return e(W6)}function a4(e,t){return n4(e,K6(t,U6))}function u4(e,t){const n=e(H6,(e=>{n(),t(e)}));return n}function l4(){const e=[];return(t,n)=>{switch(t){case q6:return void e.splice(0,e.length);case H6:return e.push(n),()=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)};case U6:return void e.slice().forEach((e=>{e(n)}));default:throw new Error(`unrecognized action ${t}`)}}}function c4(e){let t=e;const n=l4();return(e,r)=>{switch(e){case H6:r(t);break;case U6:t=r;break;case W6:return t}return n(e,r)}}function s4(e){return J6(l4(),(t=>a4(e,t)))}function d4(e,t){return J6(c4(t),(t=>a4(e,t)))}function f4(e,...t){const n=function(...e){return t=>e.reduceRight(G6,t)}(...t);return(t,r)=>{switch(t){case H6:return n4(e,n(r));case q6:return void o4(e)}}}function p4(e,t){return e===t}function v4(e=p4){let t;return n=>r=>{e(t,r)||(t=r,n(r))}}function h4(e){return t=>n=>{e(n)&&t(n)}}function g4(e){return t=>$6(t,e)}function m4(e){return t=>()=>t(e)}function y4(e,t){return n=>r=>n(t=e(t,r))}function b4(e){return t=>n=>{e>0?e--:t(n)}}function w4(e){let t,n=null;return r=>o=>{n=o,t||(t=setTimeout((()=>{t=void 0,r(n)}),e))}}function _4(e){let t,n;return r=>o=>{t=o,n&&clearTimeout(n),n=setTimeout((()=>{r(t)}),e)}}function k4(...e){const t=new Array(e.length);let n=0,r=null;const o=Math.pow(2,e.length)-1;return e.forEach(((e,i)=>{const a=Math.pow(2,i);n4(e,(e=>{const u=n;n|=a,t[i]=e,u!==o&&n===o&&r&&(r(),r=null)}))})),e=>i=>{const a=()=>e([i].concat(t));n===o?a():r=a}}function C4(...e){return function(t,n){switch(t){case H6:return function(...e){return()=>{e.map(Z6)}}(...e.map((e=>n4(e,n))));case q6:return;default:throw new Error(`unrecognized action ${t}`)}}}function E4(e,t=p4){return f4(e,v4(t))}function O4(...e){const t=l4(),n=new Array(e.length);let r=0;const o=Math.pow(2,e.length)-1;return e.forEach(((e,i)=>{const a=Math.pow(2,i);n4(e,(e=>{n[i]=e,r|=a,r===o&&r4(t,n)}))})),function(e,i){switch(e){case H6:return r===o&&i(n),n4(t,i);case q6:return o4(t);default:throw new Error(`unrecognized action ${e}`)}}}function S4(e,t=[],{singleton:n}={singleton:!0}){return{id:x4(),constructor:e,dependencies:t,singleton:n}}const x4=()=>Symbol();function j4(e,t){const n={},r={};let o=0;const i=e.length;for(;o<i;)r[e[o]]=1,o+=1;for(const e in t)r.hasOwnProperty(e)||(n[e]=t[e]);return n}const D4="undefined"!=typeof document?u.a.useLayoutEffect:u.a.useEffect;function A4(e,t,n){const r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),a=Object.keys(t.events||{}),l=u.a.createContext({});function c(e,n){e.propsReady&&r4(e.propsReady,!1);for(const o of r){r4(e[t.required[o]],n[o])}for(const r of o)if(r in n){r4(e[t.optional[r]],n[r])}e.propsReady&&r4(e.propsReady,!0)}function s(e){return a.reduce(((n,r)=>(n[r]=function(e){let t,n;const r=()=>t&&t();return function(o,i){switch(o){case H6:if(i){if(n===i)return;return r(),n=i,t=n4(e,i),t}return r(),t4;case q6:return r(),void(n=null);default:throw new Error(`unrecognized action ${o}`)}}}(e[t.events[r]]),n)),{})}const d=u.a.forwardRef(((d,f)=>{const{children:p,...v}=d,[h]=u.a.useState((()=>J6(function(e){const t=new Map,n=({id:e,constructor:r,dependencies:o,singleton:i})=>{if(i&&t.has(e))return t.get(e);const a=r(o.map((e=>n(e))));return i&&t.set(e,a),a};return n(e)}(e),(e=>c(e,v))))),[g]=u.a.useState(Y6(s,h));D4((()=>{for(const e of a)e in v&&n4(g[e],v[e]);return()=>{Object.values(g).map(o4)}}),[v,g,h]),D4((()=>{c(h,v)})),u.a.useImperativeHandle(f,Q6(function(e){return i.reduce(((n,r)=>(n[r]=n=>{r4(e[t.methods[r]],n)},n)),{})}(h)));const m=n;return z6.jsx(l.Provider,{value:h,children:n?z6.jsx(m,{...j4([...r,...o,...a],v),children:p}):p})})),f=u.a.version.startsWith("18")?e=>{const t=u.a.useContext(l)[e],n=u.a.useCallback((e=>n4(t,e)),[t]);return u.a.useSyncExternalStore(n,(()=>i4(t)),(()=>i4(t)))}:e=>{const t=u.a.useContext(l)[e],[n,r]=u.a.useState(Y6(i4,t));return D4((()=>n4(t,(e=>{e!==n&&r(Q6(e))}))),[t,n]),n};return{Component:d,usePublisher:e=>u.a.useCallback(K6(r4,u.a.useContext(l)[e]),[e]),useEmitterValue:f,useEmitter:(e,t)=>{const n=u.a.useContext(l)[e];D4((()=>n4(n,t)),[t,n])}}}const R4="undefined"!=typeof document?u.a.useLayoutEffect:u.a.useEffect;var F4=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(F4||{});const I4={0:"debug",1:"log",2:"warn",3:"error"},P4=S4((()=>{const e=c4(3);return{log:c4(((t,n,r=1)=>{var o;r>=(null!=(o=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?o:i4(e))&&console[I4[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function M4(e,t,n){const r=u.a.useRef(null);let o=e=>{};if("undefined"!=typeof ResizeObserver){const i=u.a.useMemo((()=>new ResizeObserver((t=>{const r=()=>{const n=t[0].target;null!==n.offsetParent&&e(n)};n?r():requestAnimationFrame(r)}))),[e]);o=e=>{e&&t?(i.observe(e),r.current=e):(r.current&&i.unobserve(r.current),r.current=null)}}return{ref:r,callbackRef:o}}function T4(e,t,n){return M4(e,t,n).callbackRef}function N4(e,t,n,r,o,i,a,l,c){const s=u.a.useCallback((n=>{const u=function(e,t,n,r){const o=e.length;if(0===o)return null;const i=[];for(let a=0;a<o;a++){const o=e.item(a);if(!o||void 0===o.dataset.index)continue;const u=parseInt(o.dataset.index),l=parseFloat(o.dataset.knownSize),c=t(o,n);if(0===c&&r("Zero-sized element, this should not happen",{child:o},F4.ERROR),c===l)continue;const s=i[i.length-1];0===i.length||s.size!==c||s.endIndex!==u-1?i.push({startIndex:u,endIndex:u,size:c}):i[i.length-1].endIndex++}return i}(n.children,t,l?"offsetWidth":"offsetHeight",o);let c=n.parentElement;for(;!c.dataset.virtuosoScroller;)c=c.parentElement;const s="window"===c.lastElementChild.dataset.viewportType,d=a?l?a.scrollLeft:a.scrollTop:s?l?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:l?c.scrollLeft:c.scrollTop,f=a?l?a.scrollWidth:a.scrollHeight:s?l?document.documentElement.scrollWidth:document.documentElement.scrollHeight:l?c.scrollWidth:c.scrollHeight,p=a?l?a.offsetWidth:a.offsetHeight:s?l?window.innerWidth:window.innerHeight:l?c.offsetWidth:c.offsetHeight;r({scrollTop:Math.max(d,0),scrollHeight:f,viewportHeight:p}),null==i||i(l?B4("column-gap",getComputedStyle(n).columnGap,o):B4("row-gap",getComputedStyle(n).rowGap,o)),null!==u&&e(u)}),[e,t,o,i,a,r]);return M4(s,n,c)}function B4(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,F4.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}function V4(e,t){return Math.round(e.getBoundingClientRect()[t])}function L4(e,t){return Math.abs(e-t)<1.01}function z4(e,t,n,r=t4,o,i){const a=u.a.useRef(null),l=u.a.useRef(null),s=u.a.useRef(null),d=u.a.useCallback((n=>{const r=n.target,o=r===window||r===document,a=i?o?window.pageXOffset||document.documentElement.scrollLeft:r.scrollLeft:o?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,u=i?o?document.documentElement.scrollWidth:r.scrollWidth:o?document.documentElement.scrollHeight:r.scrollHeight,d=i?o?window.innerWidth:r.offsetWidth:o?window.innerHeight:r.offsetHeight,f=()=>{e({scrollTop:Math.max(a,0),scrollHeight:u,viewportHeight:d})};n.suppressFlushSync?f():c.a.flushSync(f),null!==l.current&&(a===l.current||a<=0||a===u-d)&&(l.current=null,t(!0),s.current&&(clearTimeout(s.current),s.current=null))}),[e,t]);return u.a.useEffect((()=>{const e=o||a.current;return r(o||a.current),d({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",d,{passive:!0}),()=>{r(null),e.removeEventListener("scroll",d)}}),[a,d,n,r,o]),{scrollerRef:a,scrollByCallback:function(e){i&&(e={left:e.top,behavior:e.behavior}),a.current.scrollBy(e)},scrollToCallback:function(n){const r=a.current;if(!r||(i?"offsetWidth"in r&&0===r.offsetWidth:"offsetHeight"in r&&0===r.offsetHeight))return;const o="smooth"===n.behavior;let u,c,d;r===window?(c=Math.max(V4(document.documentElement,i?"width":"height"),i?document.documentElement.scrollWidth:document.documentElement.scrollHeight),u=i?window.innerWidth:window.innerHeight,d=i?document.documentElement.scrollLeft:document.documentElement.scrollTop):(c=r[i?"scrollWidth":"scrollHeight"],u=V4(r,i?"width":"height"),d=r[i?"scrollLeft":"scrollTop"]);const f=c-u;if(n.top=Math.ceil(Math.max(Math.min(f,n.top),0)),L4(u,c)||n.top===d)return e({scrollTop:d,scrollHeight:c,viewportHeight:u}),void(o&&t(!0));o?(l.current=n.top,s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{s.current=null,l.current=null,t(!0)}),1e3)):l.current=null,i&&(n={left:n.top,behavior:n.behavior}),r.scrollTo(n)}}}const U4=S4((()=>{const e=l4(),t=l4(),n=c4(0),r=l4(),o=c4(0),i=l4(),a=l4(),u=c4(0),l=c4(0),c=c4(0),s=c4(0),d=l4(),f=l4(),p=c4(!1),v=c4(!1),h=c4(!1);return a4(f4(e,g4((({scrollTop:e})=>e))),t),a4(f4(e,g4((({scrollHeight:e})=>e))),a),a4(t,o),{scrollContainerState:e,scrollTop:t,viewportHeight:i,headerHeight:u,fixedHeaderHeight:l,fixedFooterHeight:c,footerHeight:s,scrollHeight:a,smoothScrollTargetReached:r,horizontalDirection:v,skipAnimationFrameInResizeObserver:h,scrollTo:d,scrollBy:f,statefulScrollTop:o,deviation:n,scrollingInProgress:p}}),[],{singleton:!0}),H4={lvl:0};function q4(e,t,n,r=H4,o=H4){return{k:e,v:t,lvl:n,l:r,r:o}}function W4(e){return e===H4}function $4(){return H4}function G4(e,t){if(W4(e))return H4;const{k:n,l:r,r:o}=e;if(t===n){if(W4(r))return o;if(W4(o))return r;{const[t,n]=Q4(r);return o8(t8(e,{k:t,v:n,l:e8(r)}))}}return o8(t8(e,t<n?{l:G4(r,t)}:{r:G4(o,t)}))}function K4(e,t){if(!W4(e))return t===e.k?e.v:t<e.k?K4(e.l,t):K4(e.r,t)}function Y4(e,t,n="k"){if(W4(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const r=Y4(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return Y4(e.l,t,n)}function J4(e,t,n){return W4(e)?q4(t,n,1):t===e.k?t8(e,{k:t,v:n}):t<e.k?r8(t8(e,{l:J4(e.l,t,n)})):r8(t8(e,{r:J4(e.r,t,n)}))}function X4(e,t,n){if(W4(e))return[];const{k:r,v:o,l:i,r:a}=e;let u=[];return r>t&&(u=u.concat(X4(i,t,n))),r>=t&&r<=n&&u.push({k:r,v:o}),r<=n&&(u=u.concat(X4(a,t,n))),u}function Z4(e){return W4(e)?[]:[...Z4(e.l),{k:e.k,v:e.v},...Z4(e.r)]}function Q4(e){return W4(e.r)?[e.k,e.v]:Q4(e.r)}function e8(e){return W4(e.r)?e.l:o8(t8(e,{r:e8(e.r)}))}function t8(e,t){return q4(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function n8(e){return W4(e)||e.lvl>e.r.lvl}function r8(e){return u8(l8(e))}function o8(e){const{l:t,r:n,lvl:r}=e;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(n8(t))return l8(t8(e,{lvl:r-1}));if(W4(t)||W4(t.r))throw new Error("Unexpected empty nodes");return t8(t.r,{l:t8(t,{r:t.r.l}),r:t8(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(n8(e))return u8(t8(e,{lvl:r-1}));if(W4(n)||W4(n.l))throw new Error("Unexpected empty nodes");{const t=n.l,o=n8(t)?n.lvl-1:n.lvl;return t8(t,{l:t8(e,{r:t.l,lvl:r-1}),r:u8(t8(n,{l:t.r,lvl:o})),lvl:t.lvl+1})}}function i8(e,t,n){if(W4(e))return[];const r=Y4(e,t)[0];return a8(X4(e,r,n),(({k:e,v:t})=>({index:e,value:t})))}function a8(e,t){const n=e.length;if(0===n)return[];let{index:r,value:o}=t(e[0]);const i=[];for(let a=1;a<n;a++){const{index:n,value:u}=t(e[a]);i.push({start:r,end:n-1,value:o}),r=n,o=u}return i.push({start:r,end:1/0,value:o}),i}function u8(e){const{r:t,lvl:n}=e;return W4(t)||W4(t.r)||t.lvl!==n||t.r.lvl!==n?e:t8(t,{l:t8(e,{r:t.l}),lvl:n+1})}function l8(e){const{l:t}=e;return W4(t)||t.lvl!==e.lvl?e:t8(t,{r:t8(e,{l:t.r})})}function c8(e,t,n,r=0){let o=e.length-1;for(;r<=o;){const i=Math.floor((r+o)/2),a=n(e[i],t);if(0===a)return i;if(-1===a){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function s8(e,t,n){return e[c8(e,t,n)]}const d8=S4((()=>({recalcInProgress:c4(!1)})),[],{singleton:!0});function f8(e){const{size:t,startIndex:n,endIndex:r}=e;return e=>e.start===n&&(e.end===r||e.end===1/0)&&e.value===t}function p8(e,t){let n=0,r=0;for(;n<e;)n+=t[r+1]-t[r]-1,r++;return r-(n===e?0:1)}function v8({index:e},t){return t===e?0:t<e?-1:1}function h8({offset:e},t){return t===e?0:t<e?-1:1}function g8(e){return{index:e.index,value:e}}function m8(e,t,n,r=0){return r>0&&(t=Math.max(t,s8(e,r,v8).offset)),a8(function(e,t,n,r){const o=c8(e,t,r),i=c8(e,n,r,o);return e.slice(o,i+1)}(e,t,n,h8),g8)}function y8(e,t,n,r){let o=e,i=0,a=0,u=0,l=0;if(0!==t){l=c8(o,t-1,v8);u=o[l].offset;const e=Y4(n,t-1);i=e[0],a=e[1],o.length&&o[l].size===Y4(n,t)[1]&&(l-=1),o=o.slice(0,l+1)}else o=[];for(const{start:e,value:l}of i8(n,t,1/0)){const t=e-i,n=t*a+u+t*r;o.push({offset:n,size:l,index:e}),i=e,u=n,a=l}return{offsetTree:o,lastIndex:i,lastOffset:u,lastSize:a}}function b8(e,[t,n,r,o]){t.length>0&&r("received item sizes",t,F4.DEBUG);const i=e.sizeTree;let a=i,u=0;if(n.length>0&&W4(i)&&2===t.length){const e=t[0].size,r=t[1].size;a=n.reduce(((t,n)=>J4(J4(t,n,e),n+1,r)),a)}else[a,u]=function(e,t){let n=W4(e)?0:1/0;for(const r of t){const{size:t,startIndex:o,endIndex:i}=r;if(n=Math.min(n,o),W4(e)){e=J4(e,0,t);continue}const a=i8(e,o-1,i+1);if(a.some(f8(r)))continue;let u=!1,l=!1;for(const{start:n,end:r,value:o}of a)u?(i>=n||t===o)&&(e=G4(e,n)):(l=o!==t,u=!0),r>i&&i>=n&&o!==t&&(e=J4(e,i+1,o));l&&(e=J4(e,o,t))}return[e,n]}(a,t);if(a===i)return e;const{offsetTree:l,lastIndex:c,lastSize:s,lastOffset:d}=y8(e.offsetTree,u,a,o);return{sizeTree:a,offsetTree:l,lastIndex:c,lastOffset:d,lastSize:s,groupOffsetTree:n.reduce(((e,t)=>J4(e,t,w8(t,l,o))),$4()),groupIndices:n}}function w8(e,t,n){if(0===t.length)return 0;const{offset:r,index:o,size:i}=s8(t,e,v8),a=e-o,u=i*a+(a-1)*n+r;return u>0?u+n:u}function _8(e,t,n){if(function(e){return void 0!==e.groupIndex}(e))return t.groupIndices[e.groupIndex]+1;{let r=k8("LAST"===e.index?n:e.index,t);return r=Math.max(0,r,Math.min(n,r)),r}}function k8(e,t){if(!C8(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function C8(e){return!W4(e.groupOffsetTree)}const E8={offsetHeight:"height",offsetWidth:"width"},O8=S4((([{log:e},{recalcInProgress:t}])=>{const n=l4(),r=l4(),o=d4(r,0),i=l4(),a=l4(),u=c4(0),l=c4([]),c=c4(void 0),s=c4(void 0),d=c4(((e,t)=>V4(e,E8[t]))),f=c4(void 0),p=c4(0),v={offsetTree:[],sizeTree:$4(),groupOffsetTree:$4(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},h=d4(f4(n,k4(l,e,p),y4(b8,v),v4()),v),g=d4(f4(l,v4(),y4(((e,t)=>({prev:e.current,current:t})),{prev:[],current:[]}),g4((({prev:e})=>e))),[]);a4(f4(l,h4((e=>e.length>0)),k4(h,p),g4((([e,t,n])=>{const r=e.reduce(((e,r,o)=>J4(e,r,w8(r,t.offsetTree,n)||o)),$4());return{...t,groupIndices:e,groupOffsetTree:r}}))),h),a4(f4(r,k4(h),h4((([e,{lastIndex:t}])=>e<t)),g4((([e,{lastIndex:t,lastSize:n}])=>[{startIndex:e,endIndex:t,size:n}]))),n),a4(c,s);const m=d4(f4(c,g4((e=>void 0===e))),!0);a4(f4(s,h4((e=>void 0!==e&&W4(i4(h).sizeTree))),g4((e=>[{startIndex:0,endIndex:0,size:e}]))),n);const y=s4(f4(n,k4(h),y4((({sizes:e},[t,n])=>({changed:n!==e,sizes:n})),{changed:!1,sizes:v}),g4((e=>e.changed))));n4(f4(u,y4(((e,t)=>({diff:e.prev-t,prev:t})),{diff:0,prev:0}),g4((e=>e.diff))),(e=>{const{groupIndices:n}=i4(h);if(e>0)r4(t,!0),r4(i,e+p8(e,n));else if(e<0){const t=i4(g);t.length>0&&(e-=p8(-e,t)),r4(a,e)}})),n4(f4(u,k4(e)),(([e,t])=>{e<0&&t("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:u},F4.ERROR)}));const b=s4(i);a4(f4(i,k4(h),g4((([e,t])=>{const n=t.groupIndices.length>0,r=[],o=t.lastSize;if(n){const n=K4(t.sizeTree,0);let i=0,a=0;for(;i<e;){const e=t.groupIndices[a],u=t.groupIndices.length===a+1?1/0:t.groupIndices[a+1]-e-1;r.push({startIndex:e,endIndex:e,size:n}),r.push({startIndex:e+1,endIndex:e+1+u-1,size:o}),a++,i+=u+1}const u=Z4(t.sizeTree);return i!==e&&u.shift(),u.reduce(((t,{k:n,v:r})=>{let o=t.ranges;return 0!==t.prevSize&&(o=[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}]),{ranges:o,prevIndex:n+e,prevSize:r}}),{ranges:r,prevIndex:e,prevSize:0}).ranges}return Z4(t.sizeTree).reduce(((t,{k:n,v:r})=>({ranges:[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}],prevIndex:n+e,prevSize:r})),{ranges:[],prevIndex:0,prevSize:o}).ranges}))),n);const w=s4(f4(a,k4(h,p),g4((([e,{offsetTree:t},n])=>w8(-e,t,n)))));return a4(f4(a,k4(h,p),g4((([e,t,n])=>{if(t.groupIndices.length>0){if(W4(t.sizeTree))return t;let r=$4();const o=i4(g);let i=0,a=0,u=0;for(;i<-e;){u=o[a];const e=o[a+1]-u-1;a++,i+=e+1}r=Z4(t.sizeTree).reduce(((t,{k:n,v:r})=>J4(t,Math.max(0,n+e),r)),r);if(i!==-e){r=J4(r,0,K4(t.sizeTree,u));r=J4(r,1,Y4(t.sizeTree,1-e)[1])}return{...t,sizeTree:r,...y8(t.offsetTree,0,r,n)}}{const r=Z4(t.sizeTree).reduce(((t,{k:n,v:r})=>J4(t,Math.max(0,n+e),r)),$4());return{...t,sizeTree:r,...y8(t.offsetTree,0,r,n)}}}))),h),{data:f,totalCount:r,sizeRanges:n,groupIndices:l,defaultItemSize:s,fixedItemSize:c,unshiftWith:i,shiftWith:a,shiftWithOffset:w,beforeUnshiftWith:b,firstItemIndex:u,gap:p,sizes:h,listRefresh:y,statefulTotalCount:o,trackItemSizes:m,itemSize:d}}),X6(P4,d8),{singleton:!0}),S8="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function x8(e){const t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&S8||(t.behavior="auto"),t.offset||(t.offset=0),t}const j8=S4((([{sizes:e,totalCount:t,listRefresh:n,gap:r},{scrollingInProgress:o,viewportHeight:i,scrollTo:a,smoothScrollTargetReached:u,headerHeight:l,footerHeight:c,fixedHeaderHeight:s,fixedFooterHeight:d},{log:f}])=>{const p=l4(),v=l4(),h=c4(0);let g=null,m=null,y=null;function b(){g&&(g(),g=null),y&&(y(),y=null),m&&(clearTimeout(m),m=null),r4(o,!1)}return a4(f4(p,k4(e,i,t,h,l,c,f),k4(r,s,d),g4((([[e,t,r,i,a,l,c,s],d,f,h])=>{const w=x8(e),{align:_,behavior:k,offset:C}=w,E=i-1,O=_8(w,t,E);let S=w8(O,t.offsetTree,d)+l;"end"===_?(S+=f+Y4(t.sizeTree,O)[1]-r+h,O===E&&(S+=c)):"center"===_?S+=(f+Y4(t.sizeTree,O)[1]-r+h)/2:S-=a,C&&(S+=C);const x=t=>{b(),t?(s("retrying to scroll to",{location:e},F4.DEBUG),r4(p,e)):(r4(v,!0),s("list did not change, scroll successful",{},F4.DEBUG))};if(b(),"smooth"===k){let e=!1;y=n4(n,(t=>{e=e||t})),g=u4(u,(()=>{x(e)}))}else g=u4(f4(n,(j=150,e=>{const t=setTimeout((()=>{e(!1)}),j);return n=>{n&&(e(!0),clearTimeout(t))}})),x);var j;return m=setTimeout((()=>{b()}),1200),r4(o,!0),s("scrolling from index to",{index:O,top:S,behavior:k},F4.DEBUG),{top:S,behavior:k}}))),a),{scrollToIndex:p,scrollTargetReached:v,topListHeight:h}}),X6(O8,U4,P4),{singleton:!0});const D8="up",A8="down",R8={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},F8=S4((([{scrollContainerState:e,scrollTop:t,viewportHeight:n,headerHeight:r,footerHeight:o,scrollBy:i}])=>{const a=c4(!1),u=c4(!0),l=l4(),c=l4(),s=c4(4),d=c4(0),f=d4(f4(C4(f4(E4(t),b4(1),m4(!0)),f4(E4(t),b4(1),m4(!1),_4(100))),v4()),!1),p=d4(f4(C4(f4(i,m4(!0)),f4(i,m4(!1),_4(200))),v4()),!1);a4(f4(O4(E4(t),E4(d)),g4((([e,t])=>e<=t)),v4()),u),a4(f4(u,w4(50)),c);const v=s4(f4(O4(e,E4(n),E4(r),E4(o),E4(s)),y4(((e,[{scrollTop:t,scrollHeight:n},r,o,i,a])=>{const u={viewportHeight:r,scrollTop:t,scrollHeight:n};if(t+r-n>-a){let n,r;return t>e.state.scrollTop?(n="SCROLLED_DOWN",r=e.state.scrollTop-t):(n="SIZE_DECREASED",r=e.state.scrollTop-t||e.scrollTopDelta),{atBottom:!0,state:u,atBottomBecause:n,scrollTopDelta:r}}let l;return l=u.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":t<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:l,state:u}}),R8),v4(((e,t)=>e&&e.atBottom===t.atBottom)))),h=d4(f4(e,y4(((e,{scrollTop:t,scrollHeight:n,viewportHeight:r})=>{if(L4(e.scrollHeight,n))return{scrollTop:t,scrollHeight:n,jump:0,changed:!1};{const o=n-(t+r)<1;return e.scrollTop!==t&&o?{scrollHeight:n,scrollTop:t,jump:e.scrollTop-t,changed:!0}:{scrollHeight:n,scrollTop:t,jump:0,changed:!0}}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),h4((e=>e.changed)),g4((e=>e.jump))),0);a4(f4(v,g4((e=>e.atBottom))),a),a4(f4(a,w4(50)),l);const g=c4(A8);a4(f4(e,g4((({scrollTop:e})=>e)),v4(),y4(((e,t)=>i4(p)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?D8:A8,prevScrollTop:t}),{direction:A8,prevScrollTop:0}),g4((e=>e.direction))),g),a4(f4(e,w4(50),m4("none")),g);const m=c4(0);return a4(f4(f,h4((e=>!e)),m4(0)),m),a4(f4(t,w4(100),k4(f),h4((([e,t])=>!!t)),y4((([e,t],[n])=>[t,n]),[0,0]),g4((([e,t])=>t-e))),m),{isScrolling:f,isAtTop:u,isAtBottom:a,atBottomState:v,atTopStateChange:c,atBottomStateChange:l,scrollDirection:g,atBottomThreshold:s,atTopThreshold:d,scrollVelocity:m,lastJumpDueToItemResize:h}}),X6(U4)),I8=S4((([{log:e}])=>{const t=c4(!1),n=s4(f4(t,h4((e=>e)),v4()));return n4(t,(t=>{t&&i4(e)("props updated",{},F4.DEBUG)})),{propsReady:t,didMount:n}}),X6(P4),{singleton:!0});function P8(e,t){0==e?t():requestAnimationFrame((()=>P8(e-1,t)))}function M8(e,t){const n=t-1;return"number"==typeof e?e:"LAST"===e.index?n:e.index}const T8=S4((([{sizes:e,listRefresh:t,defaultItemSize:n},{scrollTop:r},{scrollToIndex:o,scrollTargetReached:i},{didMount:a}])=>{const u=c4(!0),l=c4(0),c=c4(!0);return a4(f4(a,k4(l),h4((([e,t])=>!!t)),m4(!1)),u),a4(f4(a,k4(l),h4((([e,t])=>!!t)),m4(!1)),c),n4(f4(O4(t,a),k4(u,e,n,c),h4((([[,e],t,{sizeTree:n},r,o])=>e&&(!W4(n)||e4(r))&&!t&&!o)),k4(l)),(([,e])=>{u4(i,(()=>{r4(c,!0)})),P8(4,(()=>{u4(r,(()=>{r4(u,!0)})),r4(o,e)}))})),{scrolledToInitialItem:u,initialTopMostItemIndex:l,initialItemFinalLocationReached:c}}),X6(O8,U4,j8,I8),{singleton:!0});function N8(e){return!!e&&("smooth"===e?"smooth":"auto")}const B8=S4((([{totalCount:e,listRefresh:t},{isAtBottom:n,atBottomState:r},{scrollToIndex:o},{scrolledToInitialItem:i},{propsReady:a,didMount:u},{log:l},{scrollingInProgress:c}])=>{const s=c4(!1),d=l4();let f=null;function p(e){r4(o,{index:"LAST",align:"end",behavior:e})}function v(e){const t=u4(r,(t=>{!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||f||(i4(l)("scrolling to bottom due to increased size",{},F4.DEBUG),p("auto"))}));setTimeout(t,100)}return n4(f4(O4(f4(E4(e),b4(1)),u),k4(E4(s),n,i,c),g4((([[e,t],n,r,o,i])=>{let a=t&&o,u="auto";return a&&(u=((e,t)=>"function"==typeof e?N8(e(t)):t&&N8(e))(n,r||i),a=a&&!!u),{totalCount:e,shouldFollow:a,followOutputBehavior:u}})),h4((({shouldFollow:e})=>e))),(({totalCount:e,followOutputBehavior:n})=>{f&&(f(),f=null),f=u4(t,(()=>{i4(l)("following output to ",{totalCount:e},F4.DEBUG),p(n),f=null}))})),n4(f4(O4(E4(s),e,a),h4((([e,,t])=>e&&t)),y4((({value:e},[,t])=>({refreshed:e===t,value:t})),{refreshed:!1,value:0}),h4((({refreshed:e})=>e)),k4(s,e)),(([,e])=>{i4(i)&&v(!1!==e)})),n4(d,(()=>{v(!1!==i4(s))})),n4(O4(E4(s),r),(([e,t])=>{e&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&p("auto")})),{followOutput:s,autoscrollToBottom:d}}),X6(O8,F8,j8,T8,I8,P4,U4));function V8(e){return e.reduce(((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e)),{totalCount:0,groupIndices:[]})}const L8=S4((([{totalCount:e,groupIndices:t,sizes:n},{scrollTop:r,headerHeight:o}])=>{const i=l4(),a=l4(),u=s4(f4(i,g4(V8)));return a4(f4(u,g4((e=>e.totalCount))),e),a4(f4(u,g4((e=>e.groupIndices))),t),a4(f4(O4(r,n,o),h4((([e,t])=>C8(t))),g4((([e,t,n])=>Y4(t.groupOffsetTree,Math.max(e-n,0),"v")[0])),v4(),g4((e=>[e]))),a),{groupCounts:i,topItemsIndexes:a}}),X6(O8,U4));function z8(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function U8(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}const H8="top",q8="bottom",W8="none";function $8(e,t,n){return"number"==typeof e?n===D8&&t===H8||n===A8&&t===q8?e:0:n===D8?t===H8?e.main:e.reverse:t===q8?e.main:e.reverse}function G8(e,t){return"number"==typeof e?e:e[t]||0}const K8=S4((([{scrollTop:e,viewportHeight:t,deviation:n,headerHeight:r,fixedHeaderHeight:o}])=>{const i=l4(),a=c4(0),u=c4(0),l=c4(0),c=d4(f4(O4(E4(e),E4(t),E4(r),E4(i,z8),E4(l),E4(a),E4(o),E4(n),E4(u)),g4((([e,t,n,[r,o],i,a,u,l,c])=>{const s=e-l,d=a+u,f=Math.max(n-s,0);let p=W8;const v=G8(c,H8),h=G8(c,q8);return r-=l,o+=n+u,(r+=n+u)>e+d-v&&(p=D8),(o-=l)<e-f+t+h&&(p=A8),p!==W8?[Math.max(s-n-$8(i,H8,p)-v,0),s-f-u+t+$8(i,q8,p)+h]:null})),h4((e=>null!=e)),v4(z8)),[0,0]);return{listBoundary:i,overscan:l,topListHeight:a,increaseViewportBy:u,visibleRange:c}}),X6(U4),{singleton:!0});const Y8={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function J8(e,t,n){if(0===e.length)return[];if(!C8(t))return e.map((e=>({...e,index:e.index+n,originalIndex:e.index})));const r=e[0].index,o=e[e.length-1].index,i=[],a=i8(t.groupOffsetTree,r,o);let u,l=0;for(const r of e){let e;(!u||u.end<r.index)&&(u=a.shift(),l=t.groupIndices.indexOf(u.start)),e=r.index===u.start?{type:"group",index:l}:{index:r.index-(l+1)+n,groupIndex:l},i.push({...e,size:r.size,offset:r.offset,originalIndex:r.index,data:r.data})}return i}function X8(e,t,n,r,o,i){const{lastSize:a,lastOffset:u,lastIndex:l}=o;let c=0,s=0;if(e.length>0){c=e[0].offset;const t=e[e.length-1];s=t.offset+t.size}const d=n-l,f=c,p=u+d*a+(d-1)*r-s;return{items:J8(e,o,i),topItems:J8(t,o,i),topListHeight:t.reduce(((e,t)=>t.size+e),0),offsetTop:c,offsetBottom:p,top:f,bottom:s,totalCount:n,firstItemIndex:i}}function Z8(e,t,n,r,o,i){let a=0;if(n.groupIndices.length>0)for(const t of n.groupIndices){if(t-a>=e)break;a++}const u=e+a,l=M8(t,u);return X8(Array.from({length:u}).map(((e,t)=>({index:t+l,size:0,offset:0,data:i[t+l]}))),[],u,o,n,r)}const Q8=S4((([{sizes:e,totalCount:t,data:n,firstItemIndex:r,gap:o},i,{visibleRange:a,listBoundary:u,topListHeight:l},{scrolledToInitialItem:c,initialTopMostItemIndex:s},{topListHeight:d},f,{didMount:p},{recalcInProgress:v}])=>{const h=c4([]),g=c4(0),m=l4();a4(i.topItemsIndexes,h);const y=d4(f4(O4(p,v,E4(a,z8),E4(t),E4(e),E4(s),c,E4(h),E4(r),E4(o),n),h4((([e,t,,n,,,,,,,r])=>{const o=r&&r.length!==n;return e&&!t&&!o})),g4((([,,[e,t],n,r,o,i,a,u,l,c])=>{const s=r,{sizeTree:d,offsetTree:f}=s,p=i4(g);if(0===n)return{...Y8,totalCount:n};if(0===e&&0===t)return 0===p?{...Y8,totalCount:n}:Z8(p,o,r,u,l,c||[]);if(W4(d)){if(p>0)return null;const e=X8(function(e,t,n){if(C8(t)){const r=k8(e,t);return[{index:Y4(t.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(M8(o,n),s,c),[],n,l,s,u);return e}const v=[];if(a.length>0){const e=a[0],t=a[a.length-1];let n=0;for(const r of i8(d,e,t)){const o=r.value,i=Math.max(r.start,e),a=Math.min(r.end,t);for(let e=i;e<=a;e++)v.push({index:e,size:o,offset:n,data:c&&c[e]}),n+=o}}if(!i)return X8([],v,n,l,s,u);const h=a.length>0?a[a.length-1]+1:0,m=m8(f,e,t,h);if(0===m.length)return null;const y=n-1,b=J6([],(n=>{for(const r of m){const o=r.value;let i=o.offset,a=r.start;const u=o.size;if(o.offset<e){a+=Math.floor((e-o.offset+l)/(u+l));const t=a-r.start;i+=t*u+t*l}a<h&&(i+=(h-a)*u,a=h);const s=Math.min(r.end,y);for(let e=a;e<=s&&!(i>=t);e++)n.push({index:e,size:u,offset:i,data:c&&c[e]}),i+=u+l}}));return X8(b,v,n,l,s,u)})),h4((e=>null!==e)),v4()),Y8);a4(f4(n,h4(e4),g4((e=>null==e?void 0:e.length))),t),a4(f4(y,g4((e=>e.topListHeight))),d),a4(d,l),a4(f4(y,g4((e=>[e.top,e.bottom]))),u),a4(f4(y,g4((e=>e.items))),m);const b=s4(f4(y,h4((({items:e})=>e.length>0)),k4(t,n),h4((([{items:e},t])=>e[e.length-1].originalIndex===t-1)),g4((([,e,t])=>[e-1,t])),v4(z8),g4((([e])=>e))));return{listState:y,topItemsIndexes:h,endReached:b,startReached:s4(f4(y,w4(200),h4((({items:e,topItems:t})=>e.length>0&&e[0].originalIndex===t.length)),g4((({items:e})=>e[0].index)),v4())),rangeChanged:s4(f4(y,h4((({items:e})=>e.length>0)),g4((({items:e})=>{let t=0,n=e.length-1;for(;"group"===e[t].type&&t<n;)t++;for(;"group"===e[n].type&&n>t;)n--;return{startIndex:e[t].index,endIndex:e[n].index}})),v4(U8))),itemsRendered:m,initialItemCount:g,...f}}),X6(O8,L8,K8,T8,j8,F8,I8,d8),{singleton:!0}),e9=S4((([{sizes:e,firstItemIndex:t,data:n,gap:r},{initialTopMostItemIndex:o},{initialItemCount:i,listState:a},{didMount:u}])=>(a4(f4(u,k4(i),h4((([,e])=>0!==e)),k4(o,e,t,r,n),g4((([[,e],t,n,r,o,i=[]])=>Z8(e,t,n,r,o,i)))),a),{})),X6(O8,T8,Q8,I8),{singleton:!0}),t9=S4((([{scrollVelocity:e}])=>{const t=c4(!1),n=l4(),r=c4(!1);return a4(f4(e,k4(r,t,n),h4((([e,t])=>!!t)),g4((([e,t,n,r])=>{const{exit:o,enter:i}=t;if(n){if(o(e,r))return!1}else if(i(e,r))return!0;return n})),v4()),t),n4(f4(O4(t,e,n),k4(r)),(([[e,t,n],r])=>e&&r&&r.change&&r.change(t,n))),{isSeeking:t,scrollSeekConfiguration:r,scrollVelocity:e,scrollSeekRangeChanged:n}}),X6(F8),{singleton:!0}),n9=S4((([{topItemsIndexes:e}])=>{const t=c4(0);return a4(f4(t,h4((e=>e>0)),g4((e=>Array.from({length:e}).map(((e,t)=>t))))),e),{topItemCount:t}}),X6(Q8)),r9=S4((([{footerHeight:e,headerHeight:t,fixedHeaderHeight:n,fixedFooterHeight:r},{listState:o}])=>{const i=l4(),a=d4(f4(O4(e,r,t,n,o),g4((([e,t,n,r,o])=>e+t+n+r+o.offsetBottom+o.bottom))),0);return a4(E4(a),i),{totalListHeight:a,totalListHeightChanged:i}}),X6(U4,Q8),{singleton:!0});function o9(e){let t,n=!1;return()=>(n||(n=!0,t=e()),t)}const i9=o9((()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))),a9=S4((([{scrollBy:e,scrollTop:t,deviation:n,scrollingInProgress:r},{isScrolling:o,isAtBottom:i,scrollDirection:a,lastJumpDueToItemResize:u},{listState:l},{beforeUnshiftWith:c,shiftWithOffset:s,sizes:d,gap:f},{log:p},{recalcInProgress:v}])=>{const h=s4(f4(l,k4(u),y4((([,e,t,n],[{items:r,totalCount:o,bottom:i,offsetBottom:a},u])=>{const l=i+a;let c=0;if(t===o&&e.length>0&&r.length>0){0===r[0].originalIndex&&0===e[0].originalIndex||(c=l-n,0!==c&&(c+=u))}return[c,r,o,l]}),[0,[],0,0]),h4((([e])=>0!==e)),k4(t,a,r,i,p,v),h4((([,e,t,n,,,r])=>!r&&!n&&0!==e&&t===D8)),g4((([[e],,,,,t])=>(t("Upward scrolling compensation",{amount:e},F4.DEBUG),e)))));function g(t){t>0?(r4(e,{top:-t,behavior:"auto"}),r4(n,0)):(r4(n,0),r4(e,{top:-t,behavior:"auto"}))}return n4(f4(h,k4(n,o)),(([e,t,r])=>{r&&i9()?r4(n,t-e):g(-e)})),n4(f4(O4(d4(o,!1),n,v),h4((([e,t,n])=>!e&&!n&&0!==t)),g4((([e,t])=>t)),w4(1)),g),a4(f4(s,g4((e=>({top:-e})))),e),n4(f4(c,k4(d,f),g4((([e,{lastSize:t,groupIndices:n,sizeTree:r},o])=>{function i(e){return e*(t+o)}if(0===n.length)return i(e);{let t=0;const o=K4(r,0);let a=0,u=0;for(;a<e;){a++,t+=o;let r=n.length===u+1?1/0:n[u+1]-n[u]-1;a+r>e&&(t-=o,r=e-a+1),a+=r,t+=i(r),u++}return t}}))),(t=>{r4(n,t),requestAnimationFrame((()=>{r4(e,{top:t}),requestAnimationFrame((()=>{r4(n,0),r4(v,!1)}))}))})),{deviation:n}}),X6(U4,F8,Q8,O8,P4,d8)),u9=S4((([{didMount:e},{scrollTo:t},{listState:n}])=>{const r=c4(0);return n4(f4(e,k4(r),h4((([,e])=>0!==e)),g4((([,e])=>({top:e})))),(e=>{u4(f4(n,b4(1),h4((e=>e.items.length>1))),(()=>{requestAnimationFrame((()=>{r4(t,e)}))}))})),{initialScrollTop:r}}),X6(I8,U4,Q8),{singleton:!0}),l9=S4((([{viewportHeight:e},{totalListHeight:t}])=>{const n=c4(!1);return{alignToBottom:n,paddingTopAddition:d4(f4(O4(n,e,t),h4((([e])=>e)),g4((([,e,t])=>Math.max(0,e-t))),w4(0),v4()),0)}}),X6(U4,r9),{singleton:!0}),c9=S4((([{scrollTo:e,scrollContainerState:t}])=>{const n=l4(),r=l4(),o=l4(),i=c4(!1),a=c4(void 0);return a4(f4(O4(n,r),g4((([{viewportHeight:e,scrollTop:t,scrollHeight:n},{offsetTop:r}])=>({scrollTop:Math.max(0,t-r),scrollHeight:n,viewportHeight:e})))),t),a4(f4(e,k4(r),g4((([e,{offsetTop:t}])=>({...e,top:e.top+t})))),o),{useWindowScroll:i,customScrollParent:a,windowScrollContainerState:n,windowViewportRect:r,windowScrollTo:o}}),X6(U4)),s9=({itemTop:e,itemBottom:t,viewportTop:n,viewportBottom:r,locationParams:{behavior:o,align:i,...a}})=>e<n?{...a,behavior:o,align:null!=i?i:"start"}:t>r?{...a,behavior:o,align:null!=i?i:"end"}:null,d9=S4((([{sizes:e,totalCount:t,gap:n},{scrollTop:r,viewportHeight:o,headerHeight:i,fixedHeaderHeight:a,fixedFooterHeight:u,scrollingInProgress:l},{scrollToIndex:c}])=>{const s=l4();return a4(f4(s,k4(e,o,t,i,a,u,r),k4(n),g4((([[e,t,n,r,o,i,a,u],c])=>{const{done:s,behavior:d,align:f,calculateViewLocation:p=s9,...v}=e,h=_8(e,t,r-1),g=w8(h,t.offsetTree,c)+o+i,m=p({itemTop:g,itemBottom:g+Y4(t.sizeTree,h)[1],viewportTop:u+i,viewportBottom:u+n-a,locationParams:{behavior:d,align:f,...v}});return m?s&&u4(f4(l,h4((e=>!1===e)),b4(i4(l)?1:2)),s):s&&s(),m})),h4((e=>null!==e))),c),{scrollIntoView:s}}),X6(O8,U4,j8,Q8,P4),{singleton:!0}),f9=S4((([{sizes:e,sizeRanges:t},{scrollTop:n,headerHeight:r},{initialTopMostItemIndex:o},{didMount:i},{useWindowScroll:a,windowScrollContainerState:u,windowViewportRect:l}])=>{const c=l4(),s=c4(void 0),d=c4(null),f=c4(null);return a4(u,d),a4(l,f),n4(f4(c,k4(e,n,a,d,f,r)),(([e,t,n,r,o,i,a])=>{const u=Z4(t.sizeTree).map((({k:e,v:t},n,r)=>{const o=r[n+1];return{startIndex:e,endIndex:o?o.k-1:1/0,size:t}}));r&&null!==o&&null!==i&&(n=o.scrollTop-i.offsetTop),e({ranges:u,scrollTop:n-=a})})),a4(f4(s,h4(e4),g4(p9)),o),a4(f4(i,k4(s),h4((([,e])=>void 0!==e)),v4(),g4((([,e])=>e.ranges))),t),{getState:c,restoreStateFrom:s}}),X6(O8,U4,T8,I8,c9));function p9(e){return{offset:e.scrollTop,index:0,align:"start"}}const v9=S4((([e,t,n,r,o,i,a,u,l,c])=>({...e,...t,...n,...r,...o,...i,...a,...u,...l,...c})),X6(K8,e9,I8,t9,r9,u9,l9,c9,d9,P4)),h9=S4((([{totalCount:e,sizeRanges:t,fixedItemSize:n,defaultItemSize:r,trackItemSizes:o,itemSize:i,data:a,firstItemIndex:u,groupIndices:l,statefulTotalCount:c,gap:s,sizes:d},{initialTopMostItemIndex:f,scrolledToInitialItem:p,initialItemFinalLocationReached:v},h,g,m,{listState:y,topItemsIndexes:b,...w},{scrollToIndex:_},k,{topItemCount:C},{groupCounts:E},O])=>(a4(w.rangeChanged,O.scrollSeekRangeChanged),a4(f4(O.windowViewportRect,g4((e=>e.visibleHeight))),h.viewportHeight),{totalCount:e,data:a,firstItemIndex:u,sizeRanges:t,initialTopMostItemIndex:f,scrolledToInitialItem:p,initialItemFinalLocationReached:v,topItemsIndexes:b,topItemCount:C,groupCounts:E,fixedItemHeight:n,defaultItemHeight:r,gap:s,...m,statefulTotalCount:c,listState:y,scrollToIndex:_,trackItemSizes:o,itemSize:i,groupIndices:l,...w,...O,...h,sizes:d,...g})),X6(O8,T8,U4,f9,B8,Q8,j8,a9,n9,L8,v9)),g9="-webkit-sticky",m9="sticky",y9=o9((()=>{if("undefined"==typeof document)return m9;const e=document.createElement("div");return e.style.position=g9,e.style.position===g9?g9:m9}));function b9(e,t,n){const r=u.a.useRef(null),o=u.a.useCallback((n=>{if(null===n||!n.offsetParent)return;const o=n.getBoundingClientRect(),i=o.width;let a,u;if(t){const e=t.getBoundingClientRect(),n=o.top-e.top;a=e.height-Math.max(0,n),u=n+t.scrollTop}else a=window.innerHeight-Math.max(0,o.top),u=o.top+window.pageYOffset;r.current={offsetTop:u,visibleHeight:a,visibleWidth:i},e(r.current)}),[e,t]),{callbackRef:i,ref:a}=M4(o,!0,n),l=u.a.useCallback((()=>{o(a.current)}),[o,a]);return u.a.useEffect((()=>{if(t){t.addEventListener("scroll",l);const e=new ResizeObserver((()=>{requestAnimationFrame(l)}));return e.observe(t),()=>{t.removeEventListener("scroll",l),e.unobserve(t)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}}),[l,t]),i}const w9=u.a.createContext(void 0),_9=u.a.createContext(void 0);function k9(e){return e}const C9=S4((([e,t])=>({...e,...t})),X6(h9,S4((()=>{const e=c4((e=>`Item ${e}`)),t=c4(null),n=c4((e=>`Group ${e}`)),r=c4({}),o=c4(k9),i=c4("div"),a=c4(t4),u=(e,t=null)=>d4(f4(r,g4((t=>t[e])),v4()),t);return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:o,HeaderFooterTag:i,scrollerRef:a,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}})))),E9=({height:e})=>z6.jsx("div",{style:{height:e}}),O9={position:y9(),zIndex:1,overflowAnchor:"none"},S9={overflowAnchor:"none"},x9={...S9,display:"inline-block",height:"100%"},j9=u.a.memo((function({showTopList:e=!1}){const t=W9("listState"),n=q9("sizeRanges"),r=W9("useWindowScroll"),o=W9("customScrollParent"),i=q9("windowScrollContainerState"),l=q9("scrollContainerState"),c=o||r?i:l,s=W9("itemContent"),d=W9("context"),f=W9("groupContent"),p=W9("trackItemSizes"),v=W9("itemSize"),h=W9("log"),g=q9("gap"),m=W9("horizontalDirection"),{callbackRef:y}=N4(n,v,p,e?t4:c,h,g,o,m,W9("skipAnimationFrameInResizeObserver")),[b,w]=u.a.useState(0);$9("deviation",(e=>{b!==e&&w(e)}));const _=W9("EmptyPlaceholder"),k=W9("ScrollSeekPlaceholder")||E9,C=W9("ListComponent"),E=W9("ItemComponent"),O=W9("GroupComponent"),S=W9("computeItemKey"),x=W9("isSeeking"),j=W9("groupIndices").length>0,D=W9("alignToBottom"),A=W9("initialItemFinalLocationReached"),R=e?{}:{boxSizing:"border-box",...m?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:0!==b?b:D?"auto":0}:{marginTop:0!==b?b:D?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...A?{}:{visibility:"hidden"}};return!e&&0===t.totalCount&&_?z6.jsx(_,{...I9(_,d)}):z6.jsx(C,{...I9(C,d),ref:y,style:R,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map((e=>{const n=e.originalIndex,r=S(n+t.firstItemIndex,e.data,d);return x?Object(a.createElement)(k,{...I9(k,d),key:r,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?Object(a.createElement)(O,{...I9(O,d),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:O9},f(e.index,d)):Object(a.createElement)(E,{...I9(E,d),...P9(E,e.data),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:m?x9:S9},j?s(e.index,e.groupIndex,e.data,d):s(e.index,e.data,d))}))})})),D9={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},A9={outline:"none",overflowX:"auto",position:"relative"},R9=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),F9={width:"100%",position:y9(),top:0,zIndex:1};function I9(e,t){if("string"!=typeof e)return{context:t}}function P9(e,t){return{item:"string"==typeof e?void 0:t}}const M9=u.a.memo((function(){const e=W9("HeaderComponent"),t=q9("headerHeight"),n=W9("HeaderFooterTag"),r=T4(u.a.useMemo((()=>e=>t(V4(e,"height"))),[t]),!0,W9("skipAnimationFrameInResizeObserver")),o=W9("context");return e?z6.jsx(n,{ref:r,children:z6.jsx(e,{...I9(e,o)})}):null})),T9=u.a.memo((function(){const e=W9("FooterComponent"),t=q9("footerHeight"),n=W9("HeaderFooterTag"),r=T4(u.a.useMemo((()=>e=>t(V4(e,"height"))),[t]),!0,W9("skipAnimationFrameInResizeObserver")),o=W9("context");return e?z6.jsx(n,{ref:r,children:z6.jsx(e,{...I9(e,o)})}):null}));function N9({usePublisher:e,useEmitter:t,useEmitterValue:n}){return u.a.memo((function({style:r,children:o,...i}){const a=e("scrollContainerState"),u=n("ScrollerComponent"),l=e("smoothScrollTargetReached"),c=n("scrollerRef"),s=n("context"),d=n("horizontalDirection")||!1,{scrollerRef:f,scrollByCallback:p,scrollToCallback:v}=z4(a,l,u,c,void 0,d);t("scrollTo",v),t("scrollBy",p);const h=d?A9:D9;return z6.jsx(u,{ref:f,style:{...h,...r},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...i,...I9(u,s),children:o})}))}function B9({usePublisher:e,useEmitter:t,useEmitterValue:n}){return u.a.memo((function({style:r,children:o,...i}){const a=e("windowScrollContainerState"),u=n("ScrollerComponent"),l=e("smoothScrollTargetReached"),c=n("totalListHeight"),s=n("deviation"),d=n("customScrollParent"),f=n("context"),{scrollerRef:p,scrollByCallback:v,scrollToCallback:h}=z4(a,l,u,t4,d);return R4((()=>(p.current=d||window,()=>{p.current=null})),[p,d]),t("windowScrollTo",h),t("scrollBy",v),z6.jsx(u,{style:{position:"relative",...r,...0!==c?{height:c+s}:{}},"data-virtuoso-scroller":!0,...i,...I9(u,f),children:o})}))}const V9=({children:e})=>{const t=u.a.useContext(w9),n=q9("viewportHeight"),r=q9("fixedItemHeight"),o=W9("alignToBottom"),i=W9("horizontalDirection"),a=T4(u.a.useMemo((()=>$6(n,(e=>V4(e,i?"width":"height")))),[n,i]),!0,W9("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),z6.jsx("div",{style:R9(o),ref:a,"data-viewport-type":"element",children:e})},L9=({children:e})=>{const t=u.a.useContext(w9),n=q9("windowViewportRect"),r=q9("fixedItemHeight"),o=W9("customScrollParent"),i=b9(n,o,W9("skipAnimationFrameInResizeObserver")),a=W9("alignToBottom");return u.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),z6.jsx("div",{ref:i,style:R9(a),"data-viewport-type":"window",children:e})},z9=({children:e})=>{const t=W9("TopItemListComponent")||"div",n=W9("headerHeight"),r={...F9,marginTop:`${n}px`},o=W9("context");return z6.jsx(t,{style:r,...I9(t,o),children:e})},U9=u.a.memo((function(e){const t=W9("useWindowScroll"),n=W9("topItemsIndexes").length>0,r=W9("customScrollParent"),o=r||t?K9:G9,i=r||t?L9:V9;return z6.jsxs(o,{...e,children:[n&&z6.jsx(z9,{children:z6.jsx(j9,{showTopList:!0})}),z6.jsxs(i,{children:[z6.jsx(M9,{}),z6.jsx(j9,{}),z6.jsx(T9,{})]})]})})),{Component:H9,usePublisher:q9,useEmitterValue:W9,useEmitter:$9}=A4(C9,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},U9),G9=N9({usePublisher:q9,useEmitterValue:W9,useEmitter:$9}),K9=B9({usePublisher:q9,useEmitterValue:W9,useEmitter:$9}),Y9=H9,J9={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},X9={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:Z9,ceil:Q9,floor:e7,min:t7,max:n7}=Math;function r7(e,t,n){return Array.from({length:t-e+1}).map(((t,r)=>{const o=null===n?null:n[r+e];return{index:r+e,data:o}}))}function o7(e,t){return e&&e.column===t.column&&e.row===t.row}function i7(e,t){return e&&e.width===t.width&&e.height===t.height}const a7=S4((([{overscan:e,visibleRange:t,listBoundary:n},{scrollTop:r,viewportHeight:o,scrollBy:i,scrollTo:a,smoothScrollTargetReached:u,scrollContainerState:l,footerHeight:c,headerHeight:s},d,f,{propsReady:p,didMount:v},{windowViewportRect:h,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,windowScrollTo:b},w])=>{const _=c4(0),k=c4(0),C=c4(J9),E=c4({height:0,width:0}),O=c4({height:0,width:0}),S=l4(),x=l4(),j=c4(0),D=c4(null),A=c4({row:0,column:0}),R=l4(),F=l4(),I=c4(!1),P=c4(0),M=c4(!0),T=c4(!1),N=c4(!1);n4(f4(v,k4(P),h4((([e,t])=>!!t))),(()=>{r4(M,!1),r4(k,0)})),n4(f4(O4(v,M,O,E,P,T),h4((([e,t,n,r,,o])=>e&&!t&&0!==n.height&&0!==r.height&&!o))),(([,,,,e])=>{r4(T,!0),P8(1,(()=>{r4(S,e)})),u4(f4(r),(()=>{r4(n,[0,0]),r4(M,!0)}))})),a4(f4(F,h4((e=>null!=e&&e.scrollTop>0)),m4(0)),k),n4(f4(v,k4(F),h4((([,e])=>null!=e))),(([,e])=>{e&&(r4(E,e.viewport),r4(O,null==e?void 0:e.item),r4(A,e.gap),e.scrollTop>0&&(r4(I,!0),u4(f4(r,b4(1)),(e=>{r4(I,!1)})),r4(a,{top:e.scrollTop})))})),a4(f4(E,g4((({height:e})=>e))),o),a4(f4(O4(E4(E,i7),E4(O,i7),E4(A,((e,t)=>e&&e.column===t.column&&e.row===t.row)),E4(r)),g4((([e,t,n,r])=>({viewport:e,item:t,gap:n,scrollTop:r})))),R),a4(f4(O4(E4(_),t,E4(A,o7),E4(O,i7),E4(E,i7),E4(D),E4(k),E4(I),E4(M),E4(P)),h4((([,,,,,,,e])=>!e)),g4((([e,[t,n],r,o,i,a,u,,l,c])=>{const{row:s,column:d}=r,{height:f,width:p}=o,{width:v}=i;if(0===u&&(0===e||0===v))return J9;if(0===p){const t=M8(c,e);return function(e){return{...X9,items:e}}(r7(t,0===t?Math.max(u-1,0):t,a))}const h=c7(v,p,d);let g,m;l?0===t&&0===n&&u>0?(g=0,m=u-1):(g=h*e7((t+s)/(f+s)),m=h*Q9((n+s)/(f+s))-1,m=t7(e-1,n7(m,h-1)),g=t7(m,n7(0,g))):(g=0,m=-1);const y=r7(g,m,a),{top:b,bottom:w}=u7(i,r,o,y),_=Q9(e/h);return{items:y,offsetTop:b,offsetBottom:_*f+(_-1)*s-w,top:b,bottom:w,itemHeight:f,itemWidth:p}}))),C),a4(f4(D,h4((e=>null!==e)),g4((e=>e.length))),_),a4(f4(O4(E,O,C,A),h4((([e,t,{items:n}])=>n.length>0&&0!==t.height&&0!==e.height)),g4((([e,t,{items:n},r])=>{const{top:o,bottom:i}=u7(e,r,t,n);return[o,i]})),v4(z8)),n);const B=c4(!1);a4(f4(r,k4(B),g4((([e,t])=>t||0!==e))),B);const V=s4(f4(E4(C),h4((({items:e})=>e.length>0)),k4(_,B),h4((([{items:e},t,n])=>n&&e[e.length-1].index===t-1)),g4((([,e])=>e-1)),v4())),L=s4(f4(E4(C),h4((({items:e})=>e.length>0&&0===e[0].index)),m4(0),v4())),z=s4(f4(E4(C),k4(I),h4((([{items:e},t])=>e.length>0&&!t)),g4((([{items:e}])=>({startIndex:e[0].index,endIndex:e[e.length-1].index}))),v4(U8),w4(0)));a4(z,f.scrollSeekRangeChanged),a4(f4(S,k4(E,O,_,A),g4((([e,t,n,r,o])=>{const i=x8(e),{align:a,behavior:u,offset:l}=i;let c=i.index;"LAST"===c&&(c=r-1),c=n7(0,c,t7(r-1,c));let s=l7(t,o,n,c);return"end"===a?s=Z9(s-t.height+n.height):"center"===a&&(s=Z9(s-t.height/2+n.height/2)),l&&(s+=l),{top:s,behavior:u}}))),a);const U=d4(f4(C,g4((e=>e.offsetBottom+e.bottom))),0);return a4(f4(h,g4((e=>({width:e.visibleWidth,height:e.visibleHeight})))),E),{data:D,totalCount:_,viewportDimensions:E,itemDimensions:O,scrollTop:r,scrollHeight:x,overscan:e,scrollBy:i,scrollTo:a,scrollToIndex:S,smoothScrollTargetReached:u,windowViewportRect:h,windowScrollTo:b,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,deviation:j,scrollContainerState:l,footerHeight:c,headerHeight:s,initialItemCount:k,gap:A,restoreStateFrom:F,...f,initialTopMostItemIndex:P,horizontalDirection:N,gridState:C,totalListHeight:U,...d,startReached:L,endReached:V,rangeChanged:z,stateChanged:R,propsReady:p,stateRestoreInProgress:I,...w}}),X6(K8,U4,F8,t9,I8,c9,P4));function u7(e,t,n,r){const{height:o}=n;if(void 0===o||0===r.length)return{top:0,bottom:0};return{top:l7(e,t,n,r[0].index),bottom:l7(e,t,n,r[r.length-1].index)+o}}function l7(e,t,n,r){const o=c7(e.width,n.width,t.column),i=e7(r/o),a=i*n.height+n7(0,i-1)*t.row;return a>0?a+t.row:a}function c7(e,t,n){return n7(1,e7((e+n)/(e7(t)+n)))}const s7=S4((([e,t])=>({...e,...t})),X6(a7,S4((()=>{const e=c4((e=>`Item ${e}`)),t=c4({}),n=c4(null),r=c4("virtuoso-grid-item"),o=c4("virtuoso-grid-list"),i=c4(k9),a=c4("div"),u=c4(t4),l=(e,n=null)=>d4(f4(t,g4((t=>t[e])),v4()),n),c=c4(!1),s=c4(!1);return a4(E4(s),c),{readyStateChanged:c,reportReadyState:s,context:n,itemContent:e,components:t,computeItemKey:i,itemClassName:r,listClassName:o,headerFooterTag:a,scrollerRef:u,FooterComponent:l("Footer"),HeaderComponent:l("Header"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),ScrollerComponent:l("Scroller","div"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}})))),d7=u.a.memo((function(){const e=b7("gridState"),t=b7("listClassName"),n=b7("itemClassName"),r=b7("itemContent"),o=b7("computeItemKey"),i=b7("isSeeking"),l=y7("scrollHeight"),c=b7("ItemComponent"),s=b7("ListComponent"),d=b7("ScrollSeekPlaceholder"),f=b7("context"),p=y7("itemDimensions"),v=y7("gap"),h=b7("log"),g=b7("stateRestoreInProgress"),m=y7("reportReadyState"),y=T4(u.a.useMemo((()=>e=>{const t=e.parentElement.parentElement.scrollHeight;l(t);const n=e.firstChild;if(n){const{width:e,height:t}=n.getBoundingClientRect();p({width:e,height:t})}v({row:C7("row-gap",getComputedStyle(e).rowGap,h),column:C7("column-gap",getComputedStyle(e).columnGap,h)})}),[l,p,v,h]),!0,!1);return g?null:(R4((()=>{e.itemHeight>0&&e.itemWidth>0&&m(!0)}),[e]),z6.jsx(s,{ref:y,className:t,...I9(s,f),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map((t=>{const u=o(t.index,t.data,f);return i?z6.jsx(d,{...I9(d,f),index:t.index,height:e.itemHeight,width:e.itemWidth},u):Object(a.createElement)(c,{...I9(c,f),className:n,"data-index":t.index,key:u},r(t.index,t.data,f))}))}))})),f7=u.a.memo((function(){const e=b7("HeaderComponent"),t=y7("headerHeight"),n=b7("headerFooterTag"),r=T4(u.a.useMemo((()=>e=>t(V4(e,"height"))),[t]),!0,!1),o=b7("context");return e?z6.jsx(n,{ref:r,children:z6.jsx(e,{...I9(e,o)})}):null})),p7=u.a.memo((function(){const e=b7("FooterComponent"),t=y7("footerHeight"),n=b7("headerFooterTag"),r=T4(u.a.useMemo((()=>e=>t(V4(e,"height"))),[t]),!0,!1),o=b7("context");return e?z6.jsx(n,{ref:r,children:z6.jsx(e,{...I9(e,o)})}):null})),v7=({children:e})=>{const t=u.a.useContext(_9),n=y7("itemDimensions"),r=y7("viewportDimensions"),o=T4(u.a.useMemo((()=>e=>{r(e.getBoundingClientRect())}),[r]),!0,!1);return u.a.useEffect((()=>{t&&(r({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))}),[t,r,n]),z6.jsx("div",{style:R9(!1),ref:o,children:e})},h7=({children:e})=>{const t=u.a.useContext(_9),n=y7("windowViewportRect"),r=y7("itemDimensions"),o=b7("customScrollParent"),i=b9(n,o,!1);return u.a.useEffect((()=>{t&&(r({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))}),[t,n,r]),z6.jsx("div",{ref:i,style:R9(!1),children:e})},g7=u.a.memo((function({...e}){const t=b7("useWindowScroll"),n=b7("customScrollParent"),r=n||t?k7:_7,o=n||t?h7:v7;return z6.jsx(r,{...e,children:z6.jsxs(o,{children:[z6.jsx(f7,{}),z6.jsx(d7,{}),z6.jsx(p7,{})]})})})),{Component:m7,usePublisher:y7,useEmitterValue:b7,useEmitter:w7}=A4(s7,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},g7),_7=N9({usePublisher:y7,useEmitterValue:b7,useEmitter:w7}),k7=B9({usePublisher:y7,useEmitterValue:b7,useEmitter:w7});function C7(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,F4.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}const E7=m7,O7=S4((([e,t])=>({...e,...t})),X6(h9,S4((()=>{const e=c4((e=>z6.jsxs("td",{children:["Item $",e]}))),t=c4(null),n=c4(null),r=c4(null),o=c4({}),i=c4(k9),a=c4(t4),u=(e,t=null)=>d4(f4(o,g4((t=>t[e])),v4()),t);return{context:t,itemContent:e,fixedHeaderContent:n,fixedFooterContent:r,components:o,computeItemKey:i,scrollerRef:a,TableComponent:u("Table","table"),TableHeadComponent:u("TableHead","thead"),TableFooterComponent:u("TableFoot","tfoot"),TableBodyComponent:u("TableBody","tbody"),TableRowComponent:u("TableRow","tr"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),FillerRow:u("FillerRow")}})))),S7=({height:e})=>z6.jsx("tr",{children:z6.jsx("td",{style:{height:e}})}),x7=({height:e})=>z6.jsx("tr",{children:z6.jsx("td",{style:{height:e,padding:0,border:0}})}),j7={overflowAnchor:"none"},D7=u.a.memo((function(){const e=M7("listState"),t=P7("sizeRanges"),n=M7("useWindowScroll"),r=M7("customScrollParent"),o=P7("windowScrollContainerState"),i=P7("scrollContainerState"),l=r||n?o:i,c=M7("itemContent"),s=M7("trackItemSizes"),d=M7("itemSize"),f=M7("log"),{callbackRef:p,ref:v}=N4(t,d,s,l,f,void 0,r,!1,M7("skipAnimationFrameInResizeObserver")),[h,g]=u.a.useState(0);T7("deviation",(e=>{h!==e&&(v.current.style.marginTop=`${e}px`,g(e))}));const m=M7("EmptyPlaceholder"),y=M7("ScrollSeekPlaceholder")||S7,b=M7("FillerRow")||x7,w=M7("TableBodyComponent"),_=M7("TableRowComponent"),k=M7("computeItemKey"),C=M7("isSeeking"),E=M7("paddingTopAddition"),O=M7("firstItemIndex"),S=M7("statefulTotalCount"),x=M7("context");if(0===S&&m)return z6.jsx(m,{...I9(m,x)});const j=e.offsetTop+E+h,D=e.offsetBottom,A=j>0?z6.jsx(b,{height:j,context:x},"padding-top"):null,R=D>0?z6.jsx(b,{height:D,context:x},"padding-bottom"):null,F=e.items.map((e=>{const t=e.originalIndex,n=k(t+O,e.data,x);return C?Object(a.createElement)(y,{...I9(y,x),key:n,index:e.index,height:e.size,type:e.type||"item"}):Object(a.createElement)(_,{...I9(_,x),...P9(_,e.data),key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:j7},c(e.index,e.data,x))}));return z6.jsxs(w,{ref:p,"data-testid":"virtuoso-item-list",...I9(w,x),children:[A,F,R]})})),A7=({children:e})=>{const t=u.a.useContext(w9),n=P7("viewportHeight"),r=P7("fixedItemHeight"),o=T4(u.a.useMemo((()=>$6(n,(e=>V4(e,"height")))),[n]),!0,M7("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),z6.jsx("div",{style:R9(!1),ref:o,"data-viewport-type":"element",children:e})},R7=({children:e})=>{const t=u.a.useContext(w9),n=P7("windowViewportRect"),r=P7("fixedItemHeight"),o=M7("customScrollParent"),i=b9(n,o,M7("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),z6.jsx("div",{ref:i,style:R9(!1),"data-viewport-type":"window",children:e})},F7=u.a.memo((function(e){const t=M7("useWindowScroll"),n=M7("customScrollParent"),r=P7("fixedHeaderHeight"),o=P7("fixedFooterHeight"),i=M7("fixedHeaderContent"),a=M7("fixedFooterContent"),l=M7("context"),c=T4(u.a.useMemo((()=>$6(r,(e=>V4(e,"height")))),[r]),!0,M7("skipAnimationFrameInResizeObserver")),s=T4(u.a.useMemo((()=>$6(o,(e=>V4(e,"height")))),[o]),!0,M7("skipAnimationFrameInResizeObserver")),d=n||t?B7:N7,f=n||t?R7:A7,p=M7("TableComponent"),v=M7("TableHeadComponent"),h=M7("TableFooterComponent"),g=i?z6.jsx(v,{style:{zIndex:2,position:"sticky",top:0},ref:c,...I9(v,l),children:i()},"TableHead"):null,m=a?z6.jsx(h,{style:{zIndex:1,position:"sticky",bottom:0},ref:s,...I9(h,l),children:a()},"TableFoot"):null;return z6.jsx(d,{...e,children:z6.jsx(f,{children:z6.jsxs(p,{style:{borderSpacing:0,overflowAnchor:"none"},...I9(p,l),children:[g,z6.jsx(D7,{},"TableBody"),m]})})})})),{Component:I7,usePublisher:P7,useEmitterValue:M7,useEmitter:T7}=A4(O7,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},F7),N7=N9({usePublisher:P7,useEmitterValue:M7,useEmitter:T7}),B7=B9({usePublisher:P7,useEmitterValue:M7,useEmitter:T7}),V7=I7,L7=Object(a.createContext)(null);function z7(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return u.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(z7(e)):LW.isFragment(e)&&e.props?n=n.concat(z7(e.props.children,t)):n.push(e))})),n}var U7=a.createContext(null);var H7=new Map;var q7=new uJ((function(e){e.forEach((function(e){var t,n=e.target;null===(t=H7.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var W7=function(e){jd(n,e);var t=QW(n);function n(){return sl(this,n),t.apply(this,arguments)}return ll(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component);function $7(e,t){var n=e.children,r=e.disabled,o=a.useRef(null),i=a.useRef(null),u=a.useContext(U7),l="function"==typeof n,c=l?n(o):n,s=a.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&a.isValidElement(c)&&WW(c),f=d?c.ref:null,p=qW(f,o),v=function(){var e;return MG(o.current)||(o.current&&"object"===Ln(o.current)?MG(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||MG(i.current)};a.useImperativeHandle(t,(function(){return v()}));var h=a.useRef(e);h.current=e;var g=a.useCallback((function(e){var t=h.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),i=o.width,a=o.height,l=e.offsetWidth,c=e.offsetHeight,d=Math.floor(i),f=Math.floor(a);if(s.current.width!==d||s.current.height!==f||s.current.offsetWidth!==l||s.current.offsetHeight!==c){var p={width:d,height:f,offsetWidth:l,offsetHeight:c};s.current=p;var v=l===Math.round(i)?i:l,g=c===Math.round(a)?a:c,m=GW(GW({},p),{},{offsetWidth:v,offsetHeight:g});null==u||u(m,e,r),n&&Promise.resolve().then((function(){n(m,e)}))}}),[]);return a.useEffect((function(){var e,t,n=v();return n&&!r&&(e=n,t=g,H7.has(e)||(H7.set(e,new Set),q7.observe(e)),H7.get(e).add(t)),function(){return function(e,t){H7.has(e)&&(H7.get(e).delete(t),H7.get(e).size||(q7.unobserve(e),H7.delete(e)))}(n,g)}}),[o.current,r]),a.createElement(W7,{ref:i},d?a.cloneElement(c,{ref:p}):c)}var G7=a.forwardRef($7);function K7(e,t){var n=e.children;return("function"==typeof n?[n]:z7(n)).map((function(n,r){var o=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return a.createElement(G7,e$({},e,{key:o,ref:0===r?t:void 0}),n)}))}var Y7=a.forwardRef(K7);Y7.Collection=function(e){var t=e.children,n=e.onBatchResize,r=a.useRef(0),o=a.useRef([]),i=a.useContext(U7),u=a.useCallback((function(e,t,a){r.current+=1;var u=r.current;o.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){u===r.current&&(null==n||n(o.current),o.current=[])})),null==i||i(e,t,a)}),[n,i]);return a.createElement(U7.Provider,{value:u},t)};var J7={width:0,height:0,left:0,top:0};function X7(e,t){var n=a.useRef(e),r=Tf(a.useState({}),2)[1];return[n.current,function(e){var o="function"==typeof e?e(n.current):e;o!==n.current&&t(o,n.current),n.current=o,r({})}]}var Z7=Math.pow(.995,20);function Q7(e){var t=Tf(Object(a.useState)(0),2),n=t[0],r=t[1],o=Object(a.useRef)(0),i=Object(a.useRef)();return i.current=e,yW((function(){var e;null===(e=i.current)||void 0===e||e.call(i)}),[n]),function(){o.current===n&&(o.current+=1,r(o.current))}}var eee={width:0,height:0,left:0,top:0,right:0};function tee(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}function nee(e){return String(e).replace(/"/g,"TABS_DQ")}function ree(e,t,n,r){return!(!n||r||!1===e||void 0===e&&(!1===t||null===t))}var oee=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,i=e.style;return r&&!1!==r.showAdd?a.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(null==o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null})),iee=a.forwardRef((function(e,t){var n,r=e.position,o=e.prefixCls,i=e.extra;if(!i)return null;var u={};return"object"!==Ln(i)||a.isValidElement(i)?u.right=i:u=i,"right"===r&&(n=u.right),"left"===r&&(n=u.left),n?a.createElement("div",{className:"".concat(o,"-extra-content"),ref:t},n):null})),aee=a.createContext(null),uee=[];var lee="data-rc-order",cee="data-rc-priority",see="rc-util-key",dee=new Map;function fee(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):see}function pee(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function vee(e){return Array.from((dee.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function hee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!hW())return null;var n=t.csp,r=t.prepend,o=t.priority,i=void 0===o?0:o,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),u="prependQueue"===a,l=document.createElement("style");l.setAttribute(lee,a),u&&i&&l.setAttribute(cee,"".concat(i)),null!=n&&n.nonce&&(l.nonce=null==n?void 0:n.nonce),l.innerHTML=e;var c=pee(t),s=c.firstChild;if(r){if(u){var d=(t.styles||vee(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(lee)))return!1;var t=Number(e.getAttribute(cee)||0);return i>=t}));if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,s)}else c.appendChild(l);return l}function gee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pee(t);return(t.styles||vee(n)).find((function(n){return n.getAttribute(fee(t))===e}))}function mee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=gee(e,t);n&&pee(t).removeChild(n)}function yee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=pee(n),o=vee(r),i=GW(GW({},n),{},{styles:o});!function(e,t){var n=dee.get(e);if(!n||!IG(document,n)){var r=hee("",t),o=r.parentNode;dee.set(e,o),e.removeChild(r)}}(r,i);var a=gee(t,i);if(a){var u,l,c;if(null!==(u=i.csp)&&void 0!==u&&u.nonce&&a.nonce!==(null===(l=i.csp)||void 0===l?void 0:l.nonce))a.nonce=null===(c=i.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=hee(e,i);return s.setAttribute(fee(i),t),s}function bee(e){return"undefined"!=typeof document&&e&&e instanceof Element?function(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,o,i=n.style;if(i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll",e){var a=getComputedStyle(e);i.scrollbarColor=a.scrollbarColor,i.scrollbarWidth=a.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),l=parseInt(u.width,10),c=parseInt(u.height,10);try{var s=l?"width: ".concat(u.width,";"):"",d=c?"height: ".concat(u.height,";"):"";yee("\n#".concat(t,"::-webkit-scrollbar {\n").concat(s,"\n").concat(d,"\n}"),t)}catch(e){console.error(e),r=l,o=c}}document.body.appendChild(n);var f=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=e&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),mee(t),{width:f,height:p}}(e):{width:0,height:0}}var wee="rc-util-locker-".concat(Date.now()),_ee=0;function kee(e){var t=!!e,n=Tf(a.useState((function(){return _ee+=1,"".concat(wee,"_").concat(_ee)})),1)[0];mW((function(){if(t){var e=bee(document.body).width,r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;yee("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else mee(n);return function(){mee(n)}}),[t,n])}var Cee=function(e){return!1!==e&&(hW()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},Eee=a.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer;e.debug;var i=e.autoDestroy,u=void 0===i||i,c=e.children,s=Tf(a.useState(n),2),d=s[0],f=s[1],p=d||n;a.useEffect((function(){(u||n)&&f(n)}),[n,u]);var v=Tf(a.useState((function(){return Cee(o)})),2),h=v[0],g=v[1];a.useEffect((function(){var e=Cee(o);g(null!=e?e:null)}));var m=function(e,t){var n=Tf(a.useState((function(){return hW()?document.createElement("div"):null})),1)[0],r=a.useRef(!1),o=a.useContext(aee),i=Tf(a.useState(uee),2),u=i[0],l=i[1],c=o||(r.current?void 0:function(e){l((function(t){return[e].concat(tl(t))}))});function s(){n.parentElement||document.body.appendChild(n),r.current=!0}function d(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return mW((function(){return e?o?o(s):s():d(),d}),[e]),mW((function(){u.length&&(u.forEach((function(e){return e()})),l(uee))}),[u]),[n,c]}(p&&!h),y=Tf(m,2),b=y[0],w=y[1],_=null!=h?h:b;kee(r&&n&&hW()&&(_===b||_===document.body));var k=null;c&&WW(c)&&t&&(k=c.ref);var C=qW(k,t);if(!p||!hW()||void 0===h)return null;var E=!1===_||!1,O=c;return t&&(O=a.cloneElement(c,{ref:C})),a.createElement(aee.Provider,{value:w},E?O:Object(l.createPortal)(O,_))}));function Oee(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function See(e){return function(e){return Oee(e)instanceof ShadowRoot}(e)?Oee(e):null}var xee=0,jee=GW({},a).useId;const Dee=jee?function(e){var t=jee();return e||t}:function(e){var t=Tf(a.useState("ssr-id"),2),n=t[0],r=t[1];return a.useEffect((function(){var e=xee;xee+=1,r("rc_unique_".concat(e))}),[]),e||n};function Aee(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,i=r||{},u=i.className,l=i.content,c=o.x,s=void 0===c?0:c,d=o.y,f=void 0===d?0:d,p=a.useRef();if(!n||!n.points)return null;var v={position:"absolute"};if(!1!==n.autoArrow){var h=n.points[0],g=n.points[1],m=h[0],y=h[1],b=g[0],w=g[1];m!==b&&["t","b"].includes(m)?"t"===m?v.top=0:v.bottom=0:v.top=f,y!==w&&["l","r"].includes(y)?"l"===y?v.left=0:v.right=0:v.left=s}return a.createElement("div",{ref:p,className:I()("".concat(t,"-arrow"),u),style:v},l)}function Ree(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,i=e.motion;return o?a.createElement(kK,e$({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:I()("".concat(t,"-mask"),n)})})):null}var Fee=a.memo((function(e){return e.children}),(function(e,t){return t.cache})),Iee=a.forwardRef((function(e,t){var n=e.popup,r=e.className,o=e.prefixCls,i=e.style,u=e.target,l=e.onVisibleChanged,c=e.open,s=e.keepDom,d=e.fresh,f=e.onClick,p=e.mask,v=e.arrow,h=e.arrowPos,g=e.align,m=e.motion,y=e.maskMotion,b=e.forceRender,w=e.getPopupContainer,_=e.autoDestroy,k=e.portal,C=e.zIndex,E=e.onMouseEnter,O=e.onMouseLeave,S=e.onPointerEnter,x=e.ready,j=e.offsetX,D=e.offsetY,A=e.offsetR,R=e.offsetB,F=e.onAlign,P=e.onPrepare,M=e.stretch,T=e.targetWidth,N=e.targetHeight,B="function"==typeof n?n():n,V=c||s,L=(null==w?void 0:w.length)>0,z=Tf(a.useState(!w||!L),2),U=z[0],H=z[1];if(mW((function(){!U&&L&&u&&H(!0)}),[U,L,u]),!U)return null;var q="auto",W={left:"-1000vw",top:"-1000vh",right:q,bottom:q};if(x||!c){var $,G=g.points,K=g.dynamicInset||(null===($=g._experimental)||void 0===$?void 0:$.dynamicInset),Y=K&&"r"===G[0][1],J=K&&"b"===G[0][0];Y?(W.right=A,W.left=q):(W.left=j,W.right=q),J?(W.bottom=R,W.top=q):(W.top=D,W.bottom=q)}var X={};return M&&(M.includes("height")&&N?X.height=N:M.includes("minHeight")&&N&&(X.minHeight=N),M.includes("width")&&T?X.width=T:M.includes("minWidth")&&T&&(X.minWidth=T)),c||(X.pointerEvents="none"),a.createElement(k,{open:b||V,getContainer:w&&function(){return w(u)},autoDestroy:_},a.createElement(Ree,{prefixCls:o,open:c,zIndex:C,mask:p,motion:y}),a.createElement(Y7,{onResize:F,disabled:!c},(function(e){return a.createElement(kK,e$({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(o,"-hidden")},m,{onAppearPrepare:P,onEnterPrepare:P,visible:c,onVisibleChanged:function(e){var t;null==m||null===(t=m.onVisibleChanged)||void 0===t||t.call(m,e),l(e)}}),(function(n,u){var l=n.className,s=n.style,p=I()(o,l,r);return a.createElement("div",{ref:HW(e,t,u),className:p,style:GW(GW(GW(GW({"--arrow-x":"".concat(h.x||0,"px"),"--arrow-y":"".concat(h.y||0,"px")},W),X),s),{},{boxSizing:"border-box",zIndex:C},i),onMouseEnter:E,onMouseLeave:O,onPointerEnter:S,onClick:f},v&&a.createElement(Aee,{prefixCls:o,arrow:v,arrowPos:h,align:g}),a.createElement(Fee,{cache:!c&&!d},B))}))})))})),Pee=a.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=WW(n),i=a.useCallback((function(e){UW(t,r?r(e):e)}),[r]),u=qW(i,n.ref);return o?a.cloneElement(n,{ref:u}):n})),Mee=a.createContext(null);function Tee(e){return e?Array.isArray(e)?e:[e]:[]}function Nee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Bee(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Vee(e){return e.ownerDocument.defaultView}function Lee(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=Vee(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function zee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function Uee(e){return zee(parseFloat(e),0)}function Hee(e,t){var n=GW({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=Vee(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,i=t.borderTopWidth,a=t.borderBottomWidth,u=t.borderLeftWidth,l=t.borderRightWidth,c=e.getBoundingClientRect(),s=e.offsetHeight,d=e.clientHeight,f=e.offsetWidth,p=e.clientWidth,v=Uee(i),h=Uee(a),g=Uee(u),m=Uee(l),y=zee(Math.round(c.width/f*1e3)/1e3),b=zee(Math.round(c.height/s*1e3)/1e3),w=(f-p-g-m)*y,_=(s-d-v-h)*b,k=v*b,C=h*b,E=g*y,O=m*y,S=0,x=0;if("clip"===r){var j=Uee(o);S=j*y,x=j*b}var D=c.x+E-S,A=c.y+k-x,R=D+c.width+2*S-E-O-w,F=A+c.height+2*x-k-C-_;n.left=Math.max(n.left,D),n.top=Math.max(n.top,A),n.right=Math.min(n.right,R),n.bottom=Math.min(n.bottom,F)}})),n}function qee(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function Wee(e,t){var n=Tf(t||[],2),r=n[0],o=n[1];return[qee(e.width,r),qee(e.height,o)]}function $ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function Gee(e,t){var n,r=t[0],o=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function Kee(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var Yee=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const Jee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eee,t=a.forwardRef((function(t,n){var r=t.prefixCls,o=void 0===r?"rc-trigger-popup":r,i=t.children,u=t.action,l=void 0===u?"hover":u,c=t.showAction,s=t.hideAction,d=t.popupVisible,f=t.defaultPopupVisible,p=t.onPopupVisibleChange,v=t.afterPopupVisibleChange,h=t.mouseEnterDelay,g=t.mouseLeaveDelay,m=void 0===g?.1:g,y=t.focusDelay,b=t.blurDelay,w=t.mask,_=t.maskClosable,k=void 0===_||_,C=t.getPopupContainer,E=t.forceRender,O=t.autoDestroy,S=t.destroyPopupOnHide,x=t.popup,j=t.popupClassName,D=t.popupStyle,A=t.popupPlacement,R=t.builtinPlacements,F=void 0===R?{}:R,P=t.popupAlign,M=t.zIndex,T=t.stretch,N=t.getPopupClassNameFromAlign,B=t.fresh,V=t.alignPoint,L=t.onPopupClick,z=t.onPopupAlign,U=t.arrow,H=t.popupMotion,q=t.maskMotion,W=t.popupTransitionName,$=t.popupAnimation,G=t.maskTransitionName,K=t.maskAnimation,Y=t.className,J=t.getTriggerDOMNode,X=qz(t,Yee),Z=O||S||!1,Q=Tf(a.useState(!1),2),ee=Q[0],te=Q[1];mW((function(){te(VG())}),[]);var ne=a.useRef({}),re=a.useContext(Mee),oe=a.useMemo((function(){return{registerSubPopup:function(e,t){ne.current[e]=t,null==re||re.registerSubPopup(e,t)}}}),[re]),ie=Dee(),ae=Tf(a.useState(null),2),ue=ae[0],le=ae[1],ce=vW((function(e){PG(e)&&ue!==e&&le(e),null==re||re.registerSubPopup(ie,e)})),se=Tf(a.useState(null),2),de=se[0],fe=se[1],pe=a.useRef(null),ve=vW((function(e){PG(e)&&de!==e&&(fe(e),pe.current=e)})),he=a.Children.only(i),ge=(null==he?void 0:he.props)||{},me={},ye=vW((function(e){var t,n,r=de;return(null==r?void 0:r.contains(e))||(null===(t=See(r))||void 0===t?void 0:t.host)===e||e===r||(null==ue?void 0:ue.contains(e))||(null===(n=See(ue))||void 0===n?void 0:n.host)===e||e===ue||Object.values(ne.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),be=Bee(o,H,$,W),we=Bee(o,q,K,G),_e=Tf(a.useState(f||!1),2),ke=_e[0],Ce=_e[1],Ee=null!=d?d:ke,Oe=vW((function(e){void 0===d&&Ce(e)}));mW((function(){Ce(d||!1)}),[d]);var Se=a.useRef(Ee);Se.current=Ee;var xe=a.useRef([]);xe.current=[];var je=vW((function(e){var t;Oe(e),(null!==(t=xe.current[xe.current.length-1])&&void 0!==t?t:Ee)!==e&&(xe.current.push(e),null==p||p(e))})),De=a.useRef(),Ae=function(){clearTimeout(De.current)},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ae(),0===t?je(e):De.current=setTimeout((function(){je(e)}),1e3*t)};a.useEffect((function(){return Ae}),[]);var Fe=Tf(a.useState(!1),2),Ie=Fe[0],Pe=Fe[1];mW((function(e){e&&!Ee||Pe(!0)}),[Ee]);var Me=Tf(a.useState(null),2),Te=Me[0],Ne=Me[1],Be=Tf(a.useState([0,0]),2),Ve=Be[0],Le=Be[1],ze=function(e){Le([e.clientX,e.clientY])},Ue=function(e,t,n,r,o,i,u){var l=Tf(a.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),2),c=l[0],s=l[1],d=a.useRef(0),f=a.useMemo((function(){return t?Lee(t):[]}),[t]),p=a.useRef({});e||(p.current={});var v=vW((function(){if(t&&n&&e){var a,l,c,d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,r=D.x+e,o=D.y+t,i=r+B,a=o+N,u=Math.max(r,n.left),l=Math.max(o,n.top),c=Math.min(i,n.right),s=Math.min(a,n.bottom);return Math.max(0,(c-u)*(s-l))},v=function(){le=D.y+we,ce=le+N,se=D.x+be,de=se+B},h=t,g=h.ownerDocument,m=Vee(h).getComputedStyle(h),y=m.width,b=m.height,w=m.position,_=h.style.left,k=h.style.top,C=h.style.right,E=h.style.bottom,O=h.style.overflow,S=GW(GW({},o[r]),i),x=g.createElement("div");if(null===(a=h.parentElement)||void 0===a||a.appendChild(x),x.style.left="".concat(h.offsetLeft,"px"),x.style.top="".concat(h.offsetTop,"px"),x.style.position=w,x.style.height="".concat(h.offsetHeight,"px"),x.style.width="".concat(h.offsetWidth,"px"),h.style.left="0",h.style.top="0",h.style.right="auto",h.style.bottom="auto",h.style.overflow="hidden",Array.isArray(n))c={x:n[0],y:n[1],width:0,height:0};else{var j=n.getBoundingClientRect();c={x:j.x,y:j.y,width:j.width,height:j.height}}var D=h.getBoundingClientRect(),A=g.documentElement,R=A.clientWidth,F=A.clientHeight,I=A.scrollWidth,P=A.scrollHeight,M=A.scrollTop,T=A.scrollLeft,N=D.height,B=D.width,V=c.height,L=c.width,z={left:0,top:0,right:R,bottom:F},U={left:-T,top:-M,right:I-T,bottom:P-M},H=S.htmlRegion,q="visible",W="visibleFirst";"scroll"!==H&&H!==W&&(H=q);var $=H===W,G=Hee(U,f),K=Hee(z,f),Y=H===q?K:G,J=$?K:Y;h.style.left="auto",h.style.top="auto",h.style.right="0",h.style.bottom="0";var X=h.getBoundingClientRect();h.style.left=_,h.style.top=k,h.style.right=C,h.style.bottom=E,h.style.overflow=O,null===(l=h.parentElement)||void 0===l||l.removeChild(x);var Z=zee(Math.round(B/parseFloat(y)*1e3)/1e3),Q=zee(Math.round(N/parseFloat(b)*1e3)/1e3);if(0===Z||0===Q||PG(n)&&!b$(n))return;var ee=S.offset,te=S.targetOffset,ne=Tf(Wee(D,ee),2),re=ne[0],oe=ne[1],ie=Tf(Wee(c,te),2),ae=ie[0],ue=ie[1];c.x-=ae,c.y-=ue;var le,ce,se,de,fe=Tf(S.points||[],2),pe=fe[0],ve=$ee(fe[1]),he=$ee(pe),ge=Gee(c,ve),me=Gee(D,he),ye=GW({},S),be=ge.x-me.x+re,we=ge.y-me.y+oe,_e=d(be,we),ke=d(be,we,K),Ce=Gee(c,["t","l"]),Ee=Gee(D,["t","l"]),Oe=Gee(c,["b","r"]),Se=Gee(D,["b","r"]),xe=S.overflow||{},je=xe.adjustX,De=xe.adjustY,Ae=xe.shiftX,Re=xe.shiftY,Fe=function(e){return"boolean"==typeof e?e:e>=0};v();var Ie=Fe(De),Pe=he[0]===ve[0];if(Ie&&"t"===he[0]&&(ce>J.bottom||p.current.bt)){var Me=we;Pe?Me-=N-V:Me=Ce.y-Se.y-oe;var Te=d(be,Me),Ne=d(be,Me,K);Te>_e||Te===_e&&(!$||Ne>=ke)?(p.current.bt=!0,we=Me,oe=-oe,ye.points=[Kee(he,0),Kee(ve,0)]):p.current.bt=!1}if(Ie&&"b"===he[0]&&(le<J.top||p.current.tb)){var Be=we;Pe?Be+=N-V:Be=Oe.y-Ee.y-oe;var Ve=d(be,Be),Le=d(be,Be,K);Ve>_e||Ve===_e&&(!$||Le>=ke)?(p.current.tb=!0,we=Be,oe=-oe,ye.points=[Kee(he,0),Kee(ve,0)]):p.current.tb=!1}var ze=Fe(je),Ue=he[1]===ve[1];if(ze&&"l"===he[1]&&(de>J.right||p.current.rl)){var He=be;Ue?He-=B-L:He=Ce.x-Se.x-re;var qe=d(He,we),We=d(He,we,K);qe>_e||qe===_e&&(!$||We>=ke)?(p.current.rl=!0,be=He,re=-re,ye.points=[Kee(he,1),Kee(ve,1)]):p.current.rl=!1}if(ze&&"r"===he[1]&&(se<J.left||p.current.lr)){var $e=be;Ue?$e+=B-L:$e=Oe.x-Ee.x-re;var Ge=d($e,we),Ke=d($e,we,K);Ge>_e||Ge===_e&&(!$||Ke>=ke)?(p.current.lr=!0,be=$e,re=-re,ye.points=[Kee(he,1),Kee(ve,1)]):p.current.lr=!1}v();var Ye=!0===Ae?0:Ae;"number"==typeof Ye&&(se<K.left&&(be-=se-K.left-re,c.x+L<K.left+Ye&&(be+=c.x-K.left+L-Ye)),de>K.right&&(be-=de-K.right-re,c.x>K.right-Ye&&(be+=c.x-K.right+Ye)));var Je=!0===Re?0:Re;"number"==typeof Je&&(le<K.top&&(we-=le-K.top-oe,c.y+V<K.top+Je&&(we+=c.y-K.top+V-Je)),ce>K.bottom&&(we-=ce-K.bottom-oe,c.y>K.bottom-Je&&(we+=c.y-K.bottom+Je)));var Xe=D.x+be,Ze=Xe+B,Qe=D.y+we,et=Qe+N,tt=c.x,nt=tt+L,rt=c.y,ot=rt+V,it=(Math.max(Xe,tt)+Math.min(Ze,nt))/2-Xe,at=(Math.max(Qe,rt)+Math.min(et,ot))/2-Qe;null==u||u(t,ye);var ut=X.right-D.x-(be+D.width),lt=X.bottom-D.y-(we+D.height);s({ready:!0,offsetX:be/Z,offsetY:we/Q,offsetR:ut/Z,offsetB:lt/Q,arrowX:it/Z,arrowY:at/Q,scaleX:Z,scaleY:Q,align:ye})}})),h=function(){s((function(e){return GW(GW({},e),{},{ready:!1})}))};return mW(h,[r]),mW((function(){e||h()}),[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,function(){d.current+=1;var e=d.current;Promise.resolve().then((function(){d.current===e&&v()}))}]}(Ee,ue,V?Ve:de,A,F,P,z),He=Tf(Ue,11),qe=He[0],We=He[1],$e=He[2],Ge=He[3],Ke=He[4],Ye=He[5],Je=He[6],Xe=He[7],Ze=He[8],Qe=He[9],et=He[10],tt=function(e,t,n,r){return a.useMemo((function(){var o=Tee(null!=n?n:t),i=Tee(null!=r?r:t),a=new Set(o),u=new Set(i);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[a,u]}),[e,t,n,r])}(ee,l,c,s),nt=Tf(tt,2),rt=nt[0],ot=nt[1],it=rt.has("click"),at=ot.has("click")||ot.has("contextMenu"),ut=vW((function(){Ie||et()}));!function(e,t,n,r,o){mW((function(){if(e&&t&&n){var i=function(){r(),o()},a=n,u=Lee(t),l=Lee(a),c=Vee(a),s=new Set([c].concat(tl(u),tl(l)));return s.forEach((function(e){e.addEventListener("scroll",i,{passive:!0})})),c.addEventListener("resize",i,{passive:!0}),r(),function(){s.forEach((function(e){e.removeEventListener("scroll",i),c.removeEventListener("resize",i)}))}}}),[e,t,n])}(Ee,de,ue,ut,(function(){Se.current&&V&&at&&Re(!1)})),mW((function(){ut()}),[Ve,A]),mW((function(){!Ee||null!=F&&F[A]||ut()}),[JSON.stringify(P)]);var lt=a.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u,l=i[a];if(Nee(null===(u=e[l])||void 0===u?void 0:u.points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(F,o,Qe,V);return I()(e,null==N?void 0:N(Qe))}),[Qe,N,F,o,V]);a.useImperativeHandle(n,(function(){return{nativeElement:pe.current,forceAlign:ut}}));var ct=Tf(a.useState(0),2),st=ct[0],dt=ct[1],ft=Tf(a.useState(0),2),pt=ft[0],vt=ft[1],ht=function(){if(T&&de){var e=de.getBoundingClientRect();dt(e.width),vt(e.height)}};function gt(e,t,n,r){me[e]=function(o){var i;null==r||r(o),Re(t,n);for(var a=arguments.length,u=new Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];null===(i=ge[e])||void 0===i||i.call.apply(i,[ge,o].concat(u))}}mW((function(){Te&&(et(),Te(),Ne(null))}),[Te]),(it||at)&&(me.onClick=function(e){var t;Se.current&&at?Re(!1):!Se.current&&it&&(ze(e),Re(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ge.onClick)||void 0===t||t.call.apply(t,[ge,e].concat(r))}),function(e,t,n,r,o,i,u,l){var c=a.useRef(e),s=a.useRef(!1);c.current!==e&&(s.current=!0,c.current=e),a.useEffect((function(){var e=y$((function(){s.current=!1}));return function(){y$.cancel(e)}}),[e]),a.useEffect((function(){if(t&&r&&(!o||i)){var e=function(){var e=!1;return[function(t){var n=t.target;e=u(n)},function(t){var n=t.target;s.current||!c.current||e||u(n)||l(!1)}]},a=Tf(e(),2),d=a[0],f=a[1],p=Tf(e(),2),v=p[0],h=p[1],g=Vee(r);g.addEventListener("mousedown",d,!0),g.addEventListener("click",f,!0),g.addEventListener("contextmenu",f,!0);var m=See(n);return m&&(m.addEventListener("mousedown",v,!0),m.addEventListener("click",h,!0),m.addEventListener("contextmenu",h,!0)),function(){g.removeEventListener("mousedown",d,!0),g.removeEventListener("click",f,!0),g.removeEventListener("contextmenu",f,!0),m&&(m.removeEventListener("mousedown",v,!0),m.removeEventListener("click",h,!0),m.removeEventListener("contextmenu",h,!0))}}}),[t,n,r,o,i])}(Ee,at,de,ue,w,k,ye,Re);var mt,yt,bt=rt.has("hover"),wt=ot.has("hover");bt&&(gt("onMouseEnter",!0,h,(function(e){ze(e)})),gt("onPointerEnter",!0,h,(function(e){ze(e)})),mt=function(e){(Ee||Ie)&&null!=ue&&ue.contains(e.target)&&Re(!0,h)},V&&(me.onMouseMove=function(e){var t;null===(t=ge.onMouseMove)||void 0===t||t.call(ge,e)})),wt&&(gt("onMouseLeave",!1,m),gt("onPointerLeave",!1,m),yt=function(){Re(!1,m)}),rt.has("focus")&&gt("onFocus",!0,y),ot.has("focus")&&gt("onBlur",!1,b),rt.has("contextMenu")&&(me.onContextMenu=function(e){var t;Se.current&&ot.has("contextMenu")?Re(!1):(ze(e),Re(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ge.onContextMenu)||void 0===t||t.call.apply(t,[ge,e].concat(r))}),Y&&(me.className=I()(ge.className,Y));var _t=GW(GW({},ge),me),kt={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){X[e]&&(kt[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=_t[e])||void 0===t||t.call.apply(t,[_t].concat(r)),X[e].apply(X,r)})}));var Ct=a.cloneElement(he,GW(GW({},_t),kt)),Et={x:Ye,y:Je},Ot=U?GW({},!0!==U?U:{}):null;return a.createElement(a.Fragment,null,a.createElement(Y7,{disabled:!Ee,ref:ve,onResize:function(){ht(),ut()}},a.createElement(Pee,{getTriggerDOMNode:J},Ct)),a.createElement(Mee.Provider,{value:oe},a.createElement(Iee,{portal:e,ref:ce,prefixCls:o,popup:x,className:I()(j,lt),style:D,target:de,onMouseEnter:mt,onMouseLeave:yt,onPointerEnter:mt,zIndex:M,open:Ee,keepDom:Ie,fresh:B,onClick:L,mask:w,motion:be,maskMotion:we,onVisibleChanged:function(e){Pe(!1),et(),null==v||v(e)},onPrepare:function(){return new Promise((function(e){ht(),Ne((function(){return e}))}))},forceRender:E,autoDestroy:Z,getPopupContainer:C,align:Qe,arrow:Ot,arrowPos:Et,ready:qe,offsetX:We,offsetY:$e,offsetR:Ge,offsetB:Ke,onAlign:ut,stretch:T,targetWidth:st/Xe,targetHeight:pt/Ze})))}));return t}(Eee);var Xee=t$.ESC,Zee=t$.TAB;var Qee=Object(a.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,o=e.prefixCls,i=Object(a.useMemo)((function(){return"function"==typeof n?n():n}),[n]),l=HW(t,null==i?void 0:i.ref);return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement("div",{className:"".concat(o,"-arrow")}),u.a.cloneElement(i,{ref:WW(i)?l:void 0}))})),ete={adjustX:1,adjustY:1},tte=[0,0],nte={topLeft:{points:["bl","tl"],overflow:ete,offset:[0,-4],targetOffset:tte},top:{points:["bc","tc"],overflow:ete,offset:[0,-4],targetOffset:tte},topRight:{points:["br","tr"],overflow:ete,offset:[0,-4],targetOffset:tte},bottomLeft:{points:["tl","bl"],overflow:ete,offset:[0,4],targetOffset:tte},bottom:{points:["tc","bc"],overflow:ete,offset:[0,4],targetOffset:tte},bottomRight:{points:["tr","br"],overflow:ete,offset:[0,4],targetOffset:tte}},rte=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function ote(e,t){var n,r=e.arrow,o=void 0!==r&&r,i=e.prefixCls,l=void 0===i?"rc-dropdown":i,c=e.transitionName,s=e.animation,d=e.align,f=e.placement,p=void 0===f?"bottomLeft":f,v=e.placements,h=void 0===v?nte:v,g=e.getPopupContainer,m=e.showAction,y=e.hideAction,b=e.overlayClassName,w=e.overlayStyle,_=e.visible,k=e.trigger,C=void 0===k?["hover"]:k,E=e.autoFocus,O=e.overlay,S=e.children,x=e.onVisibleChange,j=qz(e,rte),D=Tf(u.a.useState(),2),A=D[0],R=D[1],F="visible"in e?_:A,P=u.a.useRef(null),M=u.a.useRef(null),T=u.a.useRef(null);u.a.useImperativeHandle(t,(function(){return P.current}));var N=function(e){R(e),null==x||x(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,o=e.autoFocus,i=e.overlayRef,u=a.useRef(!1),l=function(){var e,o;t&&(null===(e=n.current)||void 0===e||null===(o=e.focus)||void 0===o||o.call(e),null==r||r(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),u.current=!0,0))},s=function(e){switch(e.keyCode){case Xee:l();break;case Zee:var t=!1;u.current||(t=c()),t?e.preventDefault():l()}};a.useEffect((function(){return t?(window.addEventListener("keydown",s),o&&y$(c,3),function(){window.removeEventListener("keydown",s),u.current=!1}):function(){u.current=!1}}),[t])}({visible:F,triggerRef:T,onVisibleChange:N,autoFocus:E,overlayRef:M});var B,V,L,z=function(){return u.a.createElement(Qee,{ref:M,overlay:O,prefixCls:l,arrow:o})},U=u.a.cloneElement(S,{className:I()(null===(n=S.props)||void 0===n?void 0:n.className,F&&(B=e.openClassName,void 0!==B?B:"".concat(l,"-open"))),ref:WW(S)?HW(T,S.ref):void 0}),H=y;return H||-1===C.indexOf("contextMenu")||(H=["click"]),u.a.createElement(Jee,e$({builtinPlacements:h},j,{prefixCls:l,ref:P,popupClassName:I()(b,il({},"".concat(l,"-show-arrow"),o)),popupStyle:w,action:C,showAction:m,hideAction:H,popupPlacement:p,popupAlign:d,popupTransitionName:c,popupAnimation:s,popupVisible:F,stretch:(V=e.minOverlayWidthMatchTrigger,L=e.alignPoint,("minOverlayWidthMatchTrigger"in e?V:!L)?"minWidth":""),popup:"function"==typeof O?z:z(),onPopupVisibleChange:N,onPopupClick:function(t){var n=e.onOverlayClick;R(!1),n&&n(t)},getPopupContainer:g}),U)}const ite=u.a.forwardRef(ote);var ate=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],ute=void 0;function lte(e,t){var n=e.prefixCls,r=e.invalidate,o=e.item,i=e.renderItem,u=e.responsive,l=e.responsiveDisabled,c=e.registerSize,s=e.itemKey,d=e.className,f=e.style,p=e.children,v=e.display,h=e.order,g=e.component,m=void 0===g?"div":g,y=qz(e,ate),b=u&&!v;function w(e){c(s,e)}a.useEffect((function(){return function(){w(null)}}),[]);var _,k=i&&o!==ute?i(o):p;r||(_={opacity:b?0:1,height:b?0:ute,overflowY:b?"hidden":ute,order:u?h:ute,pointerEvents:b?"none":ute,position:b?"absolute":ute});var C={};b&&(C["aria-hidden"]=!0);var E=a.createElement(m,e$({className:I()(!r&&n,d),style:GW(GW({},_),f)},C,y,{ref:t}),k);return u&&(E=a.createElement(Y7,{onResize:function(e){w(e.offsetWidth)},disabled:l},E)),E}var cte=a.forwardRef(lte);function ste(){var e=a.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"==typeof MessageChannel)y$(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){Object(l.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function dte(e,t){var n=Tf(a.useState(t),2),r=n[0],o=n[1];return[r,vW((function(t){e((function(){o(t)}))}))]}cte.displayName="Item";var fte=u.a.createContext(null),pte=["component"],vte=["className"],hte=["className"],gte=function(e,t){var n=a.useContext(fte);if(!n){var r=e.component,o=void 0===r?"div":r,i=qz(e,pte);return a.createElement(o,e$({},i,{ref:t}))}var u=n.className,l=qz(n,vte),c=e.className,s=qz(e,hte);return a.createElement(fte.Provider,{value:null},a.createElement(cte,e$({ref:t,className:I()(u,c)},l,s)))},mte=a.forwardRef(gte);mte.displayName="RawItem";var yte=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],bte="responsive",wte="invalidate";function _te(e){return"+ ".concat(e.length," ...")}function kte(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,o=e.data,i=void 0===o?[]:o,u=e.renderItem,l=e.renderRawItem,c=e.itemKey,s=e.itemWidth,d=void 0===s?10:s,f=e.ssr,p=e.style,v=e.className,h=e.maxCount,g=e.renderRest,m=e.renderRawRest,y=e.suffix,b=e.component,w=void 0===b?"div":b,_=e.itemComponent,k=e.onVisibleChange,C=qz(e,yte),E="full"===f,O=ste(),S=Tf(dte(O,null),2),x=S[0],j=S[1],D=x||0,A=Tf(dte(O,new Map),2),R=A[0],F=A[1],P=Tf(dte(O,0),2),M=P[0],T=P[1],N=Tf(dte(O,0),2),B=N[0],V=N[1],L=Tf(dte(O,0),2),z=L[0],U=L[1],H=Tf(Object(a.useState)(null),2),q=H[0],W=H[1],$=Tf(Object(a.useState)(null),2),G=$[0],K=$[1],Y=a.useMemo((function(){return null===G&&E?Number.MAX_SAFE_INTEGER:G||0}),[G,x]),J=Tf(Object(a.useState)(!1),2),X=J[0],Z=J[1],Q="".concat(r,"-item"),ee=Math.max(M,B),te=h===bte,ne=i.length&&te,re=h===wte,oe=ne||"number"==typeof h&&i.length>h,ie=Object(a.useMemo)((function(){var e=i;return ne?e=null===x&&E?i:i.slice(0,Math.min(i.length,D/d)):"number"==typeof h&&(e=i.slice(0,h)),e}),[i,d,x,h,ne]),ae=Object(a.useMemo)((function(){return ne?i.slice(Y+1):i.slice(ie.length)}),[i,ie,ne,Y]),ue=Object(a.useCallback)((function(e,t){var n;return"function"==typeof c?c(e):null!==(n=c&&(null==e?void 0:e[c]))&&void 0!==n?n:t}),[c]),le=Object(a.useCallback)(u||function(e){return e},[u]);function ce(e,t,n){(G!==e||void 0!==t&&t!==q)&&(K(e),n||(Z(e<i.length-1),null==k||k(e)),void 0!==t&&W(t))}function se(e,t){F((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return R.get(ue(ie[e],e))}mW((function(){if(D&&"number"==typeof ee&&ie){var e=z,t=ie.length,n=t-1;if(!t)return void ce(0,null);for(var r=0;r<t;r+=1){var o=de(r);if(E&&(o=o||0),void 0===o){ce(r-1,void 0,!0);break}if(e+=o,0===n&&e<=D||r===n-1&&e+de(n)<=D){ce(n,null);break}if(e+ee>D){ce(r-1,e-o-z+B);break}}y&&de(0)+z>D&&W(null)}}),[D,R,B,z,ue,ie]);var fe=X&&!!ae.length,pe={};null!==q&&ne&&(pe={position:"absolute",left:q,top:0});var ve,he={prefixCls:Q,responsive:ne,component:_,invalidate:re},ge=l?function(e,t){var n=ue(e,t);return a.createElement(fte.Provider,{key:n,value:GW(GW({},he),{},{order:t,item:e,itemKey:n,registerSize:se,display:t<=Y})},l(e,t))}:function(e,t){var n=ue(e,t);return a.createElement(cte,e$({},he,{order:t,key:n,item:e,renderItem:le,itemKey:n,registerSize:se,display:t<=Y}))},me={order:fe?Y:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){V(t),T(B)},display:fe};if(m)m&&(ve=a.createElement(fte.Provider,{value:GW(GW({},he),me)},m(ae)));else{var ye=g||_te;ve=a.createElement(cte,e$({},he,me),"function"==typeof ye?ye(ae):ye)}var be=a.createElement(w,e$({className:I()(!re&&r,v),style:p,ref:t},C),ie.map(ge),oe?ve:null,y&&a.createElement(cte,e$({},he,{responsive:te,responsiveDisabled:!ne,order:Y,className:"".concat(Q,"-suffix"),registerSize:function(e,t){U(t)},display:!0,style:pe}),y));return te&&(be=a.createElement(Y7,{onResize:function(e,t){j(t.clientWidth)},disabled:!ne},be)),be}var Cte=a.forwardRef(kte);Cte.displayName="Overflow",Cte.Item=mte,Cte.RESPONSIVE=bte,Cte.INVALIDATE=wte;var Ete=a.createContext(null);function Ote(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function Ste(e){return Ote(a.useContext(Ete),e)}var xte=["children","locked"],jte=a.createContext(null);function Dte(e){var t=e.children,n=e.locked,r=qz(e,xte),o=a.useContext(jte),i=zW((function(){return e=r,t=GW({},o),Object.keys(e).forEach((function(n){var r=e[n];void 0!==r&&(t[n]=r)})),t;var e,t}),[o,r],(function(e,t){return!(n||e[0]===t[0]&&VY(e[1],t[1],!0))}));return a.createElement(jte.Provider,{value:i},t)}var Ate=[],Rte=a.createContext(null);function Fte(){return a.useContext(Rte)}var Ite=a.createContext(Ate);function Pte(e){var t=a.useContext(Ite);return a.useMemo((function(){return void 0!==e?[].concat(tl(t),[e]):t}),[t,e])}var Mte=a.createContext(null),Tte=a.createContext({});function Nte(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(b$(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),i=Number(o),a=null;return o&&!Number.isNaN(i)?a=i:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}var Bte=t$.LEFT,Vte=t$.RIGHT,Lte=t$.UP,zte=t$.DOWN,Ute=t$.ENTER,Hte=t$.ESC,qte=t$.HOME,Wte=t$.END,$te=[Lte,zte,Bte,Vte];function Gte(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=tl(e.querySelectorAll("*")).filter((function(e){return Nte(e,t)}));return Nte(e,t)&&n.unshift(e),n}(e,!0);return n.filter((function(e){return t.has(e)}))}function Kte(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=Gte(e,t),i=o.length,a=o.findIndex((function(e){return n===e}));return r<0?-1===a?a=i-1:a-=1:r>0&&(a+=1),o[a=(a+i)%i]}var Yte=function(e,t){var n=new Set,r=new Map,o=new Map;return e.forEach((function(e){var i=document.querySelector("[data-menu-id='".concat(Ote(t,e),"']"));i&&(n.add(i),o.set(i,e),r.set(e,i))})),{elements:n,key2element:r,element2key:o}};function Jte(e,t,n,r,o,i,u,l,c,s){var d=a.useRef(),f=a.useRef();f.current=t;var p=function(){y$.cancel(d.current)};return a.useEffect((function(){return function(){p()}}),[]),function(a){var v=a.which;if([].concat($te,[Ute,Hte,qte,Wte]).includes(v)){var h=i(),g=Yte(h,r),m=g,y=m.elements,b=m.key2element,w=m.element2key,_=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),y),k=w.get(_),C=function(e,t,n,r){var o,i,a,u,l="prev",c="next",s="children",d="parent";if("inline"===e&&r===Ute)return{inlineTrigger:!0};var f=(il(o={},Lte,l),il(o,zte,c),o),p=(il(i={},Bte,n?c:l),il(i,Vte,n?l:c),il(i,zte,s),il(i,Ute,s),i),v=(il(a={},Lte,l),il(a,zte,c),il(a,Ute,s),il(a,Hte,d),il(a,Bte,n?s:d),il(a,Vte,n?d:s),a);switch(null===(u={inline:f,horizontal:p,vertical:v,inlineSub:f,horizontalSub:v,verticalSub:v}["".concat(e).concat(t?"":"Sub")])||void 0===u?void 0:u[r]){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}(e,1===u(k,!0).length,n,v);if(!C&&v!==qte&&v!==Wte)return;($te.includes(v)||[qte,Wte].includes(v))&&a.preventDefault();var E=function(e){if(e){var t=e,n=e.querySelector("a");null!=n&&n.getAttribute("href")&&(t=n);var r=w.get(e);l(r),p(),d.current=y$((function(){f.current===r&&t.focus()}))}};if([qte,Wte].includes(v)||C.sibling||!_){var O,S,x=Gte(O=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):o.current,y);S=v===qte?x[0]:v===Wte?x[x.length-1]:Kte(O,y,_,C.offset),E(S)}else if(C.inlineTrigger)c(k);else if(C.offset>0)c(k,!0),p(),d.current=y$((function(){g=Yte(h,r);var e=_.getAttribute("aria-controls"),t=Kte(document.getElementById(e),g.elements);E(t)}),5);else if(C.offset<0){var j=u(k,!0),D=j[j.length-2],A=b.get(D);c(D,!1),E(A)}}null==s||s(a)}}var Xte="__RC_UTIL_PATH_SPLIT__",Zte=function(e){return e.join(Xte)},Qte="rc-menu-more";function ene(){var e=Tf(a.useState({}),2)[1],t=Object(a.useRef)(new Map),n=Object(a.useRef)(new Map),r=Tf(a.useState([]),2),o=r[0],i=r[1],u=Object(a.useRef)(0),l=Object(a.useRef)(!1),c=Object(a.useCallback)((function(r,o){var i=Zte(o);n.current.set(i,r),t.current.set(r,i),u.current+=1;var a,c=u.current;a=function(){c===u.current&&(l.current||e({}))},Promise.resolve().then(a)}),[]),s=Object(a.useCallback)((function(e,r){var o=Zte(r);n.current.delete(o),t.current.delete(e)}),[]),d=Object(a.useCallback)((function(e){i(e)}),[]),f=Object(a.useCallback)((function(e,n){var r=t.current.get(e)||"",i=r.split(Xte);return n&&o.includes(i[0])&&i.unshift(Qte),i}),[o]),p=Object(a.useCallback)((function(e,t){return e.some((function(e){return f(e,!0).includes(t)}))}),[f]),v=Object(a.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(Xte),o=new Set;return tl(n.current.keys()).forEach((function(e){e.startsWith(r)&&o.add(n.current.get(e))})),o}),[]);return a.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:s,refreshOverflowKeys:d,isSubPathKey:p,getKeyPath:f,getKeys:function(){var e=tl(t.current.keys());return o.length&&e.push(Qte),e},getSubPathKeys:v}}function tne(e){var t=a.useRef(e);t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var nne=Math.random().toFixed(5).toString().slice(2),rne=0;function one(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}function ine(e,t,n,r){var o=a.useContext(jte),i=o.activeKey,u=o.onActive,l=o.onInactive,c={active:i===e};return t||(c.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),u(e)},c.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),l(e)}),c}function ane(e){var t=a.useContext(jte),n=t.mode,r=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*o}:{paddingLeft:e*o}}function une(e){var t,n=e.icon,r=e.props,o=e.children;return null===n||!1===n?null:("function"==typeof n?t=a.createElement(n,GW({},r)):"boolean"!=typeof n&&(t=n),t||o||null)}var lne=["item"];function cne(e){var t=e.item,n=qz(e,lne);return Object.defineProperty(n,"item",{get:function(){return ZW(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var sne=["title","attribute","elementRef"],dne=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],fne=["active"],pne=function(e){jd(n,e);var t=QW(n);function n(){return sl(this,n),t.apply(this,arguments)}return ll(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,o=one(qz(e,sne),["eventKey","popupClassName","popupOffset","onTitleClick"]);return ZW(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),a.createElement(Cte.Item,e$({},n,{title:"string"==typeof t?t:void 0},o,{ref:r}))}}]),n}(a.Component),vne=a.forwardRef((function(e,t){var n,r=e.style,o=e.className,i=e.eventKey;e.warnKey;var u=e.disabled,l=e.itemIcon,c=e.children,s=e.role,d=e.onMouseEnter,f=e.onMouseLeave,p=e.onClick,v=e.onKeyDown,h=e.onFocus,g=qz(e,dne),m=Ste(i),y=a.useContext(jte),b=y.prefixCls,w=y.onItemClick,_=y.disabled,k=y.overflowDisabled,C=y.itemIcon,E=y.selectedKeys,O=y.onActive,S=a.useContext(Tte)._internalRenderMenuItem,x="".concat(b,"-item"),j=a.useRef(),D=a.useRef(),A=_||u,R=qW(t,D),F=Pte(i),P=function(e){return{key:i,keyPath:tl(F).reverse(),item:j.current,domEvent:e}},M=l||C,T=ine(i,A,d,f),N=T.active,B=qz(T,fne),V=E.includes(i),L=ane(F.length),z={};"option"===e.role&&(z["aria-selected"]=V);var U=a.createElement(pne,e$({ref:j,elementRef:R,role:null===s?"none":s||"menuitem",tabIndex:u?null:-1,"data-menu-id":k&&m?null:m},g,B,z,{component:"li","aria-disabled":u,style:GW(GW({},L),r),className:I()(x,(n={},il(n,"".concat(x,"-active"),N),il(n,"".concat(x,"-selected"),V),il(n,"".concat(x,"-disabled"),A),n),o),onClick:function(e){if(!A){var t=P(e);null==p||p(cne(t)),w(t)}},onKeyDown:function(e){if(null==v||v(e),e.which===t$.ENTER){var t=P(e);null==p||p(cne(t)),w(t)}},onFocus:function(e){O(i),null==h||h(e)}}),c,a.createElement(une,{props:GW(GW({},e),{},{isSelected:V}),icon:M}));return S&&(U=S(U,e,{selected:V})),U}));function hne(e,t){var n=e.eventKey,r=Fte(),o=Pte(n);return a.useEffect((function(){if(r)return r.registerPath(n,o),function(){r.unregisterPath(n,o)}}),[o]),r?null:a.createElement(vne,e$({},e,{ref:t}))}const gne=a.forwardRef(hne);var mne=["className","children"],yne=function(e,t){var n=e.className,r=e.children,o=qz(e,mne),i=a.useContext(jte),u=i.prefixCls,l=i.mode,c=i.rtl;return a.createElement("ul",e$({className:I()(u,c&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===l?"inline":"vertical"),n),role:"menu"},o,{"data-menu-list":!0,ref:t}),r)},bne=a.forwardRef(yne);function wne(e,t){return z7(e).map((function(e,n){if(a.isValidElement(e)){var r,o,i=e.key,u=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:i;null==u&&(u="tmp_key-".concat([].concat(tl(t),[n]).join("-")));var l={key:u,eventKey:u};return a.cloneElement(e,l)}return e}))}bne.displayName="SubMenuList";var _ne={adjustX:1,adjustY:1},kne={topLeft:{points:["bl","tl"],overflow:_ne},topRight:{points:["br","tr"],overflow:_ne},bottomLeft:{points:["tl","bl"],overflow:_ne},bottomRight:{points:["tr","br"],overflow:_ne},leftTop:{points:["tr","tl"],overflow:_ne},leftBottom:{points:["br","bl"],overflow:_ne},rightTop:{points:["tl","tr"],overflow:_ne},rightBottom:{points:["bl","br"],overflow:_ne}},Cne={topLeft:{points:["bl","tl"],overflow:_ne},topRight:{points:["br","tr"],overflow:_ne},bottomLeft:{points:["tl","bl"],overflow:_ne},bottomRight:{points:["tr","br"],overflow:_ne},rightTop:{points:["tr","tl"],overflow:_ne},rightBottom:{points:["br","bl"],overflow:_ne},leftTop:{points:["tl","tr"],overflow:_ne},leftBottom:{points:["bl","br"],overflow:_ne}};function Ene(e,t,n){return t||(n?n[e]||n.other:void 0)}var One={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Sne(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,i=e.popupStyle,u=e.popupClassName,l=e.popupOffset,c=e.disabled,s=e.mode,d=e.onVisibleChange,f=a.useContext(jte),p=f.getPopupContainer,v=f.rtl,h=f.subMenuOpenDelay,g=f.subMenuCloseDelay,m=f.builtinPlacements,y=f.triggerSubMenuAction,b=f.forceSubMenuRender,w=f.rootClassName,_=f.motion,k=f.defaultMotions,C=Tf(a.useState(!1),2),E=C[0],O=C[1],S=GW(GW({},v?Cne:kne),m),x=One[s],j=Ene(s,_,k),D=a.useRef(j);"inline"!==s&&(D.current=j);var A=GW(GW({},D.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=a.useRef();return a.useEffect((function(){return R.current=y$((function(){O(n)})),function(){y$.cancel(R.current)}}),[n]),a.createElement(Jee,{prefixCls:t,popupClassName:I()("".concat(t,"-popup"),il({},"".concat(t,"-rtl"),v),u,w),stretch:"horizontal"===s?"minWidth":null,getPopupContainer:p,builtinPlacements:S,popupPlacement:x,popupVisible:E,popup:o,popupStyle:i,popupAlign:l&&{offset:l},action:c?[]:[y],mouseEnterDelay:h,mouseLeaveDelay:g,onPopupVisibleChange:d,forceRender:b,popupMotion:A,fresh:!0},r)}function xne(e){var t=e.id,n=e.open,r=e.keyPath,o=e.children,i="inline",u=a.useContext(jte),l=u.prefixCls,c=u.forceSubMenuRender,s=u.motion,d=u.defaultMotions,f=u.mode,p=a.useRef(!1);p.current=f===i;var v=Tf(a.useState(!p.current),2),h=v[0],g=v[1],m=!!p.current&&n;a.useEffect((function(){p.current&&g(!1)}),[f]);var y=GW({},Ene(i,s,d));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return p.current||e||g(!0),null==b?void 0:b(e)},h?null:a.createElement(Dte,{mode:i,locked:!p.current},a.createElement(kK,e$({visible:m},y,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var n=e.className,r=e.style;return a.createElement(bne,{id:t,className:n,style:r},o)})))}var jne=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Dne=["active"],Ane=function(e){var t,n=e.style,r=e.className,o=e.title,i=e.eventKey;e.warnKey;var u=e.disabled,l=e.internalPopupClose,c=e.children,s=e.itemIcon,d=e.expandIcon,f=e.popupClassName,p=e.popupOffset,v=e.popupStyle,h=e.onClick,g=e.onMouseEnter,m=e.onMouseLeave,y=e.onTitleClick,b=e.onTitleMouseEnter,w=e.onTitleMouseLeave,_=qz(e,jne),k=Ste(i),C=a.useContext(jte),E=C.prefixCls,O=C.mode,S=C.openKeys,x=C.disabled,j=C.overflowDisabled,D=C.activeKey,A=C.selectedKeys,R=C.itemIcon,F=C.expandIcon,P=C.onItemClick,M=C.onOpenChange,T=C.onActive,N=a.useContext(Tte)._internalRenderSubMenuItem,B=a.useContext(Mte).isSubPathKey,V=Pte(),L="".concat(E,"-submenu"),z=x||u,U=a.useRef(),H=a.useRef(),q=null!=s?s:R,W=null!=d?d:F,$=S.includes(i),G=!j&&$,K=B(A,i),Y=ine(i,z,b,w),J=Y.active,X=qz(Y,Dne),Z=Tf(a.useState(!1),2),Q=Z[0],ee=Z[1],te=function(e){z||ee(e)},ne=a.useMemo((function(){return J||"inline"!==O&&(Q||B([D],i))}),[O,J,D,Q,i,B]),re=ane(V.length),oe=tne((function(e){null==h||h(cne(e)),P(e)})),ie=k&&"".concat(k,"-popup"),ae=a.createElement("div",e$({role:"menuitem",style:re,className:"".concat(L,"-title"),tabIndex:z?null:-1,ref:U,title:"string"==typeof o?o:null,"data-menu-id":j&&k?null:k,"aria-expanded":G,"aria-haspopup":!0,"aria-controls":ie,"aria-disabled":z,onClick:function(e){z||(null==y||y({key:i,domEvent:e}),"inline"===O&&M(i,!$))},onFocus:function(){T(i)}},X),o,a.createElement(une,{icon:"horizontal"!==O?W:void 0,props:GW(GW({},e),{},{isOpen:G,isSubMenu:!0})},a.createElement("i",{className:"".concat(L,"-arrow")}))),ue=a.useRef(O);if("inline"!==O&&V.length>1?ue.current="vertical":ue.current=O,!j){var le=ue.current;ae=a.createElement(Sne,{mode:le,prefixCls:L,visible:!l&&G&&"inline"!==O,popupClassName:f,popupOffset:p,popupStyle:v,popup:a.createElement(Dte,{mode:"horizontal"===le?"vertical":le},a.createElement(bne,{id:ie,ref:H},c)),disabled:z,onVisibleChange:function(e){"inline"!==O&&M(i,e)}},ae)}var ce=a.createElement(Cte.Item,e$({role:"none"},_,{component:"li",style:n,className:I()(L,"".concat(L,"-").concat(O),r,(t={},il(t,"".concat(L,"-open"),G),il(t,"".concat(L,"-active"),ne),il(t,"".concat(L,"-selected"),K),il(t,"".concat(L,"-disabled"),z),t)),onMouseEnter:function(e){te(!0),null==g||g({key:i,domEvent:e})},onMouseLeave:function(e){te(!1),null==m||m({key:i,domEvent:e})}}),ae,!j&&a.createElement(xne,{id:ie,open:G,keyPath:V},c));return N&&(ce=N(ce,e,{selected:K,active:ne,open:G,disabled:z})),a.createElement(Dte,{onItemClick:oe,mode:"horizontal"===O?"vertical":O,itemIcon:q,expandIcon:W},ce)};function Rne(e){var t,n=e.eventKey,r=e.children,o=Pte(n),i=wne(r,o),u=Fte();return a.useEffect((function(){if(u)return u.registerPath(n,o),function(){u.unregisterPath(n,o)}}),[o]),t=u?i:a.createElement(Ane,e,i),a.createElement(Ite.Provider,{value:o},t)}var Fne=["className","title","eventKey","children"],Ine=["children"],Pne=function(e){var t=e.className,n=e.title;e.eventKey;var r=e.children,o=qz(e,Fne),i=a.useContext(jte).prefixCls,u="".concat(i,"-item-group");return a.createElement("li",e$({role:"presentation"},o,{onClick:function(e){return e.stopPropagation()},className:I()(u,t)}),a.createElement("div",{role:"presentation",className:"".concat(u,"-title"),title:"string"==typeof n?n:void 0},n),a.createElement("ul",{role:"group",className:"".concat(u,"-list")},r))};function Mne(e){var t=e.children,n=qz(e,Ine),r=wne(t,Pte(n.eventKey));return Fte()?r:a.createElement(Pne,one(n,["warnKey"]),r)}function Tne(e){var t=e.className,n=e.style,r=a.useContext(jte).prefixCls;return Fte()?null:a.createElement("li",{role:"separator",className:I()("".concat(r,"-item-divider"),t),style:n})}var Nne=["label","children","key","type"];function Bne(e){return(e||[]).map((function(e,t){if(e&&"object"===Ln(e)){var n=e,r=n.label,o=n.children,i=n.key,u=n.type,l=qz(n,Nne),c=null!=i?i:"tmp-".concat(t);return o||"group"===u?"group"===u?a.createElement(Mne,e$({key:c},l,{title:r}),Bne(o)):a.createElement(Rne,e$({key:c},l,{title:r}),Bne(o)):"divider"===u?a.createElement(Tne,e$({key:c},l)):a.createElement(gne,e$({key:c},l),r)}return null})).filter((function(e){return e}))}function Vne(e,t,n){var r=e;return t&&(r=Bne(t)),wne(r,n)}var Lne=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],zne=[],Une=a.forwardRef((function(e,t){var n,r,o=e,i=o.prefixCls,u=void 0===i?"rc-menu":i,c=o.rootClassName,s=o.style,d=o.className,f=o.tabIndex,p=void 0===f?0:f,v=o.items,h=o.children,g=o.direction,m=o.id,y=o.mode,b=void 0===y?"vertical":y,w=o.inlineCollapsed,_=o.disabled,k=o.disabledOverflow,C=o.subMenuOpenDelay,E=void 0===C?.1:C,O=o.subMenuCloseDelay,S=void 0===O?.1:O,x=o.forceSubMenuRender,j=o.defaultOpenKeys,D=o.openKeys,A=o.activeKey,R=o.defaultActiveFirst,F=o.selectable,P=void 0===F||F,M=o.multiple,T=void 0!==M&&M,N=o.defaultSelectedKeys,B=o.selectedKeys,V=o.onSelect,L=o.onDeselect,z=o.inlineIndent,U=void 0===z?24:z,H=o.motion,q=o.defaultMotions,W=o.triggerSubMenuAction,$=void 0===W?"hover":W,G=o.builtinPlacements,K=o.itemIcon,Y=o.expandIcon,J=o.overflowedIndicator,X=void 0===J?"...":J,Z=o.overflowedIndicatorPopupClassName,Q=o.getPopupContainer,ee=o.onClick,te=o.onOpenChange,ne=o.onKeyDown;o.openAnimation,o.openTransitionName;var re=o._internalRenderMenuItem,oe=o._internalRenderSubMenuItem,ie=qz(o,Lne),ae=a.useMemo((function(){return Vne(h,v,zne)}),[h,v]),ue=Tf(a.useState(!1),2),le=ue[0],ce=ue[1],se=a.useRef(),de=function(e){var t=Tf(_W(e,{value:e}),2),n=t[0],r=t[1];return a.useEffect((function(){rne+=1;var e="".concat(nne,"-").concat(rne);r("rc-menu-uuid-".concat(e))}),[]),n}(m),fe="rtl"===g,pe=Tf(_W(j,{value:D,postState:function(e){return e||zne}}),2),ve=pe[0],he=pe[1],ge=function(e){function t(){he(e),null==te||te(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object(l.flushSync)(t):t()},me=Tf(a.useState(ve),2),ye=me[0],be=me[1],we=a.useRef(!1),_e=Tf(a.useMemo((function(){return"inline"!==b&&"vertical"!==b||!w?[b,!1]:["vertical",w]}),[b,w]),2),ke=_e[0],Ce=_e[1],Ee="inline"===ke,Oe=Tf(a.useState(ke),2),Se=Oe[0],xe=Oe[1],je=Tf(a.useState(Ce),2),De=je[0],Ae=je[1];a.useEffect((function(){xe(ke),Ae(Ce),we.current&&(Ee?he(ye):ge(zne))}),[ke,Ce]);var Re=Tf(a.useState(0),2),Fe=Re[0],Ie=Re[1],Pe=Fe>=ae.length-1||"horizontal"!==Se||k;a.useEffect((function(){Ee&&be(ve)}),[ve]),a.useEffect((function(){return we.current=!0,function(){we.current=!1}}),[]);var Me=ene(),Te=Me.registerPath,Ne=Me.unregisterPath,Be=Me.refreshOverflowKeys,Ve=Me.isSubPathKey,Le=Me.getKeyPath,ze=Me.getKeys,Ue=Me.getSubPathKeys,He=a.useMemo((function(){return{registerPath:Te,unregisterPath:Ne}}),[Te,Ne]),qe=a.useMemo((function(){return{isSubPathKey:Ve}}),[Ve]);a.useEffect((function(){Be(Pe?zne:ae.slice(Fe+1).map((function(e){return e.key})))}),[Fe,Pe]);var We=Tf(_W(A||R&&(null===(n=ae[0])||void 0===n?void 0:n.key),{value:A}),2),$e=We[0],Ge=We[1],Ke=tne((function(e){Ge(e)})),Ye=tne((function(){Ge(void 0)}));Object(a.useImperativeHandle)(t,(function(){return{list:se.current,focus:function(e){var t,n,r=ze(),o=Yte(r,de),i=o.elements,a=o.key2element,u=o.element2key,l=Gte(se.current,i),c=null!=$e?$e:l[0]?u.get(l[0]):null===(t=ae.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key,s=a.get(c);c&&s&&(null==s||null===(n=s.focus)||void 0===n||n.call(s,e))}}}));var Je=Tf(_W(N||[],{value:B,postState:function(e){return Array.isArray(e)?e:null==e?zne:[e]}}),2),Xe=Je[0],Ze=Je[1],Qe=tne((function(e){null==ee||ee(cne(e)),function(e){if(P){var t,n=e.key,r=Xe.includes(n);t=T?r?Xe.filter((function(e){return e!==n})):[].concat(tl(Xe),[n]):[n],Ze(t);var o=GW(GW({},e),{},{selectedKeys:t});r?null==L||L(o):null==V||V(o)}!T&&ve.length&&"inline"!==Se&&ge(zne)}(e)})),et=tne((function(e,t){var n=ve.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Se){var r=Ue(e);n=n.filter((function(e){return!r.has(e)}))}VY(ve,n,!0)||ge(n,!0)})),tt=Jte(Se,$e,fe,de,se,ze,Le,Ge,(function(e,t){var n=null!=t?t:!ve.includes(e);et(e,n)}),ne);a.useEffect((function(){ce(!0)}),[]);var nt=a.useMemo((function(){return{_internalRenderMenuItem:re,_internalRenderSubMenuItem:oe}}),[re,oe]),rt="horizontal"!==Se||k?ae:ae.map((function(e,t){return a.createElement(Dte,{key:e.key,overflowDisabled:t>Fe},e)})),ot=a.createElement(Cte,e$({id:m,ref:se,prefixCls:"".concat(u,"-overflow"),component:"ul",itemComponent:gne,className:I()(u,"".concat(u,"-root"),"".concat(u,"-").concat(Se),d,(r={},il(r,"".concat(u,"-inline-collapsed"),De),il(r,"".concat(u,"-rtl"),fe),r),c),dir:g,style:s,role:"menu",tabIndex:p,data:rt,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?ae.slice(-t):null;return a.createElement(Rne,{eventKey:Qte,title:X,disabled:Pe,internalPopupClose:0===t,popupClassName:Z},n)},maxCount:"horizontal"!==Se||k?Cte.INVALIDATE:Cte.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Ie(e)},onKeyDown:tt},ie));return a.createElement(Tte.Provider,{value:nt},a.createElement(Ete.Provider,{value:de},a.createElement(Dte,{prefixCls:u,rootClassName:c,mode:Se,openKeys:ve,rtl:fe,disabled:_,motion:le?H:null,defaultMotions:le?q:null,activeKey:$e,onActive:Ke,onInactive:Ye,selectedKeys:Xe,inlineIndent:U,subMenuOpenDelay:E,subMenuCloseDelay:S,forceSubMenuRender:x,builtinPlacements:G,triggerSubMenuAction:$,getPopupContainer:Q,itemIcon:K,expandIcon:Y,onItemClick:Qe,onOpenChange:et},a.createElement(Mte.Provider,{value:qe},ot),a.createElement("div",{style:{display:"none"},"aria-hidden":!0},a.createElement(Rte.Provider,{value:He},ae)))))})),Hne=Une;Hne.Item=gne,Hne.SubMenu=Rne,Hne.ItemGroup=Mne,Hne.Divider=Tne;var qne=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.id,o=e.tabs,i=e.locale,u=e.mobile,l=e.moreIcon,c=void 0===l?"More":l,s=e.moreTransitionName,d=e.style,f=e.className,p=e.editable,v=e.tabBarGutter,h=e.rtl,g=e.removeAriaLabel,m=e.onTabClick,y=e.getPopupContainer,b=e.popupClassName,w=Tf(Object(a.useState)(!1),2),_=w[0],k=w[1],C=Tf(Object(a.useState)(null),2),E=C[0],O=C[1],S="".concat(r,"-more-popup"),x="".concat(n,"-dropdown"),j=null!==E?"".concat(S,"-").concat(E):null,D=null==i?void 0:i.dropdownAriaLabel;var A=a.createElement(Hne,{onClick:function(e){var t=e.key,n=e.domEvent;m(t,n),k(!1)},prefixCls:"".concat(x,"-menu"),id:S,tabIndex:-1,role:"listbox","aria-activedescendant":j,selectedKeys:[E],"aria-label":void 0!==D?D:"expanded dropdown"},o.map((function(e){var t=e.closable,n=e.disabled,o=e.closeIcon,i=e.key,u=e.label,l=ree(t,o,p,n);return a.createElement(gne,{key:i,id:"".concat(S,"-").concat(i),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(i),disabled:n},a.createElement("span",null,u),l&&a.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(x,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),p.onEdit("remove",{key:t,event:e})}(e,i)}},o||p.removeIcon||"×"))})));function R(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===E}))||0,r=t.length,i=0;i<r;i+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void O(a.key)}}Object(a.useEffect)((function(){var e=document.getElementById(j);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[E]),Object(a.useEffect)((function(){_||O(null)}),[_]);var F=il({},h?"marginRight":"marginLeft",v);o.length||(F.visibility="hidden",F.order=1);var P=I()(il({},"".concat(x,"-rtl"),h)),M=u?null:a.createElement(ite,{prefixCls:x,overlay:A,trigger:["hover"],visible:!!o.length&&_,transitionName:s,onVisibleChange:k,overlayClassName:I()(P,b),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:y},a.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:F,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":S,id:"".concat(r,"-more"),"aria-expanded":_,onKeyDown:function(e){var t=e.which;if(_)switch(t){case t$.UP:R(-1),e.preventDefault();break;case t$.DOWN:R(1),e.preventDefault();break;case t$.ESC:k(!1);break;case t$.SPACE:case t$.ENTER:null!==E&&m(E,e)}else[t$.DOWN,t$.SPACE,t$.ENTER].includes(t)&&(k(!0),e.preventDefault())}},c));return a.createElement("div",{className:I()("".concat(n,"-nav-operations"),f),style:d,ref:t},M,a.createElement(oee,{prefixCls:n,locale:i,editable:p}))}));const Wne=a.memo(qne,(function(e,t){return t.tabMoving}));var $ne=function(e){var t,n=e.prefixCls,r=e.id,o=e.active,i=e.tab,u=i.key,l=i.label,c=i.disabled,s=i.closeIcon,d=i.icon,f=e.closable,p=e.renderWrapper,v=e.removeAriaLabel,h=e.editable,g=e.onClick,m=e.onFocus,y=e.style,b="".concat(n,"-tab"),w=ree(f,s,h,c);function _(e){c||g(e)}var k=a.useMemo((function(){return d&&"string"==typeof l?a.createElement("span",null,l):l}),[l,d]),C=a.createElement("div",{key:u,"data-node-key":nee(u),className:I()(b,(t={},il(t,"".concat(b,"-with-remove"),w),il(t,"".concat(b,"-active"),o),il(t,"".concat(b,"-disabled"),c),t)),style:y,onClick:_},a.createElement("div",{role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(u),className:"".concat(b,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(u),"aria-disabled":c,tabIndex:c?null:0,onClick:function(e){e.stopPropagation(),_(e)},onKeyDown:function(e){[t$.SPACE,t$.ENTER].includes(e.which)&&(e.preventDefault(),_(e))},onFocus:m},d&&a.createElement("span",{className:"".concat(b,"-icon")},d),l&&k),w&&a.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(b,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),h.onEdit("remove",{key:u,event:t})}},s||h.removeIcon||"×"));return p?p(C):C},Gne=function(e){var t=e.current||{},n=t.offsetWidth,r=void 0===n?0:n,o=t.offsetHeight,i=void 0===o?0:o;if(e.current){var a=e.current.getBoundingClientRect(),u=a.width,l=a.height;if(Math.abs(u-r)<1)return[u,l]}return[r,i]},Kne=function(e,t){return e[t?0:1]},Yne=a.forwardRef((function(e,t){var n,r,o,i,l,c,s=e.className,d=e.style,f=e.id,p=e.animated,v=e.activeKey,h=e.rtl,g=e.extra,m=e.editable,y=e.locale,b=e.tabPosition,w=e.tabBarGutter,_=e.children,k=e.onTabClick,C=e.onTabScroll,E=e.indicatorSize,O=e.indicatorAlign,S=a.useContext(L7),x=S.prefixCls,j=S.tabs,D=Object(a.useRef)(null),A=Object(a.useRef)(null),R=Object(a.useRef)(null),F=Object(a.useRef)(null),P=Object(a.useRef)(null),M=Object(a.useRef)(null),T=Object(a.useRef)(null),N="top"===b||"bottom"===b,B=Tf(X7(0,(function(e,t){N&&C&&C({direction:e>t?"left":"right"})})),2),V=B[0],L=B[1],z=Tf(X7(0,(function(e,t){!N&&C&&C({direction:e>t?"top":"bottom"})})),2),U=z[0],H=z[1],q=Tf(Object(a.useState)([0,0]),2),W=q[0],$=q[1],G=Tf(Object(a.useState)([0,0]),2),K=G[0],Y=G[1],J=Tf(Object(a.useState)([0,0]),2),X=J[0],Z=J[1],Q=Tf(Object(a.useState)([0,0]),2),ee=Q[0],te=Q[1],ne=(r=new Map,o=Object(a.useRef)([]),i=Tf(Object(a.useState)({}),2)[1],l=Object(a.useRef)("function"==typeof r?r():r),c=Q7((function(){var e=l.current;o.current.forEach((function(t){e=t(e)})),o.current=[],l.current=e,i({})})),[l.current,function(e){o.current.push(e),c()}]),re=Tf(ne,2),oe=re[0],ie=re[1],ae=function(e,t,n){return Object(a.useMemo)((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||J7,i=o.left+o.width,a=0;a<e.length;a+=1){var u,l=e[a].key,c=t.get(l);c||(c=t.get(null===(u=e[a-1])||void 0===u?void 0:u.key)||J7);var s=r.get(l)||GW({},c);s.right=i-s.left-s.width,r.set(l,s)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(j,oe,K[0]),ue=Kne(W,N),le=Kne(K,N),ce=Kne(X,N),se=Kne(ee,N),de=ue<le+ce,fe=de?ue-se:ue-ce,pe="".concat(x,"-nav-operations-hidden"),ve=0,he=0;function ge(e){return e<ve?ve:e>he?he:e}N&&h?(ve=0,he=Math.max(0,le-fe)):(ve=Math.min(0,fe-le),he=0);var me=Object(a.useRef)(null),ye=Tf(Object(a.useState)(),2),be=ye[0],we=ye[1];function _e(){we(Date.now())}function ke(){me.current&&clearTimeout(me.current)}!function(e,t){var n=Tf(Object(a.useState)(),2),r=n[0],o=n[1],i=Tf(Object(a.useState)(0),2),u=i[0],l=i[1],c=Tf(Object(a.useState)(0),2),s=c[0],d=c[1],f=Tf(Object(a.useState)(),2),p=f[0],v=f[1],h=Object(a.useRef)(),g=Object(a.useRef)(),m=Object(a.useRef)(null);m.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;o({x:n,y:r}),window.clearInterval(h.current)},onTouchMove:function(e){if(r){e.preventDefault();var n=e.touches[0],i=n.screenX,a=n.screenY;o({x:i,y:a});var c=i-r.x,s=a-r.y;t(c,s);var f=Date.now();l(f),d(f-u),v({x:c,y:s})}},onTouchEnd:function(){if(r&&(o(null),v(null),p)){var e=p.x/s,n=p.y/s,i=Math.abs(e),a=Math.abs(n);if(Math.max(i,a)<.1)return;var u=e,l=n;h.current=window.setInterval((function(){Math.abs(u)<.01&&Math.abs(l)<.01?window.clearInterval(h.current):t(20*(u*=Z7),20*(l*=Z7))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,o=0,i=Math.abs(n),a=Math.abs(r);i===a?o="x"===g.current?n:r:i>a?(o=n,g.current="x"):(o=r,g.current="y"),t(-o,-o)&&e.preventDefault()}},a.useEffect((function(){function t(e){m.current.onTouchMove(e)}function n(e){m.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){m.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){m.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(F,(function(e,t){function n(e,t){e((function(e){return ge(e+t)}))}return!!de&&(N?n(L,e):n(H,t),ke(),_e(),!0)})),Object(a.useEffect)((function(){return ke(),be&&(me.current=setTimeout((function(){we(0)}),100)),ke}),[be]);var Ce=function(e,t,n,r,o,i,u){var l,c,s,d=u.tabs,f=u.tabPosition,p=u.rtl;return["top","bottom"].includes(f)?(l="width",c=p?"right":"left",s=Math.abs(n)):(l="height",c="top",s=-n),Object(a.useMemo)((function(){if(!d.length)return[0,0];for(var n=d.length,r=n,o=0;o<n;o+=1){var i=e.get(d[o].key)||eee;if(i[c]+i[l]>s+t){r=o-1;break}}for(var a=0,u=n-1;u>=0;u-=1)if((e.get(d[u].key)||eee)[c]<s){a=u+1;break}return a>=r?[0,0]:[a,r]}),[e,t,r,o,i,s,f,d.map((function(e){return e.key})).join("_"),p])}(ae,fe,N?V:U,le,ce,se,GW(GW({},e),{},{tabs:j})),Ee=Tf(Ce,2),Oe=Ee[0],Se=Ee[1],xe=vW((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=ae.get(e)||{width:0,height:0,left:0,right:0,top:0};if(N){var n=V;h?t.right<V?n=t.right:t.right+t.width>V+fe&&(n=t.right+t.width-fe):t.left<-V?n=-t.left:t.left+t.width>-V+fe&&(n=-(t.left+t.width-fe)),H(0),L(ge(n))}else{var r=U;t.top<-U?r=-t.top:t.top+t.height>-U+fe&&(r=-(t.top+t.height-fe)),L(0),H(ge(r))}})),je={};"top"===b||"bottom"===b?je[h?"marginRight":"marginLeft"]=w:je.marginTop=w;var De=j.map((function(e,t){var n=e.key;return a.createElement($ne,{id:f,prefixCls:x,key:n,tab:e,style:0===t?void 0:je,closable:e.closable,editable:m,active:n===v,renderWrapper:_,removeAriaLabel:null==y?void 0:y.removeAriaLabel,onClick:function(e){k(n,e)},onFocus:function(){xe(n),_e(),F.current&&(h||(F.current.scrollLeft=0),F.current.scrollTop=0)}})})),Ae=function(){return ie((function(){var e,t=new Map,n=null===(e=P.current)||void 0===e?void 0:e.getBoundingClientRect();return j.forEach((function(e){var r,o=e.key,i=null===(r=P.current)||void 0===r?void 0:r.querySelector('[data-node-key="'.concat(nee(o),'"]'));if(i){var a=function(e,t){var n=e.offsetWidth,r=e.offsetHeight,o=e.offsetTop,i=e.offsetLeft,a=e.getBoundingClientRect(),u=a.width,l=a.height,c=a.x,s=a.y;return Math.abs(u-n)<1?[u,l,c-t.x,s-t.y]:[n,r,i,o]}(i,n),u=Tf(a,4),l=u[0],c=u[1],s=u[2],d=u[3];t.set(o,{width:l,height:c,left:s,top:d})}})),t}))};Object(a.useEffect)((function(){Ae()}),[j.map((function(e){return e.key})).join("_")]);var Re=Q7((function(){var e=Gne(D),t=Gne(A),n=Gne(R);$([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var r=Gne(T);Z(r);var o=Gne(M);te(o);var i=Gne(P);Y([i[0]-r[0],i[1]-r[1]]),Ae()})),Fe=j.slice(0,Oe),Ie=j.slice(Se+1),Pe=[].concat(tl(Fe),tl(Ie)),Me=ae.get(v),Te=function(e){var t=e.activeTabOffset,n=e.horizontal,r=e.rtl,o=e.indicatorSize,i=e.indicatorAlign,l=Tf(Object(a.useState)(),2),c=l[0],s=l[1],d=Object(a.useRef)(),f=u.a.useCallback((function(e){return"function"==typeof o?o(e):"number"==typeof o?o:e}),[o]);function p(){y$.cancel(d.current)}return Object(a.useEffect)((function(){var e={};if(t)if(n){e.width=f(t.width);var o=r?"right":"left";"start"===i&&(e[o]=t[o]),"center"===i&&(e[o]=t[o]+t.width/2,e.transform=r?"translateX(50%)":"translateX(-50%)"),"end"===i&&(e[o]=t[o]+t.width,e.transform="translateX(-100%)")}else e.height=f(t.height),"start"===i&&(e.top=t.top),"center"===i&&(e.top=t.top+t.height/2,e.transform="translateY(-50%)"),"end"===i&&(e.top=t.top+t.height,e.transform="translateY(-100%)");return p(),d.current=y$((function(){s(e)})),p}),[t,n,r,o,i,f]),{style:c}}({activeTabOffset:Me,horizontal:N,rtl:h,indicatorSize:E,indicatorAlign:O}),Ne=Te.style;Object(a.useEffect)((function(){xe()}),[v,ve,he,tee(Me),tee(ae),N]),Object(a.useEffect)((function(){Re()}),[h]);var Be,Ve,Le,ze,Ue=!!Pe.length,He="".concat(x,"-nav-wrap");return N?h?(Ve=V>0,Be=V!==he):(Be=V<0,Ve=V!==ve):(Le=U<0,ze=U!==ve),a.createElement(Y7,{onResize:Re},a.createElement("div",{ref:qW(t,D),role:"tablist",className:I()("".concat(x,"-nav"),s),style:d,onKeyDown:function(){_e()}},a.createElement(iee,{ref:A,position:"left",extra:g,prefixCls:x}),a.createElement(Y7,{onResize:Re},a.createElement("div",{className:I()(He,(n={},il(n,"".concat(He,"-ping-left"),Be),il(n,"".concat(He,"-ping-right"),Ve),il(n,"".concat(He,"-ping-top"),Le),il(n,"".concat(He,"-ping-bottom"),ze),n)),ref:F},a.createElement(Y7,{onResize:Re},a.createElement("div",{ref:P,className:"".concat(x,"-nav-list"),style:{transform:"translate(".concat(V,"px, ").concat(U,"px)"),transition:be?"none":void 0}},De,a.createElement(oee,{ref:T,prefixCls:x,locale:y,editable:m,style:GW(GW({},0===De.length?void 0:je),{},{visibility:Ue?"hidden":null})}),a.createElement("div",{className:I()("".concat(x,"-ink-bar"),il({},"".concat(x,"-ink-bar-animated"),p.inkBar)),style:Ne}))))),a.createElement(Wne,e$({},e,{removeAriaLabel:null==y?void 0:y.removeAriaLabel,ref:M,prefixCls:x,tabs:Pe,className:!Ue&&pe,tabMoving:!!be})),a.createElement(iee,{ref:R,position:"right",extra:g,prefixCls:x})))})),Jne=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,o=e.style,i=e.id,u=e.active,l=e.tabKey,c=e.children;return a.createElement("div",{id:i&&"".concat(i,"-panel-").concat(l),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(l),"aria-hidden":!u,style:o,className:I()(n,u&&"".concat(n,"-active"),r),ref:t},c)})),Xne=["renderTabBar"],Zne=["label","key"],Qne=function(e){var t=e.renderTabBar,n=qz(e,Xne),r=a.useContext(L7).tabs;return t?t(GW(GW({},n),{},{panes:r.map((function(e){var t=e.label,n=e.key,r=qz(e,Zne);return a.createElement(Jne,e$({tab:t,key:n,tabKey:n},r))}))}),Yne):a.createElement(Yne,n)},ere=["key","forceRender","style","className","destroyInactiveTabPane"],tre=function(e){var t=e.id,n=e.activeKey,r=e.animated,o=e.tabPosition,i=e.destroyInactiveTabPane,u=a.useContext(L7),l=u.prefixCls,c=u.tabs,s=r.tabPane,d="".concat(l,"-tabpane");return a.createElement("div",{className:I()("".concat(l,"-content-holder"))},a.createElement("div",{className:I()("".concat(l,"-content"),"".concat(l,"-content-").concat(o),il({},"".concat(l,"-content-animated"),s))},c.map((function(e){var o=e.key,u=e.forceRender,l=e.style,c=e.className,f=e.destroyInactiveTabPane,p=qz(e,ere),v=o===n;return a.createElement(kK,e$({key:o,visible:v,forceRender:u,removeOnLeave:!(!i&&!f),leavedClassName:"".concat(d,"-hidden")},r.tabPaneMotion),(function(e,n){var r=e.style,i=e.className;return a.createElement(Jne,e$({},p,{prefixCls:d,id:t,tabKey:o,animated:s,active:v,style:GW(GW({},l),r),className:I()(c,i),ref:n}))}))}))))};var nre=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicatorSize","indicatorAlign"],rre=0,ore=a.forwardRef((function(e,t){var n,r=e.id,o=e.prefixCls,i=void 0===o?"rc-tabs":o,u=e.className,l=e.items,c=e.direction,s=e.activeKey,d=e.defaultActiveKey,f=e.editable,p=e.animated,v=e.tabPosition,h=void 0===v?"top":v,g=e.tabBarGutter,m=e.tabBarStyle,y=e.tabBarExtraContent,b=e.locale,w=e.moreIcon,_=e.moreTransitionName,k=e.destroyInactiveTabPane,C=e.renderTabBar,E=e.onChange,O=e.onTabClick,S=e.onTabScroll,x=e.getPopupContainer,j=e.popupClassName,D=e.indicatorSize,A=e.indicatorAlign,R=void 0===A?"center":A,F=qz(e,nre),P=a.useMemo((function(){return(l||[]).filter((function(e){return e&&"object"===Ln(e)&&"key"in e}))}),[l]),M="rtl"===c,T=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:GW({inkBar:!0},"object"===Ln(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(p),N=Tf(Object(a.useState)(!1),2),B=N[0],V=N[1];Object(a.useEffect)((function(){V(VG())}),[]);var L=Tf(_W((function(){var e;return null===(e=P[0])||void 0===e?void 0:e.key}),{value:s,defaultValue:d}),2),z=L[0],U=L[1],H=Tf(Object(a.useState)((function(){return P.findIndex((function(e){return e.key===z}))})),2),q=H[0],W=H[1];Object(a.useEffect)((function(){var e,t=P.findIndex((function(e){return e.key===z}));-1===t&&(t=Math.max(0,Math.min(q,P.length-1)),U(null===(e=P[t])||void 0===e?void 0:e.key));W(t)}),[P.map((function(e){return e.key})).join("_"),z,q]);var $=Tf(_W(null,{value:r}),2),G=$[0],K=$[1];Object(a.useEffect)((function(){r||(K("rc-tabs-".concat(rre)),rre+=1)}),[]);var Y={id:G,activeKey:z,animated:T,tabPosition:h,rtl:M,mobile:B},J=GW(GW({},Y),{},{editable:f,locale:b,moreIcon:w,moreTransitionName:_,tabBarGutter:g,onTabClick:function(e,t){null==O||O(e,t);var n=e!==z;U(e),n&&(null==E||E(e))},onTabScroll:S,extra:y,style:m,panes:null,getPopupContainer:x,popupClassName:j,indicatorSize:D,indicatorAlign:R});return a.createElement(L7.Provider,{value:{tabs:P,prefixCls:i}},a.createElement("div",e$({ref:t,id:r,className:I()(i,"".concat(i,"-").concat(h),(n={},il(n,"".concat(i,"-mobile"),B),il(n,"".concat(i,"-editable"),f),il(n,"".concat(i,"-rtl"),M),n),u)},F),a.createElement(Qne,e$({},J,{renderTabBar:C})),a.createElement(tre,e$({destroyInactiveTabPane:k},Y,{animated:T}))))})),ire=function(){return Ew((function e(){_w(this,e),this._dataStore=[],this._top=0,this._dataStore=[],this._top=0}),[{key:"push",value:function(e){this._dataStore[this._top++]=e}},{key:"pop",value:function(){var e=this._dataStore[this._top-1];return this._top--,e}},{key:"peek",value:function(){return this._dataStore[this._top-1]}},{key:"clear",value:function(){this._dataStore=[],this._top=0}},{key:"length",value:function(){return this._top}},{key:"isEmpty",value:function(){return 0===this._top}},{key:"toString",value:function(){return this._dataStore.toString()}}])}(),are=["+","-","/","*","(",")"],ure={"+":100,"-":100,"*":200,"/":200,"(":1e3,")":0},lre=function(e,t){return t.includes(e)};function cre(e){for(var t=e.split(" "),n=new ire,r=[];0!==t.length;)if(""!==t[0]){if(lre(t[0],are))if("("===t[0])n.push(t[0]);else if(")"===t[0]){for(;"("!==n.peek();)r.push(n.pop());n.pop()}else if(n.isEmpty())n.push(t[0]);else if(ure[t[0]]>ure[n.peek()])n.push(t[0]);else{for(;!n.isEmpty()&&ure[n.peek()]>=ure[t[0]]&&"("!==n.peek();)r.push(n.pop());n.push(t[0])}else r.push(t[0]);t.shift()}else t.shift();for(;!n.isEmpty();)r.push(n.pop());var o=function(e){var t=new ire;for(;0!==e.length;){if(lre(e[0],are)){var n=t.pop(),r=t.peek(),o=0;switch(e[0]){case"+":o=Number(r)+Number(n);break;case"-":o=Number(r)-Number(n);break;case"*":o=Number(r)*Number(n);break;case"/":o=Number(r)/Number(n)}t.pop(),t.push(o)}else t.push(e[0]);e.shift()}var i=t.pop();if(isNaN(i))throw new Error("Oops, result is not a number");if(i===1/0)throw new Error("Oops, result is Infinity");return i}(r);return o}Is.defineToken("WorkbenchContextToken");var sre=Is.defineToken("WorkbenchPluginContribution"),dre=Object.defineProperty,fre=Object.getOwnPropertyDescriptor,pre=function(e,t,n,r){for(var o,i=r>1?void 0:r?fre(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dre(t,n,i),i},vre=function(){return Ew((function e(){_w(this,e),this._plugins=[]}),[{key:"init",value:function(){this._plugins=this._workbenchPluginProvider.getContributions(),this._initPlugins()}},{key:"destroy",value:function(){this._plugins.forEach((function(e){var t;return null==(t=e.destroy)?void 0:t.call(e)}))}},{key:"_initPlugins",value:function(){this._plugins.forEach((function(e){e._inited||(e.init(),e._inited=!0)}))}}])}();pre([yd(sre)],vre.prototype,"_workbenchPluginProvider",2),vre=pre([Gs()],vre);var hre=Is.defineToken("WorkbenchContextService",{multiple:!1}),gre=u.a.createContext({container:null,cacheMap:{}});gre.displayName="TableDiContext";var mre=gre.Provider;function yre(e,t){var n,r=u.a.useContext(gre),o=r.container;if(!o)throw new Error('"useContainer" is being used outside of the TableDiContext');try{return o.get(e)}catch(e){return(null==t?void 0:t.optional)||(console.warn(e),null==(n=r.onError)||n.call(r,e)),null}}gre.Consumer;var bre=function(e){var t=e.activeColor,n=e.onSelect,r=e.colorSource,o=yre($P),i=yre(MP);return u.a.createElement("div",{className:"lakex-table-colorpicker"},r.map((function(e,r){return u.a.createElement("div",{className:"lakex-table-colorpicker-group",key:r},e.map((function(e,r){var a=(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase());return u.a.createElement("span",{key:r,className:"lakex-table-colorpicker-item",onClick:n.bind(void 0,e)},u.a.createElement("span",{style:{backgroundColor:null==o?void 0:o.getRenderColor(e)}},a&&u.a.createElement("svg",{style:{fill:null==i?void 0:i.getThemeValue("@yuque-color-icon-primary")},viewBox:"0 0 18 18"},u.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))})))})))};function wre(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _re=["onChange"];function kre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kre(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ere=function(e){var t=e.onChange,n=wre(e,_re),r=Object(a.useRef)();return u.a.createElement(s.a,Cre(Cre({},n),{},{autoComplete:"off",onChange:function(e){r.current||t(e)},onCompositionStart:function(){r.current=!0},onCompositionEnd:function(e){r.current=!1,t(e)}}))},Ore=function(){return Ew((function e(t,n,r,o){_w(this,e),this._node=t,this._type=n,this._handler=r,this._options=o||!1,this._node.addEventListener(this._type,this._handler,this._options)}),[{key:"destroy",value:function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}])}();function Sre(e,t,n,r){return new Ore(e,t,n,r)}function xre(e,t,n){if((null==e?void 0:e.nodeType)===Node.TEXT_NODE&&(e=e.parentNode),!(null==e?void 0:e.closest))return null;var r=e.closest(t);return r||null}function jre(e){var t,n;e.stopPropagation(),null==(n=null==(t=e.nativeEvent)?void 0:t.stopImmediatePropagation)||n.call(t)}var Dre=["input","textarea","select"];var Are=["allowEnter","onSave","maxRows","rows"];function Rre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rre(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ire=s.a.TextArea,Pre="lakex-editor-for-keyboard-input",Mre=u.a.forwardRef((function(e,t){var n=e.allowEnter,r=void 0!==n&&n;e.onSave;var o=e.maxRows,i=e.rows,l=void 0===i?1:i,c=wre(e,Are),d=Object(a.useRef)(null),f=WI(Object(a.useState)(e.value||""),2),p=f[0],v=f[1];Object(a.useLayoutEffect)((function(){Zw(e.value)||v(e.value)}),[e.value]),Object(a.useImperativeHandle)(t,(function(){return{focus:function(e){var t;null==(t=d.current)||t.focus(e)},blur:function(){var e;null==(e=d.current)||e.blur()},setCursorToEnd:function(){h()},setValue:function(e){v(e)},getValue:function(){return p},clearValue:function(){v("")}}}));var h=Object(a.useCallback)((function(){setTimeout((function(){var e=document.activeElement;e&&e.classList.contains(Pre)&&(r?e.scrollTop=e.scrollHeight:e.scrollLeft=e.scrollWidth)}),100)}),[r]),g=Object(a.useMemo)((function(){return o?{minRows:l,maxRows:o}:{minRows:l}}),[]),m=Object(a.useCallback)((function(t){var n,r=t.target.value;v(r),null==(n=e.onChange)||n.call(e,t)}),[e.onChange]);return r?u.a.createElement(Ire,Fre(Fre({autoSize:g,ref:d},c),{},{value:p,onChange:m,className:I()(Pre,e.className),autoComplete:"off",onMouseDown:jre,onMouseMove:jre,onMouseUp:jre,onFocus:e.onFocus,onBlur:e.onBlur})):u.a.createElement(s.a,Fre(Fre({ref:d},c),{},{value:p,onChange:m,className:I()(Pre,e.className),autoComplete:"off",onMouseDown:jre,onMouseMove:jre,onMouseUp:jre,onFocus:e.onFocus,onBlur:e.onBlur}))}));function Tre(){var e=WI(Object(a.useState)(0),2);e[0];var t=e[1];return function(){return t((function(e){return e+1}))}}var Nre=Is.defineToken("HotKeyServiceToken"),Bre=Is.defineToken("HotkeyContribution"),Vre={preventDefault:!1,enableOnInput:!1,isEnable:function(){return!0}},Lre={esc:Nz.ESC,left:Nz.LEFT,up:Nz.UP,right:Nz.RIGHT,down:Nz.DOWN,enter:Nz.ENTER,tab:Nz.TAB,space:Nz.SPACE,del:Nz.DEL,backspace:Nz.BACKSPACE},zre=Object.keys(Lre).reduce((function(e,t){return e[Lre[t]]=t,e}),{});function Ure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return zre[e]||e.toUpperCase()}function Hre(e){return Yw(e)?NC.isMac?e:e.replace(/⌘/g,"ctrl").replace(/option/g,"alt"):(console.error("hotKey needs to be string!"),"")}var qre=function(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey,o=e.shiftKey,i=e.key,a=bw({"⌘":r,ctrl:n,shift:o,alt:t},i,Ure(i)),u=Object.keys(a).reduce((function(e,t){var n=a[t];return n&&e.push(Yw(n)?n:t),e}),[]).sort((function(e,t){return Number(e)-Number(t)})).join("+");return u},Wre=function(e){return Yw(e)?e.split(/[,]\s+/):[]},$re={adapterHotKey:Hre,isKeyboardEventMatchingHotkey:function(e,t){var n=qre(e),r=Hre(t);return(Wre(r)||[]).some((function(e){return e===n}))},getFormatHotkey:Ure,keyEventToHotKey:qre};function Gre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gre(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yre(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jre(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jre(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Jre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xre=Object.defineProperty,Zre=Object.getOwnPropertyDescriptor,Qre=function(e,t,n,r){for(var o,i=r>1?void 0:r?Zre(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xre(t,n,i),i},eoe=function(){return Ew((function e(){_w(this,e),this._hotkeys=new Map,this._hotkeyToCommandId=new Map,this._init=!1}),[{key:"init",value:function(){if(!this._init){this._init=!0;var e,t=Yre(this._hotkeyPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerHotkey(this)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}},{key:"registerItem",value:function(e){var t=this,n=e.id,r=e.hotkey;if(this._hotkeys.has(n))throw new Error("A hotkey is already registered with the id '".concat(n,"'"));this._hotkeys.set(n,Kre(Kre({},e),{},{preventDefault:Zw(e.preventDefault)?Vre.preventDefault:e.preventDefault,enableOnInput:Zw(e.enableOnInput)?Vre.enableOnInput:e.enableOnInput,isEnable:Zw(e.isEnable)?Vre.isEnable:e.isEnable})),Wre(r).forEach((function(e){var r=$re.adapterHotKey(e),o=t._hotkeyToCommandId.get(r)||[];o.push(n),t._hotkeyToCommandId.set(r,o)}))}},{key:"getRegisterHotkeyIdsByPressedKey",value:function(e){return this._hotkeyToCommandId.get(e)}},{key:"getHotkeyItem",value:function(e){return this._hotkeys.get(e)}},{key:"getHotkeyItems",value:function(){return this._hotkeys.values()}},{key:"unRegister",value:function(){this._hotkeys.clear(),this._hotkeyToCommandId.clear()}}])}();Qre([yd(Bre)],eoe.prototype,"_hotkeyPluginProvider",2),eoe=Qre([Gs()],eoe);var toe=Is.defineToken("RenderPluginContribution"),noe=Is.defineToken("RenderPluginFieldContribution"),roe=function(e){return e.NORMAL="normal",e.MOBILE="mobile",e}(roe||{}),ooe=function(e){return e.DISABLE="disable",e.SYNC="sync",e.SEQUENTIAL="sequential",e.ASYNC_CONCURRENT="async-concurrent",e}(ooe||{}),ioe=function(e){return e.NORMAL="normal",e.LITE="lite",e}(ioe||{}),aoe=Is.defineToken("ViewerContribution"),uoe=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e}(uoe||{}),loe=Is.defineToken("ActiveTableServiceToken"),coe=Object.defineProperty,soe=Object.getOwnPropertyDescriptor,doe=function(){return Ew((function e(){_w(this,e)}),[{key:"getRenderBoundingClientRect",value:function(){var e=this.$workbenchRoot.querySelector(".lakex-table-workbench-toolbar-container");if(e){var t=this.$workbenchRoot.getBoundingClientRect(),n=this.$root.getBoundingClientRect();return new DOMRect(n.x,n.y,n.width,t.height-e.getBoundingClientRect().height)}return this.$root.getBoundingClientRect()}}])}();doe=function(e,t,n,r){for(var o,i=r>1?void 0:r?soe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&coe(t,n,i),i}([Gs()],doe);var foe=Object.defineProperty,poe=Object.getOwnPropertyDescriptor,voe=function(e,t,n,r){for(var o,i=r>1?void 0:r?poe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&foe(t,n,i),i},hoe=function(){return Ew((function e(){_w(this,e),this._viewport=null,this._resizeListener=null}),[{key:"viewport",get:function(){return this._viewport||this._updateViewport(),this._viewport}},{key:"init",value:function(){var e=this;this._resizeListener=Sre(this._renderContextService.$root,"resize",(function(){e._updateViewport()}))}},{key:"destroy",value:function(){var e;null==(e=this._resizeListener)||e.destroy()}},{key:"_updateViewport",value:function(){var e=this._renderContextService.$root;this._viewport=e.getBoundingClientRect()}},{key:"isDotInViewPort",value:function(e,t){if(!this._viewport)return!1;var n=e>this._viewport.left&&e<this._viewport.right,r=t>this._viewport.top&&t<this._viewport.bottom;return n&&r}}])}();function goe(e,t,n){return t=dk(t),sk(e,moe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function moe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(moe=function(){return!!e})()}voe([Ks(doe)],hoe.prototype,"_renderContextService",2),hoe=voe([Gs()],hoe);var yoe=Object.defineProperty,boe=Object.getOwnPropertyDescriptor,woe=function(e,t,n,r){for(var o,i=r>1?void 0:r?boe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yoe(t,n,i),i},_oe=function(e){function t(){var e;return _w(this,t),(e=goe(this,t,arguments))._viewNodes=new Map,e._currentView=null,e._prevView=null,e._isFirstRender=!0,e._onDoubleClickCell=e._register(new Lk),e.onDoubleClickCell=e._onDoubleClickCell.event,e._onClickCellIcon=e._register(new Lk),e.onClickCellIcon=e._onClickCellIcon.event,e._onClickRecord=e._register(new Lk),e.onClickRecord=e._onClickRecord.event,e._onClickEvent=e._register(new Lk),e.onClickEvent=e._onClickEvent.event,e._onClickIcon=e._register(new Lk),e.onClickIcon=e._onClickIcon.event,e._onScroll=e._register(new Lk),e.onScroll=e._onScroll.event,e._onViewWidthChange=e._register(new Lk),e.onViewWidthChange=e._onViewWidthChange.event,e.getRenderWidth=function(){return e.renderContextService.$root.clientWidth},e._handleScroll=function(){e.emitOnScroll(1)},e}return vk(t,e),Ew(t,[{key:"emitDoubleClickCell",value:function(e){this._onDoubleClickCell.emit(e)}},{key:"emitClickCellIcon",value:function(e){this._onClickCellIcon.emit(e)}},{key:"emitClickRecord",value:function(e){this._onClickRecord.emit(e)}},{key:"emitClickEvent",value:function(e){this._onClickEvent.emit(e)}},{key:"emitClickIcon",value:function(e){this._onClickIcon.emit(e)}},{key:"emitOnScroll",value:function(e){this._onScroll.emit(e)}},{key:"emitViewWidthChange",value:function(e){this._onViewWidthChange.emit(e)}},{key:"init",value:(n=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.onError,this.configuration.getValue("render.autoActive")&&this.activeTableService.active(),this.onError=n,this._initPlugins(),this._initViewers();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initDom",value:function(e,t){var n=this;this.renderContextService.$root=e,this.renderContextService.$workbenchRoot=t,this._renderViewPort.init(),this.renderContextService.$root.addEventListener("wheel",this._handleScroll,{passive:!0}),this.onViewWidthChange((function(e){var t=n.renderContextService.$root;e&&(t.style.width="number"==typeof e?e+"px":e)}))}},{key:"_initPlugins",value:function(){var e=this;this.renderPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)}))}},{key:"_initViewers",value:function(){var e=this;this.viewerProvider.getContributions({cache:!1}).forEach((function(t){t.registerViewer(e)}))}},{key:"render",value:function(e,t){this._renderViewer(e.get("uuid"),e.get("type"),t)}},{key:"destroy",value:function(){var e,n,r;!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this.renderPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this._renderViewPort.destroy(),this._viewNodes.clear(),null==(e=this._currentView)||e.destroy(),this._currentView=null,null==(n=this._prevView)||n.destroy(),this._prevView=null,this.renderContextService.$root.removeEventListener("wheel",this._handleScroll),null==(r=this.renderContextService.$root.parentNode)||r.removeChild(this.renderContextService.$root)}},{key:"_renderViewer",value:function(e,t,n){var r,o=this.renderContextService.$root,i=document.createElement("div");i.className="lakex-table-view-container",i.dataset.viewId=e,o.appendChild(i);var a=this._viewNodes.get(t);this._prevView=this._currentView,null==(r=this._prevView)||r.destroyAsync(),this._currentView=a?a.render(i,{viewId:e,deferMode:"CARD"===t?"disable":this.configuration.getValue("render.deferMode")},n):null,this._currentView||(o.innerHTML="",o.appendChild(this._defaultViewer())),this._isFirstRender&&(this._lifeService.status=Dw.Rendered,this._isFirstRender=!1)}},{key:"_defaultViewer",value:function(){var e=document.createElement("h3");return e.innerHTML="没有注册 Viewer 这里是骨架屏",e}},{key:"registerItem",value:function(e){if(this._viewNodes.get(e.viewType))throw Error("".concat(e.viewType," view has been registered"));this._viewNodes.set(e.viewType,e)}},{key:"getViewNodes",value:function(){return this._viewNodes}}]);var n}(bk);woe([yd(toe)],_oe.prototype,"renderPluginProvider",2),woe([yd(aoe)],_oe.prototype,"viewerProvider",2),woe([Ks(doe)],_oe.prototype,"renderContextService",2),woe([Ks(lk)],_oe.prototype,"configuration",2),woe([Ks(loe)],_oe.prototype,"activeTableService",2),woe([Ks(hoe)],_oe.prototype,"_renderViewPort",2),woe([Ks(Aw)],_oe.prototype,"_lifeService",2),woe([Ts()],_oe.prototype,"destroy",1),_oe=woe([Gs()],_oe);var koe=Object.defineProperty,Coe=Object.getOwnPropertyDescriptor,Eoe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Coe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&koe(t,n,i),i},Ooe=function(){return Ew((function e(){var t=this;_w(this,e),this._fieldTargetMap={},this._fieldComponentMap={},this.getFieldComponent=function(e){var n,r;if(t._fieldComponentMap[e])return t._fieldComponentMap[e];var o=null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldComponent)?void 0:r.call(n);return o&&(t._fieldComponentMap[e]=o),o},this.getFieldEditComponent=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldEditComponent)?void 0:r.call(n)},this.getFieldFormComponent=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldFormComponent)?void 0:r.call(n)},this.getFieldIcon=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldIcon)?void 0:r.call(n)},this.getFieldTagComponent=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldTagComponent)?void 0:r.call(n)}}),[{key:"plugins",get:function(){return this.renderPluginFieldProvider.getContributions({cache:!1})}},{key:"getFieldTargetPlugin",value:function(e){if(this._fieldTargetMap[e])return this._fieldTargetMap[e];var t=this.plugins.find((function(t){return t.fieldType===e}));return t&&(this._fieldTargetMap[e]=t),t}},{key:"getCellIsShowValidTip",value:function(e){var t;return null==(t=this.getFieldTargetPlugin(e))?void 0:t.isShowValidTipInGrid}},{key:"getFieldIsStrictValidatedValue",value:function(e){var t;return!!(null==(t=this.getFieldTargetPlugin(e))?void 0:t.isStrictValidatedValue)}},{key:"getFieldRules",value:function(e){var t,n;return null==(n=null==(t=this.getFieldTargetPlugin(e))?void 0:t.getFieldRules)?void 0:n.call(t)}},{key:"cellValueChecker",value:function(e,t){var n,r,o,i,a=null==(i=null==(o=null==(r=null==(n=this._readService)?void 0:n.getValueField)?void 0:r.call(n,e))?void 0:o.getVerify)?void 0:i.call(o,t);return null==a?void 0:a.errorMessage}}])}();Eoe([yd(noe)],Ooe.prototype,"renderPluginFieldProvider",2),Eoe([Ks(oA)],Ooe.prototype,"_readService",2),Ooe=Eoe([Gs()],Ooe);var Soe=Object.defineProperty,xoe=Object.getOwnPropertyDescriptor,joe=function(e,t,n,r){for(var o,i=r>1?void 0:r?xoe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Soe(t,n,i),i},Doe=function(){return Ew((function e(){_w(this,e)}),[{key:"_init",value:function(){this.zIndex={render:0,gridCell:0,gridCellPreviewer:1,gridStickyContent:2,gridCellFrozen:3,gridCellFrozenPreviewer:4,gridHeader:5,gridFooter:5}}}])}();joe([Ms()],Doe.prototype,"_init",1),Doe=joe([Gs()],Doe);var Aoe=Object.defineProperty,Roe=Object.getOwnPropertyDescriptor,Foe=function(){return Ew((function e(){_w(this,e),this.gridCellEditorAutoFocus=!0}),[{key:"setGridCellEditorAutoFocus",value:function(e){this.gridCellEditorAutoFocus=e}}])}();Foe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Roe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Aoe(t,n,i),i}([Gs()],Foe);var Ioe=Is.defineToken("OpenerContribution"),Poe=Object.defineProperty,Moe=Object.getOwnPropertyDescriptor,Toe=function(){return Ew((function e(){_w(this,e),this.openerName="href-opener",this.apps=["phone"]}),[{key:"open",value:function(e){window.location.href=e}}])}();Toe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Moe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Poe(t,n,i),i}([Gs()],Toe);var Noe=Object.defineProperty,Boe=Object.getOwnPropertyDescriptor,Voe=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"],Loe=function(){return Ew((function e(){_w(this,e),this.openerName="safe-redirect-opener",this.apps=["link:external"]}),[{key:"open",value:function(e){var t=document.location,n=t.protocol,r=t.host,o=window.__mockOpen||window.open;Voe.some((function(t){return e.startsWith(t)}))?o(e):o("".concat(n,"//").concat(r,"/r/goto?url=").concat(encodeURIComponent(e)),"_blank")}}])}();Loe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Boe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Noe(t,n,i),i}([Gs()],Loe);var zoe=Object.defineProperty,Uoe=Object.getOwnPropertyDescriptor,Hoe=function(){return Ew((function e(){_w(this,e),this.openerName="window-new-opener",this.apps=["link"]}),[{key:"open",value:function(e){(window.__mockOpen||window.open)(e,"_blank")}}])}();Hoe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Uoe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zoe(t,n,i),i}([Gs()],Hoe);var qoe=Object.defineProperty,Woe=Object.getOwnPropertyDescriptor,$oe=function(){return Ew((function e(){_w(this,e),this.openerName="window-opener",this.apps=["email"]}),[{key:"open",value:function(e){(window.__mockOpen||window.open)(e,"_self")}}])}();function Goe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Koe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Koe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Koe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}$oe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Woe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qoe(t,n,i),i}([Gs()],$oe);var Yoe=Object.defineProperty,Joe=Object.getOwnPropertyDescriptor,Xoe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Joe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yoe(t,n,i),i},Zoe=function(){return Ew((function e(){_w(this,e),this.openers=[],this.apps=[]}),[{key:"init",value:function(){var e,t=Goe(this._openerProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerOpener){var r=n.registerOpener();r&&r.length>0&&this.registerOpeners(r)}if(n.registerOpenerApp){var o=n.registerOpenerApp();if(o&&o.length>0){var i,a=Goe(o);try{for(a.s();!(i=a.n()).done;){var u=i.value;this.registerApp(u)}}catch(e){a.e(e)}finally{a.f()}}}}}catch(e){t.e(e)}finally{t.f()}}},{key:"registerOpeners",value:function(e){if(e){var t,n=Goe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.registerOpener(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerOpener",value:function(e){var t=this.openers.findIndex((function(t){return t.openerName===e.openerName}));if(t>-1){var n=this.openers[t];e.apps||(e.apps=n.apps),this.openers.splice(t,1)}e.apps?this.openers.push(e):console.warn("missing opener apps",e)}},{key:"registerApp",value:function(e){var t=this.apps.findIndex((function(t){return t.name===e.name&&(!e.sub_name||t.sub_name===e.sub_name)}));t>-1&&this.apps.splice(t,1),this.apps.push(e)}},{key:"getApps",value:function(){return this.apps}},{key:"getOpener",value:function(e){var t,n=Goe(this.openers);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.apps.includes(e.name+(e.sub_name?":"+e.sub_name:"")))return r}}catch(e){n.e(e)}finally{n.f()}}}])}();function Qoe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eie(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function eie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Xoe([yd(Ioe)],Zoe.prototype,"_openerProvider",2),Zoe=Xoe([Gs()],Zoe);var tie=Object.defineProperty,nie=Object.getOwnPropertyDescriptor,rie=function(e,t,n,r){for(var o,i=r>1?void 0:r?nie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tie(t,n,i),i},oie=function(){return Ew((function e(){_w(this,e)}),[{key:"getOpenerApp",value:function(e,t){var n,r,o=Qoe(this.registry.getApps().filter((function(t){return t.name===e})));try{for(o.s();!(r=o.n()).done;){var i=r.value,a=!0;if(i.pattern)new RegExp(i.pattern).test(t)||(a=!1);var u=i.include;u&&(Yw(u)&&u.startsWith("{")&&(u=JSON.parse(u)),Kw(u)&&!u.test(t)&&(a=!1));var l=i.exclude;if(l&&(Yw(l)&&l.startsWith("{")&&(l=JSON.parse(l)),Kw(l)&&l.test(t)&&(a=!1)),a){n=i;break}}}catch(e){o.e(e)}finally{o.f()}return n}}])}();function iie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aie(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function aie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}rie([Ks(Zoe)],oie.prototype,"registry",2),oie=rie([Gs()],oie);var uie=Object.defineProperty,lie=Object.getOwnPropertyDescriptor,cie=function(){return Ew((function e(){_w(this,e)}),[{key:"getHashes",value:function(){var e=window.location.hash;if(e){var t=e.replace("#","").split(";");if(t.length>0){var n,r=[],o=iie(t);try{for(o.s();!(n=o.n()).done;){var i=WI(n.value.split(":"),2),a=i[0],u=i[1];a&&!u&&32===a.length&&(u=a,a="view"),u&&r.push({name:a,url:u})}}catch(e){o.e(e)}finally{o.f()}return r}}}},{key:"setHash",value:function(e,t){var n=this.buildHash(e,t);n&&(window.location.hash=n)}},{key:"removeHash",value:function(e){var t=this.getHashes();if(t)if((t=t.filter((function(t){return t.name!==e}))).length>0){var n=this._buildHashStr(t);window.location.hash=n}else window.location.hash=""}},{key:"buildHash",value:function(e,t){var n=this.getHashes()||[],r=n.findIndex((function(t){return t.name===e}));return r>-1&&n.splice(r,1),n.push({name:e,url:t}),this._buildHashStr(n)}},{key:"_buildHashStr",value:function(e){return e.map((function(e){return e.name+":"+e.url})).join(";")}}])}();cie=function(e,t,n,r){for(var o,i=r>1?void 0:r?lie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uie(t,n,i),i}([Gs()],cie);var sie=Object.defineProperty,die=Object.getOwnPropertyDescriptor,fie=function(e,t,n,r){for(var o,i=r>1?void 0:r?die(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sie(t,n,i),i},pie=function(){return Ew((function e(){_w(this,e)}),[{key:"open",value:function(e,t){var n=this._appService.getOpenerApp(e,t);if(!n)throw new Error("Not match app by url: ".concat(t));var r=this.registry.getOpener(n);if(!r)throw new Error("Not define link app opener: ".concat(n.name));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];r.open.apply(r,[t].concat(i)),r.autoClear?this._openerHash.removeHash(e):r.hash&&this.setHash(e,t)}},{key:"getOpenLink",value:function(e,t){var n=this._openerHash.buildHash(e,t);return window.location.origin+window.location.pathname+window.location.search+"#"+n}},{key:"setHash",value:function(e,t){this._configurationService.getValue("opener.useHash")&&this._openerHash.setHash(e,t)}}])}();fie([Ks(Zoe)],pie.prototype,"registry",2),fie([Ks(cie)],pie.prototype,"_openerHash",2),fie([Ks(oie)],pie.prototype,"_appService",2),fie([Ks(lk)],pie.prototype,"_configurationService",2),pie=fie([Gs()],pie);var vie={name:"email",display_name:"Email",description:"邮件",include:/mailto:\S+@\S+\.\S+$/},hie={name:"file",display_name:"File",description:"附件"},gie={name:"image",display_name:"Image",description:"图片"},mie=/^https?:\/\/(.*(antfin|yuque|alibaba|antfin-inc|alibaba-inc).com|lark.alipay.net)/i,yie={name:"link",display_name:"Yuque Link",description:"链接",include:mie},bie={name:"link",sub_name:"external",display_name:"External Link",description:"外部链接",exclude:mie},wie={name:"phone",display_name:"Phone",description:"手机号码",include:/tel:\d+$/},_ie={name:"user",display_name:"用户",description:"用户首页"},kie=Is.defineToken("FileContribution"),Cie=Object.defineProperty,Eie=Object.getOwnPropertyDescriptor,Oie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Eie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Cie(t,n,i),i},Sie=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e=this.fileProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerFile()}}])}();Oie([yd(kie)],Sie.prototype,"fileProvider",2),Sie=Oie([Gs()],Sie);var xie={FILE_EXT:[".dwg",".vsd",".vsdm",".vsdx",".vss",".vssm",".vst",".vstm",".vstx",".msi",".chm",".sub",".idx",".sst",".son",".srt",".ssa",".ass",".smi",".psb",".pjs",".stl",".tts",".vsf",".zeg",".ipynb",".msg",".caj",".jar",".tar",".gz",".cnf",".ini",".rpm",".conf"],IMAGE_EXT:[".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif"],TEXT_FILE_EXT:[".txt",".abap",".ada",".adp",".ahk",".as",".as3",".asc",".ascx",".asm",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bat",".bib",".bsh",".build",".builder",".c",".c++",".capfile",".cc",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmake",".cmd",".coffee",".config",".cpp",".cpt",".cpy",".cs",".cshtml",".cson",".csproj",".css",".ctp",".cxx",".dart",".d",".ddl",".di",".diff",".disco",".dml",".dtd",".dtml",".el",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".groovy",".gvy",".Hcp",".h",".h++",".haml",".handlebars",".hbs",".hh",".hpp",".hrl",".hs",".htc",".hxx",".html",".htm",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".pug",".jade",".jav",".java",".js",".json",".jsp",".jsx",".l",".less",".lhs",".lisp",".log",".lst",".ltx",".lua",".m",".mak",".make",".manifest",".master",".md",".mkd",".markdn",".markdown",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".makefile",".nfo",".opml",".osascript",".p",".pas",".patch",".php",".php2",".php3",".php4",".php5",".phtml",".pl",".plx",".perl",".pm",".pod",".pp",".profile",".ps1",".ps1xml",".psd1",".psm1",".pss",".pt",".py",".pyw",".proto",".r",".rake",".rb",".rbx",".rc",".rdf",".re",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".s",".sass",".scala",".scm",".sconscript",".sconstruct",".script",".scss",".sgml",".sh",".shtml",".sml",".svn-base",".swift",".sql",".sty",".tcl",".tex",".textile",".tld",".tli",".tmpl",".tpl",".ts",".tsx",".vb",".vi",".vim",".vmg",".webpart",".wsp",".wsdl",".xhtml",".xml",".jmx",".xoml",".xsd",".xslt",".yaml",".yaws",".yml",".zsh",".arxml"],VIDEO_EXT:[".mp4",".mov",".avi",".wmv",".m4a",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".flac",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".rmvb",".wmv"],OFFICE_EXT:[".docx",".doc",".dotx",".dot",".rtf",".txt",".html",".htm",".lake",".lakebook",".lakesheet",".lakemind",".lakeshow",".pdf",".xls",".xlsx",".xltx",".xlsm",".xlt",".csv",".pptx",".ppt",".potx",".pot",".ppsx",".pps",".pages",".numbers",".nmbtemplate",".template",".key",".keynote",".kth",".et",".ett",".dps",".dpt",".wps",".wpt",".txt",".md",".mark",".markdown",".xmind",".graffle",".gtemplate",".gstencil",".mindnode",".vpp",".mmap",".mm",".mpp"],MAC_OFFICE_EXT:[".key",".keynote",".pages",".numbers"],AUDIO_EXT:[".mp3",".mpga",".wav",".m4a",".flac"],PRESENTATION_EXT:[".ppt",".pptx",".ppsx",".potx",".pot",".key"],SHEET_EXT:[".xls",".xlsx",".xlsm",".xltx",".xlt",".csv",".numbers"],MMAP_EXT:[".mindnode",".mindnode.zip",".xmind",".xmind.zip",".mmap",".mmap.zip",".mm"],COMPRESS_EXT:[".zip",".rar",".gz",".tgz",".gzip",".7z",".tar",".jar",".dmg",".pkg"]},jie={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]};function Die(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e.type&&jie[e.type];return r?r.includes(n)?n:r[0]:n}function Aie(e){var t=Die(e);return function(e){var t=Die(e);return xie.IMAGE_EXT.includes(t)}(e)?"image":function(e){var t=Die(e);return xie.VIDEO_EXT.includes(t)}(e)?"video":function(e){var t=Die(e);return xie.AUDIO_EXT.includes(t)}(e)?"audio":["doc","docx","dot","dotx"].includes(t)?"word":function(e){var t=Die(e);return["pdf"].includes(t)}(e)?"pdf":"txt"===t?"txt":["pages","md","markdown","rtf"].includes(t)?"doc":"numbers"===t?"numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"excel":function(e){var t=Die(e);return xie.SHEET_EXT.includes(t)}(e)?"sheet":"key"===e?"keynote":function(e){var t=Die(e);return xie.PRESENTATION_EXT.includes(t)}(e)?"ppt":["xmind","xmind.zip"].includes(t)?"xmind":["mindnode","mindnode.zip"].includes(t)?"mindnote":function(e){var t=Die(e);return xie.MMAP_EXT.includes(t)}(e)?"minimap":"sketch"===t?"sketch":["rp","rplib"].includes(t)?"axure":"psd"===t?"psd":"ai"===t?"ai":"graffle"===t?"graffle":"zip"===t?"rar":"lake"===t?"lake":"lakesheet"===t?"lakesheet":"default"}var Rie=Object.defineProperty,Fie=Object.getOwnPropertyDescriptor,Iie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rie(t,n,i),i},Pie=function(){return Ew((function e(){_w(this,e)}),[{key:"_provider",get:function(){return this._fileRegistry.getProvider()}},{key:"getExts",value:function(){var e,t;return(null==(e=this._provider)?void 0:e.getExts)?this._provider.getExts():(t=[],Object.keys(xie).forEach((function(e){t=t.concat(xie[e])})),t).join(",")}},{key:"getFileKey",value:function(e){var t;return(null==(t=this._provider)?void 0:t.getFileKey)?this._provider.getFileKey(e):Aie(e)}},{key:"getPreviewUrl",value:function(e){var t,n;return(null==(t=this._provider)?void 0:t.getPreviewUrl)?null==(n=this._provider)?void 0:n.getPreviewUrl(e):e}},{key:"getPreviewOrDownloadUrl",value:function(e,t){var n,r;return(null==(n=this._provider)?void 0:n.getPreviewOrDownloadUrl)?null==(r=this._provider)?void 0:r.getPreviewOrDownloadUrl(e,t):e}}])}();Iie([Ks(Sie)],Pie.prototype,"_fileRegistry",2),Pie=Iie([Gs()],Pie);var Mie=dd().contribution(kie).register(Sie).register(Pie),Tie=Object.defineProperty,Nie=Object.getOwnPropertyDescriptor,Bie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tie(t,n,i),i},Vie=function(){return Ew((function e(){_w(this,e),this.openerName="file-previewer-opener",this.apps=["file"]}),[{key:"open",value:function(e,t){var n=this._fileService.getPreviewOrDownloadUrl(e,t.size);n&&(window.__mockOpen||window.open)(n,"_blank","noopener,noreferrer")}}])}();Bie([Ks(Pie)],Vie.prototype,"_fileService",2),Vie=Bie([Gs()],Vie);var Lie={exports:{}};!function(e,t){var n;e.exports=(n=function(e,t){var n,r,o,i,a,u,l,c,s,d,f,p,v,h,g,m,y,b,w=this,_=!1,k=!0,C=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},O=function(e){if(m)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!s&&M();for(var n,r,o=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<H.length;i++)(n=H[i]).onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),m=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){m=!1}),a)}},S=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},x=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},j=function(){var e=1===g.getNumItemsFn();e!==h&&(x(r,"ui--one-slide",e),h=e)},D=function(){x(l,"share-modal--hidden",C)},A=function(){return(C=!C)?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout((function(){C&&D()}),300)):(D(),setTimeout((function(){C||t.addClass(l,"pswp__share-modal--fade-in")}),30)),C||F(),!1},R=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),C||A(),1))},F=function(){for(var e,t,n,r,o="",i=0;i<g.shareButtons.length;i++)e=g.shareButtons[i],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),r=g.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(o=g.parseShareButtonOut(e,o));l.children[0].innerHTML=o,l.children[0].onclick=R},I=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},P=0,M=function(){clearTimeout(b),P=0,s&&w.setIdle(!1)},T=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout((function(){w.setIdle(!0)}),g.timeToIdleOutside))},N=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},B=function(){g.preloaderEl&&(V(!0),d("beforeChange",(function(){clearTimeout(v),v=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&V(!1):V(!0)}),g.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,n){e.currItem===n&&V(!0)})))},V=function(e){p!==e&&(x(f,"preloader--active",!e),p=e)},L=function(e){var n=e.vGap;if(S()){var a=g.barsSize;if(g.captionEl&&"auto"===a.bottom)if(i||((i=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(i,o),t.addClass(r,"pswp__ui--fit")),g.addCaptionHTMLFn(e,i,!0)){var u=i.clientHeight;n.bottom=parseInt(u,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},z=function(){g.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",M),t.bind(document,"mouseout",T),y=setInterval((function(){2==++P&&w.setIdle(!0)}),g.timeToIdle/2)}))},U=function(){var e;d("onVerticalDrag",(function(e){k&&e<.95?w.hideControls():!k&&e>=.95&&w.showControls()})),d("onPinchClose",(function(t){k&&t<.9?(w.hideControls(),e=!0):e&&!k&&t>.9&&w.showControls()})),d("zoomGestureEnded",(function(){(e=!1)&&!k&&w.showControls()}))},H=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){A()}},{name:"button--share",option:"shareEl",onInit:function(e){u=e},onTap:function(){A()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],q=function(){var e,n,o,i=function(r){if(r)for(var i=r.length,a=0;a<i;a++){e=r[a],n=e.className;for(var u=0;u<H.length;u++)o=H[u],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&i(a.children)};w.init=function(){t.extend(e.options,E,!0),g=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,U(),d("beforeChange",w.update),d("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){t.bind(r,"pswpTap click",O),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){C||A(),y&&clearInterval(y),t.unbind(document,"mouseout",T),t.unbind(document,"mousemove",M),t.unbind(r,"pswpTap click",O),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){g.captionEl&&(i&&r.removeChild(i),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),g.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),d("initialZoomIn",(function(){g.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),d("parseVerticalMargin",L),q(),g.shareEl&&u&&l&&(C=!0),j(),z(),N(),B()},w.setIdle=function(e){s=e,x(r,"ui--idle",e)},w.update=function(){k&&e.currItem?(w.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,o),x(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,C||A(),j()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){g.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!m)if(n.detail&&"mouse"===n.detail.pointerType){if(I(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(k?w.hideControls():w.showControls()),g.tapToClose&&(t.hasClass(r,"pswp__img")||I(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;x(r,"ui--over-close",I(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),k=!1},w.showControls=function(){k=!0,_||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}},n)}(Lie);var zie=t_(Lie.exports),Uie={exports:{}};function Hie(){}function qie(){}qie.resetWarningCache=Hie;Uie.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qie,resetWarningCache:Hie};return n.PropTypes=n,n}();var Wie=t_(Uie.exports),$ie=.05;function Gie(e,t,n){return t=dk(t),sk(e,Kie()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Kie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kie=function(){return!!e})()}var Yie=function(e){function t(e){var n;return _w(this,t),(n=Gie(this,t,[e])).state={prevStatus:"default",nextStatus:"default",zoomInStatus:"default",zoomOutStatus:"default",originSizeStatus:"default",bestSizeStatus:"default"},n}return vk(t,e),Ew(t,[{key:"afterZoom",value:function(){var e,t=this.props.imageBrowser,n=t.getCurrentZoomLevel(),r=t.getInitialZoomLevel();n===r&&(e="activated"),1===r&&(e="disable"),this.setState({zoomOutStatus:n===$ie?"disable":"default",zoomInStatus:5===n?"disable":"default",originSizeStatus:1===n?"activated":"default",bestSizeStatus:e})}},{key:"afterChange",value:function(){var e=this.props.imageBrowser.getCount();this.setState({nextStatus:1===e?"disable":"default",prevStatus:1===e?"disable":"default"})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.imageBrowser;t.on("afterzoom",(function(){e.afterZoom()})),t.on("afterchange",(function(){e.afterChange()})),t.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.setState({tooltipContainer:this.tooltipContainer})}},{key:"renderBtn",value:function(e,t,n,r){var o=this.state.tooltipContainer;return o?u.a.createElement(d.a,{title:t,getPopupContainer:function(){return o},mouseEnterDelay:1},u.a.createElement("span",{className:"lake-pswp-".concat(e," btn ").concat(n),onClick:r})):""}},{key:"render",value:function(){var e=this,t=this.props,n=t.imageBrowser,r=t.shouldShowNavigation,o=t.shouldShowDownload,i=t.shouldShowRemove,a=this.state,l=a.prevStatus,c=a.nextStatus,s=a.zoomInStatus,d=a.zoomOutStatus,f=a.originSizeStatus,p=a.bestSizeStatus;return u.a.createElement("div",{className:"lake-pswp-tool-bar"},u.a.createElement("div",{ref:function(t){e.tooltipContainer=t}}),u.a.createElement("div",{className:"pswp-toolbar-content"},r&&u.a.createElement(u.a.Fragment,null,this.renderBtn("arrow-left",Lw("上一张"),l,(function(){"disable"!==l&&n.prev()})),u.a.createElement("span",{className:"lake-pswp-counter"}),this.renderBtn("arrow-right",Lw("下一张"),c,(function(){"disable"!==c&&n.next()})),u.a.createElement("span",{className:"separation"})),this.renderBtn("zoom-out",Lw("缩小"),d,(function(){"disable"!==d&&n.zoomOut()})),this.renderBtn("zoom-in",Lw("放大"),s,(function(){"disable"!==s&&n.zoomIn()})),this.renderBtn("origin-size",Lw("实际尺寸"),f,(function(){"disable"!==f&&n.zoomToOriginSize()})),this.renderBtn("best-size",Lw("适应屏幕"),p,(function(){"disable"!==p&&n.zoomToBestSize()})),o&&this.renderBtn("download",Lw("下载图片"),null,(function(){n.download()})),i&&this.renderBtn("remove",Lw("删除图片"),null,(function(){n.remove()}))))}}])}(u.a.Component);function Jie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jie(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zie(e,t,n){return t=dk(t),sk(e,Qie()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function Qie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qie=function(){return!!e})()}function eae(e){return["http:","https:","data:","blob:","/"].some((function(t){return e.startsWith(t)}))?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}Yie.propTypes={imageBrowser:Wie.object,shouldShowNavigation:Wie.bool,shouldShowDownload:Wie.bool,shouldShowRemove:Wie.bool};var tae=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_w(this,t),e=Zie(this,t);var r=n.pswpOptions||{};return e.options=Xie(Xie(Xie({shouldToggleOnHover:!1,shouldShowNavigation:!0,shouldShowDownload:!1,shouldShowRemove:!1,closable:!0,container:document.body},globalThis.__LakeTableImageBrowser_options),n),{},{pswpOptions:Xie({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,dragging:NC.isMobile,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!0,bgOpacity:.8,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:NC.isMobile,tapToClose:!0,barsSize:{top:44,bottom:80}},r)}),e.options.closable||(e.options.pswpOptions.escKey=!1,e.options.pswpOptions.closeElClasses=[]),e.images=[],e.pswpDestroy=!0,e.timeouts={},e._initRoot(),e}return vk(t,e),Ew(t,[{key:"_initRoot",value:function(){var e=this,t=this.options.closable?'<button type="button" class="pswp__button lake-pswp-button-close" title="Close (Esc)"></button>':"",n=document.createElement("div");n.innerHTML='\n    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="pswp__bg"></div>\n        <div class="pswp__scroll-wrap">\n            <div class="pswp__container">\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n            </div>\n            <div class="pswp__ui pswp__ui--hidden">\n                '.concat(t,'\n                <div class="lake-pswp-custom-top-bar"></div>\n            </div>\n        </div>\n    </div>\n    '),this.options.container?this.options.container.appendChild(n):document.body.appendChild(n),this.root=n.children[0],NC.isMobile?this.root.classList.add("lake-pswp-mobile"):this.root.classList.add("lake-pswp-pc");var r=this.root.querySelector(".lake-pswp-custom-top-bar"),o=this.root.querySelector(".lake-pswp-button-close");this.toolbarContainer=r,this.closeBtnContainer=o,c.a.render(u.a.createElement(Yie,{imageBrowser:this,shouldShowNavigation:this.options.shouldShowNavigation,shouldShowDownload:this.options.shouldShowDownload,shouldShowRemove:this.options.shouldShowRemove}),r,(function(){NC.isMobile||(e.bindKeyboardEvnet(),e.bindClickEvent(),e.options.shouldToggleOnHover&&e.hoverControllerFadeInAndOut())}))}},{key:"hoverControllerFadeInAndOut",value:function(){var e=this,t=this.toolbarContainer,n=this.closeBtnContainer;t.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),t.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")}))}},{key:"removeFadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),n[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this,t=this.root,n=this.closeBtnContainer;t.addEventListener("click",(function(t){var n=t.target;n.classList.contains("pswp__img")&&setTimeout((function(){e.currentZoom=null,e.afterZoom()}),366),(n.classList.contains("pswp__bg")||n.classList.contains("lake-pswp-tool-bar"))&&e.close()})),n.addEventListener("click",(function(){e.close()}))}},{key:"prev",value:function(){this.pswp.prev()}},{key:"next",value:function(){this.pswp.next()}},{key:"renderCounter",value:function(){var e=this.toolbarContainer,t=this.pswp;e&&(e.querySelector(".lake-pswp-counter").innerHTML="".concat(t.getCurrentIndex()+1," / ").concat(t.items.length))}},{key:"getCurrentZoomLevel",value:function(){return this.currentZoom&&Number(this.currentZoom.toFixed(2))||this.pswp&&Number(this.pswp.getZoomLevel().toFixed(2))}},{key:"zoomTo",value:function(e){var t=this.pswp;t.zoomTo(e,{x:t.viewportSize.x/2,y:t.viewportSize.y/2},100),this.currentZoom=e,this.afterZoom()}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=1.2*e;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(e!==$ie){var t=e/1.2;t<$ie&&(t=$ie),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){var e=this;this.root.addEventListener("keydown",(function(t){(t.metaKey||t.ctrlKey)&&187===t.keyCode&&(t.preventDefault(),e.zoomIn()),(t.metaKey||t.ctrlKey)&&189===t.keyCode&&(t.preventDefault(),e.zoomOut())}))}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();this.zoomTo(e)}},{key:"getInitialZoomLevel",value:function(){return Number(this.pswp.currItem.initialZoomLevel.toFixed(2))}},{key:"afterZoom",value:function(){this.emit("afterzoom")}},{key:"getCount",value:function(){return this.pswp.items.length}},{key:"afterChange",value:function(){var e=this;if(!NC.isMobile){var t=this.getInitialZoomLevel();this.renderCounter(),this.currentZoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.currentZoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e=this,t=this.pswp;t.listen("afterChange",(function(){e.afterChange()})),t.listen("destroy",(function(){e.pswpDestroy=!0})),t.listen("resize",(function(){e.emit("resize")})),t.listen("imageLoadComplete",(function(){e.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){var e=this.root,t=0===this.options.pswpOptions.bgOpacity?"0 2px 14px rgba(0, 0, 0, 0.25)":"0 0 10px rgba(0, 0, 0, 0.5)";e.querySelectorAll(".pswp__img").forEach((function(e){e.complete?(e.style.background="white",e.style["box-shadow"]=t):e.onload=function(){e.style.background="white",e.style["box-shadow"]=t}}))}},{key:"open",value:function(e,n){var r=this;if(!0===this.pswpDestroy){e.forEach((function(e){return e.src=eae(e.src),e.msrc=eae(e.msrc),e}));var o=this.root,i=this.options.pswpOptions,a=new zz(o,zie,e.map((function(e){return Xie({},e)})),Xie({index:n},i)),u=a.lazyLoadItem;a.lazyLoadItem=function(t){if(!e[(e.length+t)%e.length].layoutSelf)return u.call(a,t)},a.listen("gettingData",(function(n,o){isNaN(o.w)||isNaN(o.h)?(o.w=0,o.h=0,t.loadImageSize(o,a,r)):e[n].layoutSelf&&t.loadImageSize(o,a,r,e[n].layoutSelf)})),a.items=e.map((function(e){return e.src=eae(e.src),e.msrc=eae(e.msrc),e})),a.init(),this.pswp=a,this.pswpDestroy=!1,this.options.shouldToggleOnHover&&(NC.isMobile||(this.toolbarContainer.removeClass("pswp-fade-out"),this.fadeOut(this.toolbarContainer,"toolbarFadeInAndOut"),this.closeBtnContainer.removeClass("pswp-fade-out"),this.fadeOut(this.closeBtnContainer,"closeFadeInAndOut")),o.removeClass("pswp-fade-in"),o.addClass("pswp-fade-in")),this.afterChange(),this.bindPswpEvent()}}},{key:"download",value:function(){window.open(this.pswp.currItem.src,"_blank")}},{key:"remove",value:function(){this.emit("remove"),this.destroy()}},{key:"close",value:function(){this.options.closable&&this.pswp&&this.pswp.close()}},{key:"destroy",value:function(){this.root&&(this.close(),this.root.remove(),this.options=null)}}],[{key:"loadImageSize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.cleanSlide(e),e.loading=!0,r)e.img=r(),e.img.className="pswp__img",setTimeout((function(){var t;e.loading=!1,e.loaded=!0,null==(t=e.loadComplete)||t.call(e,e)}));else{var o=document.createElement("img");o.className="pswp__img",e.img=o;var i=function(){if(n.pswpDestroy)return o=null,void(e.img=null);0!==e.w&&0!==e.h||(e.w=o.width,e.h=o.height),e.needUpdate=!0,t.updateSize(),e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,o.onload=o.onerror=null,o=null};o.onload=i,o.onerror=function(){e.loadError=!0,i()},o.src=e.src}}}])}(Hz);var nae=Object.defineProperty,rae=Object.getOwnPropertyDescriptor,oae=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};function iae(e,t){var n=(globalThis.__LakeTableImageBrowser||(globalThis.__LakeTableImageBrowser=new tae),globalThis.__LakeTableImageBrowser),r=Array.isArray(e)?e.map((function(e){return oae(e)})):[e].map((function(e){return oae(e)}));n.open(r,t||0)}var aae=function(){return Ew((function e(){_w(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.list,r=t.index||0;n||(r=0,n=[{src:e,width:t.width,height:t.height}]),iae(n,r)}}])}();aae=function(e,t,n,r){for(var o,i=r>1?void 0:r?rae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nae(t,n,i),i}([Gs()],aae);var uae=Object.defineProperty,lae=Object.getOwnPropertyDescriptor,cae=function(){return Ew((function e(){_w(this,e),this.openerName="user-opener",this.apps=["user"]}),[{key:"open",value:function(e){e.login&&(window.__mockOpen||window.open)("/"+e.login,"_blank")}}])}();function sae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dae(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function dae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}cae=function(e,t,n,r){for(var o,i=r>1?void 0:r?lae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uae(t,n,i),i}([Gs()],cae);var fae=Object.defineProperty,pae=Object.getOwnPropertyDescriptor,vae=function(e,t,n,r){for(var o,i=r>1?void 0:r?pae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fae(t,n,i),i},hae=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.registry.registerApp(vie),this.registry.registerApp(hie),this.registry.registerApp(vie),this.registry.registerApp(gie),this.registry.registerApp(yie),this.registry.registerApp(bie),this.registry.registerApp(wie),this.registry.registerApp(_ie),this.registry.registerOpener(this.filePreviewOpener),this.registry.registerOpener(this.imageViewerOpener),this.registry.registerOpener(this.hrefOpener),this.registry.registerOpener(this.safeRedirectOpener),this.registry.registerOpener(this.userOpener),this.registry.registerOpener(this.windowOpener),this.registry.registerOpener(this.windowNewOpener),this.registry.init();var e=this.openerHash.getHashes();if(e){var t,n=sae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name&&r.url&&this.openerService.open(r.name,r.url)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"initConfiguration",value:function(){this._configurationService.registerConfiguration({id:"opener",type:"object",title:"打开器",properties:{useHash:{type:"boolean",description:"opener 是否同步更新 url hash"}}}),this._configurationService.registerDefaultValue({"opener.useHash":!0})}}])}();vae([Ks(Zoe)],hae.prototype,"registry",2),vae([Ks(cie)],hae.prototype,"openerHash",2),vae([Ks(pie)],hae.prototype,"openerService",2),vae([Ks(lk)],hae.prototype,"_configurationService",2),vae([Ks(Vie)],hae.prototype,"filePreviewOpener",2),vae([Ks(aae)],hae.prototype,"imageViewerOpener",2),vae([Ks(Toe)],hae.prototype,"hrefOpener",2),vae([Ks(Loe)],hae.prototype,"safeRedirectOpener",2),vae([Ks(cae)],hae.prototype,"userOpener",2),vae([Ks($oe)],hae.prototype,"windowOpener",2),vae([Ks(Hoe)],hae.prototype,"windowNewOpener",2),hae=vae([Gs()],hae);var gae=dd().contribution(Ioe).register(oie).register(Zoe).register(pie).register(cie).register(hae).register(Vie).register(aae).register($oe).register(Hoe).register(Toe).register(Loe).register(cae);function mae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yae(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function yae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bae(e,t,n){return t=dk(t),sk(e,wae()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function wae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wae=function(){return!!e})()}var _ae=function(e){function t(e){var n;return _w(this,t),(n=bae(this,t))._activeViewId="",n._options=e,n.container=e.container,n._kernelService=e.kernelService,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:xA.render,action:"renderInited",data:null}),n}return vk(t,e),Ew(t,[{key:"renderService",get:function(){return this._renderService}},{key:"init",value:function(){this._listenEvent(),this._renderService.init({onError:this._options.onError})}},{key:"destroy",value:function(){this._renderService.destroy(),this.unregisterPlugins(this.container)}},{key:"render",value:function(e){if(!e)throw Error("Can't get active view data.");this._renderService.render(e,this.container)}},{key:"_logger",get:function(){return this.container.get(jA)}},{key:"_listenEvent",value:function(){var e=this;this._kernelService.onDataLoaded((function(t){var n=e.container.get(lk).getValue("render.noRecord");if("loadedRecords"===t||n){var r=e._readService.getActiveView();r&&(e._activeViewId=r.get("uuid"),e.render(r))}})),this._kernelService.onDataChanged((function(){if(e.container.get(lk).getValue("render.noRecord")||!(e._lifeService.status<Dw.RecordReady)){var t=e._readService.getActiveView();t&&e._activeViewId!==t.get("uuid")&&(e._activeViewId=t.get("uuid"),e.render(t))}})),this._lifeService.when(Dw.Rendered,(function(){e.container.get(hae).init()}))}},{key:"_loadCoreServices",value:function(){this._renderService=this.container.get(_oe),this._lifeService=this.container.get(Aw),this._readService=this.container.get(oA)}},{key:"_registerContribs",value:function(e){if(e){var t,n=mae(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(SC);function kae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kae(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eae(e,t,n){return t=dk(t),sk(e,Oae()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Oae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oae=function(){return!!e})()}var Sae=function(e){function t(e){var n;return _w(this,t),(n=Eae(this,t,[e])).state={key:+new Date},n._props=e.props,n._ref=u.a.createRef(),n.DeferRenderComponent=KJ(e.component),n}return vk(t,e),Ew(t,[{key:"componentDidMount",value:function(){}},{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=Cae(Cae({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.container,r=this._props.deferMode,o=r===ooe.DISABLE?t:this.DeferRenderComponent;return u.a.createElement(yue,{onError:this.props.onError},u.a.createElement(lX,{mode:r===ooe.DISABLE?ooe.ASYNC_CONCURRENT:r,batchSize:5},u.a.createElement(mre,{value:{container:n,onError:this.props.onError},key:this.state.key},u.a.createElement(o,Cae(Cae({},this._props),{},{ref:this._ref})))))}}])}(a.Component);function xae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Sae.propTypes={props:Wie.object.isRequired,component:Wie.any.isRequired,container:Wie.object.isRequired,onError:Wie.func};var jae=function(){return Ew((function e(t){var n=t.onError;_w(this,e),this._onError=n}),[{key:"render",value:function(e,t,n){var r=null;if(!this.Component)throw Error("This view didn't provide view component.");return c.a.render(u.a.createElement(Sae,{props:t,component:this.Component,container:n,ref:function(e){r=e},onError:this._onError}),e),{getRoot:function(){return e},getViewNode:function(){return r},getReactRef:function(){return null==r?void 0:r.getRef()},rerender:function(e){r&&r.update(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xae(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},destroy:function(){var t;c.a.unmountComponentAtNode(e),r=null,null==(t=e.parentNode)||t.removeChild(e)},destroyAsync:function(){var t=this;e.style.display="none",LC((function(){t.destroy()}))}}}},{key:"unmount",value:function(e){}}])}();function Dae(e,t,n){return t=dk(t),sk(e,Aae()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Aae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aae=function(){return!!e})()}var Rae=Object.defineProperty,Fae=Object.getOwnPropertyDescriptor,Iae=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rae(t,n,i),i},Pae=function(e){function t(){var e;return _w(this,t),(e=Dae(this,t,arguments))._onStatusChange=e._register(new Lk),e.onStatusChange=e._onStatusChange.event,e.isActive=!1,e}return vk(t,e),Ew(t,[{key:"isAutoActive",get:function(){return this._configurationService.getValue("render.autoActive")}},{key:"active",value:function(){this.isActive||(this.isActive=!0,this._onStatusChange.emit({status:uoe.ACTIVE,isActive:this.isActive}))}},{key:"inactive",value:function(){this.isActive&&(this.isActive=!1,this._onStatusChange.emit({status:uoe.INACTIVE,isActive:this.isActive}))}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);Iae([Ks(lk)],Pae.prototype,"_configurationService",2),Iae([Ts()],Pae.prototype,"destroy",1),Pae=Iae([Gs({token:loe})],Pae);var Mae=dd().contribution(noe).contribution(toe).contribution(aoe).register(_oe).register(Ooe).register(hoe).register(Doe).register(doe).register(Foe).register(Pae);function Tae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nae(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Nae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Bae=Object.defineProperty,Vae=Object.getOwnPropertyDescriptor,Lae=function(e,t,n,r){for(var o,i=r>1?void 0:r?Vae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bae(t,n,i),i},zae=["copy","paste","cut"],Uae=function(){return Ew((function e(){_w(this,e),this._toDestroyStore=new kk,this._ignoreEnableOnInputVerify=!1}),[{key:"init",value:function(){this._hotkeyRegister.init(),this._$container=document,this._hotkeyListenerBindEvents()}},{key:"_getTargetHotkeyByEvent",value:function(e){var t=this._getPotentialHotkeyIdsByEvent(e);return this._getEnableHotkey(e,t)}},{key:"fireEventByEditable",value:function(e,t){this._ignoreEnableOnInputVerify=!0,this._dispatchEvent(e,t),this._ignoreEnableOnInputVerify=!1}},{key:"_dispatchEvent",value:function(e,t){var n=null;Iu(t)&&zae.includes(t)&&(n=this._hotkeyRegister.getHotkeyItem(t)),t||(n=this._getTargetHotkeyByEvent(e))&&e.preventDefault(),n&&this._isValidEventInThisHotKey(e,n)&&this._runHotkeyCallBack(e,n)}},{key:"registerItem",value:function(e){this._hotkeyRegister.registerItem(e)}},{key:"getRegisterHotKeys",value:function(){return this._hotkeyRegister.getHotkeyItems()}},{key:"_hotkeyListenerBindEvents",value:function(){var e=this;this._toDestroyStore.push(Sre(this._$container,"keydown",(function(t){e._dispatchEvent(t)}))),zae.forEach((function(t){e._toDestroyStore.push(Sre(document,t,(function(n){e._dispatchEvent(n,t)})))}))}},{key:"_getPotentialHotkeyIdsByEvent",value:function(e){var t=$re.keyEventToHotKey(e);return this._hotkeyRegister.getRegisterHotkeyIdsByPressedKey(t)}},{key:"_getEnableHotkey",value:function(e,t){if(t){var n,r=Tae(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this._hotkeyRegister.getHotkeyItem(o);if(this._isValidEventInThisHotKey(e,i))return i}}catch(e){r.e(e)}finally{r.f()}}}},{key:"_isValidEventInThisHotKey",value:function(e,t){var n,r,o,i,a,u;return!(!e||!t)&&(!(!this._ignoreEnableOnInputVerify&&(r=e,o=r.target,i=o&&o.tagName,a=Boolean(i&&Dre.some((function(e){return e.toLocaleLowerCase()===i.toLocaleLowerCase()}))),u=!!(null==o?void 0:o.isContentEditable),a||u)&&!t.enableOnInput)&&(!!this._activeTableService.isActive&&(!!(null==(n=t.isEnable)?void 0:n.call(t))||(jre(e),e.preventDefault(),!1))))}},{key:"_runHotkeyCallBack",value:function(e,t){t&&(t.preventDefault&&e.preventDefault(),t.onHotKey(e))}},{key:"destroy",value:function(){this._toDestroyStore.destroy(),this._hotkeyRegister.unRegister()}}])}();Lae([Ks(eoe)],Uae.prototype,"_hotkeyRegister",2),Lae([Ks(loe)],Uae.prototype,"_activeTableService",2),Uae=Lae([Gs({token:Nre})],Uae);var Hae=dd().contribution(Bre).register(Uae).register(eoe);function qae(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}function Wae(e){var t=Object(a.useRef)(qae);Object(a.useLayoutEffect)((function(){t.current=e}),[e]);var n=Object(a.useRef)(null);return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function $ae(e,t,n){var r=Object(a.useRef)(null),o=Wae(t);return Object(a.useLayoutEffect)((function(){var t=function(t){if(null!==r.current&&document.activeElement!==r.current&&!r.current.contains(document.activeElement))return jre(t),void t.preventDefault();Wre(e).forEach((function(e){$re.isKeyboardEventMatchingHotkey(t,e)&&o(t)}))};return(r.current||document).addEventListener("keydown",t),function(){(r.current||document).removeEventListener("keydown",t)}}),[e,o]),r}function Gae(e,t,n){var r=this,o=Object(a.useRef)(null),i=Object(a.useRef)(0),u=Object(a.useRef)(),l=Object(a.useRef)([]),c=Object(a.useRef)(),s=Object(a.useRef)(),d=Object(a.useRef)(e),f=Object(a.useRef)(!0);Object(a.useEffect)((function(){d.current=e}),[e]);var p=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=t||0;var v=!!(n=n||{}).leading,h=!("trailing"in n)||!!n.trailing,g="maxWait"in n,m=g?Math.max(n.maxWait||0,t):null;Object(a.useEffect)((function(){return f.current=!0,function(){f.current=!1}}),[]);var y=Object(a.useMemo)((function(){var e=function(e){var t=l.current,n=c.current;return l.current=c.current=[],i.current=e,s.current=d.current.apply(n,t)},n=function(e,t){p&&u.current&&cancelAnimationFrame(u.current),u.current=p?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!f.current)return!1;var n=e-(o.current||0),r=e-i.current;return!o.current||n>=(t||0)||n<0||g&&r>=(m||0)},y=function(t){return u.current=null,h&&l.current?e(t):(l.current=c.current=null,s.current)},b=function(){var e=Date.now();if(a(e))return y(e);if(f.current){var r=e-(o.current||0),u=e-i.current,l=(t||0)-r,c=g?Math.min(l,(m||0)-u):l;n(b,c)}},w=function(){for(var d=Date.now(),p=a(d),h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];if(l.current=m,c.current=r,o.current=d,p){if(!u.current&&f.current)return i.current=o.current,n(b,t||0),v?e(o.current):s.current;if(g)return n(b,t||0),e(o.current)}return u.current||n(b,t||0),s.current};return w.cancel=function(){u.current&&(p?cancelAnimationFrame(u.current):clearTimeout(u.current)),i.current=0,l.current=o.current=c.current=u.current=null},w.isPending=function(){return!!u.current},w.flush=function(){return u.current?y(Date.now()):s.current},w}),[v,g,t,m,h,p]);return Object(a.useEffect)((function(){return function(){y.flush()}}),[y]),y}function Kae(e){var t=WI(Object(a.useState)({bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}),2),n=t[0],r=t[1],o=Object(a.useRef)(),i=Object(a.useRef)(),u=Object(a.useCallback)((function(e){return e.width!==(null==n?void 0:n.width)||e.height!==(null==n?void 0:n.height)||e.left!==(null==n?void 0:n.left)||e.right!==(null==n?void 0:n.right)||e.top!==(null==n?void 0:n.top)||e.bottom!==(null==n?void 0:n.bottom)||e.x!==(null==n?void 0:n.x)||e.y!==(null==n?void 0:n.y)}),[n]);Gae((function(e){r(e)}),300);var l=Object(a.useCallback)((function(e){var t,n;null==(t=i.current)||t.disconnect(),null!=o.current&&cancelAnimationFrame(o.current),e&&(null==(n=i.current)||n.unobserve(e))}),[i.current]),c=Object(a.useCallback)((function(e){r(e)}),[]);return[n,function(e){null!==e&&(i.current=new ResizeObserver((function(t){l(e),o.current=requestAnimationFrame((function(){var e=t[0].contentRect.toJSON();u(e)&&r(e)}))})),i.current.observe(e))},l,c]}function Yae(e){var t=e.value,n=e.defaultValue,r=e.onChange,o=Array.isArray(t)?t.map((function(e){return"string"==typeof e?e:e.value?e.value:e.name?e.name:e})).join(","):t,i=Tre(),u=Object(a.useRef)(void 0!==t?t:n),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="function"==typeof e?e(u.current):e;(t||n!==u.current)&&(u.current=n,i(),null==r||r(n))};return Object(a.useEffect)((function(){void 0===t||Mu(t,u.current)||l(t)}),[o]),[u.current,l]}var Jae=function(e){var t=Object(a.useRef)(e);t.current=e,Object(a.useEffect)((function(){return function(){return t.current()}}),[])},Xae=function(){var e,t=yre(AP),n=WI(Object(a.useState)(null==(e=t.getCurrentTheme)?void 0:e.call(t)),2),r=n[0],o=n[1];return Zae((function(){t.addThemeChangeListener((function(){var e;o(null==(e=t.getCurrentTheme)?void 0:e.call(t))}))}),[]),{themeHelper:t,currentTheme:r}};function Zae(e,t){var n=yre(rF);Object(a.useEffect)((function(){var t;try{t=e()}catch(e){n.error(e)}if(t)return t}),t)}var Qae=Object.freeze({Translate:{toString:function(e){if(e){var t=e.x,n=e.y;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}}},Scale:{toString:function(e){if(e)return"scaleX("+e.scaleX+") scaleY("+e.scaleY+")"}},Transform:{toString:function(e){if(e)return[Qae.Translate.toString(e),Qae.Scale.toString(e)].join(" ")}},Transition:{toString:function(e){return e.property+" "+e.duration+"ms "+e.easing}}}),eue={CommentBubble:P.default,Edit:M.default,Delete:T.default,ReviewArrowRight:N.default,MoreHorizontal:B.default,ArrowDown:V.default,ArrowUp:L.default,ArrowRight:z.default,ArrowLeft:U.default,Addlink:H.default,Add:q.default,Check:W.default,Question:$.default,Close:G.default,Drag:K.default,Preview:Y.default,Download:J.default,EditorPaste:X.default,FieldText:Z.default,FieldSelect:Q.default,FieldMultiSelect:ee.default,FieldEmail:te.default,FieldInput:ne.default,FieldFile:re.default,FieldImage:oe.default,FieldLink:ie.default,FieldCreator:ae.default,FieldModifier:ue.default,FieldNumber:le.default,FieldMention:ce.default,FieldPhone:se.default,FieldCheckbox:de.default,FieldDate:fe.default,FieldCreatedAt:pe.default,FieldUpdatedAt:ve.default,FieldRate:he.default,FieldProgress:ge.default,RowExpand:me.default,RowCollpse:ye.default,Search:be.default,UpArrow:we.default,DownArrow:_e.default,RightArrow:ke.default,LeftArrow:Ce.default,IconHide:Ee.default,RowHeightLow:Oe.default,RowHeightMiddle:Se.default,RowHeightHigh:xe.default,GridView:je.default,CardView:De.default,KanbanView:Ae.default,Clear:Re.default,ViewerFilter:Fe.default,ViewerSort:Ie.default,ViewerGroup:Pe.default,Setting:Me.default,ReviewArrowDown:Te.default,Fullscreen:Ne.default,FullWidth:Be.default,NormalWidth:Ve.default,FormView:Le.default,Copy:ze.default,FileDefault:Ue.default,FileDefaultDark:He.default,FileAi:qe.default,FileAiDark:We.default,FileExcel:$e.default,FileExcelDark:Ge.default,FileAudio:Ke.default,FileAudioDark:Ye.default,FileAxure:Je.default,FileAxureDark:Xe.default,FileDoc:Ze.default,FileDocDark:Qe.default,FileGraffle:et.default,FileGraffleDark:tt.default,FileImage:nt.default,FileImageDark:rt.default,FileKeynote:ot.default,FileKeynoteDark:it.default,FileMindmap:at.default,FileMindmapDark:ut.default,FileMindnode:lt.default,FileMindnodeDark:ct.default,FileXmind:st.default,FileXmindDark:dt.default,FileTxt:ft.default,FileTxtDark:pt.default,FileNumbers:vt.default,FileNumbersDark:ht.default,FileFolder:gt.default,FileFolderDark:mt.default,FilePdf:yt.default,FilePdfDark:bt.default,FilePpt:wt.default,FilePptDark:_t.default,FilePsd:kt.default,FilePsdDark:Ct.default,FileRar:Et.default,FileRarDark:Ot.default,FileSheet:St.default,FileSheetDark:xt.default,FileSketch:jt.default,FileSketchDark:Dt.default,FileVideo:At.default,FileVideoDark:Rt.default,FileWord:Ft.default,FileWordDark:It.default,Loading:Pt.default,Upload:Mt.default,NavBuildarea:Tt.default,NavDay:Nt.default,NavNight:Bt.default,Change:Vt.default,DocTypeDefault:Lt.default,DocTypeDefaultDark:zt.default,DocTypeSheet:Ut.default,DocTypeSheetDark:Ht.default,DocTypeMarkdown:qt.default,DocTypeMarkdownDark:Wt.default,DocTypeTable:$t.default,DocTypeTableDark:Gt.default,DocTypeBoard:Kt.default,DocTypeBoardDark:Yt.default,DocTypeMind:Jt.default,DocTypeMindDark:Xt.default,DocTypeShow:Zt.default,DocTypeShowDark:Qt.default,DocTypeNote:en.default,DocTypeNoteDark:tn.default,DocTypeArtboard:nn.default,DocTypeArtboardDark:rn.default,Star:on.default,Calendar:an.default,Brush:un.default,EditorCellBgColor:ln.default},tue=["type","size","className"];function nue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nue(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oue=function(e){var t=e.type,n=e.size,r=e.className,o=wre(e,tue);if(!t)return null;var i=eue[t];if(!i)return null;n=function(e,t){return"FormView"===e&&t&&(t+=1),t}(t,n);var a=rue({type:t},o);return n&&(a.width=+n,a.height=+n),u.a.createElement("span",{className:"larkui-icon-wrap larkui-icon-wrap-".concat(t," ").concat(r||"")},u.a.createElement(i,rue({},a)))},iue=["ext"];function aue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var uue=function(e){e.ext;var t=wre(e,iue),n=yre(MP),r="dark"===(null==n?void 0:n.getCurrent()),o="File"+zi(e.ext),i=o;return r&&(i=o+"Dark"),u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aue(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:i},t))};function lue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lue(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sue=function(e){var t=e.menu,n=e.readonly,r=e.defaultSelectedKeys,o=void 0===r?[]:r,i=e.editingKey,a=e.visibleKey,l=e.settingVisible,c=e.onDoubleClick,d=e.onClick,v=e.onInputBlur,h=e.handleVisibleChange;return u.a.createElement(f.a.Item,{key:t.key,eventKey:t.key,icon:t.icon,onDoubleClick:function(e){e.key=t.key,c(e)},onClick:function(){d(t)},className:I()({"lakex-table-menu-item-selected":o.includes(t.key),"lakex-table-menu-item-multi-line":t.desc})},t.key===i?u.a.createElement(s.a,{className:"lakex-table-menu-configs-input",defaultValue:t.title,autoFocus:!0,onKeyDown:function(e){var n;e.stopPropagation();var r=e.keyCode;27!==r?13===r&&(null==(n=t.onTitleChange)||n.call(t,e,t)):v&&v()},onClick:function(e){return e.stopPropagation()},onBlur:function(e){var n;return null==(n=t.onTitleChange)?void 0:n.call(t,e,t)}}):u.a.createElement("div",null,t.title,t.desc&&u.a.createElement("div",{className:"lakex-table-menu-configs-desc"},t.desc)),t.settings&&!n&&u.a.createElement(p.a,{overlayClassName:"lakex-table-menu-container lakex-table-menu-configs-settings",content:u.a.createElement(f.a,{onClick:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.onSettingClick&&t.onSettingClick.apply(t,[t].concat(n)),h(!1,t)}},t.settings.map((function(e,t){return u.a.createElement(sue,{key:t,readonly:n,menu:e,editingKey:i,visibleKey:a,settingVisible:l,onDoubleClick:c,onClick:d,onInputBlur:v,handleVisibleChange:h})}))),trigger:"click",placement:"rightTop",visible:a===t.key&&l,onClick:function(e){return e.stopPropagation()},onVisibleChange:function(e){return h(e,t)}},u.a.createElement(oue,{type:"MoreHorizontal",size:14})),t.showActiveIcon&&u.a.createElement(oue,{type:"Check",size:14}))},due=function(e){var t=e.menu,n=e.index,r=e.readonly,o=e.defaultSelectedKeys,i=void 0===o?[]:o,a=e.editingKey,l=e.visibleKey,c=e.settingVisible,s=e.onDoubleClick,d=e.onClick,p=e.onInputBlur,v=e.handleVisibleChange,h=t.key?t.key+n:n,g=t.children;if(t.groupBy){var m=t.children.reduce((function(e,n){var r=n[t.groupBy];return e[r]||(e[r]=[]),e[r].push(n),e}),{});Object.values(m).length>1&&(g=m)}return u.a.createElement(f.a.SubMenu,{key:h,eventKey:h,icon:t.icon,title:u.a.createElement("span",{className:"lakex-table-menu-item-title"},u.a.createElement("span",null,t.title),u.a.createElement(z.default,{width:16,height:16})),popupClassName:"lakex-table-menu-container lakex-table-menu-configs-submenu ".concat(t.className)},Array.isArray(g)?g.map((function(e,t){return u.a.createElement(sue,{key:t,readonly:r,menu:e,defaultSelectedKeys:i,editingKey:a,visibleKey:l,settingVisible:c,onDoubleClick:s,onClick:d,onInputBlur:p,handleVisibleChange:v})})):Object.keys(g).map((function(e){return u.a.createElement(f.a.ItemGroup,{key:e,title:e},g[e].map((function(e,t){return u.a.createElement(sue,{key:t,readonly:r,menu:e,defaultSelectedKeys:i,editingKey:a,visibleKey:l,settingVisible:c,onDoubleClick:s,onClick:d,onInputBlur:p,handleVisibleChange:v})})))})))},fue=function(e){var t=e.menu,n=e.readonly,r=e.defaultSelectedKeys,o=void 0===r?[]:r,i=e.editingKey,a=e.visibleKey,l=e.settingVisible,c=e.onDoubleClick,s=e.onClick,d=e.onInputBlur,f=e.handleVisibleChange,p=aW({id:t.key}),v=p.attributes,h=p.listeners,g=p.setNodeRef,m=p.transform,y=p.transition,b=p.isDragging,w={transform:Qae.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return u.a.createElement("div",cue(cue({key:t.key,ref:g,style:cue({},w)},h),v),u.a.createElement(sue,{key:t.key,readonly:n,menu:t,defaultSelectedKeys:o,editingKey:i,visibleKey:a,settingVisible:l,onDoubleClick:c,onClick:s,onInputBlur:d,handleVisibleChange:f}))},pue=function(e){var t=e.readonly,n=e.configs,r=e.defaultSelectedKeys,o=e.draggable,i=void 0!==o&&o,l=e.editingKey,c=e.visibleKey,s=e.settingVisible,d=e.onClick,f=e.onDoubleClick,p=e.onDragEnd,v=e.onInputBlur,h=e.handleVisibleChange,g=VU(BU(TH,{activationConstraint:{distance:8}})),m=n.map((function(e,n){var o=e.key?e.key+n:n;return e.children?u.a.createElement(due,{key:o,index:n,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:l,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:v,handleVisibleChange:h}):i?u.a.createElement(fue,{key:o,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:l,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:v,handleVisibleChange:h}):u.a.createElement(sue,{key:o,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:l,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:v,handleVisibleChange:h})})),y=Object(a.useMemo)((function(){return n.map((function(e){return cue(cue({},e),{},{id:e.key})}))}),[n]);return i?u.a.createElement(kq,{sensors:g,modifiers:[pW,dW],collisionDetection:GU,onDragEnd:p},u.a.createElement(Qq,{items:y,strategy:Jq},m)):m},vue=function(e){var t=e.readonly,n=void 0!==t&&t,r=e.draggable,o=e.className,i=e.defaultSelectedKeys,l=e.menuKey,c=e.onDragEnd,s=e.onInputBlur,d=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(!1),r=WI(Object(a.useState)(e.configs),2),o=r[0],i=r[1],u=WI(Object(a.useState)(!1),2),l=u[0],c=u[1],s=WI(Object(a.useState)(""),2),d=s[0],f=s[1],p=WI(Object(a.useState)(e.editingKey||""),2),v=p[0],h=p[1];return Zae((function(){h(e.editingKey)}),[e.editingKey]),Zae((function(){i(e.configs)}),[e.configs]),{state:{configs:o,settingVisible:l,visibleKey:d,editingKey:v},timer:t,prevent:n,delay:200,handleVisibleChange:function(e,t){c(e),f(e?t.key:"")},onClick:function(r){e.onDoubleClick?t.current=setTimeout((function(){n.current||null==e||e.onClick(r)}),200):null==e||e.onClick(r)},onDoubleClick:function(r){clearTimeout(t.current),n.current=!0,null==e||e.onDoubleClick(r),setTimeout((function(){n.current=!1}),200)}}}(e),p=d.state,v=d.onClick,h=d.onDoubleClick,g=d.handleVisibleChange,m=p.configs,y=p.editingKey,b=p.visibleKey,w=p.settingVisible;return u.a.createElement(f.a,{className:"lakex-table-menu-configs ".concat(o),mode:"vertical",defaultSelectedKeys:i,key:l},u.a.createElement(pue,{readonly:n,configs:m,draggable:r,defaultSelectedKeys:i,editingKey:y,visibleKey:b,settingVisible:w,onClick:v,onDoubleClick:h,onDragEnd:c,onInputBlur:s,handleVisibleChange:g}))};function hue(e,t,n){return t=dk(t),sk(e,gue()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function gue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gue=function(){return!!e})()}var mue,yue=function(e){function t(e){var n;return _w(this,t),(n=hue(this,t,[e])).state={hasError:!1},n}return vk(t,e),Ew(t,[{key:"componentDidCatch",value:function(e,t){var n,r;null==(r=(n=this.props).onError)||r.call(n,e,t)}},{key:"render",value:function(){return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(u.a.Component),bue={},wue={};var _ue,kue={exports:{}};function Cue(){return _ue||(_ue=1,function(e,t){e.exports=function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,n=this.$W,r=(n<t?n+7:n)-t;return this.$utils().u(e)?r:this.subtract(r,"day").add(e,"day")}}}(kue)),kue.exports}var Eue,Oue={exports:{}};function Sue(){return Eue||(Eue=1,function(e,t){e.exports=function(e,t,n){var r=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},i=function(e,t,n,r,i){var a=e.name?e:e.$locale(),u=o(a[t]),l=o(a[n]),c=u||l.map((function(e){return e.slice(0,r)}));if(!i)return c;var s=a.weekStart;return c.map((function(e,t){return c[(t+(s||0))%7]}))},a=function(){return n.Ls[n.locale()]},u=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):i(e,"months")},monthsShort:function(t){return t?t.format("MMM"):i(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):i(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):i(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):i(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return u(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return l.bind(this)()},n.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return u(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return i(a(),"months")},n.monthsShort=function(){return i(a(),"monthsShort","months",3)},n.weekdays=function(e){return i(a(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return i(a(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return i(a(),"weekdaysMin","weekdays",2,e)}}}(Oue)),Oue.exports}var xue,jue={exports:{}};var Due,Aue={exports:{}};var Rue,Fue={exports:{}};var Iue,Pue={exports:{}};var Mue=tP;Object.defineProperty(bue,"__esModule",{value:!0});var Tue=bue.default=void 0,Nue=Mue(i.a),Bue=function(){if(mue)return wue;mue=1,Object.defineProperty(wue,"__esModule",{value:!0}),wue.call=i,wue.default=void 0,wue.note=r,wue.noteOnce=u,wue.preMessage=void 0,wue.resetWarned=o,wue.warning=n,wue.warningOnce=a;var e={},t=wue.preMessage=function(e){};function n(e,t){}function r(e,t){}function o(){e={}}function i(t,n,r){n||e[r]||(t(!1,r),e[r]=!0)}function a(e,t){i(n,e,t)}function u(e,t){i(r,e,t)}return a.preMessage=t,a.resetWarned=o,a.noteOnce=u,wue.default=a,wue}(),Vue=Mue(Cue()),Lue=Mue(Sue()),zue=Mue((xue||(xue=1,function(e,t){e.exports=function(){var e="week",t="year";return function(n,r,o){var i=r.prototype;i.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var i=o(this).startOf(t).add(1,t).date(r),a=o(this).endOf(e);if(i.isBefore(a))return 1}var u=o(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),l=this.diff(u,e,!0);return l<0?o(this).startOf("week").week():Math.ceil(l)},i.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()}(jue)),jue.exports)),Uue=Mue((Due||(Due=1,function(e,t){e.exports=function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),n=this.year();return 1===t&&11===e?n+1:0===e&&t>=52?n-1:n}}}(Aue)),Aue.exports)),Hue=Mue((Rue||(Rue=1,function(e,t){e.exports=function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var o=this.$utils(),i=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(i)}}}(Fue)),Fue.exports)),que=Mue((Iue||(Iue=1,function(e,t){e.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,i={},a=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},s=function(e,t){var n,r=i.meridiem;if(r){for(var o=1;o<=24;o+=1)if(e.indexOf(r(o,0,t))>-1){n=o>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=s(e,!1)}],a:[o,function(e){this.afternoon=s(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[n,u("day")],Do:[o,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,u("month")],MM:[n,u("month")],MMM:[o,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[n,function(e){this.year=a(e)}],YYYY:[/\d{4}/,u("year")],Z:l,ZZ:l};function f(n){var r,o;r=n,o=i&&i.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),u=a.length,l=0;l<u;l+=1){var c=a[l],s=d[c],f=s&&s[0],p=s&&s[1];a[l]=p?{regex:f,parser:p}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<u;n+=1){var o=a[n];if("string"==typeof o)r+=o.length;else{var i=o.regex,l=o.parser,c=e.slice(r),s=i.exec(c)[0];l.call(t,s),e=e.replace(s,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,o=r.parse;r.parse=function(e){var t=e.date,r=e.utc,a=e.args;this.$u=r;var u=a[1];if("string"==typeof u){var l=!0===a[2],c=!0===a[3],s=l||c,d=a[2];c&&(d=a[2]),i=this.$locale(),!l&&d&&(i=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=f(t)(e),o=r.year,i=r.month,a=r.day,u=r.hours,l=r.minutes,c=r.seconds,s=r.milliseconds,d=r.zone,p=new Date,v=a||(o||i?1:p.getDate()),h=o||p.getFullYear(),g=0;o&&!i||(g=i>0?i-1:p.getMonth());var m=u||0,y=l||0,b=c||0,w=s||0;return d?new Date(Date.UTC(h,g,v,m,y,b,w+60*d.offset*1e3)):n?new Date(Date.UTC(h,g,v,m,y,b,w)):new Date(h,g,v,m,y,b,w)}catch(e){return new Date("")}}(t,u,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),s&&t!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var p=u.length,v=1;v<=p;v+=1){a[1]=u[v-1];var h=n.apply(this,a);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}v===p&&(this.$d=new Date(""))}else o.call(this,e)}}}()}(Pue)),Pue.exports));Nue.default.extend(que.default),Nue.default.extend(Hue.default),Nue.default.extend(Vue.default),Nue.default.extend(Lue.default),Nue.default.extend(zue.default),Nue.default.extend(Uue.default),Nue.default.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var Wue={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},$ue=function(e){return Wue[e]||e.split("_")[0]},Gue=function(){(0,Bue.noteOnce)(!1,"Not match any format. Please help to fire a issue about this.")},Kue={getNow:function(){return(0,Nue.default)()},getFixedDate:function(e){return(0,Nue.default)(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,Nue.default)().locale($ue(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale($ue(e)).weekday(0)},getWeek:function(e,t){return t.locale($ue(e)).week()},getShortWeekDays:function(e){return(0,Nue.default)().locale($ue(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,Nue.default)().locale($ue(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale($ue(e)).format(n)},parse:function(e,t,n){for(var r=$ue(e),o=0;o<n.length;o+=1){var i=n[o],a=t;if(i.includes("wo")||i.includes("Wo")){for(var u=a.split("-")[0],l=a.split("-")[1],c=(0,Nue.default)(u,"YYYY").startOf("year").locale(r),s=0;s<=52;s+=1){var d=c.add(s,"week");if(d.format("Wo")===l)return d}return Gue(),null}var f=(0,Nue.default)(a,i).locale(r);if(f.isValid())return f}return t&&Gue(),null}}},Yue=Kue;function Jue(){return Jue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jue.apply(null,arguments)}function Xue(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}Tue=bue.default=Yue;var Zue=Object(a.createContext)({});function Que(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ele(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Que(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Que(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tle=function(){return!!e})()}function nle(e){var t=tle();return function(){var n,r=dk(e);if(t){var o=dk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sk(this,n)}}var rle,ole={exports:{}},ile={},ale=Symbol.for("react.element"),ule=Symbol.for("react.portal"),lle=Symbol.for("react.fragment"),cle=Symbol.for("react.strict_mode"),sle=Symbol.for("react.profiler"),dle=Symbol.for("react.provider"),fle=Symbol.for("react.context"),ple=Symbol.for("react.server_context"),vle=Symbol.for("react.forward_ref"),hle=Symbol.for("react.suspense"),gle=Symbol.for("react.suspense_list"),mle=Symbol.for("react.memo"),yle=Symbol.for("react.lazy"),ble=Symbol.for("react.offscreen");function wle(e){if("object"===mw(e)&&null!==e){var t=e.$$typeof;switch(t){case ale:switch(e=e.type){case lle:case sle:case cle:case hle:case gle:return e;default:switch(e=e&&e.$$typeof){case ple:case fle:case vle:case yle:case mle:case dle:return e;default:return t}}case ule:return t}}}rle=Symbol.for("react.module.reference"),ile.ContextConsumer=fle,ile.ContextProvider=dle,ile.Element=ale,ile.ForwardRef=vle,ile.Fragment=lle,ile.Lazy=yle,ile.Memo=mle,ile.Portal=ule,ile.Profiler=sle,ile.StrictMode=cle,ile.Suspense=hle,ile.SuspenseList=gle,ile.isAsyncMode=function(){return!1},ile.isConcurrentMode=function(){return!1},ile.isContextConsumer=function(e){return wle(e)===fle},ile.isContextProvider=function(e){return wle(e)===dle},ile.isElement=function(e){return"object"===mw(e)&&null!==e&&e.$$typeof===ale},ile.isForwardRef=function(e){return wle(e)===vle},ile.isFragment=function(e){return wle(e)===lle},ile.isLazy=function(e){return wle(e)===yle},ile.isMemo=function(e){return wle(e)===mle},ile.isPortal=function(e){return wle(e)===ule},ile.isProfiler=function(e){return wle(e)===sle},ile.isStrictMode=function(e){return wle(e)===cle},ile.isSuspense=function(e){return wle(e)===hle},ile.isSuspenseList=function(e){return wle(e)===gle},ile.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===lle||e===sle||e===cle||e===hle||e===gle||e===ble||"object"===mw(e)&&null!==e&&(e.$$typeof===yle||e.$$typeof===mle||e.$$typeof===dle||e.$$typeof===fle||e.$$typeof===vle||e.$$typeof===rle||void 0!==e.getModuleId)},ile.typeOf=wle,ole.exports=ile;var _le=ole.exports;function kle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return u.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(kle(e)):_le.isFragment(e)&&e.props?n=n.concat(kle(e.props.children,t)):n.push(e))})),n}var Cle={};function Ele(e,t){}function Ole(e,t){}function Sle(e,t,n){t||Cle[n]||(e(!1,n),Cle[n]=!0)}function xle(e,t){Sle(Ele,e,t)}xle.preMessage=function(e){},xle.resetWarned=function(){Cle={}},xle.noteOnce=function(e,t){Sle(Ole,e,t)};var jle="RC_FORM_INTERNAL_HOOKS",Dle=function(){xle(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Ale=a.createContext({getFieldValue:Dle,getFieldsValue:Dle,getFieldError:Dle,getFieldsError:Dle,isFieldsTouched:Dle,isFieldTouched:Dle,isFieldValidating:Dle,isFieldsValidating:Dle,resetFields:Dle,setFields:Dle,setFieldsValue:Dle,validateFields:Dle,submit:Dle,getInternalHooks:function(){return Dle(),{dispatch:Dle,initEntityValue:Dle,registerField:Dle,useSubscribe:Dle,setInitialValues:Dle,setCallbacks:Dle,getFields:Dle,setValidateMessages:Dle,setPreserve:Dle}}});function Rle(e){return null==e?[]:Array.isArray(e)?e:[e]}function Fle(){return Fle=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fle.apply(this,arguments)}function Ile(e){return(Ile=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ple(e,t){return(Ple=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mle(e,t,n){return(Mle=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ple(o,n.prototype),o}).apply(null,arguments)}function Tle(e){var t="function"==typeof Map?new Map:void 0;return Tle=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Mle(e,arguments,Ile(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ple(r,e)},Tle(e)}var Nle=/%[sdj%]/g,Ble=function(){};function Vle(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function Lle(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],i=t.length;return"function"==typeof o?o.apply(null,t.slice(1)):"string"==typeof o?String(o).replace(Nle,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}})):o}function zle(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function Ule(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var u=r;r+=1,u<o?t(e[u],i):n([])}}([])}var Hle=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ple(t,n),r}(Tle(Error));function qle(e,t,n,r){if(t.first){var o=new Promise((function(t,o){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);Ule(i,n,(function(e){return r(e),e.length?o(new Hle(e,Vle(e))):t()}))}));return o.catch((function(e){return e})),o}var i=t.firstFields||[];!0===i&&(i=Object.keys(e));var a=Object.keys(e),u=a.length,l=0,c=[],s=new Promise((function(t,o){var s=function(e){if(c.push.apply(c,e),++l===u)return r(c),c.length?o(new Hle(c,Vle(c))):t()};a.length||(r(c),t()),a.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?Ule(r,n,s):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,e),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,s)}))}));return s.catch((function(e){return e})),s}function Wle(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function $le(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===mw(r)&&"object"===mw(e[n])?e[n]=Fle({},e[n],r):e[n]=r}return e}function Gle(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!zle(t,i||e.type)||r.push(Lle(o.messages.required,e.fullField))}var Kle={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Yle={integer:function(e){return Yle.number(e)&&parseInt(e,10)===e},float:function(e){return Yle.number(e)&&!Yle.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===mw(e)&&!Yle.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(Kle.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(Kle.url)},hex:function(e){return"string"==typeof e&&!!e.match(Kle.hex)}};var Jle="enum";var Xle={required:Gle,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(Lle(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)Gle(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?Yle[i](t)||r.push(Lle(o.messages.types[i],e.fullField,e.type)):i&&mw(t)!==e.type&&r.push(Lle(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,u="number"==typeof e.max,l=t,c=null,s="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(s?c="number":d?c="string":f&&(c="array"),!c)return!1;f&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?l!==e.len&&r.push(Lle(o.messages[c].len,e.fullField,e.len)):a&&!u&&l<e.min?r.push(Lle(o.messages[c].min,e.fullField,e.min)):u&&!a&&l>e.max?r.push(Lle(o.messages[c].max,e.fullField,e.max)):a&&u&&(l<e.min||l>e.max)&&r.push(Lle(o.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[Jle]=Array.isArray(e[Jle])?e[Jle]:[],-1===e[Jle].indexOf(t)&&r.push(Lle(o.messages[Jle],e.fullField,e[Jle].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Lle(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(Lle(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function Zle(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t,i)&&!e.required)return n();Xle.required(e,t,r,a,o,i),zle(t,i)||Xle.type(e,t,r,a,o)}n(a)}var Qle={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t,"string")&&!e.required)return n();Xle.required(e,t,r,i,o,"string"),zle(t,"string")||(Xle.type(e,t,r,i,o),Xle.range(e,t,r,i,o),Xle.pattern(e,t,r,i,o),!0===e.whitespace&&Xle.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&Xle.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&(Xle.type(e,t,r,i,o),Xle.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&Xle.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),zle(t)||Xle.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&(Xle.type(e,t,r,i,o),Xle.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&(Xle.type(e,t,r,i,o),Xle.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();Xle.required(e,t,r,i,o,"array"),null!=t&&(Xle.type(e,t,r,i,o),Xle.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&Xle.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o),void 0!==t&&Xle.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t,"string")&&!e.required)return n();Xle.required(e,t,r,i,o),zle(t,"string")||Xle.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t,"date")&&!e.required)return n();var a;if(Xle.required(e,t,r,i,o),!zle(t,"date"))a=t instanceof Date?t:new Date(t),Xle.type(e,a,r,i,o),a&&Xle.range(e,a.getTime(),r,i,o)}n(i)},url:Zle,hex:Zle,email:Zle,required:function(e,t,n,r,o){var i=[],a=Array.isArray(t)?"array":mw(t);Xle.required(e,t,r,i,o,a),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zle(t)&&!e.required)return n();Xle.required(e,t,r,i,o)}n(i)}};function ece(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var tce=ece();function nce(e){this.rules=null,this._messages=tce,this.define(e)}function rce(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function oce(e,t,n,r){if(!t.length)return n;var o,i=zk(t),a=i[0],u=i.slice(1);return o=e||"number"!=typeof a?Array.isArray(e)?gw(e):ele({},e):[],r&&void 0===n&&1===u.length?delete o[a][u[0]]:o[a]=oce(o[a],u,n,r),o}function ice(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!rce(e,t.slice(0,-1))?e:oce(e,t,n,r)}function ace(e){return Rle(e)}function uce(e,t){return rce(e,t)}function lce(e,t,n){return ice(e,t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function cce(e,t){var n={};return t.forEach((function(t){var r=uce(e,t);n=lce(n,t,r)})),n}function sce(e,t){return e&&e.some((function(e){return vce(e,t)}))}function dce(e){return"object"===mw(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function fce(e,t){var n=Array.isArray(e)?gw(e):ele({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],o=t[e],i=dce(r)&&dce(o);n[e]=i?fce(r,o||{}):o})),n):n}function pce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return fce(e,t)}),e)}function vce(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function hce(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function gce(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],i=t-n;return i>0?[].concat(gw(e.slice(0,n)),[o],gw(e.slice(n,t)),gw(e.slice(t+1,r))):i<0?[].concat(gw(e.slice(0,t)),gw(e.slice(t+1,n+1)),[o],gw(e.slice(n+1,r))):e}nce.prototype={messages:function(e){return e&&(this._messages=$le(ece(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==mw(e)||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var o,i,a=e,u=t,l=n;if("function"==typeof u&&(l=u,u={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();if(u.messages){var c=this.messages();c===tce&&(c=ece()),$le(c,u.messages),u.messages=c}else u.messages=this.messages();var s={};(u.keys||Object.keys(this.rules)).forEach((function(t){o=r.rules[t],i=a[t],o.forEach((function(n){var o=n;"function"==typeof o.transform&&(a===e&&(a=Fle({},a)),i=a[t]=o.transform(i)),(o="function"==typeof o?{validator:o}:Fle({},o)).validator=r.getValidationMethod(o),o.field=t,o.fullField=o.fullField||t,o.type=r.getType(o),o.validator&&(s[t]=s[t]||[],s[t].push({rule:o,value:i,source:a,field:t}))}))}));var d={};return qle(s,u,(function(e,t){var n,r=e.rule,o=!("object"!==r.type&&"array"!==r.type||"object"!==mw(r.fields)&&"object"!==mw(r.defaultField));function i(e,t){return Fle({},t,{fullField:r.fullField+"."+e})}function a(n){void 0===n&&(n=[]);var a=n;if(Array.isArray(a)||(a=[a]),!u.suppressWarning&&a.length&&nce.warning("async-validator:",a),a.length&&void 0!==r.message&&(a=[].concat(r.message)),a=a.map(Wle(r)),u.first&&a.length)return d[r.field]=1,t(a);if(o){if(r.required&&!e.value)return void 0!==r.message?a=[].concat(r.message).map(Wle(r)):u.error&&(a=[u.error(r,Lle(u.messages.required,r.field))]),t(a);var l={};if(r.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(l[c]=r.defaultField);for(var s in l=Fle({},l,e.rule.fields))if(l.hasOwnProperty(s)){var f=Array.isArray(l[s])?l[s]:[l[s]];l[s]=f.map(i.bind(null,s))}var p=new nce(l);p.messages(u.messages),e.rule.options&&(e.rule.options.messages=u.messages,e.rule.options.error=u.error),p.validate(e.value,e.rule.options||u,(function(e){var n=[];a&&a.length&&n.push.apply(n,a),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(a)}o=o&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,a,e.source,u):r.validator&&(!0===(n=r.validator(r,e.value,a,e.source,u))?a():!1===n?a(r.message||r.field+" fails"):n instanceof Array?a(n):n instanceof Error&&a(n.message)),n&&n.then&&n.then((function(){return a()}),(function(e){return a(e)}))}),(function(e){!function(e){var t,n=[],r={};function o(e){var t;Array.isArray(e)?n=(t=n).concat.apply(t,e):n.push(e)}for(t=0;t<e.length;t++)o(e[t]);n.length?r=Vle(n):(n=null,r=null),l(n,r)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Qle.hasOwnProperty(e.type))throw new Error(Lle("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Qle.required:Qle[this.getType(e)]||!1}},nce.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Qle[e]=t},nce.warning=Ble,nce.messages=tce,nce.validators=Qle;var mce="'${name}' is not a valid ${type}",yce={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:mce,method:mce,array:mce,object:mce,number:mce,date:mce,boolean:mce,integer:mce,float:mce,regexp:mce,email:mce,url:mce,hex:mce},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},bce=nce;function wce(e,t,n,r){var o=ele(ele({},n),{},{name:t,enum:(n.enum||[]).join(", ")});return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(i){var a,u,l=t[i];"string"==typeof l?n[i]=(a=l,u=r,function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(a,ele(ele({},o),u))}):l&&"object"===mw(l)?(n[i]={},e(l,n[i])):n[i]=l})),n}(pce({},yce,e))}function _ce(e,t,n,r,o){return kce.apply(this,arguments)}function kce(){return kce=UC(jk.mark((function e(t,n,r,o,i){var u,l,c,s,d,f;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=ele({},r),l=null,u&&"array"===u.type&&u.defaultField&&(l=u.defaultField,delete u.defaultField),c=new bce(bw({},t,[u])),s=wce(o.validateMessages,t,u,i),c.messages(s),d=[],e.prev=7,e.next=10,Promise.resolve(c.validate(bw({},t,n),ele({},o)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?d=e.t0.errors.map((function(e,t){var n=e.message;return a.isValidElement(n)?a.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),d=[s.default()]);case 15:if(d.length||!l){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return _ce("".concat(t,".").concat(n),e,l,o,i)})));case 18:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(gw(e),gw(t))}),[]));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[7,12]])}))),kce.apply(this,arguments)}function Cce(e,t,n,r,o,i){var a,u=e.join("."),l=n.map((function(e){var t=e.validator;return t?ele(ele({},e),{},{validator:function(e,n,r){var o=!1,i=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){xle(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));xle(o=i&&"function"==typeof i.then&&"function"==typeof i.catch,"`callback` is deprecated. Please return a promise instead."),o&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===o)a=new Promise(function(){var e=UC(jk.mark((function e(n,o){var a,c;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<l.length)){e.next=11;break}return e.next=4,_ce(u,t,l[a],r,i);case 4:if(!(c=e.sent).length){e.next=8;break}return o(c),e.abrupt("return");case 8:a+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=l.map((function(e){return _ce(u,t,e,r,i)}));a=(o?function(e){return Oce.apply(this,arguments)}(c):function(e){return Ece.apply(this,arguments)}(c)).then((function(e){return e.length?Promise.reject(e):[]}))}return a.catch((function(e){return e})),a}function Ece(){return(Ece=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,gw(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oce(){return Oce=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),Oce.apply(this,arguments)}function Sce(e,t,n,r,o,i){return"function"==typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==o}var xce=function(e){vk(n,e);var t=nle(n);function n(e){var r;(_w(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,o=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,ace(o)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(gw(void 0===n?[]:n),gw(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,o=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(o):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.onStoreChange=function(e,t,n){var o=r.props,i=o.shouldUpdate,a=o.dependencies,u=void 0===a?[]:a,l=o.onReset,c=n.store,s=r.getNamePath(),d=r.getValue(e),f=r.getValue(c),p=t&&sce(t,s);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=[]),n.type){case"reset":if(!t||p)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],l&&l(),void r.refresh();break;case"setField":if(p){var v=n.data;return"touched"in v&&(r.touched=v.touched),"validating"in v&&!("originRCField"in v)&&(r.validatePromise=v.validating?Promise.resolve([]):null),"errors"in v&&(r.errors=v.errors||[]),r.dirty=!0,void r.reRender()}if(i&&!s.length&&Sce(i,e,c,d,f,n))return void r.reRender();break;case"dependenciesUpdate":if(u.map(ace).some((function(e){return sce(n.relatedFields,e)})))return void r.reRender();break;default:if(p||(!u.length||s.length||i)&&Sce(i,e,c,d,f,n))return void r.reRender()}!0===i&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),o=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,a=i.validateFirst,u=void 0!==a&&a,l=i.messageVariables,c=(e||{}).triggerName,s=r.getRules();c&&(s=s.filter((function(e){var t=e.validateTrigger;return!t||Rle(t).includes(c)})));var d=Cce(t,n,s,e,u,l);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.validatePromise===o&&(r.validatePromise=null,r.errors=e,r.reRender())})),d}));return r.validatePromise=o,r.dirty=!0,r.errors=[],r.reRender(),o},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return r.dirty},r.getErrors=function(){return r.errors},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return ele(ele({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=kle(e);return 1===n.length&&a.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return uce(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,o=t.validateTrigger,i=t.getValueFromEvent,a=t.normalize,u=t.valuePropName,l=t.getValueProps,c=t.fieldContext,s=void 0!==o?o:c.validateTrigger,d=r.getNamePath(),f=c.getInternalHooks,p=c.getFieldsValue,v=f(jle).dispatch,h=r.getValue(),g=l||function(e){return bw({},u,e)},m=e[n],y=ele(ele({},e),g(h));return y[n]=function(){var e;r.touched=!0,r.dirty=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=i?i.apply(void 0,n):hce.apply(void 0,[u].concat(n)),a&&(e=a(e,h,p(!0))),v({type:"updateValue",namePath:d,value:e}),m&&m.apply(void 0,n)},Rle(s||[]).forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&v({type:"validateField",namePath:d,triggerName:e})}})),y},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(jle).initEntityValue)(ck(r));return r}return Ew(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(jle).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child;return r.isFunction?e=o:a.isValidElement(o)?e=a.cloneElement(o,this.getControlled(o.props)):(xle(!o,"`children` of Field is not validate ReactElement."),e=o),a.createElement(a.Fragment,{key:t},e)}}]),n}(a.Component);function jce(e){var t=e.name,n=wre(e,["name"]),r=a.useContext(Ale),o=void 0!==t?ace(t):void 0,i="keep";return n.isListField||(i="_".concat((o||[]).join("_"))),a.createElement(xce,Jue({key:i,name:o},n,{fieldContext:r}))}xce.contextType=Ale,xce.defaultProps={trigger:"onChange",valuePropName:"value"};var Dce="__@field_split__";function Ace(e){return e.map((function(e){return"".concat(mw(e),":").concat(e)})).join(Dce)}var Rce=function(){function e(){_w(this,e),this.kvs=new Map}return Ew(e,[{key:"set",value:function(e,t){this.kvs.set(Ace(e),t)}},{key:"get",value:function(e){return this.kvs.get(Ace(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Ace(e))}},{key:"map",value:function(e){return gw(this.kvs.entries()).map((function(t){var n=WI(t,2),r=n[0],o=n[1],i=r.split(Dce);return e({key:i.map((function(e){var t=WI(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),Fce=function e(t){var n=this;_w(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===jle?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(xle(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=pce({},e,n.store))},this.getInitialValue=function(e){return uce(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Rce;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=ace(e);return t.get(n)||{INVALIDATE_NAME_PATH:ace(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&o.push(i)}else o.push(i)})),cce(n.store,o.map(ace))},this.getFieldValue=function(e){n.warningUnhooked();var t=ace(e);return uce(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:ace(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=ace(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i=t[0],a=t[1],u=!1;0===t.length?o=null:1===t.length?Array.isArray(i)?(o=i.map(ace),u=!1):(o=null,u=i):(o=i.map(ace),u=a);var l=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!o)return u?l.every(c):l.some(c);var s=new Rce;o.forEach((function(e){s.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&s.update(n,(function(t){return[].concat(gw(t),[e])}))}))}));var d=function(e){return e.some(c)},f=s.map((function(e){return e.value}));return u?f.every(d):f.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(ace);return t.some((function(e){var t=e.getNamePath();return sce(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Rce,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o;e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,gw(gw(r).map((function(e){return e.entity}))))}))):o=r,o.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))xle(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var i=t.get(o);if(i&&i.size>1)xle(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var a=n.getFieldValue(o);e.skipExist&&void 0!==a||(n.store=lce(n.store,o,gw(i)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=pce({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(ace);r.forEach((function(e){var t=n.getInitialValue(e);n.store=lce(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name;e.errors;var o=wre(e,["name","errors"]),i=ace(r);"value"in o&&(n.store=lce(n.store,i,o.value)),n.notifyObservers(t,[i],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=ele(ele({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===uce(n.store,r)&&(n.store=lce(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!1===(void 0!==r?r:n.preserve)&&(!t||o.length>1)){var i=e.getNamePath(),a=t?void 0:uce(n.initialValues,i);i.length&&n.getFieldValue(i)!==a&&n.fieldEntities.every((function(e){return!vce(e.getNamePath(),i)}))&&(n.store=lce(n.store,i,a,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,i=e.triggerName;n.validateFields([o],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=ele(ele({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=ace(e),o=n.store;n.store=lce(n.store,r,t),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"});var i=n.getDependencyChildrenFields(r);i.length&&n.validateFields(i),n.notifyObservers(o,i,{type:"dependenciesUpdate",relatedFields:[r].concat(gw(i))});var a=n.callbacks.onValuesChange;a&&a(cce(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(gw(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=pce(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new Rce;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=ace(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var i=new Rce;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),o.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return sce(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(ace):[],i=[];n.getFieldEntities(!0).forEach((function(a){if(r||o.push(a.getNamePath()),(null==t?void 0:t.recursive)&&r){var u=a.getNamePath();u.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(u)}if(a.props.rules&&a.props.rules.length){var l=a.getNamePath();if(!r||sce(o,l)){var c=a.validateRules(ele({validateMessages:ele(ele({},yce),n.validateMessages)},t));i.push(c.then((function(){return{name:l,errors:[]}})).catch((function(e){return Promise.reject({name:l,errors:e})})))}}}));var a=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,i){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&i(r),o(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return u.catch((function(e){return e})),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};function Ice(e){var t=a.useRef(),n=WI(a.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new Fce((function(){n({})}));t.current=r.getForm()}return[t.current]}var Pce=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Mce=function(e,t){var n=e.name,r=e.initialValues,o=e.fields,i=e.form,u=e.preserve,l=e.children,c=e.component,s=void 0===c?"form":c,d=e.validateMessages,f=e.validateTrigger,p=void 0===f?"onChange":f,v=e.onValuesChange,h=e.onFieldsChange,g=e.onFinish,m=e.onFinishFailed,y=wre(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),b=a.useContext(Pce),w=WI(Ice(i),1)[0],_=w.getInternalHooks(jle),k=_.useSubscribe,C=_.setInitialValues,E=_.setCallbacks,O=_.setValidateMessages,S=_.setPreserve;a.useImperativeHandle(t,(function(){return w})),a.useEffect((function(){return b.registerForm(n,w),function(){b.unregisterForm(n)}}),[b,w,n]),O(ele(ele({},b.validateMessages),d)),E({onValuesChange:v,onFieldsChange:function(e){if(b.triggerFormChange(n,e),h){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];h.apply(void 0,[e].concat(r))}},onFinish:function(e){b.triggerFormFinish(n,e),g&&g(e)},onFinishFailed:m}),S(u);var x=a.useRef(null);C(r,!x.current),x.current||(x.current=!0);var j=l,D="function"==typeof l;D&&(j=l(w.getFieldsValue(!0),w));k(!D);var A=a.useRef();a.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==mw(e)||"object"!==mw(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat(gw(n),gw(r)));return gw(o).every((function(n){var r=e[n],o=t[n];return"function"==typeof r&&"function"==typeof o||r===o}))})(A.current||[],o||[])||w.setFields(o||[]),A.current=o}),[o,w]);var R=a.useMemo((function(){return ele(ele({},w),{},{validateTrigger:p})}),[w,p]),F=a.createElement(Ale.Provider,{value:R},j);return!1===s?F:a.createElement(s,Jue({},y,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),w.submit()},onReset:function(e){var t;e.preventDefault(),w.resetFields(),null===(t=y.onReset)||void 0===t||t.call(y,e)}}),F)},Tce=a.forwardRef(Mce);Tce.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,o=e.children,i=a.useContext(Pce),u=a.useRef({});return a.createElement(Pce.Provider,{value:ele(ele({},i),{},{validateMessages:ele(ele({},i.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:u.current}),i.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:u.current}),i.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(u.current=ele(ele({},u.current),{},bw({},e,t))),i.registerForm(e,t)},unregisterForm:function(e){var t=ele({},u.current);delete t[e],u.current=t,i.unregisterForm(e)}})},o)},Tce.Field=jce,Tce.List=function(e){var t=e.name,n=e.initialValue,r=e.children,o=e.rules,i=e.validateTrigger,u=a.useContext(Ale),l=a.useRef({keys:[],id:0}).current;if("function"!=typeof r)return xle(!1,"Form.List only accepts function as children."),null;var c=ace(u.prefixName)||[],s=[].concat(gw(c),gw(ace(t)));return a.createElement(Ale.Provider,{value:ele(ele({},u),{},{prefixName:s})},a.createElement(jce,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:i,initialValue:n,isList:!0},(function(e,t){var n=e.value,o=void 0===n?[]:n,i=e.onChange,a=u.getFieldValue,c=function(){return a(s||[])||[]},d={add:function(e,t){var n=c();t>=0&&t<=n.length?(l.keys=[].concat(gw(l.keys.slice(0,t)),[l.id],gw(l.keys.slice(t))),i([].concat(gw(n.slice(0,t)),[e],gw(n.slice(t))))):(l.keys=[].concat(gw(l.keys),[l.id]),i([].concat(gw(n),[e]))),l.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(l.keys=l.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(l.keys=gce(l.keys,e,t),i(gce(n,e,t)))}}},f=o||[];return Array.isArray(f)||(f=[]),r(f.map((function(e,t){var n=l.keys[t];return void 0===n&&(l.keys[t]=l.id,n=l.keys[t],l.id+=1),{name:t,key:n,isListField:!0}})),d,t)})))},Tce.useForm=Ice;var Nce=function(e,t,n){xle(e,"[antd: ".concat(t,"] ").concat(n))},Bce={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Vce={lang:Jue({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Jue({},Bce)},Lce="${label} is not a valid ${type}",zce={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:Vce,TimePicker:Bce,Calendar:Vce,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Lce,method:Lce,array:Lce,object:Lce,number:Lce,date:Lce,boolean:Lce,integer:Lce,float:Lce,regexp:Lce,email:Lce,url:Lce,hex:Lce},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Uce=Object(a.createContext)(void 0),Hce=function(e){vk(n,e);var t=nle(n);function n(){return _w(this,n),t.apply(this,arguments)}return Ew(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||zce[t||"global"],r=this.context,o=t&&r?r[t]:{};return Jue(Jue({},"function"==typeof n?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?zce.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(a.Component);Hce.defaultProps={componentName:"global"},Hce.contextType=Uce;var qce=function(){var e=(0,a.useContext(Yce).getPrefixCls)("empty-img-default");return a.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(24 31.67)"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),a.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),a.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},a.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Wce=function(){var e=(0,a.useContext(Yce).getPrefixCls)("empty-img-simple");return a.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),a.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},a.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),a.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},$ce=a.createElement(qce,null),Gce=a.createElement(Wce,null),Kce=function(e){var t=e.className,n=e.prefixCls,r=e.image,o=void 0===r?$ce:r,i=e.description,u=e.children,l=e.imageStyle,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),s=a.useContext(Yce),d=s.getPrefixCls,f=s.direction;return a.createElement(Hce,{componentName:"Empty"},(function(e){var r,s=d("empty",n),p=void 0!==i?i:e.description,v="string"==typeof p?p:"empty",h=null;return h="string"==typeof o?a.createElement("img",{alt:v,src:o}):o,a.createElement("div",Jue({className:I()(s,(r={},bw(r,"".concat(s,"-normal"),o===Gce),bw(r,"".concat(s,"-rtl"),"rtl"===f),r),t)},c),a.createElement("div",{className:"".concat(s,"-image"),style:l},h),p&&a.createElement("div",{className:"".concat(s,"-description")},p),u&&a.createElement("div",{className:"".concat(s,"-footer")},u))}))};Kce.PRESENTED_IMAGE_DEFAULT=$ce,Kce.PRESENTED_IMAGE_SIMPLE=Gce;var Yce=a.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:function(e){return a.createElement(Jce,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return a.createElement(Kce,{image:Kce.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return a.createElement(Kce,{image:Kce.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return a.createElement(Kce,null)}}))}}),Jce=Yce.Consumer,Xce=a.createContext(void 0);function Zce(e){return e instanceof HTMLElement||e instanceof SVGElement}function Qce(e){var t,n=function(e){return e&&"object"===mw(e)&&Zce(e.nativeElement)?e.nativeElement:Zce(e)?e:null}(e);return n||(e instanceof u.a.Component?null===(t=c.a.findDOMNode)||void 0===t?void 0:t.call(c.a,e):null)}var ese=function(e,t){"function"==typeof e?e(t):"object"===mw(e)&&e&&"current"in e&&(e.current=t)},tse=function(e){var t,n,r=_le.isMemo(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===_le.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===_le.ForwardRef)};Number(a.version.split(".")[0]);var nse=a.createContext({}),rse=function(e){vk(n,e);var t=nle(n);function n(){return _w(this,n),t.apply(this,arguments)}return Ew(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component);function ose(e){var t=a.useRef(!1),n=WI(a.useState(e),2),r=n[0],o=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}function ise(e){var t=a.useRef();t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}var ase="none",use="appear",lse="enter",cse="leave",sse="none",dse="prepare",fse="start",pse="active",vse="end",hse="prepared";function gse(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function mse(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var yse=function(e,t){var n={animationend:mse("Animation","AnimationEnd"),transitionend:mse("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(gse(),"undefined"!=typeof window?window:{}),bse={};if(gse()){var wse=document.createElement("div");bse=wse.style}var _se={};function kse(e){if(_se[e])return _se[e];var t=yse[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in bse)return _se[e]=t[i],_se[e]}return""}var Cse=kse("animationend"),Ese=kse("transitionend"),Ose=!(!Cse||!Ese),Sse=Cse||"animationend",xse=Ese||"transitionend";function jse(e,t){return e?"object"===mw(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var Dse=function(e){var t=Object(a.useRef)();function n(t){t&&(t.removeEventListener(xse,e),t.removeEventListener(Sse,e))}return a.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(xse,e),r.addEventListener(Sse,e),t.current=r)},n]},Ase=gse()?a.useLayoutEffect:a.useEffect,Rse=function(e){return+setTimeout(e,16)},Fse=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Rse=function(e){return window.requestAnimationFrame(e)},Fse=function(e){return window.cancelAnimationFrame(e)});var Ise=0,Pse=new Map;function Mse(e){Pse.delete(e)}var Tse=function(e){var t=Ise+=1;return function n(r){if(0===r)Mse(t),e();else{var o=Rse((function(){n(r-1)}));Pse.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};Tse.cancel=function(e){var t=Pse.get(e);return Mse(e),Fse(t)};var Nse=[dse,fse,pse,vse],Bse=[dse,hse],Vse=!1,Lse=!0;function zse(e){return e===pse||e===vse}var Use=function(e,t,n){var r=WI(ose(sse),2),o=r[0],i=r[1],u=function(){var e=a.useRef(null);function t(){Tse.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=Tse((function(){o<=1?r({isCanceled:function(){return i!==e.current}}):n(r,o-1)}));e.current=i},t]}(),l=WI(u,2),c=l[0],s=l[1];var d=t?Bse:Nse;return Ase((function(){if(o!==sse&&o!==vse){var e=d.indexOf(o),t=d[e+1],r=n(o);r===Vse?i(t,!0):t&&c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),a.useEffect((function(){return function(){s()}}),[]),[function(){i(dse,!0)},o]};function Hse(e,t,n,r){var o,i,u,l=r.motionEnter,c=void 0===l||l,s=r.motionAppear,d=void 0===s||s,f=r.motionLeave,p=void 0===f||f,v=r.motionDeadline,h=r.motionLeaveImmediately,g=r.onAppearPrepare,m=r.onEnterPrepare,y=r.onLeavePrepare,b=r.onAppearStart,w=r.onEnterStart,_=r.onLeaveStart,k=r.onAppearActive,C=r.onEnterActive,E=r.onLeaveActive,O=r.onAppearEnd,S=r.onEnterEnd,x=r.onLeaveEnd,j=r.onVisibleChanged,D=WI(ose(),2),A=D[0],R=D[1],F=(o=ase,i=WI(a.useReducer((function(e){return e+1}),0),2)[1],u=a.useRef(o),[ise((function(){return u.current})),ise((function(e){u.current="function"==typeof e?e(u.current):e,i()}))]),I=WI(F,2),P=I[0],M=I[1],T=WI(ose(null),2),N=T[0],B=T[1],V=P(),L=Object(a.useRef)(!1),z=Object(a.useRef)(null);function U(){return n()}var H=Object(a.useRef)(!1);function q(){M(ase),B(null,!0)}var W=vW((function(e){var t=P();if(t!==ase){var n=U();if(!e||e.deadline||e.target===n){var r,o=H.current;t===use&&o?r=null==O?void 0:O(n,e):t===lse&&o?r=null==S?void 0:S(n,e):t===cse&&o&&(r=null==x?void 0:x(n,e)),o&&!1!==r&&q()}}})),$=WI(Dse(W),1)[0],G=function(e){switch(e){case use:return bw(bw(bw({},dse,g),fse,b),pse,k);case lse:return bw(bw(bw({},dse,m),fse,w),pse,C);case cse:return bw(bw(bw({},dse,y),fse,_),pse,E);default:return{}}},K=a.useMemo((function(){return G(V)}),[V]),Y=WI(Use(V,!e,(function(e){if(e===dse){var t=K[dse];return t?t(U()):Vse}var n;X in K&&B((null===(n=K[X])||void 0===n?void 0:n.call(K,U(),null))||null);return X===pse&&V!==ase&&($(U()),v>0&&(clearTimeout(z.current),z.current=setTimeout((function(){W({deadline:!0})}),v))),X===hse&&q(),Lse})),2),J=Y[0],X=Y[1],Z=zse(X);H.current=Z,Ase((function(){R(t);var n,r=L.current;L.current=!0,!r&&t&&d&&(n=use),r&&t&&c&&(n=lse),(r&&!t&&p||!r&&h&&!t&&p)&&(n=cse);var o=G(n);n&&(e||o[dse])?(M(n),J()):M(ase)}),[t]),Object(a.useEffect)((function(){(V===use&&!d||V===lse&&!c||V===cse&&!p)&&M(ase)}),[d,c,p]),Object(a.useEffect)((function(){return function(){L.current=!1,clearTimeout(z.current)}}),[]);var Q=a.useRef(!1);Object(a.useEffect)((function(){A&&(Q.current=!0),void 0!==A&&V===ase&&((Q.current||A)&&(null==j||j(A)),Q.current=!0)}),[A,V]);var ee=N;return K[dse]&&X===fse&&(ee=ele({transition:"none"},ee)),[V,X,ee,null!=A?A:t]}var qse=function(e){var t=e;"object"===mw(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,i=e.removeOnLeave,u=void 0===i||i,l=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,p=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(nse).motion),v=Object(a.useRef)(),h=Object(a.useRef)();var g=WI(Hse(p,o,(function(){try{return v.current instanceof HTMLElement?v.current:Qce(h.current)}catch(e){return null}}),e),4),m=g[0],y=g[1],b=g[2],w=g[3],_=a.useRef(w);w&&(_.current=!0);var k,C=a.useCallback((function(e){v.current=e,ese(n,e)}),[n]),E=ele(ele({},f),{},{visible:o});if(c)if(m===ase)k=w?c(ele({},E),C):!u&&_.current&&d?c(ele(ele({},E),{},{className:d}),C):l||!u&&!d?c(ele(ele({},E),{},{style:{display:"none"}}),C):null;else{var O;y===dse?O="prepare":zse(y)?O="active":y===fse&&(O="start");var S=jse(s,"".concat(m,"-").concat(O));k=c(ele(ele({},E),{},{className:I()(jse(s,m),bw(bw({},S,S&&O),s,"string"==typeof s)),style:b}),C)}else k=null;a.isValidElement(k)&&tse(k)&&(k.ref||(k=a.cloneElement(k,{ref:C})));return a.createElement(rse,{ref:h},k)}));return n.displayName="CSSMotion",n}(Ose),Wse="add",$se="keep",Gse="remove",Kse="removed";function Yse(e){var t;return ele(ele({},t=e&&"object"===mw(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Jse(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Yse)}var Xse=["component","children","onVisibleChanged","onAllRemoved"],Zse=["status"],Qse=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qse,n=function(e){vk(r,e);var n=nle(r);function r(){var e;_w(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return bw(ck(e=n.call.apply(n,[this].concat(o))),"state",{keyEntities:[]}),bw(ck(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:ele(ele({},e),{},{status:Kse})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==Kse})).length})),e}return Ew(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,i=r.children,u=r.onVisibleChanged,l=r.onAllRemoved,c=wre(r,Xse),s=o||a.Fragment,d={};return Qse.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,a.createElement(s,c,n.map((function(n,r){var o=n.status,c=wre(n,Zse),s=o===Wse||o===$se;return a.createElement(t,Jue({},d,{key:c.key,visible:s,eventProps:c,onVisibleChanged:function(t){(null==u||u(t,{key:c.key}),t)||0===e.removeKey(c.key)&&l&&l()}}),(function(e,t){return i(ele(ele({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=Jse(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,i=Jse(e),a=Jse(t);i.forEach((function(e){for(var t=!1,i=r;i<o;i+=1){var u=a[i];if(u.key===e.key){r<i&&(n=n.concat(a.slice(r,i).map((function(e){return ele(ele({},e),{},{status:Wse})}))),r=i),n.push(ele(ele({},u),{},{status:$se})),r+=1,t=!0;break}}t||n.push(ele(ele({},e),{},{status:Gse}))})),r<o&&(n=n.concat(a.slice(r).map((function(e){return ele(ele({},e),{},{status:Wse})}))));var u={};return n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Gse}))).forEach((function(t){t.key===e&&(t.status=$se)}))})),n}(r,o);return{keyEntities:i.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Kse||e.status!==Gse}))}}}]),r}(a.Component);bw(n,"defaultProps",{component:"div"})}(Ose);var ede={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function tde(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function nde(e){return e<=1?"".concat(100*Number(e),"%"):e}function rde(e){return 1===e.length?"0"+e:String(e)}function ode(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ide(e){return ade(e)/255}function ade(e){return parseInt(e,16)}var ude={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function lde(e){var t,n,r,o={r:0,g:0,b:0},i=1,a=null,u=null,l=null,c=!1,s=!1;return"string"==typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(ude[e])e=ude[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=fde.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=fde.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=fde.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=fde.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=fde.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=fde.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=fde.hex8.exec(e),n)return{r:ade(n[1]),g:ade(n[2]),b:ade(n[3]),a:ide(n[4]),format:t?"name":"hex8"};if(n=fde.hex6.exec(e),n)return{r:ade(n[1]),g:ade(n[2]),b:ade(n[3]),format:t?"name":"hex"};if(n=fde.hex4.exec(e),n)return{r:ade(n[1]+n[1]),g:ade(n[2]+n[2]),b:ade(n[3]+n[3]),a:ide(n[4]+n[4]),format:t?"name":"hex8"};if(n=fde.hex3.exec(e),n)return{r:ade(n[1]+n[1]),g:ade(n[2]+n[2]),b:ade(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===mw(e)&&(pde(e.r)&&pde(e.g)&&pde(e.b)?(t=e.r,n=e.g,r=e.b,o={r:255*tde(t,255),g:255*tde(n,255),b:255*tde(r,255)},c=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):pde(e.h)&&pde(e.s)&&pde(e.v)?(a=nde(e.s),u=nde(e.v),o=function(e,t,n){e=6*tde(e,360),t=tde(t,100),n=tde(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),u=n*(1-(1-o)*t),l=r%6;return{r:255*[n,a,i,i,u,n][l],g:255*[u,n,n,a,i,i][l],b:255*[i,i,u,n,n,a][l]}}(e.h,a,u),c=!0,s="hsv"):pde(e.h)&&pde(e.s)&&pde(e.l)&&(a=nde(e.s),l=nde(e.l),o=function(e,t,n){var r,o,i;if(e=tde(e,360),t=tde(t,100),n=tde(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=ode(u,a,e+1/3),o=ode(u,a,e),i=ode(u,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,a,l),c=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(i),{ok:c,format:e.format||s,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:i}}var cde="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),sde="[\\s|\\(]+(".concat(cde,")[,|\\s]+(").concat(cde,")[,|\\s]+(").concat(cde,")\\s*\\)?"),dde="[\\s|\\(]+(".concat(cde,")[,|\\s]+(").concat(cde,")[,|\\s]+(").concat(cde,")[,|\\s]+(").concat(cde,")\\s*\\)?"),fde={CSS_UNIT:new RegExp(cde),rgb:new RegExp("rgb"+sde),rgba:new RegExp("rgba"+dde),hsl:new RegExp("hsl"+sde),hsla:new RegExp("hsla"+dde),hsv:new RegExp("hsv"+sde),hsva:new RegExp("hsva"+dde),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function pde(e){return Boolean(fde.CSS_UNIT.exec(String(e)))}var vde=2,hde=.16,gde=.05,mde=.05,yde=.15,bde=5,wde=4,_de=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function kde(e){var t=function(e,t,n){e=tde(e,255),t=tde(t,255),n=tde(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,u=r-o,l=0===r?0:u/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:l,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function Cde(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){return[rde(Math.round(e).toString(16)),rde(Math.round(t).toString(16)),rde(Math.round(n).toString(16))].join("")}(t,n,r))}function Ede(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-vde*t:Math.round(e.h)+vde*t:n?Math.round(e.h)+vde*t:Math.round(e.h)-vde*t)<0?r+=360:r>=360&&(r-=360),r}function Ode(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-hde*t:t===wde?e.s+hde:e.s+gde*t)>1&&(r=1),n&&t===bde&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Sde(e,t,n){var r;return(r=n?e.v+mde*t:e.v-yde*t)>1&&(r=1),Number(r.toFixed(2))}function xde(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=lde(e),o=bde;o>0;o-=1){var i=kde(r),a=Cde(lde({h:Ede(i,o,!0),s:Ode(i,o,!0),v:Sde(i,o,!0)}));n.push(a)}n.push(Cde(r));for(var u=1;u<=wde;u+=1){var l=kde(r),c=Cde(lde({h:Ede(l,u),s:Ode(l,u),v:Sde(l,u)}));n.push(c)}return"dark"===t.theme?_de.map((function(e){var r,o,i,a=e.index,u=e.opacity;return Cde((r=lde(t.backgroundColor||"#141414"),o=lde(n[a]),i=100*u/100,{r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b}))})):n}var jde={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Dde={},Ade={};Object.keys(jde).forEach((function(e){Dde[e]=xde(jde[e]),Dde[e].primary=Dde[e][5],Ade[e]=xde(jde[e],{theme:"dark",backgroundColor:"#141414"}),Ade[e].primary=Ade[e][5]}));var Rde="data-rc-order",Fde="data-rc-priority",Ide="rc-util-key",Pde=new Map;function Mde(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):Ide}function Tde(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Nde(e){return Array.from((Pde.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function Bde(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!gse())return null;var n=t.csp,r=t.prepend,o=t.priority,i=void 0===o?0:o,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),u="prependQueue"===a,l=document.createElement("style");l.setAttribute(Rde,a),u&&i&&l.setAttribute(Fde,"".concat(i)),null!=n&&n.nonce&&(l.nonce=null==n?void 0:n.nonce),l.innerHTML=e;var c=Tde(t),s=c.firstChild;if(r){if(u){var d=(t.styles||Nde(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(Rde)))return!1;var t=Number(e.getAttribute(Fde)||0);return i>=t}));if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,s)}else c.appendChild(l);return l}function Vde(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Tde(n),o=Nde(r),i=ele(ele({},n),{},{styles:o});!function(e,t){var n=Pde.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=Bde("",t),o=r.parentNode;Pde.set(e,o),e.removeChild(r)}}(r,i);var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Tde(t);return(t.styles||Nde(n)).find((function(n){return n.getAttribute(Mde(t))===e}))}(t,i);if(a){var u,l,c;if(null!==(u=i.csp)&&void 0!==u&&u.nonce&&a.nonce!==(null===(l=i.csp)||void 0===l?void 0:l.nonce))a.nonce=null===(c=i.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=Bde(e,i);return s.setAttribute(Mde(i),t),s}var Lde="object"==mw(e_)&&e_&&e_.Object===Object&&e_,zde="object"==("undefined"==typeof self?"undefined":mw(self))&&self&&self.Object===Object&&self,Ude=(Lde||zde||Function("return this")()).Symbol;var Hde=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},qde=Array.isArray,Wde=Ude,$de=Object.prototype,Gde=$de.hasOwnProperty,Kde=$de.toString,Yde=Wde?Wde.toStringTag:void 0;var Jde=function(e){var t=Gde.call(e,Yde),n=e[Yde];try{e[Yde]=void 0;var r=!0}catch(e){}var o=Kde.call(e);return r&&(t?e[Yde]=n:delete e[Yde]),o},Xde=Object.prototype.toString;var Zde=function(e){return Xde.call(e)},Qde=Jde,efe=Zde,tfe=Ude?Ude.toStringTag:void 0;var nfe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":tfe&&tfe in Object(e)?Qde(e):efe(e)};var rfe=function(e){return null!=e&&"object"==mw(e)},ofe=nfe,ife=rfe;var afe=function(e){return"symbol"==mw(e)||ife(e)&&"[object Symbol]"==ofe(e)},ufe=Hde,lfe=qde,cfe=afe,sfe=Ude?Ude.prototype:void 0,dfe=sfe?sfe.toString:void 0;var ffe=function e(t){if("string"==typeof t)return t;if(lfe(t))return ufe(t,e)+"";if(cfe(t))return dfe?dfe.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},pfe=ffe;var vfe=function(e){return null==e?"":pfe(e)};var hfe=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var gfe=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:hfe(e,t,n)},mfe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var yfe=function(e){return mfe.test(e)};var bfe=function(e){return e.split("")},wfe="\\ud800-\\udfff",_fe="["+wfe+"]",kfe="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Cfe="\\ud83c[\\udffb-\\udfff]",Efe="[^"+wfe+"]",Ofe="(?:\\ud83c[\\udde6-\\uddff]){2}",Sfe="[\\ud800-\\udbff][\\udc00-\\udfff]",xfe="(?:"+kfe+"|"+Cfe+")"+"?",jfe="[\\ufe0e\\ufe0f]?",Dfe=jfe+xfe+("(?:\\u200d(?:"+[Efe,Ofe,Sfe].join("|")+")"+jfe+xfe+")*"),Afe="(?:"+[Efe+kfe+"?",kfe,Ofe,Sfe,_fe].join("|")+")",Rfe=RegExp(Cfe+"(?="+Cfe+")|"+Afe+Dfe,"g");var Ffe=bfe,Ife=yfe,Pfe=function(e){return e.match(Rfe)||[]};var Mfe=gfe,Tfe=yfe,Nfe=function(e){return Ife(e)?Pfe(e):Ffe(e)},Bfe=vfe;var Vfe=function(e){return function(t){t=Bfe(t);var n=Tfe(t)?Nfe(t):void 0,r=n?n[0]:t.charAt(0),o=n?Mfe(n,1).join(""):t.slice(1);return r[e]()+o}},Lfe=Vfe("toUpperCase"),zfe=vfe,Ufe=Lfe;var Hfe=function(e){return Ufe(zfe(e).toLowerCase())};var qfe=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n};var Wfe=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),$fe=vfe,Gfe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kfe=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Yfe=function(e){return(e=$fe(e))&&e.replace(Gfe,Wfe).replace(Kfe,"")},Jfe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Xfe=function(e){return e.match(Jfe)||[]},Zfe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Qfe=function(e){return Zfe.test(e)},epe="\\ud800-\\udfff",tpe="\\u2700-\\u27bf",npe="a-z\\xdf-\\xf6\\xf8-\\xff",rpe="A-Z\\xc0-\\xd6\\xd8-\\xde",ope="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ipe="["+ope+"]",ape="\\d+",upe="["+tpe+"]",lpe="["+npe+"]",cpe="[^"+epe+ope+ape+tpe+npe+rpe+"]",spe="(?:\\ud83c[\\udde6-\\uddff]){2}",dpe="[\\ud800-\\udbff][\\udc00-\\udfff]",fpe="["+rpe+"]",ppe="(?:"+lpe+"|"+cpe+")",vpe="(?:"+fpe+"|"+cpe+")",hpe="(?:['’](?:d|ll|m|re|s|t|ve))?",gpe="(?:['’](?:D|LL|M|RE|S|T|VE))?",mpe="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ype="[\\ufe0e\\ufe0f]?",bpe=ype+mpe+("(?:\\u200d(?:"+["[^"+epe+"]",spe,dpe].join("|")+")"+ype+mpe+")*"),wpe="(?:"+[upe,spe,dpe].join("|")+")"+bpe,_pe=RegExp([fpe+"?"+lpe+"+"+hpe+"(?="+[ipe,fpe,"$"].join("|")+")",vpe+"+"+gpe+"(?="+[ipe,fpe+ppe,"$"].join("|")+")",fpe+"?"+ppe+"+"+hpe,fpe+"+"+gpe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ape,wpe].join("|"),"g");var kpe=Xfe,Cpe=Qfe,Epe=vfe,Ope=function(e){return e.match(_pe)||[]};var Spe=qfe,xpe=Yfe,jpe=function(e,t,n){return e=Epe(e),void 0===(t=n?void 0:t)?Cpe(e)?Ope(e):kpe(e):e.match(t)||[]},Dpe=RegExp("['’]","g");var Ape=Hfe,Rpe=t_(function(e){return function(t){return Spe(jpe(xpe(t).replace(Dpe,"")),e,"")}}((function(e,t,n){return t=t.toLowerCase(),e+(n?Ape(t):t)})));function Fpe(e){return"object"===mw(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===mw(e.icon)||"function"==typeof e.icon)}function Ipe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[Rpe(n)]=r;return t}),{})}function Ppe(e,t,n){return n?u.a.createElement(e.tag,ele(ele({key:t},Ipe(e.attrs)),n),(e.children||[]).map((function(n,r){return Ppe(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):u.a.createElement(e.tag,ele({key:t},Ipe(e.attrs)),(e.children||[]).map((function(n,r){return Ppe(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Mpe(e){return xde(e)[0]}function Tpe(e){return e?Array.isArray(e)?e:[e]:[]}var Npe=["icon","className","onClick","style","primaryColor","secondaryColor"],Bpe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Vpe=function(e){var t,n,r=e.icon,o=e.className,i=e.onClick,u=e.style,l=e.primaryColor,c=e.secondaryColor,s=wre(e,Npe),d=Bpe;if(l&&(d={primaryColor:l,secondaryColor:c||Mpe(l)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=Object(a.useContext)(Zue).csp;Object(a.useEffect)((function(){Vde(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=Fpe(r),n="icon should be icon definiton, but got ".concat(r),xle(t,"[@ant-design/icons] ".concat(n)),!Fpe(r))return null;var f=r;return f&&"function"==typeof f.icon&&(f=ele(ele({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),Ppe(f.icon,"svg-".concat(f.name),ele({className:o,onClick:i,style:u,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};function Lpe(e){var t=WI(Tpe(e),2),n=t[0],r=t[1];return Vpe.setTwoToneColors({primaryColor:n,secondaryColor:r})}Vpe.displayName="IconReact",Vpe.getTwoToneColors=function(){return ele({},Bpe)},Vpe.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Bpe.primaryColor=t,Bpe.secondaryColor=n||Mpe(t),Bpe.calculated=!!n};var zpe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Lpe("#1890ff");var Upe=a.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,i=e.rotate,u=e.tabIndex,l=e.onClick,c=e.twoToneColor,s=wre(e,zpe),d=a.useContext(Zue),f=d.prefixCls,p=void 0===f?"anticon":f,v=d.rootClassName,h=I()(v,p,bw(bw({},"".concat(p,"-").concat(r.name),!!r.name),"".concat(p,"-spin"),!!o||"loading"===r.name),n),g=u;void 0===g&&l&&(g=-1);var m=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,y=WI(Tpe(c),2),b=y[0],w=y[1];return a.createElement("span",ele(ele({role:"img","aria-label":r.name},s),{},{ref:t,tabIndex:g,onClick:l,className:h}),a.createElement(Vpe,{icon:r,primaryColor:b,secondaryColor:w,style:m}))}));Upe.displayName="AntdIcon",Upe.getTwoToneColor=function(){var e=Vpe.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Upe.setTwoToneColor=Lpe;var Hpe=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:ede}))},qpe=a.forwardRef(Hpe),Wpe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},$pe=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:Wpe}))},Gpe=a.forwardRef($pe),Kpe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Ype=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:Kpe}))},Jpe=a.forwardRef(Ype),Xpe=function e(t){return _w(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},Zpe=0,Qpe={};function eve(e){var t=Zpe++,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Qpe[t]=Tse((function r(){(n-=1)<=0?(e(),delete Qpe[t]):Qpe[t]=Tse(r)})),t}eve.cancel=function(e){void 0!==e&&(Tse.cancel(Qpe[e]),delete Qpe[e])},eve.ids=Qpe;var tve,nve=a.isValidElement;function rve(e,t){return function(e,t,n){return nve(e)?a.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}(e,e,t)}function ove(e){return!e||null===e.offsetParent||e.hidden}var ive=function(e){vk(n,e);var t=nle(n);function n(){var e;return _w(this,n),(e=t.apply(this,arguments)).containerRef=a.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var r,o;if(!(!t||ove(t)||t.className.indexOf("-leave")>=0)){var i=e.props.insertExtraNode;e.extraNode=document.createElement("div");var a=ck(e).extraNode,u=e.context.getPrefixCls;a.className="".concat(u(""),"-click-animating-node");var l,c=e.getAttributeName();if(t.setAttribute(c,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&!((l=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&l[1]&&l[2]&&l[3]&&l[1]===l[2]&&l[2]===l[3])&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){a.style.borderColor=n;var s=(null===(r=t.getRootNode)||void 0===r?void 0:r.call(t))||t.ownerDocument,d=s instanceof Document?s.body:null!==(o=s.firstChild)&&void 0!==o?o:s;tve=Vde("\n      [".concat(u(""),"-click-animating-without-extra-node='true']::after, .").concat(u(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:d})}i&&t.appendChild(a),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!ove(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),eve.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=eve((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!a.isValidElement(r))return r;var o=e.containerRef;return tse(r)&&(o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){ese(t,e)}))}}(r.ref,e.containerRef)),rve(r,{ref:o})},e}return Ew(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();e.setAttribute(r,"false"),tve&&(tve.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return a.createElement(Jce,null,this.renderWave)}}]),n}(a.Component);ive.contextType=Yce;var ave=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},uve=function(){return{width:0,opacity:0,transform:"scale(0)"}},lve=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},cve=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?u.a.createElement("span",{className:"".concat(t,"-loading-icon")},u.a.createElement(qpe,null)):u.a.createElement(qse,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:uve,onAppearActive:lve,onEnterStart:uve,onEnterActive:lve,onLeaveStart:lve,onLeaveActive:uve},(function(e,n){var r=e.className,o=e.style;return u.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:o,ref:n},u.a.createElement(qpe,{className:r}))}))},sve=/^[\u4e00-\u9fa5]{2}$/,dve=sve.test.bind(sve);function fve(e){return"text"===e||"link"===e}function pve(e,t){var n=!1,r=[];return a.Children.forEach(e,(function(e){var t=mw(e),o="string"===t||"number"===t;if(n&&o){var i=r.length-1,a=r[i];r[i]="".concat(a).concat(e)}else r.push(e);n=o})),a.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&dve(e.props.children)?rve(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(dve(e)&&(e=e.split("").join(n)),a.createElement("span",null,e)):e}}(e,t)}))}ave("default","primary","ghost","dashed","link","text"),ave("circle","round"),ave("submit","button","reset");var vve=function(e,t){var n,r,o=e.loading,i=void 0!==o&&o,u=e.prefixCls,l=e.type,c=e.danger,s=e.shape,d=e.size,f=e.className,p=e.children,v=e.icon,h=e.ghost,g=void 0!==h&&h,m=e.block,y=void 0!==m&&m,b=e.htmlType,w=void 0===b?"button":b,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),k=a.useContext(Xce),C=WI(a.useState(!!i),2),E=C[0],O=C[1],S=WI(a.useState(!1),2),x=S[0],j=S[1],D=a.useContext(Yce),A=D.getPrefixCls,R=D.autoInsertSpaceInButton,F=D.direction,P=t||a.createRef(),M=a.useRef(),T=function(){return 1===a.Children.count(p)&&!v&&!fve(l)};r="object"===mw(i)&&i.delay?i.delay||!0:!!i,a.useEffect((function(){clearTimeout(M.current),"number"==typeof r?M.current=window.setTimeout((function(){O(r)}),r):O(r)}),[r]),a.useEffect((function(){if(P&&P.current&&!1!==R){var e=P.current.textContent;T()&&dve(e)?x||j(!0):x&&j(!1)}}),[P]);var N=function(t){var n,r=e.onClick,o=e.disabled;E||o?t.preventDefault():null===(n=r)||void 0===n||n(t)};Nce(!("string"==typeof v&&v.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(v,"` at https://ant.design/components/icon")),Nce(!(g&&fve(l)),"Button","`link` or `text` button can't be a `ghost` button.");var B=A("btn",u),V=!1!==R,L="";switch(d||k){case"large":L="lg";break;case"small":L="sm"}var z=E?"loading":v,U=I()(B,(bw(n={},"".concat(B,"-").concat(l),l),bw(n,"".concat(B,"-").concat(s),s),bw(n,"".concat(B,"-").concat(L),L),bw(n,"".concat(B,"-icon-only"),!p&&0!==p&&!!z),bw(n,"".concat(B,"-background-ghost"),g&&!fve(l)),bw(n,"".concat(B,"-loading"),E),bw(n,"".concat(B,"-two-chinese-chars"),x&&V),bw(n,"".concat(B,"-block"),y),bw(n,"".concat(B,"-dangerous"),!!c),bw(n,"".concat(B,"-rtl"),"rtl"===F),n),f),H=v&&!E?v:a.createElement(cve,{existIcon:!!v,prefixCls:B,loading:!!E}),q=p||0===p?pve(p,T()&&V):null,W=Xue(_,["navigate"]);if(void 0!==W.href)return a.createElement("a",Jue({},W,{className:U,onClick:N,ref:P}),H,q);var $=a.createElement("button",Jue({},_,{type:w,className:U,onClick:N,ref:P}),H,q);return fve(l)?$:a.createElement(ive,null,$)},hve=a.forwardRef(vve);hve.displayName="Button",hve.Group=function(e){return a.createElement(Jce,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,u=e.size,l=e.className,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","className"]),s=r("btn-group",i),d="";switch(u){case"large":d="lg";break;case"small":d="sm";break;case"middle":case void 0:break;default:console.warn(new Xpe(u))}var f=I()(s,(bw(n={},"".concat(s,"-").concat(d),d),bw(n,"".concat(s,"-rtl"),"rtl"===o),n),l);return a.createElement("div",Jue({},c,{className:f}))}))},hve.__ANT_BUTTON=!0;var gve=ave("success","processing","error","default","warning"),mve=ave("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),yve=new RegExp("^(".concat(mve.join("|"),")(-inverse)?$")),bve=new RegExp("^(".concat(gve.join("|"),")$")),wve=function(e,t){var n,r=e.prefixCls,o=e.className,i=e.style,u=e.children,l=e.icon,c=e.color,s=e.onClose,d=e.closeIcon,f=e.closable,p=void 0!==f&&f,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),h=a.useContext(Yce),g=h.getPrefixCls,m=h.direction,y=WI(a.useState(!0),2),b=y[0],w=y[1];a.useEffect((function(){"visible"in v&&w(v.visible)}),[v.visible]);var _=function(){return!!c&&(yve.test(c)||bve.test(c))},k=Jue({backgroundColor:c&&!_()?c:void 0},i),C=_(),E=g("tag",r),O=I()(E,(bw(n={},"".concat(E,"-").concat(c),C),bw(n,"".concat(E,"-has-color"),c&&!C),bw(n,"".concat(E,"-hidden"),!b),bw(n,"".concat(E,"-rtl"),"rtl"===m),n),o),S=function(e){e.stopPropagation(),null==s||s(e),e.defaultPrevented||"visible"in v||w(!1)},x="onClick"in v||u&&"a"===u.type,j=Xue(v,["visible"]),D=l||null,A=D?a.createElement(a.Fragment,null,D,a.createElement("span",null,u)):u,R=a.createElement("span",Jue({},j,{ref:t,className:O,style:k}),A,p?d?a.createElement("span",{className:"".concat(E,"-close-icon"),onClick:S},d):a.createElement(Jpe,{className:"".concat(E,"-close-icon"),onClick:S}):null);return x?a.createElement(ive,null,R):R},_ve=a.forwardRef(wve);_ve.displayName="Tag",_ve.CheckableTag=function(e){var t,n=e.prefixCls,r=e.className,o=e.checked,i=e.onChange,u=e.onClick,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","checked","onChange","onClick"]),c=(0,a.useContext(Yce).getPrefixCls)("tag",n),s=I()(c,(bw(t={},"".concat(c,"-checkable"),!0),bw(t,"".concat(c,"-checkable-checked"),o),t),r);return a.createElement("span",Jue({},l,{className:s,onClick:function(e){null==i||i(!o),null==u||u(e)}}))};var kve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},Cve=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:kve}))},Eve=a.forwardRef(Cve),Ove={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Sve=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:Ove}))},xve=a.forwardRef(Sve);function jve(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function Dve(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}var Ave=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var Rve={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Fve=function(e,t){return a.createElement(Upe,ele(ele({},e),{},{ref:t,icon:Rve}))},Ive=a.forwardRef(Fve),Pve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var Mve={button:function(e){return a.createElement(hve,Jue({size:"small",type:"primary"},e))},rangeItem:function(e){return a.createElement(_ve,Jue({color:"blue"},e))}};function Tve(e){var t,n=e.format,r=e.picker,o=e.showHour,i=e.showMinute,a=e.showSecond,u=e.use12Hours,l=(t=n,t?Array.isArray(t)?t:[t]:[])[0],c=Jue({},e);return l&&"string"==typeof l&&(l.includes("s")||void 0!==a||(c.showSecond=!1),l.includes("m")||void 0!==i||(c.showMinute=!1),l.includes("H")||l.includes("h")||void 0!==o||(c.showHour=!1),(l.includes("a")||l.includes("A"))&&void 0===u&&(c.use12Hours=!0)),"time"===r?c:("function"==typeof l&&delete c.format,{showTime:c})}var Nve,Bve={},Vve={},Lve={};var zve,Uve={},Hve={exports:{}};function qve(){return zve||(zve=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Hve)),Hve.exports}var Wve,$ve={};var Gve,Kve,Yve={};function Jve(){return Gve||(Gve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(Yve)),Yve}function Xve(){return Kve||(Kve=1,function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(qve()),r=t(function(){if(Wve)return $ve;Wve=1,Object.defineProperty($ve,"__esModule",{value:!0}),$ve.default=void 0;var e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};return $ve.default=e,$ve}()),o=t(Jve()),i={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},o.default)};e.default=i}(Uve)),Uve}var Zve,Qve,ehe={};function the(){return Qve||(Qve=1,function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((Nve||(Nve=1,Object.defineProperty(Lve,"__esModule",{value:!0}),Lve.default=void 0,Lve.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}),Lve)),r=t(Xve()),o=t(Jve()),i=t((Zve||(Zve=1,function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Xve()).default;e.default=n}(ehe)),ehe)),a="${label} is not a valid ${type}",u={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:i.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=u}(Vve)),Vve}!function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(the()).default;e.default=n}(Bve);var nhe,rhe=t_(Bve),ohe={},ihe={};var ahe,uhe={},lhe={};var che,she,dhe={};function fhe(){return che||(che=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(dhe)),dhe}function phe(){return she||(she=1,function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(qve()),r=t(function(){if(ahe)return lhe;ahe=1,Object.defineProperty(lhe,"__esModule",{value:!0}),lhe.default=void 0;var e={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};return lhe.default=e,lhe}()),o=t(fhe()),i={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},o.default)};i.lang.ok="确 定";var a=i;e.default=a}(uhe)),uhe}var vhe,hhe={};!function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((nhe||(nhe=1,Object.defineProperty(ihe,"__esModule",{value:!0}),ihe.default=void 0,ihe.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}),ihe)),r=t(phe()),o=t(fhe()),i=t((vhe||(vhe=1,function(e){var t=tP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(phe()).default;e.default=n}(hhe)),hhe)),a="${label}不是一个有效的${type}",u={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:i.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=u}(ohe);var ghe=t_(ohe),mhe=t_(Sue()),yhe=t_(Cue());function bhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function whe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bhe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i.a.extend(yhe),i.a.extend(mhe);var _he,khe,Che,Ehe,Ohe,She,xhe,jhe,Dhe,Ahe,Rhe=(khe=function(e){function t(t,n){var r=function(r){vk(i,r);var o=nle(i);function i(r){var u;return _w(this,i),(u=o.call(this,r)).pickerRef=a.createRef(),u.focus=function(){u.pickerRef.current&&u.pickerRef.current.focus()},u.blur=function(){u.pickerRef.current&&u.pickerRef.current.blur()},u.renderPicker=function(n){var r=Jue(Jue({},n),u.props.locale),o=u.context,i=o.getPrefixCls,l=o.direction,c=o.getPopupContainer,s=u.props,d=s.prefixCls,f=s.getPopupContainer,p=s.className,v=s.size,h=s.bordered,g=void 0===h||h,m=s.placeholder,y=Ave(s,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),b=u.props,w=b.format,_=b.showTime,k=i("picker",d),C={showToday:!0},E={};t&&(E.picker=t);var O=t||u.props.picker;E=Jue(Jue(Jue({},E),_?Tve(Jue({format:w,picker:O},_)):{}),"time"===O?Tve(Jue(Jue({format:w},u.props),{picker:O})):{});var S=i();return a.createElement(Xce.Consumer,null,(function(t){var n,o=v||t;return a.createElement(PJ,Jue({ref:u.pickerRef,placeholder:jve(O,r,m),suffixIcon:"time"===O?a.createElement(xve,null):a.createElement(Eve,null),clearIcon:a.createElement(Gpe,null),allowClear:!0,transitionName:"".concat(S,"-slide-up")},C,y,E,{locale:r.lang,className:I()((n={},bw(n,"".concat(k,"-").concat(o),o),bw(n,"".concat(k,"-borderless"),!g),n),p),prefixCls:k,getPopupContainer:f||c,generateConfig:e,prevIcon:a.createElement("span",{className:"".concat(k,"-prev-icon")}),nextIcon:a.createElement("span",{className:"".concat(k,"-next-icon")}),superPrevIcon:a.createElement("span",{className:"".concat(k,"-super-prev-icon")}),superNextIcon:a.createElement("span",{className:"".concat(k,"-super-next-icon")}),components:Mve,direction:l}))}))},Nce("quarter"!==t,n,"DatePicker.".concat(n," is legacy usage. Please use DatePicker[picker='").concat(t,"'] directly.")),u}return Ew(i,[{key:"render",value:function(){return a.createElement(Hce,{componentName:"DatePicker",defaultLocale:Vce},this.renderPicker)}}]),i}(a.Component);return r.contextType=Yce,n&&(r.displayName=n),r}return{DatePicker:t(),WeekPicker:t("week","WeekPicker"),MonthPicker:t("month","MonthPicker"),YearPicker:t("year","YearPicker"),TimePicker:t("time","TimePicker"),QuarterPicker:t("quarter","QuarterPicker")}}(_he=Tue),Che=khe.DatePicker,Ehe=khe.WeekPicker,Ohe=khe.MonthPicker,She=khe.YearPicker,xhe=khe.TimePicker,jhe=khe.QuarterPicker,Dhe=function(e){var t=function(t){vk(r,t);var n=nle(r);function r(){var t;return _w(this,r),(t=n.apply(this,arguments)).pickerRef=a.createRef(),t.focus=function(){t.pickerRef.current&&t.pickerRef.current.focus()},t.blur=function(){t.pickerRef.current&&t.pickerRef.current.blur()},t.renderPicker=function(n){var r=Jue(Jue({},n),t.props.locale),o=t.context,i=o.getPrefixCls,u=o.direction,l=o.getPopupContainer,c=t.props,s=c.prefixCls,d=c.getPopupContainer,f=c.className,p=c.size,v=c.bordered,h=void 0===v||v,g=c.placeholder,m=Pve(c,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),y=t.props,b=y.format,w=y.showTime,_=y.picker,k=i("picker",s),C={};C=Jue(Jue(Jue({},C),w?Tve(Jue({format:b,picker:_},w)):{}),"time"===_?Tve(Jue(Jue({format:b},t.props),{picker:_})):{});var E=i();return a.createElement(Xce.Consumer,null,(function(n){var o,i=p||n;return a.createElement(LJ,Jue({separator:a.createElement("span",{"aria-label":"to",className:"".concat(k,"-separator")},a.createElement(Ive,null)),ref:t.pickerRef,placeholder:Dve(_,r,g),suffixIcon:"time"===_?a.createElement(xve,null):a.createElement(Eve,null),clearIcon:a.createElement(Gpe,null),allowClear:!0,transitionName:"".concat(E,"-slide-up")},m,C,{className:I()((o={},bw(o,"".concat(k,"-").concat(i),i),bw(o,"".concat(k,"-borderless"),!h),o),f),locale:r.lang,prefixCls:k,getPopupContainer:d||l,generateConfig:e,prevIcon:a.createElement("span",{className:"".concat(k,"-prev-icon")}),nextIcon:a.createElement("span",{className:"".concat(k,"-next-icon")}),superPrevIcon:a.createElement("span",{className:"".concat(k,"-super-prev-icon")}),superNextIcon:a.createElement("span",{className:"".concat(k,"-super-next-icon")}),components:Mve,direction:u}))}))},t}return Ew(r,[{key:"render",value:function(){return a.createElement(Hce,{componentName:"DatePicker",defaultLocale:Vce},this.renderPicker)}}]),r}(a.Component);return t.contextType=Yce,t}(_he),(Ahe=Che).WeekPicker=Ehe,Ahe.MonthPicker=Ohe,Ahe.YearPicker=She,Ahe.RangePicker=Dhe,Ahe.TimePicker=xhe,Ahe.QuarterPicker=jhe,Ahe),Fhe="zhCN"===Vw._lang?ghe:rhe,Ihe=Object(a.forwardRef)((function(e,t){return u.a.createElement(Rhe,whe(whe({locale:Fhe.DatePicker},e),{},{ref:t}))})),Phe=["src","darkSrc","width","height","theme","style","darkAlpha","className","children"];function Mhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function The(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mhe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nhe=function(e){var t=e.src,n=e.darkSrc,r=e.width,o=e.height,i=e.theme,a=e.style,l=e.darkAlpha,c=e.className,s=e.children,d=wre(e,Phe);r=r||(null==a?void 0:a.width),o=o||(null==a?void 0:a.height);var f=yre(MP),p=WI(u.a.useState(i||(null==f?void 0:f.getCurrent())),2),v=p[0],h=p[1],g=WI(u.a.useState(v===aP.dark?n:t),2),m=g[0],y=g[1];if(Zae((function(){null==f||f.onChange((function(e){h(e),y(e===aP.dark?n:t)}))}),[]),!m)return null;var b=The({width:r,height:o},a);return b.backgroundImage="url(".concat(m,")"),v===aP.dark&&l&&(b.opacity=l),s?u.a.createElement("div",The({className:I()("lakex-table-image",c),style:b},d),s):(delete b.backgroundImage,u.a.createElement("img",The({src:m,className:I()("lakex-table-image",c),style:b},d)))};Nhe.displayName="Image";var Bhe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Bhe.F1&&t<=Bhe.F12)return!1;switch(t){case Bhe.ALT:case Bhe.CAPS_LOCK:case Bhe.CONTEXT_MENU:case Bhe.CTRL:case Bhe.DOWN:case Bhe.END:case Bhe.ESC:case Bhe.HOME:case Bhe.INSERT:case Bhe.LEFT:case Bhe.MAC_FF_META:case Bhe.META:case Bhe.NUMLOCK:case Bhe.NUM_CENTER:case Bhe.PAGE_DOWN:case Bhe.PAGE_UP:case Bhe.PAUSE:case Bhe.PRINT_SCREEN:case Bhe.RIGHT:case Bhe.SHIFT:case Bhe.UP:case Bhe.WIN_KEY:case Bhe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Bhe.ZERO&&e<=Bhe.NINE)return!0;if(e>=Bhe.NUM_ZERO&&e<=Bhe.NUM_MULTIPLY)return!0;if(e>=Bhe.A&&e<=Bhe.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Bhe.SPACE:case Bhe.QUESTION_MARK:case Bhe.NUM_PLUS:case Bhe.NUM_MINUS:case Bhe.NUM_PERIOD:case Bhe.NUM_DIVISION:case Bhe.SEMICOLON:case Bhe.DASH:case Bhe.EQUALS:case Bhe.COMMA:case Bhe.PERIOD:case Bhe.SLASH:case Bhe.APOSTROPHE:case Bhe.SINGLE_QUOTE:case Bhe.OPEN_SQUARE_BRACKET:case Bhe.BACKSLASH:case Bhe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Vhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lhe="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),zhe="aria-",Uhe="data-";function Hhe(e,t){return 0===e.indexOf(t)}function qhe(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vhe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Hhe(n,zhe))||t.data&&Hhe(n,Uhe)||t.attr&&Lhe.includes(n))&&(r[n]=e[n])})),r}var Whe=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function $he(e,t,n){return(e-t)/(n-t)}function Ghe(e,t,n,r){var o=$he(t,n,r),i={};switch(e){case"rtl":i.right="".concat(100*o,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(100*o,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(100*o,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(100*o,"%"),i.transform="translateX(-50%)"}return i}function Khe(e,t){return Array.isArray(e)?e[t]:e}var Yhe=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"];function Jhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jhe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zhe=a.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.value,i=e.valueIndex,u=e.onStartMove,l=e.style,c=e.render,s=e.dragging,d=e.onOffsetChange,f=e.onChangeComplete,p=wre(e,Yhe),v=a.useContext(Whe),h=v.min,g=v.max,m=v.direction,y=v.disabled,b=v.keyboard,w=v.range,_=v.tabIndex,k=v.ariaLabelForHandle,C=v.ariaLabelledByForHandle,E=v.ariaValueTextFormatterForHandle,O=v.styles,S=v.classNames,x="".concat(r,"-handle"),j=function(e){y||u(e,i)},D=Ghe(m,o,h,g),A=a.createElement("div",Xhe({ref:t,className:I()(x,bw(bw({},"".concat(x,"-").concat(i+1),w),"".concat(x,"-dragging"),s),S.handle),style:Xhe(Xhe(Xhe({},D),l),O.handle),onMouseDown:j,onTouchStart:j,onKeyDown:function(e){if(!y&&b){var t=null;switch(e.which||e.keyCode){case Bhe.LEFT:t="ltr"===m||"btt"===m?-1:1;break;case Bhe.RIGHT:t="ltr"===m||"btt"===m?1:-1;break;case Bhe.UP:t="ttb"!==m?1:-1;break;case Bhe.DOWN:t="ttb"!==m?-1:1;break;case Bhe.HOME:t="min";break;case Bhe.END:t="max";break;case Bhe.PAGE_UP:t=2;break;case Bhe.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),d(t,i))}},onKeyUp:function(e){switch(e.which||e.keyCode){case Bhe.LEFT:case Bhe.RIGHT:case Bhe.UP:case Bhe.DOWN:case Bhe.HOME:case Bhe.END:case Bhe.PAGE_UP:case Bhe.PAGE_DOWN:null==f||f()}},tabIndex:y?null:Khe(_,i),role:"slider","aria-valuemin":h,"aria-valuemax":g,"aria-valuenow":o,"aria-disabled":y,"aria-label":Khe(k,i),"aria-labelledby":Khe(C,i),"aria-valuetext":null==(n=Khe(E,i))?void 0:n(o),"aria-orientation":"ltr"===m||"rtl"===m?"horizontal":"vertical"},p));return c&&(A=c(A,{index:i,prefixCls:r,value:o,dragging:s})),A})),Qhe=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"];function ege(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tge=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,o=e.onStartMove,i=e.onOffsetChange,u=e.values,l=e.handleRender,c=e.draggingIndex,s=wre(e,Qhe),d=a.useRef({});return a.useImperativeHandle(t,(function(){return{focus:function(e){var t;null==(t=d.current[e])||t.focus()}}})),a.createElement(a.Fragment,null,u.map((function(e,t){return a.createElement(Zhe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ege(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ege(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:function(e){e?d.current[t]=e:delete d.current[t]},dragging:c===t,prefixCls:n,style:Khe(r,t),key:t,value:e,valueIndex:t,onStartMove:o,onOffsetChange:i,render:l},s))})))}));function nge(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function rge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ige(e){var t=e.prefixCls,n=e.style,r=e.children,o=e.value,i=e.onClick,u=a.useContext(Whe),l=u.min,c=u.max,s=u.direction,d=u.includedStart,f=u.includedEnd,p=u.included,v="".concat(t,"-text"),h=Ghe(s,o,l,c);return a.createElement("span",{className:I()(v,bw({},"".concat(v,"-active"),p&&d<=o&&o<=f)),style:oge(oge({},h),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){i(o)}},r)}function age(e){var t=e.prefixCls,n=e.marks,r=e.onClick,o="".concat(t,"-mark");return n.length?a.createElement("div",{className:o},n.map((function(e){var t=e.value,n=e.style,i=e.label;return a.createElement(ige,{key:t,prefixCls:o,style:n,value:t,onClick:r},i)}))):null}function uge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cge(e){var t=e.prefixCls,n=e.value,r=e.style,o=e.activeStyle,i=a.useContext(Whe),u=i.min,l=i.max,c=i.direction,s=i.included,d=i.includedStart,f=i.includedEnd,p="".concat(t,"-dot"),v=s&&d<=n&&n<=f,h=lge(lge({},Ghe(c,n,u,l)),"function"==typeof r?r(n):r);return v&&(h=lge(lge({},h),"function"==typeof o?o(n):o)),a.createElement("span",{className:I()(p,bw({},"".concat(p,"-active"),v)),style:h})}function sge(e){var t=e.prefixCls,n=e.marks,r=e.dots,o=e.style,i=e.activeStyle,u=a.useContext(Whe),l=u.min,c=u.max,s=u.step,d=a.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),r&&null!==s)for(var t=l;t<=c;)e.add(t),t+=s;return Array.from(e)}),[l,c,s,r,n]);return a.createElement("div",{className:"".concat(t,"-step")},d.map((function(e){return a.createElement(cge,{prefixCls:t,key:e,value:e,style:o,activeStyle:i})})))}function dge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pge(e){var t=e.prefixCls,n=e.style,r=e.start,o=e.end,i=e.index,u=e.onStartMove,l=e.replaceCls,c=a.useContext(Whe),s=c.direction,d=c.min,f=c.max,p=c.disabled,v=c.range,h=c.classNames,g="".concat(t,"-track"),m=$he(r,d,f),y=$he(o,d,f),b=function(e){!p&&u&&u(e,-1)},w={};switch(s){case"rtl":w.right="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%");break;case"btt":w.bottom="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;case"ttb":w.top="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;default:w.left="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%")}var _=l||I()(g,bw(bw({},"".concat(g,"-").concat(i+1),null!==i&&v),"".concat(t,"-track-draggable"),u),h.track);return a.createElement("div",{className:_,style:fge(fge({},w),n),onMouseDown:b,onTouchStart:b})}function vge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gge(e){var t=e.prefixCls,n=e.style,r=e.values,o=e.startPoint,i=e.onStartMove,u=a.useContext(Whe),l=u.included,c=u.range,s=u.min,d=u.styles,f=u.classNames,p=a.useMemo((function(){if(!c){if(0===r.length)return[];var e=null!=o?o:s,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],i=0;i<r.length-1;i+=1)n.push({start:r[i],end:r[i+1]});return n}),[r,c,o,s]),v=null;return(f.tracks||d.tracks)&&(v=a.createElement(pge,{index:null,prefixCls:t,start:p[0].start,end:p[p.length-1].end,replaceCls:I()(f.tracks,"".concat(t,"-tracks")),style:d.tracks})),l?a.createElement(a.Fragment,null,v,p.map((function(e,r){var o=e.start,u=e.end;return a.createElement(pge,{index:r,prefixCls:t,style:hge(hge({},Khe(n,r)),d.track),start:o,end:u,key:r,onStartMove:i})}))):null}function mge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bge=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-slider":n,o=e.className,i=e.style,u=e.classNames,l=e.styles,c=e.disabled,s=void 0!==c&&c,d=e.keyboard,f=void 0===d||d,p=e.autoFocus,v=e.onFocus,h=e.onBlur,g=e.min,m=void 0===g?0:g,y=e.max,b=void 0===y?100:y,w=e.step,_=void 0===w?1:w,k=e.value,C=e.defaultValue,E=e.range,O=e.count,S=e.onChange,x=e.onBeforeChange,j=e.onAfterChange,D=e.onChangeComplete,A=e.allowCross,R=void 0===A||A,F=e.pushable,P=void 0!==F&&F,M=e.draggableTrack,T=e.reverse,N=e.vertical,B=e.included,V=void 0===B||B,L=e.startPoint,z=e.trackStyle,U=e.handleStyle,H=e.railStyle,q=e.dotStyle,W=e.activeDotStyle,$=e.marks,G=e.dots,K=e.handleRender,Y=e.tabIndex,J=void 0===Y?0:Y,X=e.ariaLabelForHandle,Z=e.ariaLabelledByForHandle,Q=e.ariaValueTextFormatterForHandle,ee=WI(a.useState(!1),2),te=ee[0],ne=ee[1],re=a.useRef(),oe=a.useRef(),ie=a.useMemo((function(){return N?T?"ttb":"btt":T?"rtl":"ltr"}),[T,N]),ae=a.useMemo((function(){return isFinite(m)?m:0}),[m]),ue=a.useMemo((function(){return isFinite(b)?b:100}),[b]),le=a.useMemo((function(){return null!==_&&_<=0?1:_}),[_]),ce=a.useMemo((function(){return"boolean"==typeof P?!!P&&le:P>=0&&P}),[P,le]),se=a.useMemo((function(){return Object.keys($||{}).map((function(e){var t=$[e],n={value:Number(e)};return t&&"object"===mw(t)&&!a.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"==typeof t})).sort((function(e,t){return e.value-t.value}))}),[$]),de=function(e,t,n,r,o,i){var u=a.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),l=a.useCallback((function(r){if(null!==n){var o=e+Math.round((u(r)-e)/n)*n,i=function(e){return(String(e).split(".")[1]||"").length},a=Math.max(i(n),i(t),i(e)),l=Number(o.toFixed(a));return e<=l&&l<=t?l:null}return null}),[n,e,t,u]),c=a.useCallback((function(o){var i=u(o),a=r.map((function(e){return e.value}));null!==n&&a.push(l(o)),a.push(e,t);var c=a[0],s=t-e;return a.forEach((function(e){var t=Math.abs(i-e);t<=s&&(c=e,s=t)})),c}),[e,t,r,n,u,l]),s=function(o,i,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof i){var c,d=o[a],f=d+i,p=[];r.forEach((function(e){p.push(e.value)})),p.push(e,t),p.push(l(d));var v=i>0?1:-1;"unit"===u?p.push(l(d+v*n)):p.push(l(f)),p=p.filter((function(e){return null!==e})).filter((function(e){return i<0?e<=d:e>=d})),"unit"===u&&(p=p.filter((function(e){return e!==d})));var h="unit"===u?d:f;c=p[0];var g=Math.abs(c-h);if(p.forEach((function(e){var t=Math.abs(e-h);t<g&&(c=e,g=t)})),void 0===c)return i<0?e:t;if("dist"===u)return c;if(Math.abs(i)>1){var m=gw(o);return m[a]=c,s(m,i-v,a,u)}return c}return"min"===i?e:"max"===i?t:void 0},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e[n],i=s(e,t,n,r);return{value:i,changed:i!==o}},f=function(e){return null===i&&0===e||"number"==typeof i&&e<i};return[c,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e.map(c),u=a[n],l=s(a,t,n,r);if(a[n]=l,!1===o){var p=i||0;n>0&&a[n-1]!==u&&(a[n]=Math.max(a[n],a[n-1]+p)),n<a.length-1&&a[n+1]!==u&&(a[n]=Math.min(a[n],a[n+1]-p))}else if("number"==typeof i||null===i){for(var v=n+1;v<a.length;v+=1)for(var h=!0;f(a[v]-a[v-1])&&h;){var g=d(a,1,v);a[v]=g.value,h=g.changed}for(var m=n;m>0;m-=1)for(var y=!0;f(a[m]-a[m-1])&&y;){var b=d(a,-1,m-1);a[m-1]=b.value,y=b.changed}for(var w=a.length-1;w>0;w-=1)for(var _=!0;f(a[w]-a[w-1])&&_;){var k=d(a,-1,w-1);a[w-1]=k.value,_=k.changed}for(var C=0;C<a.length-1;C+=1)for(var E=!0;f(a[C+1]-a[C])&&E;){var O=d(a,1,C+1);a[C+1]=O.value,E=O.changed}}return{value:a[n],values:a}}]}(ae,ue,le,se,R,ce),fe=WI(de,2),pe=fe[0],ve=fe[1],he=WI(_W(C,{value:k}),2),ge=he[0],me=he[1],ye=a.useMemo((function(){var e=null==ge?[]:Array.isArray(ge)?ge:[ge],t=WI(e,1)[0],n=null===ge?[]:[void 0===t?ae:t];if(E){if(n=gw(e),O||void 0===ge){var r=O>=0?O+1:2;for(n=n.slice(0,r);n.length<r;){var o;n.push(null!==(o=n[n.length-1])&&void 0!==o?o:ae)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=pe(e)})),n}),[ge,E,ae,O,pe]),be=a.useRef(ye);be.current=ye;var we=function(e){return E?e:e[0]},_e=function(e){var t=gw(e).sort((function(e,t){return e-t}));S&&!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r.has(t))return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var a=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],o[u],a))return!1;return!0}if(t&&o&&"object"===mw(t)&&"object"===mw(o)){var l=Object.keys(t);return l.length===Object.keys(o).length&&l.every((function(n){return e(t[n],o[n],a)}))}return!1}(e,t)}(t,be.current,!0)&&S(we(t)),me(t)},ke=function(){null==j||j(we(be.current)),null==D||D(we(be.current))},Ce=function(e,t,n,r,o,i,u,l,c){var s=WI(a.useState(null),2),d=s[0],f=s[1],p=WI(a.useState(-1),2),v=p[0],h=p[1],g=WI(a.useState(n),2),m=g[0],y=g[1],b=WI(a.useState(n),2),w=b[0],_=b[1],k=a.useRef(null),C=a.useRef(null);a.useEffect((function(){-1===v&&y(n)}),[n,v]),a.useEffect((function(){return function(){document.removeEventListener("mousemove",k.current),document.removeEventListener("mouseup",C.current),document.removeEventListener("touchmove",k.current),document.removeEventListener("touchend",C.current)}}),[]);var E=function(e,t){m.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&f(t),y(e),u(e))},O=function(e,t){if(-1===e){var n=w[0],a=w[w.length-1],u=r-n,l=o-a,s=t*(o-r);s=Math.max(s,u),s=Math.min(s,l);var d=i(n+s);s=d-n;var f=w.map((function(e){return e+s}));E(f)}else{var p=(o-r)*t,v=gw(m);v[e]=w[e];var h=c(v,p,e,"dist");E(h.values,h.value)}},S=a.useRef(O);S.current=O;var x=a.useMemo((function(){var e=gw(n).sort((function(e,t){return e-t})),t=gw(m).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?m:n}),[n,m]);return[v,d,x,function(r,o,i){r.stopPropagation();var a=i||n,u=a[o];h(o),f(u),_(a);var c=nge(r),s=c.pageX,d=c.pageY,p=function(n){n.preventDefault();var r,i=nge(n),a=i.pageX,u=i.pageY,l=a-s,c=u-d,f=e.current.getBoundingClientRect(),p=f.width,v=f.height;switch(t){case"btt":r=-c/v;break;case"ttb":r=c/v;break;case"rtl":r=-l/p;break;default:r=l/p}S.current(o,r)},v=function(e){e.preventDefault(),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",p),document.removeEventListener("touchend",v),document.removeEventListener("touchmove",p),k.current=null,C.current=null,h(-1),l()};document.addEventListener("mouseup",v),document.addEventListener("mousemove",p),document.addEventListener("touchend",v),document.addEventListener("touchmove",p),k.current=p,C.current=v}]}(oe,ie,ye,ae,ue,pe,_e,ke,ve),Ee=WI(Ce,4),Oe=Ee[0],Se=Ee[1],xe=Ee[2],je=Ee[3],De=function(e,t){if(!s){var n=0,r=ue-ae;ye.forEach((function(t,o){var i=Math.abs(e-t);i<=r&&(r=i,n=o)}));var o=gw(ye);o[n]=e,E&&!ye.length&&void 0===O&&o.push(e),null==x||x(we(o)),_e(o),t&&je(t,n,o)}},Ae=WI(a.useState(null),2),Re=Ae[0],Fe=Ae[1];a.useEffect((function(){var e;if(null!==Re){var t=ye.indexOf(Re);t>=0&&(null==(e=re.current)||e.focus(t))}Fe(null)}),[Re]);var Ie=a.useMemo((function(){return(!M||null!==le)&&M}),[M,le]),Pe=function(e,t){je(e,t),null==x||x(we(be.current))},Me=a.useCallback((function(e){e?ne(!0):-1===Oe&&ne(!1)}),[Oe]),Te=-1!==Oe;a.useEffect((function(){var e;if(!Te){var t=ye.lastIndexOf(Se);null==(e=re.current)||e.focus(t)}}),[Te]);var Ne=a.useMemo((function(){return gw(xe).sort((function(e,t){return e-t}))}),[xe]),Be=WI(a.useMemo((function(){return E?[Ne[0],Ne[Ne.length-1]]:[ae,Ne[0]]}),[Ne,E,ae]),2),Ve=Be[0],Le=Be[1];a.useImperativeHandle(t,(function(){return{focus:function(){re.current.focus(0)},blur:function(){var e=document.activeElement;oe.current.contains(e)&&(null==e||e.blur())}}})),a.useEffect((function(){var e;p&&(null==(e=re.current)||e.focus(0))}),[]);var ze=a.useMemo((function(){return{min:ae,max:ue,direction:ie,disabled:s,keyboard:f,step:le,included:V,includedStart:Ve,includedEnd:Le,range:E,tabIndex:J,ariaLabelForHandle:X,ariaLabelledByForHandle:Z,ariaValueTextFormatterForHandle:Q,styles:l||{},classNames:u||{}}}),[ae,ue,ie,s,f,le,V,Ve,Le,E,J,X,Z,Q,l,u]);return a.createElement(Whe.Provider,{value:ze},a.createElement("div",{ref:oe,className:I()(r,o,bw(bw(bw(bw({},"".concat(r,"-disabled"),s),"".concat(r,"-vertical"),N),"".concat(r,"-horizontal"),!N),"".concat(r,"-with-marks"),se.length)),style:i,onMouseDown:function(e){e.preventDefault();var t,n=oe.current.getBoundingClientRect(),r=n.width,o=n.height,i=n.left,a=n.top,u=n.bottom,l=n.right,c=e.clientX,s=e.clientY;switch(ie){case"btt":t=(u-s)/o;break;case"ttb":t=(s-a)/o;break;case"rtl":t=(l-c)/r;break;default:t=(c-i)/r}De(pe(ae+t*(ue-ae)),e)},onMouseEnter:function(){return Me(!0)},onMouseMove:function(){return Me(!0)},onMouseLeave:function(){return Me(!1)}},a.createElement("div",{className:I()("".concat(r,"-rail"),null==u?void 0:u.rail),style:yge(yge({},H),null==l?void 0:l.rail)}),a.createElement(gge,{prefixCls:r,style:z,values:Ne,startPoint:L,onStartMove:Ie?Pe:null}),a.createElement(sge,{prefixCls:r,marks:se,dots:G,style:q,activeStyle:W}),te&&a.createElement(tge,{ref:re,prefixCls:r,style:U,values:xe,draggingIndex:Oe,onStartMove:Pe,onOffsetChange:function(e,t){if(!s){var n=ve(ye,e,t);null==x||x(we(ye)),_e(n.values),Fe(n.value)}},onFocus:v,onBlur:h,handleRender:K,onChangeComplete:ke}),a.createElement(age,{prefixCls:r,marks:se,onClick:De})))}));var wge=u.a.forwardRef((function(e,t){var n=e.disabled,r=e.prefixCls,o=e.character,i=e.characterRender,a=e.index,l=e.count,c=e.value,s=void 0===c?0:c,d=e.hoverValue,f=void 0===d?0:d,p=e.allowHalf,v=e.focused,h=e.onHover,g=e.onClick,m=null==f?s:f,y=a+1,b=new Set([r]);0===m&&0===a&&v?b.add("".concat(r,"-focused")):p&&m+.5>=y&&m<y?(b.add("".concat(r,"-half")),b.add("".concat(r,"-active")),v&&b.add("".concat(r,"-focused"))):(y<=m?b.add("".concat(r,"-full")):b.add("".concat(r,"-zero")),y===m&&v&&b.add("".concat(r,"-focused"))),y>s&&f>=y&&b.add("".concat(r,"-waiting"));var w="function"==typeof o?o(e):o,_=u.a.createElement("li",{className:I()(Array.from(b)),ref:t},u.a.createElement("div",{onClick:n?null:function(e){g(e,a)},onKeyDown:n?null:function(e){e.keyCode===Bhe.ENTER&&g(e,a)},onMouseMove:n?null:function(e){h(e,a)},role:"radio","aria-checked":m>a?"true":"false","aria-posinset":a+1,"aria-setsize":l,tabIndex:n?-1:0},u.a.createElement("div",{className:"".concat(r,"-first")},w),u.a.createElement("div",{className:"".concat(r,"-second")},w)));return i&&(_=i(_,e)),_}));var _ge=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function kge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cge=u.a.forwardRef((function(e,t){var n,r=e.prefixCls,o=void 0===r?"ant".concat("-rate"):r,i=e.className,l=e.defaultValue,c=e.value,s=e.count,d=void 0===s?5:s,f=e.allowHalf,p=void 0!==f&&f,v=e.allowClear,h=void 0===v||v,g=e.character,m=void 0===g?"★":g,y=e.characterRender,b=e.disabled,w=e.direction,_=void 0===w?"ltr":w,k=e.tabIndex,C=void 0===k?0:k,E=e.autoFocus,O=e.onHoverChange,S=e.onChange,x=e.onFocus,j=e.onBlur,D=e.onKeyDown,A=e.onMouseLeave,R=wre(e,_ge),F=WI((n=a.useRef({}),[function(e){return n.current[e]},function(e){return function(t){n.current[e]=t}}]),2),P=F[0],M=F[1],T=u.a.useRef(null),N=function(){var e;b||null==(e=T.current)||e.focus()};u.a.useImperativeHandle(t,(function(){return{focus:N,blur:function(){var e;b||null==(e=T.current)||e.blur()}}}));var B=WI(_W(l||0,{value:c}),2),V=B[0],L=B[1],z=WI(_W(null),2),U=z[0],H=z[1],q=function(e,t){var n,r,o,i,a="rtl"===_,u=e+1;if(p){var l=P(e),c=(r=function(e){var t,n,r=e.ownerDocument,o=r.body,i=r&&r.documentElement,a=e.getBoundingClientRect();return t=a.left,n=a.top,{left:t-=i.clientLeft||o.clientLeft||0,top:n-=i.clientTop||o.clientTop||0}}(n=l),o=n.ownerDocument,i=o.defaultView||o.parentWindow,r.left+=function(e){var t=e.pageXOffset,n="scrollLeft";if("number"!=typeof t){var r=e.document;"number"!=typeof(t=r.documentElement[n])&&(t=r.body[n])}return t}(i),r.left),s=l.clientWidth;(a&&t-c>s/2||!a&&t-c<s/2)&&(u-=.5)}return u},W=function(e){L(e),null==S||S(e)},$=WI(u.a.useState(!1),2),G=$[0],K=$[1],Y=WI(u.a.useState(null),2),J=Y[0],X=Y[1],Z=function(e,t){var n=q(t,e.pageX);n!==U&&(X(n),H(null)),null==O||O(n)},Q=function(e){b||(X(null),H(null),null==O||O(void 0)),e&&(null==A||A(e))},ee=function(e,t){var n=q(t,e.pageX),r=!1;h&&(r=n===V),Q(),W(r?0:n),H(r?n:null)};u.a.useEffect((function(){E&&!b&&N()}),[]);var te=Array.from({length:d}).fill(0).map((function(e,t){return u.a.createElement(wge,{ref:M(t),index:t,count:d,disabled:b,prefixCls:"".concat(o,"-star"),allowHalf:p,hoverValue:J,value:V,onClick:ee,onHover:Z,key:e||t,character:m,characterRender:y,focused:G})})),ne=I()(o,i,bw(bw({},"".concat(o,"-disabled"),b),"".concat(o,"-rtl"),"rtl"===_));return u.a.createElement("ul",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kge(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:ne,onMouseLeave:Q,tabIndex:b?-1:C,onFocus:b?null:function(){K(!0),null==x||x()},onBlur:b?null:function(){K(!1),null==j||j()},onKeyDown:b?null:function(e){var t=e.keyCode,n="rtl"===_,r=V;t===Bhe.RIGHT&&r<d&&!n?(W(r+=p?.5:1),e.preventDefault()):t===Bhe.LEFT&&r>0&&!n||t===Bhe.RIGHT&&r>0&&n?(W(r-=p?.5:1),e.preventDefault()):t===Bhe.LEFT&&r<d&&n&&(W(r+=p?.5:1),e.preventDefault()),null==D||D(e)},ref:T,role:"radiogroup"},qhe(R,{aria:!0,data:!0,attr:!0})),te)}));function Ege(){return u.a.createElement("div",{className:"lakex-table-form-empty"},"(".concat(Lw("空"),")"))}var Oge=function(e){return e.IMAGE="image",e.FILE="file",e}(Oge||{}),Sge=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e}(Sge||{}),xge=Is.defineToken("UploadContribution"),jge=Object.defineProperty,Dge=Object.getOwnPropertyDescriptor,Age=function(e,t,n,r){for(var o,i=r>1?void 0:r?Dge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jge(t,n,i),i},Rge=function(){return Ew((function e(){_w(this,e)}),[{key:"getUploader",value:function(){if(this._uploader)return this._uploader;var e=this.uploadProvider.getContributions(),t=e[e.length-1];return this._uploader=t.registerUpload(),this._uploader}}])}();function Fge(e,t,n){return t=dk(t),sk(e,Ige()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Ige(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ige=function(){return!!e})()}Age([yd(xge)],Rge.prototype,"uploadProvider",2),Rge=Age([Gs()],Rge);var Pge=Object.defineProperty,Mge=Object.getOwnPropertyDescriptor,Tge=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pge(t,n,i),i},Nge=function(e){function t(){var e;return _w(this,t),(e=Fge(this,t,arguments))._onDidChange=e._register(new Lk),e.onDidChange=e._onDidChange.event,e._fileMap={},e}return vk(t,e),Ew(t,[{key:"beforeUpload",value:(r=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"init",value:function(){this.uploadTask=this.taskService.createQueueTask({name:this.name})}},{key:"uploadFile",value:(n=UC(jk.mark((function e(t,n){var r,o=this;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=(null==t?void 0:t.uid)||qw(),(r=this._uploadRegistry.getUploader()).checkSize&&r.checkSize(t,this.code),e.prev=3,e.next=6,this.beforeUpload(t);case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error(e.t0),v.a.error(Lw("文件读取失败，请重新上传")),this._onDidChange.emit({status:Sge.ERROR,file:t}),e.abrupt("return");case 14:if(r.upload){e.next=16;break}return e.abrupt("return");case 16:r.upload(t,this.type,(function(e){e.status===Sge.RUNNING&&e.percent?n.onProcess(e.percent):e.status===Sge.SUCCESS?n.onSuccess():e.status===Sge.ERROR&&n.onError(),o._onDidChange.emit(e)}));case 17:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:"addFile",value:function(e){var t=this;return e.uid=(null==e?void 0:e.uid)||qw(),this._fileMap[e.uid]=e,this.uploadTask.addJob(e.uid,function(){var e=UC(jk.mark((function e(n){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.uploadFile(t._fileMap[n.jobId],n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this.uploadTask.destroy()}}]);var n,r}(bk);function Bge(e,t,n){return t=dk(t),sk(e,Vge()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Vge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vge=function(){return!!e})()}Tge([Ks(EF)],Nge.prototype,"taskService",2),Tge([Ks(lk)],Nge.prototype,"configuration",2),Tge([Ks(Rge)],Nge.prototype,"_uploadRegistry",2),Tge([Ms()],Nge.prototype,"init",1),Tge([Ts()],Nge.prototype,"destroy",1),Nge=Tge([$s()],Nge);var Lge=Object.defineProperty,zge=Object.getOwnPropertyDescriptor,Uge=function(e){function t(){var e;return _w(this,t),(e=Bge(this,t,arguments)).name=Lw("图片上传任务"),e.type=Oge.IMAGE,e.maxSizeCode="max_single_image_size",e}return vk(t,e),Ew(t,[{key:"beforeUpload",value:function(e){var t=this;return new Promise((function(n,r){var o=new FileReader;o.addEventListener("load",(function(r){var o=function(){t._onDidChange.emit({status:Sge.RUNNING,file:e}),n(e)};if(r.target){var i=new Image;i.src=r.target.result,i.onload=function(){e.width=i.width,e.height=i.height,o()},i.onerror=function(t){console.error("图片预处理失败",t),n(e)}}else o()}),!1),o.addEventListener("error",(function(){r(e)})),o.readAsDataURL(e)}))}}])}(Nge);function Hge(e,t,n){return t=dk(t),sk(e,qge()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function qge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qge=function(){return!!e})()}Uge=function(e,t,n,r){for(var o,i=r>1?void 0:r?zge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Lge(t,n,i),i}([Gs()],Uge);var Wge=Object.defineProperty,$ge=Object.getOwnPropertyDescriptor,Gge=function(e){function t(){var e;return _w(this,t),(e=Hge(this,t,arguments)).name=Lw("附件上传任务"),e.type=Oge.FILE,e.maxSizeCode="max_single_file_size",e}return vk(t,e),Ew(t)}(Nge);Gge=function(e,t,n,r){for(var o,i=r>1?void 0:r?$ge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wge(t,n,i),i}([Gs()],Gge);var Kge=Is.defineToken("ImageContribution"),Yge=Object.defineProperty,Jge=Object.getOwnPropertyDescriptor,Xge=function(e,t,n,r){for(var o,i=r>1?void 0:r?Jge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yge(t,n,i),i},Zge=function(){return Ew((function e(){_w(this,e)}),[{key:"getProvider",value:function(){var e=this.imageProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerImage()}}])}();Xge([yd(Kge)],Zge.prototype,"imageProvider",2),Zge=Xge([Gs()],Zge);var Qge=Object.defineProperty,eme=Object.getOwnPropertyDescriptor,tme=function(e,t,n,r){for(var o,i=r>1?void 0:r?eme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qge(t,n,i),i},nme=function(){return Ew((function e(){_w(this,e)}),[{key:"_provider",get:function(){return this._imageRegistry.getProvider()}},{key:"getExts",value:function(){var e;return(null==(e=this._provider)?void 0:e.getExts)?this._provider.getExts():xie.IMAGE_EXT.join(",")}},{key:"tryGetWebp",value:function(e,t,n){var r;return(null==(r=this._provider)?void 0:r.tryGetWebp)?this._provider.tryGetWebp(e,t,n):e}},{key:"getRenderUrl",value:function(e,t,n){var r;return(null==(r=this._provider)?void 0:r.getRenderUrl)?this._provider.getRenderUrl(e,t,n):e}},{key:"getThumbnailUrl",value:function(e,t,n,r){var o;return(null==(o=this._provider)?void 0:o.getThumbnailUrl)?this._provider.getThumbnailUrl(e,t,n,r):e}}])}();tme([Ks(Zge)],nme.prototype,"_imageRegistry",2),nme=tme([Gs()],nme);var rme=dd().contribution(Kge).register(Zge).register(nme),ome=Object.defineProperty,ime=Object.getOwnPropertyDescriptor,ame=function(e,t,n,r){for(var o,i=r>1?void 0:r?ime(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ome(t,n,i),i},ume=function(){return Ew((function e(){_w(this,e)}),[{key:"initConfiguration",value:function(){this._configuration.registerConfiguration({id:"upload",type:"object",title:"上传",properties:{image:{type:"object",properties:{accept:{type:"string",description:"图片可接受的格式"}}},file:{type:"object",properties:{accept:{type:"string",description:"文件可接受的格式"}}}}}),this._configuration.registerDefaultValue({"upload.image.accept":this._imageService.getExts(),"upload.file.accept":this._fileService.getExts()})}},{key:"getAccept",value:function(e){return e===Oge.IMAGE?this._configuration.getValue("upload.image.accept"):e===Oge.FILE?this._configuration.getValue("upload.file.accept"):void 0}},{key:"uploadImage",value:function(e){return this.imageUploadTask.addFile(e)}},{key:"uploadFile",value:function(e){return this.fileUploadTask.addFile(e)}}])}();ame([Ks(lk)],ume.prototype,"_configuration",2),ame([Ks(Pie)],ume.prototype,"_fileService",2),ame([Ks(nme)],ume.prototype,"_imageService",2),ame([Ks(Gge)],ume.prototype,"fileUploadTask",2),ame([Ks(Uge)],ume.prototype,"imageUploadTask",2),ume=ame([Gs()],ume);var lme=dd().contribution(xge).register(Rge).register(ume).register(Gge).register(Uge),cme=function(e){var t=e.onRetry,n=e.onRemove;return u.a.createElement("div",{className:"lakex-table-file-upload-error"},u.a.createElement(oue,{className:"remove-file-icon",type:"Delete",onClick:n}),Lw("上传失败"),u.a.createElement("div",{className:"re-upload-file",onClick:t},Lw("重新上传")))};function sme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sme(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fme=function(e){var t,n=e.file,r=e.list,o=void 0===r?[]:r,i=e.type,a=void 0===i?"file":i,l=e.readonly,c=e.onRemove,s=void 0===c?function(){}:c,d=yre(pie),f=yre(Pie),p=yre(nme),v=n.src;if(!v)return null;if("file"===a){var h=null==f?void 0:f.getFileKey(n);h&&(t=function(e){return u.a.createElement(uue,dme({ext:h},e))})}else v=(null==p?void 0:p.getThumbnailUrl(v,n.width,n.height,150))||v,t=function(e){return u.a.createElement("img",dme({loading:"lazy",src:v},e))};return u.a.createElement("div",{className:I()("lakex-table-file-item"),"data-id":n.uid},u.a.createElement("div",{className:"lakex-table-file-".concat(a)},t&&u.a.createElement(t,{className:"lakex-table-file-item-image",size:120}),u.a.createElement("div",{className:"lakex-table-file-actions"},u.a.createElement(oue,{type:"Preview",onClick:function(e){var t={};"image"===a?t={list:o,index:o.findIndex((function(e){return e.src===n.src}))}:"file"===a&&(t={size:n.size}),null==d||d.open(a,n.src,t)}}),u.a.createElement(oue,{type:"Download",onClick:function(){return e=n.src,void window.open(e,"_blank");var e}}),!l&&u.a.createElement(oue,{type:"Delete",onClick:function(){return s(n)}}))),u.a.createElement("div",{className:"lakex-table-file-name"},n.name))},pme=function(e){var t=e.percent;return u.a.createElement("div",{className:"lakex-table-file-uploading-file"},parseFloat(t.toFixed(2)),"%",u.a.createElement(h.a,{indicator:u.a.createElement(oue,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))},vme=function(){return u.a.createElement("div",{className:"lakex-table-file-uploading-file"},0,"%",u.a.createElement(h.a,{indicator:u.a.createElement(oue,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))};function hme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gme(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hme(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mme=function(e){var t=e.event,n=e.type,r=e.list,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onRetry,l=void 0===a?function(){}:a,c=aW({id:t.file.uid}),s=c.attributes,d=c.listeners,f=c.setNodeRef,p=c.transform,v=c.transition,h=c.isDragging,g={transform:Qae.Transform.toString(p),transition:v,zIndex:h?"100":"auto",opacity:h?.3:1},m=null;return t.status===Sge.SUCCESS?m=u.a.createElement(fme,{type:n,key:t.file.uid,file:t.file,list:r.filter((function(e){return e.status===Sge.SUCCESS})).map((function(e){return e.file})),onRemove:i}):t.status===Sge.RUNNING?m=u.a.createElement(pme,{key:t.file.uid,percent:t.percent||0}):t.status===Sge.PENDING?m=u.a.createElement(vme,null):t.status===Sge.ERROR&&(m=u.a.createElement(cme,{onRemove:function(){return i(t.file)},onRetry:function(){return l(t.file)}})),u.a.createElement("div",gme(gme({ref:f,style:gme({},g)},d),s),m)},yme=function(e){var t=e.id,n=e.type,r=e.list,o=e.onDragEnd,i=void 0===o?function(){}:o,l=e.onRemove,c=void 0===l?function(){}:l,s=e.onRetry,d=void 0===s?function(){}:s,f=Object(a.useMemo)((function(){return r.map((function(e){return gme(gme({},e),{},{id:e.file.uid||qw()})}))}),[r]),p=function(e){var t=WI(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(){var t=UC(jk.mark((function t(n){var o,i;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(null),o=n.active,i=n.over,o.id!==i.id&&e(i.id,o.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:VU(BU(TH,{activationConstraint:{distance:8}})),handleDragStart:function(e){r(e.active.id)},handleDragEnd:o}}(i),v=p.activeId,h=p.sensors,g=p.handleDragStart,m=p.handleDragEnd,y=Object(a.useMemo)((function(){return r.find((function(e){return e.file.uid===v}))}),[v,r]);return u.a.createElement("div",{id:t},u.a.createElement(kq,{sensors:h,collisionDetection:GU,onDragStart:g,onDragEnd:m},u.a.createElement(Qq,{items:f,strategy:Kq},u.a.createElement("div",{className:"lakex-table-file"},r.map((function(e,t){return u.a.createElement("div",{key:e.id||t,className:"lakex-table-file-item-wrap"},u.a.createElement(mme,{event:e,type:n,list:r,onRemove:c,onRetry:d}))})))),u.a.createElement(Lq,{dropAnimation:null},y?u.a.createElement(mme,{event:y,type:n,list:r,onRemove:c,onRetry:d}):null)))},bme=g.a.Dragger,wme=function(e){var t;return(null==(t=null==e?void 0:e.map)?void 0:t.call(e,(function(e){return{id:e.uid,status:Sge.SUCCESS,file:e}})))||[]},_me=function(e){var t=e.id,n=void 0===t?qw(32):t,r=e.type,o=void 0===r?Oge.IMAGE:r,i=e.files,l=e.className,c=e.onChange,s=void 0===c?function(){}:c,d=e.onCreate,f=void 0===d?function(){}:d,p=e.onRemove,h=void 0===p?function(){}:p,y=e.onOrderChange,b=void 0===y?function(){}:y,w=Gae((function(e){s(e)}),300),_=Object(a.useRef)(null),k=Tre(),C=yre(ume),E=null==C?void 0:C.getAccept(o),O=WI(Object(a.useState)(wme(i)),2),S=O[0],x=O[1],j=Object(a.useRef)(wme(i)),D=WI(Object(a.useState)(0===S.length),2),A=D[0],R=D[1];Zae((function(){var e=wme(i);x(e),j.current=e}),[i]);var F=function(e){e.status===Sge.ERROR&&v.a.error(e.message||Lw("上传失败，请重试"));var t=j.current,n=t.findIndex((function(t){return t.file.uid===e.file.uid}));n>-1?(e.id=e.file.uid,t[n]=e):t.push(e),e.status===Sge.SUCCESS&&f(e.file),j.current=t,M(t)};Zae((function(){null==C||C.imageUploadTask.onDidChange((function(e){e.file.uploadId===n&&F(e)})),null==C||C.fileUploadTask.onDidChange((function(e){e.file.uploadId===n&&F(e)}))}),[]);var P=Object(a.useCallback)((function(e){e.uploadId=n,"image"===o?null==C||C.uploadImage(e):"file"===o&&(null==C||C.uploadFile(e))}),[]),M=Object(a.useCallback)((function(e){var t=e.filter((function(e){return e.status===Sge.SUCCESS})).map((function(e){return e.file}));S.map((function(e){return e.file.uid})).join(",")!==t.map((function(e){return e.uid})).join(",")&&w(t),x(e),R(0===e.length),k()}),[S]),T=NC.isMobile?"lakex-table-file-manage-component-h5":"";return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:I()("lakex-table-file-manage-component",T,l)},u.a.createElement("div",{onClick:function(){var e;null==(e=_.current)||e.focus()},onPaste:function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=e.clipboardData)?void 0:t.files;if(n&&n.length){var r=Array.from(n);null==r||r.forEach((function(e){return P(e)}))}else v.a.error(Lw("剪贴板里没有文件可粘贴"))},className:"lakex-table-file-manage-component-upload"},u.a.createElement("input",{className:"lakex-table-file-manage-component-paste-container",ref:_}),u.a.createElement(bme,{showUploadList:!1,customRequest:function(e){return P(e.file)},accept:E,openFileDialogOnClick:!1,multiple:!0},u.a.createElement("div",{className:A?"lakex-table-file-manage-component-empty-content":"lakex-table-file-manage-component-content"},u.a.createElement(oue,{type:"EditorPaste",size:22}),u.a.createElement("span",{className:"lakex-table-file-manage-component-title"},Lw("直接粘贴或拖拽到这里")),u.a.createElement(g.a,{customRequest:function(e){return P(e.file)},accept:E,showUploadList:!1,multiple:!0},u.a.createElement(m.a,{className:"lakex-table-file-manage-component-upload-button"},u.a.createElement(oue,{className:"lakex-table-file-manage-component-plus-icon",type:"Add",size:18}),u.a.createElement("div",{className:"lakex-table-file-manage-component-button-title"},Lw("本地上传"))))))),!A&&u.a.createElement(yme,{type:o,list:S,onRemove:function(e){var t=gw(S),n=t.findIndex((function(t){return t.file.uid===e.uid}));n>-1&&(t.splice(n,1),j.current=t,M(t),h(e))},onRetry:function(e){P(e)},onDragEnd:function(e,t){var n=S.findIndex((function(e){return e.file.uid===t})),r=S.findIndex((function(t){return t.file.uid===e})),o=gw(S),i=WI(o.splice(n,1),1)[0];o.splice(r,0,i),j.current=o,M(o),zw((function(){b({targetUid:e,sourceUid:t})}))}})))};function kme(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Cme(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cme(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Cme(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Eme={};function Ome(e){var t;if(Eme[e])return Eme[e];var n=document.createElement("canvas"),r=null==(t=null==n?void 0:n.getContext)?void 0:t.call(n,"2d");if(!r)return 14*e.length;r.font="14px 'Chinese Quote', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif";var o=r.measureText(e).width;return Eme[e]=o,o}var Sme=function(){return Ew((function e(t){_w(this,e),this._tagSizeMap={},this._nameOverflowMap={},this._overflowMap={},this._numWidthBuffer=5,this._boxSize=t.boxSize,this._height=t.height,this._minWidth=t.minWidth,this._paddingLeft=t.paddingLeft,this._paddingRight=t.paddingRight,this._marginLeft=t.marginLeft,this._marginBottom=t.marginBottom,this._marginRight=t.marginRight,this._boxPaddingTop=t.boxPaddingTop,this._boxPaddingBottom=t.boxPaddingBottom,this._boxPaddingLeft=t.boxPaddingLeft,this._boxPaddingRight=t.boxPaddingRight,this._numWidth=t.numWidth}),[{key:"boxSize",get:function(){return this._boxSize}},{key:"getNamesKey",value:function(e){return e.join(":")}},{key:"calcOverflow",value:function(e,t){if(!t||0===t.length)return{count:0};var n=[],r=this._nameOverflowMap[this.getNamesKey(t)];if(null!=r)return this.setOverflow(e,r,t),r;r={count:0};var o,i=kme(t);try{for(i.s();!(o=i.n()).done;){var a=o.value,u=this._tagSizeMap[a];if(!u){var l=Ome(a);u={width:this._paddingLeft+this._marginLeft+l+this._paddingRight+this._marginRight,height:this._height+this._marginBottom,textWidth:l,text:a},this._tagSizeMap[a]=u}n.push(u)}}catch(e){i.e(e)}finally{i.f()}var c=this.getInnerBoxSize();if(1===t.length)n[0].width>c.width&&(r.ellipsis=[{index:0,width:c.width}]);else{for(var s=0,d=n[0].height,f=1,p=n.length,v=0,h={},g=0;g<n.length;g++){var m=n[g],y=s+m.width;if(y>c.width){var b=d+m.height;if(0===g){h[g]={row:f,useWidth:c.width,boxWidth:y},d=m.height;continue}if(b-c.height>10){v=g-1;break}h[g]={row:f+1,boxWidth:m.width},m.width>c.width&&(h[g].useWidth=c.width),f+=1,s=m.width,d=b,v=g}else h[g]={row:f,boxWidth:y},s=y,v=g}if(v>=0&&v!==p-1){var w=n[v],_=h[v];_.boxWidth+this._numWidth+this._numWidthBuffer>c.width&&(_.useWidth=w.width-(_.boxWidth-c.width)-this._numWidth-this._numWidthBuffer,_.useWidth<this._minWidth&&(v-=1)),r.count=p-(v+1)}r.ellipsis=[];for(var k=0;k<=v;k++){var C=h[k].useWidth;C&&r.ellipsis.push({index:k,width:C})}}return null!=r&&(this._nameOverflowMap[this.getNamesKey(t)]=r,this.setOverflow(e,r,t)),r}},{key:"getCacheKey",value:function(e,t){return e+":"+(null==t?void 0:t.join(":"))}},{key:"setOverflow",value:function(e,t,n){null==t||(this._overflowMap[this.getCacheKey(e,n)]=t)}},{key:"getOverflow",value:function(e,t){return this._overflowMap[this.getCacheKey(e,t)]}},{key:"getInnerBoxSize",value:function(){return{width:this._boxSize.width-this._boxPaddingLeft-this._boxPaddingRight,height:this._boxSize.height-this._boxPaddingTop-this._boxPaddingBottom}}},{key:"getCellOverflow",value:function(e,t){if(!e||!t||0===t.length)return{count:0};var n=this.getOverflow(e,t);return null==n&&(n=this.calcOverflow(e,t)),n||{count:0}}}])}(),xme=Is.defineToken("ToolbarServiceToken"),jme=Is.defineToken("ToolbarContribution"),Dme=function(e){return!!e.RenderComponent},Ame=function(e){return!!e.tooltip},Rme=function(e){return e.NORMAL="normal",e.LITE="lite",e}(Rme||{});function Fme(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ime(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ime(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ime(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pme=Object.defineProperty,Mme=Object.getOwnPropertyDescriptor,Tme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pme(t,n,i),i},Nme=function(){return Ew((function e(){_w(this,e),this._items=new Map,this._customItems=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=Fme(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerToolbar)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerRender",value:function(e){this._toolbarRender=e}},{key:"registerItem",value:function(e){if(Dme(e))this._registerCustomItem(e);else{if(!Ame(e))throw new Error("An invalid toolbar item!");this._registerNormalItem(e)}return e}},{key:"getToolbarItem",value:function(e){return this._items.get(e)}},{key:"getCustomItem",value:function(e){return this._customItems.get(e)}},{key:"getRender",value:function(){return this._toolbarRender}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.id,n=this.getToolbarItem(t),r=this.getCustomItem(t);n&&this._items.delete(t),r&&this._customItems.delete(t)}},{key:"hasToolbars",get:function(){return this._customItems.size>0||this._items.size>0}},{key:"_registerNormalItem",value:function(e){var t=e.id;if(this._items.has(t))throw new Error("A normal toolbar item is already registered with the '".concat(t,"'"));this._items.set(t,e)}},{key:"_registerCustomItem",value:function(e){var t=e.id;if(this._customItems.has(t))throw new Error("A custom toolbar item is already registered with the '".concat(t,"'"));this._customItems.set(t,e)}},{key:"destroy",value:function(){this._items.clear(),this._customItems.clear(),this._toolbarRender=null}}])}();Tme([yd(jme)],Nme.prototype,"toolbarPluginProvider",2),Tme([Ts()],Nme.prototype,"destroy",1),Nme=Tme([Gs()],Nme);var Bme=function(){},Vme=function(e){var t=e.id,n=e.isActive,r=e.isDisable,o=e.isShowIcon,i=e.isShowTitle,a=e.iconType,l=e.iconSize,c=e.titleFontSize,s=e.tooltipStr,d=e.onCommand;return u.a.createElement("button",{className:I()({"lakex-workbench-toolbar-button":!0,"lakex-workbench-toolbar-button-active":n,"lakex-workbench-toolbar-button-disable":r}),id:t,onClick:function(e){r||d(e)},tabIndex:-1},o&&a&&u.a.createElement(oue,{type:a,size:l}),i&&u.a.createElement("span",{className:"toolbar-button-title",style:{fontSize:c}},s))},Lme=function(e){var t=e.onCommand,n=void 0===t?Bme:t,r=e.id,o=e.tooltip,i=e.showTooltip,a=void 0!==i&&i,l=e.disable,c=e.active,s=e.showIcon,f=void 0===s||s,p=e.showTitle,v=void 0===p||p,h=e.icon,g=e.iconSize,m=void 0===g?16:g,y=e.titleFontSize,b=void 0===y?14:y,w=e.visible,_=void 0!==w&&w,k=Gw(l)?l():l,C=Gw(c)?c():c,E=Gw(f)?f():f,O=Gw(h)?h():h,S=Gw(v)?v():v,x=Gw(o)?o():o;return(Gw(_)?_():_)?a?u.a.createElement(d.a,{title:x},u.a.createElement("div",null,u.a.createElement(Vme,{id:r,isDisable:k,isActive:C,isShowIcon:E,isShowTitle:S,iconSize:m,iconType:O,tooltipStr:x,titleFontSize:b,onCommand:n}))):u.a.createElement(Vme,{id:r,isDisable:k,isActive:C,isShowIcon:E,isShowTitle:S,iconSize:m,iconType:O,tooltipStr:x,titleFontSize:b,onCommand:n}):null},zme=function(){return u.a.createElement("div",{className:"lakex-table-workbench-toolbar-btn lake-workbench-toolbar-divider"})},Ume=["RenderComponent"],Hme=["visible","onClick"];function qme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wme(e,t,n){return t=dk(t),sk(e,$me()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function $me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($me=function(){return!!e})()}var Gme=Object.defineProperty,Kme=Object.getOwnPropertyDescriptor,Yme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Kme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Gme(t,n,i),i},Jme=function(e){function t(){var e;return _w(this,t),(e=Wme(this,t,arguments))._$ref=u.a.createRef(),e._toolbarRef=u.a.createRef(),e._onChange=e._register(new Lk),e.onChange=e._onChange.event,e.Buttons=function(t){var n=t.buttons,r=t.mode;return Array.isArray(n)?u.a.createElement(u.a.Fragment,null,n.map((function(t,n){return u.a.createElement(u.a.Fragment,{key:n},e._renderButtonItem(t,r))}))):u.a.createElement(u.a.Fragment,null)},e}return vk(t,e),Ew(t,[{key:"init",value:function(){this._toolbarRegistry.init()}},{key:"getDom",value:function(){return this._$ref.current}},{key:"render",value:function(){var e=this._toolbarRegistry.getRender();return e?u.a.createElement("div",{className:"lakex-table-workbench-toolbar-container",style:{width:"100%"},ref:this._$ref},u.a.createElement(e,{ref:this._toolbarRef})):null}},{key:"rerender",value:function(){this._toolbarRef.current&&this._toolbarRef.current.refresh()}},{key:"filterVisibleButtons",value:function(e){var t=this;return e?e.filter((function(e){if("|"===e)return!0;var n=t._toolbarRegistry.getCustomItem(e);if(n)return!!(null==n?void 0:n.RenderComponent);var r=t._toolbarRegistry.getToolbarItem(e);return!!r&&(!!r.visible&&(Gw(r.visible)?r.visible():r.visible))})).filter((function(t,n){if("|"===t){if(!e[n-1])return!1;if(!e[n+1])return!1}return!0})):[]}},{key:"_renderButtonItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rme.NORMAL,n=this._toolbarRegistry.getCustomItem(e);if(n){var r=n.RenderComponent,o=wre(n,Ume);return u.a.createElement(r,{onCommand:function(e){var t;null==(t=o.onClick)||t.call(o,{target:e.currentTarget})}})}var i=this._toolbarRegistry.getToolbarItem(e);if(i){var a=i.visible,l=i.onClick,c=wre(i,Hme);return t===Rme.LITE&&(Vu(c.showTitle)&&(c.showTitle=!1),Vu(c.showTooltip)&&(c.showTooltip=!0)),u.a.createElement(Lme,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qme(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({visible:a,onCommand:function(e){null==l||l({target:e.currentTarget})}},c))}return"|"===e&&this._toolbarRegistry.hasToolbars?u.a.createElement(zme,null):null}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([]),this._$ref.current=null,this._toolbarRef.current=null}}])}(bk);Yme([Ks(Nme)],Jme.prototype,"_toolbarRegistry",2),Yme([Ts()],Jme.prototype,"destroy",1),Jme=Yme([Gs({token:xme})],Jme);var Xme=Object.defineProperty,Zme=Object.getOwnPropertyDescriptor,Qme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Zme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xme(t,n,i),i},eye=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this._toolbarRegistry.init()}}])}();Qme([Ks(Nme)],eye.prototype,"_toolbarRegistry",2),eye=Qme([Gs({contrib:[sre]})],eye);var tye=dd().contribution(jme).register(eye).register(Jme).register(Nme);function nye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nye(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oye=Object.defineProperty,iye=Object.getOwnPropertyDescriptor,aye=function(e,t,n,r){for(var o,i=r>1?void 0:r?iye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oye(t,n,i),i},uye=1004,lye=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.zIndex=rye(rye({},this._renderZIndexService.zIndex),{},{mask:uye,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();function cye(e){return e&&!!e.placement&&!!e.origin}aye([Ks(Doe)],lye.prototype,"_renderZIndexService",2),aye([Ms()],lye.prototype,"init",1),lye=aye([Gs()],lye);var sye=function(e){return e.MODAL="modal",e.DRAWER="drawer",e}(sye||{}),dye=Is.defineToken("ModalServiceToken"),fye=Is.defineToken("ModalContribution");function pye(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vye(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function vye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hye=Object.defineProperty,gye=Object.getOwnPropertyDescriptor,mye=function(e,t,n,r){for(var o,i=r>1?void 0:r?gye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hye(t,n,i),i},yye=function(){return Ew((function e(){_w(this,e),this._modals=new Map,this._hasInit=!1}),[{key:"init",value:function(){var e;if(!this._hasInit){this._hasInit=!0;var t,n=pye(this._modalPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerModal)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.id;this._modals.has(t)&&this._modals.delete(t),this._modals.set(t,e)}},{key:"getModalItem",value:function(e){return this._modals.get(e)}},{key:"getModalItems",value:function(){return gw(this._modals.values())}}])}();function bye(e,t,n){return t=dk(t),sk(e,wye()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function wye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wye=function(){return!!e})()}mye([yd(fye)],yye.prototype,"_modalPluginProvider",2),yye=mye([Gs()],yye);var _ye=Object.defineProperty,kye=Object.getOwnPropertyDescriptor,Cye=function(e,t,n,r){for(var o,i=r>1?void 0:r?kye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_ye(t,n,i),i},Eye=function(e){function t(){var e;return _w(this,t),(e=bye(this,t,arguments))._$scrollContainer=null,e._hasScrollListener=!1,e._scrolledCount=0,e._onScrollEmitter=e._register(new Lk),e._onScroll=e._onScrollEmitter.event,e._scrolledDistance=0,e._scrollHandler=function(t){e._getScrollDistance(t),e._scrolledDistance>10&&e._onScrollEmitter.emit()},e}return vk(t,e),Ew(t,[{key:"attachScrollContainer",value:function(e){e&&(this._$scrollContainer=e)}},{key:"attachScrollListener",value:function(e,t){var n=this;this._hasScrollListener||this._addGlobalScrollListener();var r=this._onScroll((function(){e()}));return this._scrolledCount++,{destroy:function(){n._scrolledCount--,r.destroy(),n._scrolledCount<=0&&n._removeGlobalScrollListener()}}}},{key:"_getScrollDistance",value:function(e){var t=Math.abs(e.deltaX),n=Math.abs(e.deltaY);this._scrolledDistance=n||t}},{key:"_addGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.addEventListener("wheel",this._scrollHandler,{passive:!0})}},{key:"_removeGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.removeEventListener("wheel",this._scrollHandler)}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function Oye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oye(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xye(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jye(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function jye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Cye([Ts()],Eye.prototype,"destroy",1),Eye=Cye([Gs()],Eye);var Dye=function(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;var t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((function(e){var n=t.getPropertyValue(e);return"auto"===n||"scroll"===n||"overlay"===n}))};function Aye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(!e)return[];var n,r=xye(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=document.querySelectorAll(o);if(i.length>0){var a,u=xye(i);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=null==l?void 0:l.getBoundingClientRect().toJSON();t.push({dom:l,rect:c})}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}var Rye=function(e){var t=Object(a.useRef)(null),n=yre(Eye),r=WI(Object(a.useState)((function(){return Aye(e.skipElements)})),2),o=r[0],i=r[1];Zae((function(){n.attachScrollContainer(t.current);var r=n.attachScrollListener((function(t){"block"===e.scrollStrategy?(null==t||t.preventDefault(),null==t||t.stopPropagation()):"close"===e.scrollStrategy&&e.onScrollAutoClose()}));return function(){r.destroy()}}),[]),Zae((function(){var t,n=[],r=fu((function(){var t=Aye(e.skipElements);i(t)}),200),a=e.skipElements||[];if("donut"===e.shape&&a.length>0){if(a){var u,l=xye(a);try{for(l.s();!(u=l.n()).done;){var c=u.value,s=document.querySelectorAll(c);if(0!==s.length){var d,f=xye(s);try{var p=function(){var e=d.value,t=new ResizeObserver(fu((function(t){var n=t[0];if(n.contentRect){var r=n.target.getBoundingClientRect().toJSON(),a=o.findIndex((function(t){return t.dom===e}));if(null==a)return;o[a]={dom:e,rect:r},i(o)}}),200));t.observe(e),n.push({resizer:t,dom:e})};for(f.s();!(d=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}}}}catch(e){l.e(e)}finally{l.f()}}t=function(e){var t,n=[],r=xye(e);try{var o=function(){var e=t.value,r=document.querySelector(e);if(!r)return 1;for(var o=r.parentElement;o;)Dye(o)&&(n.find((function(e){return e!==o}))||n.push(o)),o=o.parentElement};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return n.push(document),n}(a);var v,h=xye(t);try{for(h.s();!(v=h.n()).done;){v.value.addEventListener("scroll",r)}}catch(e){h.e(e)}finally{h.f()}}return function(){if(n.length>0)for(var e=0,o=n;e<o.length;e++){var i=o[e];i.resizer.unobserve(i.dom),i.resizer.disconnect()}if(t){var a,u=xye(t);try{for(u.s();!(a=u.n()).done;){a.value.removeEventListener("scroll",r)}}catch(e){u.e(e)}finally{u.f()}}}}),[e.shape]);var l,c,s,d=function(t){e.maskClick&&e.maskClick(),t.preventDefault()},f=Sye({zIndex:e.zIndex,opacity:e.visible?1:0},e.style&&e.style);if(!e.enable)return null;if("donut"===e.shape&&o){var p=(l=o.map((function(e){return e.rect})),c=document.body.getBoundingClientRect(),s=[],l.forEach((function(e,t){if(0===t)e.top>0&&e.top>c.top&&s.push({top:0,left:e.left,width:e.width,height:e.top}),e.left>0&&e.left>c.left&&s.push({top:0,left:0,width:e.left,height:Math.max(c.bottom,c.height)}),e.right>0&&e.right<c.right&&s.push({top:0,left:e.left+e.width,width:c.right-e.right,height:Math.max(c.bottom,c.height)});else{var n=l[t-1].bottom;t>0&&e.top-n>3&&s.push({top:n,left:e.left,width:e.width,height:e.top-n})}t===l.length-1&&e.bottom>0&&e.bottom<c.bottom&&s.push({top:e.bottom,left:0,width:c.width,height:Math.max(c.bottom,c.height)-e.bottom})})),l[0].bottom<0&&s.push({top:0,left:0,width:c.width,height:c.height}),s);return u.a.createElement(u.a.Fragment,null,p.map((function(e,t){return u.a.createElement("div",{key:t,className:"lakex-workbench-modal-donut-mask",style:Sye(Sye({},f),e),onClick:d,onContextMenu:function(e){return e.preventDefault(),!1}})})))}return u.a.createElement("div",{ref:t,className:"lakex-workbench-modal-mask",style:f,onClick:d,onContextMenu:function(e){return e.preventDefault(),!1}})};function Fye(e){return Yw(e)&&e.endsWith("%")}function Iye(e){return Yw(e)&&e.startsWith("calc(")}function Pye(e){return Fye(e)||Iye(e)}function Mye(e){return!function(e){return er(e)&&1===e.nodeType&&!Ci(e)}(e)}function Tye(e,t){if(!e)return 0;if(Iye(e)){if((e=e.replace(/^(\s|calc\()+|(\s|\))+$/g,"")).includes("%")){var n=WI(e.split("%"),2),r=n[0],o=n[1];return cre(parseInt(r,10)/100*t+o)}}else if(Fye(e)){var i=e.replace("%","");return parseInt(i,10)/100*t}return 0}function Nye(e){return u.a.createElement(jX,{maxWidth:e.maxWidth,minWidth:480,defaultSize:{width:e.width,height:"auto"},enable:{top:!1,left:!0,bottom:!1,right:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},handleStyles:{left:{zIndex:1010}},onResizeStart:function(t,n,r){var o;null==(o=e.onResizeStart)||o.call(e,t,n,r)},onResizeStop:function(t,n,r,o){var i;try{localStorage.setItem("lakex-table-modal-resize-width",String(r.offsetWidth))}catch(e){console.error(e)}null==(i=e.onResizeStop)||i.call(e,t,n,r,o)}},e.children)}function Bye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bye(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lye=function(e){var t,n,r,o=e.id,i=yre(dye),l=Tre(),c=((null==i?void 0:i.visibleList)||[]).includes(o),s=WI(Object(a.useState)(!1),2),d=s[0],f=s[1],p=Object(a.useRef)(null),v=WI(Kae(),4),h=v[0],g=v[1],m=v[2],y=v[3],b=Object(a.useRef)(null),w=Object(a.useRef)(null);Zae((function(){var e=i.onChange((function(){var e=Date.now();w.current=e,l()}));return function(){e.destroy()}}),[]),$ae("esc",(function(t){i.isDisableEscClose(o)||(t.preventDefault(),i.close(e.id))})),Object(a.useLayoutEffect)((function(){p.current?c?g(p.current):m(p.current):m()}),[p,c]),Zae((function(){var e,t=i.onUpdatePosition((function(t){t.modalId===o&&(clearTimeout(e),e=zw((function(){var e,t=null==(e=p.current)?void 0:e.getBoundingClientRect();y(t||null)})))}));return function(){t.destroy(),clearTimeout(e)}}),[]);var _=Object(a.useMemo)((function(){if(i.getModalProps(e.id).mode!==sye.DRAWER)return i.getPosition(e.id,h)||{left:0,top:0}}),[e.id,h,null==h?void 0:h.height,null==h?void 0:h.width,w.current]);if(!c)return null;var k=i.getModalProps(e.id),C={left:null!==(t=null==_?void 0:_.left)&&void 0!==t?t:"initial",top:null!==(n=null==_?void 0:_.top)&&void 0!==n?n:"initial"},E={},O=(null==(r=null==k?void 0:k.position)?void 0:r.placement)||"";if(cye(k.position)&&"cover"===O){var S=Mye(k.position.origin)?k.position.origin:k.position.origin.getBoundingClientRect();C.width=null==S?void 0:S.width,C.height=null==S?void 0:S.height,E.width="100%",E.height="100%"}var x=function(){var t;null==(t=b.current)||t.onCloseByClickAwayOrScroll(),i.close(e.id)},j=e.RenderComponent,D=null!=k.hasMask?k.hasMask:e.showMask,A=u.a.createElement("div",{className:"lakex-workbench-modal-layout",style:Vye({zIndex:e.zIndex},k.mode===sye.MODAL&&_&&C)},u.a.createElement("div",{className:"lakex-workbench-modal-content",ref:p,style:Vye({},E)},u.a.createElement(j,Vye(Vye({},k),{},{ref:b})))),R=i.maskSkipElements(o)||[];return u.a.createElement("div",{className:I()("lakex-workbench-modal-container",bw(bw(bw({hasAnimation:e.hasAnimation,hasMask:D},"lakex-workbench-modal-container-mode-".concat(k.mode),!0),"lakex-workbench-modal-container-placement-".concat(O),!0),"lakex-workbench-modal-container-resizing",d)),style:{zIndex:e.zIndex,visibility:_||k.mode!==sye.MODAL?"visible":"hidden"}},u.a.createElement(Rye,{shape:R.length>0?"donut":"flat",skipElements:R,zIndex:e.maskZIndex,scrollStrategy:e.scrollStrategy,style:e.maskStyle,maskClick:x,onScrollAutoClose:x,enable:!i.isDisableClickAwayClose(o),visible:D}),k.mode===sye.DRAWER?u.a.createElement(Nye,{width:i.getWidth(),onResizeStart:function(){f(!0)},onResizeStop:function(){var t;f(!1),null==(t=e.onResize)||t.call(e)}},A):A)},zye=function(e){var t=e.initialState.message,n=void 0===t?"":t,r=yre(dye),o=WI(Object(a.useState)(!1),2),i=o[0],l=o[1];return Zae((function(){l(!0);var e=setTimeout((function(){r.close("tooltip")}),2e3);return function(){clearTimeout(e)}}),[n]),u.a.createElement("div",{className:I()("lakex-table-tooltip",{"lakex-table-tooltip-active":i,"lakex-table-tooltip-placement-top":!0})},u.a.createElement("div",{className:"lakex-table-tooltip-message"},n))},Uye=Is.defineToken("ViewportServiceToken"),Hye=Object.defineProperty,qye=Object.getOwnPropertyDescriptor,Wye=function(e,t,n,r){for(var o,i=r>1?void 0:r?qye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Hye(t,n,i),i},$ye=function(){return Ew((function e(){_w(this,e)}),[{key:"getPosition",value:function(e,t){if(Bu(t)||Bu(t.width)||Bu(t.height))return null;var n,r=null;return!(n=e)||Zw(n.left)||Zw(n.top)?cye(e)&&(r=this._calculateAutoPlacementPosition(e,t)):r=this._calculateAbsolutePosition(e,t),(null==r?void 0:r.top)&&Number(r.top)<0&&(r.top=0),(null==r?void 0:r.left)&&Number(r.left)<0&&(r.left=0),!r||Nu(r.left)||Nu(r.top)?(console.warn("modal size has conflicts with the placement in this origin and viewport"),null):r}},{key:"_calculateAbsolutePosition",value:function(e,t){var n={left:e.left,top:e.top},r=this._getBoundingBox(),o=r.width,i=r.height,a=(null==t?void 0:t.height)||0,u=(null==t?void 0:t.width)||0;if(Pye(e.left)){var l=Tye(e.left,o);n.left=l-Math.floor(u/2)}if(Pye(e.top)){var c=Tye(e.top,i);n.top=c-Math.floor(a/2)}return n}},{key:"_calculateAutoPlacementPosition",value:function(e,t){if(!t)return null;var n=Mye(e.origin)?e.origin:e.origin.getBoundingClientRect(),r=this._getBoundingBox(),o=(null==t?void 0:t.width)||0,i=(null==t?void 0:t.height)||0,a=e.placement,u=this.getRenderRangeBox(n,a,i,o);if(this._rectIsContain(u,r))return{left:u.left,top:u.top};var l={left:u.left,top:u.top},c=u.top+u.height>r.bottom,s=u.top<r.top;if(c||s){var d=this._autoLayoutWithMinimalOffset(n.top,i,[r.top,r.bottom]);l.top=d}var f=u.left+u.width>r.right;if(u.left<r.left||f){var p=this._autoLayoutWithMinimalOffset(n.left,o,[r.left,r.right]);l.left=p}return l}},{key:"_autoLayoutWithMinimalOffset",value:function(e,t,n){var r=WI(n,2),o=r[0],i=r[1],a=e+t+5;return e>o&&a<i?e:e<o?e+=o-e:a>i?e-=a-i:0}},{key:"_getBoundingBox",value:function(){return this._viewportService.getViewportRect()}},{key:"getRenderRangeBox",value:function(e,t,n,r){var o={left:0,top:0,width:r,height:n};if("top"===t&&(o.top=e.top-n-5),"bottom"!==t&&"bottomRight"!==t&&"bottomLeft"!==t||(o.top=e.top+e.height+5),"top"===t||"bottom"===t){o.left=e.left-0}if("left"===t&&(o.left=e.left-r-5),"bottomRight"===t&&(o.left=e.left+e.width-r),"bottomLeft"===t&&(o.left=e.left),"right"!==t&&"rightTop"!==t||(o.left=e.left+e.width+5),"rightTop"===t&&(o.top=e.top),"left"===t||"right"===t){var i=Math.ceil((n-e.height)/2);o.top=e.top-i}return"cover"===t&&(o.left=e.left,o.top=e.top,o.width=r,o.height=n),o}},{key:"_rectIsContain",value:function(e,t){if(e.left<0||e.top<0)return!1;var n=[e.left,e.top,e.left+e.width,e.top+e.height],r=n[0],o=n[1],i=n[2],a=n[3],u=[t.left,t.top,t.left+t.width,t.top+t.height];return r>=u[0]&&o>=u[1]&&i<=u[2]&&a<=u[3]}}])}();Wye([Ks(Uye)],$ye.prototype,"_viewportService",2),$ye=Wye([Gs()],$ye);var Gye="lakex-workbench-global-modal-container";function Kye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kye(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jye(e,t,n){return t=dk(t),sk(e,Xye()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Xye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xye=function(){return!!e})()}var Zye=Object.defineProperty,Qye=Object.getOwnPropertyDescriptor,ebe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zye(t,n,i),i},tbe="lakex-table-modal-resize-width",nbe=function(e){function t(){var e;return _w(this,t),(e=Jye(this,t,arguments))._onBeforeClose=e._register(new Lk),e.onBeforeClose=e._onBeforeClose.event,e._onUpdatePosition=e._register(new Lk),e.onUpdatePosition=e._onUpdatePosition.event,e._visibleList=[],e._visibleListOpenArgs=new Map,e._toDestroyList=new kk,e._onChange=e._register(new Lk),e.onChange=e._onChange.event,e._onAppend=e._register(new Lk),e.onAppend=e._onAppend.event,e.getMaxWidth=function(){return e._configurationService.getValue("workbench.docContainer").offsetWidth},e.getWidth=function(){var t;if(localStorage.getItem(tbe))t=Number(localStorage.getItem(tbe));else{var n=globalThis.innerWidth;t=n>1440?720:n>1280?580:480}var r=e.getMaxWidth();return t>r?r:t},e}return vk(t,e),Ew(t,[{key:"init",value:function(){this._modalRegistry.init(),this._innerModalRegister()}},{key:"destroy",value:function(){this._toDestroyList.destroy()}},{key:"_innerModalRegister",value:function(){this._modalRegistry.registerItem({id:"tooltip",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:zye})}},{key:"showTooltip",value:function(e,t){this.open("tooltip",{position:t,initialState:{message:e}})}},{key:"confirm",value:function(e){var t=this._zIndexService.maxZIndex,n=e.type||"confirm",r=Yye(Yye({},e),{},{zIndex:t,getContainer:this.getContainer()});y.a[n](r)}},{key:"open",value:function(e,t){t&&this._visibleListOpenArgs.set(e,t),this._addVisible(e)}},{key:"close",value:function(e){this._removeVisible(e),this._visibleListOpenArgs.delete(e)}},{key:"getTopVisibleModalId",value:function(){return this._visibleList[this._visibleList.length-1]}},{key:"closeAll",value:function(){this._removeVisible()}},{key:"getPosition",value:function(e,t){var n,r=this._visibleListOpenArgs.get(e),o=null==(n=this._modalRegistry.getModalItem(e))?void 0:n.position,i=(null==r?void 0:r.position)||o;return i?this._modalLayoutService.getPosition(i,t):null}},{key:"emitUpdatePosition",value:function(e){this._onUpdatePosition.emit({modalId:e})}},{key:"getModalProps",value:function(e){var t,n=this._modalRegistry.getModalItem(e),r=this._visibleListOpenArgs.get(e)||{},o=Yye(Yye({},n),r);return o.mode!==sye.DRAWER||(null==(t=o.position)?void 0:t.placement)||(o.position={placement:"right"}),Yye(Yye({},o),{},{mode:o.mode||sye.MODAL,position:o.position||{},initialState:o.initialState||{}})}},{key:"render",value:function(){var e=this,t=this._modalRegistry.getModalItems();return t?t.map((function(t){return e.getRenderModal(t)})):null}},{key:"getRenderModal",value:function(e){var t=e.id,n=e.RenderComponent,r=e.hasMask,o=e.mode,i=void 0===o?sye.MODAL:o,a=e.zIndex,l=void 0===a?"modalFromToolbar":a,s=e.scrollStrategy,d=void 0===s?"block":s,f=e.maskStyle,p=e.hasAnimation,v=void 0!==p&&p,h=this._zIndexService.zIndex[l],g=this._zIndexService.zIndex.mask,m=u.a.createElement(Lye,{id:t,key:t,mode:i,showMask:r,maskStyle:f||{},zIndex:h,maskZIndex:g,scrollStrategy:d,hasAnimation:v,RenderComponent:n,maxWidth:this.getMaxWidth(),onResize:function(){var t;null==(t=e.onResize)||t.call(e)}});return c.a.createPortal(m,this.getContainer())}},{key:"visibleList",get:function(){return this._visibleList}},{key:"isModalVisible",value:function(e){return this._visibleList.includes(e)}},{key:"isDisableEscClose",value:function(e){var t;return!!(null==(t=this.getModalProps(e))?void 0:t.disableEscClose)}},{key:"isDisableClickAwayClose",value:function(e){var t;return!!(null==(t=this.getModalProps(e))?void 0:t.disableClickAwayClose)}},{key:"maskSkipElements",value:function(e){var t;return null==(t=this.getModalProps(e))?void 0:t.maskSkipElements}},{key:"getContainer",value:function(){var e=this._configurationService.getValue("modal.customModalContainer")||document.body,t=e.querySelector(".".concat(Gye));if(!t){var n=document.createElement("div");n.classList.add(Gye),e.appendChild(n),t=n}return t}},{key:"_addVisible",value:function(e){if(this._isValidModal(e)){var t=this._visibleList,n=gw(new Set(t.concat(e)));this._notify(n)}}},{key:"_removeVisible",value:function(e){var t=this;if(!e||this._isValidModal(e)){var n=this._visibleList,r=[];if(e){if(!this._modalRegistry.getModalItem(e))return void console.error("The Compo: ".concat(e," is not registered"));r=n.filter((function(t){return t!==e})),this._onBeforeClose.emit({modalId:e})}else n.forEach((function(e){t._onBeforeClose.emit({modalId:e})}));this._notify(r)}}},{key:"_isValidModal",value:function(e){return Boolean(this._modalRegistry.getModalItem(e))}},{key:"_notify",value:function(e){this._visibleList=e,this._onChange.emit(this._visibleList)}},{key:"emitAppendEvent",value:function(e){return this._onAppend.emit(e)}}])}(bk);ebe([Ks(yye)],nbe.prototype,"_modalRegistry",2),ebe([Ks(lye)],nbe.prototype,"_zIndexService",2),ebe([Ks($ye)],nbe.prototype,"_modalLayoutService",2),ebe([Ks(lk)],nbe.prototype,"_configurationService",2),ebe([Ts()],nbe.prototype,"destroy",1),nbe=ebe([Gs({token:dye,contrib:[sre]})],nbe);var rbe=Object.defineProperty,obe=Object.getOwnPropertyDescriptor,ibe=function(e,t,n,r){for(var o,i=r>1?void 0:r?obe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rbe(t,n,i),i},abe=function(){return Ew((function e(){_w(this,e)}),[{key:"getRenderViewPort",value:function(){return this._renderContext.$root.getBoundingClientRect()}},{key:"getViewportRect",value:function(){var e=document.documentElement.getBoundingClientRect();return new DOMRect(e.x,0,e.width,e.height)}}])}();ibe([Ks(doe)],abe.prototype,"_renderContext",2),abe=ibe([Gs({token:Uye})],abe);var ube=dd().contribution(fye).register(nbe).register(yye).register(Eye).register($ye).register(lye).register(abe),lbe=function(e){var t=yre(yye),n=yre(dye);return Zae((function(){null==t||t.registerItem(e),null==n||n.emitAppendEvent(e.id)}),[]),u.a.createElement(u.a.Fragment,null)};function cbe(e,t,n){return t=dk(t),sk(e,sbe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function sbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sbe=function(){return!!e})()}var dbe=Object.defineProperty,fbe=Object.getOwnPropertyDescriptor,pbe=function(e){function t(){var e;return _w(this,t),(e=cbe(this,t,arguments))._key=(new Date).getTime(),e}return vk(t,e),Ew(t,[{key:"getRenderContainerId",value:function(){return"lakex-table-render-container-"+this._key}},{key:"setContainerEl",value:function(e){this._$containerEl=e}},{key:"getContainerEl",value:function(){return this._$containerEl}}])}(bk);function vbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vbe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vbe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?fbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dbe(t,n,i),i}([Gs()],pbe);var gbe=Object.defineProperty,mbe=Object.getOwnPropertyDescriptor,ybe=function(e,t,n,r){for(var o,i=r>1?void 0:r?mbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gbe(t,n,i),i},bbe=1004,wbe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.zIndex=hbe(hbe({},this._renderZIndexService.zIndex),{},{mask:bbe,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();function _be(e,t,n){return t=dk(t),sk(e,kbe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function kbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kbe=function(){return!!e})()}ybe([Ks(Doe)],wbe.prototype,"_renderZIndexService",2),ybe([Ms()],wbe.prototype,"init",1),wbe=ybe([Gs()],wbe);var Cbe=function(e){function t(e){var n;return _w(this,t),(n=_be(this,t,[e]))._$renderRef=u.a.createRef(),n._$workbenchRef=u.a.createRef(),n._toDestroyCollection=[],n.state={isRenderReady:!1,isWorkbenchReady:!1,key:+new Date},n}return vk(t,e),Ew(t,[{key:"componentDidMount",value:function(){var e=this;this.props.attachRender(this._$renderRef.current);var t=this.props.container;this.toolbarService=t.get(xme),this.modalService=t.get(dye),this._workbenchService=t.get(pbe),this._workbenchService.setContainerEl(this._$workbenchRef.current),this.setState({isRenderReady:!0}),this.props.initWorkbench(),this.setState({isWorkbenchReady:!0}),this.modalService.onAppend((function(t){e.forceUpdate()})),t.get(jA).log({type:xA.workbench,action:"workbenchReady"})}},{key:"componentWillUnmount",value:function(){this._toDestroyCollection.forEach((function(e){return e.destroy()}))}},{key:"_getWorkbenchRender",value:function(){return this.state.isWorkbenchReady?u.a.createElement(u.a.Fragment,null,u.a.createElement(yue,{onError:this.props.onError},this.toolbarService.render()),u.a.createElement(yue,{onError:this.props.onError},this.modalService.render())):null}},{key:"render",value:function(){var e,t=this.props.container;return u.a.createElement(u.a.Fragment,null,u.a.createElement(yue,{onError:this.props.onError},u.a.createElement(b.a,{prefixCls:"ant"},u.a.createElement(mre,{value:{container:t,onError:this.props.onError},key:this.state.key},u.a.createElement("div",{className:"lakex-table-workbench-container",ref:this._$workbenchRef},this._getWorkbenchRender(),u.a.createElement(yue,{onError:this.props.onError},u.a.createElement("div",{id:null==(e=this._workbenchService)?void 0:e.getRenderContainerId(),className:"lakex-table-render-container",ref:this._$renderRef,onContextMenu:function(e){return e.preventDefault()}})))))))}}])}(u.a.PureComponent);function Ebe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Obe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Obe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Obe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Sbe(e,t,n){return t=dk(t),sk(e,xbe()?Reflect.construct(t,[],dk(e).constructor):t.apply(e,n))}function xbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xbe=function(){return!!e})()}var jbe=function(e){function t(e){var n;return _w(this,t),(n=Sbe(this,t)).render=null,n._options=e||{},n.$root=e.$root,n.container=e.container,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n._mountComponent(),n._logger.log({type:xA.workbench,action:"workbenchInited",data:null}),n}return vk(t,e),Ew(t,[{key:"attachRender",value:function(e){this._options.renderService.initDom(e,this.$root)}},{key:"initWorkbench",value:function(){this._workbenchRegistry.init(),this.container.get(Aw).status=Dw.WorkbenchInited}},{key:"destroy",value:function(){var e;null==(e=this.render)||e.destroy(),this._workbenchRegistry.destroy(),this.unregisterPlugins(this.container),this._unMountComponent()}},{key:"_loadCoreServices",value:function(){this.container.register({token:hre,useValue:{$root:this.$root}}),this._workbenchRegistry=this.container.get(vre)}},{key:"_logger",get:function(){return this.container.get(jA)}},{key:"_mountComponent",value:function(){var e=this;c.a.render(u.a.createElement(Cbe,{key:+new Date,container:this.container,attachRender:function(t){return e.attachRender(t)},initWorkbench:function(){return e.initWorkbench()},onError:this._options.onError}),this.$root)}},{key:"_unMountComponent",value:function(){c.a.unmountComponentAtNode(this.$root)}},{key:"_registerContribs",value:function(e){if(e){var t,n=Ebe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(SC),Dbe=dd().contribution(sre).register(wbe).register(pbe).register(vre),Abe=function(){return Ew((function e(){_w(this,e),this.kernelContainer=gd.createChild(),this.renderContainer=this.kernelContainer.createChild(),this.workbenchContainer=this.renderContainer.createChild()}),[{key:"init",value:function(){this._loadGlobalServices(),this._loadKernelServices(),this._loadRenderServices(),this._loadWorkbenchServices()}},{key:"destroy",value:function(){this._unloadGlobalServices(),this._unloadKernelServices(),this._unloadRenderServices(),this._unloadWorkbenchServices()}},{key:"_loadGlobalServices",value:function(){this.kernelContainer.load(KP,!0),this.kernelContainer.load(PA,!0),this.kernelContainer.load(iC,!0)}},{key:"_unloadGlobalServices",value:function(){this.kernelContainer.unload(KP),this.kernelContainer.unload(PA),this.kernelContainer.unload(iC)}},{key:"_loadKernelServices",value:function(){this.kernelContainer.load(aO,!0),this.kernelContainer.load(wC,!0),this.kernelContainer.load(OF,!0),this.kernelContainer.load(WA,!0),this.kernelContainer.load(Wx,!0),this.kernelContainer.load(qR,!0),this.kernelContainer.load(hR,!0),this.kernelContainer.load(cF,!0),this.kernelContainer.load(kA,!0)}},{key:"_unloadKernelServices",value:function(){this.kernelContainer.unload(aO),this.kernelContainer.unload(wC),this.kernelContainer.unload(OF),this.kernelContainer.unload(WA),this.kernelContainer.unload(Wx),this.kernelContainer.unload(qR),this.kernelContainer.unload(hR),this.kernelContainer.unload(cF),this.kernelContainer.unload(kA)}},{key:"_loadRenderServices",value:function(){this.renderContainer.load(GP,!0),this.renderContainer.load(TP,!0),this.renderContainer.load(Mie,!0),this.renderContainer.load(rme,!0),this.renderContainer.load(Mae,!0),this.renderContainer.load(lme,!0),this.renderContainer.load(gae,!0)}},{key:"_unloadRenderServices",value:function(){this.renderContainer.unload(GP),this.renderContainer.unload(TP),this.renderContainer.unload(Mie),this.renderContainer.unload(rme),this.renderContainer.unload(Mae),this.renderContainer.unload(lme),this.renderContainer.unload(gae)}},{key:"_loadWorkbenchServices",value:function(){this.workbenchContainer.load(Dbe,!0),this.workbenchContainer.load(tye,!0),this.workbenchContainer.load(ube,!0)}},{key:"_unloadWorkbenchServices",value:function(){this.workbenchContainer.unload(Dbe),this.workbenchContainer.unload(tye),this.workbenchContainer.unload(ube)}}])}(),Rbe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e,t){this._options=t,this.kernelContainer=e.kernelContainer,this.renderContainer=e.renderContainer,this.workbenchContainer=e.workbenchContainer,this.configurationService=this.kernelContainer.get(lk),this._registerKernelConfig(t.kernelPlugins),this._registerRenderConfig(t.renderPlugins),this._registerWorkbenchConfig(t.workbenchPlugins),this._setInitConfigData(t.settings)}},{key:"_registerKernelConfig",value:function(e){this.configurationService.registerConfiguration({id:"development",type:"object",title:"开发配置",properties:{disableReactDevTools:{type:"boolean",description:"是否禁用 react 开发工具"}}}),this.configurationService.registerDefaultValue({"development.disableReactDevTools":!0}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerRenderConfig",value:function(e){this.renderContainer.get(hae).initConfiguration(),this.renderContainer.get(ume).initConfiguration(),this.configurationService.registerConfiguration({id:"render",type:"object",title:"渲染",properties:{noRecord:{type:"boolean",description:"不渲染 record 数据，表单提交编辑器不需要加载 record"},showFieldIcon:{type:"boolean",description:"是否展示字段 icon"},mode:{type:"string",description:"通用渲染模式",enum:Object.values(roe)},deferMode:{type:"string",description:"延迟渲染模式",enum:Object.values(ooe)},autoActive:{type:"boolean",description:"是否自动激活"}}}),this.configurationService.registerDefaultValue({"render.noRecord":!1,"render.showFieldIcon":!0,"render.mode":roe.NORMAL,"render.autoActive":!0,"render.deferMode":ooe.ASYNC_CONCURRENT}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerWorkbenchConfig",value:function(e){this.configurationService.registerConfiguration({id:"workbench",type:"object",title:"Workbench",properties:{toolbar:{type:"object",properties:{visible:{type:"boolean",description:"是否显示工具栏"}}},docContainer:{type:"object",description:"文档容器"}}}),this.configurationService.registerDefaultValue({"workbench.toolbar.visible":!0,"workbench.docContainer":this._options.$root}),this.configurationService.registerConfiguration({id:"modal",type:"object",title:"弹出窗",properties:{mode:{type:"string",description:"通用弹出层模式",enum:Object.values(sye)},customModalContainer:{type:"object",description:"自定义弹出层容器，类型为 HTMLElement | undefined"}}}),this.configurationService.registerDefaultValue({"modal.mode":sye.MODAL,"modal.customModalContainer":void 0}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_setInitConfigData",value:function(e){e&&this.configurationService.setValue(e)}},{key:"registerPluginConfiguration",value:function(e,t){e&&e.forEach((function(e){e.registerConfiguration&&e.registerConfiguration(t)}))}}])}();hd.config({lifecycle:Is.Lifecycle.singleton});var Fbe=function(){function e(){_w(this,e),this._destroy=!1,this._containerService=new Abe,this._configService=new Rbe,this._errors=[],this._reactErrors=[],this._onLoad=new Lk,this.onLoad=this._onLoad.event}return Ew(e,[{key:"$root",get:function(){return this._options.$root}},{key:"init",value:function(e){var t=this;this._options=e,Vw.setLanguage(e.lang),this._containerService.init(),this._loadCoreServices(),this._lifeService.status=Dw.Init,this._configService.init({kernelContainer:this._containerService.kernelContainer,renderContainer:this._containerService.renderContainer,workbenchContainer:this._containerService.workbenchContainer},e),this._configService.configurationService.getValue("development.disableReactDevTools")&&function(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===mw(t))for(var n=0,r=Object.entries(t);n<r.length;n++){var o=WI(r[n],2),i=o[0],a=o[1];t[i]="function"==typeof a?e:null}}(),this._lifeService.status=Dw.Configed,this.kernel=new lF({container:this._containerService.kernelContainer,plugins:this._filterPlugins(e.kernelPlugins),contribs:e.kernelContribs,settings:e.settings,data:e.data,onError:function(e,n){var r,o;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(o=(r=t._options).onError)||o.call(r,e,n)}}),this.render=new _ae({container:this._containerService.renderContainer,plugins:this._filterPlugins(e.renderPlugins),contribs:e.renderContribs,kernelService:this.kernel.kernelService,onError:function(e,n){var r,o;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(o=(r=t._options).onError)||o.call(r,e,n)}}),this.workbench=new jbe({$root:this.$root,container:this._containerService.workbenchContainer,plugins:this._filterPlugins(e.workbenchPlugins),contribs:e.workbenchContribs,renderService:this.render.renderService,onError:function(e,n){var r,o;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(o=(r=t._options).onError)||o.call(r,e,n)}}),this.logger.log({type:xA.core,action:"editorInited",data:null}),e.onDataLoaded&&this.kernel.onDataLoaded(e.onDataLoaded),e.onCollabUsersChange&&this.kernel.kernelService.onCollabUsersChange(e.onCollabUsersChange),this.kernel.onFinishExecuteCommand((function(e){var n,r;e.context.isRemote||null==(r=(n=t._options).onChange)||r.call(n)})),this._lifeService.when(Dw.Rendered,(function(){var t;null==(t=e.onRendered)||t.call(e)})),this._database=this._containerService.kernelContainer.get(L_),zw((function(){var n;t.kernel.start(),null==(n=e.onLoad)||n.call(e,t),t._onLoad.emit(t)}))}},{key:"readService",get:function(){return this._containerService.kernelContainer.get(oA)}},{key:"commandService",get:function(){return this._getKernelService(nR)}},{key:"tableId",get:function(){return this.readService.getTable().get("uuid")}},{key:"logger",get:function(){return this._containerService.kernelContainer.get(jA)}},{key:"themeManager",get:function(){return this._containerService.renderContainer.get(AP).getThemeManager()}},{key:"_loadCoreServices",value:function(){this._lifeService=this._containerService.kernelContainer.get(Aw)}},{key:"_filterPlugins",value:function(e){var t=this._options,n=t.disablePlugins,r=t.enablePlugins;return r?e.filter((function(e){return r.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):n?e.filter((function(e){return!n.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):e}},{key:"_getKernelService",value:function(e){var t,n;try{return this._containerService.kernelContainer.get(e)}catch(r){return console.warn("Kernel container not found:",e),null==(n=(t=this._options).onError)||n.call(t,r),null}}},{key:"getService",value:function(e){try{return this._containerService.workbenchContainer.get(e)}catch(t){console.warn("Workbench container not found:",e);try{return this._containerService.renderContainer.get(e)}catch(t){return console.warn("Render container not found:",e),this._getKernelService(e)}}}},{key:"updateSettings",value:function(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this._configService.configurationService.setValue(e))}},{key:"getContent",value:function(){return this.kernel.getContent()}},{key:"setContent",value:function(e){this.kernel.setContent(e)}},{key:"setRecords",value:function(e,t){t&&this._database.clear([ZS.table]),this.kernel.setRecords(e)}},{key:"setUsers",value:function(e){this.kernel.setUsers(e)}},{key:"isEmptyTable",value:function(){return!!this._destroy||(!this.readService||this.readService.isEmptyTable())}},{key:"destroy",value:function(){this._destroy=!0,this.kernel.destroy(),this.render.destroy(),this.workbench.destroy(),this._containerService.destroy()}}],[{key:"create",value:function(t){var n=new e;return n.init(t),n}}])}();Vw.setData({"$1 条记录":"$1 records","$1个筛选":"$1 filters","(空)":"(Empty)","YYYY年M月":"MM, YYYY","上一个":"Previous","上一张":"Previous","上一条记录":"Prev row","上传失败":"Upload failure","上传失败，请重试":"Upload failure, please retry","上传超时，请重试":"Upload timeout, please retry","上周":"Last week","上月":"Last month","下一个":"Next","下一张":"Next","下一条记录":"Next row","下周":"Next week","下月":"Next month","下载图片":"Download Picture","不包含":"Not contains","不存在对应字段":"There is no corresponding field","不存在对应选项":"There is no corresponding option","不展示":"None","不是":"is not","不等于":"Not equal to","不能与其他列重名":"Field name must be unique","中":"Middle","为空":"is empty","人员":"Mention","今天":"Today","从大到小":"9 → 1","从小到大":"1 → 9","任务流转一目了然":"Task flow is clear at a glance","休":"RD","低":"Low","你还未进行任何分组":"You haven't done any grouping yet","你还未进行任何排序":"You haven't done any sorting yet","你还未进行任何筛选":"You haven't done any filtering yet","保存":"Save","保持排序":"Keep sort","修改人":"Update people","修改分组":"Edit group","修改分组人员":"Edit group member","修改分组名称":"Edit group name","修改时间":"Update time","关闭弹窗 (ESC)":"Close modal (ESC)","具体日期":"Specific Date","农历及节假日":"Lunar Year & Holiday","分组":"Group","分组设置":"Group configs","切换视图":"Switch View","列名不能为空":"Field name must not empty","列类型":"Field type","创建人":"creator","创建时间":"Create time","删除":"Delete","删除分组":"Delete group","删除列":"Remove field","删除图片":"Remove Picture","删除日程":"Remove schedule","删除本条记录":"Remove current record","删除行":"Remove row","删除视图":"Remove view","删除记录":"Remove record","删除该条件":"Delete this condition","剪贴板里没有文件可粘贴":"There is no file in the clipboard to paste","副本":"Copy","包含":"Contains","包含一个":"has one of","包含所有":"has all of","升序":"Asc","单选":"Select","取消":"Cancel","取消分组":"Ungroup","取消排序后，可进行拖拽":"After unsorting, you can drag and drop","取消筛选":"Unfilter","可以快速新建一个单选列进行分组":"You can quickly create a select column for grouping","可搜索或新建选项":"Select an option or create one","合并为分组":"Merge into group","向上插入 {InputNumber} 行":"Insert {InputNumber} row above","向上插入记录":"Insert record above","向下插入 {InputNumber} 行":"Insert {InputNumber} row below","向下插入记录":"Insert record below","向右插入列":"Insert field right","向右插入记录":"Insert record right","向左插入列":"Insert field left","向左插入记录":"Insert record left","否":"Not","唯一数":"Unique","唯一数 $1":"Unique $1","唯一数占比":"Percent Unique","唯一数占比 $1":"Unique $1","图片":"Image","图片上传任务":"Image upload task","图片列表":"image list","基础":"Basis","复制":"Copy","复制列":"Copy column","复制成功":"Copy success","复制行":"Copy row","复制视图":"Copy view","复制记录":"Copy record","复制链接":"Copy link","复选框":"Checkbox","多选":"Multi-select","大于":"Greater than","大于等于":"Greater than or equal to","字段配置":"Field Setting","完成":"Finish","实际尺寸":"Actual size","封面效果":"Cover displays","封面来源":"Cover source","小于":"Less than","小于等于":"Less than or equal to","展开":"Expand","展开行":"Expand row","展开行（Space）":"Expand row（Space）","展开记录":"Expand record","展开详情":"Expand detail","已勾选":"Checked","已勾选 $1":"Checked $1","已勾选占比":"Percent Checked","已勾选占比 $1":"Checked $1","已填写 $1":"Filled $1","已填写占比":"Percent Filled","已填写占比 $1":"Filled $1","已填写数":"Filled","已存在该选项，不可重复创建！":"This option already exists","已选择 $1 个单元格":"$1 cells selected","平均值":"Average","平均值 $1":"Avg $1","并且":"And","开头不是":"Not Starts with","开头是":"Starts with","开始日期":"Start Date","当":"Where","当前处于保持排序状态，为您重新定位":"Re-locate when keep sort","当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问":"Current browser don't support access clipboard data, we recommend that you use the Chrome browser to visit","成功复制 $1 个单元格":"$1 cells copied","成功复制 $1 条记录":"$1 records copied","或者":"Or","手机号码":"Phone","按":"By","按以下选项进行分组":"Group by options","按以下选项进行排序":"Sort by the following options","按本列分组":"Group by current col","按本列筛选":"Filter by current col","排序":"Sort","排序设置":"Sort settings","搜索":"Search","搜索人员":"Search member","搜索选项":"Search option","放大":"Zoom out","数字":"Number","数字类型只能输入数字":"Number type can only enter numbers","数据表列名":"Field name","数据表已达最大行数限制":"Records in this table is over limits","文件读取失败，请重新上传":"File read failed, please re-upload","文本":"Text","文档已保存":"Document has been saved","新增一个日期列":"Create date type field","新增字段":"New field","新建分组":"New group","新建视图":"New view","新建选项":"New option","新建选项不能为空字符":"The new option cannot be an empty character","无封面":"No cover","无权访问当前视图":"Not authorized to access current view","日历视图":"Calendar View","日历配置":"Calendar Setting","日期":"Date","日期格式":"Date format","早于":"Before","时间范围 $1 天":"RNG $1 days","时间范围 $1 月":"RNG $1 months","时间范围（日）":"Date Range(days)","时间范围（月）":"Date Range(months)","明天":"Tomorrow","星期一":"Monday","星期三":"Wednesday","星期二":"Tuesday","星期五":"Friday","星期六":"Saturday","星期四":"Thursday","星期日":"Sunday","昨天":"Yesterday","是":"is","显示字段名":"Show column name","晚于":"After","暂无人员":"Empty","最大值":"Max","最大值 $1":"Max $1","最小值":"Min","最小值 $1":"Min $1","最早时间":"Earlist Date","最早时间 $1":"Earlist Date $1","最晚时间":"Lastest Date","最晚时间 $1":"Latest Date $1","未分组":"Ungrouped","未勾选":"Unchecked","未勾选 $1":"Unchecked $1","未勾选占比":"Percent Unchecked","未勾选占比 $1":"Unchecked $1","未命名日程":"Untitled schedule","未命名记录":"Untitled record","未填写 $1":"Empty $1","未填写占比":"Percent Empty","未填写占比 $1":"Empty $1","未填写数":"Empty","未搜索到结果":"No data","未来30天内":"Within the next 30 days","未来7天内":"within the next 7 days","本周":"This week","本地上传":"Local Upload","本月":"This month","本记录不属于该分组，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录因排序规则会移动，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录将被移动到新的排序位置":"Record moved","本记录将被移至新的分组":"Record moved","本记录将被过滤":"Record filtered","本记录已被筛选过滤，点击其他区域将隐藏该记录":"This record is no longer visible based on this view's filter, and will be hidden when you select another record","查找":"Search","查看视图需要编辑权限":"View current view requires edit permission","标题":"Title","标题展示":"Schedule title","正在处理粘贴内容...":"Processing pasted content...","求和":"Sum","求和 $1":"Sum $1","添加一个选项":"Add an option","添加下一个":"Add next","添加分组条件":"Add grouping conditions","添加排序条件":"Add sorting conditions","添加日程":"Add schedule","添加日程标题":"Add schedule title","添加筛选":"Add filter","添加筛选条件":"Add filter","添加记录":"Add record","班":"WD","画册视图":"Gallery view","画册配置":"Gallery setting","直接粘贴或拖拽到这里":"Paste or drag directly here","看板暂无分组":"Kanban no grouping","看板视图":"Kanban view","看板配置":"Kanban setting","确定":"Confirm","确认":"Confirm",'确认要删除 "$1" 字段吗':'Are you sure you want to delete the "$1" field',"空":"Empty","等于":"Equal to","筛选":"Filter","粘贴":"Paste","粘贴失败, 请稍后重试":"Paste failed, please try again later","粘贴失败，没有足够的列":"Paste failed, not enough columns","粘贴成功":"Pasted successfully","系统字段不支持粘贴修改":"System fields do not support paste modification","结尾不是":"Not ends with","结尾是":"Ends with","结束日期":"End Date","统计":"Calculation","编辑":"Edit","编辑列":"Edit field","编辑链接":"Edit link","缩小":"Zoom in","自定义颜色":"Custom color","获取链接标题":"Fetch link title","行高":"Row height","表单":"Form","表格视图":"Grid view","表格配置":"Table Config","裁剪":"Clip","规范化存储和展示数据":"Normalized storage and presentation of data","视图名称":"view name","记录总数":"Count","设置该列内容类型，支持文本、日期、数字、单选、多选等":"Set the content type of the column, support text, date, number, single select, multiple select, etc.","评分":"Rate","评分类型只能输入数字":"Rate type can only enter numbers","该日程被隐藏":"The schedule has been hidden","请上传":"Please upload","请输入":"Please enter","请输入关键词...":"Please enter a keyword...","请输入关键词搜索":"Please enter keywords to search","请输入有效手机号":"Please enter a valid mobile phone number","请输入有效邮箱":"Please enter a valid email address","请选择":"Please choose","请选择单选字段":"Please choose select field","请选择日期字段":"Please choose date field","请选择标题字段":"Please choose schedule title field","跟随字段颜色":"Follow field color","轻松搞定日程安排":"Make your schedule easily","输入格式有误":"Please enter a valid data","过去30天内":"within the past 30 days","过去7天内":"within the past 7 days","还有 $1 项":"has $1 schedules more","还未设置任何分组":"No groupings applied to this view","还未设置任何排序":"No sorts applied to this view","还未设置任何筛选":"No filters applied to this view","进度":"Progress","进度类型只能输入数字":"Progress type can only enter numbers","适合展示图片类数据":"Suitable for displaying image data","适应":"Fit","适应屏幕":"adapt to screen","选择一列进行分组":"Pick a field to group by","选择一列进行排序":"Pick a field to sort by","选择分组字段":"Select grouping field","选项倒序":"Last-First","选项名不能为空":"Option name cannot be empty","选项名不能超过最大长度限制":"Option name cannot be over max length","选项设置":"Filed options","选项顺序":"First-Last","邮箱":"Email","重命名视图":"Rename view","重新上传":"Upload again","链接":"Link","附件":"File","附件上传任务":"Attachment upload task","附件列表":"attachment list","降序":"Desc","非空":"is not empty","颜色":"Color","颜色显示":"Schedule Color","颜色设置":"Color setting","高":"High","高级":"Advanced","（空）":"(Empty)"});function Ibe(e,t,n){return t=dk(t),sk(e,Pbe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Pbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pbe=function(){return!!e})()}var Mbe=Object.defineProperty,Tbe=Object.getOwnPropertyDescriptor,Nbe=function(e){function t(){var e;return _w(this,t),(e=Ibe(this,t,arguments)).strict=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return Nbe.type}},{key:"baseType",get:function(){return Nbe.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||w_(t)},errorMsg:Lw("评分类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=V_(String(e),{precision:Nbe.DECIMAL_PRECISION,scale:Nbe.DECIMAL_SCALE});return!(Number(e)>Nbe.MAX_NUM||Number(e)<Nbe.MIN_NUM)&&t}},{key:"transform",value:function(e){if(!V_(e,{precision:Nbe.DECIMAL_PRECISION,scale:Nbe.DECIMAL_SCALE})){var t=e[0];if(t){for(var n=e.length,r=0;r<e.length;r++)if(e[r]!==t)return{value:0};return{value:n}}return{value:0}}return{value:this._safeGetValue(e)}}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"_safeGetValue",value:function(e){return e>Nbe.MAX_NUM?Nbe.MAX_NUM:e<Nbe.MIN_NUM?Nbe.MIN_NUM:e}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,r),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(SA);Nbe.type=HC.RATE,Nbe.baseType=qC.NUMBER,Nbe.DECIMAL_PRECISION=1,Nbe.DECIMAL_SCALE=0,Nbe.MAX_NUM=5,Nbe.MIN_NUM=0,Nbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Tbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Mbe(t,n,i),i}([Gs()],Nbe);var Bbe=Object.defineProperty,Vbe=Object.getOwnPropertyDescriptor,Lbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Vbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bbe(t,n,i),i},zbe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._rateField)}}],[{key:"pluginModule",value:function(){return dd().register(Nbe).register(this)}}])}();function Ube(e,t,n){return t=dk(t),sk(e,Hbe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Hbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hbe=function(){return!!e})()}zbe.pluginName="kernel-field-rate",Lbe([Ks(Nbe)],zbe.prototype,"_rateField",2),zbe=Lbe([Gs({contrib:MA})],zbe);var qbe=Object.defineProperty,Wbe=Object.getOwnPropertyDescriptor,$be=function(e){function t(){var e;return _w(this,t),(e=Ube(this,t,arguments)).strict=!0,e}return vk(t,e),Ew(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return $be.type}},{key:"baseType",get:function(){return $be.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||w_(t)},errorMsg:Lw("进度类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=V_(String(e),{precision:$be.DECIMAL_PRECISION,scale:$be.DECIMAL_SCALE});return!(Number(e)>$be.MAX_NUM||Number(e)<$be.MIN_NUM)&&t}},{key:"transform",value:function(e){return V_(e,{precision:$be.DECIMAL_PRECISION,scale:$be.DECIMAL_SCALE})?{value:this._safeGetValue(e)}:{value:0}}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new Y_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"_safeGetValue",value:function(e){return e>$be.MAX_NUM?$be.MAX_NUM:e<$be.MIN_NUM?$be.MIN_NUM:e}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(SA);$be.type=HC.PROGRESS,$be.baseType=qC.NUMBER,$be.DECIMAL_PRECISION=3,$be.DECIMAL_SCALE=0,$be.MAX_NUM=100,$be.MIN_NUM=0,$be=function(e,t,n,r){for(var o,i=r>1?void 0:r?Wbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qbe(t,n,i),i}([Gs()],$be);var Gbe=Object.defineProperty,Kbe=Object.getOwnPropertyDescriptor,Ybe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Kbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Gbe(t,n,i),i},Jbe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){e.registerField(this._progressField)}}],[{key:"pluginModule",value:function(){return dd().register($be).register(this)}}])}();function Xbe(e,t,n){return t=dk(t),sk(e,Zbe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Zbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zbe=function(){return!!e})()}Jbe.pluginName="kernel-field-progress",Ybe([Ks($be)],Jbe.prototype,"_progressField",2),Jbe=Ybe([Gs({contrib:MA})],Jbe);var Qbe=function(e){function t(){return _w(this,t),Xbe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.importTable(e),!0}}])}($A);Qbe.commandName="importTable";var ewe=Object.defineProperty,twe=Object.getOwnPropertyDescriptor,nwe=function(e,t,n,r){for(var o,i=r>1?void 0:r?twe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ewe(t,n,i),i},rwe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Qbe.commandName,Qbe)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function owe(e,t,n){return t=dk(t),sk(e,iwe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function iwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iwe=function(){return!!e})()}rwe.pluginName="kernel-import",nwe([Ks(nR)],rwe.prototype,"commandService",2),rwe=nwe([Gs({contrib:MA})],rwe);var awe=function(e){function t(){return _w(this,t),owe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(!e.fieldId){var t=this.readService.getAllFields(),n=this.writeService.createField({viewId:e.viewId,field:{uuid:qw(32),name:KC(HC.DATE,t.toJSON()),type:HC.DATE}});return this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:null==n?void 0:n.uuid,end_date_field_uuid:null==n?void 0:n.uuid}),n}var r=this.readService.getField(e.fieldId);if(!r)throw new Error("This field is not exist");if(!fE.isDateLike(null==r?void 0:r.get("type")))throw new Error("This field is not a date field");switch(e.type){case"start":this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:r.get("uuid")});break;case"end":this.writeService.updateViewConfig(e.viewId,{end_date_field_uuid:r.get("uuid")})}return r.toJSON()}}])}($A);function uwe(e,t,n){return t=dk(t),sk(e,lwe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function lwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lwe=function(){return!!e})()}awe.commandName="upsertStartOrEndDate";var cwe=function(e){function t(){return _w(this,t),uwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.date.format("YYYY-MM-DD");return this.writeService.updateViewConfig(e.viewId,{active_date:t}),t}}])}($A);function swe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?swe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):swe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fwe(e,t,n){return t=dk(t),sk(e,pwe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function pwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pwe=function(){return!!e})()}cwe.commandName="setActiveDate";var vwe=function(e){function t(){return _w(this,t),fwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t);if(!n)return[];var r=n.get("start_date_field_uuid");if(!r){var o=this.readService.getAllFields(),i=this.writeService.createField({viewId:t,field:{uuid:qw(32),name:KC(HC.DATE,o.toJSON()),type:HC.DATE}});r=(null==i?void 0:i.uuid)||""}var a=n.get("end_date_field_uuid")||r,u=this.writeService.createEmptyRecord({viewId:t,uuid:qw(32),direction:"after"}),l=e.date.format("YYYY-MM-DD"),c=this.readService.getCell(r,u[0].uuid);if(this.writeService.setCell(dwe(dwe({},c),{},{value:l})),a!==r){var s=this.readService.getCell(a,u[0].uuid);this.writeService.setCell(dwe(dwe({},s),{},{value:l}))}return u}}])}($A);function hwe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gwe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hwe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hwe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mwe(e,t,n){return t=dk(t),sk(e,ywe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ywe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ywe=function(){return!!e})()}vwe.commandName="createSchedule";var bwe=function(e){function t(){return _w(this,t),mwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,o=e.targetRecordId,i=e.direction,a=this.readService.getActiveViewId(),u=this.readService.getViewConfig(a);if(u){var l=u.get("start_date_field_uuid"),c=u.get("end_date_field_uuid")||l,s=n&&!r,d=r&&!n;if(l&&c&&l===c&&(s||d)){var f=this.readService.getAllFields(),p=this.writeService.createField({viewId:a,field:{uuid:qw(32),name:KC(HC.DATE,f.toJSON()),type:HC.DATE}});s?(l=(null==p?void 0:p.uuid)||"",this.writeService.updateViewConfig(a,{start_date_field_uuid:l})):d&&(c=(null==p?void 0:p.uuid)||"",this.writeService.updateViewConfig(a,{end_date_field_uuid:c}))}if(l&&n){var v=n.format("YYYY-MM-DD"),h=this.readService.getCell(l,t);if(this.writeService.setCell(gwe(gwe({},h),{},{value:v})),s&&c){var g=this.readService.getCell(c,t);if(!(null==g?void 0:g.value)){var m=(null==h?void 0:h.value)||(null==g?void 0:g.value);this.writeService.setCell(gwe(gwe({},h),{},{value:m,fieldId:c}))}}}if(c&&r){var y=r.format("YYYY-MM-DD"),b=this.readService.getCell(c,t);if(this.writeService.setCell(gwe(gwe({},b),{},{value:y})),d&&l){var w=this.readService.getCell(l,t);if(!(null==w?void 0:w.value)){var _=(null==b?void 0:b.value)||(null==w?void 0:w.value);this.writeService.setCell(gwe(gwe({},b),{},{value:_,fieldId:l}))}}}this.writeService.updateRecordOrder(a,t,o,void 0,i)}}}])}($A);function wwe(e,t,n){return t=dk(t),sk(e,_we()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function _we(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_we=function(){return!!e})()}bwe.commandName="updateSchedule";var kwe=function(e){function t(){return _w(this,t),wwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_lunar:e.show}),!0}}])}($A);function Cwe(e,t,n){return t=dk(t),sk(e,Ewe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Ewe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ewe=function(){return!!e})()}kwe.commandName="showLunar";var Owe=function(e){function t(){return _w(this,t),Cwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_title_field_uuid:e.titleId}),!0}}])}($A);Owe.commandName="updateScheduleTitle";var Swe="add",xwe="subtract",jwe="day",Dwe="month",Awe=7,Rwe=[Lw("星期日"),Lw("星期一"),Lw("星期二"),Lw("星期三"),Lw("星期四"),Lw("星期五"),Lw("星期六")],Fwe=[["$label-back-color:0-0","$label-back-color:1-3","$label-back-color:1-1","$label-back-color:0-2","$label-back-color:1-4","$label-back-color:1-2","$label-back-color:0-4","$label-back-color:1-0","$label-back-color:0-1","$label-back-color:0-3"]];function Iwe(e,t,n){return t=dk(t),sk(e,Pwe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Pwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pwe=function(){return!!e})()}var Mwe=function(e){function t(){return _w(this,t),Iwe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(e.type===rE.CUSTOM)this.writeService.updateViewConfig(e.viewId,{date_color_type:rE.CUSTOM,date_color:Fwe[0][0]});else{var t=Z_(this.readService.getAllFields(),(function(e){return e.get("type")===HC.SELECT}));this.writeService.updateViewConfig(e.viewId,{date_color_type:rE.FOLLOW_FIELD,date_color:t?t.get("uuid"):""})}return!0}}])}($A);function Twe(e,t,n){return t=dk(t),sk(e,Nwe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Nwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nwe=function(){return!!e})()}Mwe.commandName="updateScheduleColorType";var Bwe=function(e){function t(){return _w(this,t),Twe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_color_type:e.type,date_color:e.colorId}),!0}}])}($A);Bwe.commandName="updateScheduleColor";var Vwe=Object.defineProperty,Lwe=Object.getOwnPropertyDescriptor,zwe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lwe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vwe(t,n,i),i},Uwe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(awe.commandName,awe),this.commandService.registerCommand(cwe.commandName,cwe),this.commandService.registerCommand(vwe.commandName,vwe),this.commandService.registerCommand(bwe.commandName,bwe),this.commandService.registerCommand(kwe.commandName,kwe),this.commandService.registerCommand(Owe.commandName,Owe),this.commandService.registerCommand(Mwe.commandName,Mwe),this.commandService.registerCommand(Bwe.commandName,Bwe)}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Uwe.pluginName="kernel-viewer-calendar",zwe([Ks(nR)],Uwe.prototype,"commandService",2);var Hwe=[WT,iM,gM,OM,TM,WM,eT,cT,yT,xT,TT,nN,pN,mN,SN,MN,zbe,Jbe,KN,uB,wB,MB,YB,QB,cV,CV,UV,uL,wL,TL,rwe,EB,HL,iz,fz,Ez,jz,Mz,Uwe=zwe([Gs({contrib:MA})],Uwe)];function qwe(e){var t=yre(RR);return{isReadonly:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.isReadonly.apply(t,[e].concat(r)))||!1},can:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(null==t?void 0:t.can.apply(t,[n,e].concat(o)))||!1},canCreate:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canCreate.apply(t,[e].concat(r)))||!1},canDelete:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canDelete.apply(t,[e].concat(r)))||!1},canUpdate:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canUpdate.apply(t,[e].concat(r)))||!1},canRead:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canRead.apply(t,[e].concat(r)))||!1}}}function Wwe(){var e=yre(oA),t=yre(ZR),n=e.getActiveView(),r=WI(Object(a.useState)(n),2),o=r[0],i=r[1],u=Object(a.useCallback)((function(){var t=e.getActiveView();i(t)}),[e]);return Object(a.useLayoutEffect)((function(){var e=t.onDataLoaded((function(){u()})),n=t.onDataChanged((function(){u()}));return function(){e.destroy(),n.destroy()}}),[t,u]),o}function $we(){var e=yre(oA),t=yre(ZR),n=WI(Object(a.useState)(e.getViews()),2),r=n[0],o=n[1],i=function(){o(e.getViews())};return Zae((function(){var e=t.onDataLoaded((function(){i()})),n=t.onDataChanged((function(){i()}));return function(){e.destroy(),n.destroy()}}),[]),r}function Gwe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=yre(oA),n=yre(ZR),r=function(){var e,n=t.getActiveView(),r=null==(e=t.getViewGroup())?void 0:e.group,o=r?null:t.getViewRecords(),i=r?t.getGroupViewRecords():null,a=t.getViewFields(),u=t.getViewConfig(),l=t.getViewFilters();return{view:n,group:r,fields:t.getAllFields(),viewRecords:o,groupViewRecords:i,viewFields:a,viewConfig:u,filters:l}},o=WI(Object(a.useState)(r()),2),i=o[0],u=o[1],l=function(n){var o=t.getActiveView();e.viewId&&o.get("uuid")!==e.viewId||(n=n||r(),u(n))};return Zae((function(){var e=n.onDataLoaded((function(){l()})),t=n.onDataChanged((function(){l()}));return function(){e.destroy(),t.destroy()}}),[]),i}var Kwe=function(e){return e.changeFieldType="changeFieldType",e.updateFieldName="updateFieldName",e.updateFieldHidden="updateFieldHidden",e.updateField="updateField",e}(Kwe||{});function Ywe(e){var t=yre(ZR),n=yre(oA),r=yre(nR),o=qwe(mR.TABLE).isReadonly(),i=WI(Object(a.useState)((function(){return n.getField(e)})),2),u=i[0],l=i[1],c=Tre();Zae((function(){e&&l(n.getField(e))}),[e,n]);var s=null==u?void 0:u.get("type"),d=null==u?void 0:u.get("name");Zae((function(){var o=null==r?void 0:r.onDidExecuteCommand((function(t){var r=t.context;if(Object.values(Kwe).includes(r.commandName)){var o=r.argArray[0],i=o.uuid;"updateField"===r.commandName&&(i=o.field.get("uuid")),e&&i===e&&(l(n.getField(e)),c())}})),i=t.onDataChanged((function(t){"stack-undo"!==t&&"stack-redo"!==t&&"collab-synced"!==t||l(n.getField(e))}));return function(){null==o||o.destroy(),null==i||i.destroy()}}),[r,e,n,t]);return e&&u?{field:u,fieldId:e,fieldName:d,fieldType:s,fieldConfig:u.get("config"),fieldOptions:n.getFieldOptions(u.get("uuid")),isPrimary:!1,updateProperty:function(t){return null==r||r.execCommand("updateField",{field:u,newFieldProperty:t}),n.getField(e)},hasPermissionForWrite:function(){return o}}:{}}var Jwe=["addField","removeField","changeFieldOrder"].concat(gw(Object.values(Kwe)));function Xwe(){var e=yre(ZR),t=yre(oA),n=yre(nR),r=WI(Object(a.useState)((function(){return null==t?void 0:t.getAllViewFields()})),2),o=r[0],i=r[1];return Zae((function(){var r=null==n?void 0:n.onDidExecuteCommand((function(e){var n=e.context;Jwe.includes(n.commandName)&&i(null==t?void 0:t.getAllViewFields())})),o=e.onDataChanged((function(e){"stack-undo"!==e&&"stack-redo"!==e||i(null==t?void 0:t.getAllViewFields())}));return function(){r.destroy(),o.destroy()}}),[n,t,e]),o||null}function Zwe(e,t){var n=yre(oA),r=yre(Dx),o=WI(Object(a.useState)((function(){return n.getPrimaryCellInRecord(e,t)})),2),i=o[0],u=o[1];return Zae((function(){u(n.getPrimaryCellInRecord(e,t))}),[n,e,t]),Zae((function(){var o=null==r?void 0:r.onCellChange((function(r){u(n.getPrimaryCellInRecord(e,t))}));return function(){null==o||o.destroy()}}),[n,r,e,t]),{title:(null==i?void 0:i.formattedValue)||""}}function Qwe(e,t){var n=yre(oA),r=yre(ZR),o=yre(nR),i=yre(Dx),u=Ywe(t),l=u.field,c=u.fieldType,s=qwe(mR.TABLE).isReadonly(),d=Object(a.useCallback)((function(e,t){return n.getCell(t,e)}),[]),f=WI(Object(a.useState)((function(){return d(e,t)})),2),p=f[0],v=f[1];Zae((function(){v(d(e,t))}),[e,t]),Zae((function(){var n=null==i?void 0:i.onCellChange((function(n){n.recordId===e&&n.fieldId===t&&v(d(e,t))})),o=r.onDataChanged((function(n){e&&t&&("stack-undo"!==n&&"stack-redo"!==n||v(d(e,t)))}));return function(){null==n||n.destroy(),null==o||o.destroy()}}),[t,e]);var h=Object(a.useCallback)((function(n){if(!s){if(!e||!t||!p)return null;var r={recordId:e,fieldId:t,value:n,fieldType:c,uuid:p.uuid};r&&(null==o||o.execCommand("setCell",r))}}),[e,t,c,p,s]);return e&&t&&l&&p?{fieldId:t,recordId:e,fieldType:c,value:p.value,errorMessage:p.errorMessage,formatValue:p.formatValue,keyValue:p.keyValue,updated_at:p.updated_at,setCell:h}:null}var e_e=function(e){var t=e.id,n=e.focus,r=e.defaultValue,o=void 0===r?"":r,i=e.renderMode,l=e.value,c=e.onChange,d=Object(a.useRef)(null),f=WI(Yae({value:l,defaultValue:o,onChange:c}),2),p=f[0],v=f[1];return Zae((function(){n&&d.current&&d.current.focus({cursor:"end"})}),[n]),u.a.createElement("div",{className:"lakex-table-form-text lakex-table-form-text-render-mode-".concat(i),id:t||""},u.a.createElement(s.a.TextArea,{defaultValue:o,value:p,autoSize:{minRows:1},placeholder:Lw("请输入"),onChange:function(e){var t=e.target.value;v(t),null==c||c(t)},autoFocus:n,ref:d}))},t_e=function(e){var t=e.value,n=e.showEmpty,r=e.className;return t?u.a.createElement("div",{className:"".concat(r||""," lakex-table-form-text-readonly")},t):n?u.a.createElement(Ege,null):null},n_e=Object(a.memo)((function(e){var t=e.cell,n=e.boxRect,r=e.isSelected,o=void 0!==r&&r,i=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),a=i?i.value:null==t?void 0:t.value;return u.a.createElement(t_e,{className:I()({"text-ellipsis":!o&&n}),key:null==t?void 0:t.uuid,value:a||""})}),(function(e,t){var n,r,o=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),i=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected;return!(o||i||a)}));function r_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o_e=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldText"},e))},i_e=["field","cell","defaultValue","onCellChange"];function a_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u_e=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=wre(e,i_e);if(!t)return null;var i=Gae((function(e){null==r||r(e)}),100);return u.a.createElement(e_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",onChange:function(e){i(e)}},o))};function l_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c_e=function(e){return u.a.createElement(e_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},s_e=Is.defineToken("FieldTextPluginFieldTagContribution"),d_e=Object.defineProperty,f_e=Object.getOwnPropertyDescriptor,p_e=function(e,t,n,r){for(var o,i=r>1?void 0:r?f_e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&d_e(t,n,i),i},v_e=Ew((function e(){var t=this;_w(this,e),this.getTextFieldTagComponent=function(){var e,n,r=t.fieldTextPluginFieldTagProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getTextFieldTagComponent)?void 0:n.call(e):null}}));p_e([yd(s_e)],v_e.prototype,"fieldTextPluginFieldTagProvider",2),v_e=p_e([Gs()],v_e);var h_e=Object.defineProperty,g_e=Object.getOwnPropertyDescriptor,m_e=function(e,t,n,r){for(var o,i=r>1?void 0:r?g_e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&h_e(t,n,i),i},y_e=function(){return Ew((function e(){_w(this,e),this.fieldType="text",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return n_e}},{key:"getFieldEditComponent",value:function(){return u_e}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?o_e:null}},{key:"getFieldTagComponent",value:function(){return this._fieldTextService.getTextFieldTagComponent()}},{key:"getFieldFormComponent",value:function(){return c_e}}],[{key:"pluginModule",value:function(){return dd().contribution(s_e).register(this).register(v_e)}}])}();y_e.pluginName="render-field-text",m_e([Ks(lk)],y_e.prototype,"_configuration",2),m_e([Ks(v_e)],y_e.prototype,"_fieldTextService",2),y_e=m_e([Gs({contrib:[noe,toe]})],y_e);var b_e=function(e){return e.Dropdown="dropdown",e.List="list",e}(b_e||{}),w_e=function(e){return e.Select="select",e.MultiSelect="multiSelect",e}(w_e||{}),__e=function(e){var t=e.placeholder,n=e.defaultValue,r=void 0===n?"":n,o=e.value,i=void 0===o?"":o,l=e.visible,c=e.onChange,s=void 0===c?function(){}:c,d=e.focus,f=e.inputRef,p=Object(a.useRef)(),v=f||p;return Zae((function(){d&&v.current&&setTimeout((function(){var e;null==(e=v.current)||e.focus()}),300)}),[d,l]),u.a.createElement("div",{className:"lakex-table-dropdown-search"},u.a.createElement(Mre,{ref:v,type:"text",placeholder:t,onChange:s,bordered:!1,defaultValue:r,value:i,allowEnter:!1}))},k_e=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.value,r=e.color,o=function(e){var t=e.value,n=e.color,r=WI(Object(a.useState)(t),2),o=r[0],i=r[1],u=yre($P),l=n?{background:(null==u?void 0:u.getRenderColor(n))||"none"}:{};return l.color=null==u?void 0:u.getRenderTextColor(n),Zae((function(){i(t)}),[t]),{state:{optionValue:o},style:l}}({value:n,color:r}),i=o.state,l=o.style;return Object(a.useImperativeHandle)(t,(function(){return{getValue:function(){return n||""}}})),u.a.createElement("div",{className:I()("lakex-table-dropdown-item create",{active:e.isActive}),onClick:function(){e.onCreate(n)}},u.a.createElement("span",{className:"lakex-table-dropdown-item-prefix"},Lw("新建选项")),i.optionValue&&u.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:l},i.optionValue))})));function C_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O_e=function(e){var t=e.item,n=e.colorable,r={labelColor:yre($P)}.labelColor,o=WI(Object(a.useState)(t.name),2),i=o[0],l=o[1],c=Object(a.useRef)(!1),d=Object(a.useRef)(null),f=Gae((function(){var n,r,o;c.current&&(null==(r=e.onOptionChange)||r.call(e,E_e(E_e({},t),{},{name:null==(n=d.current)?void 0:n.input.value})),c.current=!1,null==(o=e.onClose)||o.call(e,t))}),400);return Zae((function(){return function(){var n,r;c.current&&(null==(r=e.onOptionChange)||r.call(e,E_e(E_e({},t),{},{name:null==(n=d.current)?void 0:n.input.value})))}}),[]),u.a.createElement("div",{key:t.id,className:"lakex-table-dropdown-item editing active"},u.a.createElement(s.a,{ref:d,className:"lakex-table-dropdown-item-input editing-input",value:i,onChange:function(e){var t=(e.target.value||"").trim();l(t),c.current=!0},onPressEnter:function(e){e.stopPropagation(),f()},onKeyDown:function(n){var r;n.stopPropagation(),n.keyCode===Tz.ESC&&(null==(r=e.onClose)||r.call(e,t))},onBlur:function(){setTimeout((function(){var e;(null==(e=d.current)?void 0:e.input)!==document.activeElement&&f()}),300)},autoFocus:!0}),n&&u.a.createElement(p.a,{placement:"rightTop",overlayClassName:"lakex-table-colorpicker",overlayStyle:{zIndex:1050},content:u.a.createElement(bre,{colorSource:gw(VP),activeColor:t.color,onSelect:function(n){var r,o;null==(r=e.onOptionChange)||r.call(e,E_e(E_e({},t),{},{color:n})),null==(o=d.current)||o.focus(),c.current=!0}})},u.a.createElement("span",{className:"option-color",style:{background:null==r?void 0:r.getRenderColor(t.color)}})))},S_e=function(e){var t=e.isEditing,n=e.isActive,r=e.isSelected,o=e.canEditing,i=void 0===o||o,l=e.item,c=e.colorable,s=e.editable,d=e.onSelect,v=void 0===d?function(){}:d,h=e.onSetActive,g=void 0===h?function(){}:h,m=function(e){var t=e.item,n=e.colorable,r=yre($P),o=WI(Object(a.useState)(t),2),i=o[0],u=o[1],l=Object(a.useMemo)((function(){return n?{background:t.color?null==r?void 0:r.getRenderColor(t.color):"none",color:null==r?void 0:r.getRenderTextColor(t.color)}:{}}),[t,n]);return{optionItem:i,setOptionItem:u,labelColor:r,style:l}}({item:l,colorable:c}),y=m.optionItem,b=m.setOptionItem,w=m.style,_=WI(Object(a.useState)(!1),2),k=_[0],C=_[1];return Zae((function(){!n&&C(!1)}),[n]),t?u.a.createElement(O_e,{onOptionChange:function(t){var n;t.name===l.name&&t.color===l.color||(null==(n=e.onOptionChange)||n.call(e,t),b(t))},item:y,colorable:c,onClose:function(){var t;null==(t=e.onSetEditing)||t.call(e,null)}}):u.a.createElement("div",{key:y.uuid,className:I()("lakex-table-dropdown-item",{active:n}),onClick:function(){i&&v(y)}},r&&u.a.createElement(oue,{type:"Check",size:14}),u.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:w},y.name),s&&u.a.createElement(p.a,{visible:k,overlayClassName:"lakex-table-dropdown-popover-container",overlayStyle:{zIndex:1051},getPopupContainer:function(){var e=document.getElementById("lakex-table-dropdown-popup-container");return e||((e=document.createElement("div")).id="lakex-table-dropdown-popup-container",e.onmouseup=function(e){e.preventDefault(),e.stopPropagation()},document.body.appendChild(e),e)},content:u.a.createElement(f.a,{onClick:function(t){var n,r,o=t.key;t.domEvent.stopPropagation(),"edit"===o?null==(n=e.onSetEditing)||n.call(e,y.uuid):"del"===o&&(null==(r=e.onRemove)||r.call(e,y.uuid)),C(!1)}},u.a.createElement(f.a.Item,{key:"edit",icon:u.a.createElement(oue,{type:"Edit",size:14})},Lw("编辑")),u.a.createElement(f.a.Item,{key:"del",icon:u.a.createElement(oue,{type:"Delete",size:14})},Lw("删除"))),trigger:"click",placement:"rightTop",onClick:function(e){return e.stopPropagation()}},u.a.createElement(oue,{type:"MoreHorizontal",onClick:function(){C(!k),g()}})))};S_e.defaultProps={canEditing:!1,colorable:!1,editable:!1};var x_e=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,o=e.selectedIds,i=e.colorable,l=e.optionEditable,c=e.inputRef,s=e.visible,d=function(e){var t=e.options,n=e.onOptionCreate,r=e.colorable,o=e.inputRef,i=e.visible,u=e.focus,l=WI(Object(a.useState)(0),2),c=l[0],s=l[1],d=WI(Object(a.useState)(""),2),f=d[0],p=d[1],h=yre($P),g=Object(a.useMemo)((function(){var e,n,o;if(r)return 0===t.length?null==(e=$P)?void 0:e.getNextColor(""):null==(o=$P)?void 0:o.getNextColor(null==(n=t[t.length-1])?void 0:n.color)}),[r,h,t]),m=Object(a.useMemo)((function(){return f?t.filter((function(e){var t,n;return null==(n=null==(t=e.name)?void 0:t.toLowerCase)?void 0:n.call(t).includes(f.toLowerCase())})):t}),[f,t]);Zae((function(){setTimeout((function(){var e;u&&(null==(e=null==o?void 0:o.current)||e.focus())}),20)}),[]),Object(a.useLayoutEffect)((function(){!i&&f&&p("")}),[i,f]);var y=Object(a.useMemo)((function(){return""!==f&&!m.some((function(e){return e.name===f}))}),[f,m]),b=Wae((function(e){var t=e.trim();if(t){var r={name:t,uuid:qw(6),color:g||""};null==n||n(r),p(""),s(0)}else v.a.error(Lw("新建选项不能为空字符"))})),w=Object(a.useMemo)((function(){return{value:f,selectOptions:m,showNew:y,newOptionColor:g,activeIdx:c}}),[f,y,g,m,c]),_=Wae((function(t){var n,r;null==(n=e.onOptionChange)||n.call(e,t),null==(r=null==o?void 0:o.current)||r.focus()})),k=Wae((function(t,n){var r;s(n),e.onOptionSelect(t),p(""),null==(r=null==o?void 0:o.current)||r.focus()})),C=Object(a.useCallback)((function(t){var n;e.onOptionDelete(t),null==(n=null==o?void 0:o.current)||n.focus()}),[]),E=Object(a.useCallback)((function(e){var t=e.target.value;p(t),s(0)}),[]);return{state:w,onInputChange:E,onCreateOption:b,setActiveIdx:s,onOptionChange:_,onOptionDelete:C,onOptionSelect:k}}(e),f=d.state,p=d.onInputChange,h=d.onCreateOption,g=d.setActiveIdx,m=d.onOptionChange,y=d.onOptionDelete,b=d.onOptionSelect,w=f.activeIdx,_=WI(Object(a.useState)(null),2),k=_[0],C=_[1],E=Object(a.useRef)(null),O=Object(a.useCallback)((function(e){var t,n=e.keyCode||e.which,r=n===Tz.UP,o=n===Tz.DOWN,i=f.selectOptions.length,a=f.showNew?i:i-1;if((r||o)&&i>0){e.preventDefault();g(0===w?r?a:1:w===a?r?w-1:0:w+(r?-1:1))}else if(n===Tz.ENTER){var u=0===i||w===i;if(f.showNew&&u){var l=null==(t=E.current)?void 0:t.getValue();l&&h(l)}else{var c=f.selectOptions[w];c&&b(c,w)}}}),[w,n,f.showNew,E.current,f.selectOptions]);return Zae((function(){var e=document.querySelector(".lakex-table-dropdown-list"),t=document.querySelector(".lakex-table-dropdown-item.active");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[w]),u.a.createElement("div",{className:"lakex-table-dropdown-celleditor",onKeyDown:O},u.a.createElement(__e,{placeholder:Lw(l?"可搜索或新建选项":"搜索选项"),visible:s,onChange:p,focus:r,value:f.value,inputRef:c}),u.a.createElement("div",{className:"lakex-table-dropdown-list"},f.selectOptions.map((function(e,t){var n=w===t,r=null==o?void 0:o.includes(e.uuid),a=e.uuid===k;return u.a.createElement(S_e,{key:e.uuid,isEditing:a,onSetEditing:function(e){C(e)},canEditing:!0,colorable:i,onOptionChange:m,onRemove:y,onSelect:function(e){return b(e,t)},onSetActive:function(){g(t)},isActive:n,isSelected:r,item:e,editable:!!l})})),f.showNew&&l&&u.a.createElement(k_e,{isActive:w===f.selectOptions.length||0===f.selectOptions.length,ref:E,onCreate:function(e){h(e)},value:f.value,colorable:i,color:f.newOptionColor})))};x_e.defaultProps={colorable:!0,editable:!1};var j_e=function(e){var t=e.value,n=void 0===t?[]:t,r=e.colorable,o=e.onDelete,i=void 0===o?function(){}:o,a=e.onClickDropDownIcon,l=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f={labelColor:yre($P)}.labelColor;return Array.isArray(n)?0===n.length&&s?u.a.createElement("p",{className:"lakex-table-dropdown-selected-placeholder"},Lw("请选择")):u.a.createElement("div",{className:"lakex-table-dropdown-selector"},u.a.createElement("div",{className:"lakex-table-dropdown-selected-list ".concat(c?"writeable":"")},n.map((function(e){return u.a.createElement("div",{className:"lakex-table-dropdown-selected-item",key:e.uuid,style:r?{background:e.color?null==f?void 0:f.getRenderColor(e.color):"none",color:null==f?void 0:f.getRenderTextColor(e.color)}:{}},u.a.createElement("span",{className:"lakex-table-dropdown-selected-item-text"},e.name),c&&u.a.createElement(oue,{className:"lakex-table-select-close-action",type:"Close",size:12,onClick:function(t){t.stopPropagation(),i(e)}}))}))),c&&!d?u.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:function(e){null==l||l(e)}},u.a.createElement(oue,{type:"ReviewArrowDown",size:16})):null):null};function D_e(e){return Zw(e)?[]:Array.isArray(e)?e:[e]}j_e.defaultProps={hideDropdownIcon:!1,writeable:!1,showPlaceholder:!0};var A_e=function(e){var t=e.options,n=e.editable,r=e.optionEditable,o=e.colorable,i=function(e){var t=e.defaultValue,n=e.options,r=e.type,o=WI(Object(a.useState)(!1),2),i=o[0],u=o[1],l=WI(Object(a.useState)((function(){return D_e(t)})),2),c=l[0],s=l[1],d=Object(a.useRef)(null),f=Object(a.useMemo)((function(){return!Zw(e.onChange)}),[e.onChange]);Zae((function(){if(f){var e=D_e(t);s(e)}}),[t,f]),Zae((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-dropdown-popover-container")||t.classList.contains("lakex-table-dropdown-celleditor")||t.classList.contains("lakex-table-select-close-action"))return;t=t.parentNode}u(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]);var p=Object(a.useCallback)((function(e){(e.keyCode||e.which)===Tz.ESC&&u(!1)}),[n]),v=Object(a.useMemo)((function(){return n.filter((function(e){return c.includes(e.uuid)}))}),[n,c]),h=Object(a.useCallback)((function(){u(!i)}),[i]),g=Object(a.useCallback)((function(t){var o,i=r===w_e.MultiSelect,a=t.uuid,u=c.includes(a),l=i?c.concat(a):[a],d=i?c.filter((function(e){return e!==a})):[],p=u?d:l;f?null==(o=e.onChange)||o.call(e,n.filter((function(e){return p.includes(e.uuid)}))):s(p),i||u||h()}),[i,r,c,f,n]);return{state:{visible:i,selectedOptions:v,selectedIds:c,selectInputRef:d},onKeyDown:p,onToggleVisible:h,onToggleSelect:g}}(e),l=i.state,c=i.onKeyDown,s=i.onToggleVisible,d=i.onToggleSelect;return u.a.createElement("div",{className:"lakex-table-dropdown",onKeyDown:c},u.a.createElement(w.a,{overlay:u.a.createElement(x_e,{visible:l.visible,inputRef:l.selectInputRef,focus:!0,colorable:!!o,options:t,editable:!!n,optionEditable:!!r,selectedIds:l.selectedIds||[],onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t)},onOptionChange:function(t){var n;null==(n=e.onOptionChange)||n.call(e,t)},onOptionDelete:function(t){var n;null==(n=e.onOptionDelete)||n.call(e,t)},onOptionSelect:function(e){d(e)}}),placement:"bottomLeft",visible:l.visible,overlayClassName:"lakex-table-dropdown"},u.a.createElement("div",{className:"lakex-table-dropdown-cellview",onClick:s},u.a.createElement(j_e,{writeable:l.visible,colorable:!!o,value:l.selectedOptions,hideDropdownIcon:e.hideDropdownIcon,onDelete:function(e){return d(e)},showPlaceholder:!0}))))},R_e=function(e){var t=e.options,n=e.value,r=e.focus,o=e.onOptionSelect,i=void 0===o?function(){}:o,l=function(e){var t=e.focus,n=Object(a.useRef)(null);return Zae((function(){t&&setTimeout((function(){var e;null==(e=n.current)||e.focus()}),300)}),[t]),{radioRef:n}}({focus:r}),c=l.radioRef;return u.a.createElement(_.a.Group,{ref:c,value:n},t.map((function(e,t){return u.a.createElement(_.a,{className:"lakex-table-form-select-radio",value:e.uuid,key:t,onChange:function(){i([e])}},u.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},F_e=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,o=e.value,i=e.onOptionSelect,a=void 0===i?function(){}:i;return u.a.createElement(k.a.Group,{onChange:function(e){a(n.filter((function(t){return e.includes(t.uuid)})))},value:o,autoFocus:r},n.map((function(e,t){return u.a.createElement(k.a,{className:"lakex-table-form-select-checkbox",value:e.uuid,key:t},u.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},I_e=["defaultValue","onChange"];function P_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T_e=function(e,t){return e!==w_e.Select||Array.isArray(t)?t:[t]},N_e=function(e){var t,n=e.id,r=e.type,o=void 0===r?w_e.Select:r,i=e.defaultValue,a=void 0===i?[]:i,l=e.value,c=e.options,s=e.renderMode,d=e.displayType,f=void 0===d?b_e.List:d,p=e.focus,v=void 0!==p&&p,h=e.className,g=void 0===h?"":h;e.onChange&&(t=function(t){var n,r=o===w_e.Select?t[0]:t;null==(n=e.onChange)||n.call(e,r)});var m,y=WI(Yae({value:l?T_e(o,l):void 0,defaultValue:T_e(o,a),onChange:t}),2),b=y[0],w=y[1];if(f===b_e.Dropdown){e.defaultValue,e.onChange;var _=wre(e,I_e);m=u.a.createElement(A_e,M_e(M_e({},_),{},{defaultValue:b,value:b,onChange:function(e){w(e.map((function(e){return e.uuid})))},onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t),b.push(t.uuid),w(b)},onOptionChange:e.onOptionChange,onOptionDelete:e.onOptionDelete,hideDropdownIcon:s===ioe.LITE}))}else f===b_e.List&&o===w_e.Select?m=u.a.createElement(R_e,{value:b[0],options:c,focus:v,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}):f===b_e.List&&o===w_e.MultiSelect&&(m=u.a.createElement(F_e,{value:b,options:c,focus:v,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}));return u.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(o||"normal"," ").concat(g," lakex-table-form-select-render-mode-").concat(s),id:n},m)},B_e=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r,o=e.colorable,i=e.type,l=void 0===i?"":i,c=e.value,s=void 0===c?[]:c,f=e.className,p=void 0===f?"":f,v=e.showEmpty,h=void 0!==v&&v,g=e.overflow,m=yre($P),y=Object(a.useRef)(null),b=Object(a.useCallback)((function(e,t){var n={};if(o){var r=e.color?null==m?void 0:m.getRenderColor(e.color):"none";n.background=r,n.color=null==m?void 0:m.getRenderTextColor(e.color)}return n}),[o]);if(!s||0===s.length)return h?u.a.createElement(Ege,null):null;if(g&&g.count>0){var w=s.length-g.count;n=s.slice(0,w),r=s.slice(w)}else n=s;return u.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(l||"normal"," ").concat(p)},u.a.createElement("div",{className:"lakex-table-form-select-readonly",ref:y},n.map((function(e,t){var n,r,o=b(e,t),i=null==(n=null==g?void 0:g.ellipsis)?void 0:n.find((function(e){return e.index===t})),a=u.a.createElement("span",{className:"lakex-table-select-item-text"},e.name||"");return i&&(o.width=i.width,r=u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container lakex-table-tooltip-ellipsis-container",title:a,shouldHiddenOnHover:!0,shouldArrowCenter:!0},a)),u.a.createElement("div",{className:"lakex-table-select-item lakex-table-select-item-overflow-apply",key:t,style:o},r||a)})),r&&r.length>0&&function(e,t){var n=u.a.createElement("div",{className:"lakex-table-form-select-overflow-content"},t.map((function(e){return u.a.createElement("div",{key:e.name,className:"lakex-table-form-select-overflow-content-item"},e.name)})));return u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container lakex-table-tooltip-ellipsis-container",title:n,shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("span",{className:"lakex-table-select-item lakex-table-form-select-overflow-num"},"+",e.count))}(g,r)))})));function V_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L_e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z_e(e,t,n){return t=dk(t),sk(e,U_e()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function U_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U_e=function(){return!!e})()}var H_e=function(e){function t(e){var n;return _w(this,t),(n=z_e(this,t,[e]))._inputRefs=[],n.getDefaultOptions=function(){var e=n.props,t=e.configs,r=e.multiple,o=t.options,i=t.color,a=!!i;if(o&&o.length>0)return o.forEach((function(e){e.uuid||(e.uuid=qw(6)),void 0===i&&(a=!!o[0]&&!!o[0].color)})),{options:o,multi:r,hasColor:a};var u=[{name:"",uuid:qw(6),color:"$label-back-color:0-0"},{name:"",uuid:qw(6),color:"$label-back-color:0-1"},{name:"",uuid:qw(6),color:"$label-back-color:0-2"}];return u.forEach((function(e,t){a&&!e.color&&(e.color=0===t?$P.getNextColor(""):$P.getNextColor(u[t-1].color))})),{options:u,multi:r,hasColor:a}},n.onAddItem=function(e){var t=n.state.options,r={name:"",uuid:qw(6),color:""},o=0===t.length?"":t[t.length-1].color;r.color=$P.getNextColor(o),t.push(r),n.setState({options:t.slice()},(function(){n._optionListRef&&n._optionListRef.current&&(n._optionListRef.current.scrollTop=1e4),e&&n._inputRefs.length>1&&n._inputRefs[n._inputRefs.length-1].focus(),n.onChange()}))},n.onChangeItem=function(e,t){var r=e.target.value,o=n.state.options,i=[];o.forEach((function(e,n){var o=n===t?r:e.name;i.push(L_e(L_e({},e),{},{name:o}))})),n.setState({options:i},(function(){n._inputRefs[t].focus(),n.onChange()}))},n.onDeleteItem=function(e,t){var r=n.state.options.filter((function(e,n){return n!==t}));n._inputRefs.splice(t,1),n.setState({options:r},(function(){n.onChange()}))},n.onChangeColor=function(e,t){var r=n.state.options,o=[];r.forEach((function(n){var r=n.uuid===e?t:n.color;o.push(L_e(L_e({},n),{},{color:r}))})),n.setState({options:o},(function(){n.onChange()}))},n.toggleColor=function(e){var t=e.target.checked,r=n.state.options;t&&r[0]&&!r[0].color&&r.forEach((function(e,t){e.color=n.props.labelColor.getByIndex(t)})),n.setState({options:r,hasColor:t},(function(){n.onChange()}))},n.beforeChange=function(e){n.setState({options:e},(function(){n.onChange()}))},n.onPressEnter=function(e){e>=n.state.options.length-1?n.onAddItem(!0):n._inputRefs[e+1].input.focus()},n.onChangeOrder=function(e,t){var r=n.state.options,o=r.findIndex((function(t){return t.uuid===e})),i=r.findIndex((function(e){return e.uuid===t}));n.setState({options:Hq(r,o,i)},(function(){var r,o;null==(o=(r=n.props).onChangeOrder)||o.call(r,e,t),n.onChange()}))},n.state={options:[],multi:!1,hasColor:!1},n}return vk(t,e),Ew(t,[{key:"componentDidMount",value:function(){this._optionListRef=u.a.createRef();var e=this.getDefaultOptions(),t=e.options,n=e.multi,r=e.hasColor;this.setState({options:t,multi:n,hasColor:r})}},{key:"onChange",value:function(){var e=this,t={color:this.state.hasColor,options:[]},n=[];this.state.options.forEach((function(t){if(""!==t.name){var r={name:t.name,uuid:t.uuid,color:e.state.hasColor?t.color:null};""!==t.name&&n.push(r)}})),t.options=Xu(n,(function(e){return e.name})),this.props.multiple&&(t.multi=!!this.state.multi),this.props.onChange&&this.props.onChange(t)}},{key:"_ignoreSortableRule",value:function(e){return!(!(null==e?void 0:e.tagName)||"input"!==e.tagName.toLowerCase())}},{key:"render",value:function(){return this.state.options?u.a.createElement("div",{className:"col-config-select-options"},this.props.title,u.a.createElement("div",{className:"multi-select"},u.a.createElement(k.a,{size:"small",checked:!!this.state.hasColor,onChange:this.toggleColor,style:{marginLeft:12}}),Lw("颜色")),u.a.createElement("div",{className:"option-list",ref:this._optionListRef},u.a.createElement($_e,{hasColor:this.state.hasColor,labelColor:this.props.labelColor,options:this.state.options,inputRefs:this._inputRefs,onChangeColor:this.onChangeColor,onChangeItem:this.onChangeItem,onDeleteItem:this.onDeleteItem,onPressEnter:this.onPressEnter,onChangeOrder:this.onChangeOrder,autoFocus:this.props.autoFocus})),u.a.createElement("div",{className:"select-options-add-item"+(this.state.hasColor?" colored":""),onClick:this.onAddItem},u.a.createElement(oue,{type:"Add"}),Lw("添加一个选项"))):null}}])}(u.a.Component),q_e=function(e){var t=yre($P);return t?u.a.createElement(H_e,L_e({labelColor:t},e)):null},W_e=function(e){var t=e.hasColor,n=e.labelColor,r=e.option,o=e.index,i=e.inputRefs,a=e.autoFocus,l=e.onChangeColor,c=e.onChangeItem,d=e.onPressEnter,f=e.onDeleteItem,v=aW({id:r.uuid}),h=v.attributes,g=v.listeners,m=v.setNodeRef,y=v.transform,b=v.transition,w=v.isDragging,_=null;t&&(_=u.a.createElement(p.a,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:u.a.createElement(bre,{colorSource:gw(VP),activeColor:r.color||"",onSelect:function(e){l(r.uuid,e)}})},u.a.createElement("span",{className:"option-color",style:{background:n.getRenderColor(r.color)}})));var k={transform:Qae.Transform.toString(y),transition:b,zIndex:w?"100":"auto",opacity:w?.3:1};return u.a.createElement("div",L_e({ref:m,className:"input-item",key:r.uuid,"data-id":r.uuid,style:k},h),u.a.createElement("span",{className:"input-item-content"},_,u.a.createElement(s.a,{value:r.name,onChange:function(e){c(e,o)},onPressEnter:function(){d(o)},ref:function(e){i[o]=e},autoFocus:a&&0===o}),u.a.createElement(oue,{type:"Delete",onClick:function(e){f(e,o)}})),u.a.createElement("div",L_e({className:"input-item-drag"},g),u.a.createElement(oue,{type:"Drag"})))},$_e=function(e){var t=e.autoFocus,n=e.hasColor,r=e.labelColor,o=e.options,i=e.inputRefs,a=e.onChangeColor,l=e.onChangeItem,c=e.onPressEnter,s=e.onDeleteItem,d=e.onChangeOrder,f=VU(BU(TH,{activationConstraint:{distance:8}})),p=function(){var e=UC(jk.mark((function e(t){var n,r;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.active,r=t.over,n.id!==r.id&&d(n.id,r.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(kq,{sensors:f,modifiers:[pW,dW],collisionDetection:GU,onDragEnd:p},u.a.createElement(Qq,{items:o.map((function(e){return L_e(L_e({},e),{},{id:e.uuid})})),strategy:Jq},o.map((function(e,o){return u.a.createElement(W_e,{key:e.uuid,option:e,index:o,hasColor:n,labelColor:r,inputRefs:i,onChangeColor:a,onChangeItem:l,onPressEnter:c,onDeleteItem:s,autoFocus:!!t})}))))},G_e=Object.defineProperty,K_e=Object.getOwnPropertyDescriptor,Y_e=function(e,t,n,r){for(var o,i=r>1?void 0:r?K_e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&G_e(t,n,i),i},J_e=function(){return Ew((function e(){_w(this,e),this._overflowObjMap={}}),[{key:"getObj",value:function(e,t){var n=this._overflowObjMap[e],r=t;return n&&n.boxSize.width===r.width&&n.boxSize.height===r.height||(n=new Sme({boxSize:r,height:22,paddingLeft:6,paddingRight:6,marginLeft:0,marginBottom:7,marginRight:4,boxPaddingTop:7,boxPaddingBottom:7,boxPaddingLeft:8,boxPaddingRight:8,numWidth:34,minWidth:40}),this._overflowObjMap[e]=n),n}},{key:"getOverflow",value:function(e,t,n,r,o){var i=this.readService.getActiveView().get("type");if(i!==sE.GRID&&i!==sE.CARD)return{};var a;return i===sE.GRID&&r?a={width:r+20,height:o+12}:i===sE.CARD&&r&&(a={width:r-40,height:30}),a?this.getObj(e,a).getCellOverflow(t,n.map((function(e){return e.name}))):{}}}])}();function X_e(e,t,n,r,o){var i,u=WI(Object(a.useState)(!0),2),l=u[0],c=u[1],s=WI(Object(a.useState)(null),2),d=s[0],f=s[1],p=yre(J_e),v=(null==(i=null==n?void 0:n.map((function(e){return e.name})))?void 0:i.join(":"))||"";return Zae((function(){if(c(!0),e&&t&&n){var i=null==p?void 0:p.getOverflow(e,t,n,r,o);f(i)}c(!1)}),[e,t,r,o,v]),{calcing:l,overflow:d}}Y_e([Ks(oA)],J_e.prototype,"readService",2),J_e=Y_e([Gs()],J_e);var Z_e=Object(a.memo)((function(e){var t=e.cell,n=e.field,r=e.checkCell,o=e.isSelected,i=void 0!==o&&o,l=e.boxRect,c=(null==t?void 0:t.recordId)||"",s=(null==t?void 0:t.fieldId)||"",d=qwe(mR.TABLE).isReadonly(),f=Qwe(c,s),p=yre(oA).getFieldOptions(s).toJSON(),v=f?f.value:null==t?void 0:t.value,h=p.filter((function(e){return e.uuid===v}))||null,g=yre(_oe),m=Object(a.useCallback)((function(e){null==g||g.emitClickCellIcon({recordId:c,fieldId:s,event:e,iconName:"cellSelectIcon"})}),[c,s]),y=X_e(s,c,h,null==l?void 0:l.width,null==l?void 0:l.height),b=y.calcing,w=y.overflow;return r&&!(null==f?void 0:f.value)?null:d||!i?b?null:u.a.createElement(B_e,{colorable:!!(null==n?void 0:n.get("color")),overflow:w,value:h}):u.a.createElement(u.a.Fragment,null,u.a.createElement(j_e,{writeable:i&&!d,colorable:!!(null==n?void 0:n.get("color")),value:h,onDelete:function(e){null==f||f.setCell(null)},showPlaceholder:!1,onClickDropDownIcon:m}))}),(function(e,t){var n=e.cell,r=t.cell,o=e.boxRect!==t.boxRect,i=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&(!o&&!i&&((null==n?void 0:n.value)===(null==r?void 0:r.value)&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at)))}));function Q_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var eke=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q_e(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldSelect"},e))},tke=["displayType","defaultValue","cell","onCellChange"];function nke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rke=function(e){var t,n=e.displayType,r=e.defaultValue,o=e.cell,i=e.onCellChange,a=wre(e,tke),l=Ywe((null==(t=e.field)?void 0:t.get("uuid"))||""),c=l.field,s=l.fieldId,d=l.fieldOptions,f=l.updateProperty,p=qwe(mR.FIELD).canUpdate(c),v=Qwe(null==o?void 0:o.recordId,null==o?void 0:o.fieldId),h=Tre(),g=function(){var e=UC(jk.mark((function e(t){var n,r;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==v?void 0:v.value)||[],r=n.includes(t.uuid),null==v||v.setCell(r?"":t.uuid);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Wae(function(){var e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.toJSON().concat(t),e.next=3,f({options:n});case 3:g(t),h();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Wae((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),h()})),b=Wae((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),h()})),w=Wae((function(e){null==i||i(e)}));if(!c||!v)return null;var _=v?v.value:null==o?void 0:o.value;return u.a.createElement(N_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s,defaultValue:r?[r.value]:[],value:_?[_]:null,type:c.type,options:d.toJSON(),colorable:c.get("color"),editable:!0,optionEditable:p,displayType:n,onChange:w,onOptionChange:y,onOptionCreate:m,onOptionDelete:b},a))},oke=["viewField"];function ike(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ake=function(e){var t=e.viewField,n=wre(e,oke),r=Ywe(t.get("field_uuid")||""),o=r.field,i=r.fieldOptions,a="dropdown"===(null==t?void 0:t.get("display_type"))?b_e.Dropdown:b_e.List;return u.a.createElement(N_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ike(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ike(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:w_e.Select,options:(null==i?void 0:i.toJSON())||[],colorable:null==o?void 0:o.get("color"),displayType:a,editable:!1},n))};ake.OptionEditable=function(e){var t;if(!fE.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return u.a.createElement(q_e,{title:u.a.createElement("span",{className:"lakex-table-form-design-option-title"},Lw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!1,configs:n,autoFocus:e.autoFocus})};var uke=Object.defineProperty,lke=Object.getOwnPropertyDescriptor,cke=function(e,t,n,r){for(var o,i=r>1?void 0:r?lke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uke(t,n,i),i},ske=function(){return Ew((function e(){_w(this,e),this.fieldType="select",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Z_e}},{key:"getFieldEditComponent",value:function(){return rke}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?eke:null}},{key:"getFieldFormComponent",value:function(){return ake}}],[{key:"pluginModule",value:function(){return dd().register(this).register(J_e)}}])}();function dke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ske.pluginName="render-field-select",cke([Ks(lk)],ske.prototype,"_configuration",2),ske=cke([Gs({contrib:[noe,toe]})],ske);var pke=Object(a.memo)((function(e){var t=e.cell,n=e.field,r=e.writeable,o=e.isSelected,i=void 0!==o&&o,l=e.boxRect,c=(null==t?void 0:t.recordId)||"",s=(null==t?void 0:t.fieldId)||"",d=qwe(mR.TABLE).isReadonly(),f=Qwe(c,s),p=(f?f.value:null==t?void 0:t.value)||[],v=yre(_oe),h=yre(oA).getFieldOptions(s).toJSON(),g=Object(a.useRef)(null),m=Object(a.useMemo)((function(){var e,t,n;return null==(n=null==(e=p.map)?void 0:(t=e.call(p,(function(e){var t=h.find((function(t){return t.uuid===e}));return t?fke(fke({},t),{},{name:t.name,value:t.uuid}):null}))).filter)?void 0:n.call(t,(function(e){return!!e}))}),[p,h]),y=X_e(s,c,m,null==l?void 0:l.width,null==l?void 0:l.height),b=y.calcing,w=y.overflow,_=Object(a.useCallback)((function(e){null==v||v.emitClickCellIcon({recordId:c,fieldId:s,event:e,iconName:"cellSelectIcon"})}),[c,s]);return t?d||!i?b?null:u.a.createElement(B_e,{ref:g,overflow:w,colorable:!!(null==n?void 0:n.get("color")),value:m}):u.a.createElement(j_e,{writeable:Bu(r)?i&&!d:r,colorable:!!(null==n?void 0:n.get("color")),value:m,onDelete:function(e){var t=m.filter((function(t){return t.uuid!==e.uuid}));null==f||f.setCell(t)},showPlaceholder:!1,onClickDropDownIcon:_}):null}),(function(e,t){var n=e.cell,r=t.cell,o=e.boxRect!==t.boxRect,i=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&(!o&&!i&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at))}));function vke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hke=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMultiSelect"},e))},gke=["displayType","cell","defaultValue","onChange","onCellChange"];function mke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yke=function(e){var t,n=e.displayType,r=e.cell,o=e.defaultValue,i=e.onChange,a=e.onCellChange,l=wre(e,gke),c=Ywe((null==(t=e.field)?void 0:t.get("uuid"))||""),s=c.field,d=c.fieldOptions,f=c.updateProperty,p=Qwe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),v=Tre(),h=qwe(mR.FIELD).canUpdate(s),g=null==r?void 0:r.value,m=o||[""],y=function(){var e=UC(jk.mark((function e(t){var n,o,i;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==r?void 0:r.value)||[],o=n.includes(t.uuid),i=o?n.filter((function(e){return e!==t.uuid})):n.concat(t.uuid),null==p||p.setCell(i.map((function(e){return{value:e}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Wae(function(){var e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.toJSON().concat(t),f({options:n}),y(t),v();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Wae((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),v()})),_=Wae((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),v()})),k=Wae((function(e){var t=Q_(d,(function(t){return e.includes(t.get("uuid"))})).map((function(e){var t=e.toJSON();return t.value=t.uuid,t}));null==a||a(t),null==i||i(t)}));return s?u.a.createElement(N_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s.get("uuid"),defaultValue:m,value:g,type:s.get("type"),options:d.toJSON(),colorable:null==s?void 0:s.get("color"),editable:!0,optionEditable:h,displayType:n,onChange:k,onOptionChange:w,onOptionCreate:b,onOptionDelete:_},l)):null},bke=["viewField","onChange"];function wke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _ke=function(e){var t=e.viewField,n=e.onChange,r=wre(e,bke),o=Ywe(t.get("field_uuid")||""),i=o.field,a=o.fieldOptions,l="dropdown"===(null==t?void 0:t.get("display_type"))?b_e.Dropdown:b_e.List;return u.a.createElement(N_e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:w_e.MultiSelect,options:null==a?void 0:a.toJSON(),colorable:null==i?void 0:i.get("color"),displayType:l,editable:!1,onChange:function(e){if(a){var t=Q_(a,(function(t){return e.includes(t.get("uuid"))})).map((function(e){return e.get("uuid")}));null==n||n(t)}}},r))};_ke.OptionEditable=function(e){var t;if(!fE.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return u.a.createElement(q_e,{title:u.a.createElement("span",{className:"lakex-table-form-design-option-title"},Lw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!0,configs:n,autoFocus:e.autoFocus})};var kke=Object.defineProperty,Cke=Object.getOwnPropertyDescriptor,Eke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Cke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kke(t,n,i),i},Oke=function(){return Ew((function e(){_w(this,e),this.fieldType="multiSelect",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return pke}},{key:"getFieldEditComponent",value:function(){return yke}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?hke:null}},{key:"getFieldFormComponent",value:function(){return _ke}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Oke.pluginName="render-field-multi-select",Eke([Ks(lk)],Oke.prototype,"_configuration",2),Oke=Eke([Gs({contrib:[noe,toe]})],Oke);var Ske=function(e){var t=e.id,n=e.defaultValue,r=e.focus,o=e.onBlur,i=e.renderMode,l=null!==e.prefix?e.prefix:u.a.createElement(oue,{type:"FieldNumber",size:14}),c=WI(Yae({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),s=c[0],d=c[1],f=Object(a.useRef)(null);return Zae((function(){r&&f.current&&f.current.focus({cursor:"end"})}),[r]),u.a.createElement("div",{className:"lakex-table-form-number lakex-table-form-number-render-mode-".concat(i),id:t},u.a.createElement(C.a,{allowClear:i!==ioe.LITE,type:"text",value:s,defaultValue:n,placeholder:Lw("请输入"),prefix:l,onChange:function(t){var n;d(t),null==(n=e.onChange)||n.call(e,t)},onBlur:o,autoFocus:r,ref:f}))},xke=function(e){var t=e.value,n=e.showEmpty;return t||0===Number(t)?u.a.createElement("div",{className:"lakex-table-form-number-readonly"},t):n?u.a.createElement(Ege,null):null},jke=Object(a.memo)((function(e){var t=e.cell,n=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return null==r?null:u.a.createElement(xke,{key:null==t?void 0:t.updated_at,value:r})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Dke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ake=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldNumber"},e))},Rke=["field","cell","defaultValue","onCellChange"];function Fke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ike=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=wre(e,Rke);return t?u.a.createElement(Ske,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==t?void 0:t.uuid,defaultValue:n,value:t.value||"",prefix:e.renderMode===ioe.LITE?void 0:u.a.createElement(oue,{type:"FieldNumber"}),onChange:function(e){null==r||r(e)}},o)):null};function Pke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mke=function(e){return u.a.createElement(Ske,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Tke=Object.defineProperty,Nke=Object.getOwnPropertyDescriptor,Bke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tke(t,n,i),i},Vke=function(){return Ew((function e(){_w(this,e),this.fieldType="number",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return jke}},{key:"getFieldEditComponent",value:function(){return Ike}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Ake:null}},{key:"getFieldRules",value:function(){return this._numberField.rules}},{key:"getFieldFormComponent",value:function(){return Mke}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Vke.pluginName="render-field-number",Bke([Ks(_M)],Vke.prototype,"_numberField",2),Bke([Ks(lk)],Vke.prototype,"_configuration",2),Vke=Bke([Gs({contrib:[noe,toe]})],Vke);var Lke=function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.list,o=e.onUnSelect,i=void 0===o?function(){}:o,a=e.onMentionTagClick,l=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f=null;return f=r&&0!==r.length||!s?u.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap"},null==r?void 0:r.map((function(e){return e?u.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uid,onClick:function(t){l(e)}},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),u.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name),c&&u.a.createElement("span",{className:"lakex-table-form-mention-tag-close",onClick:function(t){t.stopPropagation(),i(e,t)}},u.a.createElement(oue,{type:"Close"}))):null}))):u.a.createElement("p",{className:"lakex-table-form-mention-placeholder"},Lw("请选择")),u.a.createElement("div",{className:I()("lakex-table-form-mention-content",{writeable:c}),onClick:n},f,c&&!d&&u.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:e.onClickDropDownIcon},u.a.createElement(oue,{type:"ReviewArrowDown",size:16})))};Lke.defaultProps={writeable:!1,showPlaceholder:!0};var zke=function(e){var t=e.isSelected,n=e.user,r=e.onSelect,o=void 0===r?function(){}:r,i=e.onUnselect,a=void 0===i?function(){}:i,l=I()("lakex-table-form-mention-selector-item",{selected:t});return u.a.createElement("div",{onClick:function(e){t?a(n):o(n)},className:l},u.a.createElement("div",{className:"lakex-table-form-mention-selector-content"},u.a.createElement("span",{className:"lakex-table-form-mention-selector-avatar"},u.a.createElement("img",{src:n.icon})),u.a.createElement("div",null,u.a.createElement("div",{className:"lakex-table-form-mention-selector-name"},n.name),u.a.createElement("div",{className:"lakex-table-form-mention-selector-login"},n.login))),t&&u.a.createElement(oue,{type:"Check"}))},Uke=function(e){var t=e.list,n=e.highlightId,r=e.selectedIds,o=e.emptyText,i=void 0===o?Lw("未搜索到结果"):o,a=e.onSelect,l=e.onUnselect;return Zae((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list");if(e){var t=document.querySelector(".highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}}),[{highlightId:n}.highlightId]),t&&t.length>0?u.a.createElement("ul",{className:"lakex-table-form-mention-selector-list"},t.map((function(e){if(!e)return null;var t=I()({highlight:n===e.uid});return u.a.createElement("li",{key:e.uid,className:t},u.a.createElement(zke,{isSelected:r.includes(e.uid),onSelect:a,onUnselect:l,user:e}))}))):u.a.createElement("div",{className:"lakex-table-form-mention-selector-empty"},u.a.createElement("span",null,i))};function Hke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hke(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wke=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,o=void 0===r?"":r,i=e.value,l=e.focus,c=e.onSearch,s=void 0===c?function(){}:c,d=e.onChange,f=void 0===d?function(){}:d,p=e.inputRef,v=e.visible,h=Object(a.useRef)(),g=p||h,m=Object(a.useRef)();Zae((function(){l&&g.current&&setTimeout((function(){var e;null==(e=g.current)||e.focus()}),300)}),[l,v]);var y={type:n,placeholder:Lw("搜索人员"),onChange:function(e){f(e),m.current||s(e)},onCompositionStart:function(){m.current=!0},onCompositionEnd:function(e){m.current=!1,s(e)},bordered:!1,defaultValue:o,value:i};return u.a.createElement(Mre,qke(qke({},y),{},{ref:g,allowEnter:!1}))},$ke=function(e){var t=new Set;return e&&Array.isArray(e)&&e.forEach((function(e){t.add(e.uid)})),gw(t.values())},Gke=function(e){var t=e.inputRef,n=e.visible,r=e.maxHeight,o=function(e){var t=e.selected,n=e.inputRef,r=e.focus,o=yre(qA),i=WI(Object(a.useState)(""),2),u=i[0],l=i[1],c=WI(Object(a.useState)([]),2),s=c[0],d=c[1],f=WI(Object(a.useState)(!1),2),p=f[0],v=f[1],h=WI(Object(a.useState)(),2),g=h[0],m=h[1],y=WI(Object(a.useState)((function(){return $ke(t)})),2),b=y[0],w=y[1];Zae((function(){null==o||o.contextUsers().then((function(e){d(e)})),setTimeout((function(){var e;r&&(null==(e=null==n?void 0:n.current)||e.focus())}),40)}),[]),Zae((function(){w($ke(t))}),[t]);var _=Object(a.useCallback)((function(e){var t,n=e.keyCode||e.which;if([Tz.UP,Tz.DOWN].includes(n)){e.preventDefault();var r=s.findIndex((function(e){return e.uid===g}));n===Tz.UP?(r-=1)<0&&(r=0):n===Tz.DOWN&&(r+=1)>=s.length&&(r=s.length-1),m(null==(t=s[r])?void 0:t.uid)}else if(n===Tz.ENTER){e.preventDefault();var o=document.querySelector(".highlight .lakex-table-form-mention-selector-item");o&&o.click()}}),[s,g]);Zae((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list"),t=null==e?void 0:e.querySelector("li.highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[g]);var k=Object(a.useCallback)((function(t){var n;null==(n=e.onSelect)||n.call(e,t),b.includes(t.uid)||(w(b.concat(t.uid)),l(""))}),[e.onSelect,t]),C=Object(a.useCallback)((function(t){var n;null==(n=e.onUnselect)||n.call(e,t);var r=b.filter((function(e){return e!==t.uid}));w(r)}),[e.onUnselect]),E=Object(a.useCallback)((function(e){var t=e.target.value||"";l(t)}),[]);return Object(a.useLayoutEffect)((function(){!e.visible&&u&&l("")}),[e.visible]),{state:{list:s,loading:p,highlightId:g,selectedUserIds:b,filterValue:u},onKeyDown:_,onSearch:function(e){v(!0);var t=e.target.value;null==o||o.searchUser(t).then((function(e){d(e),v(!1)}))},onSelect:k,onUnselect:C,onChange:E}}(e),i=o.state,l=o.onKeyDown,c=o.onSearch,s=o.onSelect,d=o.onUnselect,f=o.onChange,p=r?Math.max(parseInt(String(r),10)-40,80):void 0;return u.a.createElement("div",{className:"lakex-table-form-mention-selector-container lakex-table-mention-wrapper",onKeyDown:l},u.a.createElement("div",{className:"lakex-table-form-mention-selector-search"},u.a.createElement(Wke,{focus:e.focus,visible:n,onSearch:c,onChange:f,inputRef:t,value:i.filterValue})),i.loading?u.a.createElement("div",{className:"lakex-table-form-mention-selector-spin"},u.a.createElement(h.a,null)):u.a.createElement("div",{style:{maxHeight:p},className:"lakex-table-form-mention-selector-body"},u.a.createElement(Uke,{selectedIds:i.selectedUserIds,list:i.list,highlightId:i.highlightId,onSelect:s,onUnselect:d})))};var Kke=function(e){var t=e.defaultValue,n=e.onChange,r=e.onSelect,o=e.onUnselect,i=Object(a.useState)((function(){return function(e){return Bu(e)?[]:Array.isArray(e)?e:[e]}(t)})),u=WI(i,2),l=u[0],c=u[1],s=WI(Object(a.useState)(!1),2),d=s[0],f=s[1];return Zae((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-mention-wrapper"))return;t=t.parentNode}f(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{visible:d,selected:l},onMentionSelect:function(e){var t=l.concat(e);c(t),f(!1),n(t),r(e)},onMentionUnselect:function(e){var t=l.filter((function(t){return t.uid!==e.uid}));c(t),f(!1),n(t),o(e)},onToggleVisible:function(){f(!d)}}},Yke=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,o=e.onSelect,i=void 0===o?function(){}:o,a=e.onUnselect,l=void 0===a?function(){}:a,c=e.defaultValue,s=void 0===c?[]:c,d=e.onMentionTagClick,f=void 0===d?function(){}:d,p=e.renderMode,v=Kke({defaultValue:s,onChange:r,onSelect:i,onUnselect:l}),h=v.state,g=v.onMentionSelect,m=v.onMentionUnselect,y=v.onToggleVisible;return u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a,{overlay:u.a.createElement(Gke,{focus:!0,visible:h.visible,selected:h.selected,onSelect:g,onUnselect:m}),visible:h.visible,placement:"bottomLeft",dropdownClassName:"lakex-table-mention-wrapper"},u.a.createElement("div",{className:"lakex-table-form-mention lakex-table-mention-wrapper lakex-table-form-mention-render-mode-".concat(p),id:t,onClick:function(){return y()}},u.a.createElement(Lke,{writeable:h.visible,list:h.selected,hideDropdownIcon:p===ioe.LITE,onUnSelect:m,onMentionTagClick:f}))))},Jke=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r,o,i=e.value,a=e.showEmpty,l=e.onMentionTagClick,c=void 0===l?function(){}:l,s=e.overflow;if(!i||0===i.length)return a?u.a.createElement("div",{className:"lakex-table-form-mention-readonly"},u.a.createElement(Ege,null)):null;if(s&&s.count>0){var f=i.length-s.count;r=i.slice(0,f),o=i.slice(f)}else r=i;return u.a.createElement("div",{className:"lakex-table-form-mention-readonly"},u.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap"},null==(n=null==r?void 0:r.map)?void 0:n.call(r,(function(e,t){var n;if(!e)return null;var r,o=null==(n=null==s?void 0:s.ellipsis)?void 0:n.find((function(e){return e.index===t})),i=u.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name),a={};return o&&(a.width=o.width,r=u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container lakex-table-tooltip-ellipsis-container",title:i,shouldHiddenOnHover:!0,shouldArrowCenter:!0},i)),u.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uuid,onClick:function(t){c(e)},style:a},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),r||i)})),o&&o.length>0&&function(e,t,n){var r=u.a.createElement("div",{className:"lakex-table-form-mention-overflow-content"},t.map((function(e){return u.a.createElement("div",{key:e.name,className:"lakex-table-form-mention-overflow-content-item",onClick:function(t){n(e,!0)}},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),e.name)})));return u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container lakex-table-tooltip-ellipsis-container",title:r,shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("span",{className:"lakex-table-form-mention-item lakex-table-form-mention-overflow-num"},"+",e.count))}(s,o,c)))}))),Xke=Object.defineProperty,Zke=Object.getOwnPropertyDescriptor,Qke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Zke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xke(t,n,i),i},eCe=function(){return Ew((function e(){_w(this,e),this._overflowObjMap={}}),[{key:"getObj",value:function(e,t){var n=this._overflowObjMap[e],r=t;return n&&n.boxSize.width===r.width&&n.boxSize.height===r.height||(n=new Sme({boxSize:r,height:22,paddingLeft:24,paddingRight:6,marginLeft:0,marginRight:4,marginBottom:7,boxPaddingTop:7,boxPaddingBottom:7,boxPaddingLeft:8,boxPaddingRight:8,numWidth:34,minWidth:60}),this._overflowObjMap[e]=n),n}},{key:"getOverflow",value:function(e,t,n,r,o){var i=this.readService.getActiveView().get("type");if(i!==sE.GRID&&i!==sE.CARD)return{};var a;return i===sE.GRID&&r?a={width:r+20,height:o+12}:i===sE.CARD&&r&&(a={width:r-40,height:30}),a?this.getObj(e,a).getCellOverflow(t,n.map((function(e){return e.name}))):{}}}])}();Qke([Ks(oA)],eCe.prototype,"readService",2),eCe=Qke([Gs()],eCe);var tCe=Object(a.memo)((function(e){var t=e.cell,n=e.checkCell,r=void 0===n||n,o=e.disableOpen,i=void 0!==o&&o,l=e.isSelected,c=void 0!==l&&l,s=e.boxRect,d=(null==t?void 0:t.recordId)||"",f=(null==t?void 0:t.fieldId)||"",p=qwe(mR.TABLE).isReadonly(),v=Qwe(d,f),h=(v?v.value:null==t?void 0:t.value)||[],g=yre(_oe),m=yre(oA),y=yre(pie),b=Object(a.useRef)(null),w=Wae((function(e){null==g||g.emitClickCellIcon({recordId:d,fieldId:f,event:e,iconName:"cellMentionIcon"})})),_=Object(a.useCallback)((function(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||c||m.getActiveViewType()!==sE.GRID)&&!i&&(null==y||y.open("user",e))}),[c]),k=function(e,t,n,r,o){var i,u=WI(Object(a.useState)(!0),2),l=u[0],c=u[1],s=WI(Object(a.useState)(null),2),d=s[0],f=s[1],p=yre(eCe),v=(null==(i=null==n?void 0:n.map((function(e){return e.name})))?void 0:i.join(":"))||"";return Zae((function(){if(c(!0),e&&t&&n){var i=null==p?void 0:p.getOverflow(e,t,n,r,o);f(i)}c(!1)}),[e,t,r,o,v]),{calcing:l,overflow:d}}(f,d,h,null==s?void 0:s.width,null==s?void 0:s.height),C=k.calcing,E=k.overflow;return r&&!h?null:p||!c?C?null:u.a.createElement(Jke,{ref:b,overflow:E,value:h.toJSON?h.toJSON():h,onMentionTagClick:_}):u.a.createElement(Lke,{showPlaceholder:!1,writeable:c&&!p,list:h||[],onUnSelect:function(e){var t=null==h?void 0:h.filter((function(t){return t.uid!==e.uid}));null==v||v.setCell(t)},onMentionTagClick:_,onClickDropDownIcon:w})}),(function(e,t){var n,r,o=e.cell,i=t.cell,a=e.boxRect!==t.boxRect,u=e.isSelected!==t.isSelected;return!a&&!u&&((null==o?void 0:o.updated_at)||(null==i?void 0:i.updated_at)?!((null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at)):Mu(o.uuid,i.uuid))}));function nCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rCe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMention"},e))},oCe=["field","cell","onCellChange"];function iCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var aCe=function(e){e.field;var t=e.cell;e.onCellChange;var n=wre(e,oCe),r=yre(pie),o=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),i=Object(a.useCallback)((function(e){null==r||r.open("user",e)}),[]);return t?u.a.createElement(Yke,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onMentionTagClick:i,id:t.uuid,defaultValue:t.value,onChange:function(e){null==o||o.setCell(e)}},n)):null};function uCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cCe=function(e){var t=yre(pie),n=Object(a.useCallback)((function(e){null==t||t.open("user",e)}),[]);return u.a.createElement(Yke,lCe(lCe({},e),{},{onMentionTagClick:n}))},sCe=Object.defineProperty,dCe=Object.getOwnPropertyDescriptor,fCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?dCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sCe(t,n,i),i},pCe=function(){return Ew((function e(){_w(this,e),this.fieldType="mention",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return tCe}},{key:"getFieldEditComponent",value:function(){return aCe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?rCe:null}},{key:"getFieldFormComponent",value:function(){return cCe}}],[{key:"pluginModule",value:function(){return dd().register(this).register(eCe)}}])}();pCe.pluginName="render-field-mention",fCe([Ks(lk)],pCe.prototype,"_configuration",2),pCe=fCe([Gs({contrib:[noe,toe]})],pCe);var vCe=["id","onChange","defaultValue","value","focus","renderMode","format","rectStyle"];function hCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mCe=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,o=e.defaultValue,l=e.value,c=e.focus,s=e.renderMode,d=e.format,f=e.rectStyle,p=void 0===f?{}:f,v=wre(e,vCe),h=yre(lk),g=WI(Yae({value:l,defaultValue:o,onChange:r}),2),m=g[0],y=g[1],b=Object(a.useRef)(null),w=Object(a.useMemo)((function(){return m?i()(m):""}),[m]);Zae((function(){c&&setTimeout((function(){var e;null==(e=b.current)||e.focus()}),100)}),[c]);var _=(null==d?void 0:d.split(" "))||[],k=_[1];return u.a.createElement("div",{className:"lakex-table-form-date lakex-table-form-date-render-mode-".concat(s),id:t},u.a.createElement(Ihe,gCe(gCe({ref:b,defaultValue:w,value:w,autoFocus:c,format:d,showTime:k&&{format:_[1]},onChange:function(){var e;y(null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.toDate())},style:gCe({},p)},v),{},{getPopupContainer:function(){var e=(null==h?void 0:h.getValue("modal.customModalContainer"))||document.body,t=e.querySelector(".lakex-table-date-picker-container");return t||((t=document.createElement("div")).classList.add("lakex-table-date-picker-container"),e.appendChild(t)),t}})))},yCe=function(e){var t=e.value,n=e.format,r=void 0===n?"YYYY-MM-DD":n,o=e.showEmpty;return t?u.a.createElement("div",{className:"lakex-table-form-date-readonly"},t?i()(t).format(r):""):o?u.a.createElement(Ege,null):null},bCe=Object(a.memo)((function(e){var t,n,r=e.cell,o=Ywe(null==r?void 0:r.fieldId),i=Qwe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),a=i?i.value:null==r?void 0:r.value;return"number"==typeof a&&(a=new Date(a)),u.a.createElement(yCe,{key:null==r?void 0:r.fieldId,value:a,format:null==(n=null==(t=o.field)?void 0:t.get("config"))?void 0:n.date_format})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function wCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _Ce=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldDate"},e))},kCe=["cell","defaultValue","onCellChange"];function CCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ECe=function(e){var t,n,r=e.cell,o=e.defaultValue,i=e.onCellChange,a=wre(e,kCe),l=Ywe(null==r?void 0:r.fieldId);return r?u.a.createElement(mCe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:r.fieldId,format:null==(n=null==(t=l.field)?void 0:t.get("config"))?void 0:n.date_format,defaultValue:o,value:r.value,onChange:function(e){null==i||i(e)}},a)):null};function OCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xCe=function(e){var t,n;return u.a.createElement(mCe,SCe(SCe({},e),{},{format:null==(n=null==(t=e.viewField.get("field"))?void 0:t.get("config"))?void 0:n.date_format}))},jCe=Object.defineProperty,DCe=Object.getOwnPropertyDescriptor,ACe=function(e,t,n,r){for(var o,i=r>1?void 0:r?DCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jCe(t,n,i),i},RCe=function(){return Ew((function e(){_w(this,e),this.fieldType="date",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return bCe}},{key:"getFieldEditComponent",value:function(){return ECe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?_Ce:null}},{key:"getFieldFormComponent",value:function(){return xCe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();RCe.pluginName="render-field-date",ACe([Ks(lk)],RCe.prototype,"_configuration",2),RCe=ACe([Gs({contrib:[noe,toe]})],RCe);var FCe=function(e){return e.Checkbox="checkbox",e.Radio="radio",e}(FCe||{}),ICe=[{value:!0,name:Lw("是")},{value:!1,name:Lw("否")}],PCe=function(e){var t,n=e.id,r=e.type,o=void 0===r?FCe.Checkbox:r,i=e.defaultValue,a=e.value,l=e.onChange,c=e.focus,s=WI(Yae({value:a,defaultValue:i,onChange:l}),2),d=s[0],f=s[1];return o===FCe.Checkbox?t=u.a.createElement(k.a,{checked:d,onChange:function(e){var t=e.target.checked;null==l||l(t),f(t)}}):o===FCe.Radio&&(t=u.a.createElement(_.a.Group,{defaultValue:d,autoFocus:c},ICe.map((function(e,t){return u.a.createElement(_.a,{value:e.value,key:t,onChange:function(t){var n=e.value;null==l||l(n),f(n)}},u.a.createElement("span",{className:"lakex-table-form-type-checkbox-value"},e.name))})))),u.a.createElement("div",{className:"lakex-table-form-checkbox",id:n},t)},MCe=function(e){return u.a.createElement("div",{className:"lakex-table-form-checkbox-readonly"},u.a.createElement(k.a,{checked:e.value,onChange:function(t){var n=t.target.checked;e.onChange(n)}}))},TCe=Object(a.memo)((function(e){var t=e.readonly,n=e.cell,r=qwe(mR.TABLE).isReadonly(),o=yre(nR),i=Qwe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),l=Object(a.useCallback)((function(e){r||t||null==i||i.setCell(e)}),[r,t,o]),c=i?i.value:null==n?void 0:n.value;return u.a.createElement(MCe,{value:!!c,onChange:l})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)})),NCe=function(e){var t=e.field,n=Qwe(e.recordId,null==t?void 0:t.get("uuid")),r=Object(a.useCallback)((function(e){null==n||n.setCell(e)}),[]);return n?u.a.createElement(PCe,{id:n.uuid,defaultValue:n.value,value:n.value,onChange:r}):null};function BCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var VCe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCheckbox"},e))};function LCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zCe=function(e){return u.a.createElement(PCe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:FCe.Radio},e))},UCe=Object.defineProperty,HCe=Object.getOwnPropertyDescriptor,qCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?HCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UCe(t,n,i),i},WCe=function(){return Ew((function e(){_w(this,e),this.fieldType="checkbox",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return TCe}},{key:"getFieldEditComponent",value:function(){return NCe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?VCe:null}},{key:"getFieldFormComponent",value:function(){return zCe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();WCe.pluginName="render-field-checkbox",qCe([Ks(lk)],WCe.prototype,"_configuration",2),WCe=qCe([Gs({contrib:[noe,toe]})],WCe);var $Ce=Object(a.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,o=yre(pie),i=Object(a.useCallback)((function(e){r&&(null==o||o.open("user",e))}),[r]);return t&&null!=t.value?u.a.createElement(Jke,{value:t.value?[t.value]:[],onMentionTagClick:i}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function GCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var KCe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GCe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreator"},e))},YCe=Object.defineProperty,JCe=Object.getOwnPropertyDescriptor,XCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?JCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YCe(t,n,i),i},ZCe=function(){return Ew((function e(){_w(this,e),this.fieldType="userId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return $Ce}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?KCe:null}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();ZCe.pluginName="render-field-user-id",XCe([Ks(lk)],ZCe.prototype,"_configuration",2),ZCe=XCe([Gs({contrib:[noe,toe]})],ZCe);var QCe=Object(a.memo)((function(e){var t=e.cell,n=null==t?void 0:t.value;return"number"==typeof n&&(n=new Date(n)),u.a.createElement(yCe,{key:null==t?void 0:t.uuid,value:n,format:"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function eEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tEe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreatedAt"},e))},nEe=Object.defineProperty,rEe=Object.getOwnPropertyDescriptor,oEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?rEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nEe(t,n,i),i},iEe=function(){return Ew((function e(){_w(this,e),this.fieldType="createdAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return QCe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?tEe:null}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();iEe.pluginName="render-field-created-at",oEe([Ks(lk)],iEe.prototype,"_configuration",2),iEe=oEe([Gs({contrib:[noe,toe]})],iEe);var aEe=Object(a.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,o=yre(pie),i=Object(a.useCallback)((function(e){r&&(null==o||o.open("user",e))}),[r]);return t?u.a.createElement(Jke,{value:t.value?[t.value]:[],onMentionTagClick:i}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function uEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var lEe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldModifier"},e))},cEe=Object.defineProperty,sEe=Object.getOwnPropertyDescriptor,dEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cEe(t,n,i),i},fEe=function(){return Ew((function e(){_w(this,e),this.fieldType="modifierId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return aEe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?lEe:null}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();fEe.pluginName="render-field-modifier-id",dEe([Ks(lk)],fEe.prototype,"_configuration",2),fEe=dEe([Gs({contrib:[noe,toe]})],fEe);var pEe=Object(a.memo)((function(e){var t=e.cell,n=null==t?void 0:t.value;return"number"==typeof n&&(n=new Date(n)),u.a.createElement(yCe,{value:n,format:"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function vEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hEe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldUpdatedAt"},e))},gEe=Object.defineProperty,mEe=Object.getOwnPropertyDescriptor,yEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?mEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gEe(t,n,i),i},bEe=function(){return Ew((function e(){_w(this,e),this.fieldType="updatedAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return pEe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?hEe:null}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();bEe.pluginName="render-field-updated-at",yEe([Ks(lk)],bEe.prototype,"_configuration",2),bEe=yEe([Gs({contrib:[noe,toe]})],bEe);var wEe=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,o=e.onCreate,i=void 0===o?function(){}:o,a=e.onUpdate,l=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,p=e.style;return u.a.createElement("div",{className:"lakex-table-file-form-upload",style:p||{}},u.a.createElement(_me,{id:t,type:Oge.IMAGE,onChange:n,onCreate:i,onUpdate:l,onRemove:s,onOrderChange:f,files:r}))};function _Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kEe=function(e){var t,n=e.file,r=e.list,o=void 0===r?[]:r,i=e.size,a=void 0===i?32:i,l=yre(pie),c=yre(nme),s=n.src;return s?(s=(null==c?void 0:c.getThumbnailUrl(s,n.width,n.height,a))||s,o=o.map((function(e){return e.src=null==c?void 0:c.getRenderUrl(e.src,e.width,e.height),e})),t=function(e){return u.a.createElement("img",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Ee(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({loading:"lazy",src:s},e))},u.a.createElement("div",{className:"lakex-table-simple-file-item image","data-id":n.uid},u.a.createElement("div",{className:"lakex-table-simple-file-img"},t&&u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container",title:n.name,placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement(t,{className:"lakex-table-simple-file-image",onClick:function(e){e.preventDefault(),e.stopPropagation();var t={list:o,index:o.findIndex((function(e){return e.src===n.src}))};null==l||l.open("image",n.src,t)}}))),u.a.createElement("div",{className:"lakex-table-simple-file-name"},n.name))):null},CEe=function(e){var t,n=e.id,r=e.value;return r?u.a.createElement("div",{className:"lakex-table-image-list",id:n},null==(t=r.map)?void 0:t.call(r,(function(e,t){return u.a.createElement(kEe,{key:e.uid||t,file:e,list:r})}))):null},EEe=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=qwe(mR.TABLE).canUpdate(),o=yre(_oe),i=(null==t?void 0:t.recordId)||"",l=(null==t?void 0:t.fieldId)||"",c=Qwe(i,l),s=c?c.value:null==t?void 0:t.value,d=Object(a.useCallback)((function(e){null==o||o.emitClickCellIcon({recordId:i,fieldId:l,event:e,iconName:"cellImageIcon"})}),[i,l]);return 0===s.length?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(CEe,{value:s}),r&&!n&&u.a.createElement(oue,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function OEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var SEe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldImage"},e))},xEe=["field","cell","recordId","defaultValue","onCellChange"];function jEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var DEe=function(e){var t=e.field,n=e.cell,r=e.recordId,o=e.defaultValue,i=e.onCellChange,a=wre(e,xEe),l=yre(nR),c=yre(dye),s=yre(nme),d=yre(fx).fieldUriModel;return t?e.renderMode===ioe.LITE?u.a.createElement("div",{className:"lakex-table-field-image-editable-lite",onClick:function(e){var n={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r}};c.open("fieldImageEditor",n)}},o?o.map((function(e){var t=s.getRenderUrl(e.src,e.width,e.height);return u.a.createElement("div",{key:e.src,className:"lakex-table-field-image-editable-wrap"},u.a.createElement("img",{loading:"lazy",src:t}))})):u.a.createElement("p",{className:"lakex-table-field-image-placeholder"},Lw("请上传"))):u.a.createElement(wEe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==n?void 0:n.uuid)||qw(32),defaultValue:o,onChange:function(e){null==i||i(e)},onOrderChange:function(e){var n,o,i=e.targetUid,a=e.sourceUid,u=null==(n=d.findOne({uid:i}))?void 0:n.get("uuid"),c=null==(o=d.findOne({uid:a}))?void 0:o.get("uuid");l.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r,targetValueId:u,sourceValueId:c})}},a)):null};function AEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var REe=function(e){return u.a.createElement(wEe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},FEe=Object.defineProperty,IEe=Object.getOwnPropertyDescriptor,PEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?IEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FEe(t,n,i),i},MEe=function(){return Ew((function e(){_w(this,e),this.fieldType="image",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return EEe}},{key:"getFieldEditComponent",value:function(){return DEe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?SEe:null}},{key:"getFieldFormComponent",value:function(){return REe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();MEe.pluginName="render-field-image",PEe([Ks(lk)],MEe.prototype,"_configuration",2),MEe=PEe([Gs({contrib:[noe,toe]})],MEe);var TEe=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,o=e.onCreate,i=void 0===o?function(){}:o,a=e.onUpdate,l=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,p=e.style;return u.a.createElement("div",{className:"lakex-table-file-form-upload",style:p||{}},u.a.createElement(_me,{id:t||qw(6),type:Oge.FILE,onChange:n,onCreate:i,onUpdate:l,onRemove:s,onOrderChange:f,files:r}))};function NEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BEe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var VEe=function(e){var t,n=e.file,r=e.size,o=void 0===r?32:r,i=yre(pie),a=yre(Pie);if(!n.src)return null;var l=null==a?void 0:a.getFileKey(n);return l&&(t=function(e){return u.a.createElement(uue,BEe(BEe({ext:l},e),{},{size:o}))}),u.a.createElement("div",{className:"lakex-table-simple-file-item file","data-id":n.uid},u.a.createElement("div",{className:"lakex-table-simple-file-img"},t&&u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container",title:n.name,placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement(t,{className:"lakex-table-simple-file-file",onClick:function(e){e.preventDefault(),e.stopPropagation();var t={size:n.size};null==i||i.open("file",n.src,t)}}))),u.a.createElement("div",{className:"lakex-table-simple-file-name"},n.name))},LEe=function(e){var t,n=e.id,r=e.value,o=void 0===r?[]:r;return o?u.a.createElement("div",{className:"lakex-table-file-list",id:n},null==(t=o.map)?void 0:t.call(o,(function(e,t){return u.a.createElement(VEe,{key:e.uid||t,file:e,size:24})}))):null},zEe=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=qwe(mR.TABLE).canUpdate(),o=yre(_oe),i=(null==t?void 0:t.recordId)||"",l=(null==t?void 0:t.fieldId)||"",c=Qwe(i,l),s=c?c.value:null==t?void 0:t.value,d=Object(a.useCallback)((function(e){i&&l&&(null==o||o.emitClickCellIcon({recordId:i,fieldId:l,event:e,iconName:"cellFileIcon"}))}),[i,l]);return 0===(null==s?void 0:s.length)?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(LEe,{value:s}),r&&!n&&u.a.createElement(oue,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function UEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var HEe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldFile"},e))},qEe=["field","recordId","cell","onCellChange"];function WEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $Ee=function(e){var t=e.field,n=e.recordId,r=e.cell,o=e.onCellChange,i=wre(e,qEe),a=yre(nR),l=yre(dye),c=yre(fx).fieldUriModel;return t&&r?e.renderMode===ioe.LITE?u.a.createElement("div",{className:"lakex-table-field-file-editable-lite",onClick:function(e){var r={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n}};l.open("fieldFileEditor",r)}},r.value?r.value.map((function(e){return u.a.createElement("div",{key:e.uid,className:"lakex-table-field-file-editable-wrap"},u.a.createElement(VEe,{key:e.uid,file:e}))})):u.a.createElement("p",{className:"lakex-table-field-file-placeholder"},Lw("请上传"))):u.a.createElement(TEe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==r?void 0:r.uuid)||qw(32),defaultValue:r.value,onChange:function(e){null==o||o(e)},onOrderChange:function(e){var r,o,i=e.targetUid,u=e.sourceUid,l=null==(r=c.findOne({uid:i}))?void 0:r.get("uuid"),s=null==(o=c.findOne({uid:u}))?void 0:o.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n,targetValueId:l,sourceValueId:s})}},i)):null};function GEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var KEe=function(e){return u.a.createElement(TEe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},YEe=Object.defineProperty,JEe=Object.getOwnPropertyDescriptor,XEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?JEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YEe(t,n,i),i},ZEe=function(){return Ew((function e(){_w(this,e),this.fieldType="file",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return zEe}},{key:"getFieldEditComponent",value:function(){return $Ee}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?HEe:null}},{key:"getFieldFormComponent",value:function(){return KEe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function QEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ZEe.pluginName="render-field-file",XEe([Ks(lk)],ZEe.prototype,"_configuration",2),ZEe=XEe([Gs({contrib:[noe,toe]})],ZEe);var eOe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QEe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldLink"},e))},tOe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.defaultValue,r=e.onSubmit,o=void 0===r?function(){}:r,i=e.onBlur,l=void 0===i?function(){}:i,c=e.style,f=yre(PF),p=Object(a.useRef)(),v=Object(a.useRef)(),g=u.a.useRef(null),y=WI(u.a.useState(!1),2),b=y[0],w=y[1];Object(a.useImperativeHandle)(t,(function(){return{getValues:function(){var e,t=null==(e=g.current)?void 0:e.getFieldsValue();return _(t)}}})),Zae((function(){e.visible&&setTimeout((function(){var e;null==(e=v.current)||e.focus({cursor:"end"})}),300)}),[n,e.visible]);var _=Object(a.useCallback)((function(e){var t={src:e.src||e.name||"",name:e.name||"",icon:e.icon||""};return{src:y_(t.src)||"http://".concat(t.src),name:t.name,icon:t.icon||""}}),[]),k=function(e){if(""===e.src&&""===e.name)return l();var t=_(e);o(t),l()};return u.a.createElement("div",{className:"lakex-table-link-editor",style:c||{},onKeyDown:function(e){var t;if(e.key===Nz.ENTER){var n=null==(t=g.current)?void 0:t.getFieldsValue();k(n)}}},u.a.createElement(E.a,{initialValues:n,onFinish:k,ref:g},u.a.createElement(E.a.Item,{name:"name",label:Lw("文本"),className:"lakex-table-link-editor-title"},u.a.createElement(s.a,{ref:p,placeholder:Lw("请输入"),autoComplete:"off",suffix:b?u.a.createElement(h.a,{className:"lakex-table-link-editor-fetch lakex-table-link-editor-fetching"}):u.a.createElement(d.a,{title:Lw("获取链接标题")},u.a.createElement(oue,{className:"lakex-table-link-editor-fetch",type:"Change",onClick:function(e){return function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=g.current)?void 0:t.getFieldsValue();w(!0),null==f||f.getLinkDetail(n.src).then((function(e){var t;e&&(null==(t=g.current)||t.setFieldsValue({name:e.title,icon:f.getIconByDetail(e)})),w(!1)}))}(e)}}))})),u.a.createElement(E.a.Item,{name:"src",label:Lw("链接"),className:"lakex-table-link-editor-link"},u.a.createElement(s.a,{ref:v,placeholder:Lw("请输入"),autoComplete:"off",onBlur:function(e){var t;e.target.value,null==(t=g.current)||t.setFieldsValue({icon:""})}})),u.a.createElement(E.a.Item,{name:"icon",style:{display:"none"}},u.a.createElement(s.a,{type:"hidden"})),u.a.createElement(E.a.Item,{className:"lakex-table-link-editor-footer"},u.a.createElement(m.a,{onClick:function(){return l()}},Lw("取消")),u.a.createElement(m.a,{type:"primary",htmlType:"submit"},Lw("确定")))))}))),nOe=function(e){var t=yre(pie);return u.a.createElement("span",{className:I()("lakex-table-ui-link",e.className),onClick:function(n){null==t||t.open("link",e.href),e.onClick&&e.onClick(n)}},e.children)},rOe=["icon"];function oOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var iOe=function(e){var t=Xae().currentTheme,n=e.icon,r=wre(e,rOe),o=Object(a.useMemo)((function(){if(!(null==n?void 0:n.startsWith("yuqueicon:")))return null;var e=n.split(":")[2],r="DocTypeDefault";return"sheet"===e?r="DocTypeSheet":"design"===e||"artboard"===e?r="DocTypeArtboard":"board"===e?r="DocTypeBoard":"mind"===e?r="DocTypeMind":"table"===e?r="DocTypeTable":"note"===e&&(r="DocTypeNote"),"dark"===t&&(r+="Dark"),r}),[t,n]);return o?u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:o},r)):null},aOe=function(e){var t,n=e.id,r=e.defaultValue,o=e.useLinkEditor,i=e.prefix,l=e.renderMode,c=e.onChange,f=void 0===c?function(){}:c,p=e.onBlur,v=void 0===p?function(){}:p,h=e.focus,g=function(e){var t=e.defaultValue,n=e.onChange,r=WI(Object(a.useState)((function(){return Jw(t)?{src:t.src,name:t.name,icon:t.icon}:t})),2),o=r[0],i=r[1],u=WI(Object(a.useState)(!1),2),l=u[0],c=u[1];Zae((function(){i(o)}),[o]);var s=Object(a.useCallback)((function(e){i(e),n(e)}),[n]);return Zae((function(){var e=function(e){e.target.closest(".lakex-table-form-link-popover")||c(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{value:o,visible:l},setVisible:c,checkLink:function(e){e.target.closest(".lakex-table-form-link-anchor")&&(o||(e.preventDefault(),e.stopPropagation(),c(!0)))},onSubmit:s,onInputChange:function(e){var r,o;if(e.target){if(!e.target.value)return void n(null);o=e.target.value,r=y_(e.target.value)}else r=e.src,o=e.name;var a={name:o,src:r,icon:(null==t?void 0:t.icon)||""};a.src||(a.src=a.name),a.name||(a.name=a.src),i(a),n(a)}}}({defaultValue:r,onChange:f}),m=g.state,y=g.setVisible,b=g.checkLink,_=g.onInputChange,k=g.onSubmit;void 0===i&&(i=u.a.createElement(oue,{type:"FieldLink",size:14}));var C=o?"lakex-table-form-link-useeditor":"";return u.a.createElement("div",{className:"lakex-table-form-link ".concat(C," lakex-table-form-link-render-mode-").concat(l),id:n},!o&&u.a.createElement(s.a,{allowClear:!0,defaultValue:null==r?void 0:r.src,type:"text",placeholder:Lw("请输入"),prefix:i,onChange:_,autoFocus:h,onBlur:v}),o&&u.a.createElement(w.a,{overlayClassName:"lakex-table-form-link-popover",destroyTooltipOnHide:!0,overlay:u.a.createElement(tOe,{defaultValue:r,onSubmit:k,onBlur:function(){return y(!1)},visible:m.visible}),visible:m.visible},u.a.createElement(u.a.Fragment,null,m.value&&(m.value.src||m.value.name)?u.a.createElement(nOe,{href:null==(t=m.value)?void 0:t.src,className:I()("lakex-table-form-link-anchor",bw({},"lakex-table-form-link-has-icon",!!m.value.icon)),onClick:function(e){b(e)}},m.value.icon&&u.a.createElement(iOe,{icon:m.value.icon,className:"lakex-table-form-link-icon"}),m.value.name):u.a.createElement(s.a,{allowClear:!0,defaultValue:null==r?void 0:r.src,type:"text",placeholder:Lw("请输入"),onBlur:_,onPressEnter:_,autoFocus:h}),u.a.createElement(d.a,{title:Lw("编辑链接")},u.a.createElement(oue,{className:"lakex-table-link-editor-action",type:"FieldLink",size:14,onClick:function(){return y(!0)}})))))},uOe=function(e){var t=e.value,n=e.showEmpty;return t?u.a.createElement("div",{className:"lakex-table-form-link-readonly"},u.a.createElement(nOe,{href:t.src,className:I()(bw({},"lakex-table-form-link-has-icon",!!t.icon))},t.icon&&u.a.createElement(iOe,{icon:t.icon,className:"lakex-table-form-link-icon"}),t.name)):n?u.a.createElement(Ege,null):null},lOe=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=qwe(mR.TABLE).isReadonly(),o=yre(_oe),i=null==t?void 0:t.recordId,a=null==t?void 0:t.fieldId,l=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),c=l?l.value:null==t?void 0:t.value;return c?u.a.createElement(u.a.Fragment,null,u.a.createElement(uOe,{key:a,value:c}),!r&&!n&&u.a.createElement(eOe,{onClick:function(e){e.stopPropagation(),i&&a&&(null==o||o.emitClickCellIcon({recordId:i,fieldId:a,iconName:"cellLinkIcon",event:e}))}})):null}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)})),cOe=["field","cell","defaultValue","onCellChange","useLinkEditor"];function sOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var dOe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=e.useLinkEditor,i=wre(e,cOe);return t?u.a.createElement(aOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({useLinkEditor:o,id:t.uuid,defaultValue:n,onChange:r},i)):null};function fOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pOe=function(e){return u.a.createElement(aOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},vOe=Object.defineProperty,hOe=Object.getOwnPropertyDescriptor,gOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?hOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vOe(t,n,i),i},mOe=function(){return Ew((function e(){_w(this,e),this.fieldType="link",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return lOe}},{key:"getFieldEditComponent",value:function(){return dOe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?eOe:null}},{key:"getFieldRules",value:function(){return this._linkField.rules}},{key:"getFieldFormComponent",value:function(){return pOe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();mOe.pluginName="render-field-link",gOe([Ks(LF)],mOe.prototype,"_linkField",2),gOe([Ks(lk)],mOe.prototype,"_configuration",2),mOe=gOe([Gs({contrib:[noe,toe]})],mOe);var yOe=function(e){var t=e.id,n=e.defaultValue,r=void 0===n?"":n,o=e.focus,i=e.onBlur,l=e.renderMode,c=e.prefix,d=Object(a.useRef)(null),f=WI(Yae({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),p=f[0],v=f[1],h=yre(pie);Zae((function(){o&&d.current&&d.current.focus({cursor:"end"})}),[o]);var g=null!==c?c:u.a.createElement(oue,{type:"FieldEmail",size:14});return u.a.createElement("div",{className:"lakex-table-form-email lakex-table-form-email-render-mode-".concat(l),id:t},u.a.createElement(s.a,{allowClear:l!==ioe.LITE,value:p,defaultValue:r,type:"text",placeholder:Lw("请输入"),prefix:g,onChange:function(t){var n,r=t.target.value;v(r),null==(n=e.onChange)||n.call(e,r)},onBlur:i,suffix:u.a.createElement(oue,{className:I()("lakex-table-form-email-action",{hasValue:p}),type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==h||h.open("email","mailto:"+p)}}),autoFocus:o,ref:d}))},bOe=function(e){var t=e.value,n=e.showEmpty,r=yre(pie);if(!t)return n?u.a.createElement(Ege,null):null;return u.a.createElement("div",{className:"lakex-table-form-email-readonly"},u.a.createElement("span",{className:"lakex-table-form-email-text"},t),u.a.createElement(oue,{className:"lakex-table-form-email-action",type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==r||r.open("email","mailto:"+t)}}))},wOe=Object(a.memo)((function(e){var t=e.cell,n=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return r?u.a.createElement(bOe,{key:null==t?void 0:t.fieldId,value:r||""}):null}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function _Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kOe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Oe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldEmail"},e))},COe=["field","cell","defaultValue","onCellChange"];function EOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var OOe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=wre(e,COe);return t?u.a.createElement(yOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value,prefix:e.renderMode===ioe.LITE?void 0:u.a.createElement(oue,{type:"FieldEmail"}),onChange:function(e){null==r||r(e)}},o)):null};function SOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xOe=function(e){return u.a.createElement(yOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},jOe=Object.defineProperty,DOe=Object.getOwnPropertyDescriptor,AOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?DOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jOe(t,n,i),i},ROe=function(){return Ew((function e(){_w(this,e),this.fieldType="email",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return wOe}},{key:"getFieldEditComponent",value:function(){return OOe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?kOe:null}},{key:"getFieldRules",value:function(){return this._emailField.rules}},{key:"getFieldFormComponent",value:function(){return xOe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();ROe.pluginName="render-field-email",AOe([Ks(kN)],ROe.prototype,"_emailField",2),AOe([Ks(lk)],ROe.prototype,"_configuration",2),ROe=AOe([Gs({contrib:[noe,toe]})],ROe);var FOe=function(e){var t=e.id,n=e.defaultValue,r=e.prefix,o=e.focus,i=e.renderMode,l=e.onChange,c=void 0===l?function(){}:l,d=e.onBlur,f=yre(pie),p=WI(Yae({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),v=p[0],h=p[1],g=null!==r?r:u.a.createElement(oue,{type:"FieldPhone"}),m=Object(a.useRef)(null);return Zae((function(){o&&m.current&&m.current.focus({cursor:"end"})}),[o]),u.a.createElement("div",{className:"lakex-table-form-phone lakex-table-form-phone-render-mode-".concat(i),id:t},u.a.createElement(s.a,{allowClear:i!==ioe.LITE,value:v,defaultValue:n,autoFocus:o,type:"text",placeholder:Lw("请输入"),prefix:g,onChange:function(e){var t=e.target.value;h(t),null==c||c(t)},onBlur:d,suffix:u.a.createElement(oue,{className:I()("lakex-table-form-phone-action",{hasValue:v}),type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==f||f.open("phone","tel:"+v)}}),ref:m}))},IOe=function(e){var t=e.value,n=e.showEmpty,r=yre(pie);if(!t)return n?u.a.createElement(Ege,null):null;return u.a.createElement("div",{className:"lakex-table-form-phone-readonly"},u.a.createElement("span",{className:"lakex-table-form-phone-text"},t),u.a.createElement(oue,{className:"lakex-table-form-phone-action",type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==r||r.open("phone","tel:"+t)}}))},POe=Object(a.memo)((function(e){var t=e.cell,n=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return null==r?null:u.a.createElement(IOe,{key:null==t?void 0:t.fieldId,value:r})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function MOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var TOe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldPhone"},e))},NOe=["field","cell","defaultValue","onCellChange"];function BOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var VOe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=wre(e,NOe);return t?u.a.createElement(FOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",prefix:e.renderMode===ioe.LITE?void 0:u.a.createElement(oue,{type:"FieldPhone"}),onChange:function(e){null==r||r(e)}},o)):null};function LOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zOe=function(e){return u.a.createElement(FOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},UOe=Object.defineProperty,HOe=Object.getOwnPropertyDescriptor,qOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?HOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UOe(t,n,i),i},WOe=function(){return Ew((function e(){_w(this,e),this.fieldType="phone",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return POe}},{key:"getFieldEditComponent",value:function(){return VOe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?TOe:null}},{key:"getFieldRules",value:function(){return this._phoneField.rules}},{key:"getFieldFormComponent",value:function(){return zOe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();WOe.pluginName="render-field-phone",qOe([Ks(RN)],WOe.prototype,"_phoneField",2),qOe([Ks(lk)],WOe.prototype,"_configuration",2),WOe=qOe([Gs({contrib:[noe,toe]})],WOe);var $Oe=function(e){var t=e.value;return t||0===Number(t)||(t=0),u.a.createElement("div",{className:"lakex-table-form-rate-readonly"},u.a.createElement(Cge,{disabled:!0,defaultValue:t,count:5,character:u.a.createElement(oue,{type:"Star"})}))},GOe=function(e){var t=e.defaultValue,n=void 0===t?0:t,r=e.value,o=e.onChange;return r||0===Number(r)||(r=0),u.a.createElement("div",{className:"lakex-table-form-rate-editable",onClick:function(e){e.preventDefault(),e.stopPropagation()}},u.a.createElement(Cge,{onChange:o,defaultValue:n,value:r,count:5,character:u.a.createElement(oue,{type:"Star"})}))},KOe=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=yre(nR),o=qwe(mR.TABLE).canUpdate(),i=Qwe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),a=(i?i.value:null==t?void 0:t.value)||0;return t&&o&&!n?u.a.createElement(GOe,{key:null==t?void 0:t.updated_at,value:a,onChange:function(e){null==r||r.execCommand("setCell",{recordId:t.recordId,fieldId:t.fieldId,value:e,fieldType:t.fieldType})}}):u.a.createElement($Oe,{key:null==t?void 0:t.updated_at,value:a})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function YOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var JOe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldRate"},e))},XOe=["field","cell","defaultValue","onCellChange"];function ZOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var QOe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=wre(e,XOe);return u.a.createElement(GOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZOe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==t?void 0:t.uuid,defaultValue:n,value:(null==t?void 0:t.value)?Number(t.value):0,onChange:function(e){null==r||r(e)}},o))};function eSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tSe=function(e){return u.a.createElement(GOe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eSe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},nSe=Object.defineProperty,rSe=Object.getOwnPropertyDescriptor,oSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?rSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nSe(t,n,i),i},iSe=function(){return Ew((function e(){_w(this,e),this.fieldType="rate",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return KOe}},{key:"getFieldEditComponent",value:function(){return QOe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?JOe:null}},{key:"getFieldRules",value:function(){return this._rateField.rules}},{key:"getFieldFormComponent",value:function(){return tSe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();iSe.pluginName="render-field-rate",oSe([Ks(Nbe)],iSe.prototype,"_rateField",2),oSe([Ks(lk)],iSe.prototype,"_configuration",2),iSe=oSe([Gs({contrib:[noe,toe]})],iSe);var aSe=["blue-6","magenta-6","orange-6","pea-green-6","purple-6","red-6","yuque-green-6","blue-2,blue-3,blue-4,blue-5,blue-6","magenta-2,magenta-3,magenta-4,magenta-5,magenta-6","orange-2,orange-3,orange-4,orange-5,orange-6","pea-green-2,pea-green-3,pea-green-4,pea-green-5,pea-green-6","purple-2,purple-3,purple-4,purple-5,purple-6","red-2,red-3,red-4,red-5,red-6","yuque-green-2,yuque-green-3,yuque-green-4,yuque-green-5,yuque-green-6"],uSe=function(e,t,n){var r=t.split(",");if(1===r.length)return e.toThemeColor("@".concat(t));var o=r.length,i=Math.floor(100/o),a=Math.min(Math.floor(n/i),o-1);return e.toThemeColor("@".concat(r[a]))},lSe=function(e){if(1===e.length)return e[0];var t=100/e.length,n=[];return e.forEach((function(e,r){n.push("".concat(e," ").concat(t*r,"%")),n.push("".concat(e," ").concat(t*(r+1),"%"))})),"linear-gradient(to right, ".concat(n.join(","),")")},cSe=function(e){var t=e.value,n=e.onChange,r=e.color,o=void 0===r?"blue-6":r,i=Xae().themeHelper,l=WI(Object(a.useState)(t),2),c=l[0],s=l[1],d=WI(Object(a.useState)(o),2),f=d[0],p=d[1];return t||0===Number(t)||(t=0),Zae((function(){s(t)}),[t]),Zae((function(){p(o)}),[o]),u.a.createElement("div",{className:"lakex-table-form-progress-editable"},u.a.createElement(bge,{prefixCls:"".concat("ant","-slider"),range:!1,onChangeComplete:n,styles:{track:{backgroundColor:f&&uSe(i,f,c)}},onChange:function(e){s(e)},value:c}),u.a.createElement("span",{className:"lakex-table-form-progress-value"},c,"%"))},sSe=function(e){var t=e.value,n=e.color,r=Xae().themeHelper;return t||0===Number(t)||(t=0),u.a.createElement("div",{className:"lakex-table-form-progress-readonly"},u.a.createElement(O.a,{percent:t,showInfo:!1,strokeColor:uSe(r,n,t)}),u.a.createElement("span",{className:"lakex-table-form-progress-value"},t,"%"))},dSe=Object(a.memo)((function(e){var t,n,r=e.cell,o=e.field,i=e.readonly,a=Ywe((null==o?void 0:o.get("uuid"))||""),l=yre(nR),c=qwe(mR.TABLE).canUpdate(),s=Qwe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),d=(s?s.value:null==r?void 0:r.value)||0;return r&&c&&!i?u.a.createElement(cSe,{key:null==r?void 0:r.updated_at,value:d,color:(null==(t=null==a?void 0:a.field)?void 0:t.get("color"))||"blue-6",onChange:function(e){null==l||l.execCommand("setCell",{recordId:r.recordId,fieldId:r.fieldId,value:e,fieldType:r.fieldType})}}):u.a.createElement(sSe,{key:null==r?void 0:r.updated_at,color:(null==(n=null==a?void 0:a.field)?void 0:n.get("color"))||"blue-6",value:d})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function fSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pSe=function(e){return u.a.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fSe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldProgress"},e))},vSe=["field","cell","defaultValue","onCellChange"];function hSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gSe=function(e){var t=e.field,n=e.cell;e.defaultValue;var r=e.onCellChange,o=wre(e,vSe);return u.a.createElement(cSe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hSe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==n?void 0:n.uuid,value:(null==n?void 0:n.value)?Number(n.value):0,color:(null==t?void 0:t.get("color"))||"blue-6",onChange:function(e){null==r||r(e)}},o))};function mSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ySe=function(e){return u.a.createElement(cSe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mSe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},bSe=Object.defineProperty,wSe=Object.getOwnPropertyDescriptor,_Se=function(e,t,n,r){for(var o,i=r>1?void 0:r?wSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bSe(t,n,i),i},kSe=function(){return Ew((function e(){_w(this,e),this.fieldType="progress",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return dSe}},{key:"getFieldEditComponent",value:function(){return gSe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?pSe:null}},{key:"getFieldRules",value:function(){return this._progressField.rules}},{key:"getFieldFormComponent",value:function(){return ySe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function CSe(e,t,n){return t=dk(t),sk(e,ESe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function ESe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ESe=function(){return!!e})()}kSe.pluginName="render-field-progress",_Se([Ks($be)],kSe.prototype,"_progressField",2),_Se([Ks(lk)],kSe.prototype,"_configuration",2),kSe=_Se([Gs({contrib:[noe,toe]})],kSe);var OSe=Object.defineProperty,SSe=Object.getOwnPropertyDescriptor,xSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?SSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OSe(t,n,i),i},jSe=function(e){function t(){var e;return _w(this,t),(e=CSe(this,t,arguments))._onShowNewGroup=e._register(new Lk),e.onShowNewGroup=e._onShowNewGroup.event,e._onShowEditGroup=e._register(new Lk),e.onShowEditGroup=e._onShowEditGroup.event,e}return vk(t,e),Ew(t,[{key:"showNewGroup",value:function(e,t){this._onShowNewGroup.emit({target:e,groupField:t})}},{key:"showEditGroup",value:function(e,t,n){this._onShowEditGroup.emit({target:e,groupField:t,groupOption:n})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);xSe([Ts()],jSe.prototype,"destroy",1),jSe=xSe([Gs()],jSe);var DSe=Object.defineProperty,ASe=Object.getOwnPropertyDescriptor,RSe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(this).register(jSe)}}])}();RSe.pluginName="render-group",RSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?ASe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DSe(t,n,i),i}([Gs({contrib:[sre,fye]})],RSe);var FSe=Is.defineToken("HighlightRenderPluginContribution");function ISe(e,t,n){return t=dk(t),sk(e,PSe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function PSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PSe=function(){return!!e})()}var MSe=Object.defineProperty,TSe=Object.getOwnPropertyDescriptor,NSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?TSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&MSe(t,n,i),i},BSe=function(e){function t(){var e;return _w(this,t),(e=ISe(this,t,arguments))._highlightCellIds=new Set,e._highlightRecordIds=new Set,e._onChange=e._register(new Lk),e.onChange=e._onChange.event,e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){this._clear(),this._onChange.destroy()}},{key:"_getCellIdByHighlightItem",value:function(e){return e.fieldId?"".concat(e.recordId,"-").concat(e.fieldId):null}},{key:"_setHighlightColor",value:function(e){var t=document.querySelector(":root");null==t||t.style.setProperty("--view-highlight-bg-color",e)}},{key:"_removeHighlightColor",value:function(){var e=document.querySelector(":root");null==e||e.style.removeProperty("--view-highlight-bg-color")}},{key:"isInHighlight",value:function(e){if(Zw(e.recordId))return!1;if(!Zw(e.fieldId)){var t=this._getCellIdByHighlightItem(e);return this._highlightCellIds.has(t)}return this._highlightRecordIds.has(e.recordId)}},{key:"setHighlights",value:function(e,t){var n=this;this._clear(),t&&this._setHighlightColor(t),e.forEach((function(e){var t=e.recordId;t&&n._highlightRecordIds.add(t);var r=n._getCellIdByHighlightItem(e);r&&n._highlightCellIds.add(r)})),this._notify()}},{key:"clearHighlights",value:function(){this._clear(),this._notify()}},{key:"_clear",value:function(){this._removeHighlightColor(),this._highlightCellIds.clear(),this._highlightRecordIds.clear()}},{key:"_notify",value:function(){this._onChange.emit({highlightCellIds:this._highlightCellIds,highlightRecordIds:this._highlightRecordIds})}}])}(bk);NSe([Ts()],BSe.prototype,"destroy",1),BSe=NSe([Gs()],BSe);var VSe=Object.defineProperty,LSe=Object.getOwnPropertyDescriptor,zSe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().contribution(FSe).register(this).register(BSe)}}])}();zSe.pluginName="render-highlight",zSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?LSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VSe(t,n,i),i}([Gs({contrib:toe})],zSe);var USe=Is.defineToken("WorkbenchHotkeyContribution"),HSe=Is.defineToken("SelectionRenderPluginScrollContribution");var qSe=function(){function e(t,n){_w(this,e),n||(n=t);var r,o,i,a,u,l,c=(o=n,i=(r=t).column,a=r.row,u=o.column,l=o.row,{minColumn:Math.min(i,u),maxColumn:Math.max(i,u),minRow:Math.min(a,l),maxRow:Math.max(a,l)}),s=c.minRow,d=c.minColumn,f=c.maxRow,p=c.maxColumn;this._start=new BB(s,d,t.rowCount,t.columnCount),this._end=new BB(f,p,n.rowCount,n.columnCount),this._isCollapsed=BB.equal(t,this._end)}return Ew(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"isCollapsed",get:function(){return this._isCollapsed}},{key:"rowCount",get:function(){return this._start.rowCount}},{key:"columnCount",get:function(){return this._start.columnCount}},{key:"cloneRange",value:function(){return new e(this._start,this._end)}}],[{key:"createAt",value:function(t,n){return new e(t,n)}},{key:"equal",value:function(e,t){return!(!e||!t)&&(e===t||BB.equal(e.start,t.start)&&BB.equal(e.end,t.end))}}])}(),WSe=function(){function e(t){_w(this,e),this._recordId=t}return Ew(e,[{key:"isCollapsed",get:function(){return!0}},{key:"recordId",get:function(){return this._recordId}},{key:"cloneRange",value:function(){return new e(this._recordId)}}],[{key:"createAt",value:function(t){return new e(t)}},{key:"equal",value:function(e,t){return e._recordId===t._recordId}}])}();var $Se=function(){function e(t,n,r){if(_w(this,e),this._anchor=n,this._focus=r,this._ranges=[],0===t.length)throw new Error("ranges construct error");var o;this._ranges=1===(o=t.slice()).length?gw(o):o.sort((function(e,t){return e.start.row<t.start.row?-1:e.start.row>t.start.row?1:e.start.column-t.start.column}))}return Ew(e,[{key:"destroy",value:function(){delete this._ranges,delete this._anchor,delete this._focus}},{key:"type",get:function(){return 0===this.rangeCount?NB.NONE:this.isCollapsed?NB.CARET:NB.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"isMultiSelection",get:function(){return this._ranges.length>1}},{key:"isAllSelect",get:function(){return 1===this._ranges.length&&0===this._ranges[0].start.row&&0===this._ranges[0].start.column&&this._ranges[0].end.row===this._ranges[0].start.rowCount-1&&this._ranges[0].end.column===this._ranges[0].start.columnCount-1}},{key:"focus",get:function(){return this._focus}},{key:"anchor",get:function(){return this._anchor}},{key:"rowCount",get:function(){return this.anchor.rowCount}},{key:"columnCount",get:function(){return this.anchor.columnCount}},{key:"isValid",value:function(){return this._ranges.length>0}},{key:"cloneSelection",value:function(){return new e(this._ranges.map((function(e){return e.cloneRange()})),this._anchor,this._focus)}},{key:"getRangeAt",value:function(e){return this._ranges[e]}}],[{key:"createBy",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t[0].start,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t[t.length-1].end)}},{key:"equal",value:function(e,t){if(e.ranges.length!==t.ranges.length)return!1;if(e.rowCount!==t.rowCount||e.columnCount!==t.columnCount)return!1;for(var n=0;n<e.ranges.length;n++)if(!qSe.equal(e.ranges[n],t.ranges[n]))return!1;return!0}}])}(),GSe=function(){function e(t){if(_w(this,e),this._ranges=[],0===t.length)throw new Error("ranges construct error");this._ranges=t.slice()}return Ew(e,[{key:"type",get:function(){return 0===this.rangeCount?NB.NONE:this.isCollapsed?NB.CARET:NB.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"destroy",value:function(){delete this._ranges}},{key:"getRangeAt",value:function(e){return this._ranges[e]}},{key:"removeAllRanges",value:function(){this._ranges=[]}},{key:"removeRange",value:function(e){var t=this._ranges.findIndex((function(t){return t.recordId===e.recordId}));return this._ranges.splice(t,1)}}],[{key:"createBy",value:function(t){return new e(t)}}])}();function KSe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return YSe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YSe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function YSe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JSe(e,t,n){return t=dk(t),sk(e,XSe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function XSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XSe=function(){return!!e})()}var ZSe=Object.defineProperty,QSe=Object.getOwnPropertyDescriptor,exe=function(e,t,n,r){for(var o,i=r>1?void 0:r?QSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ZSe(t,n,i),i};function txe(e){return e instanceof $Se}var nxe=function(e){function t(){var e;return _w(this,t),(e=JSe(this,t,arguments))._onChange=e._register(new Lk),e.onChange=e._onChange.event,e._onAnchorChange=e._register(new Lk),e.onAnchorChange=e._onAnchorChange.event,e._selection=null,e._prevSelection=null,e._fieldValue=null,e._editable=!0,e._kanbanScrollService=null,e._cardScrollService=null,e._gridScrollService=null,e}return vk(t,e),Ew(t,[{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"gridScrollService",get:function(){return this._gridScrollService}},{key:"setKanbanScrollService",value:function(e){this._kanbanScrollService=e}},{key:"setCardScrollService",value:function(e){this._cardScrollService=e}},{key:"setGridScrollService",value:function(e){this._gridScrollService=e}},{key:"destroy",value:function(){this._selection=null,this._onChange.destroy(),this._onAnchorChange.destroy()}},{key:"hasSelection",value:function(){return null!==this._selection}},{key:"getSelection",value:function(){return this._selection}},{key:"getFieldValue",value:function(){return this._currentViewType===sE.GRID?this._fieldValue:null}},{key:"getFieldValues",value:function(){return this._selection instanceof $Se?this._getSelectFieldValues(this._selection):null}},{key:"setSelection",value:function(e){var t,n,r,o=this._readService.getActiveView();if(o){if(this._prevSelection=this._selection,o.get("type")===sE.GRID){if((r=Array.isArray(e)?$Se.createBy(e):e.cloneSelection())instanceof $Se&&this._prevSelection instanceof $Se&&BB.equal(r.anchor,this._prevSelection.anchor)){if(r instanceof $Se&&this._fieldValue){var i=this._readService.getFlatViewRecords(o.get("uuid")),a=this._readService.getViewFields(o.get("uuid"))||[],u=null==(t=i.get(r.anchor.row))?void 0:t.get("record_uuid"),l=null==(n=a.get(r.anchor.column))?void 0:n.get("field_uuid");this._fieldValue.recordId===u&&this._fieldValue.fieldId===l||(this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue}))}}else this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue});if(this._prevSelection instanceof $Se&&r instanceof $Se&&$Se.equal(r,this._prevSelection))return}else r=e;this._selection=r,this._onChange.emit({selection:this._selection,editable:this._editable})}}},{key:"removeSelection",value:function(){this._selection=null,this._prevSelection=null,this._fieldValue=null,this._editable=!0,this._onChange.emit({selection:null}),this._onAnchorChange.emit({selection:null,fieldValue:null})}},{key:"createGridSelectionByScope",value:function(e,t,n,r){return this._editable=!0,function(e,t,n,r){var o=new BB(e.row,e.column,n,r),i=new BB(t.row,t.column,n,r),a=qSe.createAt(o,i);return $Se.createBy([a],o,i)}(e,t,n,r)}},{key:"createGridSelectionByIndex",value:function(e,t,n,r){if(this._editable=!0,Bu(n)||Bu(r)){var o=this._readService.getActiveView();n=Bu(n)?(this._readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[]).length:n,r=Bu(r)?(this._readService.getViewFields(null==o?void 0:o.get("uuid"))||[]).length:r}return function(e,t,n,r){var o=qSe.createAt(new BB(e,t,n,r),new BB(e,t,n,r));return $Se.createBy([o])}(e,t,n,r)}},{key:"createRowGridSelectionByIndex",value:function(e,t,n){return this._editable=!0,Array.isArray(e)&&0===e.length?(this.removeSelection(),null):function(e,t,n){if(Array.isArray(e)){var r=Ju(e).sort(),o=[],i=r[0],a=r[0];return r.forEach((function(e,u){if(!(r[u+1]>=0&&r[u+1]===e+1)){a=e;var l=qSe.createAt(new BB(i,0,t,n),new BB(a,n-1,t,n));o.push(l),i=r[u+1]}})),$Se.createBy(o)}var u=qSe.createAt(new BB(e,0,t,n),new BB(e,n-1,t,n));return $Se.createBy([u])}(e,t,n)}},{key:"createColumnGridSelectionByIndex",value:function(e,t,n){return this._editable=!0,function(e,t,n){var r=qSe.createAt(new BB(0,e,t,n),new BB(t-1,e,t,n));return $Se.createBy([r])}(e,t,n)}},{key:"createSelectionById",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._editable=n;var r=this._readService.getActiveView();if(!r)return null;if(r.get("type")===sE.GRID){var o=this._readService.getViewFields(r.get("uuid"))||[],i=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=0;t&&"string"==typeof t&&(a=ek(o,(function(e){return e.get("field_uuid")===t})));var u=ek(i,(function(t){return t.get("record_uuid")===e})),l=qSe.createAt(new BB(u,a,i.length,o.length));return $Se.createBy([l])}var c=WSe.createAt(e);return GSe.createBy([c])}},{key:"moveToRecord",value:function(e){var t=this._readService.getActiveView(),n=this._readService.getFlatViewRecords(null==t?void 0:t.get("uuid")),r=ek(n,(function(t){return t.get("record_uuid")===e}));if(!(r<0)){if((null==t?void 0:t.get("type"))===sE.GRID){var o=this._readService.getViewFieldsCount(),i=this.createGridSelectionByIndex(r,0,n.length,o);this.scrollToSelection(i,"end")}if((null==t?void 0:t.get("type"))===sE.KANBAN&&this._kanbanScrollService){var a=this._readService.getGroupViewRecords(null==t?void 0:t.get("uuid")),u=this._kanbanScrollService.getKanbanGroupPositionByRecordId(e,a),l=u.index,c=u.groupId;c&&l>=0&&this._kanbanScrollIntoView(c,l,"end")}(null==t?void 0:t.get("type"))===sE.CARD&&this._cardScrollIntoView(r,"center")}}},{key:"moveUp",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtRowStart?null:$Se.createBy([qSe.createAt(new BB(e.row-1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveDown",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtRowEnd?null:$Se.createBy([qSe.createAt(new BB(e.row+1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveLeft",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtColumnStart?e.isAtRowStart?null:$Se.createBy([qSe.createAt(new BB(e.row-1,e.columnCount-1,e.rowCount,e.columnCount))]):$Se.createBy([qSe.createAt(new BB(e.row,e.column-1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveRight",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtColumnEnd?e.isAtRowEnd?null:$Se.createBy([qSe.createAt(new BB(e.row+1,0,e.rowCount,e.columnCount))]):$Se.createBy([qSe.createAt(new BB(e.row,e.column+1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveFocusUp",value:function(){if(this._selection&&this._selection instanceof $Se){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowStart){var r=e.getRangeAt(0),o=new BB(n.row-1,n.column,r.rowCount,r.columnCount);return $Se.createBy([qSe.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusDown",value:function(){if(this._selection&&this._selection instanceof $Se){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowEnd){var r=e.getRangeAt(0),o=new BB(n.row+1,n.column,r.rowCount,r.columnCount);return $Se.createBy([qSe.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveFocusLeft",value:function(){if(this._selection&&this._selection instanceof $Se){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnStart){var r=e.getRangeAt(0),o=new BB(n.row,n.column-1,r.rowCount,r.columnCount);return $Se.createBy([qSe.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusRight",value:function(){if(this._selection&&this._selection instanceof $Se){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnEnd){var r=e.getRangeAt(0),o=new BB(n.row,n.column+1,r.rowCount,r.columnCount);return $Se.createBy([qSe.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveTop",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtRowStart?null:$Se.createBy([qSe.createAt(new BB(0,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveBottom",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtRowEnd?null:$Se.createBy([qSe.createAt(new BB(e.rowCount-1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveFirstLeft",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtColumnStart?null:$Se.createBy([qSe.createAt(new BB(e.row,0,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveLastRight",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof $Se&&!t){var n=(e=this._selection.anchor).isAtColumnEnd?null:$Se.createBy([qSe.createAt(new BB(e.row,e.columnCount-1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"selectAll",value:function(){var e=this._readService.getActiveView();if(e&&e.get("type")===sE.GRID){var t=this._readService.getViewRecordsCount(e.get("uuid")),n=this._readService.getViewFieldsCount(e.get("uuid")),r=this.createGridSelectionByScope({row:0,column:0},{row:t-1,column:n-1},t,n);this.setSelection(r)}}},{key:"getSelectBoundingRect",value:function(){if(this._selection){var e=this._renderContext.$root,t=this.getSelectAnchorTarget();if(t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom?null:DOMRect.fromRect({x:r.x,y:r.y,width:r.width,height:r.height})}}return null}},{key:"_getSelectPositionTarget",value:function(e){return this._renderContext.$root.querySelector('.lakex-viewer-grid-row[data-row="'.concat(e.row,'"] .lakex-viewer-grid-cell[data-col="').concat(e.column,'"]'))}},{key:"getSelectAnchorTarget",value:function(e){return!e&&this._selection instanceof $Se&&(e=this._selection),e?this._getSelectPositionTarget(e.anchor):null}},{key:"getSelectFocusTarget",value:function(e){return!e&&this._selection instanceof $Se&&(e=this._selection),e?this._getSelectPositionTarget(e.focus):null}},{key:"isSelectOneCell",value:function(){var e;return(null==(e=this._selection)?void 0:e.isCollapsed)||!1}},{key:"isSelectOneCol",value:function(e){var t=this._selection;if(!t)return!1;if(this._currentViewType===sE.GRID){var n=t.anchor,r=t.focus,o=t.rowCount;return 0===n.row&&r.row===o-1&&n.column===r.column&&n.column===e}return!1}},{key:"isInSelect",value:function(e,t){var n=this._selection;if(!n)return!1;var r,o=KSe(n.ranges);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.start,u=i.end;if(e>=a.row&&e<=u.row&&t>=a.column&&t<=u.column)return!0}}catch(e){o.e(e)}finally{o.f()}return!1}},{key:"isInRowsSelect",value:function(e){var t=this._selection;if(!t)return!1;var n,r=KSe(t.ranges);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=o.start,a=o.end,u=o.columnCount;if(0===i.column&&a.column===u-1&&e>=i.row&&e<=a.row)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"isRowSelection",value:function(){var e,t,n=this._selection;return!!n&&(e=n.ranges,t=function(e){var t=e.start,n=e.end,r=e.columnCount;return 0===t.column&&n.column===r-1},(rr(e)?Cu:Eu)(e,nu(t)))}},{key:"isActiveCell",value:function(e,t){var n=this._selection;return!!n&&(n.anchor.column===t&&n.anchor.row===e)}},{key:"isSelectionEnd",value:function(e,t){var n=this._selection;if(!n)return!1;var r=n.ranges[n.ranges.length-1];return r.end.column===t&&r.end.row===e}},{key:"isEditable",value:function(){return this._editable}},{key:"getSelectRowIndexes",value:function(e){if(!(e=e||this._selection))return[];var t,n=[],r=KSe(e.ranges);try{for(r.s();!(t=r.n()).done;){var o=t.value;n=n.concat(Array.from({length:o.end.row-o.start.row+1}).fill(o.start.row).map((function(e,t){return e+t})))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"scrollToAnchorPosition",value:function(e,t,n){var r=this,o=null==e?void 0:e.anchor;if(o){var i=gw(document.querySelectorAll("[data-tr-row]")).find((function(e){return Number(e.getAttribute("data-tr-row"))===o.row})),a=i?Number(i.getAttribute("data-index")):o.row;this._gridScrollIntoView(a,t,(function(){requestAnimationFrame((function(){var t,o=r.getSelectAnchorTarget(e);o&&(null==(t=r._gridScrollService)||t.horizontalScroll(o,e.anchor.column)),r.setSelection(e),n&&n()}))}))}}},{key:"scrollToFocusPosition",value:function(e,t,n){var r=this,o=null==e?void 0:e.focus;this._gridScrollIntoView(o.row,t,(function(){requestAnimationFrame((function(){var t,o=r.getSelectFocusTarget(e);o&&(null==(t=r._gridScrollService)||t.horizontalScroll(o,e.focus.column)),r.setSelection(e),n&&n()}))}))}},{key:"scrollToSelection",value:function(e,t,n){var r=this;if(e){var o=this._readService.getActiveView();if((null==o?void 0:o.get("type"))===sE.GRID)this.scrollToFocusPosition(e,t,n);else if((null==o?void 0:o.get("type"))===sE.KANBAN&&this._kanbanScrollService){var i=e.getRangeAt(0).recordId,a=this._readService.getGroupViewRecords(null==o?void 0:o.get("uuid")),u=this._kanbanScrollService.getKanbanGroupPositionByRecordId(i,a),l=u.index,c=u.groupId;c&&l>=0&&this._kanbanScrollIntoView(c,l,t,(function(){var t,o;null==(o=null==(t=r._kanbanScrollService)?void 0:t.scrollers[c])||o.scrollIntoView(),r.setSelection(e),n&&n()}))}else if((null==o?void 0:o.get("type"))===sE.CARD){for(var s=e.getRangeAt(0).recordId,d=this._readService.getViewRecords(null==o?void 0:o.get("uuid")),f=-1,p=0;p<d.length;p++){if(d.get(p).get("record_uuid")===s){f=p;break}}f>=0&&this._cardScrollIntoView(f,t,(function(){r.setSelection(e),n&&n()}))}else this.setSelection(e),n&&n()}}},{key:"_gridScrollIntoView",value:function(e,t,n){var r;null==(r=this._gridScrollService)||r.scrollIntoView({index:e,align:t,done:function(){n&&n()}})}},{key:"_kanbanScrollIntoView",value:function(e,t,n,r){var o;null==(o=this._kanbanScrollService)||o.scrollIntoView(e,{index:t,align:n,done:function(){r&&r()}})}},{key:"_cardScrollIntoView",value:function(e,t,n){var r;null==(r=this._cardScrollService)||r.scrollToIndex({index:e,align:t}),n&&n()}},{key:"_getSelectFieldValue",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var o=e.anchor,i=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),u=null==(t=i.get(o.column))?void 0:t.get("field_uuid"),l=null==(n=a.get(o.row))?void 0:n.get("record_uuid");return u&&l?this._readService.getCell(u,l):null}},{key:"_getSelectFieldValues",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;for(var o=this._readService.getViewFields(r.get("uuid"))||[],i=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=[],u=e.getRangeAt(0),l=u.start.row;l<=u.end.row;l++)for(var c=u.start.column;c<=u.end.column;c++){var s=null==(t=null==o?void 0:o.get(c))?void 0:t.get("field_uuid"),d=null==(n=i.get(l))?void 0:n.get("record_uuid");if(s&&d){var f=this._readService.getCell(s,d);f&&a.push(f)}}return a}},{key:"getRecordIds",value:function(e){var t=[];if(!e)return t;var n=this._readService.getActiveView();if(!n)return t;for(var r=this._readService.getFlatViewRecords(n.get("uuid"))||[],o=this.getSelectRowIndexes(e),i=0;i<r.length;i++)o.includes(i)&&t.push(r.get(i).get("record_uuid"));return t}},{key:"getRecordId",value:function(e){var t;if(!(e&&e instanceof $Se))return null;var n=this._readService.getActiveView();if(!n)return null;var r=e.anchor,o=null==(t=this._readService.getFlatViewRecords(n.get("uuid")).get(r.row))?void 0:t.get("record_uuid");return o||null}},{key:"getAnchorPosition",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var o=e.anchor,i=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),u=null==(t=i.get(o.column))?void 0:t.get("field_uuid"),l=null==(n=a.get(o.row))?void 0:n.get("record_uuid");return u&&l?{fieldId:u,recordId:l}:null}}])}(bk);function rxe(){var e=yre(nxe),t=yre(oA),n=null==e?void 0:e.getFieldValue(),r=WI(Object(a.useState)(t.getCell(null==n?void 0:n.fieldId,null==n?void 0:n.recordId)),2),o=r[0],i=r[1];return Zae((function(){var n=null==e?void 0:e.onChange((function(){var n=null==e?void 0:e.getFieldValue();if(!n)return null;i(t.getCell(n.fieldId,n.recordId))}));return function(){null==n||n.destroy()}}),[]),n?o:null}function oxe(e){var t=yre(nxe),n=WI(Object(a.useState)(null),2),r=n[0],o=n[1],i=rxe(),u=Object(a.useCallback)((function(){var e=null==t?void 0:t.getSelectBoundingRect();return e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}),[]),l=Object(a.useCallback)((function(){var e=u();o(e)}),[]);return Object(a.useLayoutEffect)((function(){var t=setTimeout((function(){e&&l()}),80);return function(){clearTimeout(t)}}),[e,null==i?void 0:i.formatValue]),Object(a.useLayoutEffect)((function(){e&&l()}),[e]),r}exe([Ks(oA)],nxe.prototype,"_readService",2),exe([Ks(doe)],nxe.prototype,"_renderContext",2),exe([Ts()],nxe.prototype,"destroy",1),nxe=exe([Gs()],nxe);var ixe=function(e){return e.laketable="text/laketable",e.text="text/plain",e.html="text/html",e}(ixe||{});function axe(e){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.clip="rect(0, 0, 0, 0)",document.body.appendChild(t),t.innerHTML=e;var n=document.createRange(),r=window.getSelection(),o=t.querySelector("table");if(!o||!r)return!1;n.selectNodeContents(o),r.removeAllRanges(),r.addRange(n);var i=!1;try{if(!(i=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(e){throw new Error("unable to copy using execCommand: ",{cause:e})}finally{t.remove(),r.removeAllRanges()}return i}function uxe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lxe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lxe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function lxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var cxe=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"_setDataToInnerCache",value:function(t){e._innerCache.push(t)}},{key:"_getDataFromInnerCache",value:function(){return e._innerCache[e._innerCache.length-1]}},{key:"getFilesFromClipBoard",value:function(e){var t=e&&(e.dataTransfer||e.clipboardData);if(!t)return null;var n=t.getData(ixe.text),r=[];try{t.items&&t.items.length>0?r=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=n.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(r=Array.from(t.files))}catch(e){t.files&&t.files.length>0&&(r=Array.from(t.files))}return r}},{key:"getClipboardData",value:(r=UC(jk.mark((function t(n,r,o){var i,a;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==o?void 0:o.disableClipboardApi)){t.next=5;break}if(i=e._getDataFromInnerCache()){t.next=4;break}return t.abrupt("return",null);case 4:return t.abrupt("return",i[n]);case 5:if(!r){t.next=9;break}if(!(a=e.getClipboardDataFromClipboardEvent(r,n))){t.next=9;break}return t.abrupt("return",a);case 9:return t.next=11,e.getClipboardDataFromClipboardApi(n);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"getClipboardDataFromClipboardEvent",value:function(e,t){var n,r=e&&(e.dataTransfer||e.clipboardData);return r?null==(n=r.getData)?void 0:n.call(r,t):null}},{key:"getClipboardDataFromClipboardApi",value:(n=UC(jk.mark((function t(n){var r,o,i,a,u,l,c,s,d,f;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=navigator.clipboard)?void 0:r.read){t.next=3;break}return e.notSupportClipboardApiToast(),t.abrupt("return",null);case 3:return t.prev=3,t.next=6,navigator.clipboard.read();case 6:o=t.sent,i=uxe(o),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=37;break}u=a.value,l=uxe(u.types),t.prev=13,l.s();case 15:if((c=l.n()).done){t.next=27;break}if((s=c.value)!==n){t.next=25;break}return t.next=20,u.getType(s);case 20:return d=t.sent.text(),t.next=23,d;case 23:return f=t.sent,t.abrupt("return",f);case 25:t.next=15;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(13),l.e(t.t0);case 32:return t.prev=32,l.f(),t.finish(32);case 35:t.next=10;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(8),i.e(t.t1);case 42:return t.prev=42,i.f(),t.finish(42);case 45:t.next=51;break;case 47:t.prev=47,t.t2=t.catch(3),"NotAllowedError"===t.t2.name&&e.notAllowClipboardApiToast(),console.error("getClipboardDataFromClipboardApi err",t.t2);case 51:return t.abrupt("return",null);case 52:case"end":return t.stop()}}),t,null,[[3,47],[8,39,42,45],[13,29,32,35]])}))),function(e){return n.apply(this,arguments)})},{key:"writeToClipboardData",value:(t=UC(jk.mark((function t(n,r,o){var i,a;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==o?void 0:o.disableClipboardApi)){t.next=3;break}return e._setDataToInnerCache(n),t.abrupt("return");case 3:if(!(null==r?void 0:r.setData)){t.next=8;break}return null!=n.laketable&&r.setData(ixe.laketable,n.laketable),null!=n.html&&r.setData(ixe.html,n.html),null!=n.text&&r.setData(ixe.text,n.text),t.abrupt("return");case 8:if(!n.html){t.next=21;break}return axe(n.html),t.prev=10,i=new Blob([n.html],{type:ixe.html}),a=new ClipboardItem(bw({},ixe.html,i)),t.next=15,navigator.clipboard.write([a]);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(10),console.error("writeToClipboardDataByClipboardApi err",t.t0),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[10,17]])}))),function(e,n,r){return t.apply(this,arguments)})}]);var t,n,r}();cxe._innerCache=[],cxe.notSupportClipboardApiToast=fu((function(){v.a.error(Lw("当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问"))}),100),cxe.notAllowClipboardApiToast=fu((function(){v.a.error(Lw("当前访问剪贴板数据被禁止了，请打开剪贴板访问权限"))}),100);var sxe=cxe,dxe=Is.defineToken("ViewerGridPluginRecordContribution"),fxe=Is.defineToken("ViewerGridPluginStatisticsContribution"),pxe=Is.defineToken("ViewerGridPluginAddFieldContribution"),vxe=Is.defineToken("ViewerGridPluginAddRecordContribution"),hxe=Object.defineProperty,gxe=Object.getOwnPropertyDescriptor,mxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?gxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hxe(t,n,i),i},yxe=function(){return Ew((function e(){var t=this;_w(this,e),this.UNGROUP_KEY="ungroup",this.Record=null,this.Statistics=null,this.AddField=null,this.AddRecord=null,this._getRecordComponent=function(){var e,n,r=t.viewerGridPluginRecordProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getRecordComponent)?void 0:n.call(e):null},this._getStatisticsComponent=function(){var e,n,r=t.viewerGridPluginStatisticsProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getStatisticsComponent)?void 0:n.call(e):null},this._getAddFieldComponent=function(){var e,n,r=t.viewerGridPluginAddFieldProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getAddFieldComponent)?void 0:n.call(e):null},this._getAddRecordComponent=function(){var e,n,r=t.viewerGridPluginAddRecordProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getAddRecordComponent)?void 0:n.call(e):null}}),[{key:"init",value:function(){this.Record=this._getRecordComponent(),this.Statistics=this._getStatisticsComponent(),this.AddField=this._getAddFieldComponent(),this.AddRecord=this._getAddRecordComponent()}}])}();function bxe(e,t,n){return t=dk(t),sk(e,wxe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function wxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wxe=function(){return!!e})()}mxe([yd(dxe)],yxe.prototype,"viewerGridPluginRecordProvider",2),mxe([yd(fxe)],yxe.prototype,"viewerGridPluginStatisticsProvider",2),mxe([yd(pxe)],yxe.prototype,"viewerGridPluginAddFieldProvider",2),mxe([yd(vxe)],yxe.prototype,"viewerGridPluginAddRecordProvider",2),yxe=mxe([Gs()],yxe);var _xe=Object.defineProperty,kxe=Object.getOwnPropertyDescriptor,Cxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?kxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_xe(t,n,i),i},Exe=function(e){function t(){var e;return _w(this,t),(e=bxe(this,t,arguments))._onResizeStart=e._register(new Lk),e.onResizeStart=e._onResizeStart.event,e._onResize=e._register(new Lk),e.onResize=e._onResize.event,e._onResizeEnd=e._register(new Lk),e.onResizeEnd=e._onResizeEnd.event,e._indexColWidth=80,e._minColWidth=80,e._maxColWidth=800,e._scrollStep=10,e._scrollThreshold=100,e._groupRowGap=14,e._rootLeft=0,e._rootRight=0,e._scrollLeft=0,e._field=null,e._index=-1,e._startW=0,e._minW=e._indexColWidth+e._minColWidth,e._maxW=Number.MAX_SAFE_INTEGER,e._stickyPaneWidth=0,e}return vk(t,e),Ew(t,[{key:"indexColWidth",get:function(){return this._indexColWidth}},{key:"groupRowGap",get:function(){return this._groupRowGap}},{key:"stickyColNum",get:function(){return this._configuration.getValue("viewerGrid.stickyColNum")}},{key:"defaultColWidth",get:function(){return this._configuration.getValue("viewerGrid.defaultColWidth")}},{key:"getStickyPaneWidth",value:function(e){return this._getColTotalWidth(e,this.stickyColNum)+this._indexColWidth}},{key:"_getColTotalWidth",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return nk(e,(function(e){return e.get("size")||t.defaultColWidth})).slice(0,n).reduce((function(e,t){return e+t}),0)}},{key:"emitResizeStart",value:function(e,t,n){var r,o=t.get(n),i=null==(r=o.get("field"))?void 0:r.get("type"),a=this._renderContext.$root.getBoundingClientRect();this._field=o,this._index=n,this._startW=this._getColTotalWidth(t,n+1)+this._indexColWidth,this._minW=this._getColTotalWidth(t,n)+this._indexColWidth+([HC.RATE,HC.PROGRESS].includes(i)?134:this._minColWidth),this._maxW=this._minW-this._minColWidth+this._maxColWidth,this._stickyPaneWidth=this.getStickyPaneWidth(t),this._rootLeft=a.left,this._rootRight=a.right,this._$scroller=this._renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]'),this._scrollLeft=this._$scroller.scrollLeft,this._onResizeStart.emit({field:this._field,x:e.clientX-this._rootLeft})}},{key:"emitResizing",value:function(e){if(this._index<this.stickyColNum){var t=e.clientX-this._rootLeft,n=this._minW,r=this._maxW;t>=n&&t<=r&&t>0&&this._onResize.emit({field:this._field,x:t})}else{var o=e.clientX-this._rootLeft,i=this._minW-this._scrollLeft,a=this._maxW-this._scrollLeft;o>=i&&o<a&&this._rootRight-this._rootLeft-o<=this._scrollThreshold&&(this._scrollLeft+=this._scrollStep,this._$scroller.scrollLeft+=this._scrollStep),this._scrollLeft>0&&o<this._stickyPaneWidth+this._scrollThreshold&&i<this._stickyPaneWidth&&(this._scrollLeft-=this._scrollStep,this._$scroller.scrollLeft-=this._scrollStep),o>=i&&o<=a&&o>0&&this._onResize.emit({field:this._field,x:o})}}},{key:"emitResizeEnd",value:function(e){var t,n,r;this._onResizeEnd.emit({field:this._field,x:e.clientX-this._rootLeft});var o=this._index<this.stickyColNum,i=e.clientX-this._rootLeft+(o?0:this._scrollLeft),a=Math.max(i,this._minW)-this._startW,u=(null==(t=this._field)?void 0:t.get("size"))||this.defaultColWidth,l=Math.max(u+a,this._minColWidth);this._commandService.execCommand("changeColWidth",{viewId:null==(n=this._field)?void 0:n.get("view_uuid"),fieldId:null==(r=this._field)?void 0:r.get("field_uuid"),size:Math.min(l,this._maxColWidth)}),this._reset()}},{key:"_reset",value:function(){this._startW=0,this._minW=this._indexColWidth+this._minColWidth,this._maxW=Number.MAX_SAFE_INTEGER,this._stickyPaneWidth=0,this._field=null,this._index=-1,this._rootLeft=0,this._rootRight=0,this._scrollLeft=0}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);Cxe([Ks(doe)],Exe.prototype,"_renderContext",2),Cxe([Ks(nR)],Exe.prototype,"_commandService",2),Cxe([Ks(lk)],Exe.prototype,"_configuration",2),Cxe([Ts()],Exe.prototype,"destroy",1),Exe=Cxe([Gs()],Exe);var Oxe=Object.defineProperty,Sxe=Object.getOwnPropertyDescriptor,xxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Sxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Oxe(t,n,i),i},jxe=function(){return Ew((function e(){_w(this,e),this._recordHeightMap={}}),[{key:"init",value:function(){this._recordHeightMap=this._configuration.getValue("viewerGrid.rowHeight")||bw(bw(bw({},"low",36),"middle",64),"high",148)}},{key:"getRowHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low";return this._recordHeightMap[e]||this._recordHeightMap.low}},{key:"rowHeightSize",get:function(){var e=this._readService.getViewConfig().get("record_height");return this._recordHeightMap[e]}}])}();function Dxe(e,t,n){return t=dk(t),sk(e,Axe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function Axe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Axe=function(){return!!e})()}xxe([Ks(oA)],jxe.prototype,"_readService",2),xxe([Ks(lk)],jxe.prototype,"_configuration",2),xxe([Ms()],jxe.prototype,"init",1),jxe=xxe([Gs()],jxe);var Rxe=Object.defineProperty,Fxe=Object.getOwnPropertyDescriptor,Ixe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rxe(t,n,i),i},Pxe=function(e){function t(){var e;return _w(this,t),(e=Dxe(this,t,arguments))._virtuosoRef=null,e._scroller=null,e._timer=void 0,e._onScroll=e._register(new Lk),e.onScroll=e._onScroll.event,e.scrollChangedVersion=null,e._setScrollChangedVersion=fu((function(){e.scrollChangedVersion=qw()}),60),e.emitScrollEvent=function(t){e._setScrollChangedVersion(),e._onScroll.emit(t)},e}return vk(t,e),Ew(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"scroller",get:function(){if(!this._scroller){var e=this.renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]');e&&(this._scroller=e)}return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this.scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"destroy",value:function(){clearTimeout(this._timer),this._virtuosoRef=null,this._scroller=null}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"isScrolling",value:function(e){var t,n=this;e?(clearTimeout(this._timer),null==(t=this._scroller)||t.setAttribute("data-scrolling","true")):this._timer=setTimeout((function(){var e;null==(e=n._scroller)||e.setAttribute("data-scrolling","false")}),600)}},{key:"scrollIntoView",value:function(e){var t,n;if(!this._virtuosoRef)return null==(t=e.done)?void 0:t.call(e);null==(n=this._virtuosoRef)||n.scrollIntoView(e)}},{key:"scrollTo",value:function(e){var t,n;if(!this._virtuosoRef)return null==(t=e.done)?void 0:t.call(e);null==(n=this._virtuosoRef)||n.scrollTo(e)}},{key:"horizontalScroll",value:function(e,t){var n=this._readService.getActiveView(),r=t<this._columnControllerService.stickyColNum,o=this._scroller;if(!r&&e&&o&&n){var i=o.getBoundingClientRect(),a=e.getBoundingClientRect(),u=this._readService.getViewFields(n.get("uuid"))||[],l=this._readService.getViewGroup(null==n?void 0:n.get("uuid"))?this._columnControllerService.groupRowGap:0,c=this._columnControllerService.getStickyPaneWidth(u)+l;a.right>i.right&&(o.scrollLeft+=a.right-i.right),a.left<i.left+c&&(o.scrollLeft-=i.left+c-a.left)}}},{key:"mouseMoveScroll",value:function(e,t,n,r,o){var i=this._scroller,a=(null==r?void 0:r.left)||0,u=(null==r?void 0:r.top)||0,l=e.clientX,c=e.clientY,s=100;i&&l+s>=t?i.scrollLeft+=10:i&&l-s<=a+this._columnControllerService.getStickyPaneWidth(o)&&(i.scrollLeft-=10),i&&c-s<=u?i.scrollTop-=10:i&&c+s>=n&&(i.scrollTop+=10)}}])}(bk);function Mxe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Txe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Txe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Txe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Ixe([Ks(doe)],Pxe.prototype,"renderContext",2),Ixe([Ks(Exe)],Pxe.prototype,"_columnControllerService",2),Ixe([Ks(oA)],Pxe.prototype,"_readService",2),Pxe=Ixe([Gs()],Pxe);var Nxe=Object.defineProperty,Bxe=Object.getOwnPropertyDescriptor,Vxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Nxe(t,n,i),i},Lxe=function(){return Ew((function e(){_w(this,e),this._rowCoordsByIndex=new Map,this._colCoordsByIndex=new Map,this._scrollUpdatedVersion=""}),[{key:"_viewport",get:function(){return this._renderViewPort.viewport}},{key:"updateCellCoordsInViewPort",value:function(){this._scrollUpdatedVersion&&this._scrollUpdatedVersion===this._scrollService.scrollChangedVersion||(this._scrollUpdatedVersion=this._scrollService.scrollChangedVersion,this._updateRowsLayout(),this._updateColsLayout())}},{key:"getCellIndexesByClientXY",value:function(e,t){if(!this._renderViewPort.isDotInViewPort(e,t))return null;var n=this._getTargetRowIndexByClientY(t);if(Bu(n))return null;var r=this._getTargetColIndexByClientX(e);return Bu(r)?null:[n,r]}},{key:"_updateRowsLayout",value:function(){this._rowCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-row-container.normal .lakex-viewer-grid-row[data-row]");if(t){var n,r=Mxe(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Number(o.getAttribute("data-row")),a=o.getBoundingClientRect();a.top<this._viewport.top||a.bottom>this._viewport.bottom||this._rowCoordsByIndex.set(i,{top:a.top,bottom:a.bottom})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_updateColsLayout",value:function(){this._colCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-header-column[data-col-index]");if(t){var n,r=Mxe(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Number(o.getAttribute("data-col-index")),a=o.getBoundingClientRect();a.left<this._viewport.left||a.right>this._viewport.right||this._colCoordsByIndex.set(i,{left:a.left,right:a.right})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_getTargetRowIndexByClientY",value:function(e){if(!this._rowCoordsByIndex)return null;for(var t=gw(this._rowCoordsByIndex.keys()),n=0,r=t.length-1,o=Date.now();n<=r;){if(Date.now()-o>500)return null;var i=Math.floor((n+r)/2),a=t[i],u=this._rowCoordsByIndex.get(a);if(!u){console.warn("_getTargetRowIndexByClientY.get curRowIndex never");break}if(e<u.bottom&&u.top<e)return a;u.bottom<e?n=i+1:e<u.top&&(r=i-1)}return null}},{key:"_getTargetColIndexByClientX",value:function(e){if(!this._colCoordsByIndex)return null;for(var t=gw(this._colCoordsByIndex.keys()),n=0,r=t.length-1,o=Date.now();n<=r;){if(Date.now()-o>500)return null;var i=Math.floor((n+r)/2),a=t[i],u=this._colCoordsByIndex.get(a);if(!u){console.warn("_getTargetColIndexByClientX.get curRowIndex never");break}if(e<u.right&&u.left<e)return a;u.left<e?n=i+1:e<u.right&&(r=i-1)}return null}}])}();Vxe([Ks(doe)],Lxe.prototype,"_renderContext",2),Vxe([Ks(hoe)],Lxe.prototype,"_renderViewPort",2),Vxe([Ks(Pxe)],Lxe.prototype,"_scrollService",2),Lxe=Vxe([Gs()],Lxe);var zxe=function(e){return e.COPY="copy",e.CUT="cut",e.NULL="null",e}(zxe||{}),Uxe=function(){return Ew((function e(){_w(this,e)}),[{key:"serialize",value:function(e){if(!e)return"";var t=e.cells,n=[],r=t.length,o=t[0].length;return Vz(0,r,(function(e){var r=[];Vz(0,o,(function(n){var o,i=t[e][n];o=i?i.formatValue:"",r.push(o)})),n.push(r.join("\t"))})),n.join("\n")}},{key:"deserialize",value:function(e){var t=[],n={cells:t};return e?(e.split("\n").forEach((function(e,n){var r=e.split("\t");t[n]=[],r.forEach((function(e,r){var o={fieldType:HC.TEXT,value:e};t[n][r]=o}))})),n):n}}])}(),Hxe=function(){return Ew((function e(){_w(this,e)}),[{key:"serialize",value:function(e){return e?this._standardTableValueToTableHTML(e):""}},{key:"deserialize",value:function(e){return this._tableHTMLToStandardTableValue(e)}},{key:"_getTrHTML",value:function(e){var t,n=e.cells,r=e.fields,o=e.rowHeight,i=[];i.length=n.length;var a=n.length;return Vz(0,(null==(t=n[0])?void 0:t.length)||0,(function(e){var t=null==r?void 0:r[e];Vz(0,a,(function(r){var a;i[r]=i[r]||'<tr style="height: '.concat(o,'px">');var u=n[r][e],l="",c="";if(u&&(u.value||[HC.CHECKBOX,HC.SELECT,HC.MULTI_SELECT].includes(null==t?void 0:t.type))){switch(null==t?void 0:t.type){case HC.SELECT:case HC.MULTI_SELECT:var s=u.formatValue.split(","),d=t.options||new K_;l=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:"select",value:s,options:d.map((function(e){return{id:e.get("uuid"),value:e.get("name"),color:e.get("color")}})),color:!!(null==(a=d.get(0))?void 0:a.get("color")),multi:t.type===HC.MULTI_SELECT})),'"'),c=u.formatValue;break;case HC.MENTION:l=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:u.formatValue})),'"'),c=u.formatValue;break;case HC.IMAGE:var f=u.value;c=(null==f?void 0:f.map((function(e){return'<img src="'.concat(e.src,'" height=').concat(t.size," />")})).join(""))||"";break;case HC.LINK:var p=u.value;c=p?'<a href="'.concat(p.src,'">').concat(p.name,"</a>"):"";break;case HC.FILE:var v=u.value;c=v?v.map((function(e){return'<a href="'.concat(e.src,'">').concat(e.name,"</a>")})).join(""):"";break;case HC.CHECKBOX:var h=u.value;c=!0===h?"✅":"🔲",l=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:!0===h})),'"');break;default:c=function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}(u.formatValue)}i[r]+="<td ".concat(l,">").concat(c,"</td>")}else i[r]+="<td></td>"}))})),Vz(0,a,(function(e){i[e]+="</tr>"})),i}},{key:"_standardTableValueToTableHTML",value:function(e){var t=e.startCell,n=e.fields,r=this._getTrHTML(e),o=[];n&&n.forEach((function(e){o.push("<col width=".concat(e.size,">"))}));var i="<colgroup>".concat(o.join(""),"</colgroup>");return"\x3c!--StartFragment--\x3e".concat('<style type="text/css">\x3c!--\n    td {border: 0.5pt solid #ccc;white-space: nowrap;}\n    br {mso-data-placement:same-cell;}\n    .numberstr{mso-number-format:"@";}\n    .perc {mso-number-format:0%;}\n    .curr¥ {mso-number-format:"¥#,##0.00;[red]¥#,##0.00";}\n    .curr$ {mso-number-format:"$#,##0.00;[red]$#,##0.00";}\n    .curr£ {mso-number-format:"£#,##0.00;[red]£#,##0.00";}\n    .curr€ {mso-number-format:"€#,##0.00;[red]€#,##0.00";}\n    --\x3e</style>','<table style="font-size: 12px;" data-startCell="').concat(t.row,":").concat(t.column,'">').concat(i).concat(r.join(""),"</table>\x3c!--EndFragment--\x3e")}},{key:"_tableHTMLToStandardTableValue",value:function(e){for(var t=p6(e),n=t.rowCount,r=t.colCount,o=t.data,i=[],a=0;a<n;){if(i[a]=[],i[a].length=r,o[a])for(var u=0;u<r;){if(o[a][u]){var l=o[a][u],c=this._htmlValueToTableCell(l);i[a][u]=c}u++}a++}return{cells:i}}},{key:"_htmlValueToTableCell",value:function(e){var t={fieldType:HC.TEXT,value:""},n=e.value||"";if(Yw(n)||function(e){return $w(e,"Number")}(n)||Pu(n))return t.value=n,t;var r=n.class;if("link"===r){var o=n,i={name:o.text,src:o.url,icon:o.icon};t.fieldType=HC.LINK,t.value=i}else if("file"===r){var a=n,u=[{name:a.text,src:a.url}];t.fieldType=HC.IMAGE,t.value=u}else if("image"===r){var l=n,c=[{name:l.name,src:l.originSrc}];t.fieldType=HC.IMAGE,t.value=c}else if("select"===r){var s=n;if(s.multi){var d=s.value;t.fieldType=HC.MULTI_SELECT,t.value=d}else{var f=s.value[0];t.fieldType=HC.SELECT,t.value=f}}return t}}])}(),qxe=function(){return Ew((function e(){_w(this,e)}),[{key:"serialize",value:function(e){return JSON.stringify(e)}},{key:"deserialize",value:function(e){return JSON.parse(e)}}])}(),Wxe=Ew((function e(){_w(this,e)}));Wxe.html=new Hxe,Wxe.text=new Uxe,Wxe.laketable=new qxe;var $xe=Is.defineToken("ClipboardRegistryToken"),Gxe=Is.defineToken("ClipboardRenderPluginContribution");function Kxe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yxe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yxe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Yxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Jxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jxe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zxe=Object.defineProperty,Qxe=Object.getOwnPropertyDescriptor,eje=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zxe(t,n,i),i},tje=XF.Plugin("clipboard"),nje=function(){return Ew((function e(){_w(this,e),this.runningStatus=zxe.NULL}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();return txe(t)?t:null}},{key:"copy",value:function(e){v.a.destroy(),this._enable()&&this._selection&&0!==this._selection.rangeCount&&(this.runningStatus=zxe.COPY,this.setDataToClipboard(e),this._showCopyCutSuccessMessage(),this.runningStatus=zxe.NULL)}},{key:"cut",value:function(e){this._enable()&&(this.runningStatus=zxe.CUT,this.runningStatus=zxe.NULL)}},{key:"_enable",value:function(){var e;return this.runningStatus===zxe.NULL&&(!!this._selection&&(!!window.formulaCopy||(!this._abilityService.isReadonly(mR.TABLE)||!(null==(e=window.appData)?void 0:e.disableDocumentCopy))))}},{key:"setDataToClipboard",value:function(e){null==e||e.preventDefault();var t=this.getCopyDataBySelection(),n=e&&(e.dataTransfer||e.clipboardData),r=Wxe.laketable.serialize(t),o=Wxe.html.serialize(t),i=Wxe.text.serialize(t),a=this._configuration.getValue("clipboard.clipboardApi.disable");return sxe.writeToClipboardData({laketable:r,html:o,text:i},n,{disableClipboardApi:a}),t}},{key:"_getCopyDataByRange",value:function(e,t,n){for(var r,o,i=e.start,a=e.end,u=a.row-i.row+1,l=a.column-i.column+1,c=Array.from({length:u}).fill(0).map((function(){return Array.from({length:l}).fill(0)})),s=[],d=0;d<l;d++){var f=t.get(d+i.column),p=f.get("field"),v=(null==p?void 0:p.get("uuid"))||"";p&&s.push(Xxe(Xxe({},p.toJSON()),{},{size:f.get("size")||180}));for(var h=0;h<u;h++){var g=null==(o=null==(r=n.get(h+i.row))?void 0:r.get)?void 0:o.call(r,"record_uuid");if(g){var m=this._readService.getCell(v,g);m&&(c[h][d]=m)}}}return{fields:s,cells:c}}},{key:"getCopyDataBySelection",value:function(){var e=this._selection;if(!e)return null;var t,n=[],r=[],o=this._readService.getActiveView(),i=this._readService.getViewFields(null==o?void 0:o.get("uuid"))||[],a=this._readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[],u=this._readService.getViewConfig(null==o?void 0:o.get("uuid")),l=Kxe(e.ranges);try{for(l.s();!(t=l.n()).done;){var c=t.value,s=this._getCopyDataByRange(c,i,a);r=Zu([].concat(gw(r),gw(s.fields)),(function(e,t){return e.uuid===t.uuid})),n=[].concat(gw(n),gw(s.cells))}}catch(e){l.e(e)}finally{l.f()}var d={tableId:this._readService.getTable().get("uuid"),fields:r,cells:n,startCell:e.getRangeAt(0).start,rowHeight:this._rowControllerService.getRowHeight(null==u?void 0:u.get("record_height"))};try{var f=this._clipboardRegistry.getCopyMiddlewares();if(f&&f.length>0){var p,v=Kxe(f);try{for(v.s();!(p=v.n()).done;){var h=p.value;d=h?h(e,d):d}}catch(e){v.e(e)}finally{v.f()}}}catch(e){tje("clipboard copy middleware error:",e)}return d}},{key:"_showCopyCutSuccessMessage",value:function(){var e=this._selection,t=null==e?void 0:e.getRangeAt(0),n=null==t?void 0:t.start,r=null==t?void 0:t.end;if(!e||!n||!r)return null;if(this._selectionService.isRowSelection()){var o=this._selectionService.getSelectRowIndexes().length;v.a.success(Lw("成功复制 $1 条记录",o))}else{var i=r.row-n.row+1,a=r.column-n.column+1;v.a.success(Lw("成功复制 $1 个单元格",i*a))}}}])}();function rje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rje(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ije(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aje(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aje(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function aje(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}eje([Ks(oA)],nje.prototype,"_readService",2),eje([Ks(nxe),As()],nje.prototype,"_selectionService",2),eje([Ks(jxe)],nje.prototype,"_rowControllerService",2),eje([Ks(lk)],nje.prototype,"_configuration",2),eje([Ks($xe)],nje.prototype,"_clipboardRegistry",2),eje([Ks(RR)],nje.prototype,"_abilityService",2),nje=eje([Gs()],nje);var uje=Object.defineProperty,lje=Object.getOwnPropertyDescriptor,cje=function(e,t,n,r){for(var o,i=r>1?void 0:r?lje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uje(t,n,i),i},sje=XF.Plugin("clipboard"),dje=function(){return Ew((function e(){_w(this,e),this._pasteData=null}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();if(txe(t)){var n=t.anchor,r=t.focus,o=r.row-n.row+1,i=r.column-n.column+1;return{startRowIndex:n.row,startColIndex:n.column,rowCount:o,colCount:i}}return null}},{key:"paste",value:(r=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection){e.next=2;break}return e.abrupt("return");case 2:return v.a.destroy(),this._asyncPasteIfNeedUpload(t),e.next=6,this._getStdCellValueFromClip(t);case 6:this._pasteData=e.sent,this._process(this._selection,this._pasteData);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_getStdCellValueFromClip",value:(n=UC(jk.mark((function e(t){var n,r,o,i,a,u,l,c,s;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=this._configuration.getValue("clipboard.clipboardApi.disable"),o=[{key:ixe.laketable,serializer:Wxe.laketable},{key:ixe.html,serializer:Wxe.html},{key:ixe.text,serializer:Wxe.text}],i=0,a=o;case 4:if(!(i<a.length)){e.next=16;break}return u=a[i],l=u.key,c=u.serializer,e.next=9,sxe.getClipboardData(l,t,{disableClipboardApi:r});case 9:if((s=e.sent)&&(n=c.deserialize(s)),!n){e.next=13;break}return e.abrupt("break",16);case 13:i++,e.next=4;break;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_process",value:(t=UC(jk.mark((function e(t,n){var r,o,i,a,u,l=this;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enable(t,n)){e.next=2;break}return e.abrupt("return");case 2:return r=n.cells,o=r.length,i=r[0].length,a=o*i,u=v.a.loading(Lw("正在处理粘贴内容..."),0),e.abrupt("return",new Promise((function(e){setTimeout((function(){var r,o,i,a,c,s,d,f,p,h,g,m,y=null==(r=l._selectionService)?void 0:r.getSelection(),b=l._commandService.execCommand("pasteUpdateRecords",{selection:t,pasteData:n,colCount:(null==y?void 0:y.columnCount)||1}),w=(null==(i=null==(o=null==b?void 0:b.result)?void 0:o.data)?void 0:i.createRecordIds)||[],_=(null==(c=null==(a=null==b?void 0:b.result)?void 0:a.data)?void 0:c.updateRecordIds)||[];try{var k=l._clipboardRegistry.getPasteMiddlewares();if(k&&k.length>0&&n){var C,E=ije(k);try{for(E.s();!(C=E.n()).done;){var O=C.value;O&&O(t,n,w,_)}}catch(e){E.e(e)}finally{E.f()}}}catch(e){sje("clipboard paste middleware error:",e)}if(w.length>0&&y){var S=l._selectionService.createGridSelectionByIndex(y.anchor.row,y.anchor.column,y.rowCount+w.length,y.columnCount);l._selectionService.setSelection(S)}u(),0===(null==(s=null==b?void 0:b.result)?void 0:s.code)?v.a.success(null==(d=null==b?void 0:b.result)?void 0:d.message):(null==(f=null==b?void 0:b.result)?void 0:f.code)&&(null==(p=null==b?void 0:b.result)?void 0:p.code)>0?v.a.error(null==(h=null==b?void 0:b.result)?void 0:h.message):-1===(null==(g=null==b?void 0:b.result)?void 0:g.code)&&(console.error('Internal Error After execCommand: "pasteUpdateRecords", '.concat(null==(m=null==b?void 0:b.result)?void 0:m.message)),v.a.error(Lw("粘贴失败, 请稍后重试"))),e(null==b?void 0:b.result)}),a>100?100:0)})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_enable",value:function(e,t){var n,r;if(!t||!e)return!1;var o=e.rowCount,i=e.startRowIndex,a=e.startColIndex;if(i+o>this._readService.maxRecordCount)return v.a.error(Lw("数据表已达最大行数限制")),!1;var u=(null==(n=this._readService.getAllViewFields())?void 0:n.length)||0;return!(a+((null==(r=t.fields)?void 0:r.length)||0)>u)||(v.a.error(Lw("粘贴失败，没有足够的列")),!1)}},{key:"_asyncPasteIfNeedUpload",value:(e=UC(jk.mark((function e(t){var n,r,o,i,a,u,l=this;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection&&t){e.next=2;break}return e.abrupt("return");case 2:if(n=sxe.getFilesFromClipBoard(t),r=null==n?void 0:n[0]){e.next=6;break}return e.abrupt("return");case 6:if((o=this._readService.getCellByIndexes(this._selection.startRowIndex,this._selection.startColIndex))&&[HC.IMAGE,HC.FILE].includes(o.fieldType)){e.next=10;break}return console.warn("target field type is not support for file"),e.abrupt("return");case 10:this._uploadService.getAccept(null==o?void 0:o.fieldType),i=(null==o?void 0:o.fieldType)===HC.IMAGE?this._uploadService.uploadImage(r):this._uploadService.uploadFile(r),a=oje(oje({},this._selection),{},{rowCount:1,colCount:1}),u=i.onDidChange(function(){var e=UC(jk.mark((function e(t){var n,r,i,c;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status!==Sge.ERROR){e.next=3;break}return v.a.error(t.message||Lw("上传失败，请重试")),e.abrupt("return");case 3:if(t.status!==Sge.TIMEOUT){e.next=6;break}return v.a.error(t.message||Lw("上传超时，请重试")),e.abrupt("return");case 6:if(t.status!==Sge.SUCCESS){e.next=13;break}return r=t.file,i=oje(oje({},o),{},{value:null==(n=o.value||[])?void 0:n.concat([r])}),c={cells:[[i]]},e.next=12,l._process(a,c);case 12:u.destroy();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,r}();function fje(e,t,n){return t=dk(t),sk(e,pje()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function pje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pje=function(){return!!e})()}cje([Ks(oA)],dje.prototype,"_readService",2),cje([Ks(nxe),As()],dje.prototype,"_selectionService",2),cje([Ks(nR)],dje.prototype,"_commandService",2),cje([Ks(lk)],dje.prototype,"_configuration",2),cje([Ks(ume)],dje.prototype,"_uploadService",2),cje([Ks($xe)],dje.prototype,"_clipboardRegistry",2),dje=cje([Gs()],dje);var vje=Object.defineProperty,hje=Object.getOwnPropertyDescriptor,gje=function(e,t,n,r){for(var o,i=r>1?void 0:r?hje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vje(t,n,i),i},mje=function(e){function t(){return _w(this,t),fje(this,t,arguments)}return vk(t,e),Ew(t,[{key:"getCopyMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerCopyMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getPasteMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerPasteMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}(bk);gje([yd(Gxe)],mje.prototype,"clipboardProvider",2),mje=gje([Gs({token:$xe})],mje);var yje=Object.defineProperty,bje=Object.getOwnPropertyDescriptor,wje=function(e,t,n,r){for(var o,i=r>1?void 0:r?bje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yje(t,n,i),i},_je=function(){return Ew((function e(){_w(this,e),this._onCopy=null,this._onCut=null,this._onPaste=null}),[{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"_isGridView",get:function(){return this._readService.getActiveViewType()===sE.GRID}},{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"copy",hotkey:"copy",name:"copy",enableOnInput:!1,preventDefault:!0,isEnable:function(){return t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.copy(e)}}),e.registerItem({id:"cut",hotkey:"cut",name:"cut",preventDefault:!0,enableOnInput:!1,isEnable:function(){return!t._abilityService.isReadonly(mR.TABLE)&&t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.cut(e)}}),e.registerItem({id:"paste",hotkey:"paste",name:"paste",preventDefault:!0,enableOnInput:!1,isEnable:function(){var e,n;return!t._abilityService.isReadonly(mR.TABLE)&&t._hasSelection()&&t._isGridView&&(!!(null==(e=document.activeElement)?void 0:e.closest(".lakex-grid-cell-editor-keyboard-input"))||!!(null==(n=document.activeElement)?void 0:n.closest(".lakex-viewer-grid-content")))},onHotKey:function(e){t._pasteService.paste(e)}})}},{key:"destroy",value:function(){var e,t,n;null==(e=this._onCopy)||e.destroy(),null==(t=this._onCut)||t.destroy(),null==(n=this._onPaste)||n.destroy()}}],[{key:"pluginModule",value:function(){return dd().register(this).contribution(Gxe).register(mje).register(nje).register(dje)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"clipboard",type:"object",title:"粘贴板",properties:{"clipboardApi.disable":{type:"boolean",description:"不使用 clipboard api"}}}),e.registerDefaultValue({"clipboard.clipboardApi.disable":!1})}}])}();_je.pluginName="render-clipboard",wje([Ks(oA)],_je.prototype,"_readService",2),wje([Ks(RR)],_je.prototype,"_abilityService",2),wje([Ks(nje)],_je.prototype,"_copyCutService",2),wje([Ks(dje)],_je.prototype,"_pasteService",2),wje([Ks(nxe),As()],_je.prototype,"_selectionService",2),_je=wje([Gs({contrib:[toe,Bre]})],_je);var kje=Is.defineToken("RefreshRenderPluginContribution");function Cje(e,t){return e===t||e!=e&&t!=t}function Eje(e,t){for(var n=e.length;n--;)if(Cje(e[n][0],t))return n;return-1}var Oje=Array.prototype.splice;function Sje(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sje.prototype.clear=function(){this.__data__=[],this.size=0},Sje.prototype.delete=function(e){var t=this.__data__,n=Eje(t,e);return!(n<0)&&(n==t.length-1?t.pop():Oje.call(t,n,1),--this.size,!0)},Sje.prototype.get=function(e){var t=this.__data__,n=Eje(t,e);return n<0?void 0:t[n][1]},Sje.prototype.has=function(e){return Eje(this.__data__,e)>-1},Sje.prototype.set=function(e,t){var n=this.__data__,r=Eje(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var xje=void 0!==wn?wn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},jje="object"==mw(xje)&&xje&&xje.Object===Object&&xje,Dje="object"==("undefined"==typeof self?"undefined":mw(self))&&self&&self.Object===Object&&self,Aje=jje||Dje||Function("return this")(),Rje=Aje.Symbol,Fje=Object.prototype,Ije=Fje.hasOwnProperty,Pje=Fje.toString,Mje=Rje?Rje.toStringTag:void 0;var Tje=Object.prototype.toString;var Nje="[object Null]",Bje="[object Undefined]",Vje=Rje?Rje.toStringTag:void 0;function Lje(e){return null==e?void 0===e?Bje:Nje:Vje&&Vje in Object(e)?function(e){var t=Ije.call(e,Mje),n=e[Mje];try{e[Mje]=void 0;var r=!0}catch(e){}var o=Pje.call(e);return r&&(t?e[Mje]=n:delete e[Mje]),o}(e):function(e){return Tje.call(e)}(e)}function zje(e){var t=mw(e);return null!=e&&("object"==t||"function"==t)}var Uje="[object AsyncFunction]",Hje="[object Function]",qje="[object GeneratorFunction]",Wje="[object Proxy]";function $je(e){if(!zje(e))return!1;var t=Lje(e);return t==Hje||t==qje||t==Uje||t==Wje}var Gje=Aje["__core-js_shared__"],Kje=function(){var e=/[^.]+$/.exec(Gje&&Gje.keys&&Gje.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Yje=Function.prototype.toString;function Jje(e){if(null!=e){try{return Yje.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Xje=/^\[object .+?Constructor\]$/,Zje=Function.prototype,Qje=Object.prototype,eDe=Zje.toString,tDe=Qje.hasOwnProperty,nDe=RegExp("^"+eDe.call(tDe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rDe(e){return!(!zje(e)||function(e){return!!Kje&&Kje in e}(e))&&($je(e)?nDe:Xje).test(Jje(e))}function oDe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return rDe(n)?n:void 0}var iDe=oDe(Aje,"Map"),aDe=oDe(Object,"create");var uDe=Object.prototype.hasOwnProperty;var lDe=Object.prototype.hasOwnProperty;function cDe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sDe(e,t){var n=e.__data__;return function(e){var t=mw(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function dDe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cDe.prototype.clear=function(){this.__data__=aDe?aDe(null):{},this.size=0},cDe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},cDe.prototype.get=function(e){var t=this.__data__;if(aDe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return uDe.call(t,e)?t[e]:void 0},cDe.prototype.has=function(e){var t=this.__data__;return aDe?void 0!==t[e]:lDe.call(t,e)},cDe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=aDe&&void 0===t?"__lodash_hash_undefined__":t,this},dDe.prototype.clear=function(){this.size=0,this.__data__={hash:new cDe,map:new(iDe||Sje),string:new cDe}},dDe.prototype.delete=function(e){var t=sDe(this,e).delete(e);return this.size-=t?1:0,t},dDe.prototype.get=function(e){return sDe(this,e).get(e)},dDe.prototype.has=function(e){return sDe(this,e).has(e)},dDe.prototype.set=function(e,t){var n=sDe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function fDe(e){var t=this.__data__=new Sje(e);this.size=t.size}fDe.prototype.clear=function(){this.__data__=new Sje,this.size=0},fDe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},fDe.prototype.get=function(e){return this.__data__.get(e)},fDe.prototype.has=function(e){return this.__data__.has(e)},fDe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Sje){var r=n.__data__;if(!iDe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dDe(r)}return n.set(e,t),this.size=n.size,this};function pDe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new dDe;++t<n;)this.add(e[t])}function vDe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}pDe.prototype.add=pDe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},pDe.prototype.has=function(e){return this.__data__.has(e)};var hDe=1,gDe=2;function mDe(e,t,n,r,o,i){var a=n&hDe,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,p=n&gDe?new pDe:void 0;for(i.set(e,t),i.set(t,e);++d<u;){var v=e[d],h=t[d];if(r)var g=a?r(h,v,d,t,e,i):r(v,h,d,e,t,i);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!vDe(t,(function(e,t){if(a=t,!p.has(a)&&(v===e||o(v,e,n,r,i)))return p.push(t);var a}))){f=!1;break}}else if(v!==h&&!o(v,h,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}var yDe=Aje.Uint8Array;function bDe(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function wDe(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var _De=1,kDe=2,CDe="[object Boolean]",EDe="[object Date]",ODe="[object Error]",SDe="[object Map]",xDe="[object Number]",jDe="[object RegExp]",DDe="[object Set]",ADe="[object String]",RDe="[object Symbol]",FDe="[object ArrayBuffer]",IDe="[object DataView]",PDe=Rje?Rje.prototype:void 0,MDe=PDe?PDe.valueOf:void 0;var TDe=Array.isArray;var NDe=Object.prototype.propertyIsEnumerable,BDe=Object.getOwnPropertySymbols,VDe=BDe?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(BDe(e),(function(t){return NDe.call(e,t)})))}:function(){return[]};function LDe(e){return null!=e&&"object"==mw(e)}function zDe(e){return LDe(e)&&"[object Arguments]"==Lje(e)}var UDe=Object.prototype,HDe=UDe.hasOwnProperty,qDe=UDe.propertyIsEnumerable,WDe=zDe(function(){return arguments}())?zDe:function(e){return LDe(e)&&HDe.call(e,"callee")&&!qDe.call(e,"callee")};var $De="object"==("undefined"==typeof exports?"undefined":mw(exports))&&exports&&!exports.nodeType&&exports,GDe=$De&&"object"==mw(r)&&r&&!r.nodeType&&r,KDe=GDe&&GDe.exports===$De?Aje.Buffer:void 0,YDe=(KDe?KDe.isBuffer:void 0)||function(){return!1},JDe=9007199254740991,XDe=/^(?:0|[1-9]\d*)$/;function ZDe(e,t){var n=mw(e);return!!(t=null==t?JDe:t)&&("number"==n||"symbol"!=n&&XDe.test(e))&&e>-1&&e%1==0&&e<t}var QDe=9007199254740991;function eAe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=QDe}var tAe={};tAe["[object Float32Array]"]=tAe["[object Float64Array]"]=tAe["[object Int8Array]"]=tAe["[object Int16Array]"]=tAe["[object Int32Array]"]=tAe["[object Uint8Array]"]=tAe["[object Uint8ClampedArray]"]=tAe["[object Uint16Array]"]=tAe["[object Uint32Array]"]=!0,tAe["[object Arguments]"]=tAe["[object Array]"]=tAe["[object ArrayBuffer]"]=tAe["[object Boolean]"]=tAe["[object DataView]"]=tAe["[object Date]"]=tAe["[object Error]"]=tAe["[object Function]"]=tAe["[object Map]"]=tAe["[object Number]"]=tAe["[object Object]"]=tAe["[object RegExp]"]=tAe["[object Set]"]=tAe["[object String]"]=tAe["[object WeakMap]"]=!1;var nAe="object"==("undefined"==typeof exports?"undefined":mw(exports))&&exports&&!exports.nodeType&&exports,rAe=nAe&&"object"==mw(r)&&r&&!r.nodeType&&r,oAe=rAe&&rAe.exports===nAe&&jje.process,iAe=function(){try{var e=rAe&&rAe.require&&rAe.require("util").types;return e||oAe&&oAe.binding&&oAe.binding("util")}catch(e){}}(),aAe=iAe&&iAe.isTypedArray,uAe=aAe?function(e){return function(t){return e(t)}}(aAe):function(e){return LDe(e)&&eAe(e.length)&&!!tAe[Lje(e)]},lAe=Object.prototype.hasOwnProperty;function cAe(e,t){var n=TDe(e),r=!n&&WDe(e),o=!n&&!r&&YDe(e),i=!n&&!r&&!o&&uAe(e),a=n||r||o||i,u=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=u.length;for(var c in e)!lAe.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ZDe(c,l))||u.push(c);return u}var sAe=Object.prototype;var dAe=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),fAe=Object.prototype.hasOwnProperty;function pAe(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||sAe)}(e))return dAe(e);var t=[];for(var n in Object(e))fAe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function vAe(e){return function(e){return null!=e&&eAe(e.length)&&!$je(e)}(e)?cAe(e):pAe(e)}function hAe(e){return function(e,t,n){var r=t(e);return TDe(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,vAe,VDe)}var gAe=1,mAe=Object.prototype.hasOwnProperty;var yAe=oDe(Aje,"DataView"),bAe=oDe(Aje,"Promise"),wAe=oDe(Aje,"Set"),_Ae=oDe(Aje,"WeakMap"),kAe="[object Map]",CAe="[object Promise]",EAe="[object Set]",OAe="[object WeakMap]",SAe="[object DataView]",xAe=Jje(yAe),jAe=Jje(iDe),DAe=Jje(bAe),AAe=Jje(wAe),RAe=Jje(_Ae),FAe=Lje;(yAe&&FAe(new yAe(new ArrayBuffer(1)))!=SAe||iDe&&FAe(new iDe)!=kAe||bAe&&FAe(bAe.resolve())!=CAe||wAe&&FAe(new wAe)!=EAe||_Ae&&FAe(new _Ae)!=OAe)&&(FAe=function(e){var t=Lje(e),n="[object Object]"==t?e.constructor:void 0,r=n?Jje(n):"";if(r)switch(r){case xAe:return SAe;case jAe:return kAe;case DAe:return CAe;case AAe:return EAe;case RAe:return OAe}return t});var IAe=1,PAe="[object Arguments]",MAe="[object Array]",TAe="[object Object]",NAe=Object.prototype.hasOwnProperty;function BAe(e,t,n,r,o,i){var a=TDe(e),u=TDe(t),l=a?MAe:FAe(e),c=u?MAe:FAe(t),s=(l=l==PAe?TAe:l)==TAe,d=(c=c==PAe?TAe:c)==TAe,f=l==c;if(f&&YDe(e)){if(!YDe(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new fDe),a||uAe(e)?mDe(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case IDe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case FDe:return!(e.byteLength!=t.byteLength||!i(new yDe(e),new yDe(t)));case CDe:case EDe:case xDe:return Cje(+e,+t);case ODe:return e.name==t.name&&e.message==t.message;case jDe:case ADe:return e==t+"";case SDe:var u=bDe;case DDe:var l=r&_De;if(u||(u=wDe),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=kDe,a.set(e,t);var s=mDe(u(e),u(t),r,o,i,a);return a.delete(e),s;case RDe:if(MDe)return MDe.call(e)==MDe.call(t)}return!1}(e,t,l,n,r,o,i);if(!(n&IAe)){var p=s&&NAe.call(e,"__wrapped__"),v=d&&NAe.call(t,"__wrapped__");if(p||v){var h=p?e.value():e,g=v?t.value():t;return i||(i=new fDe),o(h,g,n,r,i)}}return!!f&&(i||(i=new fDe),function(e,t,n,r,o,i){var a=n&gAe,u=hAe(e),l=u.length;if(l!=hAe(t).length&&!a)return!1;for(var c=l;c--;){var s=u[c];if(!(a?s in t:mAe.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<l;){var h=e[s=u[c]],g=t[s];if(r)var m=a?r(g,h,s,t,e,i):r(h,g,s,e,t,i);if(!(void 0===m?h===g||o(h,g,n,r,i):m)){p=!1;break}v||(v="constructor"==s)}if(p&&!v){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))}function VAe(e,t,n,r,o){return e===t||(null==e||null==t||!LDe(e)&&!LDe(t)?e!=e&&t!=t:BAe(e,t,n,r,VAe,o))}function LAe(e,t){return VAe(e,t)}function zAe(e){var t=yre(BSe),n=WI(Object(a.useState)((function(){return t.isInHighlight(e)})),2),r=n[0],o=n[1];return Zae((function(){var n=t.onChange((function(n){n.highlightCellIds,n.highlightRecordIds;var r=t.isInHighlight(e);o(r)}));return function(){n.destroy()}}),[t]),r}function UAe(e,t,n){return t=dk(t),sk(e,HAe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function HAe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HAe=function(){return!!e})()}var qAe=Object.defineProperty,WAe=Object.getOwnPropertyDescriptor,$Ae=function(e,t,n,r){for(var o,i=r>1?void 0:r?WAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qAe(t,n,i),i},GAe=function(e){function t(){var e;return _w(this,t),(e=UAe(this,t,arguments))._task=null,e._originCellValue=null,e._handleRefresh=function(){},e._selectionListener=null,e._commandListener=null,e._onRefreshTooltipChange=e._register(new Lk),e.onRefreshTooltipChange=e._onRefreshTooltipChange.event,e.DESC_MAP=bw(bw(bw({},fA.GROUP,{text:Lw("本记录将被移至新的分组"),ps:Lw("本记录不属于该分组，点击其他区域将移走该记录")}),fA.FILTER,{text:Lw("本记录将被过滤"),ps:Lw("本记录已被筛选过滤，点击其他区域将隐藏该记录")}),fA.SORT,{text:Lw("本记录将被移动到新的排序位置"),ps:Lw("本记录因排序规则会移动，点击其他区域将移走该记录")}),e}return vk(t,e),Ew(t,[{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}},{key:"init",value:function(){this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this;this._refreshEventService.onBeforeRefresh(function(){var t=UC(jk.mark((function t(n){var r,o,i,a,u,l,c,s,d,f,p,v,h,g,m,y,b;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.type,o=n.commandName,i=n.params,a=n.action,p=e._readService.getActiveView(),null==(u=e._selectionListener)||u.destroy(),null==(l=e._commandListener)||l.destroy(),"setCell"!==o&&"removeCells"!==o){t.next=35;break}if(v="setCell"===o?i:i.cells[0],h=e._readService.getCell(v.fieldId,v.recordId),g=null==(c=e._selectionService)?void 0:c.getSelection(),!e._originCellValue&&h&&(e._originCellValue=h.value),!e._task){t.next=24;break}if(o!==e._task.commandName||v.recordId!==e._task.params.recordId||v.fieldId!==e._task.params.fieldId){t.next=19;break}if(!LAe(null==v?void 0:v.value,e._originCellValue)){t.next=16;break}return e._task=null,e._hideHighlight(),e._hideTooltip(),t.abrupt("return");case 16:e._task={type:r,commandName:o,params:i,action:a},t.next=22;break;case 19:return t.next=21,e._task.action();case 21:e._task={type:r,commandName:o,params:i,action:a};case 22:t.next=25;break;case 24:e._task={type:r,commandName:o,params:i,action:a};case 25:if((null==p?void 0:p.get("type"))===sE.GRID&&e._showHighlight(p,v.recordId),e._handleRefresh=UC(jk.mark((function t(){var n,r;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh(),e._updateSelection(p,v.recordId,g);case 5:case"end":return t.stop()}}),t)}))),(m=null==p?void 0:p.get("type"))!==sE.KANBAN){t.next=31;break}return e._handleRefresh(),t.abrupt("return");case 31:return e._showTooltip(r,v.recordId),m===sE.GRID&&(e._selectionListener=null==(s=e._selectionService)?void 0:s.onChange((function(t){var n=t.selection;n?n.isCollapsed&&n.anchor.row!==g.anchor.row&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 35:if("addEmptyRecord"!==o){t.next=51;break}if(y=i.uuid,b=null==(d=e._selectionService)?void 0:d.getSelection(),!e._task){t.next=44;break}return t.next=41,e._task.action();case 41:e._task={type:r,commandName:o,params:i,action:a},t.next=45;break;case 44:e._task={type:r,commandName:o,params:i,action:a};case 45:return(null==p?void 0:p.get("type"))===sE.GRID&&e._showHighlight(p,y),e._showTooltip(r,y),e._handleRefresh=UC(jk.mark((function t(){var n,r;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh();case 4:case"end":return t.stop()}}),t)}))),(null==p?void 0:p.get("type"))===sE.GRID&&(e._selectionListener=null==(f=e._selectionService)?void 0:f.onChange((function(t){var n,r=t.selection;r?r.isCollapsed&&r.anchor.row!==(null==(n=null==b?void 0:b.anchor)?void 0:n.row)&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 51:a();case 52:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_showHighlight",value:function(e,t){var n=nk(this._readService.getViewFields(null==e?void 0:e.get("uuid")),(function(e){return{recordId:t,fieldId:e.get("field_uuid")}}))||[];this._highlightService.setHighlights(n)}},{key:"_hideHighlight",value:function(){this._highlightService.clearHighlights()}},{key:"_showTooltip",value:function(e,t){this._onRefreshTooltipChange.emit({type:e,recordId:t,desc:this.DESC_MAP[e]})}},{key:"_hideTooltip",value:function(){this._onRefreshTooltipChange.emit({type:null,recordId:"",desc:{text:"",ps:""}})}},{key:"_updateSelection",value:function(e,t,n){var r,o,i;if((null==e?void 0:e.get("type"))===sE.GRID&&n){var a=this._readService.getFlatViewRecords(e.get("uuid")),u=n.anchor,l=ek(a,(function(e){return(null==e?void 0:e.get("record_uuid"))===t}));if(l>=0){var c=null==(r=this._selectionService)?void 0:r.getSelection(),s=null==(o=this._selectionService)?void 0:o.createGridSelectionByIndex(l,c?c.anchor.column:u.column,u.rowCount,u.columnCount);null==(i=this._selectionService)||i.scrollToSelection(s,"center")}}}},{key:"_afterRefresh",value:function(){var e,t;this._task=null,this._originCellValue=null,this._hideHighlight(),this._hideTooltip(),null==(e=this._selectionListener)||e.destroy(),null==(t=this._commandListener)||t.destroy()}}])}(bk);$Ae([Ks(pA)],GAe.prototype,"_refreshEventService",2),$Ae([Ks(nxe),As()],GAe.prototype,"_selectionService",2),$Ae([Ks(oA)],GAe.prototype,"_readService",2),$Ae([Ks(BSe)],GAe.prototype,"_highlightService",2),$Ae([Ks(nR)],GAe.prototype,"_commandService",2),$Ae([Ts()],GAe.prototype,"destroy",1),GAe=$Ae([Gs()],GAe);var KAe=Object.defineProperty,YAe=Object.getOwnPropertyDescriptor,JAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?YAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KAe(t,n,i),i},XAe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){this._refreshService.init()}}],[{key:"pluginModule",value:function(){return dd().contribution(kje).register(this).register(GAe)}}])}();function ZAe(e,t,n){return t=dk(t),sk(e,QAe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QAe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QAe=function(){return!!e})()}XAe.pluginName="render-refresh",JAe([Ks(GAe)],XAe.prototype,"_refreshService",2),XAe=JAe([Gs({contrib:toe})],XAe);var eRe=Object.defineProperty,tRe=Object.getOwnPropertyDescriptor,nRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eRe(t,n,i),i},rRe=function(e){return e.HEADER="header",e.GROUP_HEADER="group_header",e.CELL="cell",e.MULTI_CELL="multi_cell",e.KANBAN_RECORD="kanban_record",e.CARD_RECORD="card_record",e.CALENDAR_RECORD="calendar_record",e}(rRe||{}),oRe=function(e){function t(){var e;return _w(this,t),(e=ZAe(this,t,arguments))._onContextMenu=e._register(new Lk),e.contextMenuInfo=null,e.onContextMenu=e._onContextMenu.event,e}return vk(t,e),Ew(t,[{key:"showContextMenu",value:function(e){this._onContextMenu.emit(e),this.contextMenuInfo=e}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);nRe([Ts()],oRe.prototype,"destroy",1),oRe=nRe([Gs()],oRe);var iRe=Object.defineProperty,aRe=Object.getOwnPropertyDescriptor,uRe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return dd().register(this).register(oRe)}}])}();uRe.pluginName="render-context-menu",uRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?aRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iRe(t,n,i),i}([Gs({contrib:toe})],uRe);var lRe=Is.defineToken("ViewerRowHeaderIconContribution"),cRe=Object.defineProperty,sRe=Object.getOwnPropertyDescriptor,dRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cRe(t,n,i),i},fRe=function(){return Ew((function e(){var t=this;_w(this,e),this._getExpandRecordRecordHeaderIcon=function(){var e,n,r=t._viewerGridRecordHeaderIconContribution.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getHeaderIcon)?void 0:n.call(e):null}}),[{key:"ExpandRecordRecordHeaderIcon",get:function(){return this._getExpandRecordRecordHeaderIcon()}}])}();dRe([yd(lRe)],fRe.prototype,"_viewerGridRecordHeaderIconContribution",2),fRe=dRe([Gs()],fRe);var pRe=function(e){var t=e.recordId,n=yre(_oe);return u.a.createElement(b.a,{prefixCls:"ant"},u.a.createElement(d.a,{overlayClassName:"lakex-table-tooltip-container",title:Lw("展开行（Space）"),placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("div",{className:"lakex-viewer-grid-row-expander",onClick:function(e){e.stopPropagation(),null==n||n.emitClickRecord({recordId:t})}},u.a.createElement(oue,{type:"RowExpand"}))))},vRe=Object.defineProperty,hRe=Object.getOwnPropertyDescriptor,gRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?hRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vRe(t,n,i),i},mRe=function(){return Ew((function e(){_w(this,e)}),[{key:"getHeaderIcon",value:function(){return pRe}},{key:"registerOpenerApp",value:function(){return[{name:"record",display_name:"Record",description:"记录"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"record-opener",apps:["record"],autoClear:!0,open:function(t){var n;e._lifecycleService.status<Dw.Rendered?e._lifecycleService.when(Dw.Rendered,(function(){var n;null==(n=e._renderService)||n.emitClickRecord({recordId:t})})):null==(n=e._renderService)||n.emitClickRecord({recordId:t})}}]}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();mRe.pluginName="render-expand-record",gRe([Ks(_oe)],mRe.prototype,"_renderService",2),gRe([Ks(Aw)],mRe.prototype,"_lifecycleService",2),mRe=gRe([Gs({contrib:[lRe,Ioe]})],mRe);var yRe=Object.defineProperty,bRe=Object.getOwnPropertyDescriptor,wRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?bRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yRe(t,n,i),i};function _Re(e){var t;if(!e)return null;var n,r;return n=parseInt((null==e?void 0:e.getAttribute("data-col"))||"",10),r=parseInt((null==(t=null==e?void 0:e.parentNode)?void 0:t.getAttribute("data-row"))||"",10),(Nu(n)||Nu(r))&&console.warn("getCoordinateFromNode NaN error",{column:n,row:r}),{row:r,column:n}}var kRe="ant",CRe=function(){return Ew((function e(){_w(this,e),this._selectorMap=bw(bw(bw({},sE.GRID,".lakex-viewer-grid-cell"),sE.KANBAN,".lakex-viewer-kanban-record"),sE.CARD,".lakex-viewer-card-record-item"),this._baseSelector="",this._preAutofillSelection=null,this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}),[{key:"init",value:function(){var e=this,t=null,n=null,r=null;this._mouseDownEmitter=Sre(document.body,"mousedown",(function(o){var i,a,u,l,c,s,d,f,p,v;if(null==(i=e._mouseMoveEmitter)||i.destroy(),null==(a=e._mouseUpEmitter)||a.destroy(),!(xre(o.target,".".concat(Gye))||xre(o.target,".".concat(kRe,"-picker-dropdown"))||xre(o.target,".".concat(kRe,"-popover"))||xre(o.target,".".concat(kRe,"-select-dropdown"))||xre(o.target,".".concat(kRe,"-slider"))))if(e._activeTableService.isAutoActive||((null==(u=e._renderContext.$workbenchRoot)?void 0:u.contains(o.target))?e._activeTableService.active():e._activeTableService.inactive()),null==(l=e._renderContext.$root)?void 0:l.contains(o.target)){var h=e._readService.getActiveView();if(h)if(h.get("type")===sE.GRID){if(!(xre(o.target,".lakex-viewer-grid-header-column")||xre(o.target,".lakex-viewer-grid-row-checkbox")||xre(o.target,".lakex-viewer-grid-row-dragger")||xre(o.target,".lakex-viewer-grid-header-checkbox"))){var g=e._selectionService.gridScrollService,m=document.body.clientWidth,y=document.body.clientHeight,b=null==(c=null==g?void 0:g.scroller)?void 0:c.getBoundingClientRect();e._baseSelector=e._selectorMap[(null==h?void 0:h.get("type"))||""];var w=e._selectionService.getSelection();if(n=o.shiftKey&&w?{row:w.anchor.row,column:w.anchor.column}:_Re(xre(o.target,e._baseSelector)),e._baseSelector&&n){if(2!==o.button){var _=e._readService.getViewFields(h.get("uuid"))||[],k=e._readService.getViewRecordsCount(h.get("uuid")),C=_.length;if(o.metaKey){var E=n.row,O=(null==(s=e._selectionService)?void 0:s.isRowSelection())||!1,S=(null==(d=e._selectionService)?void 0:d.getSelectRowIndexes())||[];S.includes(E)&&O?S=S.filter((function(e){return e!==E})):S.push(E);var x=null==(f=e._selectionService)?void 0:f.createRowGridSelectionByIndex(S,k,C);x&&(null==(p=e._selectionService)||p.setSelection(x))}else{var j=xre(o.target,e._baseSelector);j&&(r=_Re(t=j),e._updateSelection(n,r,k,C)),(null==(v=o.target)?void 0:v.classList.contains("lakex-viewer-grid-autofill-container"))&&(e._preAutofillSelection=e._selectionService.getSelection(),e._renderContext.$workbenchRoot.style.cursor="crosshair"),e._mouseMoveEmitter=Sre(e._renderContext.$root,"mousemove",(function(o){if(!Bu(n)){g&&b&&g.mouseMoveScroll(o,m,y,b,_);var i=xre(o.target,e._baseSelector);i!==t&&i&&(r=_Re(t=i),e._updateSelection(n,r,k,C))}})),e._mouseUpEmitter=Sre(document.body,"mouseup",(function(o){var i,a;e._preAutofillSelection&&e._commandService.execCommand("autofillCells",{preSelection:e._preAutofillSelection,newSelection:e._selectionService.getSelection()}),e._preAutofillSelection=null,null==(i=e._mouseMoveEmitter)||i.destroy(),e._renderContext.$workbenchRoot.style.cursor="";var u=xre(o.target,e._baseSelector);Bu(n)||(u!==t&&u&&(r=_Re(t=u),e._updateSelection(n,r,k,C)),null==(a=e._mouseUpEmitter)||a.destroy(),n=null,r=null,t=null)}))}}}else e._removeSelection()}}else e._removeSelection()}else e._removeSelection()}))}},{key:"_updateSelection",value:function(e,t,n,r){var o,i,a,u,l,c=this._preAutofillSelection,s=null==(o=this._selectionService)?void 0:o.createGridSelectionByScope(e,t,n,r);if(c){var d=c.getRangeAt(0).start,f=c.getRangeAt(c.rangeCount-1).end,p=s.getRangeAt(0).start,v=s.getRangeAt(s.rangeCount-1).end,h=null;return h=v.row>f.row?null==(i=this._selectionService)?void 0:i.createGridSelectionByScope({row:d.row,column:d.column},{row:v.row,column:f.column},n,r):p.row<d.row?null==(a=this._selectionService)?void 0:a.createGridSelectionByScope({row:p.row,column:d.column},{row:f.row,column:f.column},n,r):c,void(null==(u=this._selectionService)||u.setSelection(h))}null==(l=this._selectionService)||l.setSelection(s)}},{key:"_removeSelection",value:function(){var e;null==(e=this._selectionService)||e.removeSelection()}},{key:"destroy",value:function(){var e,t,n;null==(e=this._mouseDownEmitter)||e.destroy(),null==(t=this._mouseMoveEmitter)||t.destroy(),null==(n=this._mouseUpEmitter)||n.destroy(),this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}}])}();function ERe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ORe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ORe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ORe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}wRe([Ks(doe)],CRe.prototype,"_renderContext",2),wRe([Ks(oA)],CRe.prototype,"_readService",2),wRe([Ks(loe)],CRe.prototype,"_activeTableService",2),wRe([Ks(nxe),As()],CRe.prototype,"_selectionService",2),wRe([Ks(nR)],CRe.prototype,"_commandService",2),wRe([Ts()],CRe.prototype,"destroy",1),CRe=wRe([Gs()],CRe);var SRe=Object.defineProperty,xRe=Object.getOwnPropertyDescriptor,jRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?xRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&SRe(t,n,i),i},DRe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e;this._registerScrollService(),null==(e=this._selectionBindingService)||e.init()}},{key:"_registerScrollService",value:function(){var e,t=ERe(this._selectionPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerScrollService(this._selectionService)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}],[{key:"pluginModule",value:function(){return dd().contribution(HSe).register(this).register(nxe).register(CRe)}}])}();DRe.pluginName="render-selection",jRe([Ks(nxe),As()],DRe.prototype,"_selectionService",2),jRe([Ks(CRe),As()],DRe.prototype,"_selectionBindingService",2),jRe([yd(HSe)],DRe.prototype,"_selectionPluginProvider",2),DRe=jRe([Gs({contrib:toe})],DRe);var ARe=Object.defineProperty,RRe=Object.getOwnPropertyDescriptor,FRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?RRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ARe(t,n,i),i},IRe=function(){return Ew((function e(){_w(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"_hasSelection",value:function(){return!1}},{key:"init",value:function(){this._hotkeyService.init()}},{key:"destroy",value:function(){this._hotkeyService.destroy()}}],[{key:"pluginModule",value:function(){return Hae.register(this),Hae}}])}();IRe.pluginName="render-hotkey",FRe([Ks(Nre)],IRe.prototype,"_hotkeyService",2),FRe([Ks(oA)],IRe.prototype,"_readService",2),FRe([Ks(RR)],IRe.prototype,"_abilityService",2),IRe=FRe([Gs({contrib:[toe]})],IRe);var PRe=Is.defineToken("StatisticsRenderPluginContribution");function MRe(e,t,n){return t=dk(t),sk(e,TRe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function TRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TRe=function(){return!!e})()}var NRe=Object.defineProperty,BRe=Object.getOwnPropertyDescriptor,VRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?BRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NRe(t,n,i),i},LRe=function(e){function t(){var e;return _w(this,t),(e=MRe(this,t,arguments))._onClick=e._register(new Lk),e.onClick=e._onClick.event,e}return vk(t,e),Ew(t,[{key:"open",value:function(e,t,n,r){this._onClick.emit({view:e,field:t,stat:n,target:r})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);VRe([Ts()],LRe.prototype,"destroy",1),LRe=VRe([Gs()],LRe);var zRe=[HC.TEXT,HC.SELECT,HC.MULTI_SELECT,HC.NUMBER,HC.RATE,HC.PROGRESS,HC.DATE,HC.IMAGE,HC.FILE,HC.PHONE,HC.MENTION,HC.LINK,HC.EMAIL,HC.USER_ID,HC.CREATED_AT,HC.MODIFIER_ID,HC.UPDATED_AT],URe=[HC.DATE,HC.CREATED_AT,HC.UPDATED_AT],HRe={none:{stats:Lw("统计"),text:Lw("不展示")},count:{stats:Lw("$1 条记录"),text:Lw("记录总数")},filled:{stats:Lw("已填写 $1"),text:Lw("已填写数"),types:zRe},empty:{stats:Lw("未填写 $1"),text:Lw("未填写数"),types:zRe},checked:{stats:Lw("已勾选 $1"),text:Lw("已勾选"),types:[HC.CHECKBOX]},unchecked:{stats:Lw("未勾选 $1"),text:Lw("未勾选"),types:[HC.CHECKBOX]},unique:{stats:Lw("唯一数 $1"),text:Lw("唯一数"),types:zRe},percentFilled:{stats:Lw("已填写占比 $1"),text:Lw("已填写占比"),types:zRe},percentEmpty:{stats:Lw("未填写占比 $1"),text:Lw("未填写占比"),types:zRe},percentUnique:{stats:Lw("唯一数占比 $1"),text:Lw("唯一数占比"),types:zRe},sum:{stats:Lw("求和 $1"),text:Lw("求和"),types:[HC.NUMBER]},average:{stats:Lw("平均值 $1"),text:Lw("平均值"),types:[HC.NUMBER]},max:{stats:Lw("最大值 $1"),text:Lw("最大值"),types:[HC.NUMBER,HC.RATE,HC.PROGRESS]},min:{stats:Lw("最小值 $1"),text:Lw("最小值"),types:[HC.NUMBER,HC.RATE,HC.PROGRESS]},earliestDate:{stats:Lw("最早时间 $1"),text:Lw("最早时间"),types:URe},latestDate:{stats:Lw("最晚时间 $1"),text:Lw("最晚时间"),types:URe},dateRange:{stats:Lw("时间范围 $1 天"),text:Lw("时间范围（日）"),types:URe},monthRange:{stats:Lw("时间范围 $1 月"),text:Lw("时间范围（月）"),types:URe},percentChecked:{stats:Lw("已勾选占比 $1"),text:Lw("已勾选占比"),types:[HC.CHECKBOX]},percentUnchecked:{stats:Lw("未勾选占比 $1"),text:Lw("未勾选占比"),types:[HC.CHECKBOX]}},qRe=function(e){var t,n=function(e){var t,n=e.viewField,r=e.recordIds,o=yre(oA),i=yre(LRe),u=o.getActiveView(),l=WI(Object(a.useState)(void 0),2),c=l[0],s=l[1],d=WI(Object(a.useState)(),2),f=d[0],p=d[1];return Zae((function(){u&&n&&LC((function(){var e=o.getStatValue(u.get("uuid"),n.get("field_uuid"),r);s(null==e?void 0:e.stat.toJSON()),e&&p(e.value)}))}),[null==u?void 0:u.get("uuid"),null==n?void 0:n.get("field_uuid"),r]),{stat:c,statValue:f,fieldType:null==(t=n.get("field"))?void 0:t.get("type"),onClick:function(e){null==i||i.open(u,n.get("field"),c,e.currentTarget)}}}({viewField:e.viewField,recordIds:e.recordIds}),r=n.stat,o=n.statValue,l=n.fieldType,c=n.onClick;if(r&&r.type){var s=HRe[r.type].stats,d=o;("earliestDate"===r.type||"latestDate"===r.type&&o)&&(d=i()(o).format("YYYY-MM-DD")),t=u.a.createElement("span",{className:"lakex-table-stats-filled"},u.a.createElement("span",{className:"lakex-table-stats-text"},Lw(s,d+"")),u.a.createElement(oue,{type:"ReviewArrowDown",size:14}))}else t=u.a.createElement("span",{className:"lakex-table-stats-unfilled"},u.a.createElement("span",{className:"lakex-table-stats-text"},HRe.none.stats),u.a.createElement(oue,{type:"ReviewArrowDown",size:14}));return u.a.createElement("div",{className:"lakex-table-stats lakex-table-stats-".concat(l),onClick:c},t)},WRe=Object.defineProperty,$Re=Object.getOwnPropertyDescriptor,GRe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"getStatisticsComponent",value:function(){return qRe}}],[{key:"pluginModule",value:function(){return dd().contribution(PRe).register(LRe).register(this)}}])}();GRe.pluginName="render-statistics",GRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?$Re(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WRe(t,n,i),i}([Gs({contrib:[toe,fxe]})],GRe);var KRe=Object.defineProperty,YRe=Object.getOwnPropertyDescriptor,JRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?YRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KRe(t,n,i),i},XRe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"undo",hotkey:"⌘+Z",name:"撤销",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.undo()}}),e.registerItem({id:"redo",hotkey:"⌘+shift+Z",name:"重做",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.redo()}})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function ZRe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QRe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZRe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZRe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}XRe.pluginName="render-history",JRe([Ks(nR)],XRe.prototype,"_commandService",2),XRe=JRe([Gs({contrib:[toe,Bre]})],XRe);var eFe=function(e){var t=e.listeners,n=e.disable,r=void 0!==n&&n;return r?u.a.createElement(d.a,{title:Lw("取消排序后，可进行拖拽")},u.a.createElement("div",QRe(QRe({className:I()("lakex-viewer-grid-row-dragger",{disable:r})},t),{},{onClick:function(e){return e.stopPropagation()}}),u.a.createElement(oue,{type:"Drag"}))):u.a.createElement("div",QRe(QRe({className:I()("lakex-viewer-grid-row-dragger")},t),{},{onClick:function(e){return e.stopPropagation()}}),u.a.createElement(oue,{type:"Drag"}))},tFe=Object.defineProperty,nFe=Object.getOwnPropertyDescriptor,rFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?nFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tFe(t,n,i),i},oFe=function(){return Ew((function e(){_w(this,e)}),[{key:"OrderDragIcon",get:function(){return eFe}},{key:"updateViewOrder",value:function(e,t){this._commandService.execCommand("changeViewOrder",{sourceViewId:e,targetViewId:t})}},{key:"updateRecordOrder",value:function(e,t,n,r){var o=this._readService.getActiveView();this._commandService.execCommand("changeRecordOrder",{viewId:null==o?void 0:o.get("uuid"),sourceRecordId:e,targetRecordId:t,targetGroupItem:n,direction:r})}},{key:"updateFieldOrder",value:function(e,t){var n=this._readService.getActiveView();this._commandService.execCommand("changeFieldOrder",{viewId:null==n?void 0:n.get("uuid"),sourceFieldId:e,targetFieldId:t})}},{key:"updateFieldOptionOrder",value:function(e,t,n){this._commandService.execCommand("changeFieldOptionOrder",{fieldId:e,sourceFieldOptionId:t,targetFieldOptionId:n})}}])}();rFe([Ks(nR)],oFe.prototype,"_commandService",2),rFe([Ks(oA)],oFe.prototype,"_readService",2),oFe=rFe([Gs()],oFe);var iFe=Is.defineToken("OrderRenderPluginContribution"),aFe=Object.defineProperty,uFe=Object.getOwnPropertyDescriptor,lFe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().contribution(iFe).register(this).register(oFe)}}])}();lFe.pluginName="render-order",lFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?uFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aFe(t,n,i),i}([Gs({contrib:toe})],lFe);var cFe=Object.defineProperty,sFe=Object.getOwnPropertyDescriptor,dFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cFe(t,n,i),i},fFe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(t){var n=t.context;if("switchView"===n.commandName){var r=n.argArray[0].viewId;e._openerService.setHash("view",r)}}))}},{key:"registerOpenerApp",value:function(){return[{name:"view",display_name:"View",description:"视图"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"view-opener",apps:["view"],open:function(t){e._commandService.execCommand("switchView",{viewId:t},!0)}}]}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{useWindowScroll:{type:"boolean",description:"滚动容器是否为 window"},customScrollParent:{type:"object",description:"自定义滚动容器，useWindowScroll 场景下触发滚动加载，类型为 HTMLElement | undefined"},disableVirtualScroll:{type:"boolean",description:"是否禁用虚拟滚动"}}}),e.registerDefaultValue({"view.useWindowScroll":!1,"view.customScrollParent":void 0,"view.disableVirtualScroll":!1})}}])}();fFe.pluginName="render-viewer-manage",dFe([Ks(nR)],fFe.prototype,"_commandService",2),dFe([Ks(pie)],fFe.prototype,"_openerService",2),fFe=dFe([Gs({contrib:[toe,Ioe]})],fFe);var pFe=function(){var e=yre(_oe),t=Object(a.useCallback)((function(t){t.preventDefault(),e.emitClickIcon({iconName:"grid-field-config",event:t})}),[e]);return u.a.createElement("div",{className:"lakex-viewer-grid-header-blank",onClick:t},u.a.createElement(oue,{type:"Add"}))},vFe=Object.defineProperty,hFe=Object.getOwnPropertyDescriptor,gFe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"getAddFieldComponent",value:function(){return pFe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();gFe.pluginName="render-add-field",gFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?hFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vFe(t,n,i),i}([Gs({contrib:[toe,pxe]})],gFe);var mFe=function(e){var t=e.inGroup,n=void 0!==t&&t,r=e.index,o=void 0===r?-1:r,i=e.viewGroupRecord,l=e.viewRecords,c=e.viewFields,s=yre(nR),d=yre(oA),f=yre(nxe),p=Object(a.useCallback)((function(){var e,t;if(n){var r=null==(e=l[o])?void 0:e.get("record_uuid"),a="";if(i){var u=null==i?void 0:i.option;u&&((null==(t=u.value)?void 0:t.toJSON)&&(u.value=u.value.toJSON()),a=d.groupValue(u))}s.execCommand("addEmptyRecord",{sourceRecordId:r,groupItemKey:a})}else s.execCommand("addEmptyRecord");if(f){var p=f.createGridSelectionByIndex(n?o+1:l.length,0,l.length+1,c.length);null==f||f.scrollToSelection(p,"end")}}),[]);return u.a.createElement("div",{className:"lakex-viewer-grid-add-record"},u.a.createElement(oue,{type:"Add",onClick:p,size:14}))},yFe=Object.defineProperty,bFe=Object.getOwnPropertyDescriptor,wFe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"getAddRecordComponent",value:function(){return mFe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();wFe.pluginName="render-add-record",wFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?bFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yFe(t,n,i),i}([Gs({contrib:[toe,vxe]})],wFe);var _Fe=Is.defineToken("SearchRegistryToken"),kFe=Is.defineToken("SearchRenderPluginContribution"),CFe=function(e){var t=e.isFolding,n=e.onFold;return u.a.createElement("span",{className:"lakex-viewer-grid-group-fold"},u.a.createElement(oue,{type:"ReviewArrowDown",size:16,onClick:function(){n&&n(!t)}}))};function EFe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return OFe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OFe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function OFe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function SFe(e,t,n){return t=dk(t),sk(e,xFe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function xFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xFe=function(){return!!e})()}var jFe=Object.defineProperty,DFe=Object.getOwnPropertyDescriptor,AFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?DFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jFe(t,n,i),i},RFe=function(e){function t(){var e;return _w(this,t),(e=SFe(this,t,arguments))._map={},e._onGroupFoldingChange=e._register(new Lk),e.onGroupFoldingChange=e._onGroupFoldingChange.event,e}return vk(t,e),Ew(t,[{key:"getGroupFolding",value:function(e,t){var n,r=new Set,o=EFe(this._readService.getGroupItems(e,t));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.get("collapse")&&r.add(i.get("key"))}}catch(e){o.e(e)}finally{o.f()}return this.setCache(e,t,r),r}},{key:"setCache",value:function(e,t,n){this._map[e]=this._map[e]||{},this._map[e][t]=n}},{key:"FoldIcon",get:function(){return CFe}},{key:"setGroupFolding",value:function(e,t,n,r){var o,i;r?null==(o=this._map[e][t])||o.add(n):null==(i=this._map[e][t])||i.delete(n),this._commandService.execCommand("updateGridGroupFold",{viewId:e,fieldId:t,groupId:n,value:r}),this._onGroupFoldingChange.emit({viewId:e,fieldId:t,groupId:n,data:this._map})}},{key:"tryUnFoldCellGroup",value:function(e,t){if(e&&t){var n=this._readService.getViewRecordByRecordId(t||"");if(n){var r=this._readService.getViewGroup();if(r){var o=r.field.get("uuid"),i=(null==n?void 0:n.get("group_item_key"))||"ungroup",a=this.getGroupFolding(e,o);i&&(null==a?void 0:a.has(i))&&this.setGroupFolding(e,o,i,!1)}}}}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function FFe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return IFe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IFe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function IFe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function PFe(e,t,n){return t=dk(t),sk(e,MFe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function MFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MFe=function(){return!!e})()}AFe([Ks(oA)],RFe.prototype,"_readService",2),AFe([Ks(nR)],RFe.prototype,"_commandService",2),AFe([Ts()],RFe.prototype,"destroy",1),RFe=AFe([Gs()],RFe);var TFe=Object.defineProperty,NFe=Object.getOwnPropertyDescriptor,BFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?NFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TFe(t,n,i),i},VFe=XF.Plugin("search"),LFe=function(e){function t(){var e;return _w(this,t),(e=PFe(this,t,arguments))._selectionService=null,e._highlightService=null,e.isInSearching=!1,e._onSearching=e._register(new Lk),e.onSearching=e._onSearching.event,e._onExitSearching=e._register(new Lk),e.onExitSearching=e._onExitSearching.event,e}return vk(t,e),Ew(t,[{key:"_getViewSearchResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this._readService.isGroup(e),r=this._readService.getViewFields(e),o=[];if(n){var i,a=FFe(this._readService.getGroupViewRecords(e));try{for(a.s();!(i=a.n()).done;){var u=i.value.viewRecords;if(u){var l,c=FFe(u);try{for(c.s();!(l=c.n()).done;){var s,d=l.value,f=FFe(r);try{for(f.s();!(s=f.n()).done;){var p=s.value,v=this._getMatch(t,p.get("field_uuid"),d.get("record_uuid"));v&&o.push(v)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){a.e(e)}finally{a.f()}}else{var h=this._readService.getViewRecords(e);if(!r||0===r.length)return o;var g,m=FFe(h);try{for(m.s();!(g=m.n()).done;){var y,b=g.value,w=FFe(r);try{for(w.s();!(y=w.n()).done;){var _=y.value,k=this._getMatch(t,_.get("field_uuid"),b.get("record_uuid"));k&&o.push(k)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){m.e(e)}finally{m.f()}}return o}},{key:"_getMatch",value:function(e,t,n){var r=this._readService.getCellFormattedValue(t,n);try{var o=this._searchRegistry.getMatchMiddlewares()||[];if(o.length>0){var i,a=FFe(o);try{for(a.s();!(i=a.n()).done;){var u=i.value;r=u?u(e,t,n,r):r}}catch(e){a.e(e)}finally{a.f()}}}catch(e){VFe("search match middleware error:",e)}if(r)return r.includes(e)?{fieldId:t,recordId:n}:void 0}},{key:"search",value:function(e,t){var n,r,o=this._readService.getActiveView();if(!o)return[];var i=this._getViewSearchResult(o.get("uuid"),e);return i.length>0?null==(n=this._highlightService)||n.setHighlights(i,t):null==(r=this._highlightService)||r.clearHighlights(),(null==o?void 0:o.get("type"))!==sE.GRID?Xu(i.map((function(e){return{recordId:e.recordId}})),"recordId"):i}},{key:"jumpToSearch",value:function(e,t){var n,r,o;if(e){var i=null==(n=this._selectionService)?void 0:n.createSelectionById(e.recordId,e.fieldId,!1);if(i){var a=this._readService.getActiveView();if(!a)return;this._groupFoldService.tryUnFoldCellGroup(null==a?void 0:a.get("uuid"),e.recordId),t?null==(r=this._selectionService)||r.setSelection(i):null==(o=this._selectionService)||o.scrollToSelection(i,"center")}}}},{key:"closeSearch",value:function(){var e,t,n,r;null==(e=this._highlightService)||e.clearHighlights(),(null==(n=null==(t=this._readService)?void 0:t.getActiveView())?void 0:n.get("type"))!==sE.GRID&&(null==(r=this._selectionService)||r.removeSelection())}},{key:"emitSearchingEvent",value:function(){this.isInSearching=!0,this._onSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!1)}},{key:"emitExitSearchingEvent",value:function(){this.isInSearching=!1,this._onExitSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!0)}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function zFe(e,t,n){return t=dk(t),sk(e,UFe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function UFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UFe=function(){return!!e})()}BFe([Ks(oA)],LFe.prototype,"_readService",2),BFe([Ks(_Fe)],LFe.prototype,"_searchRegistry",2),BFe([Ks(Foe)],LFe.prototype,"_renderFocusService",2),BFe([Ks(nxe),As()],LFe.prototype,"_selectionService",2),BFe([Ks(BSe),As()],LFe.prototype,"_highlightService",2),BFe([Ks(RFe)],LFe.prototype,"_groupFoldService",2),BFe([Ts()],LFe.prototype,"destroy",1),LFe=BFe([Gs()],LFe);var HFe=Object.defineProperty,qFe=Object.getOwnPropertyDescriptor,WFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?qFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&HFe(t,n,i),i},$Fe=function(e){function t(){return _w(this,t),zFe(this,t,arguments)}return vk(t,e),Ew(t,[{key:"getMatchMiddlewares",value:function(){return(this.searchProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerMatchMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}(bk);WFe([yd(kFe)],$Fe.prototype,"searchProvider",2),$Fe=WFe([Gs({token:_Fe})],$Fe);var GFe=Object.defineProperty,KFe=Object.getOwnPropertyDescriptor,YFe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(this).contribution(kFe).register($Fe).register(LFe)}}])}();YFe.pluginName="render-search",YFe=function(e,t,n,r){for(var o,i=r>1?void 0:r?KFe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GFe(t,n,i),i}([Gs({contrib:[toe]})],YFe);var JFe=function(e){return e.delRow="delRow",e.delCol="delCol",e}(JFe||{}),XFe=function(e){return e[e.possible=1]="possible",e[e.unpossible=0]="unpossible",e}(XFe||{});function ZFe(e,t,n){return t=dk(t),sk(e,QFe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QFe=function(){return!!e})()}var eIe=Object.defineProperty,tIe=Object.getOwnPropertyDescriptor,nIe=function(e){function t(){var e;return _w(this,t),(e=ZFe(this,t,arguments))._onChange=e._register(new Lk),e.onChange=e._onChange.event,e._possible={},e}return vk(t,e),Ew(t,[{key:"getPossible",value:function(e){return this._possible[e]}},{key:"setPossible",value:function(e,t){this._possible[e]={type:e,status:XFe.possible,data:t},this._onChange.emit({type:e,status:XFe.possible,data:t})}},{key:"setUnpossible",value:function(e,t){this._possible[e]={type:e,status:XFe.unpossible,data:t},this._onChange.emit({type:e,status:XFe.unpossible,data:t})}}])}(bk);nIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tIe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eIe(t,n,i),i}([Gs()],nIe);var rIe=Object.defineProperty,oIe=Object.getOwnPropertyDescriptor,iIe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(nIe).register(this)}}])}();function aIe(e){var t=yre(GAe),n=WI(Object(a.useState)(!1),2),r=n[0],o=n[1],i=WI(Object(a.useState)(null),2),u=i[0],l=i[1];return Zae((function(){var n=null==t?void 0:t.onRefreshTooltipChange((function(t){var n=t.recordId,r=t.desc;if(!n)return o(!1),void l(null);o(e===n),l(r)}));return function(){null==n||n.destroy()}}),[t]),{isInRefresh:r,refreshDesc:u}}function uIe(e){var t=yre(nIe),n=WI(Object(a.useState)(XFe.unpossible),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=null==t?void 0:t.onChange((function(t){t.type===JFe.delRow&&(t.data&&!t.data.includes(e)||o(t.status))}));return function(){null==n||n.destroy()}}),[t]),r}function lIe(e){var t=yre(nIe),n=WI(Object(a.useState)(XFe.unpossible),2),r=n[0],o=n[1];return Zae((function(){var n=null==t?void 0:t.onChange((function(t){t.type===JFe.delCol&&(t.data&&!t.data.includes(e)||o(t.status))}));return function(){null==n||n.destroy()}}),[]),r}iIe.pluginName="render-possible",iIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?oIe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rIe(t,n,i),i}([Gs({contrib:toe})],iIe);var cIe=function(e){var t=aIe(e.record.get("record_uuid")),n=t.isInRefresh,r=t.refreshDesc;return n?u.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip"},null==r?void 0:r.text,u.a.createElement(d.a,{placement:"top",title:null==r?void 0:r.ps},u.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip-icon"},u.a.createElement(oue,{type:"Question",size:16})))):null},sIe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.sticky,l=void 0===i||i,c=e.hasBlank,s=void 0!==c&&c,d=e.isDragging,f=void 0!==d&&d,p=e.isGroupLast,v=void 0!==p&&p,h=e.disableDrag,g=void 0!==h&&h,m=e.isReadonly,y=e.listeners,b=e.rowHeight,w=yre(yxe).Record,_=uIe(n.get("record_uuid")),k=Object(a.useRef)(),C=function(e){var t=e.rowIndex,n=yre(nxe),r=function(){var e,r,o=null==(e=null==n?void 0:n.getSelection())?void 0:e.getRangeAt(0);return(null==(r=null==o?void 0:o.start)?void 0:r.row)===t},o=function(){return!!(null==n?void 0:n.getSelection())&&r()&&(null==n?void 0:n.isSelectOneCell())},i=function(){return null==n?void 0:n.isInRowsSelect(t)},u=WI(Object(a.useState)(r()),2),l=u[0],c=u[1],s=WI(Object(a.useState)(o()),2),d=s[0],f=s[1],p=WI(Object(a.useState)(i()),2),v=p[0],h=p[1];return Zae((function(){var e=null==n?void 0:n.onChange((function(){c(r()),f(o()),h(i())}));return function(){null==e||e.destroy()}}),[n,t]),{isRowSelected:l,isSelectOneCell:d,isInRowsSelect:v}}({rowIndex:t}),E=C.isRowSelected,O=C.isSelectOneCell,S=C.isInRowsSelect;return y?u.a.createElement("div",{className:I()("lakex-viewer-grid-row-container",{"is-dragging":f,sticky:l,normal:!l,"group-last":v,selected:E,"is-select-one":O,"is-in-row-select":S,"is-del-possible":_}),ref:function(e){return k.current=e}},l&&u.a.createElement(cIe,{record:n}),w&&u.a.createElement(w,{index:t,record:n,records:r,fields:o,sticky:l,hasBlank:s,rowHeight:b,disableDrag:g,isReadonly:m,listeners:y})):u.a.createElement("div",{className:I()("lakex-viewer-grid-row-container",{sticky:l,normal:!l,"group-last":v,"is-select-one":O,"is-in-row-select":S,"is-del-possible":_}),ref:function(e){return k.current=e}},l&&u.a.createElement(cIe,{record:n}),w&&u.a.createElement(w,{index:t,record:n,records:r,fields:o,sticky:l,hasBlank:s,rowHeight:b,isReadonly:m,disableDrag:g}))},dIe=Is.defineToken("ContextMenuContribution");function fIe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pIe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pIe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function pIe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vIe=Object.defineProperty,hIe=Object.getOwnPropertyDescriptor,gIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?hIe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vIe(t,n,i),i},mIe=function(){return Ew((function e(){_w(this,e),this._items=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=fIe(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerContextMenu)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.key;if(this._items.has(t))throw new Error("A contextmenu item is already registered with the '".concat(t,"'"));return this._items.set(t,e),e}},{key:"getContextMenuItem",value:function(e){return"|"===e?e:this._items.get(e)}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.key;this.getContextMenuItem(t)&&this._items.delete(t)}},{key:"hasContextMenu",get:function(){return this._items.size>0}}])}();function yIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yIe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gIe([yd(dIe)],mIe.prototype,"toolbarPluginProvider",2),mIe=gIe([Gs()],mIe);var wIe=Object.defineProperty,_Ie=Object.getOwnPropertyDescriptor,kIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?_Ie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wIe(t,n,i),i},CIe=function(){return Ew((function e(){_w(this,e)}),[{key:"getMenuItems",value:function(e){var t=this,n=(this._configurationService.getValue("contextMenu")||[]).map((function(e){return t._contextMenuRegistry.getContextMenuItem(e)})).filter((function(e){return void 0!==e}));return this.cleanMenuItems(n,e)}},{key:"cleanMenuItems",value:function(e,t){var n=[];return e.forEach((function(e){if("|"===e){var r=n[n.length-1];r&&"|"!==r||n.pop(),n.push(e)}else{if(null==e.visible&&(e.visible=!0),!(Sr(e.visible)?e.visible(t):e.visible))return;n.push(bIe(bIe({},e),{},{name:Sr(e.name)?e.name(t):e.name}))}})),"|"===n[n.length-1]&&n.pop(),"|"===n[0]&&n.shift(),n}}])}();function EIe(e,t,n){return t=dk(t),sk(e,OIe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function OIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OIe=function(){return!!e})()}kIe([Ks(lk)],CIe.prototype,"_configurationService",2),kIe([Ks(mIe)],CIe.prototype,"_contextMenuRegistry",2),CIe=kIe([Gs()],CIe);var SIe=function(e){function t(){return _w(this,t),EIe(this,t,arguments)}return vk(t,e),Ew(t)}(TH);function xIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xIe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}SIe.activators=[{eventName:"onPointerDown",handler:function(e){var t,n=e.nativeEvent;return 2!==n.button&&(!(t=n.target).dataset||!t.dataset.noDnd)}}];var DIe=function(e){var t=e.type,n=yre(Ooe).getFieldIcon(t);return n?u.a.createElement(n,{size:16}):null},AIe=function(e){var t=e.type,n=e.field,r=yre(Ooe).getFieldTagComponent(t);return r&&n?u.a.createElement(r,{field:n,position:"gridHeader"}):null},RIe=function(e){var t,n,r=e.viewRecords,o=e.viewFields,i=e.groupViewRecords,l=e.group,c=e.filters,s=e.viewField,d=e.index,f=e.size,p=e.rootHeight,v=qwe(mR.TABLE).canUpdate(),h=yre(nxe),g=yre(Exe),m=yre(oRe),y=yre(Ooe),b=yre(_oe),w=Object(a.useRef)(),_=aW({id:s.get("uuid"),disabled:!v}),k=_.attributes,C=_.listeners,E=_.setNodeRef,O=_.over,S=_.active,x=WI(Object(a.useState)(!1),2),j=x[0],D=x[1],A=qwe(mR.FIELD),R=Ywe(s.get("field_uuid")),F=R.field,P=R.fieldId,M=Object(a.useMemo)((function(){return Z_(c,(function(e){return e.get("field_uuid")===(null==F?void 0:F.get("uuid"))}))}),[c,F]),T=lIe(s.get("field_uuid")),N=function(e){var t=e.colIndex,n=yre(nxe),r=WI(Object(a.useState)(null==n?void 0:n.isSelectOneCol(t)),2),o=r[0],i=r[1];return Zae((function(){var e=null==n?void 0:n.onChange((function(){i(null==n?void 0:n.isSelectOneCol(t))}));return function(){null==e||e.destroy()}}),[n]),{isSelectColumn:o}}({colIndex:d}),B=N.isSelectColumn,V=Object(a.useCallback)((function(){if(h){var e=l?i.map((function(e){var t;return(null==(t=e.viewRecords)?void 0:t.length)||0})).reduce((function(e,t){return e+t}),0):r.length,t=h.createColumnGridSelectionByIndex(d,e,o.length);h.setSelection(t)}}),[d,r,o,l]),L=Wae((function(e,t){A.canUpdate(t)&&(null==b||b.emitClickEvent({eventName:"gridHeader:doubleClick",data:{fieldId:t.get("uuid"),event:e}}))})),z=Object(a.useCallback)((function(e){var t=e.e,n=e.fieldId;t.preventDefault(),t.stopPropagation(),V(),null==m||m.showContextMenu({e:t,from:rRe.HEADER,fieldId:n})}),[d,r,o,l]);if(Zae((function(){if(j){var e=Sre(window,"mousemove",function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return dr(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),fu(e,t,{leading:r,maxWait:t,trailing:o})}((function(e){g.emitResizing(e)}),16)),t=Sre(window,"mouseup",(function(t){g.emitResizeEnd(t),D(!1),e.destroy()}));return function(){e.destroy(),t.destroy()}}}),[j]),!F)return null;if(!y.getFieldTargetPlugin(F.get("type")))return null;var U=null==(t=null==S?void 0:S.data.current)?void 0:t.sortable.index,H=null==(n=null==O?void 0:O.data.current)?void 0:n.sortable.index;return u.a.createElement("div",{key:F.get("updated_at"),ref:function(e){E(e),w.current=e},className:I()("lakex-viewer-grid-header-column",{"in-filter":M,"is-selected":B,"is-del-possible":T}),"data-col-index":d,"data-field-id":P,style:{width:(f||g.defaultColWidth)+"px"},onClick:function(e){return V()},onContextMenu:function(e){return z({e:e,fieldId:P})},onDoubleClick:function(e){return L(e,F)}},u.a.createElement("div",jIe(jIe({className:"lakex-viewer-grid-header-column-content"},C),k),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-icon"},u.a.createElement(DIe,{type:F.get("type")})),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-name"},F.get("name")),u.a.createElement(AIe,{type:F.get("type"),field:F})),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-dropdown",onClick:function(e){return z({e:e,fieldId:P})}},u.a.createElement(oue,{type:"ReviewArrowDown",size:16})),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-resizer",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),g.emitResizeStart(e,o,d),D(!0)}}),(null==O?void 0:O.id)===s.get("uuid")&&(null==O?void 0:O.id)!==(null==S?void 0:S.id)&&u.a.createElement("div",{className:I()("lakex-viewer-grid-dragger-line",{left:U>H,right:U<H}),style:{height:p}}))},FIe=function(){var e,t=yre(nxe),n=WI(Object(a.useState)(null==(e=null==t?void 0:t.getSelection())?void 0:e.isAllSelect),2),r=n[0],o=n[1];return Zae((function(){var e=null==t?void 0:t.onChange((function(e){var t=e.selection;o(null==t?void 0:t.isAllSelect)}));return function(){null==e||e.destroy()}}),[]),u.a.createElement(k.a,{className:"lakex-viewer-grid-header-checkbox",checked:r,onChange:function(e){e.stopPropagation(),e.target.checked?null==t||t.selectAll():null==t||t.removeSelection()}})},IIe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.groupViewRecords,o=e.group,i=e.filters,a=e.sticky,l=e.stickyColNum,c=e.rootHeight,s=e.hasBlank,d=void 0!==s&&s,f=yre(yxe).AddField,p=a?ok(n,0,l):ok(n,l,n.length);return u.a.createElement("div",{className:"lakex-viewer-grid-header-row"},a&&u.a.createElement("div",{className:"lakex-viewer-grid-header-index"},u.a.createElement(FIe,null)),nk(p,(function(e,s){var d=s+(a?0:l);return u.a.createElement(RIe,{key:e.get("uuid"),viewFields:n,groupViewRecords:r,viewRecords:t,group:o,filters:i,viewField:e,index:d,size:e.get("size"),rootHeight:c})})),d&&f&&u.a.createElement(f,null))},PIe=function(e){var t,n,r,o,i=e.viewRecords,l=e.viewFields,c=e.groupViewRecords,s=e.group,d=e.filters,f=yre(oFe),p=yre(Exe),v=yre(doe),h=qwe(mR.FIELD).canCreate(),g=WI(Object(a.useState)(null),2),m=g[0],y=g[1],b=Object(a.useRef)(null),w=VU(BU(SIe,{activationConstraint:{distance:8}})),_=Object(a.useMemo)((function(){return ek(l,(function(e){return e.get("uuid")===m}))}),[m,l]),k=l.get(_),C=function(){var e=UC(jk.mark((function e(t){var n,r,o,i,a,u;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.active,i=t.over,y(null),o.id===i.id){e.next=7;break}return a=null==(n=Z_(l,(function(e){return e.get("uuid")===o.id})))?void 0:n.get("field_uuid"),u=null==(r=Z_(l,(function(e){return e.get("uuid")===i.id})))?void 0:r.get("field_uuid"),e.next=7,f.updateFieldOrder(a,u);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(kq,{sensors:w,modifiers:[cW],collisionDetection:GU,onDragStart:function(e){y(e.active.id),v.$root&&(b.current=v.$root.getBoundingClientRect())},onDragEnd:C,autoScroll:{threshold:{x:.2,y:0}}},u.a.createElement(Qq,{items:nk(l,(function(e){return jIe(jIe({},e),{},{id:e.get("uuid")})})),strategy:Gq},u.a.createElement("div",{className:I()("lakex-viewer-grid-header")},u.a.createElement("div",{className:"lakex-viewer-grid-header-left"},u.a.createElement("div",{className:"lakex-viewer-grid-header-main"},u.a.createElement(IIe,{viewFields:l,viewRecords:i,groupViewRecords:c,group:s,filters:d,sticky:!0,stickyColNum:p.stickyColNum,rootHeight:(null==(t=b.current)?void 0:t.height)||"100%"}))),u.a.createElement("div",{className:I()("lakex-viewer-grid-header-right",{"has-blank":h})},u.a.createElement("div",{className:"lakex-viewer-grid-header-main"},u.a.createElement(IIe,{viewFields:l,viewRecords:i,groupViewRecords:c,group:s,filters:d,sticky:!1,stickyColNum:p.stickyColNum,rootHeight:(null==(n=b.current)?void 0:n.height)||"100%",hasBlank:h})))),u.a.createElement(Lq,{style:{height:null==(r=b.current)?void 0:r.height},dropAnimation:null},k?u.a.createElement("div",{className:"lakex-viewer-grid-header-drag-overlay"},u.a.createElement(RIe,{viewFields:l,viewRecords:i,groupViewRecords:c,group:s,filters:d,viewField:k,index:_,size:k.get("size"),rootHeight:(null==(o=b.current)?void 0:o.height)||"100%"})):null)))},MIe=function(e){var t=e.cellNum;return u.a.createElement("div",{className:"lakex-viewer-grid-footer-column-name"},Lw("已选择 $1 个单元格",t))},TIe=function(e){var t=e.viewField,n=e.viewRecords,r=yre(yxe).Statistics;return r?u.a.createElement(r,{viewField:t,recordIds:n.map((function(e){return e.get("record_uuid")}))}):null},NIe=function(e){var t,n=e.width,r=e.viewField,o=e.viewRecords,i=yre(nxe),l=WI(Object(a.useState)(null==(t=null==i?void 0:i.getSelection())?void 0:t.getRangeAt(0)),2),c=l[0],s=l[1];Zae((function(){var e=null==i?void 0:i.onChange((function(){var e;s(null==(e=null==i?void 0:i.getSelection())?void 0:e.getRangeAt(0))}));return function(){null==e||e.destroy()}}),[i]);var d=c?(c.end.column-c.start.column+1)*(c.end.row-c.start.row+1):0;return Object(a.useMemo)((function(){return u.a.createElement("div",{className:"lakex-viewer-grid-footer-column",style:{width:n+"px"}},d>1?u.a.createElement(MIe,{cellNum:d}):u.a.createElement(TIe,{viewField:r,viewRecords:o}))}),[d,r,o])},BIe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.indexColWidth,o=e.defaultColWidth,i=e.stickyColNum,a=e.sticky,l=a?ok(n,0,i):ok(n,i,n.length);return u.a.createElement(u.a.Fragment,null,nk(l,(function(e,n){if(!e.get("field"))return null;var l=n+(a?0:i);return 0===l?u.a.createElement(NIe,{key:e.get("uuid")+"_"+l,width:r+(e.get("size")||o),viewField:e,viewRecords:t}):u.a.createElement("div",{key:e.get("uuid")+"_"+l,className:"lakex-viewer-grid-footer-column",style:{width:(e.get("size")||o)+"px"}},u.a.createElement(TIe,{viewField:e,viewRecords:t}))})))},VIe=function(e){var t=e.viewRecords,n=e.viewFields,r=yre(Exe),o=r.indexColWidth,i=r.defaultColWidth,a=r.stickyColNum;return u.a.createElement("div",{className:"lakex-viewer-grid-footer"},u.a.createElement("div",{className:"lakex-viewer-grid-footer-left"},u.a.createElement(BIe,{viewRecords:t,viewFields:n,indexColWidth:o,defaultColWidth:i,stickyColNum:a,sticky:!0})),u.a.createElement("div",{className:"lakex-viewer-grid-footer-right"},u.a.createElement(BIe,{viewRecords:t,viewFields:n,indexColWidth:o,defaultColWidth:i,stickyColNum:a,sticky:!1})))};function LIe(e,t,n){return t=dk(t),sk(e,zIe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function zIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zIe=function(){return!!e})()}var UIe=Object.defineProperty,HIe=Object.getOwnPropertyDescriptor,qIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?HIe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UIe(t,n,i),i},WIe=function(e){function t(){var e;return _w(this,t),(e=LIe(this,t,arguments))._onMouseOver=e._register(new Lk),e.onMouseOver=e._onMouseOver.event,e._onMouseLeave=e._register(new Lk),e.onMouseLeave=e._onMouseLeave.event,e}return vk(t,e),Ew(t,[{key:"mouseOver",value:function(e,t){this._onMouseOver.emit({rowId:t,rowIndex:e})}},{key:"mouseLeave",value:function(e,t){this._onMouseLeave.emit({rowId:t,rowIndex:e})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);qIe([Ts()],WIe.prototype,"destroy",1),WIe=qIe([Gs()],WIe);var $Ie=["style","context"],GIe=["style","context","item"];function KIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KIe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JIe=function(e){var t=e.stickyPaneWidth,n=e.isUngroup,r=e.groupField,o=e.groupOption,i=e.viewRecords,a=e.fields,l=e.isFolding,c=e.onFold,s=yre(Ooe),d=yre(Exe),f=yre(yxe),p=yre(RFe,{optional:!0}),v=null==s?void 0:s.getFieldComponent(null==r?void 0:r.get("type")),h=f.Statistics,g=null==p?void 0:p.FoldIcon;return u.a.createElement("div",{className:I()("lakex-viewer-grid-group-header",{folded:l})},u.a.createElement("div",{className:"left",style:{width:t}},u.a.createElement("div",{className:I()("lakex-viewer-grid-group-header-index",{"no-sticky-col":0===d.stickyColNum})},g&&u.a.createElement(g,{isFolding:l,onFold:c}),n?Lw("（空）"):v&&u.a.createElement("div",{className:"lakex-viewer-grid-group-field"},u.a.createElement(v,{readonly:!0,field:r,cell:o,checkCell:!1,writeable:!1}))),ok(a,0,d.stickyColNum).map((function(e,t){var n;return u.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:I()("lakex-viewer-grid-group-header-column sticky")},h?u.a.createElement(h,{viewField:e,recordIds:i.map((function(e){return e.get("record_uuid")}))}):null)}))),u.a.createElement("div",{className:"right"},ok(a,d.stickyColNum,a.length).map((function(e,t){var n;return u.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:I()("lakex-viewer-grid-group-header-column"),style:{width:e.get("size")+"px"}},h?u.a.createElement(h,{viewField:e,recordIds:i.map((function(e){return e.get("record_uuid")}))}):null)}))))},XIe=function(e){var t,n,r,o,i=e.isSameGroup,a=e.recordIndexMap,l=e.active,c=e.over,s=e.record,d=null==(n=null==(t=null==l?void 0:l.data.current)?void 0:t.sortable)?void 0:n.index,f=null==(o=null==(r=null==c?void 0:c.data.current)?void 0:r.sortable)?void 0:o.index;if(!c||!l)return null;if(!i&&c.id===s.id&&c.id!==l.id){var p=a[c.id].isGroupFirst,v=a[c.id].isGroupLast;return u.a.createElement("div",{className:I()("lakex-viewer-grid-group-dragger-line",{top:d>f,bottom:d<f,first:p,last:v})})}return null},ZIe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.rowHeight,a=e.listeners,l=void 0===a?{}:a,c=e.isReadonly,s=e.setNodeRef,d=e.style,f=e.attributes,p=e.isGroupLast,v=e.isSameGroup,h=e.recordIndexMap,g=e.active,m=e.over,y=yre(WIe);return u.a.createElement("div",YIe({ref:c?void 0:s,className:"lakex-viewer-grid-group-row",style:d,onMouseOver:function(){null==y||y.mouseOver(t,n.id)},onMouseLeave:function(){null==y||y.mouseLeave(t,n.id)}},f),u.a.createElement(sIe,{key:(null==n?void 0:n.id)+"_sticky_"+t,index:t,record:n.viewRecord,viewRecords:r,viewFields:o,rowHeight:i,sticky:!0,isGroupLast:p,listeners:l,isReadonly:c}),u.a.createElement(sIe,{key:(null==n?void 0:n.id)+"_"+t,index:t,record:n.viewRecord,viewRecords:r,rowHeight:i,viewFields:o,sticky:!1,isGroupLast:p,isReadonly:c}),u.a.createElement(XIe,{isSameGroup:v,recordIndexMap:h,viewRecords:r,active:g,over:m,record:n}))},QIe=function(e){var t=e.stickyPaneWidth,n=e.index,r=e.record,o=e.groupViewRecords,i=e.viewFields,a=e.rowHeight,l=e.viewRecords,c=e.recordIndexMap,s=e.groupFolding,d=yre(yxe),f=yre(RFe,{optional:!0}),p=qwe(mR.TABLE).isReadonly(),v=c[r.id],h=v.groupIndex,g=v.isGroupFirst,m=v.isGroupLast,y=o[h],b=y.key||d.UNGROUP_KEY,w=s.has(b),_=null==d?void 0:d.AddRecord,k=null,C=aW({id:r.id,disabled:p}),E=C.attributes,O=C.listeners,S=C.setNodeRef,x=C.transform,j=C.transition,D=C.isDragging,A=C.over,R=C.active;if(!w){var F={transform:"",transition:j,opacity:D?0:1},I=!(!R||!A)&&c[R.id].groupIndex===c[A.id].groupIndex;I&&(F.transform=Qae.Transform.toString(x)||""),k=u.a.createElement(ZIe,{index:n,record:r,viewRecords:l,viewFields:i,rowHeight:a,listeners:O,isReadonly:p,setNodeRef:S,style:F,attributes:E,isGroupLast:m,isSameGroup:I,recordIndexMap:c,active:R,over:A})}return u.a.createElement("td",null,g&&u.a.createElement(JIe,{stickyPaneWidth:t,isUngroup:!y.option,groupField:y.field,groupOption:y.option,viewRecords:y.viewRecords,fields:i,isFolding:w,onFold:function(e){var t;null==f||f.setGroupFolding(null==(t=i.get(0))?void 0:t.get("view_uuid"),y.field.get("uuid"),b,e)}}),k,!p&&m&&!w&&u.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:t}},_?u.a.createElement(_,{inGroup:!0,index:n,viewGroupRecord:y,viewRecords:l,viewFields:i}):null))},ePe=function(e,t,n,r){var o=yre(Pxe),i=yre(oFe),u=yre(nxe),l=yre(oA),c=WI(Object(a.useState)(null),2),s=c[0],d=c[1],f=WI(Object(a.useState)([]),2),p=f[0],h=f[1],g=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=0&&s&&p.includes(s)&&r>0){var o=u.createGridSelectionByScope({row:e,column:0},{row:e+r-1,column:n.length-1},t.length,n.length);o&&u.setSelection(o)}},m=function(){var n=UC(jk.mark((function n(a){var u,c,s,f,m,y,b,w,_,k,C,E,O,S,x,j,D,A,R,F,I;return jk.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(y=a.active,b=a.over,!(y.id!==b.id||p.length>1)){n.next=20;break}if(w=y.id,_=b.id,k=e[w].groupIndex,C=e[_].groupIndex,E=t[k]||null,O=t[C]||null,!(null==r?void 0:r.get("keep_sort"))||E!==O){n.next=11;break}return v.a.warn(Lw("取消排序后，可进行拖拽")),n.abrupt("return");case 11:return E&&O&&E!==O&&(S=null==(u=y.data.current.sortable)?void 0:u.index,x=null==(c=b.data.current.sortable)?void 0:c.index,j=l.getOriginViewRecords(),D=ek(j,(function(e){return e.get("record_uuid")===w})),A=ek(j,(function(e){return e.get("record_uuid")===_})),S<x&&D>A&&(_=null==(s=j[A+1])?void 0:s.record_uuid),S>x&&D<A&&(_=null==(f=j[A-1])?void 0:f.record_uuid)),n.next=14,i.updateRecordOrder(p.length>0?p:w,_,O);case 14:if(!(null==r?void 0:r.get("keep_sort"))){n.next=20;break}return R=l.getFlatViewRecords(r.get("view_uuid")),F=ek(R,(function(e){return e.get("record_uuid")===w})),o.scrollIntoView({index:F,align:"start"}),v.a.warn(Lw("当前处于保持排序状态，为您重新定位")),n.abrupt("return");case 20:I=null==(m=y.data.current.sortable)?void 0:m.index,g(I,p.length),d(null),h([]);case 24:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=VU(BU(TH,{activationConstraint:{distance:8}}));return{activeId:s,selectedIds:p,sensors:y,onDragStart:function(e){var r;d(e.active.id);var o,i,a=u.getSelection(),l=null==(r=e.active.data.current.sortable)?void 0:r.index;if(a&&u.isRowSelection()&&u.isInRowsSelect(l)){var c=(null==u?void 0:u.getRecordIds(a))||[];h(c),o=l,(i=u.createRowGridSelectionByIndex(o,t.length,n.length))&&u.setSelection(i)}else h([])},onDragEnd:m}},tPe=function(e){var t=e.style,n=e.context,r=wre(e,$Ie),o=n.rootRect,i=n.useWindowScroll;return u.a.createElement("table",YIe(YIe({},r),{},{style:YIe(YIe({},t),{},{width:i?"auto":"100%",minWidth:i?"750px":"auto",minHeight:i?0:null==o?void 0:o.height})}))},nPe=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=yre(Doe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):u.a.createElement("thead",{ref:t,style:YIe(YIe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridHeader})},o)})),rPe=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=yre(Doe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):u.a.createElement("tfoot",{ref:t,style:YIe(YIe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridFooter})},o)})),oPe=function(e){var t,n=e.style,r=e.context,o=e.item,i=wre(e,GIe),l=WI(Object(a.useState)(0),2),c=l[0],s=l[1],d=i["data-known-size"],f={"--child-height":"".concat(c,"px")},p=null==(t=r.recordIndexMap[o.id])?void 0:t.totalIndex;return Zae((function(){s((function(e){return 0===d?e:d}))}),[d]),u.a.createElement("tr",YIe(YIe({className:"height-preserving-tr"},i),{},{"data-tr-row":p,style:YIe(YIe({},n),f)}))},iPe=function(e){var t=e.groupViewRecords,n=e.viewFields,r=e.viewConfig,o=e.group,i=e.filters,c=e.stickyPaneWidth,s=e.recordHeight,d=e.rootRect,f=e.useWindowScroll,p=e.customScrollParent,v=e.customModalContainer,h=e.disableVirtualScroll,g=yre(Pxe),m=Tre(),y=yre(yxe),b=yre(RFe,{optional:!0}),w=null==y?void 0:y.AddRecord,_=function(e){return Object(a.useMemo)((function(){for(var t={},n=[],r=[],o=0,i=0;i<e.length;i++){var a=e[i].viewRecords||[];i>0&&(o+=(e[i-1].viewRecords||[]).length);for(var u=0;u<a.length;u++){var l=a[u];t[l.get("record_uuid")]={groupIndex:i,totalIndex:o+u,indexInGroup:u,isGroupFirst:0===u,isGroupLast:u===a.length-1},n.push({id:l.get("record_uuid"),viewRecord:l}),r.push(l)}}return{recordIndexMap:t,allRecords:n,viewRecords:r}}),[e])}(t),k=_.allRecords,C=_.viewRecords,E=_.recordIndexMap,O=ePe(E,t,n,r),S=O.activeId,x=O.selectedIds,j=O.sensors,D=O.onDragStart,A=O.onDragEnd,R=qwe(mR.RECORD).canCreate(),F=WI(Object(a.useState)((function(){return(null==b?void 0:b.getGroupFolding(r.get("view_uuid"),o.get("field_uuid")))||new Set})),2),P=F[0],M=F[1],T=Object(a.useRef)(null),N=Object(a.useMemo)((function(){var e=C.filter((function(e){var t=e.get("group_item_key")||y.UNGROUP_KEY,n=P.has(t),r=e.get("record_uuid");return!!E[r].isGroupFirst||!n})).map((function(e){return{id:e.get("record_uuid"),viewRecord:e}}));return S?e.filter((function(e){var t=e.id;return t===S||!x.includes(t)})):e}),[C,S,x,P,E]),B=N.findIndex((function(e){return e.id===S})),V=N[B];return Zae((function(){var e=null==b?void 0:b.onGroupFoldingChange((function(e){var t=r.get("view_uuid"),n=o.get("field_uuid");if(e.viewId===t&&e.fieldId===n){var i=e.data[t][n];M(i),m()}}));return function(){null==e||e.destroy()}}),[b,r.get("view_uuid"),o.get("field_uuid")]),Zae((function(){T.current&&(null==g||g.setVirtuosoRef(T.current))}),[g,T]),Jae((function(){null==g||g.destroy()})),0===k.length&&R?w?u.a.createElement(w,{inGroup:!0,index:-1,viewRecords:[],viewFields:n}):null:u.a.createElement(kq,{sensors:j,modifiers:[pW,fW],collisionDetection:GU,onDragStart:D,onDragEnd:A,autoScroll:{threshold:{x:0,y:.2}}},u.a.createElement(Qq,{items:N,strategy:Jq},u.a.createElement(u.a.Fragment,null,u.a.createElement(V7,{ref:T,useWindowScroll:f,customScrollParent:p,context:{rootRect:d,useWindowScroll:f,groupFolding:P,ungroupKey:y.UNGROUP_KEY,recordIndexMap:E},components:{Table:tPe,TableHead:nPe,TableFoot:rPe,TableRow:oPe},isScrolling:function(e){null==g||g.isScrolling(e)},onScroll:null==g?void 0:g.emitScrollEvent,data:N,defaultItemHeight:s,itemSize:function(e){if(void 0===e.dataset.index)return s;var n=parseInt(e.dataset.index),r=N[n];if(!r)return s;var o=E[r.id],i=o.isGroupFirst,a=o.isGroupLast,u=o.groupIndex,l=t[u].key||y.UNGROUP_KEY,c=P.has(l);return(c?0:s)+(i?56:0)+(a&&!c&&R?40:0)+(n===N.length-1?20:0)},increaseViewportBy:h?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==d?void 0:d.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(PIe,{groupViewRecords:t,viewFields:n,viewConfig:r,group:o,filters:i})))},fixedFooterContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(VIe,{viewRecords:C,viewFields:n,group:o,stickyPaneWidth:c})))},itemContent:function(e,r){var o=e;return N.length!==C.length&&(o=E[r.id].totalIndex),u.a.createElement(u.a.Fragment,null,u.a.createElement(QIe,{key:r.id,groupViewRecords:t,stickyPaneWidth:c,index:o,record:r,viewFields:n,rowHeight:s,viewRecords:C,recordIndexMap:E,groupFolding:P}),e===N.length-1?u.a.createElement("div",{className:"lakex-viewer-grid-group-gap-line"}):null)}}),Object(l.createPortal)(u.a.createElement(Lq,{dropAnimation:null,style:{width:"".concat(d.width,"px"),left:"".concat(d.left,"px"),overflow:"hidden"}},V?u.a.createElement("div",{className:I()("lakex-viewer-grid-group-row",{count:x.length>0}),style:{"--count":"'".concat(x.length,"'")}},u.a.createElement(sIe,{index:B,record:V.viewRecord,viewRecords:C,viewFields:n,rowHeight:s,sticky:!0,isGroupLast:!1}),u.a.createElement(sIe,{index:B,record:V.viewRecord,viewRecords:C,viewFields:n,rowHeight:s,sticky:!1,isGroupLast:!1})):null),v))))},aPe=["style","context"],uPe=["style","context","item"];function lPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lPe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sPe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.rowHeight,a=e.keepSort,l=e.listeners,c=void 0===l?{}:l,s=e.isReadonly,d=e.count,f=void 0===d?0:d,p=qwe(mR.FIELD).canCreate,v=yre(WIe);return u.a.createElement("div",{className:I()("lakex-viewer-grid-list-row",{count:f>0}),style:{"--count":"'".concat(f,"'")},onMouseOver:function(){null==v||v.mouseOver(t,n.get("uuid"))},onMouseLeave:function(){null==v||v.mouseLeave(t,n.get("uuid"))}},u.a.createElement(sIe,{index:t,record:n,viewRecords:r,viewFields:o,rowHeight:i,sticky:!0,listeners:c,disableDrag:!!a,isReadonly:s}),u.a.createElement(sIe,{index:t,record:n,viewRecords:r,viewFields:o,rowHeight:i,sticky:!1,hasBlank:p(),disableDrag:!!a,isReadonly:s}))},dPe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.rowHeight,a=e.keepSort,l=e.isReadonly,c=!qwe(mR.TABLE).canUpdate()||!!a,s=aW({id:n.get("record_uuid"),disabled:c||l}),d=s.attributes,f=s.listeners,p=s.setNodeRef,v=s.transform,h=s.transition,g=s.isDragging,m={transform:Qae.Transform.toString(v),transition:h,zIndex:g?"100":"auto",opacity:g?0:1};return u.a.createElement("td",cPe({ref:c?void 0:p,style:m},d),u.a.createElement(sPe,{index:t,record:n,viewRecords:r,viewFields:o,rowHeight:i,listeners:f,keepSort:a,isReadonly:l}))},fPe=function(e,t){var n=yre(oFe),r=yre(nxe),o=WI(Object(a.useState)(null),2),i=o[0],u=o[1],l=WI(Object(a.useState)([]),2),c=l[0],s=l[1],d=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>=0&&i&&c.includes(i)&&o>0){var a=r.createGridSelectionByScope({row:n,column:0},{row:n+o-1,column:t.length-1},e.length,t.length);a&&r.setSelection(a)}},f=function(){var e=UC(jk.mark((function e(t){var r,o,i,a,l,f;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.active,i=t.over,!(o.id!==i.id||c.length>1)){e.next=6;break}return a=o.id,l=i.id,e.next=6,n.updateRecordOrder(c.length>0?c:a,l);case 6:f=null==(r=o.data.current.sortable)?void 0:r.index,d(f,c.length),u(null),s([]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=VU(BU(TH,{activationConstraint:{distance:8}}));return{activeId:i,selectedIds:c,sensors:p,onDragStart:function(n){var o;u(n.active.id);var i,a,l=r.getSelection(),c=null==(o=n.active.data.current.sortable)?void 0:o.index;if(l&&r.isRowSelection()&&r.isInRowsSelect(c)){var d=(null==r?void 0:r.getRecordIds(l))||[];s(d),i=c,(a=r.createRowGridSelectionByIndex(i,e.length,t.length))&&r.setSelection(a)}else s([])},onDragEnd:f}},pPe=function(e){var t=e.style,n=e.context,r=wre(e,aPe),o=n.rootRect,i=n.useWindowScroll;return u.a.createElement("table",cPe(cPe({},r),{},{style:cPe(cPe({},t),{},{width:i?"auto":"100%",minWidth:i?"750px":"auto",minHeight:i?0:null==o?void 0:o.height})}))},vPe=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=yre(Doe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):u.a.createElement("thead",{ref:t,style:cPe(cPe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridHeader})},o)})),hPe=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=yre(Doe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):u.a.createElement("tfoot",{ref:t,style:cPe(cPe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridFooter})},o)})),gPe=function(e){var t=e.style,n=e.context,r=e.item,o=wre(e,uPe),i=WI(Object(a.useState)(0),2),l=i[0],c=i[1],s=o["data-known-size"],d={"--child-height":"".concat(l,"px")},f=n.recordIndexMap[r.id];return Zae((function(){c((function(e){return 0===s?e:s}))}),[s]),u.a.createElement("tr",cPe(cPe({className:"height-preserving-tr"},o),{},{"data-tr-row":f,style:cPe(cPe({},t),d)}))},mPe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.viewConfig,o=e.filters,i=e.stickyPaneWidth,c=e.recordHeight,s=e.rootRect,d=e.useWindowScroll,f=e.customScrollParent,p=e.customModalContainer,v=e.disableVirtualScroll,h=qwe(mR.RECORD).canCreate(),g=qwe(mR.TABLE).isReadonly(),m=yre(Pxe),y=yre(yxe),b=null==y?void 0:y.AddRecord,w=Object(a.useRef)(null),_=null==r?void 0:r.get("keep_sort"),k=fPe(t,n),C=k.activeId,E=k.selectedIds,O=k.sensors,S=k.onDragStart,x=k.onDragEnd,j=Object(a.useMemo)((function(){var e={};return nk(t,(function(t,n){e[t.get("record_uuid")]=n})),e}),[t]),D=Object(a.useMemo)((function(){return ek(t,(function(e){return e.get("record_uuid")===C}))}),[t,C]),A=t.get(D),R=Object(a.useMemo)((function(){var e=nk(t,(function(e){return{id:e.get("record_uuid"),viewRecord:e}}));return C?e.filter((function(e){var t=e.id;return t===C||!E.includes(t)})):e}),[t,C,E]);return Zae((function(){w.current&&(null==m||m.setVirtuosoRef(w.current))}),[m,w]),Jae((function(){null==m||m.destroy()})),0===t.length&&h?b?u.a.createElement(b,{viewRecords:t,viewFields:n}):null:u.a.createElement(kq,{sensors:O,modifiers:[pW,fW],collisionDetection:GU,onDragStart:S,onDragEnd:x,autoScroll:{threshold:{x:0,y:.2}}},u.a.createElement(Qq,{items:R,strategy:Jq},u.a.createElement(u.a.Fragment,null,u.a.createElement(V7,{ref:w,useWindowScroll:d,customScrollParent:f,context:{rootRect:s,useWindowScroll:d,recordIndexMap:j},components:{Table:pPe,TableHead:vPe,TableFoot:hPe,TableRow:gPe},isScrolling:function(e){null==m||m.isScrolling(e)},onScroll:null==m?void 0:m.emitScrollEvent,data:R,defaultItemHeight:c,itemSize:function(e){if(void 0===e.dataset.index)return c;var t=parseInt(e.dataset.index);return c+(t===R.length-1&&h?40:0)},increaseViewportBy:v?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==s?void 0:s.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(PIe,{viewRecords:t,viewFields:n,viewConfig:r,filters:o})))},fixedFooterContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(VIe,{viewRecords:t,viewFields:n,stickyPaneWidth:i})))},itemContent:function(e,r){var o=r.viewRecord,a=r.id;if(!o)return null;var l=e;return R.length!==t.length&&(l=j[a]>=0?j[a]:e),u.a.createElement(u.a.Fragment,null,u.a.createElement(dPe,{key:o.get("record_uuid"),index:l,record:o,viewRecords:t,viewFields:n,rowHeight:c,isReadonly:g,keepSort:_}),e===R.length-1&&u.a.createElement("td",null,u.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:i}},h&&b?u.a.createElement(b,{viewRecords:t,viewFields:n}):null)))}}),Object(l.createPortal)(u.a.createElement(Lq,{dropAnimation:null,style:{width:"".concat(s.width,"px"),left:"".concat(s.left,"px"),overflow:"hidden"}},C?u.a.createElement(sPe,{index:D,record:A,viewRecords:t,viewFields:n,rowHeight:c,isReadonly:g,keepSort:_,count:E.length}):null),p))))},yPe=function(e){var t=e.viewRecords,n=e.groupViewRecords,r=e.viewFields,o=e.viewConfig,i=e.group,l=e.filters,c=yre(jxe),s=yre(Exe),d=function(){var e=yre(doe),t=yre(Pxe),n=yre(lk),r=Object(a.useRef)(e.getRenderBoundingClientRect()),o=yre(lk),i=WI(Object(a.useState)((null==o?void 0:o.getValue("view.useWindowScroll"))||!1),2),u=i[0],l=i[1],c=null==o?void 0:o.getValue("view.customScrollParent"),s=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body,d=WI(Object(a.useState)((null==o?void 0:o.getValue("view.disableVirtualScroll"))||!1),2),f=d[0],p=d[1];return Zae((function(){var o=fu((function(){if(!(null==n?void 0:n.getValue("view.useWindowScroll"))){var o=e.getRenderBoundingClientRect();if(r.current=o,t.scroller){t.scroller.style.height=o.height+"px";var i=t.scroller.querySelector("table"),a=t.scroller.querySelector("div[data-viewport-type]"),u=a?a.getBoundingClientRect().height:o.height;i&&(i.style.width="100%",i.style.minWidth="auto",i.style.minHeight=u+"px")}}}),300);return window.addEventListener("resize",o),window.addEventListener("lakex_table_view_resize",o),function(){window.removeEventListener("resize",o),window.removeEventListener("lakex_table_view_resize",o)}}),[e]),Zae((function(){var t=null==o?void 0:o.onConfigurationChange((function(t){var n=t.key,o=t.value;if("view.useWindowScroll"===n){var i=e.getRenderBoundingClientRect();r.current=i,l(o)}else"view.disableVirtualScroll"===n&&p(o)}));return function(){null==t||t.destroy()}}),[]),{rootRect:r.current,useWindowScroll:u,customScrollParent:c,customModalContainer:s,disableVirtualScroll:f}}(),f=d.rootRect,p=d.useWindowScroll,v=d.customScrollParent,h=d.customModalContainer,g=d.disableVirtualScroll,m=Object(a.useMemo)((function(){return c.getRowHeight(null==o?void 0:o.get("record_height"))}),[c,null==o?void 0:o.get("record_height")]),y=Object(a.useMemo)((function(){var e=i?null==s?void 0:s.groupRowGap:0;return((null==s?void 0:s.getStickyPaneWidth(r||[]))||0)+e}),[s,r]);return Zae((function(){var e=function(e){"ResizeObserver loop completed with undelivered notifications."!==e.message&&"ResizeObserver loop limit exceeded"!==e.message||e.stopImmediatePropagation()};return window.addEventListener("error",e),function(){window.removeEventListener("error",e)}}),[]),u.a.createElement("div",{className:I()("lakex-viewer-grid-content",{"in-group":!!i})},i?u.a.createElement(iPe,{groupViewRecords:n,viewFields:r,viewConfig:o,group:i,filters:l,stickyPaneWidth:y,recordHeight:m,rootRect:f,useWindowScroll:p,customScrollParent:v,customModalContainer:h,disableVirtualScroll:g}):u.a.createElement(mPe,{viewRecords:t,viewFields:r,viewConfig:o,filters:l,stickyPaneWidth:y,recordHeight:m,rootRect:f,useWindowScroll:p,customScrollParent:v,customModalContainer:h,disableVirtualScroll:g}))},bPe=u.a.forwardRef((function(e,t){var n=Gwe({viewId:e.viewId});return u.a.createElement("div",{ref:t,className:"lakex-viewer-grid"},u.a.createElement("div",{className:"lakex-viewer-grid-inner"},u.a.createElement(yPe,{viewRecords:n.viewRecords,groupViewRecords:n.groupViewRecords,viewFields:n.viewFields,viewConfig:n.viewConfig,group:n.group,filters:n.filters})))}));function wPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _Pe(e,t,n){return t=dk(t),sk(e,kPe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function kPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kPe=function(){return!!e})()}var CPe=function(e){function t(){var e;return _w(this,t),(e=_Pe(this,t,arguments)).viewType=sE.GRID,e.title=Lw("表格视图"),e.desc=Lw("规范化存储和展示数据"),e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wPe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"GridView",size:16},e))},e.colorCls="yuque-color-green-6",e.Component=bPe,e}return vk(t,e),Ew(t)}(jae),EPe=Object.defineProperty,OPe=Object.getOwnPropertyDescriptor,SPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?OPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&EPe(t,n,i),i},xPe=function(){return Ew((function e(){_w(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"_currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){this._viewerGridService.init()}},{key:"registerViewer",value:function(e){e.registerItem(new CPe({onError:e.onError}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"grid-field-move-up",hotkey:"up",name:"up 向上移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveUp()}}),e.registerItem({id:"grid-field-move-down",hotkey:"down",name:"down 向下移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveDown()}}),e.registerItem({id:"grid-field-move-left",hotkey:"left",name:"left 向左移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLeft()}}),e.registerItem({id:"grid-field-move-right",hotkey:"right, tab",name:"right 向右移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveRight()}}),e.registerItem({id:"grid-field-move-top",hotkey:"⌘+up",name:"移动到第一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveTop()}}),e.registerItem({id:"grid-field-move-bottom",hotkey:"⌘+down",name:"移动到最后一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveBottom()}}),e.registerItem({id:"grid-field-move-first-left",hotkey:"⌘+left",name:"移动到第一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFirstLeft()}}),e.registerItem({id:"grid-field-move-last-right",hotkey:"⌘+right",name:"移动到最后一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLastRight()}}),e.registerItem({id:"grid-field-focus-move-up",hotkey:"shift+up",name:"选区终点上移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusUp()}}),e.registerItem({id:"grid-field-focus-move-down",hotkey:"shift+down",name:"选区终点下移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusDown()}}),e.registerItem({id:"grid-field-focus-move-left",hotkey:"shift+left",name:"选区终点左移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusLeft()}}),e.registerItem({id:"grid-field-focus-move-right",hotkey:"shift+right",name:"选区终点右移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusRight()}}),e.registerItem({id:"grid-field-select-all",hotkey:"⌘+A",name:"全选",enableOnInput:!1,isEnable:function(){return t._currentViewType===sE.GRID},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.selectAll()}}),e.registerItem({id:"grid-add-record-before",hotkey:"⌘+shift+enter",name:"向上插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,o,i;e.preventDefault();var a=t._readService.getFlatViewRecords(),u=null==(n=t._selectionService)?void 0:n.getFieldValue(),l=ek(a,(function(e){return e.get("record_uuid")===(null==u?void 0:u.recordId)}));if(!(l<0)){var c=t._readService.getViewFields(),s=a.get(l),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"before",groupItemKey:s.get("group_item_key")});var f=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(l,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(i=t._selectionService)||i.scrollToSelection(f,"start")}}}),e.registerItem({id:"grid-add-record-after",hotkey:"shift+enter",name:"向下插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===sE.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,o,i;e.preventDefault();var a=t._readService.getFlatViewRecords(),u=null==(n=t._selectionService)?void 0:n.getFieldValue(),l=ek(a,(function(e){return e.get("record_uuid")===(null==u?void 0:u.recordId)}));if(!(l<0)){var c=t._readService.getViewFields(),s=a.get(l),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"after",groupItemKey:s.get("group_item_key")});var f=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(l+1,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(i=t._selectionService)||i.scrollToSelection(f,"end")}}})}},{key:"registerScrollService",value:function(e){e.setGridScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return dd().contribution(dxe).contribution(fxe).contribution(pxe).contribution(vxe).register(this).register(yxe).register(Lxe).register(Exe).register(jxe).register(Pxe).register(WIe)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerGrid",type:"object",title:"表格视图",properties:{stickyColNum:{type:"number",description:"冻结列个数"},defaultColWidth:{type:"number",description:"默认列宽度"},rowHeight:{type:"object",properties:{row:{type:"number",description:"低-行高渲染高度"},middle:{type:"number",description:"中-行高渲染高度"},high:{type:"number",description:"高-行高渲染高度"}}}}}),e.registerDefaultValue({"viewerGrid.stickyColNum":1,"viewerGrid.defaultColWidth":180,"viewerGrid.rowHeight.low":36,"viewerGrid.rowHeight.middle":64,"viewerGrid.rowHeight.high":148})}}])}();function jPe(e,t,n){return t=dk(t),sk(e,DPe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function DPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DPe=function(){return!!e})()}xPe.pluginName="render-viewer-grid",SPe([Ks(oA)],xPe.prototype,"_readService",2),SPe([Ks(RR)],xPe.prototype,"_abilityService",2),SPe([Ks(nxe),As()],xPe.prototype,"_selectionService",2),SPe([Ks(nR)],xPe.prototype,"_commandService",2),SPe([Ks(Pxe)],xPe.prototype,"_scrollService",2),SPe([Ks(yxe)],xPe.prototype,"_viewerGridService",2),xPe=SPe([Gs({contrib:[toe,HSe,Bre,aoe]})],xPe);var APe=Object.defineProperty,RPe=Object.getOwnPropertyDescriptor,FPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?RPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&APe(t,n,i),i},IPe=function(e){function t(){var e;return _w(this,t),(e=jPe(this,t,arguments))._onEditingChange=e._register(new Lk),e.onEditingChange=e._onEditingChange.event,e}return vk(t,e),Ew(t,[{key:"emitEditingChange",value:function(e){var t=e.editing,n=e.recordId,r=e.fieldId;this._onEditingChange.emit({recordId:n,fieldId:r,editing:t})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);FPe([Ts()],IPe.prototype,"destroy",1),IPe=FPe([Gs()],IPe);var PPe=KJ(Object(a.memo)((function(e){var t=e.fieldType,n=e.cell,r=yre(Ooe).getCellIsShowValidTip(t),o=n.errorMessage;return o&&r?u.a.createElement(d.a,{title:o,placement:"left"},u.a.createElement("span",{className:"lakex-table-grid-invalid-flag"})):null}),(function(e,t){return e.cell.updated_at===t.cell.updated_at}))),MPe=function(e){var t=e.fieldType,n=e.cell,r=e.field,o=e.boxRect,i=e.editable,l=e.rowIndex,c=e.colIndex,s=yre(nxe),d=yre(Ooe).getFieldComponent(t),f=WI(Object(a.useState)(!1),2),p=f[0],v=f[1];return d&&r?(Zae((function(){var e=null==s?void 0:s.onChange((function(){v(null==s?void 0:s.isActiveCell(l,c))}));return function(){null==e||e.destroy()}}),[]),u.a.createElement(d,{key:n.updated_at,field:r,fieldUpdatedAt:r.get("updated_at"),cell:n,focus:!1,boxRect:o,writeable:i,isSelected:p})):null},TPe=KJ((function(e){var t=e.rowIndex,n=e.colIndex,r=qwe(mR.TABLE).isReadonly(),o=yre(nxe),i=WI(Object(a.useState)(null==o?void 0:o.isSelectionEnd(t,n)),2),l=i[0],c=i[1],s=WI(Object(a.useState)(null==o?void 0:o.isInRowsSelect(t)),2),d=s[0],f=s[1];return Zae((function(){var e=null==o?void 0:o.onChange((function(e){e.selection;c(null==o?void 0:o.isSelectionEnd(t,n)),f(null==o?void 0:o.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),!l||d||r?null:u.a.createElement("div",{className:"lakex-viewer-grid-autofill-container"})})),NPe=function(){return u.a.createElement("div",{className:"lakex-viewer-grid-selected-container"})},BPe=function(e){var t=e.cell,n=e.field,r=e.size,o=e.rowIndex,i=e.colIndex,l=e.rowCount,c=e.colCount,s=e.minHeight,d=e.isFrozen,f=null==t?void 0:t.recordId,p=n.get("uuid"),v=n.get("type"),h=yre(oRe),g=yre(_oe),m=yre(nxe),y=Object(a.useRef)(null),b=zAe({recordId:f,fieldId:p}),w=lIe(p),_=function(e,t){var n=yre(IPe),r=WI(Object(a.useState)(!1),2),o=r[0],i=r[1];return Zae((function(){var r=n.onEditingChange((function(n){var r=n.recordId,o=n.fieldId,a=n.editing;r===e&&o===t&&i(a)}));return function(){r.destroy()}}),[n]),o}(f,p),k=WI(Object(a.useState)(0),2),C=k[0],E=k[1],O=Object(a.useCallback)((function(e){var t=e.e,n=e.recordId,r=e.fieldId,a=null==m?void 0:m.getSelection();if(t.preventDefault(),a&&!(null==m?void 0:m.isSelectOneCell())&&(null==m?void 0:m.isInSelect(o,i)))null==h||h.showContextMenu({from:rRe.MULTI_CELL,e:t,selection:a});else{var u=null==m?void 0:m.createGridSelectionByIndex(o,i,l,c);u&&(null==m||m.setSelection(u)),null==h||h.showContextMenu({from:rRe.CELL,e:t,recordId:n,fieldId:r,selection:a})}}),[]),S=Object(a.useCallback)((function(e){null==m||m.scrollToAnchorPosition(null==m?void 0:m.getSelection(),e.clientY>window.innerHeight/2?"end":"start",(function(){null==g||g.emitDoubleClickCell({fieldId:p,recordId:f,event:e,fieldType:v})}))}),[v,p,f]),x=Object(a.useCallback)((function(e){null==g||g.emitClickEvent({eventName:"activeCellClick",data:{fieldId:p,recordId:f,event:e,fieldType:v}})}),[v,p,f]),j=Object(a.useMemo)((function(){return{width:r?r-20:0,height:s-12}}),[r,s]),D=function(e){var t=e.rowIndex,n=e.colIndex,r=e.isFrozen,o=yre(nxe),i=yre(Doe),u=WI(Object(a.useState)(null==o?void 0:o.isActiveCell(t,n)),2),l=u[0],c=u[1],s=WI(Object(a.useState)(null==o?void 0:o.isInSelect(t,n)),2),d=s[0],f=s[1],p=WI(Object(a.useState)(null==o?void 0:o.isInRowsSelect(t)),2),v=p[0],h=p[1],g=Object(a.useMemo)((function(){return l&&r?null==i?void 0:i.zIndex.gridCellFrozenPreviewer:r?null==i?void 0:i.zIndex.gridCellFrozen:l?null==i?void 0:i.zIndex.gridCellPreviewer:null==i?void 0:i.zIndex.gridCell}),[l,r]);return Zae((function(){var e=null==o?void 0:o.onChange((function(){c(null==o?void 0:o.isActiveCell(t,n)),f(null==o?void 0:o.isInSelect(t,n)),h(null==o?void 0:o.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),{isSelected:l,inSelect:d&&!l||v,selected:l&&!v,cellZIndex:g}}({rowIndex:o,colIndex:i,isFrozen:d}),A=D.isSelected,R=D.inSelect,F=D.selected,P=D.cellZIndex;return Object(a.useLayoutEffect)((function(){var e;if(A&&v===HC.TEXT){var t=null==(e=y.current)?void 0:e.getBoundingClientRect();t&&window.innerHeight-t.bottom<40?E(s-t.height):E(0)}else E(0)}),[A,s,v]),u.a.createElement("div",{ref:y,"data-col":i,"data-record-uuid":null==t?void 0:t.recordId,"data-field-uuid":null==n?void 0:n.get("uuid"),className:I()("lakex-viewer-grid-cell",bw({"in-del-possible":w,"in-highlight":b,"in-select":R,selected:F,editing:_},"height-".concat(s),s),v),style:{width:r+"px",minHeight:s,zIndex:P,transform:A?"translateY(".concat(C,"px)"):""},onContextMenu:function(e){return O({e:e,recordId:f,fieldId:p,from:rRe.CELL})},onScrollCapture:function(e){return e.stopPropagation()},onDoubleClick:S,onClick:x},u.a.createElement(MPe,{key:t.updated_at,cell:t,field:n,fieldType:v,boxRect:j,rowIndex:o,colIndex:i,editable:null==m?void 0:m.isEditable()}),t&&u.a.createElement(PPe,{fieldType:v,cell:t}),F&&u.a.createElement(NPe,null),u.a.createElement(TPe,{rowIndex:o,colIndex:i}))};var VPe=function(e){var t=e.rowIndex,n=e.onChecked,r=yre(nxe),o=WI(Object(a.useState)(!1),2),i=o[0],l=o[1],c=function(e){var t=e.rowIndex,n=yre(WIe),r=WI(Object(a.useState)(!1),2),o=r[0],i=r[1];return Zae((function(){null==n||n.onMouseOver((function(e){t===e.rowIndex&&i(!0)})),null==n||n.onMouseLeave((function(e){t===e.rowIndex&&i(!1)}))}),[]),o}({rowIndex:t});return Zae((function(){var e=null==r?void 0:r.onChange((function(e){e.selection;l(null==r?void 0:r.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),c||i?u.a.createElement(k.a,{className:"lakex-viewer-grid-row-checkbox",checked:i,onChange:function(e){e.stopPropagation();var t=e.target.checked;n(!!t)}}):u.a.createElement("div",{className:"lakex-viewer-grid-row-number"},t+1)},LPe=function(e){var t=e.index,n=e.recordId,r=e.colCount,o=e.rowCount,i=e.cells,l=e.fieldMap,c=e.rowHeight,s=e.disableDrag,d=void 0!==s&&s,f=e.isReadonly,p=e.listeners,v=void 0===p?{}:p,h=e.defaultColWidth,g=yre(fRe),m=yre(oFe),y=yre(oRe),b=g.ExpandRecordRecordHeaderIcon,w=null==m?void 0:m.OrderDragIcon,_=yre(nxe),k=Object(a.useCallback)((function(e){var n=(null==_?void 0:_.getSelectRowIndexes())||[],i=(null==_?void 0:_.isRowSelection())||!1;n.includes(t)||i||(n=[t]),n=e?[].concat(gw(n),[t]):n.filter((function(e){return e!==t}));var a=null==_?void 0:_.createRowGridSelectionByIndex(n,o,r);return a&&(null==_||_.setSelection(a)),a}),[t,o,r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-viewer-grid-row-index",onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var n=null==_?void 0:_.isInRowsSelect(t),r=k(!n);r&&(null==y||y.showContextMenu({from:rRe.MULTI_CELL,e:e,selection:r}))}},w&&!f&&u.a.createElement(w,{listeners:v,disable:d}),u.a.createElement(VPe,{rowIndex:t,onChecked:function(e){return k(e)}}),b&&u.a.createElement(b,{recordId:n})),ak(i,(function(e,i){var a=l[(null==e?void 0:e.fieldId)||""];return u.a.createElement(BPe,{key:n+"_"+(null==e?void 0:e.fieldId)+"_"+i,rowIndex:t,colIndex:i,rowCount:o,colCount:r,cell:e,field:null==a?void 0:a.get("field"),size:(null==a?void 0:a.get("size"))||h,minHeight:c,isFrozen:!0})})))},zPe=function(e){var t=e.index,n=e.recordId,r=e.colCount,o=e.rowCount,i=e.cells,a=e.fieldMap,l=e.rowHeight,c=e.hasBlank,s=e.stickyColNum,d=e.defaultColWidth;return u.a.createElement(u.a.Fragment,null,ak(i,(function(e,i){var c=a[(null==e?void 0:e.fieldId)||""];return u.a.createElement(BPe,{key:n+"_"+(null==e?void 0:e.fieldId)+"_"+i,rowIndex:t,colIndex:i+s,rowCount:o,colCount:r,cell:e,field:null==c?void 0:c.get("field"),size:(null==c?void 0:c.get("size"))||d,minHeight:l,isFrozen:!1})})),c&&u.a.createElement("div",{className:"lakex-viewer-grid-row-blank"}))},UPe=function(e){var t=e.index,n=e.record,r=e.fields,o=e.records,i=e.sticky,l=e.hasBlank,c=void 0!==l&&l,s=e.disableDrag,d=void 0!==s&&s,f=e.listeners,p=void 0===f?{}:f,v=e.rowHeight,h=e.isReadonly,g=yre(_oe),m=yre(oA),y=yre(lk),b=yre(Exe),w=n.get("record_uuid"),_=b.stickyColNum,k=b.defaultColWidth,C=Object(a.useMemo)((function(){return tk(r,(function(e,t){return e[t.get("field_uuid")]=t,e}),{})}),[r]),E=Object(a.useMemo)((function(){return m.getViewRecordCells(w)}),[w,r]),O=Object(a.useMemo)((function(){var e,t,n=new K_;return i?(e=0,t=_,n=E.slice(e,t)):n=E.slice(_,E.length),uk(n,(function(e){return!!e}))}),[E,_,i]),S=Object(a.useCallback)((function(){(null==y?void 0:y.getValue("render.mode"))===roe.MOBILE&&g.emitClickRecord({recordId:w})}),[w]);return u.a.createElement("div",{className:"lakex-viewer-grid-row","data-row":t,"data-record-uuid":w,style:{height:v},onClick:S},i?u.a.createElement(LPe,{index:t,recordId:w,colCount:r.length,rowCount:o.length,rowHeight:v,fieldMap:C,cells:O,disableDrag:d,listeners:p,defaultColWidth:k,isReadonly:h}):u.a.createElement(zPe,{index:t,recordId:w,colCount:r.length,rowCount:o.length,rowHeight:v,fieldMap:C,cells:O,hasBlank:c,stickyColNum:_,defaultColWidth:k}))},HPe=Object.defineProperty,qPe=Object.getOwnPropertyDescriptor,WPe=function(){return Ew((function e(){_w(this,e)}),[{key:"getRecordComponent",value:function(){return UPe}}],[{key:"pluginModule",value:function(){return dd().contribution(lRe).register(this).register(fRe)}}])}();WPe.pluginName="render-viewer-grid-record",WPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?qPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&HPe(t,n,i),i}([Gs({contrib:dxe})],WPe);var $Pe=Object.defineProperty,GPe=Object.getOwnPropertyDescriptor,KPe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(RFe).register(this)}}])}();KPe.pluginName="render-viewer-grid-group",KPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?GPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$Pe(t,n,i),i}([Gs({contrib:toe})],KPe);var YPe=Object.defineProperty,JPe=Object.getOwnPropertyDescriptor,XPe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return dd().register(this).register(IPe)}}])}();function ZPe(e,t,n){return t=dk(t),sk(e,QPe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QPe=function(){return!!e})()}XPe.pluginName="render-viewer-grid-cell-editor",XPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?JPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YPe(t,n,i),i}([Gs({contrib:[toe]})],XPe);var eMe=Object.defineProperty,tMe=Object.getOwnPropertyDescriptor,nMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eMe(t,n,i),i},rMe=function(e){function t(){var e;return _w(this,t),(e=ZPe(this,t,arguments)).gridGap=20,e._onRefreshLayout=e._register(new Lk),e.onRefreshLayout=e._onRefreshLayout.event,e}return vk(t,e),Ew(t,[{key:"_getViewRect",value:function(){return this._renderContext.getRenderBoundingClientRect()}},{key:"_getColCount",value:function(e){var t=5;return e<1440&&(t=Math.max(5-Math.ceil((1440-e)/300),2)),t}},{key:"_getRowCount",value:function(e,t){return Math.ceil(e/t)}},{key:"_getCardWidth",value:function(e,t){return Math.floor(Math.floor(e-20*(t+1))/t)}},{key:"getCoverHeight",value:function(e){return Math.round(e/1.6)}},{key:"_getFieldNameHeight",value:function(){return 23}},{key:"_getCardHeight",value:function(e,t,n){var r,o=40;n.get("cover_field_uuid")&&(o+=this.getCoverHeight(e));for(var i=0;i<t.length;i++){var a=t.get(i);if(!a.get("hidden")){n.get("show_field_name")&&(o+=this._getFieldNameHeight());var u=null==(r=a.get("field"))?void 0:r.get("type");u===HC.IMAGE?o+=40:u===HC.TEXT?o+=12+(0===i?28:22):o+=40,i===t.length-1&&(o-=12)}}return o}},{key:"getLayout",value:function(e,t,n){var r=this._getViewRect(),o=this._getColCount(r.width),i=this._getRowCount(e.length,o),a=this._getCardWidth(r.width,o);return{viewRect:r,width:a,height:this._getCardHeight(a,t,n),colCount:o,rowCount:i}}},{key:"refresh",value:function(){this._onRefreshLayout.emit()}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);function oMe(e,t,n){return t=dk(t),sk(e,iMe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function iMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iMe=function(){return!!e})()}nMe([Ks(doe)],rMe.prototype,"_renderContext",2),nMe([Ts()],rMe.prototype,"destroy",1),rMe=nMe([Gs()],rMe);var aMe=Object.defineProperty,uMe=Object.getOwnPropertyDescriptor,lMe=function(e){function t(){var e;return _w(this,t),(e=oMe(this,t,arguments))._virtuosoRef=null,e._scroller=null,e._onScroll=e._register(new Lk),e.onScroll=e._onScroll.event,e.emitScrollEvent=function(t){e._onScroll.emit(t)},e}return vk(t,e),Ew(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"destroy",value:function(){this._virtuosoRef=null,this._scroller=null}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"setScroller",value:function(e){this._scroller=e}},{key:"scrollToIndex",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollToIndex(e)}},{key:"scrollTo",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollTo(e)}}])}(bk);lMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?uMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aMe(t,n,i),i}([Gs()],lMe);var cMe=function(e){var t=e.height,n=e.onShowRecord;return u.a.createElement("div",{className:"lakex-viewer-card-record-item-cover empty",style:{height:t},onClick:n},u.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/94c60ed0-e53a-4ad1-9ffe-ec7fd1266b46.svg",draggable:"false"}))},sMe=function(e){var t,n=e.viewRecord,r=e.width,o=e.onShowRecord,i=function(e){var t=e.viewRecord,n=e.width,r=yre(oA),o=yre(pie),i=yre(nme),u=yre(rMe),l=null==r?void 0:r.getViewConfig(),c=null==r?void 0:r.getCell((null==l?void 0:l.get("cover_field_uuid"))||"",t.get("record_uuid")),s=Object(a.useRef)(null),d=WI(Object(a.useState)(0),2);return{carouselRef:s,cell:c,opener:o,imageService:i,viewConfig:l,getCoverHeight:function(){return null==u?void 0:u.getCoverHeight(n)},index:d[0],setIndex:d[1]}}({viewRecord:n,width:r,onShowRecord:o}),l=i.carouselRef,c=i.getCoverHeight,s=i.cell,d=i.viewConfig,f=i.opener,p=i.imageService,v=i.index,h=i.setIndex;if(!(null==d?void 0:d.get("cover_field_uuid")))return null;if(!(null==s?void 0:s.value)||!(null==(t=s.value[0])?void 0:t.src))return u.a.createElement(cMe,{height:c(),onShowRecord:o});var g=s.value||[],m=Object(a.useMemo)((function(){return g.map((function(e){return{src:p.getRenderUrl(e.src,e.width,e.height),width:e.width,height:e.height}}))||[]}),[g]);return u.a.createElement(S.a,{ref:l,className:"lakex-viewer-card-record-item-cover",arrows:!0,infinite:!1,prevArrow:u.a.createElement(oue,{type:"ArrowLeft",size:16,onClick:function(){var e;null==(e=null==l?void 0:l.current)||e.prev()}}),nextArrow:u.a.createElement(oue,{type:"ArrowRight",size:16,onClick:function(){var e;null==(e=null==l?void 0:l.current)||e.next()}}),appendDots:function(){return u.a.createElement("div",null,v+1," / ",m.length)},beforeChange:function(e,t){h(t)}},g.map((function(e,t){var n={height:c()},r=p.getThumbnailUrl(e.src,e.width,e.height,390);return n.backgroundImage="url(".concat(r,")"),n.backgroundRepeat="no-repeat",n.backgroundPosition="center center",d.get("cover_display")===tE.Clip?n.backgroundSize="cover":n.backgroundSize="contain",u.a.createElement("div",{key:e.src},u.a.createElement("div",{className:"lakex-viewer-card-record-item-image",style:n,onClick:function(n){n.preventDefault(),n.stopPropagation(),null==f||f.open("image",e.src,{list:m,index:t})}}))})))};var dMe=function(e){var t=e.cell,n=e.field,r=e.viewConfig,o=e.index,i=e.width,a=e.height,l=yre(Ooe),c=l.getFieldComponent(null==n?void 0:n.get("type")),s=function(e,t){var n={defaultValue:t.value,readonly:!0},r=e.get("type");return fE.isSelectLike(r)?n.field=e:fE.isImage(r)?n.size="small":fE.isSystemDate(r)&&(n.format="YYYY-MM-DD HH:mm:ss"),n}(n,t),d=null==l?void 0:l.getFieldIcon(n.get("type")),f=null;return 0===o&&null==(null==t?void 0:t.value)&&(f=u.a.createElement("div",{key:null==t?void 0:t.fieldId,className:I()("lakex-viewer-card-field-content first empty")},Lw("未命名记录"))),u.a.createElement("div",{className:"lakex-viewer-card-cell-field","data-field-uuid":t.fieldId},r.get("show_field_name")&&u.a.createElement("div",{className:"lakex-viewer-card-field-name"},d&&u.a.createElement(d,{size:16}),u.a.createElement("span",{className:"lakex-viewer-card-field-name-content"},null==n?void 0:n.get("name"))),f,c&&!f&&u.a.createElement("div",{className:I()("lakex-viewer-card-field-content","".concat(n.get("type")),{first:0===o})},u.a.createElement(c,{cell:t,field:n,fieldProps:s,readonly:!0,boxRect:i&&a?{width:i,height:a}:null})))};function fMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fMe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vMe=function(e){var t=e.fieldMap,n=e.cell,r=e.index,o=e.viewConfig,i=e.width,a=e.height,u=t.get(n.fieldId);return u?React.createElement(dMe,{cell:n,field:u,viewConfig:o,index:r,width:i,height:a}):null},hMe=function(e){var t=e.className,n=e.viewRecord,r=e.width,o=void 0===r?200:r,i=e.height,u=void 0===i?300:i,l=e.viewConfig,c=e.fieldMap,s=e.disableDrag,d=void 0!==s&&s,f=function(e){var t=e.viewRecord,n=yre(oRe),r=yre(nxe),o=yre(_oe),i=yre(oA),u=function(){var e,n,o;return!((null==(o=null==(n=null==(e=null==r?void 0:r.getSelection())?void 0:e.getRangeAt)?void 0:n.call(e,0))?void 0:o.recordId)!==(null==t?void 0:t.get("record_uuid")))},l=WI(Object(a.useState)(u()),2),c=l[0],s=l[1];Zae((function(){var e=null==r?void 0:r.onChange((function(e){e.selection,s(u())}));return function(){null==e||e.destroy()}}),[]);var d=zAe({recordId:null==t?void 0:t.get("record_uuid")}),f=Object(a.useCallback)((function(){var e=null==t?void 0:t.get("record_uuid");e&&(null==o||o.emitClickRecord({recordId:e}))}),[t,o]),p=Object(a.useCallback)((function(e){e.preventDefault(),null==n||n.showContextMenu({e:e,from:rRe.CARD_RECORD,recordId:null==t?void 0:t.get("record_uuid")})}),[t,n]);return{cells:i.getViewRecordCells(t.get("record_uuid")),isSelected:c,isInHighlight:d,onShowRecord:f,onShowContextMenu:p}}({viewRecord:n}),p=f.cells,v=f.isSelected,h=f.isInHighlight,g=f.onShowRecord,m=f.onShowContextMenu,y=I()("lakex-viewer-card-record-item",t,{selected:v,"in-highlight":h});if(d)return React.createElement("div",{className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:{width:o,height:u}},React.createElement(sMe,{viewRecord:n,width:o,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},ak(p,(function(e,t){return React.createElement(vMe,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:l,fieldMap:c,width:o,height:u})}))));var b=aW({id:n.get("record_uuid"),disabled:d}),w=b.attributes,_=b.listeners,k=b.setNodeRef,C=b.transform,E=b.transition,O=b.isDragging,S={transform:Qae.Transform.toString(C),transition:E,zIndex:O?"100":"auto",opacity:O?0:1};return React.createElement("div",pMe(pMe({ref:k,className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:pMe(pMe({},S),{},{width:o,height:u})},_),w),React.createElement(sMe,{viewRecord:n,width:o,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},ak(p,(function(e,t){return React.createElement(vMe,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:l,fieldMap:c,width:o,height:u})}))))};hMe.defaultProps={isShowEmpty:!1,isShowField:!1};var gMe=["style","context"],mMe=["context"];function yMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yMe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wMe=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=wre(e,gMe),i=r.colCount,a=r.cardWidth,l=r.gridGap;return u.a.createElement("div",bMe(bMe({ref:t},o),{},{style:bMe(bMe({},n),{},{display:"grid",gridTemplateColumns:"repeat(".concat(i,", ").concat(a,"px)"),columnGap:"".concat(l,"px"),padding:"0 ".concat(l,"px")})}))})),_Me=u.a.forwardRef((function(e,t){e.context;var n=wre(e,mMe);return u.a.createElement("div",bMe(bMe({},n),{},{style:{}}))})),kMe=u.a.forwardRef((function(e,t){var n=e.fields,r=e.viewRecords,o=e.viewFields,i=e.viewConfig,c=yre(lMe),s=qwe(mR.TABLE).isReadonly(),d=function(e){var t=e.viewRecords,n=e.viewFields,r=e.viewConfig,o=yre(rMe),i=yre(_oe),u=yre(lk),l=WI(Object(a.useState)(200),2),c=l[0],s=l[1],d=WI(Object(a.useState)(300),2),f=d[0],p=d[1],v=WI(Object(a.useState)(0),2),h=v[0],g=v[1],m=WI(Object(a.useState)(),2),y=m[0],b=m[1],w=WI(Object(a.useState)((null==u?void 0:u.getValue("view.useWindowScroll"))||!1),2),_=w[0],k=w[1],C=null==u?void 0:u.getValue("view.customScrollParent"),E=(null==u?void 0:u.getValue("modal.customModalContainer"))||document.body,O=WI(Object(a.useState)((null==u?void 0:u.getValue("view.disableVirtualScroll"))||!1),2),S=O[0],x=O[1],j=Object(a.useCallback)((function(){var e=null==o?void 0:o.getLayout(t,n,r);b(null==e?void 0:e.viewRect),s((null==e?void 0:e.width)||200),p((null==e?void 0:e.height)||300),g((null==e?void 0:e.colCount)||0)}),[t,n,r]);return Zae((function(){var e=null==u?void 0:u.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?(j(),k(n)):"view.disableVirtualScroll"===t&&x(n)})),t=null==i?void 0:i.onViewWidthChange((function(){setTimeout((function(){j()}),100)}));return function(){null==e||e.destroy(),null==t||t.destroy()}}),[j]),Zae((function(){var e=fu((function(){_||j()}),300);window.addEventListener("resize",e),window.addEventListener("lakex_table_view_resize",e);var t=null==o?void 0:o.onRefreshLayout((function(){j()}));return function(){window.removeEventListener("resize",e),window.removeEventListener("lakex_table_view_resize",e),null==t||t.destroy()}}),[_,j]),Zae((function(){j()}),[j]),{rootRect:y,gridGap:null==o?void 0:o.gridGap,cardWidth:c,cardHeight:f,colCount:h,useWindowScroll:_,customScrollParent:C,customModalContainer:E,disableVirtualScroll:S}}({viewRecords:r,viewFields:o,viewConfig:i}),f=d.rootRect,p=d.cardWidth,v=d.cardHeight,h=d.colCount,g=d.gridGap,m=d.useWindowScroll,y=d.customScrollParent,b=d.customModalContainer,w=d.disableVirtualScroll,_=function(){var e=yre(oFe),t=WI(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(){var t=UC(jk.mark((function t(n){var o,i,a,u;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(null),o=n.active,i=n.over,o.id===i.id){t.next=7;break}return a=o.id,u=i.id,t.next=7,e.updateRecordOrder(a,u);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:VU(BU(TH,{activationConstraint:{distance:8}})),onDragStart:function(e){r(e.active.id)},onDragEnd:o}}(),k=_.activeId,C=_.sensors,E=_.onDragStart,O=_.onDragEnd,S=function(){var e=yre(lMe),t=Object(a.useRef)(null);return Zae((function(){t.current&&(null==e||e.setVirtuosoRef(t.current))}),[e,t]),t}(),x=Object(a.useRef)(null),j=Object(a.useMemo)((function(){return nk(r,(function(e){return{viewRecord:e,id:e.get("record_uuid")}}))}),[r]),D=Object(a.useMemo)((function(){return Z_(r,(function(e){return e.get("record_uuid")===k}))}),[k,r]),A=new Map;return n.forEach((function(e){A.set(e.get("uuid"),e)})),Zae((function(){x.current&&(null==c||c.setScroller(x.current))}),[c,x]),i&&r&&0!==r.length&&o?u.a.createElement("div",{ref:t,className:"lakex-viewer-card"},u.a.createElement("div",{className:"lakex-viewer-card-inner"},u.a.createElement("div",{className:"lakex-viewer-card-content"},u.a.createElement(kq,{sensors:C,modifiers:[fW],collisionDetection:GU,onDragStart:E,onDragEnd:O},u.a.createElement(u.a.Fragment,null,u.a.createElement(Qq,{items:j,strategy:Kq},u.a.createElement(E7,{useWindowScroll:m,customScrollParent:y,ref:S,context:{gridGap:g,colCount:h,cardWidth:p,cardHeight:v},components:{List:wMe,Item:_Me},scrollerRef:function(e){x.current=e},onScroll:null==c?void 0:c.emitScrollEvent,style:{width:"100%",height:null==f?void 0:f.height},data:j,initialItemCount:w?j.length:0,itemContent:function(e,t){return u.a.createElement(hMe,{key:t.viewRecord.get("record_uuid"),viewRecord:t.viewRecord,fieldMap:A,viewConfig:i,width:p,height:v,disableDrag:s||!!(null==i?void 0:i.get("keep_sort"))})}})),Object(l.createPortal)(u.a.createElement(Lq,{dropAnimation:null},D?u.a.createElement(hMe,{viewRecord:D,fieldMap:A,viewConfig:i,width:p,height:v}):null),b)))))):null})),CMe=u.a.forwardRef((function(e,t){var n=Gwe({viewId:e.viewId});return u.a.createElement(kMe,{ref:t,fields:n.fields,viewRecords:n.viewRecords||new K_,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function EMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OMe(e,t,n){return t=dk(t),sk(e,SMe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function SMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SMe=function(){return!!e})()}var xMe=function(e){function t(){var e;return _w(this,t),(e=OMe(this,t,arguments)).viewType=sE.CARD,e.title=Lw("画册视图"),e.desc=Lw("适合展示图片类数据"),e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EMe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CardView",size:16},e))},e.colorCls="yuque-color-blue-5",e.Component=CMe,e}return vk(t,e),Ew(t)}(jae),jMe=Object.defineProperty,DMe=Object.getOwnPropertyDescriptor,AMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?DMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jMe(t,n,i),i},RMe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new xMe({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setCardScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return dd().register(this).register(rMe).register(lMe)}}])}();RMe.pluginName="render-viewer-card",AMe([Ks(lMe)],RMe.prototype,"_scrollService",2),RMe=AMe([Gs({contrib:[toe,aoe,HSe]})],RMe);var FMe=Is.defineToken("ViewerKanbanPluginGroupContribution"),IMe=Object.defineProperty,PMe=Object.getOwnPropertyDescriptor,MMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?PMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IMe(t,n,i),i},TMe=function(){return Ew((function e(){_w(this,e)}),[{key:"Group",get:function(){return this._getGroupComponent()}},{key:"_getGroupComponent",value:function(){var e,t,n=this.viewerKanbanPluginGroupProvider.getContributions({cache:!1});return n[0]?null==(t=(e=n[0]).getGroupComponent)?void 0:t.call(e):null}}])}();MMe([yd(FMe)],TMe.prototype,"viewerKanbanPluginGroupProvider",2),TMe=MMe([Gs()],TMe);var NMe=Is.defineToken("ViewerKanbanGroupActionContribution"),BMe=Object.defineProperty,VMe=Object.getOwnPropertyDescriptor,LMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?VMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&BMe(t,n,i),i},zMe=function(){return Ew((function e(){var t=this;_w(this,e),this.getKanbanGroupActionComponents=function(){var e=t._viewerKanbanGroupActionProvider.getContributions({cache:!1});if(e.length>0){var n=[];return e.forEach((function(e){var t,r=null==(t=e.getKanbanGroupActionComponent)?void 0:t.call(e);r&&(Array.isArray(r)?n=n.concat(r):n.push(r))})),n}return null}}),[{key:"getGroup",value:function(){var e=this._readService.getActiveView();return e?this._readService.getViewGroup(null==e?void 0:e.get("uuid")):null}},{key:"getGroupField",value:function(){var e=this.getGroup();return null==e?void 0:e.field}},{key:"getSupportGroupFields",value:function(){return Q_(this._readService.getAllFields(),(function(e){return[HC.SELECT,HC.MENTION].includes(e.get("type"))}))}},{key:"getGroupFieldOption",value:function(e,t){return e.get("type")===HC.SELECT?Z_(this._readService.getFieldOptions(e.get("uuid")),(function(e){return e.get("uuid")===t.value})):e.get("type")===HC.MENTION?t:null}},{key:"createGroup",value:function(){var e,t=this._readService.getAllFields(),n={field:{uuid:qw(32),name:KC(HC.SELECT,t.toJSON()),type:HC.SELECT,color:!0,options:[]}};null==(e=this._commandService)||e.execCommand("addField",n)}}])}();function UMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}LMe([yd(NMe)],zMe.prototype,"_viewerKanbanGroupActionProvider",2),LMe([Ks(oA)],zMe.prototype,"_readService",2),LMe([Ks(nR)],zMe.prototype,"_commandService",2),zMe=LMe([Gs()],zMe);var HMe=Object.defineProperty,qMe=Object.getOwnPropertyDescriptor,WMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?qMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&HMe(t,n,i),i},$Me=function(){return Ew((function e(){_w(this,e),this.UNGROUP_KEY="ungroup"}),[{key:"toKanbanData",value:function(e){var t=this;return(null==e?void 0:e.map((function(e){var n;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UMe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==(n=e.option)?void 0:n.uuid)||t.UNGROUP_KEY},e)})))||[]}},{key:"addRecord",value:function(e,t){var n,r,o,i=this._readService.getGroupViewRecords();if(o=t?i.find((function(e){var n;return(null==(n=e.option)?void 0:n.uuid)===t.uuid})):i[0]){var a=o.viewRecords.length>0?o.viewRecords[0].get("record_uuid"):"",u=this._commandService.execCommand("addEmptyRecord",{sourceRecordId:a,groupItemKey:t?null==(n=this._readService)?void 0:n.keyValue(t):"",position:"after"}),l=null==u?void 0:u.result;l&&l[0]&&(null==(r=this._renderService)||r.emitClickRecord({recordId:l[0].uuid,isNewRecord:!0}))}}}])}();function GMe(e,t,n){return t=dk(t),sk(e,KMe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function KMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KMe=function(){return!!e})()}WMe([Ks(nR)],$Me.prototype,"_commandService",2),WMe([Ks(oA)],$Me.prototype,"_readService",2),WMe([Ks(_oe)],$Me.prototype,"_renderService",2),$Me=WMe([Gs()],$Me);var YMe=Object.defineProperty,JMe=Object.getOwnPropertyDescriptor,XMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?JMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YMe(t,n,i),i},ZMe=function(e){function t(){var e;return _w(this,t),(e=GMe(this,t,arguments))._virtuosoRefs={},e._scrollers={},e._onScroll=e._register(new Lk),e.onScroll=e._onScroll.event,e}return vk(t,e),Ew(t,[{key:"virtuosoRefs",get:function(){return this._virtuosoRefs}},{key:"scrollers",get:function(){return this._scrollers}},{key:"scrollHeight",get:function(){var e=Object.values(this._scrollers).map((function(e){return e.scrollHeight}));return Math.max.apply(Math,gw(e))}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-viewer-kanban-group-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0;return this.scrollHeight+t}},{key:"destroy",value:function(){this._virtuosoRefs={},this._scrollers={}}},{key:"setVirtuosoRefs",value:function(e){this._virtuosoRefs=e}},{key:"setScrollers",value:function(e){this._scrollers=e}},{key:"scrollIntoView",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollIntoView(t)}},{key:"emitScrollEvent",value:function(e){this._onScroll.emit(e)}},{key:"scrollTo",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollTo(t)}},{key:"getKanbanGroupPositionByRecordId",value:function(e,t){for(var n,r="",o=-1,i=0;i<t.length;i++)for(var a=t[i].viewRecords||[],u=0;u<a.length;u++)if(a[u].get("record_uuid")===e){r=(null==(n=t[i].option)?void 0:n.uuid)||this._dataServce.UNGROUP_KEY,o=u;break}return{index:o,groupId:r}}}])}(bk);XMe([Ks($Me)],ZMe.prototype,"_dataServce",2),XMe([Ks(doe)],ZMe.prototype,"renderContext",2),ZMe=XMe([Gs()],ZMe);var QMe=function(e){var t=e.groupField,n=function(e){var t=e.groupField,n=yre(jSe);return{onAddGroup:function(e){null==n||n.showNewGroup(e.target.parentNode,t)}}}({groupField:t}),r=n.onAddGroup;return t?u.a.createElement("div",{className:"lakex-viewer-kanban-group"},u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-viewer-kanban-new-group"},u.a.createElement("button",{className:"lakex-table-button lakex-viewer-kanban-new-group-button",onClick:r},u.a.createElement(oue,{type:"Add"}),Lw("新建分组"))))):null},eTe=function(e){var t=qwe(mR.TABLE).isReadonly();return u.a.createElement("div",{className:"lakex-table-kanban-empty"},u.a.createElement("div",{className:"lakex-table-kanban-empty-body"},u.a.createElement("h1",null,Lw("看板暂无分组")),u.a.createElement("p",null,Lw("可以快速新建一个单选列进行分组")),u.a.createElement(m.a,{type:"primary",onClick:e.onCreate,disabled:t},Lw("新建分组"))))};var tTe=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,o=yre(oRe),i=yre(nxe),l=yre(Ooe),c=yre(_oe),s=yre(oA),d=t.get("record_uuid"),f=(null==r?void 0:r.get("show_field_name"))||!1,p=function(){var e,t,n;return!((null==(n=null==(t=null==(e=null==i?void 0:i.getSelection())?void 0:e.getRangeAt)?void 0:t.call(e,0))?void 0:n.recordId)!==d)},v=WI(Object(a.useState)(p()),2),h=v[0],g=v[1];Zae((function(){var e=null==i?void 0:i.onChange((function(e){e.selection;g(p())}));return function(){null==e||e.destroy()}}),[]);var m=zAe({recordId:d}),y=Object(a.useCallback)((function(e){e.preventDefault(),null==o||o.showContextMenu({from:rRe.KANBAN_RECORD,e:e,recordId:d})}),[d,o]),b=Object(a.useCallback)((function(){null==c||c.emitClickRecord({recordId:d})}),[d,c]),w=null==s?void 0:s.getViewRecordCells(t.get("view_uuid"),t.get("record_uuid"));return u.a.createElement("div",{key:d+t.get("updated_at"),className:I()("lakex-viewer-kanban-record",{selected:h,"show-field-name":f,"in-highlight":m}),"data-record-uuid":d,onClick:b,onContextMenu:y},u.a.createElement("div",{className:"lakex-viewer-kanban-field-list"},null==w?void 0:w.map((function(e,t){var r=Z_(n,(function(t){return t.get("uuid")===(null==e?void 0:e.fieldId)}));if(!r)return null;var o=l.getFieldComponent(r.get("type")),i=null==l?void 0:l.getFieldIcon(r.get("type"));if(null==(null==e?void 0:e.value)||""==(null==e?void 0:e.value))return 0===t?u.a.createElement("div",{key:e.fieldType+e.cellId,className:"lakex-viewer-kanban-field empty first","data-field-uuid":null==e?void 0:e.fieldId},f&&u.a.createElement("div",{className:I()("lakex-viewer-kanban-field-name",e.fieldType)},i&&u.a.createElement(i,{size:14}),r.get("name")),u.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},u.a.createElement("span",{className:"empty-title"},Lw("未命名记录")))):" ";var a=function(e,t){var n={defaultValue:t.value,readonly:!0},r=e.get("type");return fE.isSelectLike(r)?n.field=e:fE.isImage(r)?n.size="small":fE.isSystemDate(r)&&(n.format="YYYY-MM-DD HH:mm:ss"),n}(r,e);return u.a.createElement("div",{key:r.get("updated_at")+e.fieldType+e.uuid+e.updated_at,className:I()("lakex-viewer-kanban-field",{first:0===t}),"data-field-uuid":null==e?void 0:e.fieldId},f&&u.a.createElement("div",{className:I()("lakex-viewer-kanban-field-name",e.fieldType)},i&&u.a.createElement(i,{size:14}),u.a.createElement("span",{className:"lakex-viewer-kanban-field-name-content"},r.get("name"))),u.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},o?u.a.createElement(o,{readonly:!0,key:t,cell:e,field:r,fieldProps:a}):null))}))))};function nTe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rTe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nTe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nTe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oTe=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,o=qwe(mR.TABLE).isReadonly(),i=aW({id:t.get("record_uuid"),disabled:o}),a=i.attributes,l=i.listeners,c=i.setNodeRef,s=i.transform,d=i.transition,f=i.isDragging,p={transform:Qae.Transform.toString(s),transition:d,zIndex:f?"100":"auto",opacity:f?0:1};return u.a.createElement("div",rTe(rTe({ref:o?void 0:c,className:"lakex-viewer-kanban-record-container",style:p},a),l),u.a.createElement(tTe,{key:t.get("uuid")+t.get("updated_at"),viewRecord:t,fields:n,viewConfig:r}))},iTe=["children"];function aTe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uTe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aTe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aTe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lTe=function(e){var t=e.children,n=wre(e,iTe),r=WI(Object(a.useState)(0),2),o=r[0],i=r[1],l=n["data-known-size"],c={"--child-height":"".concat(o,"px")};return Zae((function(){i((function(e){return 0===l?e:l}))}),[l]),u.a.createElement("div",uTe(uTe({},n),{},{className:"height-preserving-kanban-record",style:c}),t)};function cTe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sTe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sTe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function sTe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function dTe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fTe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dTe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dTe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pTe=function(e,t,n,r,o){var i=yre(oA),u=yre(oFe),l=yre(ZMe),c=Object(a.useMemo)((function(){var e=Object.keys(t),n=e.findIndex((function(e){return e===r}));return n>-1&&(e.splice(n,1),e.unshift(r)),e}),[t]),s=WI(Object(a.useState)(null),2),d=s[0],f=s[1],p=Object(a.useRef)(null),h=Object(a.useRef)(!1),g=function(e){return e in t?e:Object.keys(t).find((function(n){return t[n].map((function(e){return e.get("record_uuid")})).includes(e)}))},m=Object(a.useCallback)((function(e){var n;if(d&&d in t)return GU(fTe(fTe({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id in t}))}));var r=function(e){var t=e.droppableContainers,n=e.droppableRects,r=e.pointerCoordinates;if(!r)return[];var o,i,a,u,l,c,s=[],d=DU(t);try{for(d.s();!(o=d.n()).done;){var f=o.value,p=f.id,v=n.get(p);if(v&&JU(r,v)){var h=(a=void 0,u=void 0,l=void 0,c=void 0,a=(i=v).left,u=i.top,l=i.height,c=i.width,[{x:a,y:u},{x:a+c,y:u},{x:a,y:u+l},{x:a+c,y:u+l}]).reduce((function(e,t){return e+zU(r,t)}),0),g=Number((h/4).toFixed(4));s.push({id:p,data:{droppableContainer:f,value:g}})}}}catch(e){d.e(e)}finally{d.f()}return s.sort(HU)}(e),o=WU(r.length>0?r:YU(e),"id");if(null!=o){if(o in t){var i=t[o];i.length>0&&(o=null==(n=GU(fTe(fTe({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id!==o&&i.map((function(e){return e.get("record_uuid")})).includes(e.id)}))}))[0])?void 0:n.id)}return p.current=o,[{id:o}]}return h.current&&(p.current=d),p.current?[{id:p.current}]:[]}),[d,t]);Zae((function(){requestAnimationFrame((function(){h.current=!1}))}),[t]);var y=VU(BU(TH,{activationConstraint:{distance:8}}));return{activeId:d,containers:c,sensors:y,collisionDetectionStrategy:m,onDragStart:function(e){f(e.active.id)},onDragOver:function(e){var r=e.active,o=e.over,i=null==o?void 0:o.id;if(null!=i&&!(r.id in t)){var a=g(i),u=g(r.id);a&&u&&u!==a&&n((function(e){var t,n=e[u],l=e[a],c=l.map((function(e){return e.get("record_uuid")})).indexOf(i),s=n.map((function(e){return e.get("record_uuid")})).indexOf(r.id);if(i in e)t=l.length+1;else{var d=o&&r.rect.current.translated&&r.rect.current.translated.top>o.rect.top+o.rect.height;t=c>=0?c+(d?1:0):l.length+1}return h.current=!0,fTe(fTe({},e),{},bw(bw({},u,e[u].filter((function(e){return e.get("record_uuid")!==r.id}))),a,[].concat(gw(e[a].slice(0,t)),[e[u][s]],gw(e[a].slice(t,e[a].length)))))}))}},onDragEnd:function(n){var a,c,s,d,p,h,m=n.active,y=n.over;if(m.id in t&&(null==y?void 0:y.id)){if(0===(null==(a=y.data.current.sortable)?void 0:a.index)&&(null==(c=null==y?void 0:y.data.current.sortable)?void 0:c.items[0])===r)return;var b=e.find((function(e){var t;return(null==(t=e.option)?void 0:t.uuid)===m.id}));u.updateFieldOptionOrder(null==b?void 0:b.option.field_uuid,m.id,y.id)}else{var w,_,k=cTe(e);try{for(k.s();!(_=k.n()).done;){var C=_.value;if(C.viewRecords.find((function(e){return e.get("record_uuid")===m.id}))){w=C.id;break}}}catch(e){k.e(e)}finally{k.f()}if(w){var E=null==y?void 0:y.id,O=g(E);if(null!=E){if(O){if((null==o?void 0:o.get("keep_sort"))&&w===O)return void v.a.warn(Lw("取消排序后，可进行拖拽"));var S=e.find((function(e){return e.id===w}))||void 0,x=e.find((function(e){return e.id===O}))||void 0,j=((null==S?void 0:S.viewRecords)||[]).map((function(e){return e.get("record_uuid")})).indexOf(m.id),D=t[O].map((function(e){return e.get("record_uuid")})).indexOf(E),A=m.id,R=null==(s=null==x?void 0:x.viewRecords[D])?void 0:s.get("record_uuid");if(w===O&&j===D)return;if(w!==O){var F=D===(null==x?void 0:x.viewRecords.length),I=i.getOriginViewRecords();if(F)R=null==(d=x.viewRecords[D-1])?void 0:d.get("record_uuid");else if(R){var P=ek(I,(function(e){return e.get("record_uuid")===R}));R=null==(p=I.get(P+1))?void 0:p.get("record_uuid")}var M=ek(I,(function(e){return e.get("record_uuid")===A})),T=ek(I,(function(e){return e.get("record_uuid")===R}));M<T&&(R=null==(h=I.get(T-1))?void 0:h.get("record_uuid"))}if(u.updateRecordOrder(A,R,x,eE.reverse),null==o?void 0:o.get("keep_sort")){var N=i.getGroupViewRecords(o.get("view_uuid")),B=l.getKanbanGroupPositionByRecordId(m.id,N),V=B.index,L=B.groupId;return l.scrollIntoView(L,{index:V,align:"start"}),void v.a.warn(Lw("当前处于保持排序状态，为您重新定位"))}}f(null)}else f(null)}else f(null)}},onDragCancel:function(){f(null)},findContainer:g,getIndex:function(e){var n=g(e);return n?t[n].map((function(e){return e.get("record_uuid")})).indexOf(e):-1}}},vTe=function(e){var t=e.items,n=e.containerId,r=e.useWindowScroll,o=e.customScrollParent,i=e.disableVirtualScroll,a=e.fields,l=e.viewConfig,c=e.withRef,s=e.scrollerRef;return u.a.createElement(Qq,{items:t[n].map((function(e){return e.get("record_uuid")})),strategy:Jq},u.a.createElement(Y9,{useWindowScroll:r,customScrollParent:o,ref:function(e){c(e)},scrollerRef:s,components:{Item:lTe},data:t[n],className:"lakex-viewer-kanban-group-scorller","data-group-id":n,increaseViewportBy:i?Number.MAX_SAFE_INTEGER:0,itemContent:function(e,t){return u.a.createElement(oTe,{key:t.get("record_uuid"),viewRecord:t,fields:a,viewConfig:l})}}))},hTe=u.a.forwardRef((function(e,t){var n,r=function(e){var t=e.viewId,n=yre(oA),r=Gwe({viewId:t}),o=yre(ZR),i=yre(TMe),u=yre(zMe),l=yre($Me),c=yre(ZMe),s=yre(lk),d=qwe(mR.TABLE).isReadonly(),f=l.UNGROUP_KEY,p=r.groupViewRecords,v=l.toKanbanData(p),h=Object(a.useRef)({}),g=WI(Object(a.useState)((function(){var e={};return v.forEach((function(t){e[t.id]=t.viewRecords})),e})),2),m=g[0],y=g[1],b=WI(Object(a.useState)(null==s?void 0:s.getValue("view.useWindowScroll")),2),w=b[0],_=b[1],k=null==s?void 0:s.getValue("view.customScrollParent"),C=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body,E=WI(Object(a.useState)((null==s?void 0:s.getValue("view.disableVirtualScroll"))||!1),2),O=E[0],S=E[1];Zae((function(){h.current&&(null==c||c.setScrollers(h.current))}),[c,h]),Zae((function(){var e=o.onDataChanged((function(){var e;if(t===(null==(e=n.getActiveView())?void 0:e.get("uuid"))){var r=n.getGroupViewRecords(),o=(null==l?void 0:l.toKanbanData(r))||[],i={};o.forEach((function(e){i[e.id]=e.viewRecords})),y(i)}}));return function(){e.destroy()}}),[t]),Zae((function(){var e=null==s?void 0:s.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?_(n):"view.disableVirtualScroll"===t&&S(n)}));return function(){null==e||e.destroy()}}),[]);var x=r.group;return{isReadonly:d,ungroupId:f,fields:r.fields,viewConfig:r.viewConfig,group:x,isEmpty:!x,data:v,items:m,setItems:y,kanbanService:i,kanbanGroupService:u,scrollService:c,groupScrollersRef:h,useWindowScroll:w,customScrollParent:k,customModalContainer:C,disableVirtualScroll:O}}(e),o=r.isReadonly,i=r.kanbanService,c=r.kanbanGroupService,s=r.scrollService,d=r.fields,f=r.viewConfig,p=r.isEmpty,v=r.data,h=r.items,g=r.setItems,m=r.ungroupId,y=r.groupScrollersRef,b=r.useWindowScroll,w=r.customScrollParent,_=r.customModalContainer,k=r.disableVirtualScroll,C=pTe(v,h,g,m,f),E=C.activeId,O=C.containers,S=C.sensors,x=C.collisionDetectionStrategy,j=C.onDragStart,D=C.onDragOver,A=C.onDragEnd,R=C.onDragCancel,F=yre(lk).getValue("render.deferMode"),I=Object(a.useMemo)((function(){return F===ooe.DISABLE?i.Group:KJ(i.Group)}),[i.Group,F]),P=Object(a.useRef)({}),M=Object(a.useMemo)((function(){if(E&&!O.includes(E))for(var e=0,t=Object.values(h);e<t.length;e++){var n=t[e].find((function(e){return e.get("record_uuid")===E}));if(n)return n}return null}),[E,O,h]);return Zae((function(){P.current&&(null==s||s.setVirtuosoRefs(P.current))}),[s,P]),c?(n=p?u.a.createElement("div",{className:"lakex-viewer-kanban-content empty"},u.a.createElement(eTe,{onCreate:function(){return null==c?void 0:c.createGroup()}})):u.a.createElement("div",{className:"lakex-viewer-kanban-content"},u.a.createElement(kq,{sensors:S,collisionDetection:x,measuring:{droppable:{strategy:GH.Always}},onDragStart:j,onDragOver:D,onDragEnd:A,onDragCancel:R},u.a.createElement(u.a.Fragment,null,u.a.createElement(Qq,{items:O,strategy:Gq},null==O?void 0:O.map((function(e){var t=v.find((function(t){return t.id===e}));return t&&I?u.a.createElement(I,{key:e,groupId:e,items:h[e],disableDrag:e===m,groupField:t.field,groupOption:t.option},u.a.createElement(vTe,{items:h,containerId:e,useWindowScroll:b,customScrollParent:w,disableVirtualScroll:k,fields:d,viewConfig:f,withRef:function(t){return P.current[e]=t},scrollerRef:function(t){t&&(y.current[e]=t)}})):null}))),Object(l.createPortal)(u.a.createElement(Lq,{dropAnimation:null},M&&u.a.createElement(tTe,{viewRecord:M,fields:d,viewConfig:f})),_))),!o&&u.a.createElement(QMe,{groupField:c.getGroupField()})),u.a.createElement("div",{ref:t,className:"lakex-viewer-kanban"},u.a.createElement("div",{className:"lakex-viewer-kanban-inner",onScroll:function(e){s.emitScrollEvent(e)}},n))):null}));function gTe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mTe(e,t,n){return t=dk(t),sk(e,yTe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function yTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yTe=function(){return!!e})()}var bTe=function(e){function t(){var e;return _w(this,t),(e=mTe(this,t,arguments)).viewType=sE.KANBAN,e.title=Lw("看板视图"),e.desc=Lw("任务流转一目了然"),e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gTe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gTe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"KanbanView",size:16},e))},e.colorCls="yuque-color-cyan-5",e.Component=hTe,e}return vk(t,e),Ew(t)}(jae),wTe=Object.defineProperty,_Te=Object.getOwnPropertyDescriptor,kTe=function(e,t,n,r){for(var o,i=r>1?void 0:r?_Te(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wTe(t,n,i),i},CTe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new bTe({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setKanbanScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return dd().contribution(FMe).contribution(NMe).register(this).register(TMe).register(zMe).register($Me).register(ZMe)}}])}();CTe.pluginName="render-viewer-kanban",kTe([Ks(ZMe)],CTe.prototype,"_scrollService",2),CTe=kTe([Gs({contrib:[toe,aoe,HSe]})],CTe);var ETe=function(e){var t,n=e.count,r=void 0===n?0:n,o=e.groupField,i=e.groupOption,l=function(e){var t=e.groupField,n=e.groupOption,r=yre(Ooe),o=yre(zMe),i=yre(jSe),u=qwe(mR.TABLE).isReadonly(),l=Object(a.useCallback)((function(e){if(!u){var r=e.target.closest(".lakex-viewer-kanban-group-header");null==i||i.showEditGroup(r,t,n)}}),[t,n]);return{isReadonly:u,onOpenSetting:l,getFieldComponent:function(e){return r.getFieldComponent(e)},getKanbanGroupActions:function(){return null==o?void 0:o.getKanbanGroupActionComponents()}}}(e),c=l.isReadonly,s=l.getFieldComponent,d=l.getKanbanGroupActions,f=l.onOpenSetting,p=s(o.get("type"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-table-kanban-group-title-content",onClick:f},p&&u.a.createElement(p,{readonly:!0,field:o,cell:i,checkCell:!1,writeable:!1,disableOpen:!0})),u.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},r)),o&&i&&!c&&u.a.createElement("div",{className:"lakex-table-kanban-group-actions"},null==(t=d())?void 0:t.map((function(e,t){return e?u.a.createElement(e,{key:t,groupField:o,groupOption:i}):null}))))},OTe=function(e){var t=e.count,n=void 0===t?0:t,r=e.groupField,o=e.groupOption,i=yre($Me),a=qwe(mR.TABLE).isReadonly();return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-table-kanban-group-title-content"},Lw("未分组")),u.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},n)),u.a.createElement("div",{className:"lakex-table-kanban-group-actions"},!a&&u.a.createElement(d.a,{title:Lw("添加记录"),placement:"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},u.a.createElement("button",{className:"lakex-table-button",onClick:function(){return null==i?void 0:i.addRecord(r,o)}},u.a.createElement(oue,{type:"Add"})))))};function STe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xTe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?STe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):STe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jTe=function(e){var t=e.groupId,n=e.items,r=e.disableDrag,o=e.groupField,i=e.groupOption,a=e.children,l=qwe(mR.TABLE).isReadonly(),c=i&&o,s=n.length,d=aW({id:t,data:{type:"container",children:n},disabled:l||r}),f=d.attributes,p=d.listeners,v=d.setNodeRef,h=d.transform,g=d.transition,m=d.isDragging,y={transform:r?"":Qae.Transform.toString(h),transition:m?g:"",zIndex:m?"100":"auto"};return u.a.createElement("div",xTe({ref:v,className:"lakex-viewer-kanban-group",style:y},f),u.a.createElement("div",xTe({className:I()("lakex-viewer-kanban-group-header",{"disable-drag":r})},p),c?u.a.createElement(ETe,{count:s,groupField:o,groupOption:i}):u.a.createElement(OTe,{count:s,groupField:o,groupOption:i})),u.a.createElement("div",{className:"lakex-table-kanban-group-records"},a))},DTe=function(e){var t=e.groupField,n=e.groupOption,r=e.name,o=yre($Me);return t&&n?u.a.createElement(d.a,{title:Lw("添加记录"),placement:"card"===r?"bottomRight":"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},u.a.createElement("button",{className:"lakex-table-button",onClick:function(){return null==o?void 0:o.addRecord(t,n)}},u.a.createElement(oue,{type:"Add"}))):null};function ATe(e,t,n){return t=dk(t),sk(e,RTe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function RTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RTe=function(){return!!e})()}var FTe=Object.defineProperty,ITe=Object.getOwnPropertyDescriptor,PTe=function(e,t,n,r){for(var o,i=r>1?void 0:r?ITe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FTe(t,n,i),i},MTe=function(e){function t(){var e;return _w(this,t),(e=ATe(this,t,arguments))._onAddGroupRecordClick=e._register(new Lk),e.onAddGroupRecordClick=e._onAddGroupRecordClick.event,e._onGroupSettingClick=e._register(new Lk),e.onGroupSettingClick=e._onGroupSettingClick.event,e}return vk(t,e),Ew(t,[{key:"openSettingModal",value:function(e,t,n,r){this._onGroupSettingClick.emit({target:e.target,groupField:t,groupOption:n,$title:r})}},{key:"destroy",value:function(){!function(e,t,n,r){var o=fk(dk(e.prototype),t,n);return function(e){return o.apply(n,e)}}(t,"destroy",this)([])}}])}(bk);PTe([Ts()],MTe.prototype,"destroy",1),MTe=PTe([Gs()],MTe);var TTe=function(e){var t=e.groupField,n=e.groupOption,r=function(e){var t=e.groupField,n=e.groupOption,r=yre(MTe),o=Object(a.useCallback)((function(e){var o=e.target.closest(".lakex-viewer-kanban-group-header");null==r||r.openSettingModal(e,t,n,o)}),[t,n]);return{onOpenSetting:o}}({groupField:t,groupOption:n}),o=r.onOpenSetting;return t&&n?u.a.createElement("button",{className:"lakex-table-button",onClick:function(e){return o(e)}},u.a.createElement(oue,{type:"MoreHorizontal"})):null},NTe=Object.defineProperty,BTe=Object.getOwnPropertyDescriptor,VTe=function(){return Ew((function e(){_w(this,e)}),[{key:"getKanbanGroupActionComponent",value:function(){return[DTe,TTe]}},{key:"getGroupComponent",value:function(){return jTe}}],[{key:"pluginModule",value:function(){return dd().register(this).register(MTe)}}])}();VTe.pluginName="render-viewer-kanban-group",VTe=function(e,t,n,r){for(var o,i=r>1?void 0:r?BTe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NTe(t,n,i),i}([Gs({contrib:[FMe,NMe]})],VTe);var LTe=function(e){var t=e.date,n=e.onCurrentDateChange,r=Object(a.useCallback)((function(e,r,o){var i=t[e](o,r);n(i)}),[t]),o=Object(a.useCallback)((function(e){e.stopPropagation(),r(xwe,Dwe,1)}),[r]),i=Object(a.useCallback)((function(e){e.stopPropagation(),r(Swe,Dwe,1)}),[r]),u=Object(a.useCallback)((function(){var e=f_();t.isSame(e)||n(e)}),[t]);return React.createElement("div",{className:"lakex-table-view-calendar-header"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-date"},t.format(Lw("YYYY年M月"))),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-prev",onClick:o},React.createElement(oue,{type:"ArrowLeft",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-next",onClick:i},React.createElement(oue,{type:"ArrowRight",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-today-button",onClick:u},Lw("今天"))))},zTe=Is.defineToken("ViewerCalendarDataServiceToken"),UTe=function(){for(var e=yre(zTe).startWeekDay,t=[],n=0;n<Awe;n++){var r=(e+n)%Awe;t.push(Rwe[r])}return React.createElement("div",{className:"lakex-view-calendar-week-names"},t.map((function(e,t){return React.createElement("div",{className:"lakex-view-calendar-week-names-item",key:t},e)})))},HTe=function(e){var t=e.date,n=e.colIndex;e.rowIndex;var r,o,i=e.schedule,u=e.activeScheduleId,l=e.dragScheduleId,c=e.onBeforeDrag,s=e.onBeforeResize,d=e.onEnterSchedule,f=e.onLeaveSchedule,p=yre(oA),v=yre(zTe),h=yre(oRe),g=yre(nxe),m=qwe(mR.TABLE).isReadonly(),y=yre(_oe),b=uIe(i.id),w=function(){var e,t,n;return!((null==(n=null==(t=null==(e=null==g?void 0:g.getSelection())?void 0:e.getRangeAt)?void 0:t.call(e,0))?void 0:n.recordId)!==i.id)},_=WI(Object(a.useState)(w()),2),k=_[0],C=_[1];Zae((function(){var e=null==g?void 0:g.onChange((function(e){e.selection;C(w())}));return function(){null==e||e.destroy()}}),[]);var E=zAe({recordId:i.id}),O="lakex-view-calendar-schedule-line",S=Object(a.useRef)(!1),x=Object(a.useRef)(!1),j=Object(a.useRef)(null),D=Object(a.useRef)(null),A=i.isStartDate(t),R=i.id===u,F=p.getViewConfig(),I=(null==F?void 0:F.get("start_date_field_uuid"))||"",P=(null==F?void 0:F.get("end_date_field_uuid"))||"",M=null==(r=p.getField(I))?void 0:r.get("type"),T=null==(o=p.getField(P))?void 0:o.get("type"),N=M===HC.DATE,B=T===HC.DATE,V=(null==F?void 0:F.get("date_color_type"))||rE.CUSTOM,L=(null==F?void 0:F.get("date_color"))||"",z=p.getFieldOptions(L),U=Object(a.useMemo)((function(){var e={};return V===rE.FOLLOW_FIELD&&L&&nk(z,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[V,L,z]),H=Object(a.useMemo)((function(){var e=v.getScheduleLineStyle({schedule:i,colIndex:n,date:t,isActive:R,isDelPossible:!!b,isInHighlight:E,isSelected:k,scheduleColorType:V,schedlueColorFieldIdOrColorId:L,colorMap:U});return l===i.id&&(e.lineStyle.opacity=0),e}),[i,n,t,u,l,b,E,k,U]),q=H.lineStyle,W=H.labelStyle,$=H.isShowControl,G=Object(a.useCallback)((function(){j.current&&clearTimeout(j.current),j.current=null}),[j.current]),K=Object(a.useCallback)((function(e){e.preventDefault(),null==h||h.showContextMenu({e:e,from:rRe.CALENDAR_RECORD,recordId:i.id})}),[i,h]),Y=Object(a.useCallback)((function(e){e.persist(),m||(x.current?x.current=!1:(G(),j.current=setTimeout((function(){null==y||y.emitClickEvent({eventName:"selectSchedule",data:{recordId:i.id,event:e}})}),300)))}),[i,m,x.current,G]),J=Object(a.useCallback)((function(e){G(),null==y||y.emitClickRecord({recordId:i.id})}),[i,G]),X=Object(a.useCallback)((function(e){if(2!==e.button&&!m&&N&&B){S.current=!0;var t={x:e.clientX,y:e.clientY};setTimeout((function(){S.current&&(G(),c(i,t))}),300)}}),[S.current,i,m,N,B,G]),Z=Object(a.useCallback)((function(e,t){2===e.button||m||(x.current=!0,s(i,t))}),[i,m]),Q=Object(a.useCallback)((function(){x.current=!1}),[]);return React.createElement("div",{className:"".concat(O),ref:D,style:q,"data-id":i.id,"data-active":R,"data-is-start":A,"data-line":"true","data-schedule-line":"true","data-in-highlight":E,"data-control":String($),onClick:Y,onDoubleClick:J,onMouseEnter:function(){d(i)},onMouseLeave:f},A&&!m&&N?React.createElement("div",{className:"".concat(O,"-label"),style:W,onMouseDown:function(e){Z(e,"startDate")},onMouseUp:Q}):null,React.createElement("div",{className:"".concat(O,"-title"),"data-not-title":!i.title,onMouseDown:X,onMouseUp:function(){S.current=!1},onContextMenu:K},i.title||Lw("添加日程标题")),$&&!m&&B?React.createElement("div",{className:"".concat(O,"-control"),style:W,onMouseDown:function(e){Z(e,"endDate")},onMouseUp:Q}):null)},qTe=function(e){var t=e.onCreateSchedule;return React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-placeholder",onClick:t},React.createElement(oue,{type:"Add",size:16}),React.createElement("span",null,Lw("添加日程")))},WTe=function(e){var t=e.cell,n=e.cellHeight,r=e.colIndex,o=e.rowIndex;e.dateRows;var i=e.scheduleList,u=e.scheduleMap,l=e.isShowBorder,c=e.activeScheduleId,s=e.dragScheduleId,d=e.dragSchedulePosIndex,f=e.onBeforeDrag,p=e.onBeforeResize,v=e.onCreateSchedule,h=e.onEnterSchedule,g=e.onLeaveSchedule,m=yre(zTe),y=yre(_oe),b=yre(lk),w=qwe(mR.TABLE).isReadonly(),_=(null==b?void 0:b.getValue("view.useWindowScroll"))||!1,k=m.defaultCellMinHeight,C=m.cellScheduleHeight,E=m.defaultMaxScheduleNum,O=_?100:n>k?Math.floor((n-k+6)/C)+E:E,S=i.length>0,x=Object(a.useMemo)((function(){return m.sortScheduleList(t,i,u)}),[t,i,u]),j=Object(a.useMemo)((function(){return{renderScheduleList:x.slice(0,O),hiddenScheduleList:x.slice(O)}}),[x,O]),D=j.renderScheduleList,A=j.hiddenScheduleList,R=A.length>0,F=Object(a.useCallback)((function(e){null==y||y.emitClickEvent({eventName:"showMoreSchedule",data:{event:e,date:t,scheduleList:x}})}),[x]);return S||w?React.createElement(React.Fragment,null,D.map((function(e,n){var i,m=t.unix(),y=e.isStartDate(t),b={},w={},_=n===D.length-1,k=d_(e.start),C=null==(i=u[k])?void 0:i[e.id],E=null,S="".concat(m,"-").concat(e.id,"-schedule");return C>=O?D.length>1?null:React.createElement(qTe,{key:S,onCreateSchedule:v}):(l&&s!==e.id&&-1!==d&&(d===n&&(b.backgroundColor="var(--yq-yuque-green-500)"),_&&d>=D.length&&(w.backgroundColor="var(--yq-yuque-green-500)")),E=y||0===r?React.createElement(HTe,{key:S,date:t,colIndex:r,rowIndex:o,schedule:e,activeScheduleId:c,dragScheduleId:s,onBeforeResize:p,onBeforeDrag:f,onEnterSchedule:h,onLeaveSchedule:g}):React.createElement("div",{key:"".concat(m,"-").concat(e.id,"-holder"),"data-id":e.id,className:"lakex-view-calendar-content-box-row-cell-schedule-holder","data-line":"true"}),React.createElement(a.Fragment,{key:"".concat(m,"-").concat(e.id,"-fragment")},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-start"),style:b}),E,_&&React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-end"),style:w})))})),R?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-more",onClick:F},Lw("还有 $1 项",A.length)):null):React.createElement(qTe,{onCreateSchedule:v})};function $Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GTe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$Te(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KTe=function(e){var t=e.cell,n=e.cellHeight,r=e.colIndex,o=e.rowIndex,u=e.date,l=e.dateRows,c=e.scheduleList,s=e.scheduleMap,f=e.activeScheduleId,p=e.dragScheduleId,v=e.dragSchedulePosIndex,h=e.resizeSchedule,g=e.highlightDate,m=e.onBeforeResize,y=e.onBeforeDrag,b=e.onEnterSchedule,w=e.onLeaveSchedule,_=yre(zTe),k=_.defaultCellMinHeight,C=yre(_oe),E=qwe(mR.TABLE).isReadonly(),O=yre(oA),S=yre(lk),x=(null==S?void 0:S.getValue("view.useWindowScroll"))||!1,j=Object(a.useRef)(null),D=O.getViewConfig(),A=(null==D?void 0:D.get("show_lunar"))||!1,R=Object(a.useMemo)((function(){return A?_.getDateLunarInfo(t):null}),[A,t]),F=!1,P=!1;h&&h.include(t)&&(F=!0);var M=c.filter((function(e){return e.include(t)})),T=M.length>0,N=0===t.day()||6===t.day();g&&g.isSame(t,jwe)&&(P=!0,F=!0);var B=Object(a.useCallback)((function(e){var n,r=_.createSchedule(t),o=null==r?void 0:r.result,i=null==(n=null==o?void 0:o[0])?void 0:n.uuid;i&&setTimeout((function(){var t,n,r=null==(t=j.current)?void 0:t.querySelectorAll('div[data-line="true"]'),o=null==(n=j.current)?void 0:n.querySelector(".lakex-view-calendar-content-box-row-cell-schedule-more");o?null==C||C.emitClickEvent({eventName:"selectSchedule",data:{recordId:i,event:e,position:{origin:o,placement:"bottomLeft"}}}):r&&(null==C||C.emitClickEvent({eventName:"selectSchedule",data:{recordId:i,event:e,position:{origin:r[r.length-1],placement:"bottomLeft"}}}))}),300)}),[t]);return React.createElement("div",{ref:j,className:I()("lakex-view-calendar-content-box-row-cell",{lunar:A}),key:t.unix(),"data-background":P,"data-unix":t.unix(),"data-lunar-holiday":(null==R?void 0:R.displayHoliday)&&!R.isWork,"data-weekend":N,style:GTe({minHeight:"".concat(k,"px")},x?{}:{height:"".concat(n,"px")})},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date","data-today":t.isSame(i()(),jwe),"data-fade":t.month()!==u.month()},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-left"},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-text"},React.createElement("span",null,t.format("D"))),R?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-lunar"},R.lunarText):null,(null==R?void 0:R.displayHoliday)?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-holiday"},R.isWork?Lw("班"):Lw("休")):null),T&&!E?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-plus",onClick:B},React.createElement(d.a,{title:Lw("添加日程")},React.createElement(oue,{type:"Add",size:14}))):null),React.createElement(WTe,{cell:t,cellHeight:n,colIndex:r,rowIndex:o,dateRows:l,scheduleList:M,scheduleMap:s,isShowBorder:F,onCreateSchedule:B,activeScheduleId:f,dragScheduleId:p,dragSchedulePosIndex:v,onBeforeResize:m,onBeforeDrag:y,onEnterSchedule:b,onLeaveSchedule:w}))},YTe=function(e){var t=e.boxInfo,n=e.lines,r=t.top,o=t.left;return React.createElement(React.Fragment,null,n.map((function(e,t){var n=e.getBoundingClientRect();return React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot-line",key:t,style:{top:n.top-r,left:n.left-o,width:n.width,height:n.height},dangerouslySetInnerHTML:{__html:e.outerHTML}})})))},JTe=Object(a.forwardRef)((function(e,t){var n=e.scheduleId,r=e.boxNode,o=e.boxInfo;if(!o)return null;var i=Object(a.useRef)(null),u=o.width,l=o.height,c=Object(a.useMemo)((function(){return gw(r.querySelectorAll('.lakex-view-calendar-schedule-line[data-id="'.concat(n,'"]')))}),[r,n]);return Object(a.useImperativeHandle)(t,(function(){return{moving:function(e){i.current&&(i.current.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))}}})),React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot",ref:i,style:{width:u,height:l}},React.createElement(YTe,{lines:c,boxInfo:o}))})),XTe=function(){return Ew((function e(t){var n=t.id,r=t.start,o=t.end,i=t.title;_w(this,e),this._id=n,this._start=r,this._end=o,this._title=i}),[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"duration",get:function(){return this._end.diff(this._start,jwe)}},{key:"include",value:function(e){return e.isBetween(this._start,this._end,null,"[]")}},{key:"isStartDate",value:function(e){return e.isSame(this._start,jwe)}},{key:"isEndDate",value:function(e){return e.isSame(this._end,jwe)}},{key:"isSameDaySchedule",value:function(){return this.start.isSame(this._end,jwe)}},{key:"toJSON",value:function(){return{id:this._id,title:this._title,start:this._start,end:this._end}}}])}();function ZTe(e,t,n){return t=dk(t),sk(e,QTe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function QTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QTe=function(){return!!e})()}var eNe=Object.defineProperty,tNe=Object.getOwnPropertyDescriptor,nNe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tNe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eNe(t,n,i),i},rNe=function(e){function t(){var e;return _w(this,t),(e=ZTe(this,t,arguments))._scroller=null,e._onScroll=e._register(new Lk),e.onScroll=e._onScroll.event,e}return vk(t,e),Ew(t,[{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-table-view-calendar-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0,n=this.renderContext.$root.querySelector(".lakex-view-calendar-week-names"),r=(null==n?void 0:n.getBoundingClientRect().height)||0;return this.scrollHeight+t+r}},{key:"destroy",value:function(){this._scroller=null}},{key:"setScroller",value:function(e){this._scroller=e}}])}(bk);function oNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iNe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oNe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nNe([Ks(doe)],rNe.prototype,"renderContext",2),rNe=nNe([Gs()],rNe);var aNe=function(e){var t=e.date,n=e.dateRows,r=e.cellHeight,o=e.scheduleList,i=yre(rNe),u=Object(a.useRef)(null),l=function(){var e=Object(a.useRef)(null),t=WI(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(e,t){for(var n=[],r=0;r<e;r++)"function"==typeof t?n.push(t(r,n[r-1])):n.push([r*t,(r+1)*t]);return n},i=function(t){return o(t.length,(function(t,n){var r=e.current.children[t].getBoundingClientRect().height;if(!n)return[0,r];var o=WI(n,2)[1];return[o,o+r]}))};return{boxRef:e,boxInfo:n,makeRowRecords:i,findBoxIndex:function(e,t){var n=t.x-e.left,r=t.y-e.top,o=-1,i=-1;return e.rowRecords.forEach((function(e,t){var n=WI(e,2),i=n[0],a=n[1];i<=r&&r<=a&&(o=t)})),e.colRecords.forEach((function(e,t){var r=WI(e,2),o=r[0],a=r[1];o<=n&&n<=a&&(i=t)})),{rowIndex:o,colIndex:i}},getBoxInfo:function(t){var n=e.current.getBoundingClientRect(),r=n.top,a=n.left,u=n.width,l=n.height,c=Awe,s=u/c;return{top:r,left:a,width:u,height:l,colWidth:s,rowHeight:l/t.length,colRecords:o(c,s),rowRecords:i(t)}},setBoxInfo:r}}(),c=l.boxRef,s=l.boxInfo,d=l.findBoxIndex,f=l.getBoxInfo,p=l.setBoxInfo,v=function(e){var t=e.dateRows,n=e.boxRef,r=e.boxInfo,o=e.snapshotRef,i=e.findBoxIndex,u=e.getBoxInfo,l=e.setBoxInfo,c=e.scheduleList,s=yre(zTe),d=yre(doe),f=WI(Object(a.useState)(c),2),p=f[0],v=f[1],h=Object(a.useMemo)((function(){return s.getDateScheduleMap(t,p)}),[t,p]),g=WI(Object(a.useState)(""),2),m=g[0],y=g[1],b=WI(Object(a.useState)(null),2),w=b[0],_=b[1],k=WI(Object(a.useState)(""),2),C=k[0],E=k[1],O=WI(Object(a.useState)(-1),2),S=O[0],x=O[1],j=WI(Object(a.useState)(-1),2),D=j[0],A=j[1],R=WI(Object(a.useState)(!1),2),F=R[0],I=R[1],P=WI(Object(a.useState)(null),2),M=P[0],T=P[1],N=WI(Object(a.useState)(""),2),B=N[0],V=N[1],L=WI(Object(a.useState)(!1),2),z=L[0],U=L[1],H=WI(Object(a.useState)("endDate"),2),q=H[0],W=H[1],$=WI(Object(a.useState)(null),2),G=$[0],K=$[1],Y=WI(Object(a.useState)(null),2),J=Y[0],X=Y[1],Z=WI(Object(a.useState)(null),2),Q=Z[0],ee=Z[1],te=WI(Object(a.useState)(!1),2),ne=te[0],re=te[1],oe=Object(a.useCallback)((function(e){for(var t,r=e.unix(),o=gw(n.current.querySelectorAll('.lakex-view-calendar-content-box-row-cell[data-unix="'.concat(r,'"] [data-line="true"]'))),i=-1,a=d_(e),u=h[a],l=[],c=o.map((function(e){var t=e.getBoundingClientRect(),n=!1,r=e.getAttribute("data-id");return e.hasAttribute("data-schedule-line")?(n=!0,i+=1):l.push(u[r]),{start:t.top,end:t.top+t.height,id:r,isScheduleLine:n,index:n?i:i+1}})),s=Object.values(u),d=null==(t=Au(c,(function(e){return!e.isScheduleLine})))?void 0:t.id,f=u[d],p=[],v=0;v<f;v++)s.includes(v)||p.push(v);return{dateSchedulePosRecords:c,scheduleLineCount:i+1,freeSlot:p,maxSlotOrder:f,blackOrders:l}}),[n,h]),ie=Object(a.useCallback)((function(e){var t=-1,n=-1,r=Q.dateSchedulePosRecords,o=Q.scheduleLineCount;if((null==r?void 0:r.length)>0&&(ku(r,(function(o,i){if(0===i){var a=o.end;if(e.y<=a)return t=i,n=o.index,!1}else{var u=r[i-1].end,l=o.end;if(u<e.y&&e.y<=l)return t=i,n=o.index,!1}})),-1===t)){var i=r[r.length-1].end;e.y>i&&(t=r.length,n=o)}if(-1!==t){var a=Q.freeSlot,u=Q.blackOrders;if(u.length===r.length)t=a.length?a[0]:-1;else if(u.includes(t)){for(var l=t;u.includes(l);)l+=1;a.length&&l>a[a.length-1]&&(l=a[0]),t=l}}return{posIndex:t,scheduleIndex:n}}),[Q]),ae=Object(a.useCallback)((function(e){y(e.id)}),[]),ue=Object(a.useCallback)((function(){F||z||y("")}),[F,z]),le=Object(a.useCallback)((function(e,n){(null==d?void 0:d.$workbenchRoot)&&(d.$workbenchRoot.style.cursor="ew-resize"),y(e.id),U(!0),W(n),K(e),V(e.id),l(u(t))}),[t]),ce=Object(a.useCallback)((function(e,n){!w&&n&&_(iNe({},n)),y(e.id),I(!0),T(e),E(e.id),l(u(t)),re(!0)}),[w,t]),se=Object(a.useCallback)((function(e){var n;if(e.stopPropagation(),e.preventDefault(),(z||F)&&r){var a={x:e.clientX,y:e.clientY};w||_(iNe({},a));var u=i(r,a),l=u.rowIndex,c=u.colIndex;if(-1!==l&&-1!==c){var s=t[l][c];if(z&&G)if(s.isSameOrAfter(G.start,jwe)&&"endDate"===q){v(p.map((function(e){return e.id===G.id?new XTe({id:G.id,title:G.title,start:G.start,end:s}):e})));var d=new XTe({id:G.id,title:G.title,start:G.start,end:s});K(d)}else if(s.isSameOrBefore(G.end,jwe)&&"startDate"===q){v(p.map((function(e){return e.id===G.id?new XTe({id:G.id,title:G.title,start:s,end:G.end}):e})));var f=new XTe({id:G.id,title:G.title,start:s,end:G.end});K(f)}if(F){if(null==J?void 0:J.isSame(s)){var h=ie(a),g=h.posIndex,m=h.scheduleIndex;D===g&&S===m||(x(m),A(g))}else X(s),ee(oe(s));(null==(n=o.current)?void 0:n.moving)&&w&&o.current.moving({x:a.x-w.x,y:a.y-w.y})}}}}),[z,F,q,r,o,J]),de=Object(a.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),z||F){if(F&&M&&J){var t=h[d_(J)]||[],n=Object.entries(t).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]})),r=n[S-1],o=eE.forward;0===S&&(r=n[0],o=eE.forward),null==s||s.updateSchedule({recordId:M.id,startDate:J,endDate:J.add(M.duration,jwe),targetRecordId:r,direction:o})}z&&G&&("endDate"===q?null==s||s.updateSchedule({recordId:G.id,endDate:G.end}):null==s||s.updateSchedule({recordId:G.id,startDate:G.start})),(null==d?void 0:d.$workbenchRoot)&&(d.$workbenchRoot.style.cursor=""),y(""),U(!1),I(!1),W("endDate"),K(null),V(""),T(null),E(""),x(-1),A(-1),l(null),re(!1),X(null),ee(null),_(null)}}),[z,F,J,M,S,G,q]);return Zae((function(){v(c)}),[c]),{renderScheduleList:p,scheduleMap:h,activeScheduleId:m,startMovingPos:w,dragScheduleId:C,isDraggingSchedule:F,dragSchedule:M,highlightDate:J,dragSchedulePosIndex:D,resizeScheduleId:B,isResizingSchedule:z,resizeSchedule:G,isShowScheduleSnapshot:ne,handleMouseEnterSchedule:ae,handleMouseLeaveSchedule:ue,handleBeforeResizeSchedule:le,handleBeforeDragSchedule:ce,handleResizeOrDragSchedule:se,handleAfterResizeOrDragSchedule:de}}({dateRows:n,scheduleList:o,boxRef:c,boxInfo:s,snapshotRef:u,findBoxIndex:d,getBoxInfo:f,setBoxInfo:p}),h=v.renderScheduleList,g=v.scheduleMap,m=v.activeScheduleId,y=v.dragScheduleId,b=v.dragSchedulePosIndex,w=v.resizeSchedule,_=v.highlightDate,k=v.isShowScheduleSnapshot,C=v.handleMouseEnterSchedule,E=v.handleMouseLeaveSchedule,O=v.handleResizeOrDragSchedule,S=v.handleAfterResizeOrDragSchedule,x=v.handleBeforeResizeSchedule,j=v.handleBeforeDragSchedule;return Zae((function(){c.current&&(null==i||i.setScroller(c.current))}),[i,c]),React.createElement("div",{ref:c,className:"lakex-view-calendar-box",onMouseMove:O,onMouseUp:S},n.map((function(e,o){return React.createElement("div",{className:"lakex-view-calendar-box-row",key:"".concat(t.month(),"-").concat(o),"data-last":o===n.length-1},e.map((function(e,i){return React.createElement(KTe,{key:e.toDate().getTime(),cell:e,cellHeight:r,colIndex:i,rowIndex:o,date:t,dateRows:n,scheduleList:h,scheduleMap:g,activeScheduleId:m,dragScheduleId:y,dragSchedulePosIndex:b,resizeSchedule:w,highlightDate:_,onEnterSchedule:C,onLeaveSchedule:E,onBeforeResize:x,onBeforeDrag:j})})))})),k?React.createElement(JTe,{ref:u,boxNode:c.current,boxInfo:s,scheduleId:y}):null)},uNe=function(e){var t=e.date,n=e.calendarDate,r=e.scheduleList,o=e.rootRect,i=yre(zTe),u=i.defaultCellMinHeight,l=Object(a.useRef)(null),c=WI(Object(a.useState)(u),2),s=c[0],d=c[1],f=Object(a.useMemo)((function(){return i.getDateRows(n)}),[n]);return Zae((function(){if(l.current){var e=l.current.getBoundingClientRect().height,t=Math.floor(e/f.length)-1;d(t>u?t:u)}}),[o,f.length]),React.createElement("div",{ref:l,className:"lakex-viewer-calendar-content"},React.createElement(aNe,{date:t,dateRows:f,cellHeight:s,scheduleList:r}))},lNe=u.a.forwardRef((function(e,t){var n=e.viewRecords,r=e.viewConfig,o=yre(zTe),i=function(){var e=yre(lk),t=yre(doe),n=WI(Object(a.useState)(null),2),r=n[0],o=n[1],i=WI(Object(a.useState)((null==e?void 0:e.getValue("view.useWindowScroll"))||!1),2),u=i[0],l=i[1];return Zae((function(){o(t.getRenderBoundingClientRect())}),[]),Zae((function(){var n=null==e?void 0:e.onConfigurationChange((function(e){var n=e.key,r=e.value;"view.useWindowScroll"===n&&(o(t.getRenderBoundingClientRect()),l(r))}));return function(){null==n||n.destroy()}}),[]),Zae((function(){var e=fu((function(){u||o(t.getRenderBoundingClientRect())}),300);return window.addEventListener("resize",e),window.addEventListener("lakex_table_view_resize",e),function(){window.removeEventListener("resize",e),window.removeEventListener("lakex_table_view_resize",e)}}),[u]),{rootRect:r,useWindowScroll:u}}(),l=i.rootRect,c=i.useWindowScroll,s=o.getCurrentDate(r),d=Object(a.useMemo)((function(){return o.getCalendarDate(s)}),[s]);if(!l)return null;var f=o.getSchedules(n,r,d);return u.a.createElement("div",{ref:t,className:"lakex-viewer-calendar"},u.a.createElement("div",{className:"lakex-viewer-calendar-inner",style:{width:"100%",height:c?"auto":(null==l?void 0:l.height)?l.height-14:0}},u.a.createElement(LTe,{date:s,onCurrentDateChange:function(e){o.setCurrentDate(e)}}),u.a.createElement(UTe,null),u.a.createElement(uNe,{date:s,calendarDate:d,scheduleList:f,rootRect:l})))})),cNe=u.a.forwardRef((function(e,t){var n=Gwe({viewId:e.viewId});return u.a.createElement(lNe,{ref:t,fields:n.fields,viewRecords:n.viewRecords||new K_,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function sNe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dNe(e,t,n){return t=dk(t),sk(e,fNe()?Reflect.construct(t,n||[],dk(e).constructor):t.apply(e,n))}function fNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fNe=function(){return!!e})()}var pNe=function(e){function t(){var e;return _w(this,t),(e=dNe(this,t,arguments)).viewType=sE.CALENDAR,e.title=Lw("日历视图"),e.desc=Lw("轻松搞定日程安排"),e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sNe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sNe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"Calendar",size:16},e))},e.colorCls="yuque-color-purple-4",e.Component=cNe,e}return vk(t,e),Ew(t)}(jae),vNe=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"isLeapYear",value:function(e){return e<1600?e%4==0:e%4==0&&e%100!=0||e%400==0}},{key:"getDaysOfMonth",value:function(t,n){if(1582===t&&10===n)return 21;var r=n-1,o=e.DAYS_OF_MONTH[r];return 1===r&&e.isLeapYear(t)&&o++,o}},{key:"getDaysOfYear",value:function(t){return 1582===t?355:e.isLeapYear(t)?366:365}},{key:"getDaysInYear",value:function(t,n,r){for(var o=0,i=1;i<n;i++)o+=e.getDaysOfMonth(t,i);var a=r;if(1582===t&&10===n&&r>=15)if(r>=15)a-=10;else if(r>4)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));return o+=a}},{key:"getDaysBetween",value:function(t,n,r,o,i,a){var u,l,c;if(t==o)u=e.getDaysInYear(o,i,a)-e.getDaysInYear(t,n,r);else if(t>o){for(l=e.getDaysOfYear(o)-e.getDaysInYear(o,i,a),c=o+1;c<t;c++)l+=e.getDaysOfYear(c);u=-(l+=e.getDaysInYear(t,n,r))}else{for(l=e.getDaysOfYear(t)-e.getDaysInYear(t,n,r),c=t+1;c<o;c++)l+=e.getDaysOfYear(c);u=l+=e.getDaysInYear(o,i,a)}return u}}])}();vNe.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];var hNe=vNe,gNe=function(){return Ew((function e(t,n,r,o){_w(this,e),this._day=e._ymd(t),this._name=n,this._work=r,this._target=e._ymd(o)}),[{key:"getDay",value:function(){return this._day}},{key:"getName",value:function(){return this._name}},{key:"isWork",value:function(){return this._work}},{key:"getTarget",value:function(){return this._target}},{key:"toString",value:function(){return this._day+" "+this._name+(this._work?"调休":"")+" "+this._target}}],[{key:"_ymd",value:function(e){return e.indexOf("-")<0?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6):e}}])}(),mNe=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"_padding",value:function(e){return(e<10?"0":"")+e}},{key:"_findForward",value:function(t){var n=e._DATA_IN_USE.indexOf(t);if(n<0)return null;var r=e._DATA_IN_USE.substring(n),o=r.length%e._SIZE;for(o>0&&(r=r.substring(o));0!==r.indexOf(t)&&r.length>=e._SIZE;)r=r.substring(e._SIZE);return r}},{key:"_buildHolidayForward",value:function(t){var n=t.substring(0,8),r=e._NAMES_IN_USE[t.charCodeAt(8)-e._ZERO],o=t.charCodeAt(9)===e._ZERO,i=t.substring(10,18);return new gNe(n,r,o,i)}},{key:"_findHolidaysForward",value:function(t){var n=[],r=e._findForward(t);if(null==r)return n;for(;0===r.indexOf(t);)n.push(e._buildHolidayForward(r)),r=r.substr(e._SIZE);return n}},{key:"getHoliday",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(n=0==r||0==o?e._findHolidaysForward((t+"").replace(/-/g,"")):e._findHolidaysForward(t+e._padding(r)+e._padding(o))).length<1?null:n[0]}},{key:"_fixNames",value:function(t){t&&(e._NAMES_IN_USE=t)}},{key:"_fixData",value:function(t){if(t){for(var n=[];t.length>=e._SIZE;){var r=t.substring(0,e._SIZE),o=r.substring(0,8),i=e._TAG_REMOVE==r.substring(8,9),a=e.getHoliday(o);if(a){for(var u=-1,l=0,c=e._NAMES_IN_USE.length;l<c;l++)if(e._NAMES_IN_USE[l]===a.getName()){u=l;break}if(u>-1){var s=o+String.fromCharCode(u+e._ZERO)+(a.isWork()?"0":"1")+a.getTarget().replace(/-/g,"");e._DATA_IN_USE=e._DATA_IN_USE.replace(new RegExp(s,"g"),i?"":r)}}else i||n.push(r);t=t.substring(e._SIZE)}n.length>0&&(e._DATA_IN_USE+=n.join(""))}}},{key:"_fix",value:function(t,n){n?(e._fixNames(t),e._fixData(n)):e._fixData(t)}}])}();mNe.NAMES=["元旦节","春节","清明节","劳动节","端午节","中秋节","国庆节","国庆中秋","抗战胜利日"],mNe.DATA="200112290020020101200112300020020101200201010120020101200201020120020101200201030120020101200202091020020212200202101020020212200202121120020212200202131120020212200202141120020212200202151120020212200202161120020212200202171120020212200202181120020212200204273020020501200204283020020501200205013120020501200205023120020501200205033120020501200205043120020501200205053120020501200205063120020501200205073120020501200209286020021001200209296020021001200210016120021001200210026120021001200210036120021001200210046120021001200210056120021001200210066120021001200210076120021001200301010120030101200302011120030201200302021120030201200302031120030201200302041120030201200302051120030201200302061120030201200302071120030201200302081020030201200302091020030201200304263020030501200304273020030501200305013120030501200305023120030501200305033120030501200305043120030501200305053120030501200305063120030501200305073120030501200309276020031001200309286020031001200310016120031001200310026120031001200310036120031001200310046120031001200310056120031001200310066120031001200310076120031001200401010120040101200401171020040122200401181020040122200401221120040122200401231120040122200401241120040122200401251120040122200401261120040122200401271120040122200401281120040122200405013120040501200405023120040501200405033120040501200405043120040501200405053120040501200405063120040501200405073120040501200405083020040501200405093020040501200410016120041001200410026120041001200410036120041001200410046120041001200410056120041001200410066120041001200410076120041001200410096020041001200410106020041001200501010120050101200501020120050101200501030120050101200502051020050209200502061020050209200502091120050209200502101120050209200502111120050209200502121120050209200502131120050209200502141120050209200502151120050209200504303020050501200505013120050501200505023120050501200505033120050501200505043120050501200505053120050501200505063120050501200505073120050501200505083020050501200510016120051001200510026120051001200510036120051001200510046120051001200510056120051001200510066120051001200510076120051001200510086020051001200510096020051001200512310020060101200601010120060101200601020120060101200601030120060101200601281020060129200601291120060129200601301120060129200601311120060129200602011120060129200602021120060129200602031120060129200602041120060129200602051020060129200604293020060501200604303020060501200605013120060501200605023120060501200605033120060501200605043120060501200605053120060501200605063120060501200605073120060501200609306020061001200610016120061001200610026120061001200610036120061001200610046120061001200610056120061001200610066120061001200610076120061001200610086020061001200612300020070101200612310020070101200701010120070101200701020120070101200701030120070101200702171020070218200702181120070218200702191120070218200702201120070218200702211120070218200702221120070218200702231120070218200702241120070218200702251020070218200704283020070501200704293020070501200705013120070501200705023120070501200705033120070501200705043120070501200705053120070501200705063120070501200705073120070501200709296020071001200709306020071001200710016120071001200710026120071001200710036120071001200710046120071001200710056120071001200710066120071001200710076120071001200712290020080101200712300120080101200712310120080101200801010120080101200802021020080206200802031020080206200802061120080206200802071120080206200802081120080206200802091120080206200802101120080206200802111120080206200802121120080206200804042120080404200804052120080404200804062120080404200805013120080501200805023120080501200805033120080501200805043020080501200806074120080608200806084120080608200806094120080608200809135120080914200809145120080914200809155120080914200809276020081001200809286020081001200809296120081001200809306120081001200810016120081001200810026120081001200810036120081001200810046120081001200810056120081001200901010120090101200901020120090101200901030120090101200901040020090101200901241020090125200901251120090125200901261120090125200901271120090125200901281120090125200901291120090125200901301120090125200901311120090125200902011020090125200904042120090404200904052120090404200904062120090404200905013120090501200905023120090501200905033120090501200905284120090528200905294120090528200905304120090528200905314020090528200909276020091001200910016120091001200910026120091001200910036120091001200910046120091001200910055120091003200910065120091003200910075120091003200910085120091003200910105020091003201001010120100101201001020120100101201001030120100101201002131120100213201002141120100213201002151120100213201002161120100213201002171120100213201002181120100213201002191120100213201002201020100213201002211020100213201004032120100405201004042120100405201004052120100405201005013120100501201005023120100501201005033120100501201006124020100616201006134020100616201006144120100616201006154120100616201006164120100616201009195020100922201009225120100922201009235120100922201009245120100922201009255020100922201009266020101001201010016120101001201010026120101001201010036120101001201010046120101001201010056120101001201010066120101001201010076120101001201010096020101001201101010120110101201101020120110101201101030120110101201101301020110203201102021120110203201102031120110203201102041120110203201102051120110203201102061120110203201102071120110203201102081120110203201102121020110203201104022020110405201104032120110405201104042120110405201104052120110405201104303120110501201105013120110501201105023120110501201106044120110606201106054120110606201106064120110606201109105120110912201109115120110912201109125120110912201110016120111001201110026120111001201110036120111001201110046120111001201110056120111001201110066120111001201110076120111001201110086020111001201110096020111001201112310020120101201201010120120101201201020120120101201201030120120101201201211020120123201201221120120123201201231120120123201201241120120123201201251120120123201201261120120123201201271120120123201201281120120123201201291020120123201203312020120404201204012020120404201204022120120404201204032120120404201204042120120404201204283020120501201204293120120501201204303120120501201205013120120501201205023020120501201206224120120623201206234120120623201206244120120623201209295020120930201209305120120930201210016120121001201210026120121001201210036120121001201210046120121001201210056120121001201210066120121001201210076120121001201210086020121001201301010120130101201301020120130101201301030120130101201301050020130101201301060020130101201302091120130210201302101120130210201302111120130210201302121120130210201302131120130210201302141120130210201302151120130210201302161020130210201302171020130210201304042120130404201304052120130404201304062120130404201304273020130501201304283020130501201304293120130501201304303120130501201305013120130501201306084020130612201306094020130612201306104120130612201306114120130612201306124120130612201309195120130919201309205120130919201309215120130919201309225020130919201309296020131001201310016120131001201310026120131001201310036120131001201310046120131001201310056120131001201310066120131001201310076120131001201401010120140101201401261020140131201401311120140131201402011120140131201402021120140131201402031120140131201402041120140131201402051120140131201402061120140131201402081020140131201404052120140405201404062120140405201404072120140405201405013120140501201405023120140501201405033120140501201405043020140501201405314120140602201406014120140602201406024120140602201409065120140908201409075120140908201409085120140908201409286020141001201410016120141001201410026120141001201410036120141001201410046120141004201410056120141001201410066120141001201410076120141001201410116020141001201501010120150101201501020120150101201501030120150101201501040020150101201502151020150219201502181120150219201502191120150219201502201120150219201502211120150219201502221120150219201502231120150219201502241120150219201502281020150219201504042120150405201504052120150405201504062120150405201505013120150501201505023120150501201505033120150501201506204120150620201506214120150620201506224120150620201509038120150903201509048120150903201509058120150903201509068020150903201509265120150927201509275120150927201510016120151001201510026120151001201510036120151001201510046120151004201510056120151001201510066120151001201510076120151001201510106020151001201601010120160101201601020120160101201601030120160101201602061020160208201602071120160208201602081120160208201602091120160208201602101120160208201602111120160208201602121120160208201602131120160208201602141020160208201604022120160404201604032120160404201604042120160404201604303120160501201605013120160501201605023120160501201606094120160609201606104120160609201606114120160609201606124020160609201609155120160915201609165120160915201609175120160915201609185020160915201610016120161001201610026120161001201610036120161001201610046120161001201610056120161001201610066120161001201610076120161001201610086020161001201610096020161001201612310120170101201701010120170101201701020120170101201701221020170128201701271120170128201701281120170128201701291120170128201701301120170128201701311120170128201702011120170128201702021120170128201702041020170128201704012020170404201704022120170404201704032120170404201704042120170404201704293120170501201704303120170501201705013120170501201705274020170530201705284120170530201705294120170530201705304120170530201709306020171001201710016120171001201710026120171001201710036120171001201710045120171004201710056120171001201710066120171001201710076120171001201710086120171001201712300120180101201712310120180101201801010120180101201802111020180216201802151120180216201802161120180216201802171120180216201802181120180216201802191120180216201802201120180216201802211120180216201802241020180216201804052120180405201804062120180405201804072120180405201804082020180405201804283020180501201804293120180501201804303120180501201805013120180501201806164120180618201806174120180618201806184120180618201809225120180924201809235120180924201809245120180924201809296020181001201809306020181001201810016120181001201810026120181001201810036120181001201810046120181001201810056120181001201810066120181001201810076120181001201812290020190101201812300120190101201812310120190101201901010120190101201902021020190205201902031020190205201902041120190205201902051120190205201902061120190205201902071120190205201902081120190205201902091120190205201902101120190205201904052120190405201904062120190405201904072120190405201904283020190501201905013120190501201905023120190501201905033120190501201905043120190501201905053020190501201906074120190607201906084120190607201906094120190607201909135120190913201909145120190913201909155120190913201909296020191001201910016120191001201910026120191001201910036120191001201910046120191001201910056120191001201910066120191001201910076120191001201910126020191001202001010120200101202001191020200125202001241120200125202001251120200125202001261120200125202001271120200125202001281120200125202001291120200125202001301120200125202001311120200125202002011120200125202002021120200125202004042120200404202004052120200404202004062120200404202004263020200501202005013120200501202005023120200501202005033120200501202005043120200501202005053120200501202005093020200501202006254120200625202006264120200625202006274120200625202006284020200625202009277020201001202010017120201001202010026120201001202010036120201001202010046120201001202010056120201001202010066120201001202010076120201001202010086120201001202010106020201001202101010120210101202101020120210101202101030120210101202102071020210212202102111120210212202102121120210212202102131120210212202102141120210212202102151120210212202102161120210212202102171120210212202102201020210212202104032120210404202104042120210404202104052120210404202104253020210501202105013120210501202105023120210501202105033120210501202105043120210501202105053120210501202105083020210501202106124120210614202106134120210614202106144120210614202109185020210921202109195120210921202109205120210921202109215120210921202109266020211001202110016120211001202110026120211001202110036120211001202110046120211001202110056120211001202110066120211001202110076120211001202110096020211001202201010120220101202201020120220101202201030120220101202201291020220201202201301020220201202201311120220201202202011120220201202202021120220201202202031120220201202202041120220201202202051120220201202202061120220201202204022020220405202204032120220405202204042120220405202204052120220405202204243020220501202204303120220501202205013120220501202205023120220501202205033120220501202205043120220501202205073020220501202206034120220603202206044120220603202206054120220603202209105120220910202209115120220910202209125120220910202210016120221001202210026120221001202210036120221001202210046120221001202210056120221001202210066120221001202210076120221001202210086020221001202210096020221001202212310120230101202301010120230101202301020120230101202301211120230122202301221120230122202301231120230122202301241120230122202301251120230122202301261120230122202301271120230122202301281020230122202301291020230122202304052120230405202304233020230501202304293120230501202304303120230501202305013120230501202305023120230501202305033120230501202305063020230501202306224120230622202306234120230622202306244120230622202306254020230622202309295120230929202309306120231001202310016120231001202310026120231001202310036120231001202310046120231001202310056120231001202310066120231001202310076020231001202310086020231001202312300120240101202312310120240101202401010120240101202402041020240210202402101120240210202402111120240210202402121120240210202402131120240210202402141120240210202402151120240210202402161120240210202402171120240210202402181020240210202404042120240404202404052120240404202404062120240404202404072020240404202404283020240501202405013120240501202405023120240501202405033120240501202405043120240501202405053120240501202405113020240501202406084120240610202406094120240610202406104120240610202409145020240917202409155120240917202409165120240917202409175120240917202409296020241001202410016120241001202410026120241001202410036120241001202410046120241001202410056120241001202410066120241001202410076120241001202410126020241001",mNe._SIZE=18,mNe._ZERO="0".charCodeAt(0),mNe._TAG_REMOVE="~",mNe._NAMES_IN_USE=mNe.NAMES,mNe._DATA_IN_USE=mNe.DATA;var yNe=mNe,bNe=function(){function e(t,n,r,o,i,a){if(_w(this,e),1582===t&&10===n&&r>4&&r<15)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));if(n<1||n>12)throw new Error("wrong month ".concat(n));if(r<1||r>31)throw new Error("wrong day ".concat(r));if(o<0||o>23)throw new Error("wrong hour ".concat(o));if(i<0||i>59)throw new Error("wrong minute ".concat(i));if(a<0||a>59)throw new Error("wrong second ".concat(a));this._year=t,this._month=n,this._day=r,this._hour=o,this._minute=i,this._second=a}return Ew(e,[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getDay",value:function(){return this._day}},{key:"getWeek",value:function(){return(Math.floor(this.getJulianDay()+.5)+7000001)%7}},{key:"toYmd",value:function(){for(var e=this._year+"";e.length<4;)e="0"+e;return[e,(this._month<10?"0":"")+this._month,(this._day<10?"0":"")+this._day].join("-")}},{key:"toString",value:function(){return this.toYmd()}},{key:"nextDay",value:function(t){var n=this._year,r=this._month,o=this._day;if(1582===n&&10===r&&o>4&&(o-=10),t>0){o+=t;for(var i=hNe.getDaysOfMonth(n,r);o>i;)o-=i,++r>12&&(r=1,n++),i=hNe.getDaysOfMonth(n,r)}else if(t<0){for(;o+t<=0;)--r<1&&(r=12,n--),o+=hNe.getDaysOfMonth(n,r);o+=t}return 1582===n&&10===r&&o>4&&(o+=10),e.fromYmdHms(n,r,o,this._hour,this._minute,this._second)}},{key:"next",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var n=e.fromYmdHms(this._year,this._month,this._day,this._hour,this._minute,this._second);if(0!==t)for(var r=Math.abs(t),o=t<1?-1:1;r>0;){n=n.next(o);var i=!0,a=yNe.getHoliday(n.getYear(),n.getMonth(),n.getDay());if(a)i=a.isWork();else{var u=n.getWeek();0!==u&&6!==u||(i=!1)}i&&(r-=1)}return n}return this.nextDay(t)}},{key:"getLunar",value:function(){return DNe.fromSolar(this)}},{key:"getJulianDay",value:function(){var e=this._year,t=this._month,n=this._day+((this._second/60+this._minute)/60+this._hour)/24,r=0,o=!1;return 372*e+31*t+Math.floor(n)>=588829&&(o=!0),t<=2&&(t+=12,e--),o&&(r=2-(r=Math.floor(e/100))+Math.floor(r/4)),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5}},{key:"subtract",value:function(e){return hNe.getDaysBetween(e.getYear(),e.getMonth(),e.getDay(),this._year,this._month,this._day)}}],[{key:"fromYmd",value:function(t,n,r){return e.fromYmdHms(t,n,r,0,0,0)}},{key:"fromYmdHms",value:function(t,n,r,o,i,a){return new e(t,n,r,o,i,a)}},{key:"fromDate",value:function(t){return e.fromYmdHms(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}},{key:"fromJulianDay",value:function(t){var n,r=Math.floor(t+.5),o=t+.5-r;r>=2299161&&(r+=1+(n=Math.floor((r-1867216.25)/36524.25))-Math.floor(n/4)),r+=1524;var i=Math.floor((r-122.1)/365.25);r-=Math.floor(365.25*i);var a=Math.floor(r/30.601),u=r-=Math.floor(30.601*a);a>13?(a-=13,i-=4715):(a-=1,i-=4716),o*=24;var l=Math.floor(o);o-=l,o*=60;var c=Math.floor(o);o-=c,o*=60;var s=Math.round(o);return s>59&&(s-=60,c++),c>59&&(c-=60,l++),l>23&&(l-=24,u+=1),e.fromYmdHms(i,a,u,l,c,s)}}])}();bNe.J2000=2451545;var wNe=bNe,_Ne=Ew((function e(){_w(this,e)}));_Ne.BASE_MONTH_ZHI_INDEX=2,_Ne.JIE_QI=["{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}"],_Ne.JIE_QI_IN_USE=["DA_XUE","{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}","DONG_ZHI","XIAO_HAN","DA_HAN","LI_CHUN","YU_SHUI","JING_ZHE"],_Ne.NUMBER=["{n.zero}","{n.one}","{n.two}","{n.three}","{n.four}","{n.five}","{n.six}","{n.seven}","{n.eight}","{n.nine}","{n.ten}","{n.eleven}","{n.twelve}"],_Ne.MONTH=["","{m.one}","{m.two}","{m.three}","{m.four}","{m.five}","{m.six}","{m.seven}","{m.eight}","{m.nine}","{m.ten}","{m.eleven}","{m.twelve}"],_Ne.DAY=["","{d.one}","{d.two}","{d.three}","{d.four}","{d.five}","{d.six}","{d.seven}","{d.eight}","{d.nine}","{d.ten}","{d.eleven}","{d.twelve}","{d.thirteen}","{d.fourteen}","{d.fifteen}","{d.sixteen}","{d.seventeen}","{d.eighteen}","{d.nighteen}","{d.twenty}","{d.twentyOne}","{d.twentyTwo}","{d.twentyThree}","{d.twentyFour}","{d.twentyFive}","{d.twentySix}","{d.twentySeven}","{d.twentyEight}","{d.twentyNine}","{d.thirty}"],_Ne.FESTIVAL={"1-1":"{jr.chunJie}","1-15":"{jr.yuanXiao}","2-2":"{jr.longTou}","5-5":"{jr.duanWu}","7-7":"{jr.qiXi}","8-15":"{jr.zhongQiu}","9-9":"{jr.chongYang}","12-8":"{jr.laBa}"};var kNe=function(){return Ew((function e(t,n,r,o,i){_w(this,e),this._year=t,this._month=n,this._dayCount=r,this._firstJulianDay=o,this._index=i}),[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getIndex",value:function(){return this._index}},{key:"getDayCount",value:function(){return this._dayCount}},{key:"getFirstJulianDay",value:function(){return this._firstJulianDay}}],[{key:"fromYm",value:function(e,t){return SNe.fromYear(e).getMonth(t)}}])}(),CNe=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"decode",value:function(e){var t="0000000000",n=t+t;return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/J/g,"00")).replace(/I/g,"000")).replace(/H/g,"0000")).replace(/G/g,"00000")).replace(/t/g,"02")).replace(/s/g,"002")).replace(/r/g,"0002")).replace(/q/g,"00002")).replace(/p/g,"000002")).replace(/o/g,"0000002")).replace(/n/g,"00000002")).replace(/m/g,"000000002")).replace(/l/g,"0000000002")).replace(/k/g,"01")).replace(/j/g,"0101")).replace(/i/g,"001")).replace(/h/g,"001001")).replace(/g/g,"0001")).replace(/f/g,"00001")).replace(/e/g,"000001")).replace(/d/g,"0000001")).replace(/c/g,"00000001")).replace(/b/g,"000000001")).replace(/a/g,"0000000001")).replace(/A/g,n+n+n)).replace(/B/g,n+n+t)).replace(/C/g,n+n)).replace(/D/g,n+t)).replace(/E/g,n)).replace(/F/g,t)}},{key:"nutationLon2",value:function(t){for(var n=-1.742*t,r=t*t,o=0,i=0,a=e.NUT_B.length;i<a;i+=5)o+=(e.NUT_B[i+3]+n)*Math.sin(e.NUT_B[i]+e.NUT_B[i+1]*t+e.NUT_B[i+2]*r),n=0;return o/100/e.SECOND_PER_RAD}},{key:"eLon",value:function(t,n){t/=10;for(var r,o,i,a,u,l=0,c=1,s=e.XL0[2]-e.XL0[1],d=0;d<6;d++,c*=t)if(r=Math.floor(e.XL0[1+d]),0!=(u=(o=Math.floor(e.XL0[2+d]))-r)){n<0?i=o:(i=Math.floor(3*n*u/s+.5+r),0!=d&&(i+=3),i>o&&(i=o)),a=0;for(var f=r;f<i;f+=3)a+=e.XL0[f]*Math.cos(e.XL0[f+1]+t*e.XL0[f+2]);l+=a*c}l/=e.XL0[0];var p=t*t;return l+=(-.0728-2.7702*t-1.1019*p-.0996*p*t)/e.SECOND_PER_RAD}},{key:"mLon",value:function(t,n){var r,o,i=e.XL1,a=i[0].length,u=1,l=0,c=t*t,s=c*t,d=s*t,f=d*t,p=t-10;l+=(3.81034409+8399.684730072*t-3319e-8*c+3.11e-8*s-2.033e-10*d)*e.SECOND_PER_RAD,l+=5028.792262*t+1.1124406*c+7699e-8*s-23479e-9*d-1.78e-8*f,p>0&&(l+=1.43*p-.866+.054*p*p),c/=1e4,s/=1e8,d/=1e8,(n*=6)<0&&(n=a);for(var v=0,h=i.length;v<h;v++,u*=t){var g=i[v],m=g.length,y=Math.floor(n*m/a+.5);for(v>0&&(y+=6),y>=m&&(y=m),r=0,o=0;r<y;r+=6)o+=g[r]*Math.cos(g[r+1]+t*g[r+2]+c*g[r+3]+s*g[r+4]+d*g[r+5]);l+=o*u}return l/=e.SECOND_PER_RAD}},{key:"gxcSunLon",value:function(t){var n=t*t,r=628.301955*t-.043126-2732e-9*n;return-20.49552*(1+(.016708634-42037e-9*t-1.267e-7*n)*Math.cos(r))/e.SECOND_PER_RAD}},{key:"ev",value:function(e){var t=628.307585*e;return 628.332+21*Math.sin(1.527+t)+.44*Math.sin(1.48+2*t)+.129*Math.sin(5.82+t)*e+55e-5*Math.sin(4.21+t)*e*e}},{key:"saLon",value:function(t,n){return e.eLon(t,n)+e.nutationLon2(t)+e.gxcSunLon(t)+Math.PI}},{key:"dtExt",value:function(e,t){var n=(e-1820)/100;return t*n*n-20}},{key:"dtCalc",value:function(t){var n,r=e.DT_AT.length,o=e.DT_AT[r-2],i=e.DT_AT[r-1];if(t>=o){return t>o+100?e.dtExt(t,31):e.dtExt(t,31)-(e.dtExt(o,31)-i)*(o+100-t)/100}for(n=0;n<r&&!(t<e.DT_AT[n+5]);n+=5);var a=(t-e.DT_AT[n])/(e.DT_AT[n+5]-e.DT_AT[n])*10,u=a*a,l=u*a;return e.DT_AT[n+1]+e.DT_AT[n+2]*a+e.DT_AT[n+3]*u+e.DT_AT[n+4]*l}},{key:"dtT",value:function(t){return e.dtCalc(t/365.2425+2e3)/e.SECOND_PER_DAY}},{key:"mv",value:function(e){var t=8399.71-914*Math.sin(.7848+8328.691425*e+1523e-7*e*e);return t-=179*Math.sin(2.543+15542.7543*e)+160*Math.sin(.1874+7214.0629*e)+62*Math.sin(3.14+16657.3828*e)+34*Math.sin(4.827+16866.9323*e)+22*Math.sin(4.9+23871.4457*e)+12*Math.sin(2.59+14914.4523*e)+7*Math.sin(.23+6585.7609*e)+5*Math.sin(.9+25195.624*e)+5*Math.sin(2.32-7700.3895*e)+5*Math.sin(3.88+8956.9934*e)+5*Math.sin(.49+7771.3771*e)}},{key:"saLonT",value:function(t){var n,r=628.3319653318;return n=(t-1.75347-Math.PI)/r,r=e.ev(n),n+=(t-e.saLon(n,10))/r,r=e.ev(n),n+=(t-e.saLon(n,-1))/r}},{key:"msaLon",value:function(t,n,r){return e.mLon(t,n)+-34e-7-(e.eLon(t,r)+e.gxcSunLon(t)+Math.PI)}},{key:"msaLonT",value:function(t){var n,r=7771.37714500204;return n=(t+1.08472)/r,n+=(t-e.msaLon(n,3,3))/r,r=e.mv(n)-e.ev(n),n+=(t-e.msaLon(n,20,10))/r,n+=(t-e.msaLon(n,-1,60))/r}},{key:"saLonT2",value:function(t){var n=628.3319653318,r=(t-1.75347-Math.PI)/n;return r-=(5297e-9*r*r+.0334166*Math.cos(4.669257+628.307585*r)+2061e-7*Math.cos(2.67823+628.307585*r)*r)/n,r+=(t-e.eLon(r,8)-Math.PI+(20.5+17.2*Math.sin(2.1824-33.75705*r))/e.SECOND_PER_RAD)/n}},{key:"msaLonT2",value:function(t){var n,r=7771.37714500204,o=(n=(t+1.08472)/r)*n;return o=(n-=(-3309e-8*o+.10976*Math.cos(.784758+8328.6914246*n+152292e-9*o)+.02224*Math.cos(.1874+7214.0628654*n-21848e-8*o)-.03342*Math.cos(4.669257+628.307585*n))/r)*n,n+=(t-(e.mLon(n,20)-(4.8950632+628.3319653318*n+5297e-9*o+.0334166*Math.cos(4.669257+628.307585*n)+2061e-7*Math.cos(2.67823+628.307585*n)*n+349e-6*Math.cos(4.6261+1256.61517*n)-20.5/e.SECOND_PER_RAD)))/(r=7771.38-914*Math.sin(.7848+8328.691425*n+1523e-7*o)-179*Math.sin(2.543+15542.7543*n)-160*Math.sin(.1874+7214.0629*n))}},{key:"qiHigh",value:function(t){var n=36525*e.saLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1200||r>e.SECOND_PER_DAY-1200)&&(n=36525*e.saLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"shuoHigh",value:function(t){var n=36525*e.msaLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1800||r>e.SECOND_PER_DAY-1800)&&(n=36525*e.msaLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"qiLow",value:function(t){var n=628.3319653318,r=(t-4.895062166)/n;return r-=(53*r*r+334116*Math.cos(4.67+628.307585*r)+2061*Math.cos(2.678+628.3076*r)*r)/n/1e7,36525*(r-=((48950621.66+6283319653.318*r+53*r*r+334166*Math.cos(4.669257+628.307585*r)+3489*Math.cos(4.6261+1256.61517*r)+2060.6*Math.cos(2.67823+628.307585*r)*r-994-834*Math.sin(2.1824-33.75705*r))/1e7-t)/628.332+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"shuoLow",value:function(t){var n=7771.37714500204,r=(t+1.08472)/n;return 36525*(r-=(-331e-7*r*r+.10976*Math.cos(.785+8328.6914*r)+.02224*Math.cos(.187+7214.0629*r)-.03342*Math.cos(4.669+628.3076*r))/n+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"calcShuo",value:function(t){var n,r=e.SHUO_KB.length,o=0,i=14;t+=wNe.J2000;var a=e.SHUO_KB[0]-i,u=e.SHUO_KB[r-1]-i,l=2436935;if(t<a||t>=l)o=Math.floor(e.shuoHigh(Math.floor((t+i-2451551)/29.5306)*Math.PI*2)+.5);else if(t>=a&&t<u){for(n=0;n<r&&!(t+i<e.SHUO_KB[n+2]);n+=2);o=e.SHUO_KB[n]+e.SHUO_KB[n+1]*Math.floor((t+i-e.SHUO_KB[n])/e.SHUO_KB[n+1]),1683460==(o=Math.floor(o+.5))&&o++,o-=wNe.J2000}else if(t>=u&&t<l){o=Math.floor(e.shuoLow(Math.floor((t+i-2451551)/29.5306)*Math.PI*2)+.5);var c=Math.floor((t-u)/29.5306),s=e.SB.substring(c,c+1);"1"==s?o+=1:"2"==s&&(o-=1)}return o}},{key:"calcQi",value:function(t){var n,r=e.QI_KB.length,o=0;t+=wNe.J2000;var i=e.QI_KB[0]-7,a=e.QI_KB[r-1]-7,u=2436935;if(t<i||t>=u)o=Math.floor(e.qiHigh(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);else if(t>=i&&t<a){for(n=0;n<r&&!(t+7<e.QI_KB[n+2]);n+=2);o=e.QI_KB[n]+e.QI_KB[n+1]*Math.floor((t+7-e.QI_KB[n])/e.QI_KB[n+1]),1683460==(o=Math.floor(o+.5))&&o++,o-=wNe.J2000}else if(t>=a&&t<u){o=Math.floor(e.qiLow(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);var l=Math.floor((t-a)/365.2422*24),c=e.QB.substring(l,l+1);"1"==c?o+=1:"2"==c&&(o-=1)}return o}},{key:"qiAccurate",value:function(t){var n=36525*e.saLonT(t);return n-e.dtT(n)+e.ONE_THIRD}},{key:"qiAccurate2",value:function(t){var n=Math.PI/12,r=Math.floor((t+293)/365.2422*24)*n,o=e.qiAccurate(r);return o-t>5?e.qiAccurate(r-n):o-t<-5?e.qiAccurate(r+n):o}}])}();CNe.PI_2=2*Math.PI,CNe.ONE_THIRD=1/3,CNe.SECOND_PER_DAY=86400,CNe.SECOND_PER_RAD=648e3/Math.PI,CNe.NUT_B=[2.1824,-33.75705,36e-6,-1720,920,3.5069,1256.66393,11e-6,-132,57,1.3375,16799.4182,-51e-6,-23,10,4.3649,-67.5141,72e-6,21,-9,.04,-628.302,0,-14,0,2.36,8328.691,0,7,0,3.46,1884.966,0,-5,2,5.44,16833.175,0,-4,2,3.69,25128.11,0,-3,0,3.55,628.362,0,2,0],CNe.DT_AT=[-4e3,108371.7,-13036.8,392,0,-500,17201,-627.82,16.17,-.3413,-150,12200.6,-346.41,5.403,-.1593,150,9113.8,-328.13,-1.647,.0377,500,5707.5,-391.41,.915,.3145,900,2203.4,-283.45,13.034,-.1778,1300,490.1,-57.35,2.085,-.0072,1600,120,-9.81,-1.532,.1403,1700,10.2,-.91,.51,-.037,1800,13.4,-.72,.202,-.0193,1830,7.8,-1.81,.416,-.0247,1860,8.3,-.13,-.406,.0292,1880,-5.4,.32,-.183,.0173,1900,-2.3,2.06,.169,-.0135,1920,21.2,1.69,-.304,.0167,1940,24.2,1.22,-.064,.0031,1960,33.2,.51,.231,-.0109,1980,51,1.29,-.026,.0032,2e3,63.87,.1,0,0,2005,64.7,.21,0,0,2012,66.8,.22,0,0,2018,69,.36,0,0,2028,72.6],CNe.XL0=[1e10,20,578,920,1100,1124,1136,1148,1217,1226,1229,1229,1229,1229,1937,2363,2618,2633,2660,2666,17534704567,0,0,334165646,4.669256804,6283.075849991,3489428,4.6261024,12566.1517,349706,2.744118,5753.384885,341757,2.828866,3.523118,313590,3.62767,77713.771468,267622,4.418084,7860.419392,234269,6.135162,3930.209696,132429,.742464,11506.76977,127317,2.037097,529.690965,119917,1.109629,1577.343542,99025,5.23268,5884.92685,90186,2.04505,26.29832,85722,3.50849,398.149,77979,1.17883,5223.69392,75314,2.53339,5507.55324,50526,4.58293,18849.22755,49238,4.20507,775.52261,35666,2.91954,.06731,31709,5.84902,11790.62909,28413,1.89869,796.29801,27104,.31489,10977.0788,24281,.34481,5486.77784,20616,4.80647,2544.31442,20539,1.86948,5573.1428,20226,2.45768,6069.77675,15552,.83306,213.2991,13221,3.41118,2942.46342,12618,1.08303,20.7754,11513,.64545,.98032,10285,.636,4694.00295,10190,.97569,15720.83878,10172,4.2668,7.11355,9921,6.2099,2146.1654,9761,.681,155.4204,8580,5.9832,161000.6857,8513,1.2987,6275.9623,8471,3.6708,71430.6956,7964,1.8079,17260.1547,7876,3.037,12036.4607,7465,1.7551,5088.6288,7387,3.5032,3154.6871,7355,4.6793,801.8209,6963,.833,9437.7629,6245,3.9776,8827.3903,6115,1.8184,7084.8968,5696,2.7843,6286.599,5612,4.3869,14143.4952,5558,3.4701,6279.5527,5199,.1891,12139.5535,5161,1.3328,1748.0164,5115,.2831,5856.4777,4900,.4874,1194.447,4104,5.3682,8429.2413,4094,2.3985,19651.0485,3920,6.1683,10447.3878,3677,6.0413,10213.2855,3660,2.5696,1059.3819,3595,1.7088,2352.8662,3557,1.776,6812.7668,3329,.5931,17789.8456,3041,.4429,83996.8473,3005,2.7398,1349.8674,2535,3.1647,4690.4798,2474,.2148,3.5904,2366,.4847,8031.0923,2357,2.0653,3340.6124,2282,5.222,4705.7323,2189,5.5559,553.5694,2142,1.4256,16730.4637,2109,4.1483,951.7184,2030,.3713,283.8593,1992,5.2221,12168.0027,1986,5.7747,6309.3742,1912,3.8222,23581.2582,1889,5.3863,149854.4001,1790,2.2149,13367.9726,1748,4.5605,135.0651,1622,5.9884,11769.8537,1508,4.1957,6256.7775,1442,4.1932,242.7286,1435,3.7236,38.0277,1397,4.4014,6681.2249,1362,1.8893,7632.9433,1250,1.1305,5.5229,1205,2.6223,955.5997,1200,1.0035,632.7837,1129,.1774,4164.312,1083,.3273,103.0928,1052,.9387,11926.2544,1050,5.3591,1592.596,1033,6.1998,6438.4962,1001,6.0291,5746.2713,980,.999,11371.705,980,5.244,27511.468,938,2.624,5760.498,923,.483,522.577,922,4.571,4292.331,905,5.337,6386.169,862,4.165,7058.598,841,3.299,7234.794,836,4.539,25132.303,813,6.112,4732.031,812,6.271,426.598,801,5.821,28.449,787,.996,5643.179,776,2.957,23013.54,769,3.121,7238.676,758,3.974,11499.656,735,4.386,316.392,731,.607,11513.883,719,3.998,74.782,706,.323,263.084,676,5.911,90955.552,663,3.665,17298.182,653,5.791,18073.705,630,4.717,6836.645,615,1.458,233141.314,612,1.075,19804.827,596,3.321,6283.009,596,2.876,6283.143,555,2.452,12352.853,541,5.392,419.485,531,.382,31441.678,519,4.065,6208.294,513,2.361,10973.556,494,5.737,9917.697,450,3.272,11015.106,449,3.653,206.186,447,2.064,7079.374,435,4.423,5216.58,421,1.906,245.832,413,.921,3738.761,402,.84,20.355,387,1.826,11856.219,379,2.344,3.881,374,2.954,3128.389,370,5.031,536.805,365,1.018,16200.773,365,1.083,88860.057,352,5.978,3894.182,352,2.056,244287.6,351,3.713,6290.189,340,1.106,14712.317,339,.978,8635.942,339,3.202,5120.601,333,.837,6496.375,325,3.479,6133.513,316,5.089,21228.392,316,1.328,10873.986,309,3.646,10.637,303,1.802,35371.887,296,3.397,9225.539,288,6.026,154717.61,281,2.585,14314.168,262,3.856,266.607,262,2.579,22483.849,257,1.561,23543.231,255,3.949,1990.745,251,3.744,10575.407,240,1.161,10984.192,238,.106,7.046,236,4.272,6040.347,234,3.577,10969.965,211,3.714,65147.62,210,.754,13521.751,207,4.228,5650.292,202,.814,170.673,201,4.629,6037.244,200,.381,6172.87,199,3.933,6206.81,199,5.197,6262.3,197,1.046,18209.33,195,1.07,5230.807,195,4.869,36.028,194,4.313,6244.943,192,1.229,709.933,192,5.595,6282.096,192,.602,6284.056,189,3.744,23.878,188,1.904,15.252,188,.867,22003.915,182,3.681,15110.466,181,.491,1.484,179,3.222,39302.097,179,1.259,12559.038,62833196674749,0,0,20605886,2.67823456,6283.07584999,430343,2.635127,12566.1517,42526,1.59047,3.52312,11926,5.79557,26.29832,10898,2.96618,1577.34354,9348,2.5921,18849.2275,7212,1.1385,529.691,6777,1.8747,398.149,6733,4.4092,5507.5532,5903,2.888,5223.6939,5598,2.1747,155.4204,4541,.398,796.298,3637,.4662,775.5226,2896,2.6471,7.1135,2084,5.3414,.9803,1910,1.8463,5486.7778,1851,4.9686,213.2991,1729,2.9912,6275.9623,1623,.0322,2544.3144,1583,1.4305,2146.1654,1462,1.2053,10977.0788,1246,2.8343,1748.0164,1188,3.258,5088.6288,1181,5.2738,1194.447,1151,2.075,4694.003,1064,.7661,553.5694,997,1.303,6286.599,972,4.239,1349.867,945,2.7,242.729,858,5.645,951.718,758,5.301,2352.866,639,2.65,9437.763,610,4.666,4690.48,583,1.766,1059.382,531,.909,3154.687,522,5.661,71430.696,520,1.854,801.821,504,1.425,6438.496,433,.241,6812.767,426,.774,10447.388,413,5.24,7084.897,374,2.001,8031.092,356,2.429,14143.495,350,4.8,6279.553,337,.888,12036.461,337,3.862,1592.596,325,3.4,7632.943,322,.616,8429.241,318,3.188,4705.732,297,6.07,4292.331,295,1.431,5746.271,290,2.325,20.355,275,.935,5760.498,270,4.804,7234.794,253,6.223,6836.645,228,5.003,17789.846,225,5.672,11499.656,215,5.202,11513.883,208,3.955,10213.286,208,2.268,522.577,206,2.224,5856.478,206,2.55,25132.303,203,.91,6256.778,189,.532,3340.612,188,4.735,83996.847,179,1.474,4164.312,178,3.025,5.523,177,3.026,5753.385,159,4.637,3.286,157,6.124,5216.58,155,3.077,6681.225,154,4.2,13367.973,143,1.191,3894.182,138,3.093,135.065,136,4.245,426.598,134,5.765,6040.347,128,3.085,5643.179,127,2.092,6290.189,125,3.077,11926.254,125,3.445,536.805,114,3.244,12168.003,112,2.318,16730.464,111,3.901,11506.77,111,5.32,23.878,105,3.75,7860.419,103,2.447,1990.745,96,.82,3.88,96,4.08,6127.66,91,5.42,206.19,91,.42,7079.37,88,5.17,11790.63,81,.34,9917.7,80,3.89,10973.56,78,2.4,1589.07,78,2.58,11371.7,77,3.98,955.6,77,3.36,36.03,76,1.3,103.09,75,5.18,10969.97,75,4.96,6496.37,73,5.21,38.03,72,2.65,6309.37,70,5.61,3738.76,69,2.6,3496.03,69,.39,15.25,69,2.78,20.78,65,1.13,7058.6,64,4.28,28.45,61,5.63,10984.19,60,.73,419.48,60,5.28,10575.41,58,5.55,17298.18,58,3.19,4732.03,5291887,0,0,871984,1.072097,6283.07585,30913,.86729,12566.1517,2734,.053,3.5231,1633,5.1883,26.2983,1575,3.6846,155.4204,954,.757,18849.228,894,2.057,77713.771,695,.827,775.523,506,4.663,1577.344,406,1.031,7.114,381,3.441,5573.143,346,5.141,796.298,317,6.053,5507.553,302,1.192,242.729,289,6.117,529.691,271,.306,398.149,254,2.28,553.569,237,4.381,5223.694,208,3.754,.98,168,.902,951.718,153,5.759,1349.867,145,4.364,1748.016,134,3.721,1194.447,125,2.948,6438.496,122,2.973,2146.165,110,1.271,161000.686,104,.604,3154.687,100,5.986,6286.599,92,4.8,5088.63,89,5.23,7084.9,83,3.31,213.3,76,3.42,5486.78,71,6.19,4690.48,68,3.43,4694,65,1.6,2544.31,64,1.98,801.82,61,2.48,10977.08,50,1.44,6836.65,49,2.34,1592.6,46,1.31,4292.33,46,3.81,149854.4,43,.04,7234.79,40,4.94,7632.94,39,1.57,71430.7,38,3.17,6309.37,35,.99,6040.35,35,.67,1059.38,31,3.18,2352.87,31,3.55,8031.09,30,1.92,10447.39,30,2.52,6127.66,28,4.42,9437.76,28,2.71,3894.18,27,.67,25132.3,26,5.27,6812.77,25,.55,6279.55,23,1.38,4705.73,22,.64,6256.78,20,6.07,640.88,28923,5.84384,6283.07585,3496,0,0,1682,5.4877,12566.1517,296,5.196,155.42,129,4.722,3.523,71,5.3,18849.23,64,5.97,242.73,40,3.79,553.57,11408,3.14159,0,772,4.134,6283.076,77,3.84,12566.15,42,.42,155.42,88,3.14,0,17,2.77,6283.08,5,2.01,155.42,3,2.21,12566.15,27962,3.1987,84334.66158,10164,5.42249,5507.55324,8045,3.8801,5223.6939,4381,3.7044,2352.8662,3193,4.0003,1577.3435,2272,3.9847,1047.7473,1814,4.9837,6283.0758,1639,3.5646,5856.4777,1444,3.7028,9437.7629,1430,3.4112,10213.2855,1125,4.8282,14143.4952,1090,2.0857,6812.7668,1037,4.0566,71092.8814,971,3.473,4694.003,915,1.142,6620.89,878,4.44,5753.385,837,4.993,7084.897,770,5.554,167621.576,719,3.602,529.691,692,4.326,6275.962,558,4.41,7860.419,529,2.484,4705.732,521,6.25,18073.705,903,3.897,5507.553,618,1.73,5223.694,380,5.244,2352.866,166,1.627,84334.662,10001398880,0,0,167069963,3.098463508,6283.075849991,1395602,3.0552461,12566.1517,308372,5.198467,77713.771468,162846,1.173877,5753.384885,157557,2.846852,7860.419392,92480,5.45292,11506.76977,54244,4.56409,3930.2097,47211,3.661,5884.92685,34598,.96369,5507.55324,32878,5.89984,5223.69392,30678,.29867,5573.1428,24319,4.2735,11790.62909,21183,5.84715,1577.34354,18575,5.02194,10977.0788,17484,3.01194,18849.22755,10984,5.05511,5486.77784,9832,.8868,6069.7768,8650,5.6896,15720.8388,8583,1.2708,161000.6857,6490,.2725,17260.1547,6292,.9218,529.691,5706,2.0137,83996.8473,5574,5.2416,71430.6956,4938,3.245,2544.3144,4696,2.5781,775.5226,4466,5.5372,9437.7629,4252,6.0111,6275.9623,3897,5.3607,4694.003,3825,2.3926,8827.3903,3749,.8295,19651.0485,3696,4.9011,12139.5535,3566,1.6747,12036.4607,3454,1.8427,2942.4634,3319,.2437,7084.8968,3192,.1837,5088.6288,3185,1.7778,398.149,2846,1.2134,6286.599,2779,1.8993,6279.5527,2628,4.589,10447.3878,2460,3.7866,8429.2413,2393,4.996,5856.4777,2359,.2687,796.298,2329,2.8078,14143.4952,2210,1.95,3154.6871,2035,4.6527,2146.1654,1951,5.3823,2352.8662,1883,.6731,149854.4001,1833,2.2535,23581.2582,1796,.1987,6812.7668,1731,6.152,16730.4637,1717,4.4332,10213.2855,1619,5.2316,17789.8456,1381,5.1896,8031.0923,1364,3.6852,4705.7323,1314,.6529,13367.9726,1041,4.3329,11769.8537,1017,1.5939,4690.4798,998,4.201,6309.374,966,3.676,27511.468,874,6.064,1748.016,779,3.674,12168.003,771,.312,7632.943,756,2.626,6256.778,746,5.648,11926.254,693,2.924,6681.225,680,1.423,23013.54,674,.563,3340.612,663,5.661,11371.705,659,3.136,801.821,648,2.65,19804.827,615,3.029,233141.314,612,5.134,1194.447,563,4.341,90955.552,552,2.091,17298.182,534,5.1,31441.678,531,2.407,11499.656,523,4.624,6438.496,513,5.324,11513.883,477,.256,11856.219,461,1.722,7234.794,458,3.766,6386.169,458,4.466,5746.271,423,1.055,5760.498,422,1.557,7238.676,415,2.599,7058.598,401,3.03,1059.382,397,1.201,1349.867,379,4.907,4164.312,360,5.707,5643.179,352,3.626,244287.6,348,.761,10973.556,342,3.001,4292.331,336,4.546,4732.031,334,3.138,6836.645,324,4.164,9917.697,316,1.691,11015.106,307,.238,35371.887,298,1.306,6283.143,298,1.75,6283.009,293,5.738,16200.773,286,5.928,14712.317,281,3.515,21228.392,280,5.663,8635.942,277,.513,26.298,268,4.207,18073.705,266,.9,12352.853,260,2.962,25132.303,255,2.477,6208.294,242,2.8,709.933,231,1.054,22483.849,229,1.07,14314.168,216,1.314,154717.61,215,6.038,10873.986,200,.561,7079.374,198,2.614,951.718,197,4.369,167283.762,186,2.861,5216.58,183,1.66,39302.097,183,5.912,3738.761,175,2.145,6290.189,173,2.168,10575.407,171,3.702,1592.596,171,1.343,3128.389,164,5.55,6496.375,164,5.856,10984.192,161,1.998,10969.965,161,1.909,6133.513,157,4.955,25158.602,154,6.216,23543.231,153,5.357,13521.751,150,5.77,18209.33,150,5.439,155.42,139,1.778,9225.539,139,1.626,5120.601,128,2.46,13916.019,123,.717,143571.324,122,2.654,88860.057,121,4.414,3894.182,121,1.192,3.523,120,4.03,553.569,119,1.513,17654.781,117,3.117,14945.316,113,2.698,6040.347,110,3.085,43232.307,109,.998,955.6,108,2.939,17256.632,107,5.285,65147.62,103,.139,11712.955,103,5.85,213.299,102,3.046,6037.244,101,2.842,8662.24,100,3.626,6262.3,98,2.36,6206.81,98,5.11,6172.87,98,2,15110.47,97,2.67,5650.29,97,2.75,6244.94,96,4.02,6282.1,96,5.31,6284.06,92,.1,29088.81,85,3.26,20426.57,84,2.6,28766.92,81,3.58,10177.26,80,5.81,5230.81,78,2.53,16496.36,77,4.06,6127.66,73,.04,5481.25,72,5.96,12559.04,72,5.92,4136.91,71,5.49,22003.91,70,3.41,7.11,69,.62,11403.68,69,3.9,1589.07,69,1.96,12416.59,69,4.51,426.6,67,1.61,11087.29,66,4.5,47162.52,66,5.08,283.86,66,4.32,16858.48,65,1.04,6062.66,64,1.59,18319.54,63,5.7,45892.73,63,4.6,66567.49,63,3.82,13517.87,62,2.62,11190.38,61,1.54,33019.02,60,5.58,10344.3,60,5.38,316428.23,60,5.78,632.78,59,6.12,9623.69,57,.16,17267.27,57,3.86,6076.89,57,1.98,7668.64,56,4.78,20199.09,55,4.56,18875.53,55,3.51,17253.04,54,3.07,226858.24,54,4.83,18422.63,53,5.02,12132.44,52,3.63,5333.9,52,.97,155427.54,51,3.36,20597.24,50,.99,11609.86,50,2.21,1990.75,48,1.62,12146.67,48,1.17,12569.67,47,4.62,5436.99,47,1.81,12562.63,47,.59,21954.16,47,.76,7342.46,46,.27,4590.91,46,3.77,156137.48,45,5.66,10454.5,44,5.84,3496.03,43,.24,17996.03,41,5.93,51092.73,41,4.21,12592.45,40,5.14,1551.05,40,5.28,15671.08,39,3.69,18052.93,39,4.94,24356.78,38,2.72,11933.37,38,5.23,7477.52,38,4.99,9779.11,37,3.7,9388.01,37,4.44,4535.06,36,2.16,28237.23,36,2.54,242.73,36,.22,5429.88,35,6.15,19800.95,35,2.92,36949.23,34,5.63,2379.16,34,5.73,16460.33,34,5.11,5849.36,33,6.19,6268.85,10301861,1.1074897,6283.07584999,172124,1.064423,12566.1517,70222,3.14159,0,3235,1.0217,18849.2275,3080,2.8435,5507.5532,2497,1.3191,5223.6939,1849,1.4243,1577.3435,1008,5.9138,10977.0788,865,1.42,6275.962,863,.271,5486.778,507,1.686,5088.629,499,6.014,6286.599,467,5.987,529.691,440,.518,4694.003,410,1.084,9437.763,387,4.75,2544.314,375,5.071,796.298,352,.023,83996.847,344,.949,71430.696,341,5.412,775.523,322,6.156,2146.165,286,5.484,10447.388,284,3.42,2352.866,255,6.132,6438.496,252,.243,398.149,243,3.092,4690.48,225,3.689,7084.897,220,4.952,6812.767,219,.42,8031.092,209,1.282,1748.016,193,5.314,8429.241,185,1.82,7632.943,175,3.229,6279.553,173,1.537,4705.732,158,4.097,11499.656,158,5.539,3154.687,150,3.633,11513.883,148,3.222,7234.794,147,3.653,1194.447,144,.817,14143.495,135,6.151,5746.271,134,4.644,6836.645,128,2.693,1349.867,123,5.65,5760.498,118,2.577,13367.973,113,3.357,17789.846,110,4.497,4292.331,108,5.828,12036.461,102,5.621,6256.778,99,1.14,1059.38,98,.66,5856.48,93,2.32,10213.29,92,.77,16730.46,88,1.5,11926.25,86,1.42,5753.38,85,.66,155.42,81,1.64,6681.22,80,4.11,951.72,66,4.55,5216.58,65,.98,25132.3,64,4.19,6040.35,64,.52,6290.19,63,1.51,5643.18,59,6.18,4164.31,57,2.3,10973.56,55,2.32,11506.77,55,2.2,1592.6,55,5.27,3340.61,54,5.54,553.57,53,5.04,9917.7,53,.92,11371.7,52,3.98,17298.18,52,3.6,10969.97,49,5.91,3894.18,49,2.51,6127.66,48,1.67,12168,46,.31,801.82,42,3.7,10575.41,42,4.05,10984.19,40,2.17,7860.42,40,4.17,26.3,38,5.82,7058.6,37,3.39,6496.37,36,1.08,6309.37,36,5.34,7079.37,34,3.62,11790.63,32,.32,16200.77,31,4.24,3738.76,29,4.55,11856.22,29,1.26,8635.94,27,3.45,5884.93,26,5.08,10177.26,26,5.38,21228.39,24,2.26,11712.96,24,1.05,242.73,24,5.59,6069.78,23,3.63,6284.06,23,1.64,4732.03,22,3.46,213.3,21,1.05,3496.03,21,3.92,13916.02,21,4.01,5230.81,20,5.16,12352.85,20,.69,1990.75,19,2.73,6062.66,19,5.01,11015.11,18,6.04,6283.01,18,2.85,7238.68,18,5.6,6283.14,18,5.16,17253.04,18,2.54,14314.17,17,1.58,7.11,17,.98,3930.21,17,4.75,17267.27,16,2.19,6076.89,16,2.19,18073.7,16,6.12,3.52,16,4.61,9623.69,16,3.4,16496.36,15,.19,9779.11,15,5.3,13517.87,15,4.26,3128.39,15,.81,709.93,14,.5,25158.6,14,4.38,4136.91,13,.98,65147.62,13,3.31,154717.61,13,2.11,1589.07,13,1.92,22483.85,12,6.03,9225.54,12,1.53,12559.04,12,5.82,6282.1,12,5.61,5642.2,12,2.38,167283.76,12,.39,12132.44,12,3.98,4686.89,12,5.81,12569.67,12,.56,5849.36,11,.45,6172.87,11,5.8,16858.48,11,6.22,12146.67,11,2.27,5429.88,435939,5.784551,6283.07585,12363,5.57935,12566.1517,1234,3.1416,0,879,3.628,77713.771,569,1.87,5573.143,330,5.47,18849.228,147,4.48,5507.553,110,2.842,161000.686,101,2.815,5223.694,85,3.11,1577.34,65,5.47,775.52,61,1.38,6438.5,50,4.42,6286.6,47,3.66,7084.9,46,5.39,149854.4,42,.9,10977.08,40,3.2,5088.63,35,1.81,5486.78,32,5.35,3154.69,30,3.52,796.3,29,4.62,4690.48,28,1.84,4694,27,3.14,71430.7,27,6.17,6836.65,26,1.42,2146.17,25,2.81,1748.02,24,2.18,155.42,23,4.76,7234.79,21,3.38,7632.94,21,.22,4705.73,20,4.22,1349.87,20,2.01,1194.45,20,4.58,529.69,19,1.59,6309.37,18,5.7,6040.35,18,6.03,4292.33,17,2.9,9437.76,17,2,8031.09,17,5.78,83996.85,16,.05,2544.31,15,.95,6127.66,14,.36,10447.39,14,1.48,2352.87,13,.77,553.57,13,5.48,951.72,13,5.27,6279.55,13,3.76,6812.77,11,5.41,6256.78,10,.68,1592.6,10,4.95,398.15,10,1.15,3894.18,10,5.2,244287.6,10,1.94,11856.22,9,5.39,25132.3,8,6.18,1059.38,8,.69,8429.24,8,5.85,242.73,7,5.26,14143.5,7,.52,801.82,6,2.24,8635.94,6,4,13367.97,6,2.77,90955.55,6,5.17,7058.6,5,1.46,233141.31,5,4.13,7860.42,5,3.91,26.3,5,3.89,12036.46,5,5.58,6290.19,5,5.54,1990.75,5,.83,11506.77,5,6.22,6681.22,4,5.26,10575.41,4,1.91,7477.52,4,.43,10213.29,4,1.09,709.93,4,5.09,11015.11,4,4.22,88860.06,4,3.57,7079.37,4,1.98,6284.06,4,3.93,10973.56,4,6.18,9917.7,4,.36,10177.26,4,2.75,3738.76,4,3.33,5643.18,4,5.36,25158.6,14459,4.27319,6283.07585,673,3.917,12566.152,77,0,0,25,3.73,18849.23,4,2.8,6286.6,386,2.564,6283.076,31,2.27,12566.15,5,3.44,5573.14,2,2.05,18849.23,1,2.06,77713.77,1,4.41,161000.69,1,3.82,149854.4,1,4.08,6127.66,1,5.26,6438.5,9,1.22,6283.08,1,.66,12566.15],CNe.XL1=[[22639.586,.78475822,8328.691424623,1.5229241,25.0719,-.123598,4586.438,.1873974,7214.06286536,-2.184756,-18.86,.0828,2369.914,2.542952,15542.75428998,-.661832,6.212,-.0408,769.026,3.140313,16657.38284925,3.04585,50.144,-.2472,666.418,1.527671,628.30195521,-.02664,.062,-.0054,411.596,4.826607,16866.932315,-1.28012,-1.07,-.0059,211.656,4.115028,-1114.6285593,-3.70768,-43.93,.2064,205.436,.230523,6585.7609101,-2.15812,-18.92,.0882,191.956,4.898507,23871.4457146,.86109,31.28,-.164,164.729,2.586078,14914.4523348,-.6352,6.15,-.035,147.321,5.4553,-7700.3894694,-1.5496,-25.01,.118,124.988,.48608,7771.377145,-.3309,3.11,-.02,109.38,3.88323,8956.9933798,1.4963,25.13,-.129,55.177,5.57033,-1324.178025,.6183,7.3,-.035,45.1,.89898,25195.62374,.2428,24,-.129,39.533,3.81213,-8538.24089,2.803,26.1,-.118,38.43,4.30115,22756.817155,-2.8466,-12.6,.042,36.124,5.49587,24986.074274,4.5688,75.2,-.371,30.773,1.94559,14428.125731,-4.3695,-37.7,.166,28.397,3.28586,7842.364821,-2.2114,-18.8,.077,24.358,5.64142,16171.056245,-.6885,6.3,-.046,18.585,4.41371,-557.31428,-1.8538,-22,.1,17.954,3.58454,8399.6791,-.3576,3.2,-.03,14.53,4.9416,23243.143759,.888,31.2,-.16,14.38,.9709,32200.137139,2.384,56.4,-.29,14.251,5.7641,-2.3012,1.523,25.1,-.12,13.899,.3735,31085.50858,-1.324,12.4,-.08,13.194,1.7595,-9443.319984,-5.231,-69,.33,9.679,3.0997,-16029.080894,-3.072,-50.1,.24,9.366,.3016,24080.99518,-3.465,-19.9,.08,8.606,4.1582,-1742.930514,-3.681,-44,.21,8.453,2.8416,16100.06857,1.192,28.2,-.14,8.05,2.6292,14286.15038,-.609,6.1,-.03,7.63,6.2388,17285.684804,3.019,50.2,-.25,7.447,1.4845,1256.60391,-.053,.1,-.01,7.371,.2736,5957.458955,-2.131,-19,.09,7.063,5.6715,33.757047,-.308,-3.6,.02,6.383,4.7843,7004.5134,2.141,32.4,-.16,5.742,2.6572,32409.686605,-1.942,5,-.05,4.374,4.3443,22128.5152,-2.82,-13,.05,3.998,3.2545,33524.31516,1.766,49,-.25,3.21,2.2443,14985.44001,-2.516,-16,.06,2.915,1.7138,24499.74767,.834,31,-.17,2.732,1.9887,13799.82378,-4.343,-38,.17,2.568,5.4122,-7072.08751,-1.576,-25,.11,2.521,3.2427,8470.66678,-2.238,-19,.07,2.489,4.0719,-486.3266,-3.734,-44,.2,2.146,5.6135,-1952.47998,.645,7,-.03,1.978,2.7291,39414.2,.199,37,-.21,1.934,1.5682,33314.7657,6.092,100,-.5,1.871,.4166,30457.20662,-1.297,12,-.1,1.753,2.0582,-8886.0057,-3.38,-47,.2,1.437,2.386,-695.87607,.59,7,0,1.373,3.026,-209.54947,4.33,51,-.2,1.262,5.94,16728.37052,1.17,28,-.1,1.224,6.172,6656.74859,-4.04,-41,.2,1.187,5.873,6099.43431,-5.89,-63,.3,1.177,1.014,31571.83518,2.41,56,-.3,1.162,3.84,9585.29534,1.47,25,-.1,1.143,5.639,8364.73984,-2.18,-19,.1,1.078,1.229,70.98768,-1.88,-22,.1,1.059,3.326,40528.82856,3.91,81,-.4,.99,5.013,40738.37803,-.42,30,-.2,.948,5.687,-17772.01141,-6.75,-94,.5,.876,.298,-.35232,0,0,0,.822,2.994,393.02097,0,0,0,.788,1.836,8326.39022,3.05,50,-.2,.752,4.985,22614.8418,.91,31,-.2,.74,2.875,8330.99262,0,0,0,.669,.744,-24357.77232,-4.6,-75,.4,.644,1.314,8393.12577,-2.18,-19,.1,.639,5.888,575.33849,0,0,0,.635,1.116,23385.11911,-2.87,-13,0,.584,5.197,24428.75999,2.71,53,-.3,.583,3.513,-9095.55517,.95,4,0,.572,6.059,29970.88002,-5.03,-32,.1,.565,2.96,.32863,1.52,25,-.1,.561,4.001,-17981.56087,-2.43,-43,.2,.557,.529,7143.07519,-.3,3,0,.546,2.311,25614.37623,4.54,75,-.4,.536,4.229,15752.30376,-4.99,-45,.2,.493,3.316,-8294.9344,-1.83,-29,.1,.491,1.744,8362.4485,1.21,21,-.1,.478,1.803,-10071.6219,-5.2,-69,.3,.454,.857,15333.2048,3.66,57,-.3,.445,2.071,8311.7707,-2.18,-19,.1,.426,.345,23452.6932,-3.44,-20,.1,.42,4.941,33733.8646,-2.56,-2,0,.413,1.642,17495.2343,-1.31,-1,0,.404,1.458,23314.1314,-.99,9,-.1,.395,2.132,38299.5714,-3.51,-6,0,.382,2.7,31781.3846,-1.92,5,0,.375,4.827,6376.2114,2.17,32,-.2,.361,3.867,16833.1753,-.97,3,0,.358,5.044,15056.4277,-4.4,-38,.2,.35,5.157,-8257.7037,-3.4,-47,.2,.344,4.233,157.7344,0,0,0,.34,2.672,13657.8484,-.58,6,0,.329,5.61,41853.0066,3.29,74,-.4,.325,5.895,-39.8149,0,0,0,.309,4.387,21500.2132,-2.79,-13,.1,.302,1.278,786.0419,0,0,0,.302,5.341,-24567.3218,-.27,-24,.1,.301,1.045,5889.8848,-1.57,-12,0,.294,4.201,-2371.2325,-3.65,-44,.2,.293,3.704,21642.1886,-6.55,-57,.2,.29,4.069,32828.4391,2.36,56,-.3,.289,3.472,31713.8105,-1.35,12,-.1,.285,5.407,-33.7814,.31,4,0,.283,5.998,-16.9207,-3.71,-44,.2,.283,2.772,38785.898,.23,37,-.2,.274,5.343,15613.742,-2.54,-16,.1,.263,3.997,25823.9257,.22,24,-.1,.254,.6,24638.3095,-1.61,2,0,.253,1.344,6447.1991,.29,10,-.1,.25,.887,141.9754,-3.76,-44,.2,.247,.317,5329.157,-2.1,-19,.1,.245,.141,36.0484,-3.71,-44,.2,.231,2.287,14357.1381,-2.49,-16,.1,.227,5.158,2.6298,0,0,0,.219,5.085,47742.8914,1.72,63,-.3,.211,2.145,6638.7244,-2.18,-19,.1,.201,4.415,39623.7495,-4.13,-14,0,.194,2.091,588.4927,0,0,0,.193,3.057,-15400.7789,-3.1,-50,0,.186,5.598,16799.3582,-.72,6,0,.185,3.886,1150.677,0,0,0,.183,1.619,7178.0144,1.52,25,0,.181,2.635,8328.3391,1.52,25,0,.181,2.077,8329.0437,1.52,25,0,.179,3.215,-9652.8694,-.9,-18,0,.176,1.716,-8815.018,-5.26,-69,0,.175,5.673,550.7553,0,0,0,.17,2.06,31295.058,-5.6,-39,0,.167,1.239,7211.7617,-.7,6,0,.165,4.499,14967.4158,-.7,6,0,.164,3.595,15540.4531,.9,31,0,.164,4.237,522.3694,0,0,0,.163,4.633,15545.0555,-2.2,-19,0,.161,.478,6428.0209,-2.2,-19,0,.158,2.03,13171.5218,-4.3,-38,0,.157,2.28,7216.3641,-3.7,-44,0,.154,5.65,7935.6705,1.5,25,0,.152,.46,29828.9047,-1.3,12,0,.151,1.19,-.7113,0,0,0,.15,1.42,23942.4334,-1,9,0,.144,2.75,7753.3529,1.5,25,0,.137,2.08,7213.7105,-2.2,-19,0,.137,1.44,7214.4152,-2.2,-19,0,.136,4.46,-1185.6162,-1.8,-22,0,.136,3.03,8000.1048,-2.2,-19,0,.134,2.83,14756.7124,-.7,6,0,.131,5.05,6821.0419,-2.2,-19,0,.128,5.99,-17214.6971,-4.9,-72,0,.127,5.35,8721.7124,1.5,25,0,.126,4.49,46628.2629,-2,19,0,.125,5.94,7149.6285,1.5,25,0,.124,1.09,49067.0695,1.1,55,0,.121,2.88,15471.7666,1.2,28,0,.111,3.92,41643.4571,7.6,125,-1,.11,1.96,8904.0299,1.5,25,0,.106,3.3,-18.0489,-2.2,-19,0,.105,2.3,-4.931,1.5,25,0,.104,2.22,-6.559,-1.9,-22,0,.101,1.44,1884.9059,-.1,0,0,.1,5.92,5471.1324,-5.9,-63,0,.099,1.12,15149.7333,-.7,6,0,.096,4.73,15508.9972,-.4,10,0,.095,5.18,7230.9835,1.5,25,0,.093,3.37,39900.5266,3.9,81,0,.092,2.01,25057.0619,2.7,53,0,.092,1.21,-79.6298,0,0,0,.092,1.65,-26310.2523,-4,-68,0,.091,1.01,42062.5561,-1,23,0,.09,6.1,29342.5781,-5,-32,0,.09,4.43,15542.402,-.7,6,0,.09,3.8,15543.1066,-.7,6,0,.089,4.15,6063.3859,-2.2,-19,0,.086,4.03,52.9691,0,0,0,.085,.49,47952.4409,-2.6,11,0,.085,1.6,7632.8154,2.1,32,0,.084,.22,14392.0773,-.7,6,0,.083,6.22,6028.4466,-4,-41,0,.083,.63,-7909.9389,2.8,26,0,.083,5.2,-77.5523,0,0,0,.082,2.74,8786.1467,-2.2,-19,0,.08,2.43,9166.5428,-2.8,-26,0,.08,3.7,-25405.1732,4.1,27,0,.078,5.68,48857.52,5.4,106,-1,.077,1.85,8315.5735,-2.2,-19,0,.075,5.46,-18191.1103,1.9,8,0,.075,1.41,-16238.6304,1.3,1,0,.074,5.06,40110.0761,-.4,30,0,.072,2.1,64.4343,-3.7,-44,0,.071,2.17,37671.2695,-3.5,-6,0,.069,1.71,16693.4313,-.7,6,0,.069,3.33,-26100.7028,-8.3,-119,1,.068,1.09,8329.4028,1.5,25,0,.068,3.62,8327.9801,1.5,25,0,.068,2.41,16833.1509,-1,3,0,.067,3.4,24709.2971,-3.5,-20,0,.067,1.65,8346.7156,-.3,3,0,.066,2.61,22547.2677,1.5,39,0,.066,3.5,15576.5113,-1,3,0,.065,5.76,33037.9886,-2,5,0,.065,4.58,8322.1325,-.3,3,0,.065,6.2,17913.9868,3,50,0,.065,1.5,22685.8295,-1,9,0,.065,2.37,7180.3058,-1.9,-15,0,.064,1.06,30943.5332,2.4,56,0,.064,1.89,8288.8765,1.5,25,0,.064,4.7,6.0335,.3,4,0,.063,2.83,8368.5063,1.5,25,0,.063,5.66,-2580.7819,.7,7,0,.062,3.78,7056.3285,-2.2,-19,0,.061,1.49,8294.91,1.8,29,0,.061,.12,-10281.1714,-.9,-18,0,.061,3.06,-8362.4729,-1.2,-21,0,.061,4.43,8170.9571,1.5,25,0,.059,5.78,-13.1179,-3.7,-44,0,.059,5.97,6625.5702,-2.2,-19,0,.058,5.01,-.508,-.3,0,0,.058,2.73,7161.0938,-2.2,-19,0,.057,.19,7214.0629,-2.2,-19,0,.057,4,22199.5029,-4.7,-35,0,.057,5.38,8119.142,5.8,76,0,.056,1.07,7542.6495,1.5,25,0,.056,.28,8486.4258,1.5,25,0,.054,4.19,16655.0816,4.6,75,0,.053,.72,7267.032,-2.2,-19,0,.053,3.12,12.6192,.6,7,0,.052,2.99,-32896.013,-1.8,-49,0,.052,3.46,1097.708,0,0,0,.051,5.37,-6443.786,-1.6,-25,0,.051,1.35,7789.401,-2.2,-19,0,.051,5.83,40042.502,.2,38,0,.051,3.63,9114.733,1.5,25,0,.05,1.51,8504.484,-2.5,-22,0,.05,5.23,16659.684,1.5,25,0,.05,1.15,7247.82,-2.5,-23,0,.047,.25,-1290.421,.3,0,0,.047,4.67,-32686.464,-6.1,-100,0,.047,3.49,548.678,0,0,0,.047,2.37,6663.308,-2.2,-19,0,.046,.98,1572.084,0,0,0,.046,2.04,14954.262,-.7,6,0,.046,3.72,6691.693,-2.2,-19,0,.045,6.19,-235.287,0,0,0,.044,2.96,32967.001,-.1,27,0,.044,3.82,-1671.943,-5.6,-66,0,.043,5.82,1179.063,0,0,0,.043,.07,34152.617,1.7,49,0,.043,3.71,6514.773,-.3,0,0,.043,5.62,15.732,-2.5,-23,0,.043,5.8,8351.233,-2.2,-19,0,.042,.27,7740.199,1.5,25,0,.042,6.14,15385.02,-.7,6,0,.042,6.13,7285.051,-4.1,-41,0,.041,1.27,32757.451,4.2,78,0,.041,4.46,8275.722,1.5,25,0,.04,.23,8381.661,1.5,25,0,.04,5.87,-766.864,2.5,29,0,.04,1.66,254.431,0,0,0,.04,.4,9027.981,-.4,0,0,.04,2.96,7777.936,1.5,25,0,.039,4.67,33943.068,6.1,100,0,.039,3.52,8326.062,1.5,25,0,.039,3.75,21013.887,-6.5,-57,0,.039,5.6,606.978,0,0,0,.039,1.19,8331.321,1.5,25,0,.039,2.84,7211.433,-2.2,-19,0,.038,.67,7216.693,-2.2,-19,0,.038,6.22,25161.867,.6,28,0,.038,4.4,7806.322,1.5,25,0,.038,4.16,9179.168,-2.2,-19,0,.037,4.73,14991.999,-.7,6,0,.036,.35,67.514,-.6,-7,0,.036,3.7,25266.611,-1.6,0,0,.036,5.39,16328.796,-.7,6,0,.035,1.44,7174.248,-2.2,-19,0,.035,5,15684.73,-4.4,-38,0,.035,.39,-15.419,-2.2,-19,0,.035,6.07,15020.385,-.7,6,0,.034,6.01,7371.797,-2.2,-19,0,.034,.96,-16623.626,-3.4,-54,0,.033,6.24,9479.368,1.5,25,0,.033,3.21,23661.896,5.2,82,0,.033,4.06,8311.418,-2.2,-19,0,.033,2.4,1965.105,0,0,0,.033,5.17,15489.785,-.7,6,0,.033,5.03,21986.54,.9,31,0,.033,4.1,16691.14,2.7,46,0,.033,5.13,47114.589,1.7,63,0,.033,4.45,8917.184,1.5,25,0,.033,4.23,2.078,0,0,0,.032,2.33,75.251,1.5,25,0,.032,2.1,7253.878,-2.2,-19,0,.032,3.11,-.224,1.5,25,0,.032,4.43,16640.462,-.7,6,0,.032,5.68,8328.363,0,0,0,.031,5.32,8329.02,3,50,0,.031,3.7,16118.093,-.7,6,0,.03,3.67,16721.817,-.7,6,0,.03,5.27,-1881.492,-1.2,-15,0,.03,5.72,8157.839,-2.2,-19,0,.029,5.73,-18400.313,-6.7,-94,0,.029,2.76,16,-2.2,-19,0,.029,1.75,8879.447,1.5,25,0,.029,.32,8851.061,1.5,25,0,.029,.9,14704.903,3.7,57,0,.028,2.9,15595.723,-.7,6,0,.028,5.88,16864.631,.2,24,0,.028,.63,16869.234,-2.8,-26,0,.028,4.04,-18609.863,-2.4,-43,0,.027,5.83,6727.736,-5.9,-63,0,.027,6.12,418.752,4.3,51,0,.027,.14,41157.131,3.9,81,0,.026,3.8,15.542,0,0,0,.026,1.68,50181.698,4.8,99,-1,.026,.32,315.469,0,0,0,.025,5.67,19.188,.3,0,0,.025,3.16,62.133,-2.2,-19,0,.025,3.76,15502.939,-.7,6,0,.025,4.53,45999.961,-2,19,0,.024,3.21,837.851,-4.4,-51,0,.024,2.82,38157.596,.3,37,0,.024,5.21,15540.124,-.7,6,0,.024,.26,14218.576,0,13,0,.024,3.01,15545.384,-.7,6,0,.024,1.16,-17424.247,-.6,-21,0,.023,2.34,-67.574,.6,7,0,.023,2.44,18.024,-1.9,-22,0,.023,3.7,469.4,0,0,0,.023,.72,7136.511,-2.2,-19,0,.023,4.5,15582.569,-.7,6,0,.023,2.8,-16586.395,-4.9,-72,0,.023,1.51,80.182,0,0,0,.023,1.09,5261.583,-1.5,-12,0,.023,.56,54956.954,-.5,44,0,.023,4.01,8550.86,-2.2,-19,0,.023,4.46,38995.448,-4.1,-14,0,.023,3.82,2358.126,0,0,0,.022,3.77,32271.125,.5,34,0,.022,.82,15935.775,-.7,6,0,.022,1.07,24013.421,-2.9,-13,0,.022,.4,8940.078,-2.2,-19,0,.022,2.06,15700.489,-.7,6,0,.022,4.27,15124.002,-5,-45,0,.021,1.16,56071.583,3.2,88,0,.021,5.58,9572.189,-2.2,-19,0,.02,1.7,-17.273,-3.7,-44,0,.02,3.05,214.617,0,0,0,.02,4.41,8391.048,-2.2,-19,0,.02,5.95,23869.145,2.4,56,0,.02,.42,40947.927,-4.7,-21,0,.019,1.39,5818.897,.3,10,0,.019,.71,23873.747,-.7,6,0,.019,2.81,7291.615,-2.2,-19,0,.019,5.09,8428.018,-2.2,-19,0,.019,4.14,6518.187,-1.6,-12,0,.019,3.85,21.33,0,0,0,.018,.66,14445.046,-.7,6,0,.018,1.65,.966,-4,-48,0,.018,5.64,-17143.709,-6.8,-94,0,.018,6.01,7736.432,-2.2,-19,0,.018,2.74,31153.083,-1.9,5,0,.018,4.58,6116.355,-2.2,-19,0,.018,2.28,46.401,.3,0,0,.018,3.8,10213.597,1.4,25,0,.018,2.84,56281.132,-1.1,36,0,.018,3.53,8249.062,1.5,25,0,.017,4.43,20871.911,-3,-13,0,.017,4.44,627.596,0,0,0,.017,1.85,628.308,0,0,0,.017,1.19,8408.321,2,25,0,.017,1.95,7214.056,-2,-19,0,.017,1.57,7214.07,-2,-19,0,.017,1.65,13870.811,-6,-60,0,.017,.3,22.542,-4,-44,0,.017,2.62,-119.445,0,0,0,.016,4.87,5747.909,2,32,0,.016,4.45,14339.108,-1,6,0,.016,1.83,41366.68,0,30,0,.016,4.53,16309.618,-3,-23,0,.016,2.54,15542.754,-1,6,0,.016,6.05,1203.646,0,0,0,.015,5.2,2751.147,0,0,0,.015,1.8,-10699.924,-5,-69,0,.015,.4,22824.391,-3,-20,0,.015,2.1,30666.756,-6,-39,0,.015,2.1,6010.417,-2,-19,0,.015,.7,-23729.47,-5,-75,0,.015,1.4,14363.691,-1,6,0,.015,5.8,16900.689,-2,0,0,.015,5.2,23800.458,3,53,0,.015,5.3,6035,-2,-19,0,.015,1.2,8251.139,2,25,0,.015,3.6,-8.86,0,0,0,.015,.8,882.739,0,0,0,.015,3,1021.329,0,0,0,.015,.6,23296.107,1,31,0,.014,5.4,7227.181,2,25,0,.014,.1,7213.352,-2,-19,0,.014,4,15506.706,3,50,0,.014,3.4,7214.774,-2,-19,0,.014,4.6,6665.385,-2,-19,0,.014,.1,-8.636,-2,-22,0,.014,3.1,15465.202,-1,6,0,.014,4.9,508.863,0,0,0,.014,3.5,8406.244,2,25,0,.014,1.3,13313.497,-8,-82,0,.014,2.8,49276.619,-3,0,0,.014,.1,30528.194,-3,-10,0,.013,1.7,25128.05,1,31,0,.013,2.9,14128.405,-1,6,0,.013,3.4,57395.761,3,80,0,.013,2.7,13029.546,-1,6,0,.013,3.9,7802.556,-2,-19,0,.013,1.6,8258.802,-2,-19,0,.013,2.2,8417.709,-2,-19,0,.013,.7,9965.21,-2,-19,0,.013,3.4,50391.247,0,48,0,.013,3,7134.433,-2,-19,0,.013,2.9,30599.182,-5,-31,0,.013,3.6,-9723.857,1,0,0,.013,4.8,7607.084,-2,-19,0,.012,.8,23837.689,1,35,0,.012,3.6,4.409,-4,-44,0,.012,5,16657.031,3,50,0,.012,4.4,16657.735,3,50,0,.012,1.1,15578.803,-4,-38,0,.012,6,-11.49,0,0,0,.012,1.9,8164.398,0,0,0,.012,2.4,31852.372,-4,-17,0,.012,2.4,6607.085,-2,-19,0,.012,4.2,8359.87,0,0,0,.012,.5,5799.713,-2,-19,0,.012,2.7,7220.622,0,0,0,.012,4.3,-139.72,0,0,0,.012,2.3,13728.836,-2,-16,0,.011,3.6,14912.146,1,31,0,.011,4.7,14916.748,-2,-19,0],[1.6768,4.66926,628.301955,-.0266,.1,-.005,.51642,3.3721,6585.76091,-2.158,-18.9,.09,.41383,5.7277,14914.452335,-.635,6.2,-.04,.37115,3.9695,7700.389469,1.55,25,-.12,.2756,.7416,8956.99338,1.496,25.1,-.13,.24599,4.2253,-2.3012,1.523,25.1,-.12,.07118,.1443,7842.36482,-2.211,-19,.08,.06128,2.4998,16171.05625,-.688,6,0,.04516,.443,8399.6791,-.36,3,0,.04048,5.771,14286.15038,-.61,6,0,.03747,4.626,1256.60391,-.05,0,0,.03707,3.415,5957.45895,-2.13,-19,.1,.03649,1.8,23243.14376,.89,31,-.2,.02438,.042,16029.08089,3.07,50,-.2,.02165,1.017,-1742.93051,-3.68,-44,.2,.01923,3.097,17285.6848,3.02,50,-.3,.01692,1.28,.3286,1.52,25,-.1,.01361,.298,8326.3902,3.05,50,-.2,.01293,4.013,7072.0875,1.58,25,-.1,.01276,4.413,8330.9926,0,0,0,.0127,.101,8470.6668,-2.24,-19,.1,.01097,1.203,22128.5152,-2.82,-13,0,.01088,2.545,15542.7543,-.66,6,0,.00835,.19,7214.0629,-2.18,-19,.1,.00734,4.855,24499.7477,.83,31,-.2,.00686,5.13,13799.8238,-4.34,-38,.2,.00631,.93,-486.3266,-3.73,-44,0,.00585,.699,9585.2953,1.5,25,0,.00566,4.073,8328.3391,1.5,25,0,.00566,.638,8329.0437,1.5,25,0,.00539,2.472,-1952.48,.6,7,0,.00509,2.88,-.7113,0,0,0,.00469,3.56,30457.2066,-1.3,12,0,.00387,.78,-.3523,0,0,0,.00378,1.84,22614.8418,.9,31,0,.00362,5.53,-695.8761,.6,7,0,.00317,2.8,16728.3705,1.2,28,0,.00303,6.07,157.7344,0,0,0,.003,2.53,33.757,-.3,-4,0,.00295,4.16,31571.8352,2.4,56,0,.00289,5.98,7211.7617,-.7,6,0,.00285,2.06,15540.4531,.9,31,0,.00283,2.65,2.6298,0,0,0,.00282,6.17,15545.0555,-2.2,-19,0,.00278,1.23,-39.8149,0,0,0,.00272,3.82,7216.3641,-3.7,-44,0,.0027,4.37,70.9877,-1.9,-22,0,.00256,5.81,13657.8484,-.6,6,0,.00244,5.64,-.2237,1.5,25,0,.0024,2.96,8311.7707,-2.2,-19,0,.00239,.87,-33.7814,.3,4,0,.00216,2.31,15.9995,-2.2,-19,0,.00186,3.46,5329.157,-2.1,-19,0,.00169,2.4,24357.772,4.6,75,0,.00161,5.8,8329.403,1.5,25,0,.00161,5.2,8327.98,1.5,25,0,.0016,4.26,23385.119,-2.9,-13,0,.00156,1.26,550.755,0,0,0,.00155,1.25,21500.213,-2.8,-13,0,.00152,.6,-16.921,-3.7,-44,0,.0015,2.71,-79.63,0,0,0,.0015,5.29,15.542,0,0,0,.00148,1.06,-2371.232,-3.7,-44,0,.00141,.77,8328.691,1.5,25,0,.00141,3.67,7143.075,-.3,0,0,.00138,5.45,25614.376,4.5,75,0,.00129,4.9,23871.446,.9,31,0,.00126,4.03,141.975,-3.8,-44,0,.00124,6.01,522.369,0,0,0,.0012,4.94,-10071.622,-5.2,-69,0,.00118,5.07,-15.419,-2.2,-19,0,.00107,3.49,23452.693,-3.4,-20,0,.00104,4.78,17495.234,-1.3,0,0,.00103,1.44,-18.049,-2.2,-19,0,.00102,5.63,15542.402,-.7,6,0,.00102,2.59,15543.107,-.7,6,0,.001,4.11,-6.559,-1.9,-22,0,97e-5,.08,15400.779,3.1,50,0,96e-5,5.84,31781.385,-1.9,5,0,94e-5,1.08,8328.363,0,0,0,94e-5,2.46,16799.358,-.7,6,0,94e-5,1.69,6376.211,2.2,32,0,93e-5,3.64,8329.02,3,50,0,93e-5,2.65,16655.082,4.6,75,0,9e-4,1.9,15056.428,-4.4,-38,0,89e-5,1.59,52.969,0,0,0,88e-5,2.02,-8257.704,-3.4,-47,0,88e-5,3.02,7213.711,-2.2,-19,0,87e-5,.5,7214.415,-2.2,-19,0,87e-5,.49,16659.684,1.5,25,0,82e-5,5.64,-4.931,1.5,25,0,79e-5,5.17,13171.522,-4.3,-38,0,76e-5,3.6,29828.905,-1.3,12,0,76e-5,4.08,24567.322,.3,24,0,76e-5,4.58,1884.906,-.1,0,0,73e-5,.33,31713.811,-1.4,12,0,73e-5,.93,32828.439,2.4,56,0,71e-5,5.91,38785.898,.2,37,0,69e-5,2.2,15613.742,-2.5,-16,0,66e-5,3.87,15.732,-2.5,-23,0,66e-5,.86,25823.926,.2,24,0,65e-5,2.52,8170.957,1.5,25,0,63e-5,.18,8322.132,-.3,0,0,6e-4,5.84,8326.062,1.5,25,0,6e-4,5.15,8331.321,1.5,25,0,6e-4,2.18,8486.426,1.5,25,0,58e-5,2.3,-1.731,-4,-44,0,58e-5,5.43,14357.138,-2,-16,0,57e-5,3.09,8294.91,2,29,0,57e-5,4.67,-8362.473,-1,-21,0,56e-5,4.15,16833.151,-1,0,0,54e-5,1.93,7056.329,-2,-19,0,54e-5,5.27,8315.574,-2,-19,0,52e-5,5.6,8311.418,-2,-19,0,52e-5,2.7,-77.552,0,0,0,51e-5,4.3,7230.984,2,25,0,5e-4,.4,-.508,0,0,0,49e-5,5.4,7211.433,-2,-19,0,49e-5,4.4,7216.693,-2,-19,0,49e-5,4.3,16864.631,0,24,0,49e-5,2.2,16869.234,-3,-26,0,47e-5,6.1,627.596,0,0,0,47e-5,5,12.619,1,7,0,45e-5,4.9,-8815.018,-5,-69,0,44e-5,1.6,62.133,-2,-19,0,42e-5,2.9,-13.118,-4,-44,0,42e-5,4.1,-119.445,0,0,0,41e-5,4.3,22756.817,-3,-13,0,41e-5,3.6,8288.877,2,25,0,4e-4,.5,6663.308,-2,-19,0,4e-4,1.1,8368.506,2,25,0,39e-5,4.1,6443.786,2,25,0,39e-5,3.1,16657.383,3,50,0,38e-5,.1,16657.031,3,50,0,38e-5,3,16657.735,3,50,0,38e-5,4.6,23942.433,-1,9,0,37e-5,4.3,15385.02,-1,6,0,37e-5,5,548.678,0,0,0,36e-5,1.8,7213.352,-2,-19,0,36e-5,1.7,7214.774,-2,-19,0,35e-5,1.1,7777.936,2,25,0,35e-5,1.6,-8.86,0,0,0,35e-5,4.4,23869.145,2,56,0,35e-5,2,6691.693,-2,-19,0,34e-5,1.3,-1185.616,-2,-22,0,34e-5,2.2,23873.747,-1,6,0,33e-5,2,-235.287,0,0,0,33e-5,3.1,17913.987,3,50,0,33e-5,1,8351.233,-2,-19,0],[.00487,4.6693,628.30196,-.027,0,-.01,.00228,2.6746,-2.3012,1.523,25,-.12,.0015,3.372,6585.76091,-2.16,-19,.1,.0012,5.728,14914.45233,-.64,6,0,.00108,3.969,7700.38947,1.55,25,-.1,8e-4,.742,8956.99338,1.5,25,-.1,254e-6,6.002,.3286,1.52,25,-.1,21e-5,.144,7842.3648,-2.21,-19,0,18e-5,2.5,16171.0562,-.7,6,0,13e-5,.44,8399.6791,-.4,3,0,126e-6,5.03,8326.3902,3,50,0,12e-5,5.77,14286.1504,-.6,6,0,118e-6,5.96,8330.9926,0,0,0,11e-5,1.8,23243.1438,.9,31,0,11e-5,3.42,5957.459,-2.1,-19,0,11e-5,4.63,1256.6039,-.1,0,0,99e-6,4.7,-.7113,0,0,0,7e-5,.04,16029.0809,3.1,50,0,7e-5,5.14,8328.3391,1.5,25,0,7e-5,5.85,8329.0437,1.5,25,0,6e-5,1.02,-1742.9305,-3.7,-44,0,6e-5,3.1,17285.6848,3,50,0,54e-6,5.69,-.352,0,0,0,43e-6,.52,15.542,0,0,0,41e-6,2.03,2.63,0,0,0,4e-5,.1,8470.667,-2.2,-19,0,4e-5,4.01,7072.088,1.6,25,0,36e-6,2.93,-8.86,-.3,0,0,3e-5,1.2,22128.515,-2.8,-13,0,3e-5,2.54,15542.754,-.7,6,0,27e-6,4.43,7211.762,-.7,6,0,26e-6,.51,15540.453,.9,31,0,26e-6,1.44,15545.055,-2.2,-19,0,25e-6,5.37,7216.364,-3.7,-44,0],[12e-6,1.041,-2.3012,1.52,25,-.1,17e-7,.31,-.711,0,0,0]],CNe.QI_KB=[1640650.479938,15.218425,1642476.703182,15.21874996,1683430.515601,15.218750011,1752157.640664,15.218749978,1807675.003759,15.218620279,1883627.765182,15.218612292,1907369.1281,15.218449176,1936603.140413,15.218425,1939145.52418,15.218466998,1947180.7983,15.218524844,1964362.041824,15.218533526,1987372.340971,15.218513908,1999653.819126,15.218530782,2007445.469786,15.218535181,2021324.917146,15.218526248,2047257.232342,15.218519654,2070282.898213,15.218425,2073204.87285,15.218515221,2080144.500926,15.218530782,2086703.688963,15.218523776,2110033.182763,15.218425,2111190.300888,15.218425,2113731.271005,15.218515671,2120670.840263,15.218425,2123973.309063,15.218425,2125068.997336,15.218477932,2136026.312633,15.218472436,2156099.495538,15.218425,2159021.324663,15.218425,2162308.575254,15.218461742,2178485.706538,15.218425,2178759.662849,15.218445786,2185334.0208,15.218425,2187525.481425,15.218425,2188621.191481,15.218437494,2322147.76],CNe.QB=CNe.decode("FrcFs22AFsckF2tsDtFqEtF1posFdFgiFseFtmelpsEfhkF2anmelpFlF1ikrotcnEqEq2FfqmcDsrFor22FgFrcgDscFs22FgEeFtE2sfFs22sCoEsaF2tsD1FpeE2eFsssEciFsFnmelpFcFhkF2tcnEqEpFgkrotcnEqrEtFermcDsrE222FgBmcmr22DaEfnaF222sD1FpeForeF2tssEfiFpEoeFssD1iFstEqFppDgFstcnEqEpFg11FscnEqrAoAF2ClAEsDmDtCtBaDlAFbAEpAAAAAD2FgBiBqoBbnBaBoAAAAAAAEgDqAdBqAFrBaBoACdAAf1AACgAAAeBbCamDgEifAE2AABa1C1BgFdiAAACoCeE1ADiEifDaAEqAAFe1AcFbcAAAAAF1iFaAAACpACmFmAAAAAAAACrDaAAADG0"),CNe.SHUO_KB=[1457698.231017,29.53067166,1546082.512234,29.53085106,1640640.7353,29.5306,1642472.151543,29.53085439,1683430.5093,29.53086148,1752148.041079,29.53085097,1807665.420323,29.53059851,1883618.1141,29.5306,1907360.7047,29.5306,1936596.2249,29.5306,1939135.6753,29.5306,1947168],CNe.SB=CNe.decode("EqoFscDcrFpmEsF2DfFideFelFpFfFfFiaipqti1ksttikptikqckstekqttgkqttgkqteksttikptikq2fjstgjqttjkqttgkqtekstfkptikq2tijstgjiFkirFsAeACoFsiDaDiADc1AFbBfgdfikijFifegF1FhaikgFag1E2btaieeibggiffdeigFfqDfaiBkF1kEaikhkigeidhhdiegcFfakF1ggkidbiaedksaFffckekidhhdhdikcikiakicjF1deedFhFccgicdekgiFbiaikcfi1kbFibefgEgFdcFkFeFkdcfkF1kfkcickEiFkDacFiEfbiaejcFfffkhkdgkaiei1ehigikhdFikfckF1dhhdikcfgjikhfjicjicgiehdikcikggcifgiejF1jkieFhegikggcikFegiegkfjebhigikggcikdgkaFkijcfkcikfkcifikiggkaeeigefkcdfcfkhkdgkegieidhijcFfakhfgeidieidiegikhfkfckfcjbdehdikggikgkfkicjicjF1dbidikFiggcifgiejkiegkigcdiegfggcikdbgfgefjF1kfegikggcikdgFkeeijcfkcikfkekcikdgkabhkFikaffcfkhkdgkegbiaekfkiakicjhfgqdq2fkiakgkfkhfkfcjiekgFebicggbedF1jikejbbbiakgbgkacgiejkijjgigfiakggfggcibFifjefjF1kfekdgjcibFeFkijcfkfhkfkeaieigekgbhkfikidfcjeaibgekgdkiffiffkiakF1jhbakgdki1dj1ikfkicjicjieeFkgdkicggkighdF1jfgkgfgbdkicggfggkidFkiekgijkeigfiskiggfaidheigF1jekijcikickiggkidhhdbgcfkFikikhkigeidieFikggikhkffaffijhidhhakgdkhkijF1kiakF1kfheakgdkifiggkigicjiejkieedikgdfcggkigieeiejfgkgkigbgikicggkiaideeijkefjeijikhkiggkiaidheigcikaikffikijgkiahi1hhdikgjfifaakekighie1hiaikggikhkffakicjhiahaikggikhkijF1kfejfeFhidikggiffiggkigicjiekgieeigikggiffiggkidheigkgfjkeigiegikifiggkidhedeijcfkFikikhkiggkidhh1ehigcikaffkhkiggkidhh1hhigikekfiFkFikcidhh1hitcikggikhkfkicjicghiediaikggikhkijbjfejfeFhaikggifikiggkigiejkikgkgieeigikggiffiggkigieeigekijcijikggifikiggkideedeijkefkfckikhkiggkidhh1ehijcikaffkhkiggkidhh1hhigikhkikFikfckcidhh1hiaikgjikhfjicjicgiehdikcikggifikigiejfejkieFhegikggifikiggfghigkfjeijkhigikggifikiggkigieeijcijcikfksikifikiggkidehdeijcfdckikhkiggkhghh1ehijikifffffkhsFngErD1pAfBoDd1BlEtFqA2AqoEpDqElAEsEeB2BmADlDkqBtC1FnEpDqnEmFsFsAFnllBbFmDsDiCtDmAB2BmtCgpEplCpAEiBiEoFqFtEqsDcCnFtADnFlEgdkEgmEtEsCtDmADqFtAFrAtEcCqAE1BoFqC1F1DrFtBmFtAC2ACnFaoCgADcADcCcFfoFtDlAFgmFqBq2bpEoAEmkqnEeCtAE1bAEqgDfFfCrgEcBrACfAAABqAAB1AAClEnFeCtCgAADqDoBmtAAACbFiAAADsEtBqAB2FsDqpFqEmFsCeDtFlCeDtoEpClEqAAFrAFoCgFmFsFqEnAEcCqFeCtFtEnAEeFtAAEkFnErAABbFkADnAAeCtFeAfBoAEpFtAABtFqAApDcCGJ");var ENe=CNe,ONe=function(){function e(t){_w(this,e),this._year=t,this._months=[],this._jieQiJulianDays=[],this.compute()}return Ew(e,[{key:"compute",value:function(){var t,n,r=[],o=[],i=[],a=[],u=this._year,l=Math.floor(365.2422*(u-2e3)+180),c=365.2422*Math.floor((l-355+183)/365.2422)+355;for(ENe.calcQi(c)>l&&(c-=365.2422),t=0;t<26;t++)r.push(ENe.calcQi(c+15.2184*t));for(t=0,n=_Ne.JIE_QI_IN_USE.length;t<n;t++)l=0===t?ENe.qiAccurate2(r[0]-15.2184):t<=26?ENe.qiAccurate2(r[t-1]):ENe.qiAccurate2(r[25]+15.2184*(t-26)),this._jieQiJulianDays.push(l+wNe.J2000);for((c=ENe.calcShuo(r[0]))>r[0]&&(c-=29.53),t=0;t<16;t++)o.push(ENe.calcShuo(c+29.5306*t));for(t=0;t<15;t++)i.push(Math.floor(o[t+1]-o[t])),a.push(t);var s=u-1,d=16;if(e._LEAP_11.indexOf(u)>-1)d=13;else if(e._LEAP_12.indexOf(u)>-1)d=14;else if(o[13]<=r[24]){for(t=1;o[t+1]>r[2*t]&&t<13;)t++;d=t}for(n=d;n<15;n++)a[n]-=1;var f=[11,12,1,2,3,4,5,6,7,8,9,10],p=-1,v=-1,h=s;for(t=0;t<15;t++){var g=o[t]+wNe.J2000,m=a[t],y=f[m%12];1724360<=g&&g<1729794||1807724<=g&&g<1808699?y=f[(m+1)%12]:1729794!=g&&1808699!=g||(y=12),-1==p&&(p=y,v=y),y<p&&(h+=1,v=1),p=y,t==d?y=-y:1729794!=g&&1808699!=g||(y=-11),this._months.push(new kNe(h,y,i[t],o[t]+wNe.J2000,v)),v++}}},{key:"getYear",value:function(){return this._year}},{key:"getJieQiJulianDays",value:function(){return this._jieQiJulianDays}},{key:"getDayCount",value:function(){for(var e=0,t=0,n=this._months.length;t<n;t++){var r=this._months[t];r.getYear()==this._year&&(e+=r.getDayCount())}return e}},{key:"getMonths",value:function(){return this._months}},{key:"getMonth",value:function(e){for(var t=0,n=this._months.length;t<n;t++){var r=this._months[t];if(r.getYear()==this._year&&r.getMonth()==e)return r}return null}},{key:"toString",value:function(){return"".concat(this.getYear())}}],[{key:"fromYear",value:function(t){var n;return e._CACHE_YEAR&&e._CACHE_YEAR.getYear()==t?n=e._CACHE_YEAR:(n=new e(t),e._CACHE_YEAR=n),n}}])}();ONe.YUAN=["下","上","中"],ONe.YUN=["七","八","九","一","二","三","四","五","六"],ONe._LEAP_11=[75,94,170,265,322,398,469,553,583,610,678,735,754,773,849,887,936,1050,1069,1126,1145,1164,1183,1259,1278,1308,1373,1403,1441,1460,1498,1555,1593,1612,1631,1642,2033,2128,2147,2242,2614,2728,2910,3062,3244,3339,3616,3711,3730,3825,4007,4159,4197,4322,4341,4379,4417,4531,4599,4694,4713,4789,4808,4971,5085,5104,5161,5180,5199,5294,5305,5476,5677,5696,5772,5791,5848,5886,6049,6068,6144,6163,6258,6402,6440,6497,6516,6630,6641,6660,6679,6736,6774,6850,6869,6899,6918,6994,7013,7032,7051,7070,7089,7108,7127,7146,7222,7271,7290,7309,7366,7385,7404,7442,7461,7480,7491,7499,7594,7624,7643,7662,7681,7719,7738,7814,7863,7882,7901,7939,7958,7977,7996,8034,8053,8072,8091,8121,8159,8186,8216,8235,8254,8273,8311,8330,8341,8349,8368,8444,8463,8474,8493,8531,8569,8588,8626,8664,8683,8694,8702,8713,8721,8751,8789,8808,8816,8827,8846,8884,8903,8922,8941,8971,9036,9066,9085,9104,9123,9142,9161,9180,9199,9218,9256,9294,9313,9324,9343,9362,9381,9419,9438,9476,9514,9533,9544,9552,9563,9571,9582,9601,9639,9658,9666,9677,9696,9734,9753,9772,9791,9802,9821,9886,9897,9916,9935,9954,9973,9992],ONe._LEAP_12=[37,56,113,132,151,189,208,227,246,284,303,341,360,379,417,436,458,477,496,515,534,572,591,629,648,667,697,716,792,811,830,868,906,925,944,963,982,1001,1020,1039,1058,1088,1153,1202,1221,1240,1297,1335,1392,1411,1422,1430,1517,1525,1536,1574,3358,3472,3806,3988,4751,4941,5066,5123,5275,5343,5438,5457,5495,5533,5552,5715,5810,5829,5905,5924,6421,6535,6793,6812,6888,6907,7002,7184,7260,7279,7374,7556,7746,7757,7776,7833,7852,7871,7966,8015,8110,8129,8148,8224,8243,8338,8406,8425,8482,8501,8520,8558,8596,8607,8615,8645,8740,8778,8835,8865,8930,8960,8979,8998,9017,9055,9074,9093,9112,9150,9188,9237,9275,9332,9351,9370,9408,9427,9446,9457,9465,9495,9560,9590,9628,9647,9685,9715,9742,9780,9810,9818,9829,9848,9867,9905,9924,9943,9962,1e4],ONe._CACHE_YEAR=null;var SNe=ONe,xNe=function(){function e(){_w(this,e)}return Ew(e,null,[{key:"getMessage",value:function(t){return t?(t.startsWith("{")&&(t=t.replace(/(\{|\})/gi,"")),e._MESSAGES[t]):t}}])}();xNe._MESSAGES={"n.zero":"〇","n.one":"一","n.two":"二","n.three":"三","n.four":"四","n.five":"五","n.six":"六","n.seven":"七","n.eight":"八","n.nine":"九","n.ten":"十","n.eleven":"十一","n.twelve":"十二","d.one":"初一","d.two":"初二","d.three":"初三","d.four":"初四","d.five":"初五","d.six":"初六","d.seven":"初七","d.eight":"初八","d.nine":"初九","d.ten":"初十","d.eleven":"十一","d.twelve":"十二","d.thirteen":"十三","d.fourteen":"十四","d.fifteen":"十五","d.sixteen":"十六","d.seventeen":"十七","d.eighteen":"十八","d.nighteen":"十九","d.twenty":"二十","d.twentyOne":"廿一","d.twentyTwo":"廿二","d.twentyThree":"廿三","d.twentyFour":"廿四","d.twentyFive":"廿五","d.twentySix":"廿六","d.twentySeven":"廿七","d.twentyEight":"廿八","d.twentyNine":"廿九","d.thirty":"三十","m.one":"正","m.two":"二","m.three":"三","m.four":"四","m.five":"五","m.six":"六","m.seven":"七","m.eight":"八","m.nine":"九","m.ten":"十","m.eleven":"冬","m.twelve":"腊","w.sun":"日","w.mon":"一","w.tues":"二","w.wed":"三","w.thur":"四","w.fri":"五","w.sat":"六","jq.dongZhi":"冬至","jq.xiaoHan":"小寒","jq.daHan":"大寒","jq.liChun":"立春","jq.yuShui":"雨水","jq.jingZhe":"惊蛰","jq.chunFen":"春分","jq.qingMing":"清明","jq.guYu":"谷雨","jq.liXia":"立夏","jq.xiaoMan":"小满","jq.mangZhong":"芒种","jq.xiaZhi":"夏至","jq.xiaoShu":"小暑","jq.daShu":"大暑","jq.liQiu":"立秋","jq.chuShu":"处暑","jq.baiLu":"白露","jq.qiuFen":"秋分","jq.hanLu":"寒露","jq.shuangJiang":"霜降","jq.liDong":"立冬","jq.xiaoXue":"小雪","jq.daXue":"大雪","jr.chuXi":"除夕","jr.chunJie":"春节","jr.yuanXiao":"元宵节","jr.longTou":"龙头节","jr.duanWu":"端午节","jr.qiXi":"七夕节","jr.zhongQiu":"中秋节","jr.chongYang":"重阳节","jr.laBa":"腊八节","jr.yuanDan":"元旦节","jr.qingRen":"情人节","jr.fuNv":"妇女节","jr.zhiShu":"植树节","jr.xiaoFei":"消费者权益日","jr.wuYi":"劳动节","jr.qingNian":"青年节","jr.erTong":"儿童节","jr.yuRen":"愚人节","jr.jianDang":"建党节","jr.jianJun":"建军节","jr.jiaoShi":"教师节","jr.guoQing":"国庆节","jr.wanShengYe":"万圣节前夜","jr.wanSheng":"万圣节","jr.pingAn":"平安夜","jr.shengDan":"圣诞节"};var jNe=xNe,DNe=function(){function e(t,n,r,o,i){_w(this,e);var a=e._compute(i);this._year=t,this._month=n,this._day=r,this._jieQi=a.jieQi,this._solar=o}return Ew(e,[{key:"getDayInChinese",value:function(){return jNe.getMessage(_Ne.DAY[this._day])}},{key:"getYear",value:function(){return this._year}},{key:"getJieQi",value:function(){var t="";for(var n in this._jieQi){var r=this._jieQi[n];if(r.getYear()==this._solar.getYear()&&r.getMonth()==this._solar.getMonth()&&r.getDay()==this._solar.getDay()){t=n;break}}return e._convertJieQi(t)}},{key:"getFestival",value:function(){if(12==Math.abs(this._month)&&this._day>=29&&this._year!=this._next(1).getYear())return jNe.getMessage("jr.chuXi");var e=_Ne.FESTIVAL[this._month+"-"+this._day];return jNe.getMessage(e)}},{key:"_next",value:function(e){return this._solar.next(e).getLunar()}}],[{key:"fromSolar",value:function(t){for(var n=0,r=0,o=0,i=SNe.fromYear(t.getYear()),a=i.getMonths(),u=0,l=a.length;u<l;u++){var c=a[u],s=t.subtract(wNe.fromJulianDay(c.getFirstJulianDay()));if(s<c.getDayCount()){n=c.getYear(),r=c.getMonth(),o=s+1;break}}return new e(n,r,o,t,i)}},{key:"fromDate",value:function(t){return e.fromSolar(wNe.fromDate(t))}},{key:"_computeJieQi",value:function(e,t){for(var n=t.getJieQiJulianDays(),r=0,o=_Ne.JIE_QI_IN_USE.length;r<o;r++){var i=_Ne.JIE_QI_IN_USE[r];e.jieQiList.push(i),e.jieQi[i]=wNe.fromJulianDay(n[r])}}},{key:"_compute",value:function(t){var n={jieQi:{},jieQiList:[]};return e._computeJieQi(n,t),n}},{key:"_convertJieQi",value:function(e){return"DONG_ZHI"===e?jNe.getMessage("jq.dongZhi"):"DA_HAN"===e?jNe.getMessage("jq.daHan"):"XIAO_HAN"===e?jNe.getMessage("jq.xiaoHan"):"LI_CHUN"===e?jNe.getMessage("jq.liChun"):"DA_XUE"===e?jNe.getMessage("jq.daXue"):"YU_SHUI"===e?jNe.getMessage("jq.yuShui"):"JING_ZHE"===e?jNe.getMessage("jq.jingZhe"):jNe.getMessage(e)}}])}();function ANe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return RNe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RNe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function RNe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var FNe=Object.defineProperty,INe=Object.getOwnPropertyDescriptor,PNe=function(e,t,n,r){for(var o,i=r>1?void 0:r?INe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FNe(t,n,i),i};var MNe=function(){return Ew((function e(){_w(this,e),this.startWeekDay=1,this.cellScheduleHeight=26}),[{key:"defaultMaxScheduleNum",get:function(){var e;return(null==(e=this._configurationService)?void 0:e.getValue("view.useWindowScroll"))||!1?3:1}},{key:"defaultCellMinHeight",get:function(){return 58+this.cellScheduleHeight*this.defaultMaxScheduleNum}},{key:"getCurrentDate",value:function(e){var t=null==e?void 0:e.get("active_date");return t?i()(t,"YYYY-MM-DD"):f_()}},{key:"setCurrentDate",value:function(e){this._commandService.execCommand("setActiveDate",{date:e})}},{key:"getCalendarDate",value:function(e){var t=Awe,n=e.daysInMonth(),r=e.day(),o=Math.abs((r<this.startWeekDay?t:r)-this.startWeekDay),i=e.subtract(o,jwe),a=o+n,u=a%t;0!==u&&(a+=t-u%t);var l=i.add(a,jwe);return{startDate:i,endDate:l,totalDayCount:a}}},{key:"getDateRows",value:function(e){for(var t=e.startDate,n=e.totalDayCount,r=Awe,o=[],i=[],a=0;a<=n;a++)0!==a&&a%r==0&&(o.push(gw(i)),i=[]),i.push(t.add(a,jwe));return o}},{key:"getDateLunarInfo",value:function(e){var t,n=DNe.fromDate(e.toDate()),r=yNe.getHoliday(e.year(),e.month()+1,e.date()),o=(null==r?void 0:r.getTarget())===(null==r?void 0:r.getDay()),i=null==r?void 0:r.getName();return o&&(t=i),t||(t=n.getFestival()),t||(t=n.getJieQi()),t||(t=n.getDayInChinese()),{isHolidayTarget:o,displayHoliday:i,isWork:(null==r?void 0:r.isWork())||!1,lunarText:t}}},{key:"getSchedules",value:function(e,t,n){var r,o=(null==t?void 0:t.get("start_date_field_uuid"))||"",a=(null==t?void 0:t.get("end_date_field_uuid"))||o,u=this._readService.getViewFields(),l=nk(e,(function(e){return e.get("record_uuid")})),c=(null==t?void 0:t.get("date_title_field_uuid"))||u.get(0).get("uuid"),s=this._readService.getFieldFormatValues(o,l),d=this._readService.getFieldFormatValues(a,l),f=this._readService.getFieldFormatValues(c,l).reduce((function(e,t){return e[t.recordId]=t.formatValue||"",e}),{}),p={},v=ANe(s);try{for(v.s();!(r=v.n()).done;){var h=r.value,g=i()(h.formatValue).startOf(jwe);(g.isBetween(n.startDate,n.endDate)||g.isSameOrBefore(n.startDate))&&(p[h.recordId]={start:g})}}catch(e){v.e(e)}finally{v.f()}var m,y=ANe(d);try{for(y.s();!(m=y.n()).done;){var b=m.value,w=i()(b.formatValue).endOf(jwe);if(w.isBetween(n.startDate,n.endDate)||w.isSameOrAfter(n.endDate)){var _=p[b.recordId];_?_.end=w:p[b.recordId]={end:w}}}}catch(e){y.e(e)}finally{y.f()}return l.filter((function(e){return!!p[e]})).map((function(e){var t=p[e];return new XTe({id:e,title:f[e]||"",start:t.start||t.end.startOf(jwe),end:t.end||t.start.endOf(jwe)})})).filter((function(e){return e.start.isSameOrBefore(e.end)})).sort((function(e,t){return d_(e.start)-d_(t.start)}))}},{key:"getDateScheduleMap",value:function(e,t){for(var n={},r=function(){for(var r={},i=function(){var i=e[o][a],u=d_(i),l=t.filter((function(e){return e.include(i)}));if(0===a&&0!==o){var c=n[d_(i.subtract(1,jwe))];l=l.sort((function(e,t){var n,r;return(null!==(n=c[e.id])&&void 0!==n?n:99)-(null!==(r=c[t.id])&&void 0!==r?r:99)}))}n[u]={};var s=[];l.filter((function(e){var t=r[e.id];return!t||(n[u][e.id]=t,s.push(t),!1)})).forEach((function(e){var t=function(e){for(var t=0,n=0;n<e.length&&e.includes(t);n++)t+=1;return t}(s);r[e.id]=t,n[u][e.id]=t,s.push(t)}))},a=0;a<e[o].length;a++)i()},o=0;o<e.length;o++)r();return n}},{key:"sortScheduleList",value:function(e,t,n){var r=d_(e);return t.filter((function(t){return t.include(e)})).sort((function(e,t){var o=n[r];return(o[e.id]||0)-(o[t.id]||0)}))}},{key:"getNextColorToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/(.+-)(\d+)/);if(n){var r=n[1],o=n[2],i=parseInt(o)+t;return r+(i>9?9:i)}return e}},{key:"getScheduleColor",value:function(e,t,n,r){var o,i,a,u,l,c,s=Fwe[0][0];if(n&&t===rE.CUSTOM)s=n;else if(n&&t===rE.FOLLOW_FIELD){var d=this._readService.getCell(n,e.id),f=r[null==d?void 0:d.value];f&&(s=f)}var p=null==(o=this._labelColor)?void 0:o.getLabelColorTokenByBackColorId(s),v=this.getNextColorToken(p,1),h=this.getNextColorToken(p,2),g=this.getNextColorToken(p,5),m=null==(i=this._labelColor)?void 0:i.getRenderColor(p),y=null==(a=this._labelColor)?void 0:a.getRenderColor(v);return{normal:m,highlight:null==(u=this._labelColor)?void 0:u.getRenderColor(h),lite:y,heavy:null==(l=this._labelColor)?void 0:l.getRenderColor(g),text:null==(c=this._labelColor)?void 0:c.getRenderTextColor(s)}}},{key:"getScheduleLineStyle",value:function(e){var t=e.schedule,n=e.colIndex,r=e.date,o=e.isActive,i=e.isDelPossible,a=e.isInHighlight,u=e.isSelected,l=e.scheduleColorType,c=e.schedlueColorFieldIdOrColorId,s=e.colorMap,d=this.getScheduleColor(t,l,c,s),f=i?{normal:"var(--yq-red-100)",lite:"var(--yq-red-200)",heavy:"var(--yq-red-600)",text:"var(--yq-red-900)"}:a?{normal:d.highlight,lite:d.highlight,heavy:d.heavy,text:d.text}:d,p={color:f.text,borderColor:i||a&&u?f.heavy:"transparent",backgroundColor:o?f.lite:f.normal},v={background:f.heavy},h=t.start.isSame(t.end),g=h;if(!h){var m=t.end.diff(r,jwe)+1,y=Math.min(Awe-n,m),b=y+(12*y-7),w=t.isStartDate(r),_=r.add(y-1,jwe);t.isEndDate(_)?(b-=w?6:1,g=!0):t.isStartDate(r)||(b+=5),p.width="calc(".concat(100*y,"% + ").concat(b,"px)")}return{lineStyle:p,labelStyle:v,isShowControl:g}}},{key:"createSchedule",value:function(e){return this._commandService.execCommand("createSchedule",{date:e})}},{key:"updateSchedule",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,o=e.targetRecordId,i=e.direction,a=void 0===i?eE.forward:i;return this._commandService.execCommand("updateSchedule",{recordId:t,startDate:n,endDate:r,targetRecordId:o,direction:a})}}])}();PNe([Ks(oA)],MNe.prototype,"_readService",2),PNe([Ks(nR)],MNe.prototype,"_commandService",2),PNe([Ks(lk)],MNe.prototype,"_configurationService",2),PNe([Ks($P)],MNe.prototype,"_labelColor",2),MNe=PNe([Gs({token:zTe})],MNe);var TNe=Object.defineProperty,NNe=Object.getOwnPropertyDescriptor,BNe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new pNe({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return dd().register(this).register(MNe).register(rNe)}}])}();BNe.pluginName="render-viewer-calendar",BNe=function(e,t,n,r){for(var o,i=r>1?void 0:r?NNe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TNe(t,n,i),i}([Gs({contrib:[toe,aoe]})],BNe);var VNe=[y_e,ske,Oke,Vke,pCe,RCe,WCe,ZCe,iEe,fEe,bEe,MEe,ZEe,mOe,ROe,WOe,iSe,kSe,RSe,zSe,_je,XAe,uRe,mRe,DRe,IRe,GRe,XRe,lFe,fFe,gFe,wFe,YFe,iIe,xPe,WPe,KPe,XPe,RMe,CTe,VTe,BNe],LNe=Object(a.forwardRef)((function(e,t){var n=yre(xme),r=yre(lk),o=yre(ZR),i=yre(loe),l=n.Buttons,c=Tre(),s=Object(a.useRef)(null),d=Object(a.useRef)(),f=Object(a.useRef)(0);Zae((function(){var e=o.onDataLoaded((function(){c()})),t=o.onDataChanged((function(){c()}));return function(){e.destroy(),t.destroy()}}),[]),Zae((function(){var e=null==i?void 0:i.onStatusChange((function(){c()}));return function(){null==e||e.destroy()}}),[i]),Zae((function(){if(s.current)return d.current=new ResizeObserver((function(e){var t=e[0].contentRect.height;f.current!==t&&(f.current=e[0].contentRect.height,window.dispatchEvent(new CustomEvent("lakex_table_view_resize")))})),d.current.observe(s.current),function(){var e;null==(e=d.current)||e.disconnect()}}),[]),Object(a.useImperativeHandle)(t,(function(){return{refresh:c}}));var p=n.filterVisibleButtons(r.getValue("toolbar.topLeft")),v=n.filterVisibleButtons(r.getValue("toolbar.topRight")),h=n.filterVisibleButtons(r.getValue("toolbar.left")),g=n.filterVisibleButtons((null==i?void 0:i.isActive)?r.getValue("toolbar.right"):[]),m=r.getValue("toolbar.mode"),y=0!==p.length||0!==v.length;return u.a.createElement("div",{ref:s,className:"lakex-workbench-toolbar-container"},u.a.createElement("div",{className:I()("lakex-table-workbench-toolbar",{"lakex-table-workbench-toolbar-multi-row":y})},(p.length>0||v.length>0)&&u.a.createElement("div",{className:"lakex-table-workbench-toolbar-top-section"},u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},p.length>0?u.a.createElement(l,{buttons:p,mode:m}):null),u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},v.length>0?u.a.createElement(l,{buttons:v,mode:m}):null)),(h.length>0||g.length>0)&&u.a.createElement("div",{className:"lakex-table-workbench-toolbar-main-section"},u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},h.length>0?u.a.createElement(l,{buttons:h,mode:m}):null),u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},g.length>0?u.a.createElement(l,{buttons:g,mode:m}):null))))})),zNe=Object.defineProperty,UNe=Object.getOwnPropertyDescriptor,HNe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){e.registerRender(LNe)}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"toolbar",type:"object",title:"工具栏",properties:{left:{type:"array",description:"左侧工具栏"},right:{type:"array",description:"右侧工具栏"},topLeft:{type:"array",description:"左上工具栏"},topRight:{type:"array",description:"右上工具栏"},mode:{type:"string",description:"展示模式",enum:Object.values(Rme)}}}),e.registerDefaultValue({"toolbar.mode":Rme.NORMAL})}}])}();HNe.pluginName="workbench-toolbar",HNe=function(e,t,n,r){for(var o,i=r>1?void 0:r?UNe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zNe(t,n,i),i}([Gs({contrib:[sre,jme]})],HNe);var qNe=Object.defineProperty,WNe=Object.getOwnPropertyDescriptor,$Ne=function(e,t,n,r){for(var o,i=r>1?void 0:r?WNe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qNe(t,n,i),i},GNe=function(){return Ew((function e(){_w(this,e)}),[{key:"getDefaultFilter",value:function(){var e=this._readService.getActiveView();if(e){var t,n=this._readService.getViewFilters(e.get("uuid"));if(0===n.length){var r=this._readService.getViewFields(null==e?void 0:e.get("uuid"));if(!r)return;t=r.get(0).get("field")}else{var o=n.get(n.length-1).get("field_uuid");t=this._readService.getField(o)}if(t){var i=this.getConditions(t.get("type"));return{uuid:qw(32),field_uuid:t.get("uuid"),func:i[0].func,expected:null,operator:n.length>0?n.get(n.length-1).get("operator"):QC.And}}}}},{key:"getFilterByFieldId",value:function(e){var t=this._readService.getField(e);if(t){var n=this.getConditions(t.get("type"));return{uuid:qw(32),field_uuid:t.get("uuid"),func:n[0].func,expected:null,operator:QC.And}}}},{key:"getConditions",value:function(e){var t=uE[e];return aE.filter((function(e){return e.type===t}))}},{key:"getDateExpected",value:function(e){return cE.filter((function(t){return!(t.matchFuncs&&!t.matchFuncs.includes(e))}))}},{key:"getMentionFieldValues",value:function(e){var t=this._readService.getFieldCells(e),n=[];return null==t||t.forEach((function(e){Array.isArray(null==e?void 0:e.value)?n=n.concat(null==e?void 0:e.value):e.value&&n.push(e.value)})),Xu(n,"uid")}}])}();$Ne([Ks(oA)],GNe.prototype,"_readService",2),GNe=$Ne([Gs()],GNe);var KNe="lakex-table-filter-modal-empty",YNe=function(){return u.a.createElement("div",{className:KNe},u.a.createElement("div",{className:"".concat(KNe,"-desc")},Lw("还未设置任何筛选")))},JNe=function(e){var t=yre(oA),n=t.getActiveView();return{filterFields:Q_(t.getViewFields(null==n?void 0:n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||fE.isFilter(null==(r=t.get("field"))?void 0:r.get("type"))}))}},XNe=function(e){var t=e.filter,n=e.bordered,r=void 0===n||n,o=e.className,i=e.defaultValue,a=void 0===i?"":i,l=e.onFieldChange,c=void 0===l?function(){}:l,s=JNe({defaultValue:a}).filterFields,d=yre(oC),f=(null==d?void 0:d.getValue("modal.customModalContainer"))||document.body,p=yre(Ooe);return u.a.createElement(x.a,{className:I()("lakex-table-filter-field-select",o),defaultValue:a,dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){var n,r=Z_(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));c(t,null==(n=null==r?void 0:r.get("field"))?void 0:n.toJSON())},bordered:r,getPopupContainer:function(){return f}},nk(s,(function(e){var t,n,r,o=null==p?void 0:p.getFieldIcon(e.get("field").get("type"));return u.a.createElement(x.a.Option,{value:null==(t=e.get("field"))?void 0:t.get("uuid"),key:null==(n=e.get("field"))?void 0:n.get("uuid")},o&&u.a.createElement(o,null),u.a.createElement("div",{className:"lakex-table-filter-field-select-name"},null==(r=e.get("field"))?void 0:r.get("name")))})))},ZNe=function(e){var t=e.filter,n=e.onFuncChange,r=yre(GNe),o=yre(oA),i=null==o?void 0:o.getField(t.field_uuid),a=null==r?void 0:r.getConditions(null==i?void 0:i.get("type"));return(null==a?void 0:a.some((function(e){return e.func===t.func})))||n(t,null==a?void 0:a[0].func),{conditions:a}},QNe=function(e){var t=e.filter,n=e.onFuncChange,r=void 0===n?function(){}:n,o=ZNe({filter:t,onFuncChange:r}).conditions,i=yre(oC),a=(null==i?void 0:i.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(x.a,{className:"lakex-table-filter-func-select",value:t.func||(null==o?void 0:o[0].func),dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),style:{marginRight:5,width:110},onChange:function(e){r(t,e)},getPopupContainer:function(){return a}},null==o?void 0:o.map((function(e){return u.a.createElement(x.a.Option,{value:e.func,key:e.func},e.text)})))},eBe=function(e){var t=e.filter,n=yre(oA),r=yre(GNe);return{getDateExpected:function(e){return r.getDateExpected(e)},getMentionValues:function(){return r.getMentionFieldValues(t.field_uuid)},field:n.getField(t.field_uuid)}},tBe=function(e){var t,n,r=e.filter,o=e.onExpectedChange,a=void 0===o?function(){}:o,l=yre(oA),c=yre(oC),s=(null==c?void 0:c.getValue("modal.customModalContainer"))||document.body,d=eBe({filter:r}),f=d.getMentionValues,p=d.getDateExpected,v=d.field,h=null==v?void 0:v.get("type");if(lE.includes(r.func))return null;if(h===HC.SELECT||h===HC.MULTI_SELECT){var g=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(g=null==r?void 0:r.expected.split(","));var m=l.getFieldOptions(v.get("uuid")),y=Q_(m,(function(e){return g.includes(e.get("uuid"))})).map((function(e){return e.get("uuid")}));n=u.a.createElement(x.a,{value:y,dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){if(null!=e&&""!==e&&0!==e.length)if("select"!==h){var t=[];if(r.field){var n=l.getFieldOptions(r.field.uuid);null==n||n.forEach((function(n){e.includes(n.get("uuid"))&&t.push(n.uuid)})),a(r,t)}}else a(r,e);else a(r,"")},mode:"multiSelect"===h?"multiple":null,filterOption:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return null==(t=null==(e=null==r?void 0:r.children)?void 0:e.toLowerCase())?void 0:t.includes(n.toLowerCase())},getPopupContainer:function(){return s}},nk(m,(function(e,t){return u.a.createElement(x.a.Option,{key:t,value:e.get("uuid")},e.get("name"))})))}else if(h===HC.CHECKBOX)n=u.a.createElement("span",{className:"lakex-table-filter-checkbox"},u.a.createElement(k.a,{defaultChecked:!0===Boolean(r.expected),onChange:function(e){a(r,e.target.checked?"true":"false")}}));else if(fE.isMentionLike(h)){var b=f()||[],w={};null==b||b.forEach((function(e){w[e.uid]=e}));var _=(null==r?void 0:r.expected)?r.expected.split(","):[];n=u.a.createElement(x.a,{value:_,dropdownClassName:"lakex-table-menu-item lakex-table-field-mention-select",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){var t=e.map((function(e){return w[e]})).filter((function(e){return!!e.uid}));t.sort((function(e,t){return e.name.localeCompare(t.name)})),a(r,0===e.length?"":t.map((function(e){return e.uid})).join(","))},mode:"multiple",filterOption:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return null==(t=null==(e=null==r?void 0:r.children[1])?void 0:e.toLowerCase())?void 0:t.includes(n.toLowerCase())},getPopupContainer:function(){return s}},null==b?void 0:b.map((function(e,t){return u.a.createElement(x.a.Option,{key:t,value:e.uid+""},u.a.createElement("span",{className:"lakex-table-selector-avatar"},u.a.createElement("img",{src:e.icon})),e.name)})))}else if(fE.isDateLike(h)){var C=!r.expected||B_(r.expected);n=u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,{value:C?"custom":r.expected,dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),style:{marginRight:5,width:110},onChange:function(e){a(r,"custom"===e?"":e)},getPopupContainer:function(){return s}},null==(t=p(r.func))?void 0:t.map((function(e){return u.a.createElement(x.a.Option,{value:e.name,key:e.name},e.text)}))),C&&u.a.createElement("div",{className:"lakex-table-select-expected-datepicker"},u.a.createElement(Ihe,{defaultValue:r.expected?i()(r.expected):null,autoFocus:focus,onChange:function(){var e;a(r,null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=u.a.createElement(Ere,{placeholder:Lw("请输入"),defaultValue:r.expected,onChange:function(e){a(r,e.target.value)}});return u.a.createElement("div",{className:"lakex-table-select-expected"},n)},nBe=function(e){var t=e.index,n=e.filter,r=e.onOperatorChange,o=void 0===r?function(){}:r,i=yre(oC),a=(null==i?void 0:i.getValue("modal.customModalContainer"))||document.body;if(0===t)return u.a.createElement("div",{className:"lakex-table-filter-where"},Lw("当"));if(1===t)return u.a.createElement(x.a,{value:n.operator,dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){o(n,e)},style:{width:"70px",marginRight:5},getPopupContainer:function(){return a}},u.a.createElement(x.a.Option,{value:QC.And},Lw("并且")),u.a.createElement(x.a.Option,{value:QC.Or},Lw("或者")));var l=n.operator===QC.And?Lw("并且"):Lw("或者");return u.a.createElement("div",{className:"lakex-table-filter-where"},l)},rBe=function(e){var t=e.filter,n=e.index,r=void 0===n?0:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onFieldChange,l=void 0===a?function(){}:a,c=e.onExpectedChange,s=void 0===c?function(){}:c,d=e.onFuncChange,f=void 0===d?function(){}:d,p=e.onOperatorChange,v=void 0===p?function(){}:p;return u.a.createElement("div",{className:"lakex-table-filter-item"},u.a.createElement(oue,{type:"Close",onClick:function(){i(t)},size:14}),u.a.createElement(nBe,{index:r,filter:t,onOperatorChange:v}),u.a.createElement(XNe,{filter:t,defaultValue:t.field_uuid,onFieldChange:l}),u.a.createElement(QNe,{filter:t,onFuncChange:f}),u.a.createElement(tBe,{filter:t,onExpectedChange:s}))},oBe=function(e){var t=e.onAddFilter,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-add-filter",onClick:n},u.a.createElement(oue,{type:"Add"}),Lw("添加筛选"))};function iBe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aBe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aBe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function aBe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var uBe=function(){var e=yre(nR),t=yre(oA),n=yre(GNe),r=t.getActiveView(),o=t.getViewFilters(null==r?void 0:r.get("uuid")).toJSON(),i=t.getViewConfig(),u=WI(Object(a.useState)(o||[]),2),l=u[0],c=u[1];return{state:{filters:l},fields:t.getAllFields(),onAddFilter:function(){var t=gw(l),r=null==n?void 0:n.getDefaultFilter();r&&(t.push(r),null==e||e.execCommand("createFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:r}),c(t))},onRemoveFilter:function(t){var n=gw(l);qu(n,(function(e){return e.uuid===t.uuid})),null==e||e.execCommand("removeFilter",{filterId:t.uuid}),c(n)},onFieldChange:function(t,r){var o,a,u=gw(l),s=iBe(u);try{for(s.s();!(a=s.n()).done;){var d=a.value;if(d.uuid===t.uuid){d.field_uuid=r.uuid;var f=n.getConditions(null==r?void 0:r.type);d.func=null==(o=f[0])?void 0:o.func,d.expected=null,(null==r?void 0:r.type)===HC.CHECKBOX&&(d.expected="true"),d.field=r,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:d}),c(u);break}}}catch(e){s.e(e)}finally{s.f()}},onFuncChange:function(t,n){var r,o=gw(l),a=iBe(o);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(u.uuid===t.uuid){u.func=n,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:u}),c(o);break}}}catch(e){a.e(e)}finally{a.f()}},onExpectedChange:function(t,n){var r,o=gw(l),a=iBe(o);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(u.uuid===t.uuid){Array.isArray(n)&&(n=n.join(",")),u.expected=n,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:u}),c(o);break}}}catch(e){a.e(e)}finally{a.f()}},onOperatorChange:function(t,n){var r,o=gw(l),a=iBe(o);try{for(a.s();!(r=a.n()).done;){r.value.operator=n}}catch(e){a.e(e)}finally{a.f()}null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:o}),c(o)}}},lBe=function(){var e,t=uBe(),n=t.state,r=t.onAddFilter,o=t.onRemoveFilter,i=t.onFieldChange,a=t.onFuncChange,l=t.onExpectedChange,c=t.onOperatorChange;return e=0===n.filters.length?u.a.createElement(YNe,null):n.filters.map((function(e,t){return u.a.createElement(rBe,{key:e.field_uuid+"_"+t,index:t,filter:e,onRemove:o,onFieldChange:i,onFuncChange:a,onExpectedChange:l,onOperatorChange:c})})),u.a.createElement("div",{className:"lakex-table-filter-modal"},e,u.a.createElement(oBe,{onAddFilter:r}))},cBe=function(e){return e.showCloseIcon||e.title?u.a.createElement("div",{className:"lakex-table-ui-popup-header",onClick:e.onClose},e.title&&u.a.createElement("h1",{className:"lakex-table-ui-popup-header-title"},e.title),e.showCloseIcon&&u.a.createElement(oue,{className:"lakex-table-ui-popup-close-icon",type:"Close",size:18})):null},sBe=function(e){var t=e.title,n=e.showCloseIcon,r=e.onClose,o=e.children;return u.a.createElement("div",{className:I()("lakex-table-ui-popup")},u.a.createElement(cBe,{title:t,onClose:r,showCloseIcon:!!n}),u.a.createElement("div",{className:I()("lakex-table-ui-popup-content")},o))};function dBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fBe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:e.maxWidth},e.style&&e.style);return u.a.createElement("span",{style:t,className:I()("lakex-table-ui-text-ellipsis",e.className)},e.children)};function pBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vBe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hBe=function(e){return u.a.createElement(j.a,vBe(vBe({},e),{},{className:I()("lakex-table-h5-switch",e.className)}))};function gBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mBe=function(e){var t=e.options,n=e.className,r=e.style,o=e.onChange,i=e.defaultValue,l=WI(Object(a.useState)(i),2),c=l[0],s=l[1],d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r&&r);Array.isArray(t)&&2===t.length||console.error("options length is valid!");return u.a.createElement("div",{style:d,className:I()("lakex-table-h5-choose",n)},t.map((function(e){return u.a.createElement("div",{key:e.value,className:I()("lakex-table-h5-choose-item",c===e.value&&"active"),onClick:function(){return s((t=e).value),void o(t);var t}},u.a.createElement("span",{className:"lakex-table-h5-choose-item-desc"},e.label))})))},yBe=function(e){var t=WI(Object(a.useState)(e.list),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-switch"},n.map((function(t){return u.a.createElement("li",{className:"lakex-table-ui-item-switch",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},t.icon,u.a.createElement(fBe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),u.a.createElement(hBe,{disabled:t.disabled,checked:t.checked,onChange:function(o){t.checked=o,e.onSwitch(t,o),r(gw(n))}}))})))},bBe=function(e){var t=WI(Object(a.useState)(e.defaultValue),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-check"},e.list.map((function(t){var o=Array.isArray(n)?n.includes(t.key):t.key===n;return u.a.createElement("li",{className:"lakex-table-ui-item-check",key:t.key,onClick:function(){if(e.multiple){var o=gw(n),i=o.findIndex((function(e){return e===t.key}));i>-1?o.splice(i,1):o.push(t.key),r(o),e.onCheck(e.list.filter((function(e){return o.includes(e.key)})))}else r(t.key),e.onCheck(t)}},u.a.createElement("div",{className:"lakex-table-ui-item-left"},t.icon,u.a.createElement(fBe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),o&&u.a.createElement(oue,{type:"Check",size:"16"}))})))},wBe=function(e){var t=WI(Object(a.useState)(e.list),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-choose"},n.map((function(t){return u.a.createElement("li",{className:"lakex-table-ui-item-choose",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},u.a.createElement(fBe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),u.a.createElement(mBe,{defaultValue:t.defaultValue,options:t.options,onChange:function(o){t.defaultValue=o.value,e.onChoose(t,o),r(gw(n))}}))})))},_Be=function(e){var t=WI(Object(a.useState)(e.list),2),n=t[0],r=t[1];return Zae((function(){r(e.list)}),[e.list]),u.a.createElement("ul",{className:"lakex-table-ui-list-select"},n.map((function(t){var n=t.options.find((function(e){return e.value===t.defaultValue}));return u.a.createElement("li",{className:"lakex-table-ui-item-select",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},u.a.createElement(fBe,{className:"lakex-table-ui-item-name"},t.title)),u.a.createElement("div",{className:"lakex-table-ui-item-right",onClick:function(){e.onSelect(t)}},u.a.createElement(fBe,{className:"lakex-table-ui-item-name"},(null==n?void 0:n.label)||""),u.a.createElement(oue,{type:"ArrowRight",size:18})))})))};function kBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var CBe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style&&e.style);return u.a.createElement("div",{className:I()("lakex-table-empty-no-data",e.className),style:t},u.a.createElement("div",{className:"intrinsic-aspect-ratio-container"},u.a.createElement("div",{className:"lakex-table-empty-no-data-inner"})),e.desc&&u.a.createElement("p",{className:"lakex-table-empty-no-data-desc"},e.desc),e.children&&e.children)},EBe=function(e){var t=e.text,n=void 0===t?"":t,r=e.prefixIcon,o=void 0===r?"":r,i=e.className,a=e.style,l=void 0===a?{}:a,c=e.border,s=e.children,d=e.autoWrap;return u.a.createElement("div",{className:I()("lakex-table-select-bar",c&&"lakex-table-select-bar-has-border",d&&"lakex-table-select-bar-auto-wrap",i),onClick:e.onClick,style:l},o&&u.a.createElement("span",{className:"prefix-icon"},o),s||u.a.createElement(fBe,{className:"lakex-table-select-bar-text"},n),u.a.createElement(oue,{type:"ArrowDown",className:"arrow-down"}))};function OBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SBe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}EBe.defaultProps={border:!0,autoWrap:!1};var xBe=function(e){var t=e.option,n=e.style,r=e.className,o=yre($P),i=!!t.color?{background:o.getRenderColor(t.color),color:o.getRenderTextColor(t.color)}:{},a=SBe(SBe({},n&&n),i);return u.a.createElement(fBe,{className:I()("lakex-table-select-tag",r),style:a},t.value)};function jBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var DBe=function(e){var t=e.mention,n=e.style,r=e.className,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n&&n);return u.a.createElement("div",{className:I()("lakex-table-mention-tag",r),style:o},u.a.createElement("img",{className:"lakex-table-mention-tag-avatar",src:t.avatar_url,alt:"avatar"}),u.a.createElement(fBe,{className:"lakex-table-mention-tag-name"},t.name))},ABe=function(e){var t=e.onAddFilter,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(CBe,{desc:Lw("你还未进行任何筛选"),className:"no-data"}),u.a.createElement(m.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},u.a.createElement(oue,{type:"Add"}),Lw("添加筛选条件")))},RBe=function(e){var t=e.index,n=e.filter,r=e.onOperatorChange,o=void 0===r?function(){}:r,i=yre(lk),l=yre(dye),c=i.getValue("modal.mode"),s=Object(a.useCallback)((function(){l.close("filter-select-operator")}),[]);if(0===t)return u.a.createElement("div",{className:"lakex-table-h5-filter-where"},Lw("当"));var d=n.operator===QC.And?Lw("并且"):Lw("或者");return u.a.createElement("div",{className:"lakex-table-h5-filter-where"},u.a.createElement(EBe,{className:"lakex-table-h5-filter-col",text:d,onClick:function(){l.open("filter-select-operator",{initialState:{value:n.operator}})}}),u.a.createElement(lbe,{id:"filter-select-operator",mode:c,hasMask:c===sye.DRAWER,hasAnimation:c===sye.DRAWER,position:c===sye.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:s,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:t.value,list:[{key:QC.And,title:Lw("并且")},{key:QC.Or,title:Lw("或者")}],onCheck:function(e){s(),o(n,e.key)}}))}}))},FBe=function(e){var t=e.filter,n=e.className,r=void 0===n?"":n,o=e.defaultValue,i=void 0===o?"":o,l=e.onFieldChange,c=void 0===l?function(){}:l,s=JNe({defaultValue:i}).filterFields,d=yre(lk),f=yre(oA),p=yre(dye),v=d.getValue("modal.mode"),h=yre(Ooe),g=Object(a.useCallback)((function(){p.close("filter-field-select")}),[]);if(!t||!s)return null;var m=f.getField(t.field_uuid)||s.get(0).get("field");if(!m)return null;var y=h.getFieldIcon(m.get("type"));return u.a.createElement("div",{className:r},u.a.createElement(EBe,{prefixIcon:y,className:"lakex-table-h5-filter-col",text:m.get("name"),onClick:function(){p.open("filter-field-select",{initialState:{value:i}})}}),u.a.createElement(lbe,{id:"filter-field-select",mode:v,hasMask:v===sye.DRAWER,hasAnimation:v===sye.DRAWER,position:v===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var n=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:g,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:n.value,list:nk(s,(function(e){var t=e.get("field");if(!t)return null;var n=h.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){var n,r=Z_(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e.key}));c(t,null==(n=null==r?void 0:r.get("field"))?void 0:n.toJSON()),g()}}))}}))},IBe=function(e){var t,n=e.filter,r=e.className,o=void 0===r?"":r,i=e.onFuncChange,l=void 0===i?function(){}:i,c=ZNe({filter:n,onFuncChange:l}).conditions,s=yre(lk),d=yre(dye),f=s.getValue("modal.mode"),p=Object(a.useCallback)((function(){d.close("filter-func-select")}),[]),v=n.func||(null==c?void 0:c[0].func),h=(null==(t=null==c?void 0:c.find((function(e){return e.func===v})))?void 0:t.text)||(null==c?void 0:c[0].text);return u.a.createElement("div",{className:o},u.a.createElement(EBe,{className:"lakex-table-h5-filter-func",text:h,onClick:function(){d.open("filter-func-select",{initialState:{value:v}})}}),u.a.createElement(lbe,{id:"filter-func-select",mode:f,hasMask:f===sye.DRAWER,hasAnimation:f===sye.DRAWER,position:f===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:p,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:t.value,list:c.map((function(e){return{key:e.func,title:e.text}})),onCheck:function(e){l(n,e.key),p()}}))}}))},PBe=function(e){var t,n,r=e.filter,o=e.onExpectedChange,a=void 0===o?function(){}:o,l=eBe({filter:r}),c=l.getMentionValues,s=l.getDateExpected,d=l.field,f=yre(lk),p=yre(dye),v=yre(oA),h=f.getValue("modal.mode"),g=d.get("type");if(lE.includes(r.func))return null;if(g===HC.SELECT||g===HC.MULTI_SELECT){var m=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(m=null==r?void 0:r.expected.split(","));var y=v.getFieldOptions(d.get("uuid")),b=Q_(y,(function(e){return m.includes(e.get("uuid"))})),w=nk(b,(function(e){return e.get("uuid")}));n=u.a.createElement(u.a.Fragment,null,u.a.createElement(EBe,{className:"lakex-table-h5-filter-col",text:nk(b,(function(e){return e.get("name")})).join(", "),onClick:function(){p.open("filter-expected-select",{initialState:{value:w}})}},(!w||!w.length)&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},Lw("请选择"))),u.a.createElement(lbe,{id:"filter-expected-select",mode:h,hasMask:h===sye.DRAWER,hasAnimation:h===sye.DRAWER,position:h===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:function(){p.close("filter-expected-select")},showCloseIcon:!0},u.a.createElement(bBe,{multiple:g===HC.MULTI_SELECT,defaultValue:null==t?void 0:t.value,list:nk(y,(function(e){return{key:e.get("uuid"),title:u.a.createElement(xBe,{option:{color:e.get("color"),value:e.get("name")}})}})),onCheck:function(e){if(null!=e&&""!==e&&0!==e.length){if("select"===g)return a(r,e.key),void p.close("filter-expected-select");var t=[];y.forEach((function(n){e.some((function(e){return e.key===n.uuid}))&&t.push(n.uuid)})),a(r,t)}else a(r,"")}}))}}))}else if("checkbox"===g)n=u.a.createElement("span",{className:"lakex-table-h5-filter-checkbox"},u.a.createElement(k.a,{defaultChecked:!0===Boolean(r.expected),onChange:function(e){a(r,e.target.checked?"true":"false")}}));else if(fE.isMentionLike(g)){var _=c()||[],C={};null==_||_.forEach((function(e){C[e.uid]=e}));var E=(null==r?void 0:r.expected)?r.expected.split(","):[];n=u.a.createElement(u.a.Fragment,null,u.a.createElement(EBe,{className:"lakex-table-h5-filter-col",text:E.map((function(e){return C[e]})).map((function(e){return e.name})).join(", "),onClick:function(){p.open("filter-expected-mention",{initialState:{value:E}})}},(!E||!E.length)&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},Lw("请选择"))),u.a.createElement(lbe,{id:"filter-expected-mention",mode:h,hasMask:h===sye.DRAWER,hasAnimation:h===sye.DRAWER,position:h===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:function(){p.close("filter-expected-mention")},showCloseIcon:!0},_.length?u.a.createElement(bBe,{multiple:!0,defaultValue:null==t?void 0:t.value,list:_.map((function(e,t){return{key:String(e.uid),title:u.a.createElement(DBe,{mention:{avatar_url:e.icon,name:e.name}})}})),onCheck:function(e){p.close("filter-expected-mention"),null!=e&&""!==e&&0!==e.length?a(r,0===e.length?"":e.map((function(e){return e.key})).join(",")):a(r,"")}}):u.a.createElement(CBe,{desc:Lw("暂无人员")}))}}))}else if(fE.isDateLike(g)){var O=!r.expected||B_(r.expected),S=O?"custom":r.expected;r.expected||(S="custom"),n=u.a.createElement(u.a.Fragment,null,u.a.createElement(EBe,{className:"lakex-table-h5-filter-col",text:null==(t=cE.find((function(e){return e.name===S})))?void 0:t.text,onClick:function(){p.open("filter-expected-date",{initialState:{value:S}})}},!S&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},Lw("请选择"))),u.a.createElement(lbe,{id:"filter-expected-date",mode:h,hasMask:h===sye.DRAWER,hasAnimation:h===sye.DRAWER,position:h===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:function(){p.close("filter-expected-mention")},showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:null==t?void 0:t.value,list:s(r.func).map((function(e,t){return{key:e.name,title:e.text}})),onCheck:function(e){"custom"===e.key?a(r,""):a(r,e.key),p.close("filter-expected-date")}}))}}),O&&u.a.createElement("div",{className:"lakex-table-h5-select-expected-datepicker"},u.a.createElement(Ihe,{defaultValue:r.expected?i()(r.expected):null,autoFocus:focus,onChange:function(){var e;a(r,null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=u.a.createElement(Ere,{className:"lakex-table-h5-filter-expected-input",placeholder:Lw("请输入"),defaultValue:r.expected,onChange:function(e){a(r,e.target.value)}});return u.a.createElement("div",{className:"lakex-table-h5-filter-expected"},n)},MBe=function(e){var t=e.filter,n=e.index,r=e.onRemove,o=e.onOperatorChange,i=e.onFieldChange,a=e.onFuncChange,l=e.onExpectedChange;return u.a.createElement("div",{className:"lakex-table-h5-filter-item",key:n},u.a.createElement(RBe,{index:n,filter:t,onOperatorChange:o}),u.a.createElement("div",{className:"lakex-table-h5-filter-item-content"},u.a.createElement("div",{className:"lakex-table-h5-filter-item-content-inner"},u.a.createElement("div",{className:"lakex-table-h5-filter-item-content-head"},u.a.createElement(FBe,{className:"lakex-table-h5-filter-item-field",filter:t,defaultValue:t.field_uuid,onFieldChange:i}),u.a.createElement(IBe,{className:"lakex-table-h5-filter-item-func",filter:t,onFuncChange:a})),u.a.createElement("div",null,u.a.createElement(PBe,{filter:t,onExpectedChange:l}))),u.a.createElement(oue,{type:"Delete",size:18,onClick:function(){r(t)}})))},TBe=function(e){var t=uBe(),n=t.state,r=t.onRemoveFilter,o=t.onFieldChange,i=t.onFuncChange,a=t.onExpectedChange,l=t.onOperatorChange,c=t.onAddFilter,s=yre(dye);return u.a.createElement(sBe,{title:Lw("筛选"),onClose:function(){null==s||s.close("filter")},showCloseIcon:!0},0===n.filters.length?u.a.createElement(ABe,{onAddFilter:c}):u.a.createElement("div",{className:"lakex-table-h5-filter"},n.filters.map((function(e,t){return u.a.createElement(MBe,{key:e.field_uuid+"_"+t,index:t,filter:e,onRemove:r,onFieldChange:o,onFuncChange:i,onExpectedChange:a,onOperatorChange:l})})),u.a.createElement(m.a,{className:"lakex-table-h5-filter-add",onClick:function(){return c()}},u.a.createElement(oue,{type:"Add"}),Lw("添加筛选条件"))))},NBe=Object.defineProperty,BBe=Object.getOwnPropertyDescriptor,VBe=function(e,t,n,r){for(var o,i=r>1?void 0:r?BBe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NBe(t,n,i),i},LBe=function(){return Ew((function e(){var t=this;_w(this,e),this._getTitle=function(){var e=t._readService.getActiveView();if(!e)return Lw("筛选");var n=t._readService.getViewFilters(e.get("uuid"));return n&&0!==n.length?Lw("$1个筛选",n.length):Lw("筛选")},this._getActive=function(){var e=t._readService.getActiveView();if(!e)return!1;var n=t._readService.getViewFilters(e.get("uuid"));return n&&n.length>0}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"filter",icon:"ViewerFilter",tooltip:this._getTitle,visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.FORM)},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("filter",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"filter",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?TBe:lBe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"filterByField",name:function(e){var n=e.fieldId,r=t._readService.getActiveView();return Lw(Z_(t._readService.getViewFilters(null==r?void 0:r.get("uuid")),(function(e){return e.get("field_uuid")===n}))?"取消筛选":"按本列筛选")},icon:"ViewerFilter",hotkey:"",visible:function(e){return e.from===rRe.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView(),a=Z_(t._readService.getViewFilters(null==i?void 0:i.get("uuid")),(function(e){return e.get("field_uuid")===o})),u=null;if(a)u=null==(n=t._commandService)?void 0:n.execCommand("removeFilter",{filterId:a.get("uuid")});else{var l=t._filterService.getFilterByFieldId(o);u=null==(r=t._commandService)?void 0:r.execCommand("createFilter",{viewId:null==i?void 0:i.get("uuid"),filter:l});var c=t._workbenchContext.$root.querySelector("#filter");c&&t._modalService.open("filter",{position:{origin:c,placement:"bottom"}})}(null==u?void 0:u.isSuccess)?t._modalService.close("context-menu-modal"):(null==u?void 0:u.error)&&v.a.error(u.error.message)}})}}],[{key:"pluginModule",value:function(){return dd().register(GNe).register(this)}}])}();LBe.pluginName="workbench-filter",VBe([Ks(dye)],LBe.prototype,"_modalService",2),VBe([Ks(oA)],LBe.prototype,"_readService",2),VBe([Ks(nR)],LBe.prototype,"_commandService",2),VBe([Ks(GNe)],LBe.prototype,"_filterService",2),VBe([Ks(hre)],LBe.prototype,"_workbenchContext",2),VBe([Ks(lk)],LBe.prototype,"_configuration",2),LBe=VBe([Gs({contrib:[sre,jme,fye,dIe]})],LBe);var zBe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.groupField,r=e.groupOption,o=e.color,i=e.onSubmit,l=function(e){var t=e.groupField,n=e.groupOption,r=e.defaultColor,o=e.onSubmit,i=e.ref,u=yre($P),l=WI(Object(a.useState)((null==n?void 0:n.color)||r||$P.getNextColor("")),2),c=l[0],s=l[1],d=WI(Object(a.useState)(null==n?void 0:n.name),2),f=d[0],p=d[1],v=Object(a.useRef)(null);Zae((function(){var e;s((null==n?void 0:n.color)||r||$P.getNextColor("")),p(null==n?void 0:n.name),null==(e=v.current)||e.focus()}),[null==n?void 0:n.color,null==n?void 0:n.name]);var h=Object(a.useCallback)((function(){null==o||o({fieldId:t.get("uuid"),fieldOption:{name:f,color:c}})}),[t.get("uuid"),f,c]);return Object(a.useImperativeHandle)(i,(function(){return{onSubmit:function(){h()}}})),{inputRef:v,state:{name:f,optionColor:c},labelColor:u,onPressEnter:h,onChange:function(e){p(e.target.value)},onChangeColor:function(e){s(e)}}}({groupField:n,groupOption:r,defaultColor:e.defaultColor,onSubmit:i,ref:t}),c=l.inputRef,d=l.state,f=l.labelColor,v=l.onChange,h=l.onChangeColor,g=l.onPressEnter,m=null;return o&&(m=u.a.createElement(p.a,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:u.a.createElement(bre,{colorSource:gw(VP),activeColor:d.optionColor,onSelect:h})},u.a.createElement("span",{className:"lakex-table-group-item-option-color",style:{background:f.getRenderColor(d.optionColor)}}))),u.a.createElement("div",{className:"lakex-table-group-item-input"},u.a.createElement("span",{className:"lakex-table-group-item-input-content"},m,u.a.createElement(s.a,{ref:c,value:d.name,onChange:function(e){v(e)},onPressEnter:function(){g()},autoFocus:!0})))})));function UBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HBe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UBe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UBe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qBe=function(e){var t=e.groupField,n=e.groupOption,r=void 0===n?{}:n,o=e.onSubmit;return u.a.createElement("div",{className:"lakex-table-group-item-mention"},u.a.createElement(Yke,{id:t.get("uuid"),defaultValue:(null==r?void 0:r.value)||[],onChange:function(e){var n=e.map((function(e){return e.uid})).join(",");null==o||o({fieldId:t.get("uuid"),fieldOption:HBe(HBe({},r),{},{uuid:n,name:n,value:n,users:e})})}}))},WBe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r=e.initialState.groupField,o=Ywe(null==r?void 0:r.get("uuid")),i=o.field,l=o.fieldType,c=o.fieldOptions,s=yre(nR),d=yre(dye),f=Object(a.useRef)(null),p=Object(a.useCallback)((function(e){var t,n,r,o,i=e.fieldId,a=e.fieldOption;n=(t={fieldId:i,fieldOption:a}).fieldId,r=t.fieldOption,(null==(o=s.execCommand("createFieldOption",{fieldId:n,fieldOption:r}))?void 0:o.isSuccess)?d.close("addGroupItem"):(null==o?void 0:o.error)&&v.a.error(o.error.message)}),[]),h=Object(a.useCallback)((function(e){!function(e){var t=e.fieldId,n=e.fieldOption;if(n.name){var r=s.execCommand("createFieldOption",{fieldId:t,fieldOption:n});(null==r?void 0:r.isSuccess)?d.close("addGroupItem"):(null==r?void 0:r.error)&&v.a.error(r.error.message)}}({fieldId:e.fieldId,fieldOption:e.fieldOption})}),[]);if(Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;l===HC.SELECT&&(null==(e=f.current)||e.onSubmit())}}})),l===HC.MENTION)return u.a.createElement(qBe,{groupField:i,onSubmit:p});var g=$P.getNextColor((null==(n=null==c?void 0:c.get(c.length-1))?void 0:n.get("color"))||"");return i?u.a.createElement(zBe,{ref:f,groupField:i,color:null==r?void 0:r.get("color"),defaultColor:g,onSubmit:h}):null}))),$Be=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r,o=null==(n=e.initialState)?void 0:n.groupField,i=null==(r=e.initialState)?void 0:r.groupOption,l=yre(nR),c=yre(dye),s=Object(a.useRef)(null),d=Object(a.useCallback)((function(e){var t,n,r=e.fieldId,o=e.fieldOption;t={fieldId:r,fieldOption:o}.fieldOption,(null==(n=l.execCommand("updateFieldOption",{optionId:i.uuid,fieldOption:t}))?void 0:n.isSuccess)&&c.close("editGroupItem"),(null==n?void 0:n.error)&&v.a.error(n.error.message)}),[]),f=Object(a.useCallback)((function(e){!function(e){var t=e.fieldOption;if(t.name!==i.name||t.color!==i.color){var n=l.execCommand("updateFieldOption",{optionId:i.uuid,fieldOption:t});(null==n?void 0:n.isSuccess)?c.close("editGroupItem"):(null==n?void 0:n.error)&&v.a.error(n.error.message)}else c.close("editGroupItem")}({fieldId:e.fieldId,fieldOption:e.fieldOption})}),[]);return Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;(null==o?void 0:o.get("type"))===HC.SELECT&&(null==(e=s.current)||e.onSubmit())}}})),o?(null==o?void 0:o.get("type"))===HC.MENTION?u.a.createElement(qBe,{groupField:o,groupOption:i,onSubmit:d}):u.a.createElement(zBe,{ref:s,groupField:o,groupOption:i,color:null==o?void 0:o.get("color"),onSubmit:f}):null}))),GBe=Object.defineProperty,KBe=Object.getOwnPropertyDescriptor,YBe=function(e,t,n,r){for(var o,i=r>1?void 0:r?KBe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GBe(t,n,i),i},JBe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e,t,n=this;null==(e=this._groupItemService)||e.onShowEditGroup((function(e){var t,r=e.target,o=e.groupField,i=e.groupOption;null==(t=n._modalService)||t.open("editGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:o,groupOption:i}})})),null==(t=this._groupItemService)||t.onShowNewGroup((function(e){var t,r=e.target,o=e.groupField;null==(t=n._modalService)||t.open("addGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:o}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"addGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:WBe}),e.registerItem({id:"editGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:$Be})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"groupByField",name:function(e){var n=e.fieldId,r=t._readService.getActiveView(),o=t._readService.getViewGroup(null==r?void 0:r.get("uuid"));return Lw(o&&o.field.get("uuid")===n?"取消分组":"按本列分组")},icon:"ViewerGroup",hotkey:"",visible:function(e){return e.from===rRe.HEADER},onClick:function(e){var n,r,o,i=e.initialState,a=t._readService.getActiveView(),u=i.fieldId;if(a){var l=t._readService.getViewGroup(a.get("uuid")),c=l&&l.field.get("uuid")===u,s=null;(null==(s=l?c?null==(r=t._commandService)?void 0:r.execCommand("removeGridGroup",{viewId:a.get("uuid")}):null==(o=t._commandService)?void 0:o.execCommand("updateGridGroup",{viewId:a.get("uuid"),group:{field_uuid:u,type:oE.ASC}}):null==(n=t._commandService)?void 0:n.execCommand("createGridGroup",{viewId:a.get("uuid"),group:{field_uuid:u,type:oE.ASC}}))?void 0:s.isSuccess)?t._modalService.close("context-menu-modal"):(null==s?void 0:s.error)&&v.a.error(s.error.message)}}})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();JBe.pluginName="workbench-group",YBe([Ks(jSe),As()],JBe.prototype,"_groupItemService",2),YBe([Ks(dye)],JBe.prototype,"_modalService",2),YBe([Ks(oA)],JBe.prototype,"_readService",2),YBe([Ks(nR)],JBe.prototype,"_commandService",2),JBe=YBe([Gs({contrib:[sre,fye,dIe]})],JBe);var XBe=function(e){var t,n,r,o=e.className,i=e.defaultValue,a=void 0===i?"":i,l=e.onFieldSelect,c=void 0===l?function(){}:l,s=(t={defaultValue:a},n=yre(oA),r=n.getActiveView(),{sortFields:Q_(n.getViewFields(null==r?void 0:r.get("uuid"),!1),(function(e){var n,r;return!(!t.defaultValue||(null==(n=e.get("field"))?void 0:n.get("uuid"))!==t.defaultValue)||fE.isSort(null==(r=e.get("field"))?void 0:r.get("type"))}))}).sortFields,d=yre(Ooe),f=yre(oC),p=(null==f?void 0:f.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(x.a,{className:"lakex-table-sort-field-select ".concat(o),defaultValue:a,dropdownClassName:"lakex-table-sort-field-select-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){var t=Z_(s,(function(t){return t.get("field_uuid")===e}));c(null==t?void 0:t.get("field"))},bordered:!1,getPopupContainer:function(){return p}},nk(s,(function(e){var t=e.get("field");if(!t)return null;var n=null==d?void 0:d.getFieldIcon(t.get("type"));return u.a.createElement(x.a.Option,{value:t.get("uuid"),key:t.get("uuid")},n&&u.a.createElement(n,null),u.a.createElement("div",{className:"lakex-table-sort-field-select-name"},t.get("name")))})))},ZBe="lakex-table-sort-modal-empty",QBe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:ZBe},u.a.createElement("div",{className:"".concat(ZBe,"-empty-desc")},Lw("还未设置任何排序")),u.a.createElement(XBe,{defaultValue:Lw("选择一列进行排序"),onFieldSelect:n}))},eVe=function(e){var t=e.auto,n=void 0!==t&&t,r=e.onUpdateAuto,o=void 0===r?function(){}:r;return u.a.createElement("div",{className:"lakex-table-sort-setting"},u.a.createElement("h2",{className:"lakex-table-sort-setting-title"},Lw("排序设置")),u.a.createElement("div",{className:"lakex-table-sort-setting-action"},u.a.createElement("span",null,Lw("保持排序")),u.a.createElement(j.a,{checked:n,onChange:o,size:"small"})))},tVe=function(e){switch(e){case"select":case"multiSelect":return{asc:Lw("选项顺序"),desc:Lw("选项倒序")};case"number":case"phone":return{asc:Lw("从小到大"),desc:Lw("从大到小")};default:return{asc:Lw("升序"),desc:Lw("降序"),style:{padding:"0 16px"}}}},nVe=function(e){var t=e.sort,n=e.field,r=e.onUpdateType,o=void 0===r?function(){}:r;if(!n)return null;if(fE.isCheckbox(n.type))return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},u.a.createElement(k.a,{checked:!1},u.a.createElement(oue,{type:"RightArrow"})),u.a.createElement(k.a,{checked:!0}))),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},u.a.createElement(k.a,{checked:!0},u.a.createElement(oue,{type:"RightArrow"})),u.a.createElement(k.a,{checked:!1}))));var i=tVe(n.type);return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{style:i.style},i.asc)),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{style:i.style},i.desc)))},rVe=function(e){var t=e.sort,n=e.field,r=e.onRemove,o=void 0===r?function(){}:r,i=e.onChange,l=void 0===i?function(){}:i,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=WI(Object(a.useState)(t),2),o=r[0],i=r[1];return{state:{activeField:o},onFieldSelect:function(e){n(e.get("uuid")),i(e)}}}({field:n,onChange:l}),f=d.state,p=d.onFieldSelect;return u.a.createElement("div",{className:"lakex-table-sort-item"},u.a.createElement(oue,{type:"Close",onClick:function(){o(t)}}),u.a.createElement(XBe,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:p,className:"lakex-table-sort-item-select"}),u.a.createElement(nVe,{sort:t,field:f.activeField,onUpdateType:s}))},oVe=function(e){var t=e.onCancel,n=void 0===t?function(){}:t,r=e.onSubmit,o=void 0===r?function(){}:r;return u.a.createElement("div",{className:"lakex-table-sort-footer"},u.a.createElement(m.a,{onClick:n},Lw("取消")),u.a.createElement(m.a,{type:"primary",onClick:o},Lw("确定")))},iVe=function(e){var t,n=yre(dye),r=yre(nR),o=yre(oA),i=(null==(t=o.getViewSort())?void 0:t.toJSON())||void 0,u=o.getViewConfig(),l=o.getView(),c=WI(Object(a.useState)(i),2),s=c[0],d=c[1],f=WI(Object(a.useState)(!!(null==u?void 0:u.get("keep_sort"))),2),p=f[0],v=f[1],h=function(e){if(l)return e?i?null==r?void 0:r.execCommand("updateSort",{viewId:null==u?void 0:u.get("view_uuid"),sort:e,auto:p}):null==r?void 0:r.execCommand("createSort",{viewId:null==u?void 0:u.get("view_uuid"),sort:e}):null==r?void 0:r.execCommand("removeSort",{viewId:null==u?void 0:u.get("view_uuid")})},g=o.getAllFields(),m=Object(a.useCallback)((function(){return s?Z_(g,(function(e){return e.get("uuid")===s.field_uuid})):null}),[s,g]);return{state:{sort:s,auto:p},fields:g,getCurrnetSortField:m,onAddOption:function(e){e||(e=o.getViewFields().get(0).get("field"));var t={field_uuid:null==e?void 0:e.get("uuid"),type:iE.ASC};if(p)return h(t),void d(t);d(t)},onRemoveOption:function(){if(p)return h(null),void d(null);d(null)},onUpdateOption:function(e){var t={field_uuid:e,type:(null==s?void 0:s.type)||iE.ASC};if(p)return h(t),void d(t);d(t)},onUpdateType:function(e){var t={field_uuid:null==s?void 0:s.field_uuid,type:e};if(p)return h(t),void d(t);d(t)},onUpdateAuto:function(e){if(p!==e)return null==r||r.execCommand("updateSort",{viewId:null==u?void 0:u.get("view_uuid"),sort:s,auto:e}),void v(e);v(e)},onCancel:function(){n.close("sort")},onSubmit:function(){h(s),n.close("sort")}}},aVe=function(){var e,t=iVe(),n=t.state,r=t.fields,o=t.onCancel,i=t.onSubmit,a=t.onAddOption,l=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto;if(n.sort){var f=Z_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.sort)?void 0:t.field_uuid)}));e=u.a.createElement(u.a.Fragment,null,u.a.createElement(eVe,{auto:n.auto,onUpdateAuto:d}),u.a.createElement(rVe,{field:f,sort:n.sort,onRemove:c,onChange:l,onUpdateType:s}),!n.auto&&u.a.createElement(oVe,{onCancel:o,onSubmit:i}))}else e=u.a.createElement(u.a.Fragment,null,u.a.createElement(QBe,{onAddOption:a}),!n.auto&&u.a.createElement(oVe,{onCancel:o,onSubmit:i}));return u.a.createElement("div",{className:"lakex-table-sort-modal"},e)},uVe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(CBe,{desc:Lw("你还未进行任何排序"),className:"no-data"}),u.a.createElement(m.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},u.a.createElement(oue,{type:"Add"}),Lw("添加排序条件")))},lVe=function(e){var t=iVe(),n=t.state,r=t.onCancel,o=t.onSubmit,i=t.onAddOption,l=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto,f=t.getCurrnetSortField,p=yre(lk),v=yre(dye),h=p.getValue("modal.mode"),g=yre(oA),y=yre(Ooe),b=Object(a.useMemo)((function(){return g.getViewFields()}),[]);return u.a.createElement(sBe,{title:Lw("排序"),onClose:r,showCloseIcon:!0},function(){if(!n.sort)return u.a.createElement(uVe,{onAddOption:i});var e=f(),t=tVe(null==e?void 0:e.get("type")),r=e&&y.getFieldIcon(e.get("type"));return u.a.createElement("div",{className:"lakex-table-h5-sort"},u.a.createElement("div",{className:"lakex-table-h5-sort-tip"},Lw("按以下选项进行排序")),u.a.createElement(EBe,{prefixIcon:r,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==v||v.open("sort-select",{initialState:{sort:n.sort}})}}),u.a.createElement(lbe,{id:"sort-select",mode:h,hasMask:h===sye.DRAWER,hasAnimation:h===sye.DRAWER,position:h===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:function(){null==v||v.close("sort-select")},showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:null==(t=n.sort)?void 0:t.field_uuid,list:nk(b,(function(e){var t=e.get("field");if(!t)return null;var n=y.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){null==v||v.close("sort-select"),l(e.key)}}))}}),u.a.createElement(mBe,{className:"lakex-table-h5-sort-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.sort.type}),u.a.createElement(yBe,{className:"lakex-table-h5-sort-auto",list:[{key:"auto",checked:n.auto,title:Lw("保持排序")}],onSwitch:function(e,t){d(t)}}),u.a.createElement(m.a,{type:"primary",className:"lakex-table-h5-sort-confirm",onClick:function(){return o()},style:{opacity:n.auto?0:1}},Lw("确定")),u.a.createElement(m.a,{className:"lakex-table-h5-sort-del",onClick:function(){return c()}},u.a.createElement(oue,{type:"Delete",className:"del-icon"}),Lw("删除该条件")))}())},cVe=Object.defineProperty,sVe=Object.getOwnPropertyDescriptor,dVe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sVe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cVe(t,n,i),i},fVe=function(){return Ew((function e(){var t=this;_w(this,e),this._getActive=function(){var e=t._readService.getActiveView();if(!e)return!1;var n=t._readService.getViewConfig(e.get("uuid"));return!!(null==n?void 0:n.get("keep_sort"))}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"sort",icon:"ViewerSort",tooltip:Lw("排序"),visible:function(){var e;return![sE.FORM,sE.CALENDAR].includes(null==(e=t._readService.getActiveView())?void 0:e.get("type"))},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("sort",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"sort",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?lVe:aVe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"sortByAsc",name:Lw("升序"),hotkey:"",visible:function(e){return e.from===rRe.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView();if(i){var a=t._readService.getViewSort(i.get("uuid")),u=t._readService.getViewConfig(null==i?void 0:i.get("uuid")),l=null;(null==(l=a?null==(r=t._commandService)?void 0:r.execCommand("updateSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"asc"},auto:!!(null==u?void 0:u.get("keep_sort"))}):null==(n=t._commandService)?void 0:n.execCommand("createSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"asc"}}))?void 0:l.isSuccess)?t._modalService.close("context-menu-modal"):(null==l?void 0:l.error)&&v.a.error(l.error.message)}}}),e.registerItem({key:"sortByDesc",name:Lw("降序"),hotkey:"",visible:function(e){return e.from===rRe.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView();if(i){var a=t._readService.getViewSort(i.get("uuid")),u=t._readService.getViewConfig(null==i?void 0:i.get("uuid")),l=null;(null==(l=a?null==(r=t._commandService)?void 0:r.execCommand("updateSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"desc"},auto:!!(null==u?void 0:u.get("keep_sort"))}):null==(n=t._commandService)?void 0:n.execCommand("createSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"desc"}}))?void 0:l.isSuccess)?t._modalService.close("context-menu-modal"):(null==l?void 0:l.error)&&v.a.error(l.error.message)}}})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function pVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vVe(e){var t=WI(Object(a.useState)(e.inputNumber),2),n=t[0],r=t[1],o=Object(a.useRef)(null),i=Object(a.useRef)(null);return u.a.createElement(C.a,{ref:o,defaultValue:e.defaultValue,value:n,size:e.size,controls:e.controls,onChange:function(t){i.current&&clearTimeout(i.current),null!=t&&(e.max<t?(t=e.max,zw((function(){o.current&&(o.current.value=String(t))}))):e.min>t&&(t=e.min,zw((function(){o.current&&(o.current.value=String(t))})))),r(t),e.onChange(t)},onClick:e.onClick})}fVe.pluginName="workbench-sort",dVe([Ks(dye)],fVe.prototype,"_modalService",2),dVe([Ks(oA)],fVe.prototype,"_readService",2),dVe([Ks(nR)],fVe.prototype,"_commandService",2),dVe([Ks(lk)],fVe.prototype,"_configuration",2),fVe=dVe([Gs({contrib:[sre,jme,fye,dIe]})],fVe);var hVe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pVe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=t.initialState,r=n.items,o=n.disableDel,i=Object(a.useRef)(null);return u.a.createElement("div",{ref:i,className:"lakex-grid-context-menu"},u.a.createElement(f.a,{mode:"vertical"},null==r?void 0:r.map((function(e,n){return"|"===e?u.a.createElement(D.a,{key:n}):u.a.createElement(f.a.Item,{className:I()({disable:"deleteField"===e.key&&o}),key:e.key,icon:Sr(e.icon)?e.icon({}):u.a.createElement(oue,{type:e.icon}),onClick:function(n){var r;null==(r=e.onClick)||r.call(e,t,n)},onMouseEnter:function(n){var r;null==(r=e.onMouseEnter)||r.call(e,t,n)},onMouseLeave:function(n){var r;null==(r=e.onMouseLeave)||r.call(e,t,n)}},u.a.createElement("span",null,function(e){if(e.enableInputNumber&&"string"==typeof e.name&&e.name.includes("{InputNumber}")){var n=e.name.split("{InputNumber}");return t.inputNumber=e.defaultNum||1,u.a.createElement(u.a.Fragment,null,n[0],u.a.createElement(vVe,{defaultValue:t.inputNumber,min:e.minNum,max:e.maxNum,size:"small",controls:!1,onChange:function(e){t.inputNumber=e},onClick:function(e){e.preventDefault(),e.stopPropagation()}}),n[1])}return e.name}(e)),u.a.createElement("span",{className:"lakex-grid-context-menu-item-hotkey"},e.enableInputNumber?"":e.hotkey))}))))},gVe=["e","from"];function mVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yVe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mVe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bVe=Object.defineProperty,wVe=Object.getOwnPropertyDescriptor,_Ve=function(e,t,n,r){for(var o,i=r>1?void 0:r?wVe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bVe(t,n,i),i},kVe=function(){return Ew((function e(){_w(this,e),this._contextMenuModalId="context-menu-modal",this._destroyList=new kk}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e,t=this;this._contextMenuRegistry.init(),this._destroyList.push(this._contextMenuService.onContextMenu((function(e){var n,r=e.e,o=e.from,i=wre(e,gVe),a=t._readService.getViewFields()||[],u=r.currentTarget,l=r.clientX,c=r.clientY;n="header"===o?u:{height:0,width:0,left:l,right:l,top:c,bottom:c},t._modalService.open(t._contextMenuModalId,{position:{origin:n,placement:"bottomLeft"},initialState:yVe({items:t._contextMenuWorkbenchService.getMenuItems({from:o,fieldId:i.fieldId}),originRect:u.getBoundingClientRect(),disableDel:1===a.length},i)})})));var n=null==(e=this._selectionService)?void 0:e.onAnchorChange((function(e){var n;(null==(n=t._selectionService)?void 0:n.hasSelection())||t._modalService.close(t._contextMenuModalId);var r=e.fieldValue,o=t._contextMenuService.contextMenuInfo;((null==r?void 0:r.fieldId)!==(null==o?void 0:o.fieldId)||(null==r?void 0:r.recordId)!==(null==o?void 0:o.recordId))&&t._modalService.close(t._contextMenuModalId)}));n&&this._destroyList.push(n)}},{key:"destroy",value:function(){this._destroyList.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:this._contextMenuModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:hVe})}}],[{key:"pluginModule",value:function(){return dd().contribution(dIe).register(CIe).register(mIe).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"contextMenu",type:"array",title:"右键菜单"}),e.registerDefaultValue({contextMenu:[]})}}])}();kVe.pluginName="workbench-context-menu",_Ve([Ks(dye)],kVe.prototype,"_modalService",2),_Ve([Ks(oRe)],kVe.prototype,"_contextMenuService",2),_Ve([Ks(CIe)],kVe.prototype,"_contextMenuWorkbenchService",2),_Ve([Ks(nxe),As()],kVe.prototype,"_selectionService",2),_Ve([Ks(oA)],kVe.prototype,"_readService",2),_Ve([Ks(mIe)],kVe.prototype,"_contextMenuRegistry",2),_Ve([Ks(RR)],kVe.prototype,"_abilityService",2),kVe=_Ve([Gs({contrib:[sre,fye,dIe]})],kVe);var CVe=Is.defineToken("ExpandRecordContribution"),EVe=function(e){return e.NORMAL="normal",e.LITE="lite",e}(EVe||{});function OVe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return SVe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SVe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function SVe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xVe=Object.defineProperty,jVe=Object.getOwnPropertyDescriptor,DVe=function(e,t,n,r){for(var o,i=r>1?void 0:r?jVe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xVe(t,n,i),i},AVe=function(){return Ew((function e(){_w(this,e),this._recordProviders=[],this._tooltipComponent=null}),[{key:"init",value:function(){var e,t,n=OVe(this.expendRecordProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerExpandRecord)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getProviders",value:function(){return this._recordProviders}},{key:"getTooltipComponent",value:function(){return this._tooltipComponent}},{key:"registerRecordProvider",value:function(e){this._recordProviders.push(e)}},{key:"registerRecordTooltip",value:function(e){this._tooltipComponent=e}}])}();function RVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FVe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RVe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}DVe([yd(CVe)],AVe.prototype,"expendRecordProvider",2),AVe=DVe([Gs()],AVe);var IVe=Object(a.memo)((function(e){var t=e.recordId,n=e.field,r=Qwe(t,n.get("uuid")),o=n.get("type")||"",i=yre(Ooe).getFieldComponent(o);return o&&i?Zw(null==r?void 0:r.value)?u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},u.a.createElement("span",{className:"lakex-cell-field-in-expand-record cell-empty"},Lw("(空)"))):u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},i&&u.a.createElement(i,{key:null==r?void 0:r.uuid,cell:r,field:n})):null})),PVe=Object(a.memo)((function(e){var t=e.recordId,n=e.field,r=e.focus,o=void 0!==r&&r,i=e.suffixIcon,l=e.allowClear,c=void 0===l||l,s=e.renderMode,d=void 0===s?ioe.NORMAL:s,f=e.onCellChange,p=Qwe(t,n.get("uuid")),v=n.get("type")||"",h=yre(Ooe),g=yre(AVe).getTooltipComponent(),m=WI(Object(a.useState)(""),2),y=m[0],b=m[1];if(!p&&v!==HC.RATE&&v!==HC.PROGRESS)return null;var w=h.getFieldEditComponent(v)||h.getFieldComponent(v);if(!w)return u.a.createElement("h1",null,"尚未注册FieldEditComponent");var _=FVe(FVe({},fE.isLink(v)&&{useLinkEditor:!0}),fE.isSelectLike(v)&&{displayType:"dropdown"});if(fE.isSystemType(v))return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},u.a.createElement(w,{key:null==p?void 0:p.uuid,field:n,recordId:t,cell:p,readonly:!1,focus:!1}));var k=u.a.createElement(w,FVe({key:(null==p?void 0:p.uuid)+p.updated_at,defaultValue:null==p?void 0:p.value,field:n,cell:p,renderMode:d,recordId:t,onCellChange:function(e){var t=h.cellValueChecker(v,e);b(t),null==p||p.setCell(e),null==f||f(e)},focus:o,suffixIcon:i,allowClear:c},_));return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},g?u.a.createElement(g,{cell:p,field:n},k):k,u.a.createElement("p",{className:I()("lakex-table-expand-item-error",{show:y})},y))})),MVe=Object(a.memo)((function(e){var t=e.type,n=yre(Ooe).getFieldIcon(t);return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record-icon"},n&&u.a.createElement(n,{size:16}))})),TVe=Object(a.memo)((function(e){var t=e.field,n=e.position,r=yre(Ooe).getFieldTagComponent(t.get("type"));return r?u.a.createElement(r,{field:t,position:n}):null})),NVe=function(e){var t=e.field,n=e.isReadonly,r=Ywe((null==t?void 0:t.get("uuid"))||""),o=r.field,i=r.fieldType,l=r.fieldName,c=yre(dye),s=Object(a.useCallback)((function(e){n||c.open("addOrUpdateField",{position:{origin:e.currentTarget,placement:"bottom"},initialState:{fieldId:null==o?void 0:o.get("uuid")}})}),[n]);return o?u.a.createElement("div",{className:"lakex-table-expand-record-form-item-label",onClick:s},u.a.createElement(MVe,{type:i}),u.a.createElement("div",{className:"lakex-table-expand-record-form-item-label-name"},l),!n&&u.a.createElement(oue,{type:"ReviewArrowDown"}),u.a.createElement(TVe,{field:o,position:"expandRecord"})):null},BVe=function(e){var t=e.recordId,n=e.field,r=e.isReadonly,o=yre(lk);return n?u.a.createElement(u.a.Fragment,null,u.a.createElement(NVe,{isReadonly:r,field:n}),u.a.createElement("div",{className:"lakex-table-expand-record-form-item-content"},r?u.a.createElement(IVe,{key:n.get("type")+n.get("uuid"),recordId:t,field:n}):u.a.createElement(PVe,{key:n.get("type")+n.get("uuid"),recordId:t,field:n,renderMode:(null==o?void 0:o.getValue("expandRecord.fieldRenderMode"))||ioe.NORMAL}))):null};function VVe(e){var t=e.recordId,n=e.showAddNext,r=yre(lk),o=qwe(mR.TABLE).isReadonly(),i=function(){var e=yre(oA),t=WI(Object(a.useState)((function(){return e.getVisibleRecordIdsInActiveView()})),2),n=t[0];return t[1],{ids:n}}(),u=i.ids,l=rxe(),c=Object(a.useMemo)((function(){return t||(null==l?void 0:l.recordId)}),[null==l?void 0:l.recordId,t]),s=WI(Object(a.useState)(c),2),d=s[0],f=s[1],p=aIe(d),v=p.isInRefresh,h=p.refreshDesc,g=WI(Object(a.useState)(null),2),m=g[0],y=g[1],b=Xwe(),w=Object(a.useMemo)((function(){var e=u[0];return d===e}),[d,u]),_=Zwe(d).title,k=Object(a.useMemo)((function(){var e=u[u.length-1];return d===e}),[d,u]),C=yre(nR),E=function(e){if(u){var t=null!==m?m:d,n=null,r=u.findIndex((function(e){return e===t}));"up"!==e||w?"down"!==e||k||(null!==m?r=u.findIndex((function(e){return e===m})):r++,n=u[r]):(r--,n=u[r]),n&&(f(n),y(null))}},O=function(){E("down")},S=Wae((function(){var e,t=null==C?void 0:C.execCommand("addEmptyRecord"),n=null==t?void 0:t.result,r=null==(e=null==n?void 0:n[0])?void 0:e.uuid;f(r)}));return{showAddNext:n,isReadonly:o,layoutMode:null==r?void 0:r.getValue("expandRecord.fieldLayoutMode"),title:_,fields:nk(b,(function(e){return e.get("field")})),disableUp:w,disableDown:k,rowId:d,isInRefresh:v,removeRecord:function(){null==C||C.execCommand("removeRecords",{recordIds:[d]}),O()},refreshDesc:h,onShowNextRecord:O,onShowPrevRecord:function(){E("up")},onAddNextRecord:S}}var LVe=function(){var e=yre(dye),t=Object(a.useCallback)((function(t){e.open("addOrUpdateField",{position:{origin:t.currentTarget,placement:"bottom"}})}),[]);return u.a.createElement("div",{id:"lark-table-expand-record-add-column",className:"add-column-button",onClick:t},u.a.createElement(oue,{type:"Add"}),u.a.createElement("div",{className:"title"},Lw("新增字段")))},zVe=function(e){var t=e.focus,n=void 0!==t&&t,r=e.children,o=e.className,i=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){if(n&&i.current){i.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});var e=i.current.querySelector("input")||i.current.querySelector("textarea");setTimeout((function(){var t=null==e?void 0:e.value.length;t&&(null==e||e.setSelectionRange(t,t)),null==e||e.focus()}),300)}}),[n]),u.a.createElement("div",{className:o,ref:i},r)},UVe=function(e){var t=e.desc;return u.a.createElement("div",{className:"lakex-table-expand-record-refresh-tooltip"},u.a.createElement(A.a,{message:null==t?void 0:t.text,type:"warning",showIcon:!0,closable:!0}))},HVe=function(e){var t=e.mode,n=e.initialState,r=yre(dye),o=yre(AVe),i=VVe({recordId:(null==n?void 0:n.recordId)||"",showAddNext:!!(null==n?void 0:n.showAddNext)}),l=i.showAddNext,c=i.isReadonly,s=i.title,h=i.layoutMode,g=i.rowId,y=i.fields,b=i.disableUp,w=i.disableDown,_=i.isInRefresh,k=i.refreshDesc,C=i.removeRecord,E=i.onShowNextRecord,O=i.onShowPrevRecord,S=i.onAddNextRecord,x=WI(Object(a.useState)(!1),2),j=x[0],D=x[1],A=yre(pie),R=WI(Object(a.useState)(t===sye.MODAL?"calc(100vh - 200px)":void 0),2),F=R[0],I=R[1],P=Object(a.useRef)(null),M=(null==n?void 0:n.showAddNext)||t!==sye.DRAWER;$ae("⌘+shift+,",(function(){O()})),$ae("⌘+shift+.",(function(){E()}));var T=function(){r.close("expandRecord")};Zae((function(){if(P.current){if(t===sye.DRAWER)return;var e=P.current.getBoundingClientRect();I(e.height)}}),[M]);var N=o.getProviders(),B=F&&"number"==typeof F?"".concat(F,"px"):F;return u.a.createElement("div",{key:g,className:"lakex-expand-record lakex-table-expand-record lakex-table-input lakex-ui-modal-mode-".concat(t," lakex-table-input lakex-table-expand-record-layout-").concat(h," ")},_&&u.a.createElement(UVe,{desc:k}),u.a.createElement("div",{className:"lakex-table-expand-record-head"},u.a.createElement("div",{className:"lakex-table-expand-record-head-action"},u.a.createElement("h1",{className:"lakex-table-expand-record-title"},s||u.a.createElement("span",{className:"lakex-table-expand-record-empty-title"},Lw("未命名记录"))),u.a.createElement("div",{className:"lakex-table-expand-record-head-aciton-wrap"},u.a.createElement(d.a,{placement:"top",title:u.a.createElement("span",null,Lw("复制链接"))},u.a.createElement("span",{className:"lakex-table-expand-record-more-action",onClick:function(e){e.stopPropagation();var t=null==A?void 0:A.getOpenLink("record",g);t&&(hn()(t),v.a.success({content:Lw("复制成功"),style:{zIndex:1050}}))}},u.a.createElement(oue,{type:"Addlink",size:14}))),u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement("span",{className:"lakex-table-expand-record-direction"},u.a.createElement(d.a,{placement:"top",title:u.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},Lw("上一条记录"),u.a.createElement("br",null),$re.adapterHotKey("⌘+shift+,"))},u.a.createElement(m.a,{className:"lakex-table-expand-record-up",disabled:b,onClick:O,type:"text"},u.a.createElement(oue,{type:"ArrowUp",size:16}))),u.a.createElement(d.a,{placement:"top",title:u.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},Lw("下一条记录"),u.a.createElement("br",null),$re.adapterHotKey("⌘+shift+."))},u.a.createElement(m.a,{className:"lakex-table-expand-record-down",disabled:w,onClick:E,type:"text"},u.a.createElement(oue,{type:"ArrowDown",size:16})))),!c&&u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement(p.a,{overlayClassName:"lakex-table-expand-record-more",visible:j,content:u.a.createElement(f.a,{onClick:function(e){C(),D(!1),r.close("expandRecord")}},u.a.createElement(f.a.Item,{key:"delete"},u.a.createElement("span",{className:"lakex-table-expand-record-more-list"},u.a.createElement(oue,{type:"Delete",size:14}),Lw("删除本条记录")))),trigger:"click",placement:"bottomLeft",onClick:function(e){return e.stopPropagation()},onVisibleChange:function(e){D(e)}},u.a.createElement(m.a,{className:"lakex-table-expand-record-more-btn",type:"text"},u.a.createElement(oue,{type:"MoreHorizontal",size:14})))),u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement(d.a,{placement:"top",title:Lw("关闭弹窗 (ESC)")},u.a.createElement(oue,{type:"RowCollpse",size:16,onClick:T}))))),u.a.createElement("div",{ref:P,className:"lakex-table-expand-record-form lakex-table-expand-record-form-scroller",style:{height:B}},null==y?void 0:y.map((function(e,t){var r="".concat(g,"-").concat(null==e?void 0:e.get("uuid")),o=!!(null==n?void 0:n.isFocus)&&(n.fieldId?n.fieldId===(null==e?void 0:e.get("uuid")):0===t);return u.a.createElement(zVe,{focus:o,className:"lakex-table-expand-record-form-item",key:r},u.a.createElement(BVe,{recordId:g,field:e,isReadonly:c}))})),!c&&u.a.createElement(LVe,null),N.map((function(e){var t=e.RenderComponent;return u.a.createElement(t,{key:g,recordId:g,isReadonly:c,isNewRecord:null==n?void 0:n.isNewRecord})}))),!c&&M&&u.a.createElement("div",{className:"lakex-table-expand-record-operation-button"},u.a.createElement("div",{className:"create-row-footer"},l&&u.a.createElement(m.a,{onClick:S},Lw("添加下一个")),u.a.createElement(m.a,{onClick:T},Lw("完成")))))},qVe=Object.defineProperty,WVe=Object.getOwnPropertyDescriptor,$Ve=function(e,t,n,r){for(var o,i=r>1?void 0:r?WVe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qVe(t,n,i),i},GVe=function(){return Ew((function e(){var t=this;_w(this,e),this._toDestroyCollection=new kk,this._handleExpandRecord=function(e){var n=e.initialState.recordId;t._openExpandRecord({recordId:n}),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t=this;this._expandRecordRegistry.init(),this._toDestroyCollection.push(this._renderService.onClickRecord((function(e){var n=e.recordId,r=e.isNewRecord;t.currentViewType!==sE.FORM&&(t._modalService.close("viewerGridCellEditor"),t._openExpandRecord({recordId:n,isNewRecord:r,isFocus:!0}))})));var n=null==(e=this._selectionService)?void 0:e.onChange((function(e){var n,r=e.selection,o=t._selectionService.getRecordId(r);if(o&&t._modalService.isModalVisible("expandRecord")){if(null==(n=t._modalService.getModalProps("expandRecord").initialState)?void 0:n.isNewRecord)return;t._openExpandRecord({recordId:o})}}));this._toDestroyCollection.push(n);var r=this._modalService.onBeforeClose((function(e){"expandRecord"===e.modalId&&t._renderService.emitViewWidthChange("100%")}));this._toDestroyCollection.push(r)}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"_getMode",value:function(){var e;return(null==(e=this._configuration.getValue("expandRecord.modalDrawerModeViews"))?void 0:e.includes(this.currentViewType))?sye.DRAWER:sye.MODAL}},{key:"_openExpandRecord",value:function(e){var t=this._getMode(),n=this._modalService.isModalVisible("expandRecord");this._modalService.open("expandRecord",{key:e.recordId,mode:t,hasMask:t!==sye.DRAWER,maskSkipElements:t===sye.DRAWER?[".lakex-table-workbench-toolbar-main-section",".lakex-viewer-grid-header",".lakex-viewer-grid-content tbody",".lakex-viewer-kanban",".lakex-viewer-calendar",".lakex-viewer-card"]:[],initialState:{recordId:e.recordId,fieldId:e.fieldId,isNewRecord:e.isNewRecord,isFocus:e.isFocus}}),n||this._emitViewWidthChange(e.recordId)}},{key:"_emitViewWidthChange",value:function(e){var t=this;if(this._getMode()===sye.DRAWER){var n=this._workbenchService.getContainerEl().clientWidth,r=this._modalService.getWidth(),o=Math.max(n-r,520);this._renderService.emitViewWidthChange(o),e&&this.currentViewType===sE.CARD&&setTimeout((function(){var n;null==(n=t._selectionService)||n.moveToRecord(e)}),300)}}},{key:"registerModal",value:function(e){var t=this;e.registerItem({id:"expandRecord",hasMask:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},hasAnimation:!0,RenderComponent:HVe,onResize:function(){t._emitViewWidthChange()}})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"expandRecord",hotkey:"space",name:"行展开",enableOnInput:!1,isEnable:function(){var e=t.currentViewType===sE.GRID;return t._hasSelection()&&e},onHotKey:function(e){var n,r;e.preventDefault(),t._modalService.close("viewerGridCellEditor");var o=null==(n=t._selectionService)?void 0:n.getSelection();if(o){var i=null==(r=t._selectionService)?void 0:r.getAnchorPosition(o);i&&t._openExpandRecord({fieldId:i.fieldId,recordId:i.recordId,isFocus:!0})}}})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"expandRecord",name:function(){return t.currentViewType===sE.GRID?Lw("展开行"):t.currentViewType===sE.CALENDAR?Lw("展开详情"):Lw("展开记录")},icon:"RowExpand",hotkey:$re.adapterHotKey("Space"),visible:function(e){var t=e.from;return t===rRe.CELL||t===rRe.CARD_RECORD||t===rRe.KANBAN_RECORD||t===rRe.CALENDAR_RECORD},onClick:this._handleExpandRecord})}}],[{key:"pluginModule",value:function(){return dd().contribution(CVe).register(AVe).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"expandRecord",type:"object",title:"行展开",properties:{fieldRenderMode:{type:"string",description:"字段渲染模式",enum:Object.values(ioe)},fieldLayoutMode:{type:"string",description:"字段排版模式",enum:Object.values(EVe)},modalDrawerModeViews:{type:"array",description:"使用侧边栏打开的视图列表"}}}),e.registerDefaultValue({"expandRecord.fieldRenderMode":ioe.LITE,"expandRecord.fieldLayoutMode":EVe.LITE,"expandRecord.modalDrawerModeViews":[sE.GRID,sE.CARD,sE.KANBAN,sE.CALENDAR]})}}])}();GVe.pluginName="workbench-expand-record",$Ve([Ks(_oe)],GVe.prototype,"_renderService",2),$Ve([Ks(pbe)],GVe.prototype,"_workbenchService",2),$Ve([Ks(oA)],GVe.prototype,"_readService",2),$Ve([Ks(RR)],GVe.prototype,"_abilityService",2),$Ve([Ks(dye)],GVe.prototype,"_modalService",2),$Ve([Ks(lk)],GVe.prototype,"_configuration",2),$Ve([Ks(nxe),As()],GVe.prototype,"_selectionService",2),$Ve([Ks(AVe)],GVe.prototype,"_expandRecordRegistry",2),GVe=$Ve([Gs({contrib:[sre,fye,USe,CVe,dIe]})],GVe);var KVe=Object.defineProperty,YVe=Object.getOwnPropertyDescriptor,JVe=function(e,t,n,r){for(var o,i=r>1?void 0:r?YVe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KVe(t,n,i),i},XVe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=this;this._workbenchHotkeyPluginProvider.getContributions({cache:!1}).forEach((function(t){t.registerHotkey(e._hotkeyRegistry)}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"save",hotkey:"⌘+S",name:Lw("保存"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.FORM)},onHotKey:function(e){e.preventDefault(),v.a.success(Lw("文档已保存"))}})}}],[{key:"pluginModule",value:function(){return dd().contribution(USe).register(this)}}])}();XVe.pluginName="workbench-hotkey",JVe([yd(USe)],XVe.prototype,"_workbenchHotkeyPluginProvider",2),JVe([Ks(eoe)],XVe.prototype,"_hotkeyRegistry",2),JVe([Ks(oA)],XVe.prototype,"_readService",2),XVe=JVe([Gs({contrib:[sre,USe]})],XVe);var ZVe=["none","-","count","filled","empty","checked","unchecked","unique","-","percentFilled","percentEmpty","percentUnique","-","sum","average","max","min","earliestDate","latestDate","dateRange","monthRange","percentChecked","percentUnchecked"];function QVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eLe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QVe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tLe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nLe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nLe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function nLe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rLe=function(e){var t=e.initialState,n=t.stat,r=(null==n?void 0:n.type)||"none",o=function(e){var t,n=e.field,r=e.view,o=yre(nR),i=yre(dye),a=[],u=tLe(ZVe);try{for(u.s();!(t=u.n()).done;){var l=t.value,c=HRe[l];"-"!==l?c&&(c.types?c.types.includes(null==n?void 0:n.get("type"))&&a.push(eLe(eLe({},c),{},{type:l})):a.push(eLe(eLe({},c),{},{type:l}))):a.push(l)}}catch(e){u.e(e)}finally{u.f()}return"-"===a[a.length-1]&&a.splice(a.length-1,1),{menus:a,onChange:function(e,t){"none"===e&&t?null==o||o.execCommand("removeStat",{viewId:r.get("uuid"),fieldId:n.get("uuid")}):null==o||o.execCommand("updateStat",{viewId:r.get("uuid"),fieldId:n.get("uuid"),type:e}),null==i||i.close("stat-option")}}}(t),i=o.menus,a=o.onChange;return u.a.createElement("div",{className:"lakex-table-stats-option-list"},i.map((function(e,t){if("-"===e)return u.a.createElement("div",{key:t,className:"lakex-table-stats-option-seperator"});var o=e.type,i=e.text;return o?u.a.createElement("div",{key:o,className:"lakex-table-stats-option-item",onClick:function(){a(o,n)}},o===r?u.a.createElement(oue,{type:"Check",size:14}):u.a.createElement("span",{className:"lakex-table-stats-empty"}),i):null})))},oLe=Object.defineProperty,iLe=Object.getOwnPropertyDescriptor,aLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?iLe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oLe(t,n,i),i},uLe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=this;this._statControllerService.onClick((function(t){var n=t.view,r=t.field,o=t.stat,i=t.target;e._modalService.open("stat-option",{position:{placement:"top",origin:i},initialState:{view:n,field:r,stat:o}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"stat-option",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:rLe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();uLe.pluginName="workbench-statistics",aLe([Ks(dye)],uLe.prototype,"_modalService",2),aLe([Ks(LRe)],uLe.prototype,"_statControllerService",2),uLe=aLe([Gs({contrib:[sre,fye]})],uLe);var lLe=Object.defineProperty,cLe=Object.getOwnPropertyDescriptor,sLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?cLe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lLe(t,n,i),i},dLe=function(){return Ew((function e(){var t=this;_w(this,e),this._handleInsertRecordBefore=function(e){var n,r=e.initialState,o=e.inputNumber,i=r.recordId,a=t._readService.getOriginViewRecords(),u=ek(a,(function(e){return e.get("record_uuid")===i}));if(!(u<0)){var l=t._readService.getViewFields(),c=a.get(u),s=t._commandService.execCommand("addEmptyRecord",{sourceRecordId:c.get("record_uuid"),direction:"before",groupItemKey:c.get("group_item_key"),recordCount:o||1}),d=t._readService.getActiveView(),f=null==s?void 0:s.result;if((null==d?void 0:d.get("type"))===sE.GRID){var p=null==(n=t._selectionService)?void 0:n.createGridSelectionByIndex(u,0,((null==a?void 0:a.length)||0)+1,(null==l?void 0:l.length)||0);t._selectionService.scrollToSelection(p,"start")}else f&&f[0]&&t._modalService.open("expandRecord",{initialState:{recordId:f[0].uuid}});t._modalService.close("context-menu-modal")}},this._handleInsertRecordAfter=function(e){var n,r=e.initialState,o=e.inputNumber,i=r.recordId,a=t._readService.getOriginViewRecords(),u=ek(a,(function(e){return e.get("record_uuid")===i}));if(!(u<0)){var l=t._readService.getViewFields(),c=a.get(u),s=t._commandService.execCommand("addEmptyRecord",{sourceRecordId:c.get("record_uuid"),direction:"after",groupItemKey:c.get("group_item_key"),recordCount:o||1}),d=t._readService.getActiveView(),f=null==s?void 0:s.result;if((null==d?void 0:d.get("type"))===sE.GRID){var p=null==(n=t._selectionService)?void 0:n.createGridSelectionByIndex(u+1,0,((null==a?void 0:a.length)||0)+1,(null==l?void 0:l.length)||0);t._selectionService.scrollToSelection(p,"end")}else f&&f[0]&&t._modalService.open("expandRecord",{initialState:{recordId:f[0].uuid}});t._modalService.close("context-menu-modal")}},this._handleRemoveRecord=function(e){var n,r=e.initialState.recordId;t._possibleService.setUnpossible(JFe.delRow,[r]),t._commandService.execCommand("removeRecords",{recordIds:[r]}),null==(n=t._selectionService)||n.removeSelection(),t._modalService.close("context-menu-modal")},this._handleRemoveRecords=function(e){var n,r=e.initialState.selection;if(r){if(r.isAllSelect)t._possibleService.setUnpossible(JFe.delRow),t._commandService.execCommand("removeRecords",{all:!0});else{var o=t._selectionService.getRecordIds(r);t._possibleService.setUnpossible(JFe.delRow,o),t._commandService.execCommand("removeRecords",{recordIds:o})}null==(n=t._selectionService)||n.removeSelection(),t._modalService.close("context-menu-modal")}}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"add-record",icon:"Add",iconSize:16,tooltip:function(){return t.currentViewType===sE.CALENDAR?Lw("添加日程"):Lw("添加记录")},visible:function(){var e=t.currentViewType===sE.FORM;return!t.isReadonly&&!e},showTitle:!0,showTooltip:!1,onClick:function(){var e,n=null;t.currentViewType===sE.CALENDAR?(t._commandService.execCommand("setActiveDate",{date:f_()}),n=t._commandService.execCommand("createSchedule",{date:i()()})):n=t._commandService.execCommand("addEmptyRecord");var r=null==n?void 0:n.result,o=null==(e=null==r?void 0:r[0])?void 0:e.uuid;o&&zw((function(){var e;null==(e=t._selectionService)||e.moveToRecord(o),t._modalService.open("expandRecord",{mode:sye.MODAL,disableClickAwayClose:!1,initialState:{recordId:o,showAddNext:!0,isNewRecord:!0}})}))}})}},{key:"registerContextMenu",value:function(e){var t,n=this;e.registerItem({key:"insertRecordUp",name:function(){return n.currentViewType===sE.GRID?Lw("向上插入 {InputNumber} 行"):Lw("向上插入记录")},icon:"UpArrow",hotkey:$re.adapterHotKey("⌘+⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var t=e.from;return!n.isReadonly&&(t===rRe.CELL||t===rRe.KANBAN_RECORD)},onClick:function(e){n.currentViewType===sE.GRID&&null==e.inputNumber||(n.currentViewType===sE.KANBAN?n._handleInsertRecordAfter(e):n._handleInsertRecordBefore(e))}}),e.registerItem({key:"insertRecordDown",name:function(){return n.currentViewType===sE.GRID?Lw("向下插入 {InputNumber} 行"):Lw("向下插入记录")},icon:"DownArrow",hotkey:$re.adapterHotKey("⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var t=e.from;return!n.isReadonly&&(t===rRe.CELL||t===rRe.KANBAN_RECORD)},onClick:function(e){n.currentViewType===sE.GRID&&null==e.inputNumber||(n.currentViewType===sE.KANBAN?n._handleInsertRecordBefore(e):n._handleInsertRecordAfter(e))}}),e.registerItem({key:"insertRecordLeft",name:Lw("向左插入记录"),icon:"LeftArrow",hotkey:"",visible:function(e){var t=e.from;return!n.isReadonly&&t===rRe.CARD_RECORD},onClick:this._handleInsertRecordBefore}),e.registerItem({key:"insertRecordRight",name:Lw("向右插入记录"),icon:"RightArrow",hotkey:"",visible:function(e){var t=e.from;return!n.isReadonly&&t===rRe.CARD_RECORD},onClick:this._handleInsertRecordAfter}),e.registerItem({key:"copyRecord",icon:"Copy",name:function(){return n.currentViewType===sE.GRID?Lw("复制行"):Lw("复制记录")},hotkey:"",visible:function(e){var t=e.from;return t===rRe.CELL||t===rRe.KANBAN_RECORD||t===rRe.CARD_RECORD},onClick:function(e){var t=e.initialState.recordId,r=n._readService.getOriginViewRecords(),o=ek(r,(function(e){return e.get("record_uuid")===t})),i=r.get(o);n._commandService.execCommand("copyRecord",{sourceRecordId:i.get("record_uuid")}),n._modalService.close("context-menu-modal")}}),e.registerItem({key:"removeRecord",name:function(){return n.currentViewType===sE.GRID?Lw("删除行"):n.currentViewType===sE.CALENDAR?Lw("删除日程"):Lw("删除记录")},icon:"Delete",hotkey:"",visible:function(e){var t=e.from;return!n.isReadonly&&t!==rRe.HEADER&&t!==rRe.GROUP_HEADER},onClick:(t=UC(jk.mark((function e(t){var r,o;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.initialState,(o=r.selection)&&!o.isCollapsed?n._handleRemoveRecords(t):n._handleRemoveRecord(t);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onMouseEnter:function(e){var t=e.initialState,r=t.selection,o=[t.recordId];r&&(o=n._selectionService.getRecordIds(r)),n._possibleService.setPossible(JFe.delRow,o)},onMouseLeave:function(e){var t=e.initialState,r=t.selection,o=[t.recordId];r&&(o=n._selectionService.getRecordIds(r)),n._possibleService.setUnpossible(JFe.delRow,o)}})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();dLe.pluginName="workbench-add-record",sLe([Ks(dye)],dLe.prototype,"_modalService",2),sLe([Ks(oA)],dLe.prototype,"_readService",2),sLe([Ks(nR)],dLe.prototype,"_commandService",2),sLe([Ks(nxe),As()],dLe.prototype,"_selectionService",2),sLe([Ks(RR)],dLe.prototype,"_abilityService",2),sLe([Ks(nIe)],dLe.prototype,"_possibleService",2),dLe=sLe([Gs({contrib:[sre,jme,dIe]})],dLe);var fLe=function(){var e=yre(dye),t=yre(LFe),n=WI(Object(a.useState)(null),2),r=n[0],o=n[1],i=WI(Object(a.useState)(0),2),u=i[0],l=i[1],c=WI(Object(a.useState)(0),2),s=c[0],d=c[1],f=WI(Object(a.useState)([]),2),p=f[0],v=f[1],h=Object(a.useRef)(null),g=Object(a.useRef)(null),m=Object(a.useRef)(!1);Object(a.useLayoutEffect)((function(){var e=setTimeout((function(){var e;null==(e=g.current)||e.focus()}),50);return function(){clearTimeout(e)}}),[]);var y=function(){o(null),v([]),l(0),d(0),null==t||t.closeSearch()},b=function(){setTimeout((function(){var e;null==(e=g.current)||e.focus()}),200)},w=Gae((function(){var e,n,r;if(!(null==m?void 0:m.current)){var i=null==(r=(null==(e=g.current)?void 0:e.input)||(null==(n=g.current)?void 0:n.nativeElement))?void 0:r.value;if(i){var a=(null==t?void 0:t.search(i))||[];o(i),l(a.length),v(a),d(0),b()}else y()}}),300);return Zae((function(){var e=p[s];e&&(null==t||t.jumpToSearch(e))}),[s,p]),Zae((function(){var t=e.onBeforeClose((function(e){"search"===e.modalId&&y()}));return function(){t.destroy()}}),[]),{state:{query:r,count:u,current:s},onCloseSearch:function(){e.close("search"),y()},onCompositionStart:function(){m.current=!0},onCompositionEnd:function(){m.current=!1,w()},searchBox:h,onChangeQuery:w,onClear:function(){o(null)},searchInput:g,composition:m,onSearchPrev:function(){d(s>0?s-1:u-1),b()},onSearchNext:function(){d(s<u-1?s+1:0),b()}}};function pLe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vLe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pLe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pLe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hLe=R.a.TabPane,gLe={x:0,y:0},mLe=function(e){var t,n,r=e.top,o=void 0===r?0:r,i=e.left,a=void 0===i?0:i,l=fLe(),c=l.state,d=l.onCloseSearch,f=l.searchInput,p=l.onChangeQuery,v=l.onCompositionStart,h=l.onCompositionEnd,g=l.onSearchPrev,y=l.onSearchNext,b=Sq({id:"search"}),w=b.attributes,_=b.listeners,k=b.setNodeRef,C=b.transform;return u.a.createElement("div",vLe(vLe(vLe({className:"lakex-table-search grid",ref:k},_),w),{},{style:{top:o,right:10-a,"--translate-x":"".concat(null!==(t=null==C?void 0:C.x)&&void 0!==t?t:0,"px"),"--translate-y":"".concat(null!==(n=null==C?void 0:C.y)&&void 0!==n?n:0,"px")}}),u.a.createElement(oue,{className:"lakex-search-close-action",type:"Close",size:14,onClick:d}),u.a.createElement(R.a,{defaultActiveKey:"search",animated:!1},u.a.createElement(hLe,{tab:Lw("查找"),key:"search"},u.a.createElement("div",{className:"search-input"},u.a.createElement(s.a,{ref:f,className:"lakex-table-search-input",defaultValue:c.query,onChange:p,onCompositionStart:v,onCompositionEnd:h,autoFocus:!0,onPressEnter:y,onMouseDown:function(e){e.stopPropagation()}}),c.query&&u.a.createElement("span",{className:"search-result"},Math.min(c.current+1,c.count)," / ",c.count)),u.a.createElement("div",{className:"search-foot"},u.a.createElement(m.a,{size:"small",onClick:g},Lw("上一个")),u.a.createElement(m.a,{size:"small",onClick:y},Lw("下一个"))))))},yLe=function(){var e=WI(Object(a.useState)(gLe),2),t=e[0],n=t.x,r=t.y,o=e[1],i=VU(BU(LH,{activationConstraint:{distance:8}}));return u.a.createElement(kq,{sensors:i,onDragEnd:function(e){var t=e.delta;o((function(e){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}))}},u.a.createElement(mLe,{top:r,left:n}))},bLe=function(){var e=fLe(),t=e.searchInput,n=e.onClear,r=e.composition,o=e.onCloseSearch,i=e.onChangeQuery;return Zae((function(){r.current=!1}),[]),u.a.createElement("div",{className:I()("lakex-table-h5-search-bar")},u.a.createElement(s.a,{ref:t,prefix:u.a.createElement(oue,{type:"Search",size:"16",className:"lakex-table-h5-search-icon"}),className:"lakex-table-h5-search-input",placeholder:Lw("请输入关键词搜索"),clearable:!0,onClear:n,onChange:i}),u.a.createElement("span",{className:"lakex-table-h5-search-cancel",onClick:o},Lw("取消")))},wLe=function(){var e=yre(LFe),t=yre(lk),n=yre(dye),r=yre(abe),o=fLe(),i=o.state,l=o.searchBox,c=o.onCloseSearch,f=o.searchInput,p=o.onChangeQuery,v=o.onCompositionStart,h=o.onCompositionEnd,g=o.onSearchNext,m=WI(Object(a.useState)(!1),2),y=m[0],b=m[1],w=(null==t?void 0:t.getValue("toolbar.mode"))===Rme.NORMAL,_=Object(a.useCallback)((function(){b(!1),c(),null==e||e.emitExitSearchingEvent()}),[c]),k=Object(a.useCallback)((function(e){e.keyCode===Tz.ESC&&_()}),[_]);return Zae((function(){var t=null==e?void 0:e.onSearching((function(){b(!0)}));return function(){c(),null==t||t.destroy()}}),[]),w?u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){var e=null==r?void 0:r.getRenderViewPort();e&&(null==n||n.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:{left:e.right,top:e.top}}))},tabIndex:-1},u.a.createElement(oue,{type:"Search"}),u.a.createElement("span",{className:"toolbar-button-title"},Lw("搜索"))):y?u.a.createElement("div",{className:"lakex-search-toolbar-btn",ref:l.current},u.a.createElement(s.a,{ref:f,className:"lakex-table-search-input",defaultValue:i.query,placeholder:Lw("请输入关键词..."),onChange:p,onCompositionStart:v,onCompositionEnd:h,autoFocus:!0,allowClear:!0,bordered:!1,onPressEnter:g,onKeyDown:k,onBlur:_})):u.a.createElement(d.a,{title:Lw("搜索")},u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){b(!0),null==e||e.emitSearchingEvent()},tabIndex:-1},u.a.createElement(oue,{type:"Search"})))},_Le=Object.defineProperty,kLe=Object.getOwnPropertyDescriptor,CLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?kLe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_Le(t,n,i),i},ELe=function(){return Ew((function e(){_w(this,e)}),[{key:"_getSearchPosition",value:function(){var e=this._viewportService.getRenderViewPort();return{left:e.right,top:e.top}}},{key:"_isLiteMode",get:function(){return this._configuration.getValue("toolbar.mode")===Rme.LITE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("render.mode");this._isLiteMode&&n!==roe.MOBILE?e.registerItem({id:"search",RenderComponent:wLe}):e.registerItem({id:"search",icon:"Search",tooltip:Lw("搜索"),visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.FORM)},onClick:function(e){var r;r=n===roe.MOBILE?{placement:"cover",origin:t._toolbarService.getDom()}:t._getSearchPosition(),t._modalService.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:r})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("render.mode");e.registerItem({id:"search",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",disableClickAwayClose:!0,RenderComponent:t===roe.MOBILE?bLe:yLe})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"search",hotkey:"⌘+F",name:Lw("查找"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.FORM)},onHotKey:function(e){e.preventDefault(),t._isLiteMode?t._searchService.emitSearchingEvent():t._modalService.open("search",{initialState:{searchParams:{openFrom:"hotkey"}},position:t._getSearchPosition()})}})}}],[{key:"pluginModule",value:function(){return dd().contribution(kFe).register(this)}}])}();ELe.pluginName="workbench-search",CLe([Ks(dye)],ELe.prototype,"_modalService",2),CLe([Ks(oA)],ELe.prototype,"_readService",2),CLe([Ks(abe)],ELe.prototype,"_viewportService",2),CLe([Ks(xme)],ELe.prototype,"_toolbarService",2),CLe([Ks(lk)],ELe.prototype,"_configuration",2),CLe([Ks(LFe)],ELe.prototype,"_searchService",2),ELe=CLe([Gs({contrib:[sre,jme,fye,USe]})],ELe);var OLe=Object.defineProperty,SLe=Object.getOwnPropertyDescriptor,xLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?SLe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OLe(t,n,i),i},jLe=function(){return Ew((function e(){var t=this;_w(this,e),this._handleCopy=function(){t._copyCutService.copy(),t._modalService.close("context-menu-modal")},this._handlePaste=function(){t._pasteService.paste(),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"copy",name:Lw("复制"),hotkey:$re.adapterHotKey("⌘+C"),visible:function(e){var t=e.from;return t===rRe.CELL||t===rRe.MULTI_CELL},onClick:this._handleCopy}),e.registerItem({key:"paste",name:Lw("粘贴"),hotkey:$re.adapterHotKey("⌘+V"),visible:function(e){var n=e.from;return!t.isReadonly&&(n===rRe.CELL||n===rRe.MULTI_CELL)},onClick:this._handlePaste})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();jLe.pluginName="workbench-clipboard",xLe([Ks(dye)],jLe.prototype,"_modalService",2),xLe([Ks(oA)],jLe.prototype,"_readService",2),xLe([Ks(RR)],jLe.prototype,"_abilityService",2),xLe([Ks(nje)],jLe.prototype,"_copyCutService",2),xLe([Ks(dje)],jLe.prototype,"_pasteService",2),jLe=xLe([Gs({contrib:[sre,dIe]})],jLe);var DLe=function(){var e=qwe(mR.TABLE).isReadonly(),t=WI(Object(a.useState)(!1),2),n=t[0],r=t[1],o=yre(nR),i=yre(dye),l=yre(loe),c=yre(_oe).getViewNodes(),d=Object(a.useRef)(null),f=Wwe(),p=WI(Object(a.useState)((null==f?void 0:f.get("name"))||""),2),v=p[0],h=p[1];Zae((function(){h((null==f?void 0:f.get("name"))||"")}),[f]);var g=Object(a.useMemo)((function(){for(var e=0,t=0;t<v.length;t++)e+=v.charCodeAt(t)>255?14:7;return e+16}),[v]),m=function(e){var t,n,i=((null==(t=e.target)?void 0:t.value)||"").trim()||Lw("表格视图");o.execCommand("updateViewName",{viewId:null==f?void 0:f.get("uuid"),name:i}),r(!1),null==(n=d.current)||n.blur()},y=Array.from(c).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==f?void 0:f.get("type"))}));return y?u.a.createElement("div",{className:"view-manage-signal-toolbar-item"},u.a.createElement("div",{onClick:function(){e||r(!0)},id:"lakex-table-toolbar-view-manage",className:I()("view-manage",!n&&"view-manage-normal")},y.icon({className:y.colorCls,size:16}),u.a.createElement(s.a,{ref:d,onClick:function(){var e;null==(e=d.current)||e.focus()},onMouseDown:function(e){e.stopPropagation()},value:v,style:{width:g},onChange:function(e){var t=e.target.value;h(t)},onBlur:m,onPressEnter:m,bordered:!1,className:I()("input-name",e&&"input-name-disable"),placeholder:Lw("视图名称")})),!e&&(null==l?void 0:l.isActive)&&u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(e){var t=e.currentTarget;null==i||i.open("add-view",{position:{origin:t,placement:"bottom"}})}},u.a.createElement(oue,{type:"Add"}),u.a.createElement("span",{className:"toolbar-button-title"},Lw("新建视图")))):null},ALe=function(e){var t=e.onCommand,n=$we(),r=Wwe(),o=yre(_oe),i=yre(lk).getValue("viewerManage.viewTypes");if(1===Q_(n,(function(e){return i.includes(e.get("type"))})).length)return u.a.createElement(DLe,null);var a=o.getViewNodes(),l=Array.from(a).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==r?void 0:r.get("type"))}));return l?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"lakex-workbench-toolbar-button view-manage-multiple-toolbar-item",onClick:t,tabIndex:-1},l.icon({className:l.colorCls,size:16}),u.a.createElement("span",{className:"lakex-table-view-manage-title"},null==r?void 0:r.get("name")),u.a.createElement(oue,{type:"ArrowDown"}))):null},RLe=[{key:"rename",title:Lw("重命名视图")},{key:"copy",title:Lw("复制视图")},{key:"remove",title:Lw("删除视图")}],FLe=function(){var e=yre(dye),t=yre(nR),n=yre(pie),r=yre(oFe),o=yre(_oe),i=yre(lk),u=qwe(mR.TABLE).isReadonly(),l=$we(),c=Wwe(),s=WI(Object(a.useState)(null),2),d=s[0],f=s[1],p=o.getViewNodes(),v=i.getValue("viewerManage.viewTypes"),h=Q_(l,(function(e){return v.includes(e.get("type"))})),g=function(n,r){var o,i=n.key,a=r.key;switch(null==(o=r.domEvent)||o.stopPropagation(),a){case"rename":f(i);break;case"copy":t.execCommand("copyView",{viewId:i}),e.close("view-manage");break;case"remove":if(h.length<=1)return;t.execCommand("removeView",{viewId:i}),e.close("view-manage")}},m=function(){f(null)},y=function(e,n){e.stopPropagation(),t.execCommand("updateViewName",{viewId:n.key,name:e.target.value}),m()};return{views:l,isReadonly:u,activeView:c,onModalClose:function(){e.close("view-manage")},onChooseView:function(t){if(!d){var r=t.key,o=Z_(h,(function(e){return e.get("uuid")===r}));o&&(null==n||n.open("view",o.get("uuid")),e.close("view-manage"))}},onRenameView:function(e){f(e.key)},editingKey:d,onDragEnd:function(e){var t=e.active,n=e.over;t.id!==n.id&&r.updateViewOrder(t.id,n.id)},onCancelEditing:m,onViewNameChange:y,onHandleSetting:g,getChooseConfigs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{unActiveViewColor:!1};return nk(h,(function(t){var n,r=Array.from(p).map((function(e){return e[1]})).find((function(e){return e.viewType===t.get("type")}));return r?(n=e.unActiveViewColor&&(null==c?void 0:c.get("uuid"))!==t.get("uuid")?"":r.colorCls,{key:t.get("uuid"),title:t.get("name"),icon:r.icon({className:n,size:16}),onSettingClick:g,onTitleChange:y,settings:RLe,draggable:!0}):null})).filter((function(e){return!!e}))}}},ILe=["className"];function PLe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MLe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PLe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PLe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var TLe=function(e){e.className;var t=wre(e,ILe),n=aW({id:t["data-node-key"],disabled:t.disabled}),r=n.attributes,o=n.listeners,i=n.setNodeRef,a=n.transform,l=n.transition,c=MLe(MLe({},t.style),{},{transform:Qae.Transform.toString(a&&MLe(MLe({},a),{},{scaleX:1})),transition:l});return u.a.cloneElement(t.children,MLe(MLe({ref:i,style:c},r),o))},NLe=function(){var e=FLe(),t=e.getChooseConfigs,n=e.onChooseView,r=e.onCancelEditing,o=e.onViewNameChange,i=e.onHandleSetting,l=e.editingKey,c=e.activeView,v=e.onDragEnd,h=e.isReadonly,g=yre(dye),m=WI(Object(a.useState)(""),2),y=m[0],b=m[1],w=function(e,t){b(e?t.key:"")},_=VU(BU(TH,{activationConstraint:{distance:8}})),k=function(e,t,n){"add"===t&&function(e){var t=e.currentTarget;null==g||g.open("add-view",{position:{origin:t,placement:"bottom"}})}(e)},C=function(e){return u.a.createElement("span",{onDoubleClick:function(){h||i({key:c.get("uuid")},RLe.find((function(e){return"rename"===e.key})))},className:"lakex-table-viewer-manage-tab-title"},e.title)},E=t({unActiveViewColor:!0}).map((function(e){return e?{key:e.key,label:u.a.createElement("div",{className:"lakex-table-viewer-manage-tab-item"},e.icon,e.key===l&&u.a.createElement(s.a,{className:"lakex-table-menu-configs-input",defaultValue:e.title,autoFocus:!0,onKeyDown:function(t){t.stopPropagation();var n=t.keyCode;27!==n?13===n&&o(t,e):r()},onClick:function(e){return e.stopPropagation()},onBlur:function(t){return o(t,e)}}),e.key!==l&&e.title.length>10&&u.a.createElement(d.a,{placement:"top",title:e.title,arrow:!0},C(e)),e.key!==l&&e.title.length<=10&&C(e)),closable:!h,closeIcon:e.key===c.get("uuid")?u.a.createElement(p.a,{overlayClassName:"lakex-table-menu-container lakex-table-toolbar-tab-menu",content:u.a.createElement(f.a,{onClick:function(e){i({key:c.get("uuid")},e),w(!1,e)}},RLe.map((function(e){return u.a.createElement(f.a.Item,{key:e.key},e.title)}))),visible:y===e.key,trigger:"click",placement:"bottomLeft",onClick:function(e){return e.stopPropagation()},onVisibleChange:function(t){return w(t,e)}},u.a.createElement(oue,{type:"MoreHorizontal",size:14})):u.a.createElement("span",null)}:null})).filter((function(e){return!!e}));return u.a.createElement(ore,{className:"lakex-table-viewer-manage-tab",prefixCls:"".concat("ant","-tabs"),activeKey:null==c?void 0:c.get("uuid"),onChange:function(e){return n({key:e})},items:E,editable:{onEdit:function(e,t){var n=t.key,r=t.event;null==k||k("add"===e?r:n,e)},removeIcon:u.a.createElement("span",null),showAdd:!h,addIcon:u.a.createElement(oue,{type:"Add",size:14})},popupClassName:"lakex-table-viewer-manage-tab-more-popup",moreIcon:u.a.createElement(oue,{type:"MoreHorizontal",size:14}),renderTabBar:function(e,t){return u.a.createElement(kq,{sensors:_,modifiers:[cW,dW],collisionDetection:GU,onDragEnd:v},u.a.createElement(Qq,{items:E.map((function(e){return{id:e.key}})),strategy:Gq},u.a.createElement(t,MLe({},e),(function(e){return u.a.createElement(TLe,{"data-node-key":String(e.key)||"",disabled:!!l},e)}))))}})},BLe=function(e){return e.MENU="menu",e.TAB="tab",e}(BLe||{});function VLe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LLe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VLe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VLe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zLe=function(e){return yre(lk).getValue("viewerManage.type")===BLe.MENU?React.createElement(ALe,LLe({},e)):React.createElement(NLe,LLe({},e))},ULe=function(e){var t=yre(dye),n=yre(nR),r=yre(pie),o=yre(lk),i=yre(_oe),l=qwe(mR.TABLE).isReadonly(),c=null==i?void 0:i.getViewNodes(),s=Object(a.useMemo)((function(){if(c){var e=o.getValue("viewerManage.viewTypes"),t=Array.from(c).map((function(e){return e[1]}));return e.map((function(e){var n=t.find((function(t){return t.viewType===e}));return n?{key:e,icon:n.icon({className:n.colorCls,size:16}),title:n.title,desc:n.desc}:null})).filter((function(e){return!!e}))}return[]}),[c]),d=Object(a.useMemo)((function(){return e.hasTitle?[{icon:u.a.createElement(oue,{type:"Add"}),title:u.a.createElement("span",null,Lw("新建视图")),children:s}]:s}),[e.hasTitle]);return u.a.createElement(vue,{menuKey:"addView",configs:d,onClick:function(e){var o=qw(32);n.execCommand("addView",{uuid:o,type:e.key}),null==r||r.open("view",o),t.close("add-view"),t.close("view-manage")},className:I()({"lakex-table-menu-container":!0,"lakex-table-view-create":!0,"lakex-table-view-create-no-title":!e.hasTitle}),onDoubleClick:function(){},onInputBlur:function(){},readonly:l})};ULe.defaultProps={hasTitle:!1};var HLe=function(){var e=FLe(),t=e.views,n=e.getChooseConfigs,r=e.onChooseView,o=e.onRenameView,i=e.onCancelEditing,a=e.onDragEnd,l=e.isReadonly,c=e.editingKey,s=e.activeView;if(t.length<=1)return null;var d=n();return u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-manage"},u.a.createElement(vue,{menuKey:d.map((function(e){return null==e?void 0:e.title})).join(","),configs:d,onClick:r,onDoubleClick:function(){return!l&&o},defaultSelectedKeys:[(null==s?void 0:s.get("uuid"))||""],onInputBlur:i,editingKey:c,className:"lakex-table-view-manage-inner",readonly:l,onDragEnd:a,draggable:!l}),!l&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-view-manage-hr"}),u.a.createElement(ULe,{hasTitle:!0})))},qLe=function(e){var t=FLe(),n=t.getChooseConfigs,r=t.onChooseView,o=t.onModalClose,i=t.activeView;return u.a.createElement(sBe,{title:Lw("切换视图"),onClose:o,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:i.get("uuid"),list:n(),onCheck:function(e){return r(e)}}))},WLe=Object.defineProperty,$Le=Object.getOwnPropertyDescriptor,GLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?$Le(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WLe(t,n,i),i},KLe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("viewerManage.type");e.registerItem({id:"view-manage",RenderComponent:zLe,onClick:function(e){if(n!==BLe.TAB){var r={position:{placement:"bottom",origin:e.target}};t._modalService.open("view-manage",r)}}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-manage",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?qLe:HLe}),e.registerItem({id:"add-view",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:ULe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerManage",type:"object",title:"视图管理",properties:{type:{type:"string",description:"组件类型",enum:Object.values(BLe)},viewTypes:{type:"array",description:"可操作的视图列表"}}}),e.registerDefaultValue({"viewerManage.type":BLe.TAB,"viewerManage.viewTypes":[sE.GRID,sE.CARD,sE.CALENDAR,sE.KANBAN]})}}])}();KLe.pluginName="workbench-viewer-manage",GLe([Ks(dye)],KLe.prototype,"_modalService",2),GLe([Ks(lk)],KLe.prototype,"_configuration",2),KLe=GLe([Gs({contrib:[sre,jme,fye]})],KLe);var YLe=Is.defineToken("AddFieldPluginConfigContribution"),JLe=Is.defineToken("AddFieldPluginColConfigNameContribution"),XLe=Object.defineProperty,ZLe=Object.getOwnPropertyDescriptor,QLe=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZLe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XLe(t,n,i),i},eze=Ew((function e(){var t=this;_w(this,e),this.getConfigComponents=function(){var e=t.addFieldPluginConfigProvider.getContributions({cache:!1});return e.length>0?e.map((function(e){return e.getConfigComponent()})):[]},this.getColConfigNameComponent=function(){var e,n,r=t.AddFieldPluginColConfigNameaddFieldPluginConfigProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getColConfigNameComponent)?void 0:n.call(e):null}}));QLe([yd(YLe)],eze.prototype,"addFieldPluginConfigProvider",2),QLe([yd(JLe)],eze.prototype,"AddFieldPluginColConfigNameaddFieldPluginConfigProvider",2),eze=QLe([Gs()],eze);var tze=function(e){var t,n;if(!fE.isSelectLike(e.type))return null;var r={type:e.type,options:(null==(t=e.property)?void 0:t.options)||[],color:(null==(n=e.property)?void 0:n.color)||!1};return u.a.createElement("div",{className:"select-input lakex-table-col-options"},u.a.createElement(q_e,{title:u.a.createElement("span",{className:"lakex-table-option-config-title"},Lw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:e.type===HC.MULTI_SELECT,configs:r}))},nze=function(e){var t=e.initialState||{},n=t.fieldId,r=t.showFieldTypes,o=t.sourceFieldId,i=t.direction,l=void 0===i?"after":i,c=Ywe(n||""),f=c.field,p=c.fieldName,v=c.fieldType,h=c.fieldOptions,g=c.updateProperty,y=yre(oA),b=yre(nR),w=yre(RR),_=yre(Ooe),k=yre(dye),C=yre($P),E=yre(eze),O=f?null==_?void 0:_.getFieldIcon(null==f?void 0:f.get("type")):null,S=(null==E?void 0:E.getConfigComponents())||[],x=Zw(f),j=WI(Object(a.useState)(null),2),D=j[0],A=j[1],R=Object(a.useMemo)((function(){return x?function(e){var t,n=[];for(e.forEach((function(e){n.push(e.uuid)}));!t||n.includes(t);)t=qw(32);return{id:t,name:KC(HC.TEXT,e),type:HC.TEXT,options:null,color:null,config:null}}(y.getAllFields().toJSON()):{id:n,name:p||"",type:v||HC.TEXT,options:(null==h?void 0:h.toJSON())||[],color:null==f?void 0:f.get("color"),config:null==f?void 0:f.get("config")}}),[f]),F=WI(Object(a.useState)(R.name),2),P=F[0],M=F[1],T=WI(Object(a.useState)(R.type),2),N=T[0],B=T[1],V=WI(Object(a.useState)(R.color),2),L=V[0],z=V[1],U=WI(Object(a.useState)(R.config),2),H=U[0],q=U[1],W=Object(a.useRef)(null),$=WI(Object(a.useState)(!1),2),G=$[0],K=$[1],Y=WI(Object(a.useState)((function(){return fE.isSelectLike(N)?{options:R.options,color:Boolean(null==f?void 0:f.get("color"))}:null})),2),J=Y[0],X=Y[1],Z=Object(a.useCallback)((function(){k.close("addOrUpdateField")}),[k]),Q=Object(a.useCallback)((function(e){return e?rk(y.getAllFields(),(function(t){return t.get("uuid")!==R.id&&t.get("name")===e}))?Lw("不能与其他列重名"):null:Lw("列名不能为空")}),[]),ee=Object(a.useCallback)((function(e){var t=Q(e);A(t)}),[]),te=Object(a.useCallback)((function(e){var t=e.ctrlKey,n=e.metaKey;if(K(!0),13===e.keyCode&&!t&&!n){var r=e.target.value.trim();ee(r)}}),[]),ne=Object(a.useCallback)(function(){var e=UC(jk.mark((function e(t){var r,i,a;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Q(P),A(r),ee(P),!r){e.next=5;break}return e.abrupt("return");case 5:x?(i={field:{uuid:t||qw(32),name:P,type:N,color:L,config:H},sourceFieldId:o,direction:l},fE.isSelectLike(N)&&J&&(i.field.color=J.color,i.field.options=J.options),null==b||b.execCommand("addField",i),Z()):(a={uuid:n,name:P,type:N,color:L,config:H},fE.isSelectLike(N)&&J&&(a.color=J.color,a.options=J.options),g(a),Z());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Q,f,x,n,o,l,P,N,L,H,ee,J]),re=Object(a.useCallback)((function(e){return Xu(y.getFieldCells(e.fieldId),"formatValue").filter((function(e){return!!e.formatValue})).map((function(e,t){return{color:null==C?void 0:C.getByIndex(t),name:e.formatValue,uuid:qw(6)}}))}),[]),oe=Object(a.useCallback)((function(e){var t,r=e.key;if(new RegExp("".concat(YC(N),"(\\s\\d)*")).test(P)&&x&&!G){var o=KC(r,y.getAllFields().toJSON());M(o),null==(t=W.current)||t.setValue(o)}if(!fE.isSelectLike(N)&&fE.isSelectLike(r)&&(!J||!J.options||0===J.options.length)){var i=n?re({fieldId:n,type:N,color:true}):[];X({options:i,color:true})}k.emitUpdatePosition("addOrUpdateField"),B(r)}),[R,y,N,J,n,x,G]);if(Zae((function(){(null==W?void 0:W.current)&&setTimeout((function(){W.current&&(W.current.focus(),W.current.select())}),100)}),[]),!x&&!f)return console.warn("FieldId is valid in FieldConfigModal"),null;var ie=GC.filter((function(e){if(x){if(fE.isCreateDisable(e.type))return!1}else if(fE.isTransformDisable(e.type))return!1;return!0}));r&&(ie=GC.filter((function(e){return r.includes(e.type)})));var ae=null==_?void 0:_.getFieldIcon(N),ue=[{key:N,title:u.a.createElement("span",null,YC(N)),icon:ae?u.a.createElement(ae,{size:16}):null,groupBy:"subType",children:ie.map((function(e){var t=null==_?void 0:_.getFieldIcon(e.type),n=null==E?void 0:E.getColConfigNameComponent();return{key:e.type,title:n?u.a.createElement(n,{fieldType:e.type,fieldName:e.name}):e.name,icon:t?u.a.createElement(t,{size:16}):null,subType:e.isAdvanced?Lw("高级"):Lw("基础"),showActiveIcon:!0}}))}];return u.a.createElement("div",{className:"lakex-table-col-configs"},u.a.createElement("p",{className:"lakex-table-col-title"},Lw("数据表列名")),u.a.createElement("div",{className:"lakex-table-col-name"},u.a.createElement(s.a,{ref:W,className:I()({error:D}),defaultValue:P,maxLength:128,onChange:function(e){var t=e.target.value.trim();M(t)},onKeyDown:te,onBlur:function(e){ee(e.target.value.trim())}}),D&&u.a.createElement("div",{className:"lakex-table-col-error"},D)),u.a.createElement("p",{className:"lakex-table-col-title"},Lw("列类型"),u.a.createElement(d.a,{title:Lw("设置该列内容类型，支持文本、日期、数字、单选、多选等")},u.a.createElement(oue,{type:"Question",size:14,style:{marginLeft:4}}))),x||w.can(gR.TRANSFORM,mR.FIELD,f)?u.a.createElement(vue,{key:v,menuKey:v||"",className:"lakex-table-col-types",defaultSelectedKeys:[N],onClick:oe,configs:ue}):u.a.createElement("div",{className:"lakex-table-col-readonly"},O&&u.a.createElement(O,null),u.a.createElement("span",{className:"lakex-table-col-readonly-text"},YC(null==f?void 0:f.get("type")))),u.a.createElement(tze,{name:P,type:N,property:J,onChange:function(e){X(e)}}),S.length>0&&S.map((function(e){return u.a.createElement(e,{key:null,originField:f,fieldType:N,fieldName:P,fieldProperty:J,onFieldSubmitConfirm:ne,onChange:function(e){(null==e?void 0:e.color)&&z(e.color),null!=(null==e?void 0:e.config)&&q(e.config)}})})),u.a.createElement("div",{className:"lakex-table-col-configs-footer"},u.a.createElement(m.a,{style:{marginRight:12},onClick:Z},Lw("取消")),u.a.createElement(m.a,{type:"primary",disabled:D,onClick:function(){return ne()}},Lw("确定"))))},rze=Object.defineProperty,oze=Object.getOwnPropertyDescriptor,ize=function(e,t,n,r){for(var o,i=r>1?void 0:r?oze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rze(t,n,i),i},aze=function(){return Ew((function e(){_w(this,e),this._toDestroyCollection=new kk}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"init",value:function(){var e=this;this._toDestroyCollection.push(this._renderService.onClickIcon((function(t){"grid-field-config"===t.iconName&&e._handleOpenFieldConfigCreateModal(t.event.currentTarget)}))),this._toDestroyCollection.push(this._renderService.onClickEvent((function(t){if("gridHeader:doubleClick"===t.eventName){var n=t.data,r=n.event,o=n.fieldId;e._modalService.open("addOrUpdateField",{position:{origin:r.currentTarget,placement:"bottom"},initialState:{fieldId:o}})}})))}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:"addOrUpdateField",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:nze})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"updateField",name:Lw("编辑列"),icon:"Edit",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===rRe.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=n.recordId,i=n.fieldId;if(r){var a=t._workbenchContext.$root.querySelector('.lakex-viewer-grid-header-column[data-field-id="'.concat(i,'"]'));t._modalService.open("addOrUpdateField",{initialState:{recordId:o,fieldId:i},position:{origin:a,placement:"bottom"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"copyField",name:Lw("复制列"),icon:"Copy",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===rRe.HEADER},onClick:function(e){var n=e.initialState.fieldId;t._commandService.execCommand("copyField",{sourceFieldId:n}),t._modalService.close("context-menu-modal")}}),e.registerItem({key:"insertFieldLeft",name:Lw("向左插入列"),icon:"LeftArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===rRe.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=t._readService.getActiveView(),i=n.fieldId,a=n.originRect;if(r&&o){var u=Z_(t._readService.getViewFields(o.get("uuid"))||[],(function(e){return e.get("field_uuid")===i}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==u?void 0:u.get("field_uuid"),direction:"before"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"insertFieldRight",name:Lw("向右插入列"),icon:"RightArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===rRe.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=t._readService.getActiveView(),i=n.fieldId,a=n.originRect;if(r&&o){var u=Z_(t._readService.getViewFields(o.get("uuid"))||[],(function(e){return e.get("field_uuid")===i}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==u?void 0:u.get("field_uuid"),direction:"after"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"removeField",name:Lw("删除列"),icon:"Delete",hotkey:"",visible:function(e){var n=e.from,r=e.fieldId;if(!r)return!1;var o=t._readService.getField(r);return!t.isReadonly&&n===rRe.HEADER&&!fE.isDeleteDisable(null==o?void 0:o.get("type"))},onClick:function(e){var n=e.initialState,r=n.fieldId;n.disableDel||(t._possibleService.setUnpossible(JFe.delCol,[r]),t._commandService.execCommand("removeField",{fieldId:r}),t._modalService.close("context-menu-modal"))},onMouseEnter:function(e){var n=[e.initialState.fieldId];t._possibleService.setPossible(JFe.delCol,n)},onMouseLeave:function(e){var n=[e.initialState.fieldId];t._possibleService.setUnpossible(JFe.delCol,n)}})}},{key:"_handleOpenFieldConfigCreateModal",value:function(e){this.isReadonly||this._modalService.open("addOrUpdateField",{position:{origin:e,placement:"bottom"}})}}],[{key:"pluginModule",value:function(){return dd().contribution(YLe).contribution(JLe).register(this).register(eze)}}])}();aze.pluginName="workbench-add-field",ize([Ks(dye)],aze.prototype,"_modalService",2),ize([Ks(_oe)],aze.prototype,"_renderService",2),ize([Ks(RR)],aze.prototype,"_abilityService",2),ize([Ks(hre)],aze.prototype,"_workbenchContext",2),ize([Ks(oA)],aze.prototype,"_readService",2),ize([Ks(nR)],aze.prototype,"_commandService",2),ize([Ks(nIe)],aze.prototype,"_possibleService",2),aze=ize([Gs({contrib:[sre,fye,dIe]})],aze);var uze=function(){var e=yre(oA),t=yre(nR),n=Q_(e.getAllViewFields(),(function(e){var t;return(null==(t=e.get("field"))?void 0:t.get("type"))===HC.IMAGE}))||[],r=null==e?void 0:e.getViewConfig();return{options:[{label:Lw("无封面"),value:null,icon:u.a.createElement(oue,{type:"Clear",size:14})}].concat(gw(nk(n,(function(e){var t=e.get("field");return{label:null==t?void 0:t.get("name"),value:null==t?void 0:t.get("uuid"),icon:u.a.createElement(oue,{type:"FieldImage"})}})))),defaultValue:(null==r?void 0:r.get("cover_field_uuid"))||null,onCoverSourceChange:function(n){var r;null==t||t.execCommand("updateCoverSource",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),coverFieldId:n})}}},lze=function(){var e=uze(),t=e.options,n=e.defaultValue,r=e.onCoverSourceChange,o=yre(oC),i=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-source"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},Lw("封面来源")),u.a.createElement(x.a,{defaultValue:n,dropdownClassName:"lakex-table-menu-container lakex-table-view-setting",onChange:r,suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),getPopupContainer:function(){return i}},t.map((function(e){return u.a.createElement(x.a.Option,{value:e.value,key:e.value,className:"column-select-option"},e.icon,e.label)}))))},cze=function(){var e,t=yre(oA),n=yre(nR);return{options:[{label:Lw("适应"),value:tE.Fit},{label:Lw("裁剪"),value:tE.Clip}],coverDisplay:null==(e=null==t?void 0:t.getViewConfig())?void 0:e.get("cover_display"),viewFields:(null==t?void 0:t.getViewFields())||[],onCoverDisplayChange:function(e){var r;null==n||n.execCommand("updateCoverDisplay",{viewId:null==(r=null==t?void 0:t.getActiveView())?void 0:r.get("uuid"),coverDisplay:e})}}},sze=function(){var e=cze(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-display"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},Lw("封面效果")),u.a.createElement(_.a.Group,{options:t,onChange:function(e){return n(e.target.value)},defaultValue:r,optionType:"button"}))},dze=function(){var e=yre(oA),t=yre(nR);return{viewConfig:null==e?void 0:e.getViewConfig(),onShowFieldChange:function(n){var r;null==t||t.execCommand("updateShowFieldName",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),showFieldName:n})}}},fze=function(){var e=dze(),t=e.viewConfig,n=e.onShowFieldChange;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-show-name"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},Lw("显示字段名")),u.a.createElement(j.a,{defaultChecked:null==t?void 0:t.get("show_field_name"),onChange:n,size:"small"}))},pze=function(){var e=yre(Ooe),t=yre(nR),n=yre(dye),r=Xwe();return{readonly:qwe(mR.TABLE).isReadonly(),viewFields:r,onFieldHiddenChange:function(e,n,r){null==t||t.execCommand("updateFieldHidden",{viewId:e,fieldId:n,hidden:r})},openConfigMenu:function(e,t,r){var o;null==n||n.open("view-field-action",{position:{origin:e.target,placement:"rightTop"},initialState:{fieldId:t.get("field_uuid"),fieldName:null==(o=t.get("field"))?void 0:o.get("name"),target:e.target,disableDel:r}})},fieldService:e}};function vze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vze(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gze=function(e){var t=e.readonly,n=e.viewField,r=e.disable,o=e.OrderDragIcon,i=e.onFieldHiddenChange,a=e.openConfigMenu,l=yre(Ooe),c=n.get("field"),s=n.get("hidden"),d=n.get("field_uuid"),f=n.get("view_uuid"),p=aW({id:d}),v=p.attributes,h=p.listeners,g=p.setNodeRef,m=p.transform,y=p.transition,b=p.isDragging,w=c?null==l?void 0:l.getFieldIcon(c.get("type")):null,_=c?null==l?void 0:l.getFieldTagComponent(c.get("type")):null,k={transform:Qae.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return c?u.a.createElement("div",hze(hze({ref:t?void 0:g,className:"lakex-table-view-setting-field-item ".concat(s?"lakex-table-view-setting-disable":"")},v),{},{style:k}),o&&!t&&u.a.createElement("span",{className:"lakex-table-view-setting-drag-icon"},u.a.createElement(o,{listeners:h})),w?u.a.createElement(w,{className:"lakex-table-view-setting-field-icon"}):null,u.a.createElement("div",{className:"lakex-table-view-setting-field-name"},u.a.createElement("span",{className:"lakex-table-view-setting-field-name-content"},c.get("name")),_?u.a.createElement(_,{field:c,position:"viewerSetting"}):null),u.a.createElement("span",{className:"lakex-table-view-setting-operation-icon"},!r&&u.a.createElement(oue,{type:s?"IconHide":"Preview",onClick:function(){return i(f,d,!s)}})),!t&&u.a.createElement(oue,{className:"lakex-table-config-container lakex-table-view-setting-operation-icon",type:"MoreHorizontal",onClick:function(e){return a(e,n,r)}})):null},mze=function(){var e,t=pze(),n=t.readonly,r=t.viewFields,o=t.onFieldHiddenChange,i=t.openConfigMenu,l=function(e){var t=yre(oFe),n=t.OrderDragIcon,r=Object(a.useCallback)(function(){var e=UC(jk.mark((function e(n){var r,o;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.active,o=n.over,r.id===o.id){e.next=4;break}return e.next=4,t.updateFieldOrder(r.id,o.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,e]);return{OrderDragIcon:n,onDragEnd:r}}(r),c=l.onDragEnd,s=l.OrderDragIcon,d=VU(BU(TH,{activationConstraint:{distance:8}})),f=Object(a.useMemo)((function(){return nk(r,(function(e){return{id:e.get("field_uuid")}}))}),[r]),p=Q_(r,(function(e){return!e.get("hidden")}));return 1===p.length&&(e=p[0]),u.a.createElement("div",{className:"lakex-table-view-setting-fields"},u.a.createElement(kq,{sensors:d,modifiers:[pW,dW],collisionDetection:GU,onDragEnd:c},u.a.createElement(Qq,{items:f,strategy:Jq},nk(r,(function(t){var r=t.get("field"),a=(null==e?void 0:e.get("uuid"))===t.get("uuid");return r?(fE.isDeleteDisable(r.get("type"))&&(a=!0),u.a.createElement(gze,{key:t.get("field_uuid"),readonly:!!n,viewField:t,disable:a,OrderDragIcon:s,onFieldHiddenChange:o,openConfigMenu:i})):null})))))},yze=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-setting"},(null==n?void 0:n.includes("cover"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(lze,null),u.a.createElement(sze,null),u.a.createElement("div",{className:"lakex-table-view-setting-hr"})),(null==n?void 0:n.includes("showField"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(fze,null),u.a.createElement("div",{className:"lakex-table-view-setting-hr"})),n.includes("fields")&&u.a.createElement(mze,null))},bze=function(e){var t=e.initialState;return u.a.createElement("div",{className:"lakex-table-view-setting-modal"},u.a.createElement(yze,{settings:t.settings}))},wze=function(e){var t,n,r,o,i,a,l=e.initialState,c=(t={fieldId:l.fieldId,fieldName:l.fieldName,target:l.target,disableDel:l.disableDel},n=t.fieldId,r=t.target,o=t.disableDel,i=yre(dye),a=yre(nR),{items:[{key:"field-edit",icon:"Edit",name:Lw("编辑"),onClick:function(){null==i||i.close("view-field-action"),null==i||i.open("addOrUpdateField",{position:{origin:r,placement:"rightTop"},initialState:{fieldId:n}})}},{key:"field-del",icon:"Delete",name:Lw("删除"),onClick:function(){o||(null==a||a.execCommand("removeField",{fieldId:n}),null==i||i.close("view-field-action"))}}]}).items;return u.a.createElement(f.a,{mode:"vertical",className:"lakex-table-field-action"},c.map((function(e,t){return u.a.createElement(f.a.Item,{className:I()({disable:"field-del"===e.key&&l.disableDel}),key:e.key,icon:u.a.createElement("span",null,u.a.createElement(oue,{type:e.icon})),onClick:function(){var t;null==(t=e.onClick)||t.call(e)}},Lw(e.name))})))},_ze=function(){var e=uze(),t=e.options,n=e.defaultValue,r=yre(dye),o=Object(a.useMemo)((function(){return[{key:"cover-source",title:Lw("封面来源"),options:t,defaultValue:n}]}),[t,n]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(_Be,{list:o,onSelect:function(e){r.open("view-field-cover-source",{position:{placement:"bottom"},initialState:{options:e.options,defaultValue:e.defaultValue}})}}))},kze=function(){var e=cze(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay,o=Object(a.useMemo)((function(){return[{key:"cover-display",title:Lw("封面效果"),options:t,defaultValue:r||tE.Clip}]}),[t,r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(wBe,{list:o,onChoose:function(e,t){n(t.value)}}))},Cze=function(){var e=dze(),t=e.viewConfig,n=e.onShowFieldChange,r=Object(a.useMemo)((function(){return[{key:t.get("uuid"),title:Lw("显示字段名"),checked:!!t.get("show_field_name")}]}),[t]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(yBe,{list:r,onSwitch:function(e,t){n(t)}}))},Eze=function(){var e,t=pze(),n=t.viewFields,r=t.onFieldHiddenChange,o=t.fieldService,i=Q_(n,(function(e){return!e.get("hidden")}));1===i.length&&(e=i[0]);var l=Object(a.useMemo)((function(){return nk(n,(function(t){var n=t.get("field");if(!n)return null;var r=(null==o?void 0:o.getFieldIcon(n.get("type")))||null,i=t.get("hidden"),a=(null==e?void 0:e.uuid)===t.get("uuid");return fE.isDeleteDisable(n.get("type"))&&(a=!0),{key:t.get("uuid"),title:n.get("name"),checked:!i,icon:r?u.a.createElement(r,null):null,disabled:a}})).filter((function(e){return!!e}))}),[n]);return u.a.createElement("div",{className:"lakex-table-view-setting-fields"},u.a.createElement(yBe,{list:l,onSwitch:function(e,t){var o=Z_(n,(function(t){return t.get("uuid")==e.key}));o&&r(o.get("view_uuid"),o.get("field_uuid"),!t)}}))},Oze=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return u.a.createElement("div",{className:"lakex-table-h5-viewer-setting"},(null==n?void 0:n.includes("cover"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(_ze,null),u.a.createElement(kze,null)),(null==n?void 0:n.includes("showField"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Cze,null)),n.includes("fields")&&u.a.createElement(Eze,null))},Sze=function(e){var t=e.initialState,n=yre(dye);return u.a.createElement(u.a.Fragment,null,u.a.createElement(sBe,{title:t.title,onClose:function(){n.close("view-field-setting")},showCloseIcon:!0},u.a.createElement(Oze,{settings:t.settings})))},xze=function(e){var t=e.initialState,n=uze().onCoverSourceChange,r=yre(dye),o=function(){r.close("view-field-cover-source")},i=Object(a.useMemo)((function(){return t.options.map((function(e){return{key:e.value||"",icon:e.icon,title:e.label||""}}))}),[t.options]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(sBe,{title:Lw("请选择"),onClose:o,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:t.defaultValue||"",list:i,onCheck:function(e){n(e.key),o()}})))},jze=Object.defineProperty,Dze=Object.getOwnPropertyDescriptor,Aze=function(e,t,n,r){for(var o,i=r>1?void 0:r?Dze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jze(t,n,i),i},Rze=function(){return Ew((function e(){var t=this;_w(this,e),this._getTitlte=function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===sE.GRID?Lw("表格配置"):(null==e?void 0:e.get("type"))===sE.CARD?Lw("画册配置"):(null==e?void 0:e.get("type"))===sE.KANBAN?Lw("看板配置"):Lw("字段配置")}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"view-field-setting",icon:"Setting",tooltip:this._getTitlte,visible:function(){var e=t._readService.getActiveView();return[sE.GRID,sE.CARD,sE.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:function(e){var n=e.target;t._modalService.open("view-field-setting",{position:{origin:n,placement:"bottom"},initialState:t._getInitstate()})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-field-setting",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?Sze:bze}),n===roe.MOBILE&&e.registerItem({id:"view-field-cover-source",mode:sye.DRAWER,hasMask:!0,hasAnimation:!0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:xze}),e.registerItem({id:"view-field-action",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:wze})}},{key:"_getInitstate",value:function(){var e=this._readService.getActiveView();return e.get("type")===sE.GRID?{settings:["fields"],title:this._getTitlte()}:e.get("type")===sE.CARD?{settings:["cover","showField","fields"],title:this._getTitlte()}:e.get("type")===sE.KANBAN?{settings:["showField","fields"],title:this._getTitlte()}:{}}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function Fze(e){var t=Xae().themeHelper,n=WI(Object(a.useState)(e.color),2),r=n[0],o=n[1];Zae((function(){o(e.color)}),[e.color]);var i=function(e){return aSe.map((function(t){return{colorToken:t,colorValue:t.split(",").map((function(t){return e.toThemeColor("@".concat(t))}))}}))}(t),l=function(n){return u.a.createElement("span",{className:"lakex-table-progress-color-selector-item",onClick:function(){e.onClick(n.colorToken),o(n.colorToken)}},u.a.createElement("span",{style:{background:lSe(n.colorValue)}},n.colorToken===r&&u.a.createElement("svg",{style:{fill:null==t?void 0:t.toThemeColor("@white")},viewBox:"0 0 18 18"},u.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};return u.a.createElement("span",{className:"lakex-table-progress-color-selector"},e.chunk?function(e,t,n){t=void 0===t?1:Hi(wr(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,a=Array(Ui(r/t));o<r;)a[i++]=Ei(e,o,o+=t);return a}(i,e.chunk).map((function(e,t){return u.a.createElement("div",{key:t,className:"lakex-table-progress-color-selector-chunk"},e.map((function(e){return l(e)})))})):i.map((function(e){return l(e)})))}Rze.pluginName="workbench-viewer-field-setting",Aze([Ks(oA)],Rze.prototype,"_readService",2),Aze([Ks(dye)],Rze.prototype,"_modalService",2),Aze([Ks(lk)],Rze.prototype,"_configuration",2),Rze=Aze([Gs({contrib:[sre,jme,fye]})],Rze);var Ize=function(e){var t=e.originField,n=e.fieldType,r=e.onChange;if(n!==HC.PROGRESS)return null;var o=null==t?void 0:t.get("color");return"string"==typeof o&&o||(o="blue-6",null==r||r({color:o})),React.createElement("div",{className:"lakex-table-field-progress-config"},React.createElement("p",{className:"lakex-table-field-progress-config-title"},Lw("颜色设置")),React.createElement(Fze,{chunk:7,color:o,onClick:function(e){return null==r?void 0:r({color:e})}}))},Pze=Object.defineProperty,Mze=Object.getOwnPropertyDescriptor,Tze=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return Ize}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Tze.pluginName="workbench-field-progress",Tze=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pze(t,n,i),i}([Gs({contrib:[sre,YLe]})],Tze);var Nze=function(e){var t=e.initialState,n=yre(doe),r=yre(Exe),o=WI(Object(a.useState)(t.x),2),i=o[0],u=o[1],l=WI(Object(a.useState)(0),2),c=l[0],s=l[1];return Zae((function(){var e=r.onResize((function(e){var t=e.x;u(t)}));return function(){e.destroy()}}),[]),Zae((function(){var e=n.$root.getBoundingClientRect().height;s(e||"100%")}),[n]),React.createElement("div",{className:"lakex-grid-column-resize-line",style:{transform:"translateX(".concat(i,"px)"),height:c}})},Bze=Object.defineProperty,Vze=Object.getOwnPropertyDescriptor,Lze=function(e,t,n,r){for(var o,i=r>1?void 0:r?Vze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bze(t,n,i),i},zze=function(){return Ew((function e(){_w(this,e),this._columnControllerModalId="grid-column-controller"}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"init",value:function(){var e=this;this._columnControllerService.onResizeStart((function(t){var n=t.x,r=e._renderContext.$root.getBoundingClientRect(),o=r.left,i=r.top;e._modalService.getContainer().style.cursor="col-resize",e._modalService.open(e._columnControllerModalId,{position:{left:o,top:i},initialState:{x:n}})})),this._columnControllerService.onResizeEnd((function(){e._modalService.getContainer().style.cursor="",e._modalService.close(e._columnControllerModalId)}))}},{key:"registerModal",value:function(e){e.registerItem({id:this._columnControllerModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:Nze})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();zze.pluginName="workbench-viewer-grid",Lze([Ks(dye)],zze.prototype,"_modalService",2),Lze([Ks(Exe)],zze.prototype,"_columnControllerService",2),Lze([Ks(doe)],zze.prototype,"_renderContext",2),Lze([Ks(RR)],zze.prototype,"_abilityService",2),zze=Lze([Gs({contrib:[sre,fye]})],zze);var Uze=function(e){var t=Object(a.useRef)(null);Zae((function(){var e,n=function(e){e.preventDefault(),e.stopPropagation()};return null==(e=t.current)||e.addEventListener("wheel",n,{passive:!1}),function(){var e;null==(e=t.current)||e.removeEventListener("wheel",n)}}),[e.visible]);var n=function(t){t.preventDefault(),e.onBeforeEndEdit(t)};return e.visible?u.a.createElement("div",{className:"lakex-mask-in-cell-editor",onClick:n,ref:t,onContextMenu:n}):null};function Hze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hze(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wze=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.isMultiText,l=e.onBlur,c=e.onChange,s=e.onSave,d=Object(a.useRef)(null),f=yre(jxe),p=yre(Lxe),v=yre(nxe),h=WI(Object(a.useState)(!1),2),g=h[0],m=h[1];Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=d.current)||e.focus()},blur:function(){var e;null==(e=d.current)||e.blur()},onEndEdit:(e=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){w(e)},getValue:function(){var e;return null==(e=d.current)?void 0:e.getValue()}};var e}));var y=function(){var e=UC(jk.mark((function e(t){var n,r,o,i;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return o=String(null==(n=d.current)?void 0:n.getValue()),i=null==(r=null==o?void 0:o.trim)?void 0:r.call(o),e.next=5,null==s?void 0:s(i);case 5:setTimeout((function(){var e,t;null==(e=d.current)||e.focus(),null==(t=d.current)||t.clearValue()}),30);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Object(a.useCallback)((function(t){e.toggleEditing(!1);var n=null==p?void 0:p.getCellIndexesByClientXY(t.clientX,t.clientY);n&&zw((function(){var e=null==v?void 0:v.createGridSelectionByIndex(n[0],n[1]);e&&(null==v||v.setSelection(e))}))}),[n]),w=function(t){var n,r,o;if(void 0!==t){var i=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;null==(r=d.current)||r.setValue(i),null==(o=d.current)||o.setCursorToEnd(),zw((function(){null==p||p.updateCellCoordsInViewPort()}))}},_=Object(a.useMemo)((function(){if(!i){var e=null==f?void 0:f.rowHeightSize;return qze(qze({},r),{},{minHeight:e,height:e})}return r}),[i,r]),k={className:"textarea-cell ".concat(o),ref:d,onKeyDown:function(t){var r,i=t.shiftKey,a=t.key,u=a===Nz.ENTER;if(!g){if(u)if(n&&i)document.execCommand("insertText",!1,"\n"),null==(r=d.current)||r.blur(),setTimeout((function(){var e;null==(e=d.current)||e.focus()}),0);else if(!i){if(o===HC.LINK&&!n)return;e.toggleEditing(!0)}a===Nz.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))}},onCompositionStart:function(){m(!0)},onCompositionEnd:function(){m(!1)},onChange:function(e){var t=e.target.value;c&&c(t)},readOnly:!1,onBlur:function(){l&&l()},maxRows:6};return u.a.createElement(u.a.Fragment,null,u.a.createElement(Uze,{visible:n,onBeforeEndEdit:b}),u.a.createElement("div",{className:"lakex-table-text-editor",style:qze({},_)},u.a.createElement(Mre,qze({allowEnter:i},k))))})));function $ze(e){var t=e.editing,n=yre(abe),r=oxe(t),o=Object(a.useRef)(null),i=WI(Kae(),3),u=i[0],l=i[1],c=i[2];return Object(a.useLayoutEffect)((function(){t&&o.current?l(o.current):c()}),[o,t]),{editorRelativeLayout:Object(a.useMemo)((function(){var e=Math.floor((null==n?void 0:n.getRenderViewPort().height)||0);return function(e,t,n,r){var o={position:"absolute",left:0};if(!e)return o.width=0,o;var i=Math.round((null==t?void 0:t.height)||0);return Math.floor(e.top+i+4)>r?(o.bottom=0,o.maxHeight=e.top):(o.top=e.height+4,o.maxHeight=n-(e.top+e.height+4)),o}(r,u,document.body.getBoundingClientRect().height,e)}),[t,u,r]),editorWrapperRef:o}}function Gze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gze(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yze=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.inputObserverRef,l=Qwe(e.recordId,e.fieldId),c=Ywe(e.fieldId),s=c.field,d=c.fieldOptions,f=c.updateProperty,p=qwe(mR.FIELD).canUpdate(s),v=Object(a.useMemo)((function(){return o===HC.MULTI_SELECT}),[o]),h=yre(_oe),g=Object(a.useMemo)((function(){var e=(null==l?void 0:l.value)||[];return Array.isArray(e)?e:[e]}),[v,null==l?void 0:l.formatValue]),m=$ze({editing:n}),y=m.editorRelativeLayout,b=m.editorWrapperRef;Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=i.current)||e.focus()},blur:function(){var e;null==(e=i.current)||e.blur()},onEndEdit:(e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=i.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e})),Zae((function(){var t=null==h?void 0:h.onClickCellIcon((function(t){"cellSelectIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);var w=function(){var e=UC(jk.mark((function e(t){var n,r;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.includes(t.uuid),v){e.next=7;break}return e.next=4,null==l?void 0:l.setCell(n?"":t.uuid);case 4:case 10:return e.abrupt("return",e.sent);case 7:return r=n?g.filter((function(e){return e!==t.uuid})):g.concat(t.uuid),e.next=10,null==l?void 0:l.setCell(r.map((function(e){return{value:e}})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Wae(function(){var t=UC(jk.mark((function t(r){return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,w(r);case 4:v||e.toggleEditing();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k=Wae((function(e){var t=Q_(d,(function(t){return t.get("uuid")!==e}));f({options:t.toJSON()})})),C=Wae(function(){var t=UC(jk.mark((function t(r){var o;return jk.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return o=d.toJSON().concat(r),t.next=5,f({options:o});case 5:w(r),v||e.toggleEditing();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),E=Wae((function(e){var t=nk(d,(function(t){return t.get("uuid")===e.uuid?e:t.toJSON()}));f({options:t})}));return s&&fE.isSelectLike(o)?u.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:b,style:Kze(Kze(Kze({},r),y),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===Nz.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},u.a.createElement(x_e,{inputRef:i,visible:n,focus:!1,colorable:!!s.get("color"),options:d.toJSON(),editable:!0,optionEditable:p,selectedIds:g,onOptionCreate:C,onOptionChange:E,onOptionDelete:k,onOptionSelect:_})):null})));function Jze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jze(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zze=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.inputObserverRef,i=e.cellValue||[],l=Qwe(e.recordId,e.fieldId),c=yre(_oe),s=$ze({editing:n}),d=s.editorRelativeLayout,f=s.editorWrapperRef;Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=o.current)||e.focus()},blur:function(){var e;null==(e=o.current)||e.blur()},onEndEdit:(e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=o.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e}));var p=Wae(function(){var e=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null==l?void 0:l.setCell(t.map((function(e){return e})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Zae((function(){var t=null==c?void 0:c.onClickCellIcon((function(t){"cellMentionIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);return u.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:f,style:Xze(Xze(Xze({},r),d),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===Nz.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},u.a.createElement(Gke,{focus:!1,visible:n,inputRef:o,selected:i,maxHeight:d.maxHeight,onSelect:function(e){var t=i.concat(e);p(t)},onUnselect:function(e){var t=i.filter((function(t){return t.uid!==e.uid}));p(t)}}))})));function Qze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eUe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qze(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tUe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.onBlur,l=e.onChange,c=e.onSave,s=Object(a.useRef)(null),d=yre(jxe),f=yre(Lxe),p=yre(nxe),v=WI(Object(a.useState)(),2),h=v[0],g=v[1];Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=s.current)||e.focus()},blur:function(){var e;null==(e=s.current)||e.blur()},onEndEdit:(e=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){b(e)},getValue:function(){return h}};var e}));var m=function(){var e=UC(jk.mark((function e(t){var n,r,o;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}if(null!=h){e.next=5;break}return e.next=4,null==c?void 0:c(null);case 4:return e.abrupt("return",e.sent);case 5:return r=String(h),o=null==(n=null==r?void 0:r.trim)?void 0:n.call(r),e.next=9,null==c?void 0:c(o);case 9:setTimeout((function(){g(null)}),30);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(a.useCallback)((function(t){e.toggleEditing(!1);var n=null==f?void 0:f.getCellIndexesByClientXY(t.clientX,t.clientY);n&&zw((function(){var e=null==p?void 0:p.createGridSelectionByIndex(n[0],n[1]);e&&(null==p||p.setSelection(e))}))}),[n]),b=function(t){var n;if(void 0!==t){var r=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;g(r),zw((function(){null==f||f.updateCellCoordsInViewPort()}))}},w=Object(a.useMemo)((function(){var e=null==d?void 0:d.rowHeightSize;return eUe(eUe({},r),{},{minHeight:e,height:e})}),[r]),_={className:"number-cell ".concat(o),ref:s,onKeyDown:function(t){var r,o=t.shiftKey,i=t.key;i===Nz.ENTER&&(n&&o?(null==(r=s.current)||r.blur(),setTimeout((function(){var e;null==(e=s.current)||e.focus()}),0)):o||e.toggleEditing(!0)),i===Nz.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))},value:h,onChange:function(e){g(e),l&&l(e)},autoFocus:!0,readOnly:!1,onBlur:function(){i&&i()}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(Uze,{visible:n,onBeforeEndEdit:y}),u.a.createElement("div",{className:"lakex-table-number-editor",style:eUe({},w)},u.a.createElement(C.a,eUe({allowEnter:!0},_))))}))),nUe={width:0,height:1,border:"none",padding:0,boxShadow:"none",overflowX:"hidden",overflowY:"hidden"};function rUe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oUe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rUe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rUe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iUe,aUe=(iUe=Object(a.memo)((function(e){var t,n=e.activeCell,r=Ywe((null==n?void 0:n.fieldId)||""),o=r.field,l=r.fieldType,c=yre(_oe),s=yre(Nre),d=yre(dye),f=yre(IPe),p=yre(nxe),h=yre(yxe),g=yre(RFe,{optional:!0}),m=WI(Object(a.useState)(!1),2),y=m[0],b=m[1],w=null==n?void 0:n.recordId,_=null==n?void 0:n.fieldId,k=Qwe(w,_),C=Object(a.useRef)(null),E=null==k?void 0:k.value,O=Object(a.useRef)(null),S=yre(Ooe),x=yre(Foe),j=yre(oA),D=oxe(y),A=WI(Object(a.useState)(null==(t=null==p?void 0:p.getSelection())?void 0:t.rangeCount),2),R=A[0],F=A[1],I=function(e){var t=e.editing,n=e.width,r=e.height;return Object(a.useMemo)((function(){return t?n&&r?{width:n,minHeight:r}:{}:nUe}),[t,n,r])}({editing:y,width:(null==D?void 0:D.width)||0,height:(null==D?void 0:D.height)||0}),P=Object(a.useCallback)((function(){var e,t=C.current;t&&(null==(e=t.focus)||e.call(t))}),[]),M=Wae((function(e){(fE.isString(e.fieldType)||fE.isSelectLike(e.fieldType)||fE.isNumberLike(e.fieldType)||fE.isMention(e.fieldType))&&T(!0)}));Zae((function(){var e=null==c?void 0:c.onDoubleClickCell((function(e){M(e)})),t=null==c?void 0:c.onClickEvent((function(e){"activeCellClick"===e.eventName&&P()}));return function(){null==e||e.destroy(),null==t||t.destroy()}}),[]),Zae((function(){null==f||f.emitEditingChange({recordId:w,fieldId:_,editing:y})}),[y]);var T=Object(a.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=C.current;n&&(b(!0),null==(e=n.onStartEdit)||e.call(n,t?E:void 0),P())}),[E,C,P,y]),N=Wae((function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=C.current;if(y&&r){var o=null==(e=null==r?void 0:r.getValue)?void 0:e.call(r),i="",a=n;if(o){(i=S.cellValueChecker(l,o))&&W(i);var u=S.getFieldIsStrictValidatedValue(l)&&i;a||(a=u)}null==(t=null==r?void 0:r.onEndEdit)||t.call(r,a),b(!1)}}));Zae((function(){var e=null==c?void 0:c.onScroll(fu((function(){null==d||d.close("tooltip"),N()}),100));return function(){null==e||e.destroy()}}),[N]);var B=Object(a.useCallback)((function(e){if(y)N();else if(e){var t=j.getViewGroup();if(t){var n=j.getViewRecordByRecordId(w||"");if(!n)return;var r=n.get("group_item_key")||(null==h?void 0:h.UNGROUP_KEY),o=n.get("view_uuid"),i=t.field.get("uuid"),a=null==g?void 0:g.getGroupFolding(o,i);r&&(null==a?void 0:a.has(r))&&(null==g||g.setGroupFolding(o,i,r,!1))}p?null==p||p.scrollToAnchorPosition(p.getSelection(),"start",(function(){T(!0)})):requestAnimationFrame((function(){T(!0)}))}else T(!0)}),[y,T,N]);Zae((function(){var e=function(){return N()};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[N]),Zae((function(){var e=null==p?void 0:p.onChange((function(e){var t=e.selection;F(null==t?void 0:t.rangeCount)}));return function(){null==e||e.destroy()}}),[]),Zae((function(){var e=setTimeout((function(){1===R&&(b(!1),(null==x?void 0:x.gridCellEditorAutoFocus)&&P())}),50);return function(){clearTimeout(e)}}),[R,null==x?void 0:x.gridCellEditorAutoFocus]);var V=Object(a.useCallback)((function(e){return l===HC.LINK?(null==e?void 0:e.name)||"":l===HC.DATE?i()(e||"").format("YYYY-MM-DD"):""}),[l]),L=function(){var e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,!y){e.next=11;break}if(jre(t),t.key==Nz.ESC&&N(!1),83!==n||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)){e.next=9;break}return t.preventDefault(),e.next=8,N(!1);case 8:v.a.success(Lw("文档已保存"));case 9:e.next=12;break;case 11:Bz(t)?T():null==s||s.fireEventByEditable(t.nativeEvent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"copy"))}),[y]),U=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"paste"))}),[y]),H=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"cut"))}),[y]),q=Object(a.useCallback)(function(){var e=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(!Mu(t,E)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==k?void 0:k.setCell(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,E]),W=Wae((function(e){D&&(null==d||d.showTooltip(e,{origin:D,placement:"top"}))}));return n&&o&&l&&_&&w?u.a.createElement("div",{className:"lakex-table-cell-editor-container lakex-grid-cell-editor-keyboard-input",style:{position:"absolute",left:(null==D?void 0:D.left)||0,top:(null==D?void 0:D.top)||0},onKeyDown:L,onMouseDown:jre,onMouseUp:jre,onMouseMove:jre,onCopy:z,onCut:H,onPaste:U},function(){if(!(n&&o&&l&&_&&w))return null;var e,t,r={onSave:q,fieldType:l,editing:y,style:I,inputObserverRef:O};switch(l){case HC.TITLE:case HC.TEXT:return u.a.createElement(Wze,oUe({isMultiText:l===HC.TEXT,ref:C,toggleEditing:B},r));case HC.PHONE:case HC.EMAIL:return u.a.createElement(Wze,oUe({isMultiText:!1,ref:C,toggleEditing:B},r));case HC.PROGRESS:case HC.NUMBER:return u.a.createElement(tUe,oUe({ref:C,toggleEditing:B},r));case HC.LINK:return u.a.createElement(Wze,oUe(oUe({isMultiText:!1,getFormattedValue:V,ref:C},r),{},{onSave:(t=UC(jk.mark((function e(t){var n,r;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={src:(null==(n=null==k?void 0:k.value)?void 0:n.src)||"http://".concat(t),name:t},e.next=3,q(r);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),toggleEditing:B}));case HC.SELECT:case HC.MULTI_SELECT:return u.a.createElement(Yze,oUe({ref:C,fieldId:_,recordId:w,toggleEditing:B},r));case HC.MENTION:return u.a.createElement(Zze,oUe({ref:C,fieldId:_,recordId:w,toggleEditing:B,cellValue:E},r));case HC.DATE:return u.a.createElement(Wze,oUe(oUe({isMultiText:!1,getFormattedValue:V,ref:C},r),{},{onSave:(e=UC(jk.mark((function e(t){var n;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s_(t||""),e.next=3,q(n);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),toggleEditing:B}));default:return null}}()):null})),function(e){var t=rxe();return u.a.createElement(iUe,{activeCell:t})}),uUe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=rxe(),r=Qwe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),o=yre(dye),i=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e,t=null==(e=i.current)?void 0:e.getValues();t&&(null==r||r.setCell(t))}}}));var l=function(){null==o||o.close("cellLinkDropDownEditor")};return(null==r?void 0:r.fieldType)!==HC.LINK?null:u.a.createElement(tOe,{ref:i,defaultValue:r.value,onSubmit:function(e){null==r||r.setCell(e),setTimeout((function(){l()}),100)},onBlur:l,visible:!0})}))),lUe=function(e){var t,n=rxe(),r=oxe(!0),o=Qwe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),i=Ywe(null==n?void 0:n.fieldId),l=yre(dye),c=WI(Object(a.useState)(null==n?void 0:n.value),2),s=c[0],d=c[1],f=function(){var e=UC(jk.mark((function e(t){return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t),e.next=3,null==o?void 0:o.setCell(t);case 3:null==l||l.close("cellDateDropDownEditor");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?u.a.createElement(mCe,{className:"cell-date-dropdown-editor",focus:!0,open:!0,format:(null==(t=i.fieldConfig)?void 0:t.date_format)||"YYYY-MM-DD",defaultValue:s||"",onChange:f,rectStyle:{width:r.width-1,height:r.height}}):null};function cUe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sUe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cUe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cUe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dUe=Object.defineProperty,fUe=Object.getOwnPropertyDescriptor,pUe=function(e,t,n,r){for(var o,i=r>1?void 0:r?fUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dUe(t,n,i),i},vUe=function(){return Ew((function e(){_w(this,e),this._gridCellEditorId="viewerGridCellEditor",this._toDestroyCollection=new kk}),[{key:"isGridView",get:function(){return this._readService.getActiveView().get("type")===sE.GRID}},{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t=this;if(!this.isReadonly){var n=null==(e=this._selectionService)?void 0:e.onChange((function(e){if(t._hasSelection()&&t.isGridView){if(t._modalService.close(t._gridCellEditorId),!e.editable)return;t._modalService.open(t._gridCellEditorId,{position:{left:0,top:0}})}else t._modalService.close(t._gridCellEditorId)}));n&&this._toDestroyCollection.push(n),this._toDestroyCollection.push(this._renderService.onClickCellIcon((function(e){var n,r;if("cellLinkIcon"===e.iconName)t._handleOpenCellLinkDropdownEditor();else if("cellImageIcon"===e.iconName){var o=null==(n=t._selectionService)?void 0:n.getFieldValue();t._handleOpenCellFileEditor(HC.IMAGE,null==o?void 0:o.recordId,null==o?void 0:o.fieldId)}else if("cellFileIcon"===e.iconName){var i=null==(r=t._selectionService)?void 0:r.getFieldValue();t._handleOpenCellFileEditor(HC.FILE,null==i?void 0:i.recordId,null==i?void 0:i.fieldId)}}))),this._toDestroyCollection.push(this._renderService.onDoubleClickCell((function(e){var n;if(e.fieldType===HC.LINK)t._handleOpenCellLinkDropdownEditor();else if(e.fieldType===HC.DATE)t._handleOpenCellDateDropdownEditor();else if(e.fieldType===HC.IMAGE||e.fieldType===HC.FILE){var r=null==(n=t._selectionService)?void 0:n.getFieldValue();t._handleOpenCellFileEditor(e.fieldType,null==r?void 0:r.recordId,null==r?void 0:r.fieldId)}})))}}},{key:"registerModal",value:function(e){e.registerItem({id:this._gridCellEditorId,hasMask:!1,scrollStrategy:"close",zIndex:"modalRenderBase",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:aUe}),e.registerItem({id:"cellLinkDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:uUe}),e.registerItem({id:"cellDateDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:lUe})}},{key:"registerHotkey",value:function(e){var t,n=this;e.registerItem({id:"enterToCellEditor",hotkey:"enter",name:"enter进入单元格编辑",enableOnInput:!1,isEnable:function(){return!n.isReadonly&&n._hasSelection()&&n.isGridView},onHotKey:function(e){var t,r;e.preventDefault();var o,i=null==(t=n._selectionService)?void 0:t.getFieldValue(),a=(null==i?void 0:i.fieldId)||"",u=(null==i?void 0:i.recordId)||"",l=n._readService.getField(a).get("type");if(l===HC.CHECKBOX){var c=null==(r=n._readService.getCell(a,u))?void 0:r.value,s=sUe(sUe({},i),{},{value:!c});null==(o=n._commandService)||o.execCommand("setCell",s)}[HC.IMAGE,HC.FILE].includes(l)&&n._handleOpenCellFileEditor(l,null==i?void 0:i.recordId,null==i?void 0:i.fieldId),l===HC.LINK&&n._handleOpenCellLinkDropdownEditor()}}),e.registerItem({id:"deleteCell",hotkey:"del, backspace",name:"清空单元格",enableOnInput:!1,isEnable:function(){return n._hasSelection()&&n.isGridView&&!n.isReadonly},onHotKey:function(e){var t,r;e.preventDefault();var o=((null==(t=n._selectionService)?void 0:t.getFieldValues())||[]).map((function(e){return sUe(sUe({},e),{},{value:""})}));null==(r=n._commandService)||r.execCommand("removeCells",{cells:o})}}),e.registerItem({id:"openCellLinkEditor",hotkey:"⌘+K",name:"打开单元格链接编辑器",enableOnInput:!0,isEnable:function(){return n._hasSelection()&&n.isGridView&&!n.isReadonly},onHotKey:(t=UC(jk.mark((function e(t){var r,o,i;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),o=null==(r=n._selectionService)?void 0:r.getFieldValue(),i=(null==o?void 0:o.fieldId)||"",n._readService.getField(i).get("type")===HC.LINK&&n._handleOpenCellLinkDropdownEditor();case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{key:"_handleOpenCellLinkDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectFocusTarget();this._modalService.open("cellLinkDropDownEditor",{position:{origin:t,placement:"bottom"}})}},{key:"_handleOpenCellFileEditor",value:function(e,t,n){var r="";e===HC.IMAGE?r="fieldImageEditor":e===HC.FILE&&(r="fieldFileEditor"),r&&this._modalService.open(r,{initialState:{fieldType:e,recordId:t,fieldId:n}})}},{key:"_handleOpenCellDateDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectAnchorTarget();this._modalService.open("cellDateDropDownEditor",{position:{origin:t,placement:"cover"}})}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();vUe.pluginName="workbench-viewer-grid-cell-editor",pUe([Ks(nxe),As()],vUe.prototype,"_selectionService",2),pUe([Ks(oA)],vUe.prototype,"_readService",2),pUe([Ks(RR)],vUe.prototype,"_abilityService",2),pUe([Ks(dye)],vUe.prototype,"_modalService",2),pUe([Ks(_oe)],vUe.prototype,"_renderService",2),pUe([Ks(nR)],vUe.prototype,"_commandService",2),vUe=pUe([Gs({contrib:[sre,fye,USe]})],vUe);var hUe=function(e){var t,n,r,o=e.className,i=e.defaultValue,a=void 0===i?"":i,l=e.onFieldSelect,c=void 0===l?function(){}:l,s=(t={defaultValue:a},n=yre(oA),r=n.getActiveView(),{groupFields:Q_(n.getViewFields(r.get("uuid"),!1),(function(e){var n,r;return!(!t.defaultValue||(null==(n=e.get("field"))?void 0:n.get("uuid"))!==t.defaultValue)||fE.isGroup(null==(r=e.get("field"))?void 0:r.get("type"))}))}).groupFields,d=yre(Ooe),f=yre(oC),p=(null==f?void 0:f.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(x.a,{className:"lakex-table-group-field-select ".concat(o),defaultValue:a,dropdownClassName:"lakex-table-group-field-select-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),onChange:function(e){var t,n=Z_(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));c(null==(t=null==n?void 0:n.get("field"))?void 0:t.toJSON())},bordered:!1,getPopupContainer:function(){return p}},nk(s,(function(e){var t=e.get("field");if(!t)return null;var n=null==d?void 0:d.getFieldIcon(t.get("type"));return u.a.createElement(x.a.Option,{value:t.get("uuid"),key:t.get("uuid")},n&&u.a.createElement(n,null),u.a.createElement("div",{className:"lakex-table-group-field-select-name"},t.get("name")))})))},gUe="lakex-table-group-modal-empty",mUe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:gUe},u.a.createElement("div",{className:"".concat(gUe,"-empty-desc")},Lw("还未设置任何分组")),u.a.createElement(hUe,{defaultValue:Lw("选择一列进行分组"),onFieldSelect:n}))},yUe=function(e){switch(e){case"select":case"multiSelect":return{asc:Lw("选项顺序"),desc:Lw("选项倒序")};case"number":case"phone":return{asc:Lw("从小到大"),desc:Lw("从大到小")};default:return{asc:Lw("升序"),desc:Lw("降序"),style:{padding:"0 16px"}}}},bUe=function(e){var t=e.group,n=e.field,r=e.onUpdateType,o=void 0===r?function(){}:r;if(!n)return null;if(fE.isCheckbox(n.type))return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{className:"lakex-table-group-field-order-radio"},u.a.createElement(k.a,{checked:!1},u.a.createElement(oue,{type:"RightArrow"})),u.a.createElement(k.a,{checked:!0}))),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{className:"lakex-table-group-field-order-radio"},u.a.createElement(k.a,{checked:!0},u.a.createElement(oue,{type:"RightArrow"})),u.a.createElement(k.a,{checked:!1}))));var i=yUe(n.type);return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{style:i.style},i.asc)),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{style:i.style},i.desc)))},wUe=function(e){var t=e.group,n=e.field,r=e.onRemove,o=void 0===r?function(){}:r,i=e.onChange,l=void 0===i?function(){}:i,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=WI(Object(a.useState)(t),2),o=r[0],i=r[1];return{state:{activeField:o},onFieldSelect:function(e){n(e),i(e)}}}({field:n,onChange:l}),f=d.state,p=d.onFieldSelect;return u.a.createElement("div",{className:"lakex-table-group-item"},u.a.createElement(oue,{type:"Close",onClick:function(){o(t)}}),u.a.createElement(hUe,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:p,className:"lakex-table-group-item-select"}),u.a.createElement(bUe,{group:t,field:f.activeField,onUpdateType:s}))},_Ue=function(){var e=yre(dye),t=yre(nR),n=yre(oA),r=n.getViewGroup(),o=n.getViewConfig(),i=n.getAllFields(),u=WI(Object(a.useState)(null==r?void 0:r.group.toJSON()),2),l=u[0],c=u[1],s=function(e){return e?r?null==t?void 0:t.execCommand("updateGridGroup",{viewId:null==o?void 0:o.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("createGridGroup",{viewId:null==o?void 0:o.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("removeGridGroup",{viewId:null==o?void 0:o.get("view_uuid")})};return{state:{group:l},fields:i,onAddOption:function(e){var t,r;e||(e=null==(r=null==(t=null==n?void 0:n.getViewFields())?void 0:t.get(0).get("field"))?void 0:r.toJSON());var o={field_uuid:null==e?void 0:e.uuid,type:oE.ASC};s(o),c(o)},onRemoveOption:function(){s(null),c(null)},onUpdateOption:function(e){var t={field_uuid:null==e?void 0:e.uuid,type:(null==l?void 0:l.type)||oE.ASC};s(t),c(t)},onUpdateType:function(e){l&&(l.type=e),s(l),c(l)},onClose:function(){e.close("grid-group")}}},kUe=function(){var e,t=_Ue(),n=t.state,r=t.fields,o=t.onAddOption,i=t.onUpdateOption,a=t.onRemoveOption,l=t.onUpdateType;if(n.group){var c=Z_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)}));e=u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-group-setting"},u.a.createElement("h2",{className:"lakex-table-group-setting-title"},Lw("分组设置"))),u.a.createElement(wUe,{field:c,group:n.group,onRemove:a,onChange:i,onUpdateType:l}))}else e=u.a.createElement(mUe,{onAddOption:o});return u.a.createElement("div",{className:"lakex-table-group-modal"},e)},CUe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(CBe,{desc:Lw("你还未进行任何分组"),className:"no-data"}),u.a.createElement(m.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},u.a.createElement(oue,{type:"Add"}),Lw("添加分组条件")))},EUe=function(e){var t=_Ue(),n=t.state,r=t.fields,o=t.onClose,i=t.onAddOption,l=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=yre(lk),f=yre(dye),p=d.getValue("modal.mode"),v=yre(oA),h=yre(Ooe),g=Object(a.useMemo)((function(){return null==v?void 0:v.getViewFields()}),[]);return u.a.createElement(sBe,{title:Lw("分组"),onClose:o,showCloseIcon:!0},function(){if(!n.group)return u.a.createElement(CUe,{onAddOption:i});var e=Z_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)})),t=yUe(null==e?void 0:e.get("type")),o=e&&h.getFieldIcon(null==e?void 0:e.get("type"));return u.a.createElement("div",{className:"lakex-table-h5-group"},u.a.createElement("div",{className:"lakex-table-h5-group-tip"},Lw("按以下选项进行分组")),u.a.createElement(EBe,{prefixIcon:o,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==f||f.open("group-select",{initialState:{group:n.group}})}}),u.a.createElement(lbe,{id:"group-select",mode:p,hasMask:p===sye.DRAWER,hasAnimation:p===sye.DRAWER,position:p===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return u.a.createElement(sBe,{title:Lw("请选择"),onClose:function(){null==f||f.close("group-select")},showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:null==(t=n.group)?void 0:t.field_uuid,list:nk(g,(function(e){var t=e.get("field");if(!t)return null;var n=h.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){null==f||f.close("group-select"),l({uuid:e.key})}}))}}),u.a.createElement(mBe,{className:"lakex-table-h5-group-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.group.type}),u.a.createElement(m.a,{className:"lakex-table-h5-group-del",onClick:function(){return c()}},u.a.createElement(oue,{type:"Delete",className:"del-icon"}),Lw("删除该条件")))}())},OUe=Object.defineProperty,SUe=Object.getOwnPropertyDescriptor,xUe=function(e,t,n,r){for(var o,i=r>1?void 0:r?SUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OUe(t,n,i),i},jUe=function(){return Ew((function e(){var t=this;_w(this,e),this._getActive=function(){var e=t._readService.getActiveView();return!!e&&!!t._readService.getViewGroup(e.get("uuid"))}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-group",icon:"ViewerGroup",tooltip:Lw("分组"),visible:function(){var e;return(null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.GRID},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("grid-group",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-group",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?EUe:kUe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();jUe.pluginName="workbench-viewer-grid-group",xUe([Ks(dye)],jUe.prototype,"_modalService",2),xUe([Ks(oA)],jUe.prototype,"_readService",2),xUe([Ks(lk)],jUe.prototype,"_configuration",2),jUe=xUe([Gs({contrib:[sre,jme,fye]})],jUe);var DUe=function(){var e=yre(nR),t=yre(dye),n=yre(oA),r=n.getView();return{viewConfig:n.getViewConfig(),onConfirm:function(n){null==e||e.execCommand("updateGridRecordHeight",{viewId:r.get("uuid"),recordHeight:n.key}),t.close("grid-record-height")},onModalClose:function(){t.close("grid-record-height")}}},AUe=[{type:"low",name:Lw("低")},{type:"middle",name:Lw("中")},{type:"high",name:Lw("高")}],RUe="lakex-table-row-height",FUe=function(){var e=DUe(),t=e.viewConfig,n=e.onConfirm;return t?u.a.createElement("div",{className:RUe},u.a.createElement(f.a,{defaultSelectedKeys:[t.get("record_height")],mode:"vertical",onClick:n},AUe.map((function(e){return u.a.createElement(f.a.Item,{key:e.type,icon:u.a.createElement("span",null,e.type===t.get("record_height")&&u.a.createElement("span",{className:"".concat(RUe,"-checked")},u.a.createElement(oue,{type:"Check"})),u.a.createElement(oue,{type:"RowHeight".concat(zi(e.type))}))},Lw(e.name))})))):null},IUe=function(e){var t=DUe(),n=t.viewConfig,r=t.onConfirm,o=t.onModalClose;return n?u.a.createElement(sBe,{title:Lw("行高"),onClose:o,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:n.get("record_height"),list:AUe.map((function(e){return{key:e.type,title:e.name}})),onCheck:function(e){return r(e)}})):null},PUe=Object.defineProperty,MUe=Object.getOwnPropertyDescriptor,TUe=function(e,t,n,r){for(var o,i=r>1?void 0:r?MUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&PUe(t,n,i),i},NUe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-record-height",icon:"RowHeightLow",tooltip:Lw("行高"),visible:function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===sE.GRID},onClick:function(e){var n=e.target;t._modalService.open("grid-record-height",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-record-height",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?IUe:FUe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();NUe.pluginName="workbench-viewer-grid-record-height",TUe([Ks(dye)],NUe.prototype,"_modalService",2),TUe([Ks(oA)],NUe.prototype,"_readService",2),TUe([Ks(lk)],NUe.prototype,"_configuration",2),NUe=TUe([Gs({contrib:[sre,jme,fye]})],NUe);var BUe=function(e){var t=e.initialState,n=t.groupField,r=t.groupOption,o=function(e){var t=e.groupField,n=e.groupOption,r=e.$title,o=yre(nR),i=yre(dye),l=yre(jSe),c=yre(zMe);return{settings:Object(a.useMemo)((function(){return[{key:"edit",name:fE.isMention(null==t?void 0:t.type)?Lw("修改分组人员"):Lw("修改分组"),icon:u.a.createElement(oue,{type:"Edit"}),onClick:function(){null==i||i.close("viewKanbanGroupSetting"),null==l||l.showEditGroup(r,t,n)}},{key:"remove",name:Lw("删除分组"),icon:u.a.createElement(oue,{type:"Delete"}),onClick:function(){var e;null==i||i.close("viewKanbanGroupSetting");var r=null==c?void 0:c.getGroupFieldOption(t,n);if(r){null==i||i.close("viewKanbanGroupSetting");var a=r.uuid||(null==(e=r.get)?void 0:e.call(r,"uuid"));a&&(null==o||o.execCommand("removeFieldOption",{optionId:a}))}}}]}),[null==t?void 0:t.type])}}(t),i=o.settings;return n&&r?u.a.createElement("div",{className:"lakex-table-kanban-group-setting"},u.a.createElement(f.a,null,i.map((function(e){return u.a.createElement(f.a.Item,{key:e.key,icon:e.icon,onClick:function(){return e.onClick()}},e.name)})))):null},VUe=Object.defineProperty,LUe=Object.getOwnPropertyDescriptor,zUe=function(e,t,n,r){for(var o,i=r>1?void 0:r?LUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VUe(t,n,i),i},UUe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){var e=this;this._kanbanGroupActionService.onGroupSettingClick((function(t){var n,r=t.target,o=t.groupField,i=t.groupOption,a=t.$title;null==(n=e._modalService)||n.open("viewKanbanGroupSetting",{position:{origin:r,placement:"bottom"},initialState:{groupField:o,groupOption:i,$title:a}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"viewKanbanGroupSetting",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:BUe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();UUe.pluginName="workbench-viewer-kanban-group",zUe([Ks(MTe)],UUe.prototype,"_kanbanGroupActionService",2),zUe([Ks(dye)],UUe.prototype,"_modalService",2),UUe=zUe([Gs({contrib:[sre,fye]})],UUe);var HUe=function(){var e=yre(Ooe),t=yre(nR),n=yre(dye),r=yre(oA),o=yre(zMe),i=null==r?void 0:r.getActiveView(),u=WI(Object(a.useState)(null==o?void 0:o.getGroup()),2),l=u[0],c=u[1];return{state:{group:l},fields:null==o?void 0:o.getSupportGroupFields(),onChange:function(e){c(e);var r={field_uuid:e.uuid};null==t||t.execCommand("updateKanbanGroup",{viewId:null==i?void 0:i.get("uuid"),group:r}),n.close("kanban-group-setting")},onModalClose:function(){n.close("kanban-group-setting")},fieldService:e}},qUe=function(){var e=HUe(),t=e.state,n=e.fields,r=e.onChange,o=e.fieldService;return t.group?u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-menu-kanban-group lakex-table-menu-kanban-group-modal"},u.a.createElement("div",{className:"lakex-table-menu-kanban-group-options"},nk(n,(function(e){var n,i=null==o?void 0:o.getFieldIcon(e.get("type"));return u.a.createElement("div",{key:e.get("uuid"),className:"lakex-table-menu-kanban-group-option",onClick:function(){r(e)}},u.a.createElement("span",{className:"lakex-table-menu-kanban-group-option-title"},i?u.a.createElement(i,{className:"lakex-table-icon-col-type"}):null,u.a.createElement("span",{className:"lakex-table-menu-kanban-group-field-name"},e.get("name"))),e.get("uuid")===(null==(n=t.group)?void 0:n.field.get("uuid"))?u.a.createElement(oue,{type:"Check"}):u.a.createElement("span",{className:"lakex-table-menu-kanban-group-empty"}))})))):null},WUe=function(e){var t=e.field,n=yre(Ooe),r=null==n?void 0:n.getFieldIcon(t.get("type"));return u.a.createElement("span",{className:"lakex-table-kanban-group-setting-title"},Lw("按"),r?u.a.createElement(r,{className:"lakex-table-icon-col-type",size:14}):null,u.a.createElement("span",{className:"lakex-table-kanban-group-field-name"},t.get("name")),Lw("分组"))},$Ue=function(){var e,t=HUe(),n=t.state,r=t.fields,o=t.onChange,i=t.onModalClose,a=t.fieldService;if(!n.group)return null;var l=nk(r,(function(e){var t=null==a?void 0:a.getFieldIcon(e.get("type"));return{key:e.get("uuid"),icon:t?u.a.createElement(t,{className:"lakex-table-icon-col-type"}):null,title:e.get("name")}}));return u.a.createElement(sBe,{title:Lw("选择分组字段"),onClose:i,showCloseIcon:!0},u.a.createElement(bBe,{defaultValue:null==(e=n.group)?void 0:e.field.get("uuid"),list:l,onCheck:function(e){return o(Z_(r,(function(t){return t.get("uuid")===e.key})))}}))},GUe=Object.defineProperty,KUe=Object.getOwnPropertyDescriptor,YUe=function(e,t,n,r){for(var o,i=r>1?void 0:r?KUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GUe(t,n,i),i},JUe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"kanban-group-setting",tooltip:function(){var e=t._readService.getActiveView();if(!e)return null;var n=t._readService.getViewGroup(null==e?void 0:e.get("uuid"));return(null==n?void 0:n.field)?React.createElement(WUe,{field:null==n?void 0:n.field}):null},visible:function(){var e=t._readService.getActiveView();if(!e)return!1;if(!(e.get("type")===sE.KANBAN))return!1;var n=t._readService.getViewGroup(e.get("uuid"));return!!(null==n?void 0:n.field)},showTitle:!0,showTooltip:!1,onClick:function(e){t._modalService.open("kanban-group-setting",{position:{origin:e.target,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"kanban-group-setting",mode:t,hasMask:t===sye.DRAWER,hasAnimation:t===sye.DRAWER,position:t===sye.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===roe.MOBILE?$Ue:qUe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();JUe.pluginName="workbench-viewer-kanban-group-setting",YUe([Ks(dye)],JUe.prototype,"_modalService",2),YUe([Ks(oA)],JUe.prototype,"_readService",2),YUe([Ks(lk)],JUe.prototype,"_configuration",2),JUe=YUe([Gs({contrib:[sre,jme,fye]})],JUe);var XUe=function(e){e.initialState;var t=yre(Ooe),n=function(){var e=yre(oA),t=yre(nR),n=e.getViewConfig(),r=WI(Object(a.useState)(e.getAllFields()),2),o=r[0],i=r[1],u=Object(a.useMemo)((function(){var e=Q_(o,(function(e){return fE.isDateLike(e.get("type"))}));return 0===e.length?[{name:Lw("新增一个日期列"),value:"",type:HC.DATE}]:nk(e,(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[o]),l=Object(a.useMemo)((function(){return nk(Q_(o,(function(e){return fE.isSelect(e.get("type"))})),(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[o]),c=[{name:Lw("自定义颜色"),icon:"EditorCellBgColor",value:rE.CUSTOM},{name:Lw("跟随字段颜色"),icon:"FieldSelect",value:rE.FOLLOW_FIELD}],s=Object(a.useMemo)((function(){var e;return(null==(e=Z_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("start_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),d=Object(a.useMemo)((function(){var e;return(null==(e=Z_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("end_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),f=Object(a.useMemo)((function(){var e;return(null==(e=Z_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_title_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),p=WI(Object(a.useState)((null==n?void 0:n.get("show_lunar"))||!1),2),v=p[0],h=p[1],g=WI(Object(a.useState)((null==n?void 0:n.get("date_color_type"))||rE.CUSTOM),2),m=g[0],y=g[1],b=Object(a.useMemo)((function(){var e;return m===rE.FOLLOW_FIELD?(null==(e=Z_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_color"))})))?void 0:e.get("uuid"))||"":(null==n?void 0:n.get("date_color"))||Fwe[0][0]}),[o,n,m]);return{dateFieldOptions:u,selectFieldOptions:l,colorTypeOptions:c,fields:o,startDateFieldId:s,endDateFieldId:d,titleFieldId:f,showLunar:v,colorType:m,colorId:b,onStartDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"start"}),i(e.getAllFields())},onEndDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"end"}),i(e.getAllFields())},onTitleFieldChange:function(n){t.execCommand("updateScheduleTitle",{titleId:n}),i(e.getAllFields())},onShowLunarChange:function(e){t.execCommand("showLunar",{show:e}),h(e)},onColorTypeChange:function(e){t.execCommand("updateScheduleColorType",{type:e}),y(e)},onColorChange:function(n){t.execCommand("updateScheduleColor",{type:rE.CUSTOM,colorId:n}),i(e.getAllFields())},onColorFieldChange:function(n){t.execCommand("updateScheduleColor",{type:rE.FOLLOW_FIELD,colorId:n}),i(e.getAllFields())}}}(),r=n.dateFieldOptions,o=n.selectFieldOptions,i=n.colorTypeOptions,l=n.fields,c=n.startDateFieldId,s=n.endDateFieldId,d=n.titleFieldId,f=n.showLunar,p=n.colorType,v=n.colorId,h=n.onStartDateChange,g=n.onEndDateChange,m=n.onTitleFieldChange,y=n.onShowLunarChange,b=n.onColorTypeChange,w=n.onColorChange,_=n.onColorFieldChange,k=yre(oC),C=(null==k?void 0:k.getValue("modal.customModalContainer"))||document.body;return u.a.createElement("div",{className:"lakex-table-view-calendar-setting-modal"},u.a.createElement("div",{className:"title"},Lw("日历配置")),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(oue,{className:"icon",type:"Calendar"}),u.a.createElement("span",null,Lw("标题展示"))),u.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),value:d,placeholder:Lw("请选择标题字段"),onChange:m,getPopupContainer:function(){return C}},nk(l,(function(e){var n=t.getFieldIcon(e.get("type"));return u.a.createElement(x.a.Option,{className:"select-option",value:e.get("uuid"),key:e.get("uuid")},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.get("name")))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(oue,{className:"icon",type:"Brush"}),u.a.createElement("span",null,Lw("颜色显示"))),u.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),value:p,onChange:b,getPopupContainer:function(){return C}},i.map((function(e){return u.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},u.a.createElement(oue,{className:"icon",type:e.icon}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},p===rE.CUSTOM?u.a.createElement(bre,{activeColor:v,colorSource:Fwe,onSelect:w}):u.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),value:v,placeholder:Lw("请选择单选字段"),onChange:_,getPopupContainer:function(){return C}},o.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(oue,{className:"icon",type:"FieldDate"}),u.a.createElement("span",null,Lw("开始日期"))),u.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),value:c,placeholder:Lw("请选择日期字段"),onChange:h,getPopupContainer:function(){return C}},r.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(oue,{className:"icon",type:"FieldDate"}),u.a.createElement("span",null,Lw("结束日期"))),u.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(oue,{type:"ArrowDown",size:14}),value:s,placeholder:Lw("请选择日期字段"),onChange:g,getPopupContainer:function(){return C}},r.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item "},u.a.createElement("div",{className:"label inline"},u.a.createElement("span",null,Lw("农历及节假日")),u.a.createElement(j.a,{checked:f,onChange:y}))))},ZUe=function(e){var t=e.initialState,n=yre(oA),r=yre(dye),o=t.recordId,i=n.getActiveViewId(),l=n.getViewConfig(i),c=null==l?void 0:l.get("start_date_field_uuid"),s=null==l?void 0:l.get("end_date_field_uuid"),f=null==l?void 0:l.get("date_title_field_uuid"),p=(null==l?void 0:l.get("date_color_type"))===rE.FOLLOW_FIELD&&(null==l?void 0:l.get("date_color")),h=Zwe(o,f||"").title,g=yre(_oe);if(!c||!s)return null;var m=n.getAllViewFields(i),y=Z_(m,(function(e){return e.get("field_uuid")===f}))||m.get(0),b=Z_(m,(function(e){return e.get("field_uuid")===p})),w=Object(a.useMemo)((function(){return Q_(m,(function(e){return e.get("field_uuid")===c||e.get("field_uuid")===s}))}),[m,c,s]),_=Zu(b?[y,b].concat(gw(w)):[y].concat(gw(w)),(function(e,t){return e.get("field_uuid")===t.get("field_uuid")}));return u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal"},u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-header"},u.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-title"},h||Lw("未命名日程")),u.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-expand",onClick:function(){r.close("calendar-edit-modal"),null==g||g.emitClickRecord({recordId:o})}},u.a.createElement(d.a,{title:Lw("展开")},u.a.createElement(oue,{type:"RowExpand"})))),_.map((function(e,t){var n=e.get("field");if(!n)return null;var i=n.get("uuid");return u.a.createElement("div",{key:i},u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label"},u.a.createElement(MVe,{type:n.get("type")}),u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label-name"},n.get("name"))),u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-content"},u.a.createElement(PVe,{key:n.get("type")+i,recordId:o,field:n,focus:0===t,suffixIcon:null,allowClear:!1,renderMode:ioe.NORMAL,onCellChange:function(e){i!==c&&i!==s||requestAnimationFrame((function(){var e=document.querySelector('.lakex-view-calendar-schedule-line[data-id="'.concat(o,'"]'));e?r.open("calendar-edit-modal",{position:{origin:e,placement:"bottomLeft"},initialState:{recordId:o}}):(r.close("calendar-edit-modal"),v.a.warn(Lw("该日程被隐藏")))}))}})))})))};function QUe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eHe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QUe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QUe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tHe=function(e){var t=e.schedule,n=yre(oA),r=n.getActiveViewId(),o=n.getViewConfig(r),i=null==o?void 0:o.get("date_title_field_uuid"),a=Zwe(t.id,i||"").title;return u.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-title","data-not-title":!a},a||Lw("添加日程标题"))},nHe=function(e){var t=e.readonly,n=e.schedule,r=e.colors,o=e.modalRef,i=yre(_oe),l=aW({id:n.id}),c=l.attributes,s=l.listeners,d=l.setNodeRef,f=l.transform,p=l.transition,v=l.isDragging,h=WI(Object(a.useState)(!1),2),g=h[0],m=h[1],y={transform:Qae.Transform.toString(f),transition:p,zIndex:v?"100":"auto",opacity:v?.3:1,backgroundColor:g?r.lite:r.normal,color:r.text};return u.a.createElement("div",eHe(eHe(eHe({ref:t?void 0:d,className:"lakex-table-view-calendar-more-modal-item"},c),s),{},{style:y,onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onClick:function(e){null==i||i.emitClickEvent({eventName:"selectSchedule",data:{recordId:n.id,event:e,position:{origin:o.current,placement:"rightTop"}}})}}),u.a.createElement(tHe,{schedule:n}))},rHe=function(e){var t=e.initialState,n=yre(zTe),r=yre(dye),o=yre(oFe),i=yre(nR),l=yre(oA),c=qwe(mR.TABLE).isReadonly(),s=Object(a.useRef)(null),d=t.date,f=t.scheduleList,p=WI(Object(a.useState)(f),2),v=p[0],h=p[1],g=l.getViewConfig(),m=(null==g?void 0:g.get("date_color_type"))||rE.CUSTOM,y=(null==g?void 0:g.get("date_color"))||"",b=l.getFieldOptions(y),w=Object(a.useMemo)((function(){var e={};return m===rE.FOLLOW_FIELD&&y&&nk(b,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[m,y,b]),_=null==d?void 0:d.weekday(),k=VU(BU(TH,{activationConstraint:{distance:8}})),C=Object(a.useCallback)(function(){var e=UC(jk.mark((function e(t){var n,r;return jk.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.active,r=t.over,n.id===r.id){e.next=4;break}return e.next=4,null==o?void 0:o.updateRecordOrder(n.id,r.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r]);return Zae((function(){var e=i.onDidExecuteCommand((function(e){if("changeRecordOrder"===e.context.commandName){var t=l.getViewConfig(),r=l.getViewRecords(),o=n.getCurrentDate(t),i=n.getCalendarDate(o),a=n.getDateRows(i),u=n.getSchedules(r,t,i),c=n.getDateScheduleMap(a,u),s=n.sortScheduleList(d,u,c);h(s)}}));return function(){e.destroy()}}),[]),u.a.createElement("div",{ref:s,className:"lakex-table-view-calendar-more-modal"},u.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-header"},u.a.createElement("span",null,Lw("".concat(d.format("M月D日")," 星期").concat(["一","二","三","四","五","六","日"][_]))),u.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-close",onClick:function(){null==r||r.close("calendar-more-modal")}},u.a.createElement(oue,{type:"Close",size:12}))),u.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-content"},u.a.createElement(kq,{sensors:k,modifiers:[pW,dW],collisionDetection:GU,onDragEnd:C},u.a.createElement(Qq,{items:v,strategy:Jq},v.map((function(e){var t=n.getScheduleColor(e,m,y,w);return u.a.createElement(nHe,{key:e.id,readonly:!!c,schedule:e,colors:t,modalRef:s})}))))))},oHe=Object.defineProperty,iHe=Object.getOwnPropertyDescriptor,aHe=function(e,t,n,r){for(var o,i=r>1?void 0:r?iHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oHe(t,n,i),i},uHe=function(){return Ew((function e(){_w(this,e)}),[{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e=this;this._renderService.onClickEvent((function(t){if("selectSchedule"===t.eventName){var n=t.data,r=n.event,o=n.recordId,i=n.position;e._modalService.open("calendar-edit-modal",{position:i||{origin:r.target,placement:"bottomLeft"},initialState:{recordId:o}})}if("showMoreSchedule"===t.eventName){var a=t.data,u=a.event,l=a.date,c=a.scheduleList;e._modalService.open("calendar-more-modal",{position:{origin:u.currentTarget,placement:"bottomLeft"},initialState:{date:l,scheduleList:c}})}}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"calendar-setting",icon:"Setting",tooltip:Lw("日历配置"),visible:function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===sE.CALENDAR},onClick:function(e){var n=e.target;t._modalService.open("calendar-setting-modal",{position:{origin:n,placement:"bottom"},initialState:{}})}})}},{key:"registerModal",value:function(e){e.registerItem({id:"calendar-setting-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:XUe}),e.registerItem({id:"calendar-edit-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:ZUe}),e.registerItem({id:"calendar-more-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:rHe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();uHe.pluginName="workbench-viewer-calendar",aHe([Ks(oA)],uHe.prototype,"_readService",2),aHe([Ks(dye)],uHe.prototype,"_modalService",2),aHe([Ks(_oe)],uHe.prototype,"_renderService",2),uHe=aHe([Gs({contrib:[sre,jme,fye]})],uHe);var lHe=["YYYY-MM-DD HH:mm","YYYY-MM-DD","YYYY/MM/DD HH:mm","YYYY/MM/DD","MM-DD","YYYY/MM","MM/DD/YYYY","DD/MM/YYYY"],cHe=function(e){var t,n=e.originField,r=e.fieldType,o=e.onChange,a=yre(oC),u=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body;return r===HC.DATE?React.createElement(React.Fragment,null,React.createElement("p",{className:"lakex-table-col-title"},Lw("日期格式")),React.createElement(x.a,{className:"lakex-table-field-date-config",defaultValue:(null==(t=null==n?void 0:n.get("config"))?void 0:t.date_format)||"YYYY-MM-DD",dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:React.createElement(oue,{type:"ArrowDown",size:12}),onChange:function(e){var t=(null==n?void 0:n.toJSON())||{};t.config={date_format:e},null==o||o(t)},getPopupContainer:function(){return u}},lHe.map((function(e){return React.createElement(x.a.Option,{value:e,key:e},React.createElement("div",{className:"lakex-table-date-config-format"},i()().format(e)))})))):null},sHe=Object.defineProperty,dHe=Object.getOwnPropertyDescriptor,fHe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return cHe}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function pHe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vHe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pHe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pHe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fHe.pluginName="workbench-field-date",fHe=function(e,t,n,r){for(var o,i=r>1?void 0:r?dHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sHe(t,n,i),i}([Gs({contrib:[sre,YLe]})],fHe);var hHe=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,o=t.fieldId,i=yre(dye),a=yre(nR),l=yre(fx).fieldUriModel,c=Qwe(r,o),s={style:{width:520},defaultValue:null==c?void 0:c.value,onChange:function(e){null==a||a.execCommand("setCell",vHe(vHe({},c),{},{value:e}))},onOrderChange:function(e){var t,i,u=e.targetUid,c=e.sourceUid,s=null==(t=l.findOne({uid:u}))?void 0:t.get("uuid"),d=null==(i=l.findOne({uid:c}))?void 0:i.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:o,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};return u.a.createElement("div",{className:"lakex-table-cell-file-uploader"},u.a.createElement("div",{className:"file-uploader-header"},u.a.createElement("h4",{className:"file-uploader-header-title"},Lw("图片列表")),u.a.createElement(oue,{type:"Close",className:"file-uploader-close",onClick:function(e){null==i||i.close("fieldImageEditor")}})),u.a.createElement(wEe,vHe({},s)))},gHe=Object.defineProperty,mHe=Object.getOwnPropertyDescriptor,yHe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerModal",value:function(e){e.registerItem({id:"fieldImageEditor",hasAnimation:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},RenderComponent:hHe})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function bHe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wHe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bHe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bHe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}yHe.pluginName="workbench-field-image",yHe=function(e,t,n,r){for(var o,i=r>1?void 0:r?mHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gHe(t,n,i),i}([Gs({contrib:[sre,fye]})],yHe);var _He=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,o=t.fieldId,i=yre(dye),a=yre(nR),l=yre(fx).fieldUriModel,c=Qwe(r,o),s={style:{width:520},defaultValue:null==c?void 0:c.value,onChange:function(e){null==a||a.execCommand("setCell",wHe(wHe({},c),{},{value:e}))},onOrderChange:function(e){var t,i,u=e.targetUid,c=e.sourceUid,s=null==(t=l.findOne({uid:u}))?void 0:t.get("uuid"),d=null==(i=l.findOne({uid:c}))?void 0:i.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:o,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};return u.a.createElement("div",{className:"lakex-table-cell-file-uploader"},u.a.createElement("div",{className:"file-uploader-header"},u.a.createElement("h4",{className:"file-uploader-header-title"},Lw("附件列表")),u.a.createElement(oue,{type:"Close",className:"file-uploader-close",onClick:function(e){null==i||i.close("fieldFileEditor")}})),u.a.createElement(TEe,wHe({},s)))},kHe=Object.defineProperty,CHe=Object.getOwnPropertyDescriptor,EHe=function(){return Ew((function e(){_w(this,e)}),[{key:"init",value:function(){}},{key:"registerModal",value:function(e){e.registerItem({id:"fieldFileEditor",hasMask:!1,hasAnimation:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},RenderComponent:_He})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();EHe.pluginName="workbench-field-file",EHe=function(e,t,n,r){for(var o,i=r>1?void 0:r?CHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kHe(t,n,i),i}([Gs({contrib:[sre,fye]})],EHe);var OHe=[HNe,LBe,JBe,fVe,kVe,GVe,XVe,uLe,dLe,ELe,jLe,KLe,aze,Rze,Tze,zze,vUe,jUe,NUe,UUe,JUe,uHe,fHe,yHe,EHe],SHe=function(e){var t=e.webSdk,n=e.settings;return{settings:Object.assign({},{"model.frozenTable":["ability","user"],"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","|","add-record"],contextMenu:["updateField","copyField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","copyRecord","expandRecord","removeRecord","removeField"]},n),webSdk:t}},xHe=[],jHe=Hwe.filter((function(e){return!xHe.includes(e.pluginName)})),DHe=[],AHe=VNe.filter((function(e){return!DHe.includes(e.pluginName)})),RHe=["workbench-full-width","workbench-full-screen"],FHe=OHe.filter((function(e){return!RHe.includes(e.pluginName)})),IHe=[],PHe=[],MHe=[];function THe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NHe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?THe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):THe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BHe=function(e){var t,n,r=SHe({webSdk:e.webSdk,settings:e.settings||{}});try{n=Fbe.create(NHe(NHe(NHe({},e),r),{},{workbenchPlugins:[].concat(gw(FHe),gw(e.workbenchPlugins||[])),renderPlugins:[].concat(gw(AHe),gw(e.renderPlugins||[])),kernelPlugins:[].concat(gw(jHe),gw(e.kernelPlugins||[])),workbenchContribs:[].concat(gw(IHe),gw(e.workbenchContribs||[])),renderContribs:[].concat(gw(PHe),gw(e.renderContribs||[])),kernelContribs:[].concat(gw(MHe),gw(e.kernelContribs||[])),onDataLoaded:function(t){var n;null==(n=e.onDataLoaded)||n.call(e,t)}})),e.onCellChange&&n.getService(Dx).onCellChange((function(t){var n;return null==(n=e.onCellChange)?void 0:n.call(e,t.cellValue)}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n},VHe=["kernel-history","kernel-add-record"],LHe=Hwe.filter((function(e){return!VHe.includes(e.pluginName)})),zHe=["render-history"],UHe=VNe.filter((function(e){return!zHe.includes(e.pluginName)})),HHe=["workbench-add-record","workbench-grid-cell-editor"],qHe=OHe.filter((function(e){return!HHe.includes(e.pluginName)}));function WHe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WHe(Object(n),!0).forEach((function(t){bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WHe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GHe={exports:{}},KHe={};function YHe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var JHe,XHe,ZHe={},QHe={},eqe={},tqe={},nqe={};function rqe(e,t,n){return t=Sd(t),Od(e,oqe()?Reflect.construct(t,[],Sd(e).constructor):t.apply(e,n))}function oqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oqe=function(){return!!e})()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=ll((function e(){sl(this,e)}));e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var n=function(t){function n(t){var r;if(sl(this,n),r=rqe(this,n),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");return r.str=t,r}return jd(n,t),ll(n,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return il({},this.str,1)}}])}(t);e.Name=n;var r=function(e){function t(e){var n;return sl(this,t),(n=rqe(this,t))._items="string"==typeof e?[e]:e,n}return jd(t,e),ll(t,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}])}(t);function o(e){for(var t=[e[0]],n=0,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];for(;n<i.length;)u(t,i[n]),t.push(e[++n]);return new r(t)}e._Code=r,e.nil=new r(""),e._=o;var i=new r("+");function a(e){for(var t=[c(e[0])],n=0,o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];for(;n<a.length;)t.push(i),u(t,a[n]),t.push(i,c(e[++n]));return function(e){var t=1;for(;t<e.length-1;){if(e[t]===i){var n=l(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(t),new r(t)}function u(e,t){var o;t instanceof r?e.push.apply(e,tl(t._items)):t instanceof n?e.push(t):e.push("number"==typeof(o=t)||"boolean"==typeof o||null===o?o:c(Array.isArray(o)?o.join(","):o))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:'"'.concat(e).concat(t.slice(1))}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=a,e.addCodeArg=u,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a(JHe||(JHe=YHe(["","",""])),e,t)},e.stringify=function(e){return new r(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(".".concat(t)):o(XHe||(XHe=YHe(["[","]"])),t)},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r("".concat(t));throw new Error("CodeGen: invalid export name: ".concat(t,", use explicit $id name mapping"))},e.regexpCode=function(e){return new r(e.toString())}}(nqe);var iqe,aqe,uqe,lqe,cqe,sqe,dqe,fqe,pqe,vqe,hqe,gqe={};function mqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mqe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bqe(e,t,n){return t=Sd(t),Od(e,wqe()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function wqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wqe=function(){return!!e})()}function _qe(e,t,n,r){var o=Wz(Sd(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function kqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kqe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eqe(e,t,n){return t=Sd(t),Od(e,Oqe()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Oqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oqe=function(){return!!e})()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t,n,r=nqe,o=function(e){function t(e){var n;return sl(this,t),(n=bqe(this,t,['CodeGen: "code" for '.concat(e," not defined")])).value=e.value,n}return jd(t,e),ll(t)}(Gz(Error));(n=t||(e.UsedValueState=t={}))[n.Started=0]="Started",n[n.Completed=1]="Completed",e.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};var i=function(){return ll((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefixes,r=t.parent;sl(this,e),this._names={},this._prefixes=n,this._parent=r}),[{key:"toName",value:function(e){return e instanceof r.Name?e:this.name(e)}},{key:"name",value:function(e){return new r.Name(this._newName(e))}},{key:"_newName",value:function(e){var t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}},{key:"_nameGroup",value:function(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}])}();e.Scope=i;var a=function(e){function t(e,n){var r;return sl(this,t),(r=bqe(this,t,[n])).prefix=e,r}return jd(t,e),ll(t,[{key:"setValue",value:function(e,t){var n=t.property,o=t.itemIndex;this.value=e,this.scopePath=(0,r._)(iqe||(iqe=YHe([".","[","]"])),new r.Name(n),o)}}])}(r.Name);e.ValueScopeName=a;var u=(0,r._)(aqe||(aqe=YHe(["\n"],["\\n"]))),l=function(n){function i(e){var t;return sl(this,i),(t=bqe(this,i,[e]))._values={},t._scope=e.scope,t.opts=yqe(yqe({},e),{},{_n:e.lines?u:r.nil}),t}return jd(i,n),ll(i,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new a(e,this._newName(e))}},{key:"value",value:function(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var r=this.toName(e),o=r.prefix,i=null!==(n=t.key)&&void 0!==n?n:t.ref,a=this._values[o];if(a){var u=a.get(i);if(u)return u}else a=this._values[o]=new Map;a.set(i,r);var l=this._scope[o]||(this._scope[o]=[]),c=l.length;return l[c]=t.ref,r.setValue(t,{property:o,itemIndex:c}),r}},{key:"getValue",value:function(e,t){var n=this._values[e];if(n)return n.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return(0,r._)(uqe||(uqe=YHe(["","",""])),e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code}),t,n)}},{key:"_reduceValues",value:function(n,i){var a=this,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,c=r.nil,s=function(){var s=n[d];if(!s)return 1;var f=u[d]=u[d]||new Map;s.forEach((function(n){if(!f.has(n)){f.set(n,t.Started);var u=i(n);if(u){var s=a.opts.es5?e.varKinds.var:e.varKinds.const;c=(0,r._)(lqe||(lqe=YHe(["",""," "," = ",";",""])),c,s,n,u,a.opts._n)}else{if(!(u=null==l?void 0:l(n)))throw new o(n);c=(0,r._)(cqe||(cqe=YHe(["","","",""])),c,u,a.opts._n)}f.set(n,t.Completed)}}))};for(var d in n)s();return c}}])}(i);e.ValueScope=l}(gqe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=nqe,n=gqe,r=nqe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=gqe;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var i=function(){return ll((function e(){sl(this,e)}),[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}])}(),a=function(e){function r(e,t,n){var o;return sl(this,r),(o=Eqe(this,r)).varKind=e,o.name=t,o.rhs=n,o}return jd(r,e),ll(r,[{key:"render",value:function(e){var t=e.es5,r=e._n,o=t?n.varKinds.var:this.varKind,i=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(o," ").concat(this.name).concat(i,";")+r}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}])}(i),u=function(e){function n(e,t,r){var o;return sl(this,n),(o=Eqe(this,n)).lhs=e,o.rhs=t,o.sideEffects=r,o}return jd(n,e),ll(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}},{key:"optimizeNames",value:function(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=A(this.rhs,e,n),this}},{key:"names",get:function(){return D(this.lhs instanceof t.Name?{}:Cqe({},this.lhs.names),this.rhs)}}])}(i),l=function(e){function t(e,n,r,o){var i;return sl(this,t),(i=Eqe(this,t,[e,r,o])).op=n,i}return jd(t,e),ll(t,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+t}}])}(u),c=function(e){function t(e){var n;return sl(this,t),(n=Eqe(this,t)).label=e,n.names={},n}return jd(t,e),ll(t,[{key:"render",value:function(e){var t=e._n;return"".concat(this.label,":")+t}}])}(i),s=function(e){function t(e){var n;return sl(this,t),(n=Eqe(this,t)).label=e,n.names={},n}return jd(t,e),ll(t,[{key:"render",value:function(e){var t=e._n,n=this.label?" ".concat(this.label):"";return"break".concat(n,";")+t}}])}(i),d=function(e){function t(e){var n;return sl(this,t),(n=Eqe(this,t)).error=e,n}return jd(t,e),ll(t,[{key:"render",value:function(e){var t=e._n;return"throw ".concat(this.error,";")+t}},{key:"names",get:function(){return this.error.names}}])}(i),f=function(e){function n(e){var t;return sl(this,n),(t=Eqe(this,n)).code=e,t}return jd(n,e),ll(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.code,";")+t}},{key:"optimizeNodes",value:function(){return"".concat(this.code)?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=A(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof t._CodeOrName?this.code.names:{}}}])}(i),p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return sl(this,t),(e=Eqe(this,t)).nodes=n,e}return jd(t,e),ll(t,[{key:"render",value:function(e){return this.nodes.reduce((function(t,n){return t+n.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var n=e[t].optimizeNodes();Array.isArray(n)?e.splice.apply(e,[t,1].concat(tl(n))):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var n=this.nodes,r=n.length;r--;){var o=n[r];o.optimizeNames(e,t)||(R(e,o.names),n.splice(r,1))}return n.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return j(e,t.names)}),{})}}])}(i),v=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t,[{key:"render",value:function(e){return"{"+e._n+_qe(t,"render",this,3)([e])+"}"+e._n}}])}(p),h=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t)}(p),g=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t)}(v);g.kind="else";var m=function(e){function t(e,n){var r;return sl(this,t),(r=Eqe(this,t,[n])).condition=e,r}return jd(t,e),ll(t,[{key:"render",value:function(e){var n="if(".concat(this.condition,")")+_qe(t,"render",this,3)([e]);return this.else&&(n+="else "+this.else.render(e)),n}},{key:"optimizeNodes",value:function(){_qe(t,"optimizeNodes",this,3)([]);var e=this.condition;if(!0===e)return this.nodes;var n=this.else;if(n){var r=n.optimizeNodes();n=this.else=Array.isArray(r)?new g(r):r}return n?!1===e?n instanceof t?n:n.nodes:this.nodes.length?this:new t(F(e),n instanceof t?[n]:n.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,n){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,n),_qe(t,"optimizeNames",this,3)([e,n])||this.else)return this.condition=A(this.condition,e,n),this}},{key:"names",get:function(){var e=_qe(t,"names",this,1);return D(e,this.condition),this.else&&j(e,this.else.names),e}}])}(v);m.kind="if";var y=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t)}(v);y.kind="for";var b=function(e){function t(e){var n;return sl(this,t),(n=Eqe(this,t)).iteration=e,n}return jd(t,e),ll(t,[{key:"render",value:function(e){return"for(".concat(this.iteration,")")+_qe(t,"render",this,3)([e])}},{key:"optimizeNames",value:function(e,n){if(_qe(t,"optimizeNames",this,3)([e,n]))return this.iteration=A(this.iteration,e,n),this}},{key:"names",get:function(){return j(_qe(t,"names",this,1),this.iteration.names)}}])}(y),w=function(e){function t(e,n,r,o){var i;return sl(this,t),(i=Eqe(this,t)).varKind=e,i.name=n,i.from=r,i.to=o,i}return jd(t,e),ll(t,[{key:"render",value:function(e){var r=e.es5?n.varKinds.var:this.varKind,o=this.name,i=this.from,a=this.to;return"for(".concat(r," ").concat(o,"=").concat(i,"; ").concat(o,"<").concat(a,"; ").concat(o,"++)")+_qe(t,"render",this,3)([e])}},{key:"names",get:function(){var e=D(_qe(t,"names",this,1),this.from);return D(e,this.to)}}])}(y),_=function(e){function t(e,n,r,o){var i;return sl(this,t),(i=Eqe(this,t)).loop=e,i.varKind=n,i.name=r,i.iterable=o,i}return jd(t,e),ll(t,[{key:"render",value:function(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+_qe(t,"render",this,3)([e])}},{key:"optimizeNames",value:function(e,n){if(_qe(t,"optimizeNames",this,3)([e,n]))return this.iterable=A(this.iterable,e,n),this}},{key:"names",get:function(){return j(_qe(t,"names",this,1),this.iterable.names)}}])}(y),k=function(e){function t(e,n,r){var o;return sl(this,t),(o=Eqe(this,t)).name=e,o.args=n,o.async=r,o}return jd(t,e),ll(t,[{key:"render",value:function(e){var n=this.async?"async ":"";return"".concat(n,"function ").concat(this.name,"(").concat(this.args,")")+_qe(t,"render",this,3)([e])}}])}(v);k.kind="func";var C=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t,[{key:"render",value:function(e){return"return "+_qe(t,"render",this,3)([e])}}])}(p);C.kind="return";var E=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t,[{key:"render",value:function(e){var n="try"+_qe(t,"render",this,3)([e]);return this.catch&&(n+=this.catch.render(e)),this.finally&&(n+=this.finally.render(e)),n}},{key:"optimizeNodes",value:function(){var e,n;return _qe(t,"optimizeNodes",this,3)([]),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(n=this.finally)||void 0===n||n.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,n){var r,o;return _qe(t,"optimizeNames",this,3)([e,n]),null===(r=this.catch)||void 0===r||r.optimizeNames(e,n),null===(o=this.finally)||void 0===o||o.optimizeNames(e,n),this}},{key:"names",get:function(){var e=_qe(t,"names",this,1);return this.catch&&j(e,this.catch.names),this.finally&&j(e,this.finally.names),e}}])}(v),O=function(e){function t(e){var n;return sl(this,t),(n=Eqe(this,t)).error=e,n}return jd(t,e),ll(t,[{key:"render",value:function(e){return"catch(".concat(this.error,")")+_qe(t,"render",this,3)([e])}}])}(v);O.kind="catch";var S=function(e){function t(){return sl(this,t),Eqe(this,t,arguments)}return jd(t,e),ll(t,[{key:"render",value:function(e){return"finally"+_qe(t,"render",this,3)([e])}}])}(v);S.kind="finally";var x=function(){return ll((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sl(this,e),this._values={},this._blockStarts=[],this._constants={},this.opts=Cqe(Cqe({},r),{},{_n:r.lines?"\n":""}),this._extScope=t,this._scope=new n.Scope({parent:t}),this._nodes=[new h]}),[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,n,r){var o=this._scope.toName(t);return void 0!==n&&r&&(this._constants[o.str]=n),this._leafNode(new a(e,o,n)),o}},{key:"const",value:function(e,t,r){return this._def(n.varKinds.const,e,t,r)}},{key:"let",value:function(e,t,r){return this._def(n.varKinds.let,e,t,r)}},{key:"var",value:function(e,t,r){return this._def(n.varKinds.var,e,t,r)}},{key:"assign",value:function(e,t,n){return this._leafNode(new u(e,t,n))}},{key:"add",value:function(t,n){return this._leafNode(new l(t,e.operators.ADD,n))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new f(e)),this}},{key:"object",value:function(){for(var e=["{"],n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=Tf(a[i],2),l=u[0],c=u[1];e.length>1&&e.push(","),e.push(l),(l!==c||this.opts.es5)&&(e.push(":"),(0,t.addCodeArg)(e,c))}return e.push("}"),new t._Code(e)}},{key:"if",value:function(e,t,n){if(this._blockNode(new m(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new m(e))}},{key:"else",value:function(){return this._elseNode(new g)}},{key:"endIf",value:function(){return this._endBlockNode(m,g)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new b(e),t)}},{key:"forRange",value:function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?n.varKinds.var:n.varKinds.let,a=this._scope.toName(e);return this._for(new w(i,a,t,r),(function(){return o(a)}))}},{key:"forOf",value:function(e,r,o){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.varKinds.const,u=this._scope.toName(e);if(this.opts.es5){var l=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,t._)(sqe||(sqe=YHe(["",".length"])),l),(function(e){i.var(u,(0,t._)(dqe||(dqe=YHe(["","[","]"])),l,e)),o(u)}))}return this._for(new _("of",a,u,r),(function(){return o(u)}))}},{key:"forIn",value:function(e,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?n.varKinds.var:n.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,(0,t._)(fqe||(fqe=YHe(["Object.keys(",")"])),r),o);var a=this._scope.toName(e);return this._for(new _("in",i,a,r),(function(){return o(a)}))}},{key:"endFor",value:function(){return this._endBlockNode(y)}},{key:"label",value:function(e){return this._leafNode(new c(e))}},{key:"break",value:function(e){return this._leafNode(new s(e))}},{key:"return",value:function(e){var t=new C;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}},{key:"try",value:function(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');var r=new E;if(this._blockNode(r),this.code(e),t){var o=this.name("e");this._currNode=r.catch=new O(o),t(o)}return n&&(this._currNode=r.finally=new S,this.code(n)),this._endBlockNode(O,S)}},{key:"throw",value:function(e){return this._leafNode(new d(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(n," vs ").concat(e," expected"));return this._nodes.length=t,this}},{key:"func",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.nil,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return this._blockNode(new k(e,n,r)),o&&this.code(o).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(k)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}])}();function j(e,t){for(var n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function D(e,n){return n instanceof t._CodeOrName?j(e,n.names):e}function A(e,n,r){return e instanceof t.Name?o(e):function(e){return e instanceof t._Code&&e._items.some((function(e){return e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str]}))}(e)?new t._Code(e._items.reduce((function(e,n){return n instanceof t.Name&&(n=o(n)),n instanceof t._Code?e.push.apply(e,tl(n._items)):e.push(n),e}),[])):e;function o(e){var t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function R(e,t){for(var n in t)e[n]=(e[n]||0)-(t[n]||0)}function F(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,t._)(pqe||(pqe=YHe(["!",""])),T(e))}e.CodeGen=x,e.not=F;var I=M(e.operators.AND);e.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(I)};var P=M(e.operators.OR);function M(e){return function(n,r){return n===t.nil?r:r===t.nil?n:(0,t._)(vqe||(vqe=YHe([""," "," ",""])),T(n),e,T(r))}}function T(e){return e instanceof t.Name?e:(0,t._)(hqe||(hqe=YHe(["(",")"])),e)}e.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(P)}}(tqe);var Sqe,xqe,jqe,Dqe,Aqe,Rqe,Fqe,Iqe,Pqe,Mqe,Tqe,Nqe,Bqe,Vqe,Lqe,zqe,Uqe,Hqe,qqe={};function Wqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wqe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gqe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Kqe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kqe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Kqe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(qqe,"__esModule",{value:!0}),qqe.checkStrictMode=qqe.getErrorPath=qqe.Type=qqe.useFunc=qqe.setEvaluated=qqe.evaluatedPropsToName=qqe.mergeEvaluated=qqe.eachItem=qqe.unescapeJsonPointer=qqe.escapeJsonPointer=qqe.escapeFragment=qqe.unescapeFragment=qqe.schemaRefOrVal=qqe.schemaHasRulesButRef=qqe.schemaHasRules=qqe.checkUnknownRules=qqe.alwaysValidSchema=qqe.toHash=void 0;var Yqe=tqe,Jqe=nqe;function Xqe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.opts,r=e.self;if(n.strictSchema&&"boolean"!=typeof t){var o=r.RULES.keywords;for(var i in t)o[i]||uWe(e,'unknown keyword: "'.concat(i,'"'))}}function Zqe(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0;return!1}function Qqe(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function eWe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function tWe(e){var t=e.mergeNames,n=e.mergeToName,r=e.mergeValues,o=e.resultToName;return function(e,i,a,u){var l=void 0===a?i:a instanceof Yqe.Name?(i instanceof Yqe.Name?t(e,i,a):n(e,i,a),a):i instanceof Yqe.Name?(n(e,a,i),i):r(i,a);return u!==Yqe.Name||l instanceof Yqe.Name?l:o(e,l)}}function nWe(e,t){if(!0===t)return e.var("props",!0);var n=e.var("props",(0,Yqe._)(Bqe||(Bqe=YHe(["{}"]))));return void 0!==t&&rWe(e,n,t),n}function rWe(e,t,n){Object.keys(n).forEach((function(n){return e.assign((0,Yqe._)(Vqe||(Vqe=YHe(["","",""])),t,(0,Yqe.getProperty)(n)),!0)}))}qqe.toHash=function(e){var t,n={},r=Gqe(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(e){r.e(e)}finally{r.f()}return n},qqe.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(Xqe(e,t),!Zqe(t,e.self.RULES.all))},qqe.checkUnknownRules=Xqe,qqe.schemaHasRules=Zqe,qqe.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if("$ref"!==n&&t.all[n])return!0;return!1},qqe.schemaRefOrVal=function(e,t,n,r){var o=e.topSchemaRef,i=e.schemaPath;if(!r){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return(0,Yqe._)(Sqe||(Sqe=YHe(["",""])),t)}return(0,Yqe._)(xqe||(xqe=YHe(["","","",""])),o,i,(0,Yqe.getProperty)(n))},qqe.unescapeFragment=function(e){return eWe(decodeURIComponent(e))},qqe.escapeFragment=function(e){return encodeURIComponent(Qqe(e))},qqe.escapeJsonPointer=Qqe,qqe.unescapeJsonPointer=eWe,qqe.eachItem=function(e,t){if(Array.isArray(e)){var n,r=Gqe(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(e){r.e(e)}finally{r.f()}}else t(e)},qqe.mergeEvaluated={props:tWe({mergeNames:function(e,t,n){return e.if((0,Yqe._)(jqe||(jqe=YHe([""," !== true && "," !== undefined"])),n,t),(function(){e.if((0,Yqe._)(Dqe||(Dqe=YHe([""," === true"])),t),(function(){return e.assign(n,!0)}),(function(){return e.assign(n,(0,Yqe._)(Aqe||(Aqe=YHe([""," || {}"])),n)).code((0,Yqe._)(Rqe||(Rqe=YHe(["Object.assign(",", ",")"])),n,t))}))}))},mergeToName:function(e,t,n){return e.if((0,Yqe._)(Fqe||(Fqe=YHe([""," !== true"])),n),(function(){!0===t?e.assign(n,!0):(e.assign(n,(0,Yqe._)(Iqe||(Iqe=YHe([""," || {}"])),n)),rWe(e,n,t))}))},mergeValues:function(e,t){return!0===e||$qe($qe({},e),t)},resultToName:nWe}),items:tWe({mergeNames:function(e,t,n){return e.if((0,Yqe._)(Pqe||(Pqe=YHe([""," !== true && "," !== undefined"])),n,t),(function(){return e.assign(n,(0,Yqe._)(Mqe||(Mqe=YHe([""," === true ? true : "," > "," ? "," : ",""])),t,n,t,n,t))}))},mergeToName:function(e,t,n){return e.if((0,Yqe._)(Tqe||(Tqe=YHe([""," !== true"])),n),(function(){return e.assign(n,!0===t||(0,Yqe._)(Nqe||(Nqe=YHe([""," > "," ? "," : ",""])),n,t,n,t))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},qqe.evaluatedPropsToName=nWe,qqe.setEvaluated=rWe;var oWe,iWe,aWe={};function uWe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(n){if(t="strict mode: ".concat(t),!0===n)throw new Error(t);e.self.logger.warn(t)}}qqe.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:aWe[t.code]||(aWe[t.code]=new Jqe._Code(t.code))})},(iWe=oWe||(qqe.Type=oWe={}))[iWe.Num=0]="Num",iWe[iWe.Str=1]="Str",qqe.getErrorPath=function(e,t,n){if(e instanceof Yqe.Name){var r=t===oWe.Num;return n?r?(0,Yqe._)(Lqe||(Lqe=YHe(['"[" + ',' + "]"'])),e):(0,Yqe._)(zqe||(zqe=YHe(['"[\'" + ',' + "\']"'])),e):r?(0,Yqe._)(Uqe||(Uqe=YHe(['"/" + ',""])),e):(0,Yqe._)(Hqe||(Hqe=YHe(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),e)}return n?(0,Yqe.getProperty)(e).toString():"/"+Qqe(e)},qqe.checkStrictMode=uWe;var lWe={};Object.defineProperty(lWe,"__esModule",{value:!0});var cWe,sWe,dWe,fWe,pWe,vWe,hWe,gWe,mWe,yWe,bWe,wWe,_We,kWe,CWe,EWe,OWe,SWe,xWe,jWe,DWe,AWe,RWe,FWe,IWe,PWe,MWe,TWe=tqe,NWe={data:new TWe.Name("data"),valCxt:new TWe.Name("valCxt"),instancePath:new TWe.Name("instancePath"),parentData:new TWe.Name("parentData"),parentDataProperty:new TWe.Name("parentDataProperty"),rootData:new TWe.Name("rootData"),dynamicAnchors:new TWe.Name("dynamicAnchors"),vErrors:new TWe.Name("vErrors"),errors:new TWe.Name("errors"),this:new TWe.Name("this"),self:new TWe.Name("self"),scope:new TWe.Name("scope"),json:new TWe.Name("json"),jsonPos:new TWe.Name("jsonPos"),jsonLen:new TWe.Name("jsonLen"),jsonPart:new TWe.Name("jsonPart")};lWe.default=NWe,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=tqe,n=qqe,r=lWe;function o(e,n){var o=e.const("err",n);e.if((0,t._)(kWe||(kWe=YHe([""," === null"])),r.default.vErrors),(function(){return e.assign(r.default.vErrors,(0,t._)(CWe||(CWe=YHe(["[","]"])),o))}),(0,t._)(EWe||(EWe=YHe(["",".push(",")"])),r.default.vErrors,o)),e.code((0,t._)(OWe||(OWe=YHe(["","++"])),r.default.errors))}function i(e,n){var r=e.gen,o=e.validateName;e.schemaEnv.$async?r.throw((0,t._)(SWe||(SWe=YHe(["new ","(",")"])),e.ValidationError,n)):(r.assign((0,t._)(xWe||(xWe=YHe(["",".errors"])),o),n),r.return(!1))}e.keywordError={message:function(e){var n=e.keyword;return(0,t.str)(cWe||(cWe=YHe(['must pass "','" keyword validation'])),n)}},e.keyword$DataError={message:function(e){var n=e.keyword,r=e.schemaType;return r?(0,t.str)(sWe||(sWe=YHe(['"','" keyword must be '," ($data)"])),n,r):(0,t.str)(dWe||(dWe=YHe(['"','" keyword is invalid ($data)'])),n)}},e.reportError=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,c=n.it,s=c.gen,d=c.compositeRule,f=c.allErrors,p=u(n,r,a);(null!=l?l:d||f)?o(s,p):i(c,(0,t._)(fWe||(fWe=YHe(["[","]"])),p))},e.reportExtraError=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,a=arguments.length>2?arguments[2]:void 0,l=t.it,c=l.gen,s=l.compositeRule,d=l.allErrors;o(c,u(t,n,a)),s||d||i(l,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if((0,t._)(pWe||(pWe=YHe([""," !== null"])),r.default.vErrors),(function(){return e.if(n,(function(){return e.assign((0,t._)(vWe||(vWe=YHe(["",".length"])),r.default.vErrors),n)}),(function(){return e.assign(r.default.vErrors,null)}))}))},e.extendErrors=function(e){var n=e.gen,o=e.keyword,i=e.schemaValue,a=e.data,u=e.errsCount,l=e.it;if(void 0===u)throw new Error("ajv implementation error");var c=n.name("err");n.forRange("i",u,r.default.errors,(function(e){n.const(c,(0,t._)(hWe||(hWe=YHe(["","[","]"])),r.default.vErrors,e)),n.if((0,t._)(gWe||(gWe=YHe(["",".instancePath === undefined"])),c),(function(){return n.assign((0,t._)(mWe||(mWe=YHe(["",".instancePath"])),c),(0,t.strConcat)(r.default.instancePath,l.errorPath))})),n.assign((0,t._)(yWe||(yWe=YHe(["",".schemaPath"])),c),(0,t.str)(bWe||(bWe=YHe(["","/",""])),l.errSchemaPath,o)),l.opts.verbose&&(n.assign((0,t._)(wWe||(wWe=YHe(["",".schema"])),c),i),n.assign((0,t._)(_We||(_We=YHe(["",".data"])),c),a))}))};var a={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function u(e,n,o){return!1===e.it.createErrors?(0,t._)(jWe||(jWe=YHe(["{}"]))):function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.gen,u=e.it,s=[l(u,o),c(e,o)];return function(e,n,o){var i=n.params,u=n.message,l=e.keyword,c=e.data,s=e.schemaValue,d=e.it,f=d.opts,p=d.propertyName,v=d.topSchemaRef,h=d.schemaPath;o.push([a.keyword,l],[a.params,"function"==typeof i?i(e):i||(0,t._)(FWe||(FWe=YHe(["{}"])))]),f.messages&&o.push([a.message,"function"==typeof u?u(e):u]);f.verbose&&o.push([a.schema,s],[a.parentSchema,(0,t._)(IWe||(IWe=YHe(["","",""])),v,h)],[r.default.data,c]);p&&o.push([a.propertyName,p])}(e,n,s),i.object.apply(i,s)}(e,n,o)}function l(e,o){var i=e.errorPath,a=o.instancePath,u=a?(0,t.str)(DWe||(DWe=YHe(["","",""])),i,(0,n.getErrorPath)(a,n.Type.Str)):i;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,u)]}function c(e,r){var o=e.keyword,i=e.it.errSchemaPath,u=r.schemaPath,l=r.parentSchema?i:(0,t.str)(AWe||(AWe=YHe(["","/",""])),i,o);return u&&(l=(0,t.str)(RWe||(RWe=YHe(["","",""])),l,(0,n.getErrorPath)(u,n.Type.Str))),[a.schemaPath,l]}}(eqe);var BWe={},VWe={};function LWe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zWe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LWe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LWe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.defineProperty(VWe,"__esModule",{value:!0}),VWe.getRules=VWe.isJSONType=void 0;var UWe=new Set(["string","number","integer","boolean","null","object","array"]);VWe.isJSONType=function(e){return"string"==typeof e&&UWe.has(e)},VWe.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:zWe(zWe({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var HWe,qWe,WWe,$We,GWe,KWe,YWe,JWe,XWe,ZWe,QWe,e$e,t$e,n$e,r$e,o$e,i$e,a$e,u$e,l$e,c$e,s$e,d$e,f$e,p$e,v$e,h$e,g$e,m$e,y$e,b$e,w$e,_$e,k$e={};function C$e(e,t){return t.rules.some((function(t){return E$e(e,t)}))}function E$e(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((function(t){return void 0!==e[t]})))}function O$e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S$e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S$e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function S$e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(k$e,"__esModule",{value:!0}),k$e.shouldUseRule=k$e.shouldUseGroup=k$e.schemaHasRulesForType=void 0,k$e.schemaHasRulesForType=function(e,t){var n=e.schema,r=e.self.RULES.types[t];return r&&!0!==r&&C$e(n,r)},k$e.shouldUseGroup=C$e,k$e.shouldUseRule=E$e,Object.defineProperty(BWe,"__esModule",{value:!0}),BWe.reportTypeError=BWe.checkDataTypes=BWe.checkDataType=BWe.coerceAndCheckDataType=BWe.getJSONTypes=BWe.getSchemaTypes=BWe.DataType=void 0;var x$e,j$e,D$e=VWe,A$e=k$e,R$e=eqe,F$e=tqe,I$e=qqe;function P$e(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every(D$e.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}(j$e=x$e||(BWe.DataType=x$e={}))[j$e.Correct=0]="Correct",j$e[j$e.Wrong=1]="Wrong",BWe.getSchemaTypes=function(e){var t=P$e(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},BWe.getJSONTypes=P$e,BWe.coerceAndCheckDataType=function(e,t){var n=e.gen,r=e.data,o=e.opts,i=function(e,t){return t?e.filter((function(e){return M$e.has(e)||"array"===t&&"array"===e})):[]}(t,o.coerceTypes),a=t.length>0&&!(0===i.length&&1===t.length&&(0,A$e.schemaHasRulesForType)(e,t[0]));if(a){var u=N$e(t,r,o.strictNumbers,x$e.Wrong);n.if(u,(function(){i.length?function(e,t,n){var r=e.gen,o=e.data,i=e.opts,a=r.let("dataType",(0,F$e._)(HWe||(HWe=YHe(["typeof ",""])),o)),u=r.let("coerced",(0,F$e._)(qWe||(qWe=YHe(["undefined"]))));"array"===i.coerceTypes&&r.if((0,F$e._)(WWe||(WWe=YHe([""," == 'object' && Array.isArray(",") && ",".length == 1"])),a,o,o),(function(){return r.assign(o,(0,F$e._)($We||($We=YHe(["","[0]"])),o)).assign(a,(0,F$e._)(GWe||(GWe=YHe(["typeof ",""])),o)).if(N$e(t,o,i.strictNumbers),(function(){return r.assign(u,o)}))}));r.if((0,F$e._)(KWe||(KWe=YHe([""," !== undefined"])),u));var l,c=O$e(n);try{for(c.s();!(l=c.n()).done;){var s=l.value;(M$e.has(s)||"array"===s&&"array"===i.coerceTypes)&&d(s)}}catch(e){c.e(e)}finally{c.f()}function d(e){switch(e){case"string":return void r.elseIf((0,F$e._)(JWe||(JWe=YHe(["",' == "number" || ',' == "boolean"'])),a,a)).assign(u,(0,F$e._)(XWe||(XWe=YHe(['"" + ',""])),o)).elseIf((0,F$e._)(ZWe||(ZWe=YHe([""," === null"])),o)).assign(u,(0,F$e._)(QWe||(QWe=YHe(['""']))));case"number":return void r.elseIf((0,F$e._)(e$e||(e$e=YHe(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"])),a,o,a,o,o,o)).assign(u,(0,F$e._)(t$e||(t$e=YHe(["+",""])),o));case"integer":return void r.elseIf((0,F$e._)(n$e||(n$e=YHe(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"])),a,o,a,o,o,o,o)).assign(u,(0,F$e._)(r$e||(r$e=YHe(["+",""])),o));case"boolean":return void r.elseIf((0,F$e._)(o$e||(o$e=YHe(["",' === "false" || '," === 0 || "," === null"])),o,o,o)).assign(u,!1).elseIf((0,F$e._)(i$e||(i$e=YHe(["",' === "true" || '," === 1"])),o,o)).assign(u,!0);case"null":return r.elseIf((0,F$e._)(a$e||(a$e=YHe(["",' === "" || '," === 0 || "," === false"])),o,o,o)),void r.assign(u,null);case"array":r.elseIf((0,F$e._)(u$e||(u$e=YHe(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"])),a,a,a,o)).assign(u,(0,F$e._)(l$e||(l$e=YHe(["[","]"])),o))}}r.else(),V$e(e),r.endIf(),r.if((0,F$e._)(YWe||(YWe=YHe([""," !== undefined"])),u),(function(){r.assign(o,u),function(e,t){var n=e.gen,r=e.parentData,o=e.parentDataProperty;n.if((0,F$e._)(c$e||(c$e=YHe([""," !== undefined"])),r),(function(){return n.assign((0,F$e._)(s$e||(s$e=YHe(["","[","]"])),r,o),t)}))}(e,u)}))}(e,t,i):V$e(e)}))}return a};var M$e=new Set(["string","number","integer","boolean","null"]);function T$e(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x$e.Correct,i=o===x$e.Correct?F$e.operators.EQ:F$e.operators.NEQ;switch(e){case"null":return(0,F$e._)(d$e||(d$e=YHe([""," "," null"])),t,i);case"array":r=(0,F$e._)(f$e||(f$e=YHe(["Array.isArray(",")"])),t);break;case"object":r=(0,F$e._)(p$e||(p$e=YHe([""," && typeof ",' == "object" && !Array.isArray(',")"])),t,t,t);break;case"integer":r=a((0,F$e._)(v$e||(v$e=YHe(["!("," % 1) && !isNaN(",")"])),t,t));break;case"number":r=a();break;default:return(0,F$e._)(h$e||(h$e=YHe(["typeof "," "," ",""])),t,i,e)}return o===x$e.Correct?r:(0,F$e.not)(r);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F$e.nil;return(0,F$e.and)((0,F$e._)(g$e||(g$e=YHe(["typeof ",' == "number"'])),t),e,n?(0,F$e._)(m$e||(m$e=YHe(["isFinite(",")"])),t):F$e.nil)}}function N$e(e,t,n,r){if(1===e.length)return T$e(e[0],t,n,r);var o,i=(0,I$e.toHash)(e);if(i.array&&i.object){var a=(0,F$e._)(y$e||(y$e=YHe(["typeof ",' != "object"'])),t);o=i.null?a:(0,F$e._)(b$e||(b$e=YHe(["!"," || ",""])),t,a),delete i.null,delete i.array,delete i.object}else o=F$e.nil;for(var u in i.number&&delete i.integer,i)o=(0,F$e.and)(o,T$e(u,t,n,r));return o}BWe.checkDataType=T$e,BWe.checkDataTypes=N$e;var B$e={message:function(e){var t=e.schema;return"must be ".concat(t)},params:function(e){var t=e.schema,n=e.schemaValue;return"string"==typeof t?(0,F$e._)(w$e||(w$e=YHe(["{type: ","}"])),t):(0,F$e._)(_$e||(_$e=YHe(["{type: ","}"])),n)}};function V$e(e){var t=function(e){var t=e.gen,n=e.data,r=e.schema,o=(0,I$e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:o,schemaValue:o,parentSchema:r,params:{},it:e}}(e);(0,R$e.reportError)(t,B$e)}BWe.reportTypeError=V$e;var L$e,z$e,U$e,H$e,q$e,W$e={};var $$e,G$e,K$e,Y$e,J$e,X$e,Z$e,Q$e,eGe,tGe,nGe,rGe,oGe,iGe,aGe,uGe={},lGe={};Object.defineProperty(lGe,"__esModule",{value:!0}),lGe.validateUnion=lGe.validateArray=lGe.usePattern=lGe.callValidateCode=lGe.schemaProperties=lGe.allSchemaProperties=lGe.noPropertyInData=lGe.propertyInData=lGe.isOwnProperty=lGe.hasPropFunc=lGe.reportMissingProp=lGe.checkMissingProp=lGe.checkReportMissingProp=void 0;var cGe=tqe,sGe=qqe,dGe=lWe,fGe=qqe;function pGe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,cGe._)(K$e||(K$e=YHe(["Object.prototype.hasOwnProperty"])))})}function vGe(e,t,n){return(0,cGe._)(Y$e||(Y$e=YHe(["",".call(",", ",")"])),pGe(e),t,n)}function hGe(e,t,n,r){var o=(0,cGe._)(Z$e||(Z$e=YHe(["",""," === undefined"])),t,(0,cGe.getProperty)(n));return r?(0,cGe.or)(o,(0,cGe.not)(vGe(e,t,n))):o}function gGe(e){return e?Object.keys(e).filter((function(e){return"__proto__"!==e})):[]}lGe.checkReportMissingProp=function(e,t){var n=e.gen,r=e.data,o=e.it;n.if(hGe(n,r,t,o.opts.ownProperties),(function(){e.setParams({missingProperty:(0,cGe._)($$e||($$e=YHe(["",""])),t)},!0),e.error()}))},lGe.checkMissingProp=function(e,t,n){var r=e.gen,o=e.data,i=e.it.opts;return cGe.or.apply(void 0,tl(t.map((function(e){return(0,cGe.and)(hGe(r,o,e,i.ownProperties),(0,cGe._)(G$e||(G$e=YHe([""," = ",""])),n,e))}))))},lGe.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},lGe.hasPropFunc=pGe,lGe.isOwnProperty=vGe,lGe.propertyInData=function(e,t,n,r){var o=(0,cGe._)(J$e||(J$e=YHe(["",""," !== undefined"])),t,(0,cGe.getProperty)(n));return r?(0,cGe._)(X$e||(X$e=YHe([""," && ",""])),o,vGe(e,t,n)):o},lGe.noPropertyInData=hGe,lGe.allSchemaProperties=gGe,lGe.schemaProperties=function(e,t){return gGe(t).filter((function(n){return!(0,sGe.alwaysValidSchema)(e,t[n])}))},lGe.callValidateCode=function(e,t,n,r){var o=e.schemaCode,i=e.data,a=e.it,u=a.gen,l=a.topSchemaRef,c=a.schemaPath,s=a.errorPath,d=e.it,f=r?(0,cGe._)(Q$e||(Q$e=YHe(["",", ",", ","",""])),o,i,l,c):i,p=[[dGe.default.instancePath,(0,cGe.strConcat)(dGe.default.instancePath,s)],[dGe.default.parentData,d.parentData],[dGe.default.parentDataProperty,d.parentDataProperty],[dGe.default.rootData,dGe.default.rootData]];d.opts.dynamicRef&&p.push([dGe.default.dynamicAnchors,dGe.default.dynamicAnchors]);var v=(0,cGe._)(eGe||(eGe=YHe(["",", ",""])),f,u.object.apply(u,p));return n!==cGe.nil?(0,cGe._)(tGe||(tGe=YHe(["",".call(",", ",")"])),t,n,v):(0,cGe._)(nGe||(nGe=YHe(["","(",")"])),t,v)};var mGe,yGe,bGe,wGe,_Ge,kGe,CGe,EGe,OGe,SGe,xGe,jGe=(0,cGe._)(rGe||(rGe=YHe(["new RegExp"])));function DGe(){if(xGe)return uGe;xGe=1,Object.defineProperty(uGe,"__esModule",{value:!0}),uGe.validateKeywordUsage=uGe.validSchemaType=uGe.funcKeywordCode=uGe.macroKeywordCode=void 0;var e=tqe,t=lWe,n=lGe,r=eqe;function o(t){var n=t.gen,r=t.data,o=t.it;n.if(o.parentData,(function(){return n.assign(r,(0,e._)(CGe||(CGe=YHe(["","[","]"])),o.parentData,o.parentDataProperty))}))}function i(t,n,r){if(void 0===r)throw new Error('keyword "'.concat(n,'" failed to compile'));return t.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,e.stringify)(r)})}return uGe.macroKeywordCode=function(t,n){var r=t.gen,o=t.keyword,a=t.schema,u=t.parentSchema,l=t.it,c=n.macro.call(l.self,a,u,l),s=i(r,o,c);!1!==l.opts.validateSchema&&l.self.validateSchema(c,!0);var d=r.name("valid");t.subschema({schema:c,schemaPath:e.nil,errSchemaPath:"".concat(l.errSchemaPath,"/").concat(o),topSchemaRef:s,compositeRule:!0},d),t.pass(d,(function(){return t.error(!0)}))},uGe.funcKeywordCode=function(a,u){var l,c=a.gen,s=a.keyword,d=a.schema,f=a.parentSchema,p=a.$data,v=a.it;!function(e,t){var n=e.schemaEnv;if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}(v,u);var h=!p&&u.compile?u.compile.call(v.self,d,f,v):u.validate,g=i(c,s,h),m=c.let("valid");function y(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.async?(0,e._)(_Ge||(_Ge=YHe(["await "]))):e.nil,o=v.opts.passContext?t.default.this:t.default.self,i=!("compile"in u&&!p||!1===u.schema);c.assign(m,(0,e._)(kGe||(kGe=YHe(["","",""])),r,(0,n.callValidateCode)(a,g,o,i)),u.modifying)}function b(t){var n;c.if((0,e.not)(null!==(n=u.valid)&&void 0!==n?n:m),t)}a.block$data(m,(function(){if(!1===u.errors)y(),u.modifying&&o(a),b((function(){return a.error()}));else{var n=u.async?function(){var t=c.let("ruleErrs",null);return c.try((function(){return y((0,e._)(mGe||(mGe=YHe(["await "]))))}),(function(n){return c.assign(m,!1).if((0,e._)(yGe||(yGe=YHe([""," instanceof ",""])),n,v.ValidationError),(function(){return c.assign(t,(0,e._)(bGe||(bGe=YHe(["",".errors"])),n))}),(function(){return c.throw(n)}))})),t}():(i=(0,e._)(wGe||(wGe=YHe(["",".errors"])),g),c.assign(i,null),y(e.nil),i);u.modifying&&o(a),b((function(){return function(n,o){var i=n.gen;i.if((0,e._)(EGe||(EGe=YHe(["Array.isArray(",")"])),o),(function(){i.assign(t.default.vErrors,(0,e._)(OGe||(OGe=YHe([""," === null ? "," : ",".concat(",")"])),t.default.vErrors,o,t.default.vErrors,o)).assign(t.default.errors,(0,e._)(SGe||(SGe=YHe(["",".length"])),t.default.vErrors)),(0,r.extendErrors)(n)}),(function(){return n.error()}))}(a,n)}))}var i})),a.ok(null!==(l=u.valid)&&void 0!==l?l:m)},uGe.validSchemaType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==Ln(e)&&!Array.isArray(e):Ln(e)==t||n&&void 0===e}))},uGe.validateKeywordUsage=function(e,t,n){var r=e.schema,o=e.opts,i=e.self,a=e.errSchemaPath;if(Array.isArray(t.keyword)?!t.keyword.includes(n):t.keyword!==n)throw new Error("ajv implementation error");var u=t.dependencies;if(null==u?void 0:u.some((function(e){return!Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have dependencies of ".concat(n,": ").concat(u.join(",")));if(t.validateSchema&&!t.validateSchema(r[n])){var l='keyword "'.concat(n,'" value is invalid at path "').concat(a,'": ')+i.errorsText(t.validateSchema.errors);if("log"!==o.validateSchema)throw new Error(l);i.logger.error(l)}},uGe}lGe.usePattern=function(e,t){var n=e.gen,r=e.it.opts,o=r.unicodeRegExp?"u":"",i=r.code.regExp,a=i(t,o);return n.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,cGe._)(oGe||(oGe=YHe(["","(",", ",")"])),"new RegExp"===i.code?jGe:(0,fGe.useFunc)(n,i),t,o)})},lGe.validateArray=function(e){var t=e.gen,n=e.data,r=e.keyword,o=e.it,i=t.name("valid");if(o.allErrors){var a=t.let("valid",!0);return u((function(){return t.assign(a,!1)})),a}return t.var(i,!0),u((function(){return t.break()})),i;function u(o){var a=t.const("len",(0,cGe._)(iGe||(iGe=YHe(["",".length"])),n));t.forRange("i",0,a,(function(n){e.subschema({keyword:r,dataProp:n,dataPropType:sGe.Type.Num},i),t.if((0,cGe.not)(i),o)}))}},lGe.validateUnion=function(e){var t=e.gen,n=e.schema,r=e.keyword,o=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!n.some((function(e){return(0,sGe.alwaysValidSchema)(o,e)}))||o.opts.unevaluated){var i=t.let("valid",!1),a=t.name("_valid");t.block((function(){return n.forEach((function(n,o){var u=e.subschema({keyword:r,schemaProp:o,compositeRule:!0},a);t.assign(i,(0,cGe._)(aGe||(aGe=YHe([""," || ",""])),i,a)),e.mergeValidEvaluated(u,a)||t.if((0,cGe.not)(i))}))})),e.result(i,(function(){return e.reset()}),(function(){return e.error(!0)}))}};var AGe,RGe,FGe,IGe,PGe,MGe,TGe={};var NGe={},BGe=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==Ln(t)&&"object"==Ln(n)){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n},VGe={exports:{}},LGe=VGe.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),zGe(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function zGe(e,t,n,r,o,i,a,u,l,c){if(r&&"object"==Ln(r)&&!Array.isArray(r)){for(var s in t(r,o,i,a,u,l,c),r){var d=r[s];if(Array.isArray(d)){if(s in LGe.arrayKeywords)for(var f=0;f<d.length;f++)zGe(e,t,n,d[f],o+"/"+s+"/"+f,i,o,s,r,f)}else if(s in LGe.propsKeywords){if(d&&"object"==Ln(d))for(var p in d)zGe(e,t,n,d[p],o+"/"+s+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),i,o,s,r,p)}else(s in LGe.keywords||e.allKeys&&!(s in LGe.skipKeywords))&&zGe(e,t,n,d,o+"/"+s,i,o,s,r)}n(r,o,i,a,u,l,c)}}LGe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},LGe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},LGe.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},LGe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var UGe=VGe.exports;Object.defineProperty(NGe,"__esModule",{value:!0}),NGe.getSchemaRefs=NGe.resolveUrl=NGe.normalizeId=NGe._getFullPath=NGe.getFullPath=NGe.inlineRef=void 0;var HGe=qqe,qGe=BGe,WGe=UGe,$Ge=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);NGe.inlineRef=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!KGe(e):!!t&&YGe(e)<=t)};var GGe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function KGe(e){for(var t in e){if(GGe.has(t))return!0;var n=e[t];if(Array.isArray(n)&&n.some(KGe))return!0;if("object"==Ln(n)&&KGe(n))return!0}return!1}function YGe(e){var t=0;for(var n in e){if("$ref"===n)return 1/0;if(t++,!$Ge.has(n)&&("object"==Ln(e[n])&&(0,HGe.eachItem)(e[n],(function(e){return t+=YGe(e)})),t===1/0))return 1/0}return t}function JGe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!1!==(arguments.length>2?arguments[2]:void 0)&&(t=QGe(t));var n=e.parse(t);return XGe(e,n)}function XGe(e,t){return e.serialize(t).split("#")[0]+"#"}NGe.getFullPath=JGe,NGe._getFullPath=XGe;var ZGe=/#\/?$/;function QGe(e){return e?e.replace(ZGe,""):""}NGe.normalizeId=QGe,NGe.resolveUrl=function(e,t,n){return n=QGe(n),e.resolve(t,n)};var eKe,tKe,nKe,rKe,oKe,iKe,aKe,uKe,lKe,cKe,sKe,dKe,fKe,pKe,vKe,hKe,gKe,mKe,yKe,bKe,wKe,_Ke,kKe,CKe,EKe,OKe,SKe,xKe,jKe,DKe,AKe,RKe,FKe,IKe,PKe,MKe,TKe,NKe,BKe,VKe,LKe=/^[a-z_][-a-z0-9._]*$/i;function zKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UKe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zKe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HKe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qKe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qKe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qKe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function WKe(){if(VKe)return ZHe;VKe=1,Object.defineProperty(ZHe,"__esModule",{value:!0}),ZHe.getData=ZHe.KeywordCxt=ZHe.validateFunctionCode=void 0;var e=function(){if(MWe)return QHe;MWe=1,Object.defineProperty(QHe,"__esModule",{value:!0}),QHe.boolOrEmptySchema=QHe.topBoolOrEmptySchema=void 0;var e=eqe,t=tqe,n=lWe,r={message:"boolean schema is false"};function o(t,n){var o={gen:t.gen,keyword:"false schema",data:t.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,e.reportError)(o,r,void 0,n)}return QHe.topBoolOrEmptySchema=function(e){var r=e.gen,i=e.schema,a=e.validateName;!1===i?o(e,!1):"object"==Ln(i)&&!0===i.$async?r.return(n.default.data):(r.assign((0,t._)(PWe||(PWe=YHe(["",".errors"])),a),null),r.return(!0))},QHe.boolOrEmptySchema=function(e,t){var n=e.gen;!1===e.schema?(n.var(t,!1),o(e)):n.var(t,!0)},QHe}(),t=BWe,n=k$e,r=BWe,o=function(){if(q$e)return W$e;q$e=1,Object.defineProperty(W$e,"__esModule",{value:!0}),W$e.assignDefaults=void 0;var e=tqe,t=qqe;function n(n,r,o){var i=n.gen,a=n.compositeRule,u=n.data,l=n.opts;if(void 0!==o){var c=(0,e._)(L$e||(L$e=YHe(["","",""])),u,(0,e.getProperty)(r));if(a)(0,t.checkStrictMode)(n,"default is ignored for: ".concat(c));else{var s=(0,e._)(z$e||(z$e=YHe([""," === undefined"])),c);"empty"===l.useDefaults&&(s=(0,e._)(U$e||(U$e=YHe([""," || "," === null || ",' === ""'])),s,c,c)),i.if(s,(0,e._)(H$e||(H$e=YHe([""," = ",""])),c,(0,e.stringify)(o)))}}}return W$e.assignDefaults=function(e,t){var r=e.schema,o=r.properties,i=r.items;if("object"===t&&o)for(var a in o)n(e,a,o[a].default);else"array"===t&&Array.isArray(i)&&i.forEach((function(t,r){return n(e,r,t.default)}))},W$e}(),i=DGe(),a=function(){if(MGe)return TGe;MGe=1,Object.defineProperty(TGe,"__esModule",{value:!0}),TGe.extendSubschemaMode=TGe.extendSubschemaData=TGe.getSubschema=void 0;var e=tqe,t=qqe;return TGe.getSubschema=function(n,r){var o=r.keyword,i=r.schemaProp,a=r.schema,u=r.schemaPath,l=r.errSchemaPath,c=r.topSchemaRef;if(void 0!==o&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==o){var s=n.schema[o];return void 0===i?{schema:s,schemaPath:(0,e._)(AGe||(AGe=YHe(["","",""])),n.schemaPath,(0,e.getProperty)(o)),errSchemaPath:"".concat(n.errSchemaPath,"/").concat(o)}:{schema:s[i],schemaPath:(0,e._)(RGe||(RGe=YHe(["","","",""])),n.schemaPath,(0,e.getProperty)(o),(0,e.getProperty)(i)),errSchemaPath:"".concat(n.errSchemaPath,"/").concat(o,"/").concat((0,t.escapeFragment)(i))}}if(void 0!==a){if(void 0===u||void 0===l||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:u,topSchemaRef:c,errSchemaPath:l}}throw new Error('either "keyword" or "schema" must be passed')},TGe.extendSubschemaData=function(n,r,o){var i=o.dataProp,a=o.dataPropType,u=o.data,l=o.dataTypes,c=o.propertyName;if(void 0!==u&&void 0!==i)throw new Error('both "data" and "dataProp" passed, only one allowed');var s=r.gen;if(void 0!==i){var d=r.errorPath,f=r.dataPathArr,p=r.opts;v(s.let("data",(0,e._)(FGe||(FGe=YHe(["","",""])),r.data,(0,e.getProperty)(i)),!0)),n.errorPath=(0,e.str)(IGe||(IGe=YHe(["","",""])),d,(0,t.getErrorPath)(i,a,p.jsPropertySyntax)),n.parentDataProperty=(0,e._)(PGe||(PGe=YHe(["",""])),i),n.dataPathArr=[].concat(tl(f),[n.parentDataProperty])}function v(e){n.data=e,n.dataLevel=r.dataLevel+1,n.dataTypes=[],r.definedProperties=new Set,n.parentData=r.data,n.dataNames=[].concat(tl(r.dataNames),[e])}void 0!==u&&(v(u instanceof e.Name?u:s.let("data",u,!0)),void 0!==c&&(n.propertyName=c)),l&&(n.dataTypes=l)},TGe.extendSubschemaMode=function(e,t){var n=t.jtdDiscriminator,r=t.jtdMetadata,o=t.compositeRule,i=t.createErrors,a=t.allErrors;void 0!==o&&(e.compositeRule=o),void 0!==i&&(e.createErrors=i),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=n,e.jtdMetadata=r},TGe}(),u=tqe,l=lWe,c=NGe,s=qqe,d=eqe;function f(e,t){var n=e.gen,r=e.validateName,o=e.schema,i=e.schemaEnv,a=e.opts;a.code.es5?n.func(r,(0,u._)(eKe||(eKe=YHe(["",", ",""])),l.default.data,l.default.valCxt),i.$async,(function(){n.code((0,u._)(tKe||(tKe=YHe(['"use strict"; ',""])),p(o,a))),function(e,t){e.if(l.default.valCxt,(function(){e.var(l.default.instancePath,(0,u._)(iKe||(iKe=YHe(["",".",""])),l.default.valCxt,l.default.instancePath)),e.var(l.default.parentData,(0,u._)(aKe||(aKe=YHe(["",".",""])),l.default.valCxt,l.default.parentData)),e.var(l.default.parentDataProperty,(0,u._)(uKe||(uKe=YHe(["",".",""])),l.default.valCxt,l.default.parentDataProperty)),e.var(l.default.rootData,(0,u._)(lKe||(lKe=YHe(["",".",""])),l.default.valCxt,l.default.rootData)),t.dynamicRef&&e.var(l.default.dynamicAnchors,(0,u._)(cKe||(cKe=YHe(["",".",""])),l.default.valCxt,l.default.dynamicAnchors))}),(function(){e.var(l.default.instancePath,(0,u._)(sKe||(sKe=YHe(['""'])))),e.var(l.default.parentData,(0,u._)(dKe||(dKe=YHe(["undefined"])))),e.var(l.default.parentDataProperty,(0,u._)(fKe||(fKe=YHe(["undefined"])))),e.var(l.default.rootData,l.default.data),t.dynamicRef&&e.var(l.default.dynamicAnchors,(0,u._)(pKe||(pKe=YHe(["{}"]))))}))}(n,a),n.code(t)})):n.func(r,(0,u._)(nKe||(nKe=YHe(["",", ",""])),l.default.data,function(e){return(0,u._)(rKe||(rKe=YHe(["{",'="", ',", ",", ","=","","}={}"])),l.default.instancePath,l.default.parentData,l.default.parentDataProperty,l.default.rootData,l.default.data,e.dynamicRef?(0,u._)(oKe||(oKe=YHe([", ","={}"])),l.default.dynamicAnchors):u.nil)}(a)),i.$async,(function(){return n.code(p(o,a)).code(t)}))}function p(e,t){var n="object"==Ln(e)&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,u._)(_Ke||(_Ke=YHe(["/*# sourceURL="," */"])),n):u.nil}function v(t,n){g(t)&&(m(t),h(t))?function(e,t){var n=e.schema,r=e.gen,o=e.opts;o.$comment&&n.$comment&&b(e);(function(e){var t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,c.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);var i=r.const("_errs",l.default.errors);y(e,i),r.var(t,(0,u._)(kKe||(kKe=YHe([""," === ",""])),i,l.default.errors))}(t,n):(0,e.boolOrEmptySchema)(t,n)}function h(e){var t=e.schema,n=e.self;if("boolean"==typeof t)return!t;for(var r in t)if(n.RULES.all[r])return!0;return!1}function g(e){return"boolean"!=typeof e.schema}function m(e){(0,s.checkUnknownRules)(e),function(e){var t=e.schema,n=e.errSchemaPath,r=e.opts,o=e.self;t.$ref&&r.ignoreKeywordsWithRef&&(0,s.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn('$ref: keywords ignored in schema at path "'.concat(n,'"'))}(e)}function y(e,n){if(e.opts.jtd)return w(e,[],!1,n);var r=(0,t.getSchemaTypes)(e.schema);w(e,r,!(0,t.coerceAndCheckDataType)(e,r),n)}function b(e){var t=e.gen,n=e.schemaEnv,r=e.schema,o=e.errSchemaPath,i=e.opts,a=r.$comment;if(!0===i.$comment)t.code((0,u._)(CKe||(CKe=YHe(["",".logger.log(",")"])),l.default.self,a));else if("function"==typeof i.$comment){var c=(0,u.str)(EKe||(EKe=YHe(["","/$comment"])),o),s=t.scopeValue("root",{ref:n.root});t.code((0,u._)(OKe||(OKe=YHe(["",".opts.$comment(",", ",", ",".schema)"])),l.default.self,a,c,s))}}function w(e,t,o,i){var a=e.gen,c=e.schema,d=e.data,f=e.allErrors,p=e.opts,v=e.self.RULES;function h(s){(0,n.shouldUseGroup)(c,s)&&(s.type?(a.if((0,r.checkDataType)(s.type,d,p.strictNumbers)),_(e,s),1===t.length&&t[0]===s.type&&o&&(a.else(),(0,r.reportTypeError)(e)),a.endIf()):_(e,s),f||a.if((0,u._)(FKe||(FKe=YHe([""," === ",""])),l.default.errors,i||0)))}!c.$ref||!p.ignoreKeywordsWithRef&&(0,s.schemaHasRulesButRef)(c,v)?(p.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((function(t){C(e.dataTypes,t)||E(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))})),function(e,t){var n,r=[],o=HKe(e.dataTypes);try{for(o.s();!(n=o.n()).done;){var i=n.value;C(t,i)?r.push(i):t.includes("integer")&&"number"===i&&r.push("integer")}}catch(e){o.e(e)}finally{o.f()}e.dataTypes=r}(e,t)})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){var r=e.self.RULES.all;for(var o in r){var i=r[o];if("object"==Ln(i)&&(0,n.shouldUseRule)(e.schema,i)){var a=i.definition.type;a.length&&!a.some((function(e){return k(t,e)}))&&E(e,'missing type "'.concat(a.join(","),'" for keyword "').concat(o,'"'))}}}(e,e.dataTypes)}(e,t),a.block((function(){var e,t=HKe(v.rules);try{for(t.s();!(e=t.n()).done;){h(e.value)}}catch(e){t.e(e)}finally{t.f()}h(v.post)}))):a.block((function(){return S(e,"$ref",v.all.$ref.definition)}))}function _(e,t){var r=e.gen,i=e.schema;e.opts.useDefaults&&(0,o.assignDefaults)(e,t.type),r.block((function(){var r,o=HKe(t.rules);try{for(o.s();!(r=o.n()).done;){var a=r.value;(0,n.shouldUseRule)(i,a)&&S(e,a.keyword,a.definition,t.type)}}catch(e){o.e(e)}finally{o.f()}}))}function k(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function C(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){var n=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(n,'" (strictTypes)'),(0,s.checkStrictMode)(e,t,e.opts.strictTypes)}ZHe.validateFunctionCode=function(t){g(t)&&(m(t),h(t))?function(e){var t=e.schema,n=e.opts,r=e.gen;f(e,(function(){n.$comment&&t.$comment&&b(e),function(e){var t=e.schema,n=e.opts;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,s.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(l.default.vErrors,null),r.let(l.default.errors,0),n.unevaluated&&function(e){var t=e.gen,n=e.validateName;e.evaluated=t.const("evaluated",(0,u._)(vKe||(vKe=YHe(["",".evaluated"])),n)),t.if((0,u._)(hKe||(hKe=YHe(["",".dynamicProps"])),e.evaluated),(function(){return t.assign((0,u._)(gKe||(gKe=YHe(["",".props"])),e.evaluated),(0,u._)(mKe||(mKe=YHe(["undefined"]))))})),t.if((0,u._)(yKe||(yKe=YHe(["",".dynamicItems"])),e.evaluated),(function(){return t.assign((0,u._)(bKe||(bKe=YHe(["",".items"])),e.evaluated),(0,u._)(wKe||(wKe=YHe(["undefined"]))))}))}(e),y(e),function(e){var t=e.gen,n=e.schemaEnv,r=e.validateName,o=e.ValidationError,i=e.opts;n.$async?t.if((0,u._)(SKe||(SKe=YHe([""," === 0"])),l.default.errors),(function(){return t.return(l.default.data)}),(function(){return t.throw((0,u._)(xKe||(xKe=YHe(["new ","(",")"])),o,l.default.vErrors))})):(t.assign((0,u._)(jKe||(jKe=YHe(["",".errors"])),r),l.default.vErrors),i.unevaluated&&function(e){var t=e.gen,n=e.evaluated,r=e.props,o=e.items;r instanceof u.Name&&t.assign((0,u._)(AKe||(AKe=YHe(["",".props"])),n),r);o instanceof u.Name&&t.assign((0,u._)(RKe||(RKe=YHe(["",".items"])),n),o)}(e),t.return((0,u._)(DKe||(DKe=YHe([""," === 0"])),l.default.errors)))}(e)}))}(t):f(t,(function(){return(0,e.topBoolOrEmptySchema)(t)}))};var O=function(){return ll((function e(t,n,r){if(sl(this,e),(0,i.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,s.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",D(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error("".concat(r," value must be ").concat(JSON.stringify(n.schemaType)));("code"in n?n.trackErrors:!1!==n.errors)&&(this.errsCount=t.gen.const("_errs",l.default.errors))}),[{key:"result",value:function(e,t,n){this.failResult((0,u.not)(e),t,n)}},{key:"failResult",value:function(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.failResult((0,u.not)(e),void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail((0,u._)(IKe||(IKe=YHe([""," !== undefined && (",")"])),t,(0,u.or)(this.invalid$data(),e)))}},{key:"error",value:function(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}},{key:"_error",value:function(e,t){(e?d.reportExtraError:d.reportError)(this,this.def.error,t)}},{key:"$dataError",value:function(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?Object.assign(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.nil;this.gen.block((function(){n.check$data(e,r),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.nil;if(this.$data){var n=this.gen,r=this.schemaCode,o=this.schemaType,i=this.def;n.if((0,u.or)((0,u._)(PKe||(PKe=YHe([""," === undefined"])),r),t)),e!==u.nil&&n.assign(e,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,n=this.schemaType,o=this.def,i=this.it;return(0,u.or)(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");var e=Array.isArray(n)?n:[n];return(0,u._)(MKe||(MKe=YHe(["",""])),(0,r.checkDataTypes)(e,t,i.opts.strictNumbers,r.DataType.Wrong))}return u.nil}(),function(){if(o.validateSchema){var n=e.scopeValue("validate$data",{ref:o.validateSchema});return(0,u._)(TKe||(TKe=YHe(["!","(",")"])),n,t)}return u.nil}())}},{key:"subschema",value:function(e,t){var n=(0,a.getSubschema)(this.it,e);(0,a.extendSubschemaData)(n,this.it,e),(0,a.extendSubschemaMode)(n,e);var r=UKe(UKe(UKe({},this.it),n),{},{items:void 0,props:void 0});return v(r,t),r}},{key:"mergeEvaluated",value:function(e,t){var n=this.it,r=this.gen;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=s.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=s.mergeEvaluated.items(r,e.items,n.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var n=this,r=this.it,o=this.gen;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return o.if(t,(function(){return n.mergeEvaluated(e,u.Name)})),!0}}])}();function S(e,t,n,r){var o=new O(e,n,t);"code"in n?n.code(o,r):o.$data&&n.validate?(0,i.funcKeywordCode)(o,n):"macro"in n?(0,i.macroKeywordCode)(o,n):(n.compile||n.validate)&&(0,i.funcKeywordCode)(o,n)}ZHe.KeywordCxt=O;var x=/^\/(?:[^~]|~0|~1)*$/,j=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function D(e,t){var n,r,o=t.dataLevel,i=t.dataNames,a=t.dataPathArr;if(""===e)return l.default.rootData;if("/"===e[0]){if(!x.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));n=e,r=l.default.rootData}else{var c=j.exec(e);if(!c)throw new Error("Invalid JSON-pointer: ".concat(e));var d=+c[1];if("#"===(n=c[2])){if(d>=o)throw new Error(g("property/index",d));return a[o-d]}if(d>o)throw new Error(g("data",d));if(r=i[o-d],!n)return r}var f,p=r,v=HKe(n.split("/"));try{for(v.s();!(f=v.n()).done;){var h=f.value;h&&(r=(0,u._)(NKe||(NKe=YHe(["","",""])),r,(0,u.getProperty)((0,s.unescapeJsonPointer)(h))),p=(0,u._)(BKe||(BKe=YHe([""," && ",""])),p,r))}}catch(e){v.e(e)}finally{v.f()}return p;function g(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(o)}}return ZHe.getData=D,ZHe}NGe.getSchemaRefs=function(e,t){var n=this;if("boolean"==typeof e)return{};var r=this.opts,o=r.schemaId,i=r.uriResolver,a=QGe(e[o]||t),u={"":a},l=JGe(i,a,!1),c={},s=new Set;return WGe(e,{allKeys:!0},(function(e,t,r,i){if(void 0!==i){var a=l+t,p=u[i];"string"==typeof e[o]&&(p=v.call(n,e[o])),h.call(n,e.$anchor),h.call(n,e.$dynamicAnchor),u[t]=p}function v(t){var n=this.opts.uriResolver.resolve;if(t=QGe(p?n(p,t):t),s.has(t))throw f(t);s.add(t);var r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==Ln(r)?d(e,r.schema,t):t!==QGe(a)&&("#"===t[0]?(d(e,c[t],t),c[t]=e):this.refs[t]=a),t}function h(e){if("string"==typeof e){if(!LKe.test(e))throw new Error('invalid anchor "'.concat(e,'"'));v.call(this,"#".concat(e))}}})),c;function d(e,t,n){if(void 0!==t&&!qGe(e,t))throw f(n)}function f(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}};var $Ke,GKe={};function KKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KKe=function(){return!!e})()}function YKe(){if($Ke)return GKe;$Ke=1,Object.defineProperty(GKe,"__esModule",{value:!0});var e=function(e){function t(e){var n;return sl(this,t),n=function(e,t,n){return t=Sd(t),Od(e,KKe()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}(this,t,["validation failed"]),n.errors=e,n.ajv=n.validation=!0,n}return jd(t,e),ll(t)}(Gz(Error));return GKe.default=e,GKe}var JKe={};function XKe(e,t,n){return t=Sd(t),Od(e,ZKe()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function ZKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZKe=function(){return!!e})()}Object.defineProperty(JKe,"__esModule",{value:!0});var QKe=NGe,eYe=function(e){function t(e,n,r,o){var i;return sl(this,t),(i=XKe(this,t,[o||"can't resolve reference ".concat(r," from id ").concat(n)])).missingRef=(0,QKe.resolveUrl)(e,n,r),i.missingSchema=(0,QKe.normalizeId)((0,QKe.getFullPath)(e,i.missingRef)),i}return jd(t,e),ll(t)}(Gz(Error));JKe.default=eYe;var tYe,nYe,rYe={};function oYe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iYe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iYe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function iYe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(rYe,"__esModule",{value:!0}),rYe.resolveSchema=rYe.getCompilingSchema=rYe.resolveRef=rYe.compileSchema=rYe.SchemaEnv=void 0;var aYe=tqe,uYe=YKe(),lYe=lWe,cYe=NGe,sYe=qqe,dYe=WKe(),fYe=ll((function e(t){var n,r;sl(this,e),this.refs={},this.dynamicAnchors={},"object"==Ln(t.schema)&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(n=t.baseId)&&void 0!==n?n:(0,cYe.normalizeId)(null==r?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==r?void 0:r.$async,this.refs={}}));function pYe(e){var t=hYe.call(this,e);if(t)return t;var n,r=(0,cYe.getFullPath)(this.opts.uriResolver,e.root.baseId),o=this.opts.code,i=o.es5,a=o.lines,u=this.opts.ownProperties,l=new aYe.CodeGen(this.scope,{es5:i,lines:a,ownProperties:u});e.$async&&(n=l.scopeValue("Error",{ref:uYe.default,code:(0,aYe._)(tYe||(tYe=YHe(['require("ajv/dist/runtime/validation_error").default'])))}));var c=l.scopeName("validate");e.validateName=c;var s,d={gen:l,allErrors:this.opts.allErrors,data:lYe.default.data,parentData:lYe.default.parentData,parentDataProperty:lYe.default.parentDataProperty,dataNames:[lYe.default.data],dataPathArr:[aYe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:l.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,aYe.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:n,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:aYe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,aYe._)(nYe||(nYe=YHe(['""']))),opts:this.opts,self:this};try{this._compilations.add(e),(0,dYe.validateFunctionCode)(d),l.optimize(this.opts.code.optimize);var f=l.toString();s="".concat(l.scopeRefs(lYe.default.scope),"return ").concat(f),this.opts.code.process&&(s=this.opts.code.process(s,e));var p=new Function("".concat(lYe.default.self),"".concat(lYe.default.scope),s)(this,this.scope.get());if(this.scope.value(c,{ref:p}),p.errors=null,p.schema=e.schema,p.schemaEnv=e,e.$async&&(p.$async=!0),!0===this.opts.code.source&&(p.source={validateName:c,validateCode:f,scopeValues:l._values}),this.opts.unevaluated){var v=d.props,h=d.items;p.evaluated={props:v instanceof aYe.Name?void 0:v,items:h instanceof aYe.Name?void 0:h,dynamicProps:v instanceof aYe.Name,dynamicItems:h instanceof aYe.Name},p.source&&(p.source.evaluated=(0,aYe.stringify)(p.evaluated))}return e.validate=p,e}catch(t){throw delete e.validate,delete e.validateName,s&&this.logger.error("Error compiling schema, function code:",s),t}finally{this._compilations.delete(e)}}function vYe(e){return(0,cYe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:pYe.call(this,e)}function hYe(e){var t,n,r,o=oYe(this._compilations);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(r=e,(n=i).schema===r.schema&&n.root===r.root&&n.baseId===r.baseId)return i}}catch(e){o.e(e)}finally{o.f()}}function gYe(e,t){for(var n;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||mYe.call(this,e,t)}function mYe(e,t){var n=this.opts.uriResolver.parse(t),r=(0,cYe._getFullPath)(this.opts.uriResolver,n),o=(0,cYe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===o)return bYe.call(this,n,e);var i=(0,cYe.normalizeId)(r),a=this.refs[i]||this.schemas[i];if("string"==typeof a){var u=mYe.call(this,e,a);if("object"!==Ln(null==u?void 0:u.schema))return;return bYe.call(this,n,u)}if("object"===Ln(null==a?void 0:a.schema)){if(a.validate||pYe.call(this,a),i===(0,cYe.normalizeId)(t)){var l=a.schema,c=this.opts.schemaId,s=l[c];return s&&(o=(0,cYe.resolveUrl)(this.opts.uriResolver,o,s)),new fYe({schema:l,schemaId:c,root:e,baseId:o})}return bYe.call(this,n,a)}}rYe.SchemaEnv=fYe,rYe.compileSchema=pYe,rYe.resolveRef=function(e,t,n){var r;n=(0,cYe.resolveUrl)(this.opts.uriResolver,t,n);var o=e.refs[n];if(o)return o;var i=gYe.call(this,e,n);if(void 0===i){var a=null===(r=e.localRefs)||void 0===r?void 0:r[n],u=this.opts.schemaId;a&&(i=new fYe({schema:a,schemaId:u,root:e,baseId:t}))}return void 0!==i?e.refs[n]=vYe.call(this,i):void 0},rYe.getCompilingSchema=hYe,rYe.resolveSchema=mYe;var yYe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bYe(e,t){var n,r=t.baseId,o=t.schema,i=t.root;if("/"===(null===(n=e.fragment)||void 0===n?void 0:n[0])){var a,u,l=oYe(e.fragment.slice(1).split("/"));try{for(l.s();!(a=l.n()).done;){var c=a.value;if("boolean"==typeof o)return;var s=o[(0,sYe.unescapeFragment)(c)];if(void 0===s)return;var d="object"===Ln(o=s)&&o[this.opts.schemaId];!yYe.has(c)&&d&&(r=(0,cYe.resolveUrl)(this.opts.uriResolver,r,d))}}catch(e){l.e(e)}finally{l.f()}if("boolean"!=typeof o&&o.$ref&&!(0,sYe.schemaHasRulesButRef)(o,this.RULES)){var f=(0,cYe.resolveUrl)(this.opts.uriResolver,r,o.$ref);u=mYe.call(this,i,f)}var p=this.opts.schemaId;return(u=u||new fYe({schema:o,schemaId:p,root:i,baseId:r})).schema!==u.root.schema?u:void 0}}const wYe={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var _Ye={},kYe={exports:{}};function CYe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return EYe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EYe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function EYe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var OYe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function SYe(e){if(AYe(e,".")<3)return{host:e,isIPV4:!1};var t=Tf(e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/)||[],1)[0];return t?{host:DYe(t,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function xYe(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="",o=!0,i=CYe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(void 0===OYe[a])return;"0"!==a&&!0===o&&(o=!1),o||(r+=a)}}catch(e){i.e(e)}finally{i.f()}return n&&0===r.length&&(r="0"),r}function jYe(e){if(AYe(e,":")<2)return{host:e,isIPV6:!1};var t=function(e){var t=0,n={error:!1,address:"",zone:""},r=[],o=[],i=!1,a=!1,u=!1;function l(){if(o.length){if(!1===i){var e=xYe(o);if(void 0===e)return n.error=!0,!1;r.push(e)}o.length=0}return!0}for(var c=0;c<e.length;c++){var s=e[c];if("["!==s&&"]"!==s)if(":"!==s)if("%"===s){if(!l())break;i=!0}else o.push(s);else{if(!0===a&&(u=!0),!l())break;if(t++,r.push(":"),t>7){n.error=!0;break}c-1>=0&&":"===e[c-1]&&(a=!0)}}return o.length&&(i?n.zone=o.join(""):u?r.push(o.join("")):r.push(xYe(o))),n.address=r.join(""),n}(e);if(t.error)return{host:e,isIPV6:!1};var n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,escapedHost:r,isIPV6:!0}}function DYe(e,t){for(var n="",r=!0,o=e.length,i=0;i<o;i++){var a=e[i];"0"===a&&r?(i+1<=o&&e[i+1]===t||i+1===o)&&(n+=a,r=!1):(r=a===t,n+=a)}return n}function AYe(e,t){for(var n=0,r=0;r<e.length;r++)e[r]===t&&n++;return n}var RYe=/^\.\.?\//,FYe=/^\/\.(?:\/|$)/,IYe=/^\/\.\.(?:\/|$)/,PYe=/^\/?(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\n)*?(?=\/|$)/;var MYe=function(e,t){var n=[];if(void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host){var r=unescape(e.host),o=SYe(r);if(o.isIPV4)r=o.host;else{var i=jYe(o.host);r=!0===i.isIPV6?"[".concat(i.escapedHost,"]"):e.host}n.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0},TYe=function(e,t){var n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},NYe=/^[0-9a-f]{8}\b\x2D[0-9a-f]{4}\b\x2D[0-9a-f]{4}\b\x2D[0-9a-f]{4}\b\x2D[0-9a-f]{12}$/i,BYe=/([0-9a-z\u017F\u212A][\x2D0-9a-z\u017F\u212A]{0,31}):((?:[!\$'-\.0-;=@-Z_a-z\u017F\u212A]|%[0-9a-f]{2})+)/i;function VYe(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function LYe(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function zYe(e){var t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}var UYe={scheme:"http",domainHost:!0,parse:LYe,serialize:zYe},HYe={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=VYe(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(VYe(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var t=Tf(e.resourceName.split("?"),2),n=t[0],r=t[1];e.path=n&&"/"!==n?n:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},qYe={scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;var n=e.path.match(BYe);if(n){var r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];var o="".concat(r,":").concat(t.nid||e.nid),i=$Ye[o];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),o="".concat(n,":").concat(t.nid||r),i=$Ye[o];i&&(e=i.serialize(e,t));var a=e,u=e.nss;return a.path="".concat(r||t.nid,":").concat(u),t.skipEscape=!0,a},skipNormalize:!0},WYe={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&NYe.test(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0},$Ye={http:UYe,https:{scheme:"https",domainHost:UYe.domainHost,parse:LYe,serialize:zYe},ws:HYe,wss:{scheme:"wss",domainHost:HYe.domainHost,parse:HYe.parse,serialize:HYe.serialize},urn:qYe,"urn:uuid":WYe};function GYe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KYe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GYe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GYe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YYe=jYe,JYe=SYe,XYe=function(e){for(var t=[];e.length;)if(e.match(RYe))e=e.replace(RYe,"");else if(e.match(FYe))e=e.replace(FYe,"/");else if(e.match(IYe))e=e.replace(IYe,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(PYe);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")},ZYe=MYe,QYe=TYe,eJe=$Ye;function tJe(e,t,n,r){var o={};return r||(e=iJe(nJe(e,n),n),t=iJe(nJe(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=XYe(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=XYe(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=XYe(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=XYe(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function nJe(e,t){var n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),o=[],i=eJe[(r.scheme||n.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(n,r),void 0!==n.path&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==r.reference&&n.scheme&&(o.push(n.scheme),o.push(":"));var a=ZYe(n,r);if(void 0!==a&&("suffix"!==r.reference&&o.push("//"),o.push(a),n.path&&"/"!==n.path.charAt(0)&&o.push("/")),void 0!==n.path){var u=n.path;r.absolutePath||i&&i.absolutePath||(u=XYe(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),o.push(u)}return void 0!==n.query&&(o.push("?"),o.push(n.query)),void 0!==n.fragment&&(o.push("#"),o.push(n.fragment)),o.join("")}var rJe=Array.from({length:127},(function(e,t){return/(?:[\0- #%\/-:<>-\^\|\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/.test(String.fromCharCode(t))}));var oJe=/^(?:((?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+):)?(?:\/\/((?:((?:[\0-"\$-\.0->A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)@)?(\[(?:[\0-"\$-\.0->@-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+\]|(?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?::([0-9]*))?))?((?:[\0-"\$->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?:\?((?:[\0-"\$-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?(?:#((?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|[\n\r])*))?/;function iJe(e,t){var n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},o=-1!==e.indexOf("%"),i=!1;"suffix"===n.reference&&(e=(n.scheme?n.scheme+":":"")+"//"+e);var a=e.match(oJe);if(a){if(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5]),r.host){var u=JYe(r.host);if(!1===u.isIPV4){var l=YYe(u.host,{isIPV4:!1});r.host=l.host.toLowerCase(),i=l.isIPV6}else r.host=u.host,i=!0}void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");var c=eJe[(n.scheme||r.scheme||"").toLowerCase()];if(!(n.unicodeSupport||c&&c.unicodeSupport)&&r.host&&(n.domainHost||c&&c.domainHost)&&!1===i&&function(e){for(var t=0,n=0,r=e.length;n<r;++n)if((t=e.charCodeAt(n))>126||rJe[t])return!0;return!1}(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII: "+e}(!c||c&&!c.skipNormalize)&&(o&&void 0!==r.scheme&&(r.scheme=unescape(r.scheme)),o&&void 0!==r.userinfo&&(r.userinfo=unescape(r.userinfo)),o&&void 0!==r.host&&(r.host=unescape(r.host)),void 0!==r.path&&r.path.length&&(r.path=escape(unescape(r.path))),void 0!==r.fragment&&r.fragment.length&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),c&&c.parse&&c.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}var aJe={SCHEMES:eJe,normalize:function(e,t){return"string"==typeof e?e=nJe(iJe(e,t),t):"object"===Ln(e)&&(e=iJe(nJe(e,t),t)),e},resolve:function(e,t,n){var r=Object.assign({scheme:"null"},n);return nJe(tJe(iJe(e,r),iJe(t,r),r,!0),KYe(KYe({},r),{},{skipEscape:!0}))},resolveComponents:tJe,equal:function(e,t,n){return"string"==typeof e?(e=unescape(e),e=nJe(QYe(iJe(e,n),!0),KYe(KYe({},n),{},{skipEscape:!0}))):"object"===Ln(e)&&(e=nJe(QYe(e,!0),KYe(KYe({},n),{},{skipEscape:!0}))),"string"==typeof t?(t=unescape(t),t=nJe(QYe(iJe(t,n),!0),KYe(KYe({},n),{},{skipEscape:!0}))):"object"===Ln(t)&&(t=nJe(QYe(t,!0),KYe(KYe({},n),{},{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()},serialize:nJe,parse:iJe};kYe.exports=aJe,kYe.exports.default=aJe,kYe.exports.fastUri=aJe;var uJe=kYe.exports;Object.defineProperty(_Ye,"__esModule",{value:!0});var lJe=uJe;function cJe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sJe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sJe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function sJe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function dJe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fJe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dJe(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dJe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}lJe.code='require("ajv/dist/runtime/uri").default',_Ye.default=lJe,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=WKe();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=tqe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});var r=YKe(),o=JKe,i=VWe,a=rYe,u=tqe,l=NGe,c=BWe,s=qqe,d=wYe,f=_Ye,p=function(e,t){return new RegExp(e,t)};p.code="new RegExp";var v=["removeAdditional","useDefaults","coerceTypes"],h=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};var y=function(){return ll((function e(){var t,n,r,o,a,l,c,s,d,v,y,w,S,x,j,D,A,R,F,I,P,M,T,N,B,V,L,z,U,H,q,W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sl(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,W=this.opts=fJe(fJe({},W),(L=(t=W).strict,z=null===(n=t.code)||void 0===n?void 0:n.optimize,U=!0===z||void 0===z?1:z||0,H=null!==(o=null===(r=t.code)||void 0===r?void 0:r.regExp)&&void 0!==o?o:p,q=null!==(a=t.uriResolver)&&void 0!==a?a:f.default,{strictSchema:null===(c=null!==(l=t.strictSchema)&&void 0!==l?l:L)||void 0===c||c,strictNumbers:null===(d=null!==(s=t.strictNumbers)&&void 0!==s?s:L)||void 0===d||d,strictTypes:null!==(y=null!==(v=t.strictTypes)&&void 0!==v?v:L)&&void 0!==y?y:"log",strictTuples:null!==(S=null!==(w=t.strictTuples)&&void 0!==w?w:L)&&void 0!==S?S:"log",strictRequired:null!==(j=null!==(x=t.strictRequired)&&void 0!==x?x:L)&&void 0!==j&&j,code:t.code?fJe(fJe({},t.code),{},{optimize:U,regExp:H}):{optimize:U,regExp:H},loopRequired:null!==(D=t.loopRequired)&&void 0!==D?D:200,loopEnum:null!==(A=t.loopEnum)&&void 0!==A?A:200,meta:null===(R=t.meta)||void 0===R||R,messages:null===(F=t.messages)||void 0===F||F,inlineRefs:null===(I=t.inlineRefs)||void 0===I||I,schemaId:null!==(P=t.schemaId)&&void 0!==P?P:"$id",addUsedSchema:null===(M=t.addUsedSchema)||void 0===M||M,validateSchema:null===(T=t.validateSchema)||void 0===T||T,validateFormats:null===(N=t.validateFormats)||void 0===N||N,unicodeRegExp:null===(B=t.unicodeRegExp)||void 0===B||B,int32range:null===(V=t.int32range)||void 0===V||V,uriResolver:q}));var $=this.opts.code,G=$.es5,K=$.lines;this.scope=new u.ValueScope({scope:{},prefixes:h,es5:G,lines:K}),this.logger=function(e){if(!1===e)return O;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(W.logger);var Y=W.validateFormats;W.validateFormats=!1,this.RULES=(0,i.getRules)(),b.call(this,g,W,"NOT SUPPORTED"),b.call(this,m,W,"DEPRECATED","warn"),this._metaOpts=E.call(this),W.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),W.keywords&&C.call(this,W.keywords),"object"==Ln(W.meta)&&this.addMetaSchema(W.meta),_.call(this),W.validateFormats=Y}),[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data,n=e.meta,r=e.schemaId,o=d;"id"===r&&((o=fJe({},d)).id=o.$id,delete o.$id),n&&t&&this.addMetaSchema(o,o[r],!1)}},{key:"defaultMeta",value:function(){var e=this.opts,t=e.meta,n=e.schemaId;return this.opts.defaultMeta="object"==Ln(t)?t[n]||t:void 0}},{key:"validate",value:function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'.concat(e,'"'))}else n=this.compile(e);var r=n(t);return"$async"in n||(this.errors=n.errors),r}},{key:"compile",value:function(e,t){var n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}},{key:"compileAsync",value:function(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var n=this.opts.loadSchema;return r.call(this,e,t);function r(e,t){return i.apply(this,arguments)}function i(){return(i=rl(ml.mark((function e(t,n){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call(this,t.$schema);case 2:return r=this._addSchema(t,n),e.abrupt("return",r.validate||l.call(this,r));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function a(e){return u.apply(this,arguments)}function u(){return(u=rl(ml.mark((function e(t){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.getSchema(t)){e.next=3;break}return e.next=3,r.call(this,{$ref:t},!0);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return(c=rl(ml.mark((function e(t){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof o.default){e.next=8;break}throw e.t0;case 8:return s.call(this,e.t0),e.next=11,d.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",l.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])})))).apply(this,arguments)}function s(e){var t=e.missingSchema,n=e.missingRef;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(n," cannot be resolved"))}function d(e){return f.apply(this,arguments)}function f(){return(f=rl(ml.mark((function e(n){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.call(this,n);case 2:if(r=e.sent,this.refs[n]){e.next=6;break}return e.next=6,a.call(this,r.$schema);case 6:this.refs[n]||this.addSchema(r,n,t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return(v=rl(ml.mark((function e(t){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._loading[t])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this._loading[t]=n(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])})))).apply(this,arguments)}}},{key:"addSchema",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var i,a=cJe(e);try{for(a.s();!(i=a.n()).done;){var u=i.value;this.addSchema(u,void 0,n,o)}}catch(e){a.e(e)}finally{a.f()}return this}if("object"===Ln(e)){var c=this.opts.schemaId;if(void 0!==(r=e[c])&&"string"!=typeof r)throw new Error("schema ".concat(c," must be string"))}return t=(0,l.normalizeId)(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,o,!0),this}},{key:"addMetaSchema",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,n),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var n;if(void 0!==(n=e.$schema)&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var o="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(o);this.logger.error(o)}return r}},{key:"getSchema",value:function(e){for(var t;"string"==typeof(t=w.call(this,e));)e=t;if(void 0===t){var n=this.opts.schemaId,r=new a.SchemaEnv({schema:{},schemaId:n});if(!(t=a.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(Ln(e)){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=w.call(this,e);return"object"==Ln(t)&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var n=e;this._cache.delete(n);var r=e[this.opts.schemaId];return r&&(r=(0,l.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t,n=cJe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addKeyword(r)}}catch(e){n.e(e)}finally{n.f()}return this}},{key:"addKeyword",value:function(e,t){var n,r=this;if("string"==typeof e)n=e,"object"==Ln(t)&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=Ln(e)||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,n,t),!t)return(0,s.eachItem)(n,(function(e){return j.call(r,e)})),this;A.call(this,t);var o=fJe(fJe({},t),{},{type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)});return(0,s.eachItem)(n,0===o.type.length?function(e){return j.call(r,e,o)}:function(e){return o.type.forEach((function(t){return j.call(r,e,o,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==Ln(t)?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var n,r=cJe(t.rules);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=o.rules.findIndex((function(t){return t.keyword===e}));i>=0&&o.rules.splice(i,1)}}catch(e){r.e(e)}finally{r.f()}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.separator,r=void 0===n?", ":n,o=t.dataVar,i=void 0===o?"data":o;return e&&0!==e.length?e.map((function(e){return"".concat(i).concat(e.instancePath," ").concat(e.message)})).reduce((function(e,t){return e+r+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var n=this.RULES.all;e=JSON.parse(JSON.stringify(e));var r,o=cJe(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value.split("/").slice(1),u=e,l=cJe(a);try{for(l.s();!(i=l.n()).done;){u=u[i.value]}}catch(e){l.e(e)}finally{l.f()}for(var c in n){var s=n[c];if("object"==Ln(s)){var d=s.definition.$data,f=u[c];d&&f&&(u[c]=F(f))}}}}catch(e){o.e(e)}finally{o.f()}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var n in e){var r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}},{key:"_addSchema",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema,u=this.opts.schemaId;if("object"==Ln(e))r=e[u];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var c=this._cache.get(e);if(void 0!==c)return c;n=(0,l.normalizeId)(r||n);var s=l.getSchemaRefs.call(this,e,n);return c=new a.SchemaEnv({schema:e,schemaId:u,meta:t,baseId:n,localRefs:s}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),o&&this.validateSchema(e,!0),c}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}])}();function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var o in e){var i=o;i in t&&this.logger[r]("".concat(n,": option ").concat(o,". ").concat(e[i]))}}function w(e){return e=(0,l.normalizeId)(e),this.schemas[e]||this.refs[e]}function _(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function k(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function C(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function E(){var e,t=fJe({},this.opts),n=cJe(v);try{for(n.s();!(e=n.n()).done;){delete t[e.value]}}catch(e){n.e(e)}finally{n.f()}return t}y.ValidationError=r.default,y.MissingRefError=o.default,e.default=y;var O={log:function(){},warn:function(){},error:function(){}};var S=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){var n=this.RULES;if((0,s.eachItem)(e,(function(e){if(n.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!S.test(e))throw new Error("Keyword ".concat(e," has invalid name"))})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function j(e,t,n){var r,o=this,i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');var a=this.RULES,u=i?a.post:a.rules.find((function(e){return e.type===n}));if(u||(u={type:n,rules:[]},a.rules.push(u)),a.keywords[e]=!0,t){var l={keyword:e,definition:fJe(fJe({},t),{},{type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)})};t.before?D.call(this,u,l,t.before):u.rules.push(l),a.all[e]=l,null===(r=t.implements)||void 0===r||r.forEach((function(e){return o.addKeyword(e)}))}}function D(e,t,n){var r=e.rules.findIndex((function(e){return e.keyword===n}));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(n," is not defined")))}function A(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=F(t)),e.validateSchema=this.compile(t,!0))}var R={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function F(e){return{anyOf:[e,R]}}}(KHe);var pJe={},vJe={},hJe={};Object.defineProperty(hJe,"__esModule",{value:!0});var gJe={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hJe.default=gJe;var mJe,yJe,bJe,wJe,_Je,kJe,CJe,EJe,OJe,SJe={};Object.defineProperty(SJe,"__esModule",{value:!0}),SJe.callRef=SJe.getValidate=void 0;var xJe=JKe,jJe=lGe,DJe=tqe,AJe=lWe,RJe=rYe,FJe=qqe,IJe={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,n=e.schema,r=e.it,o=r.baseId,i=r.schemaEnv,a=r.validateName,u=r.opts,l=r.self,c=i.root;if(("#"===n||"#/"===n)&&o===c.baseId)return function(){if(i===c)return MJe(e,a,i,i.$async);var n=t.scopeValue("root",{ref:c});return MJe(e,(0,DJe._)(mJe||(mJe=YHe(["",".validate"])),n),c,c.$async)}();var s,d,f=RJe.resolveRef.call(l,c,o,n);if(void 0===f)throw new xJe.default(r.opts.uriResolver,o,n);return f instanceof RJe.SchemaEnv?(d=PJe(e,s=f),void MJe(e,d,s,s.$async)):function(r){var o=t.scopeValue("schema",!0===u.code.source?{ref:r,code:(0,DJe.stringify)(r)}:{ref:r}),i=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:DJe.nil,topSchemaRef:o,errSchemaPath:n},i);e.mergeEvaluated(a),e.ok(i)}(f)}};function PJe(e,t){var n=e.gen;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,DJe._)(yJe||(yJe=YHe(["",".validate"])),n.scopeValue("wrapper",{ref:t}))}function MJe(e,t,n,r){var o=e.gen,i=e.it,a=i.allErrors,u=i.schemaEnv,l=i.opts.passContext?AJe.default.this:DJe.nil;function c(e){var t=(0,DJe._)(_Je||(_Je=YHe(["",".errors"])),e);o.assign(AJe.default.vErrors,(0,DJe._)(kJe||(kJe=YHe([""," === null ? "," : ",".concat(",")"])),AJe.default.vErrors,t,AJe.default.vErrors,t)),o.assign(AJe.default.errors,(0,DJe._)(CJe||(CJe=YHe(["",".length"])),AJe.default.vErrors))}function s(e){var t;if(i.opts.unevaluated){var r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==i.props)if(r&&!r.dynamicProps)void 0!==r.props&&(i.props=FJe.mergeEvaluated.props(o,r.props,i.props));else{var a=o.var("props",(0,DJe._)(EJe||(EJe=YHe(["",".evaluated.props"])),e));i.props=FJe.mergeEvaluated.props(o,a,i.props,DJe.Name)}if(!0!==i.items)if(r&&!r.dynamicItems)void 0!==r.items&&(i.items=FJe.mergeEvaluated.items(o,r.items,i.items));else{var u=o.var("items",(0,DJe._)(OJe||(OJe=YHe(["",".evaluated.items"])),e));i.items=FJe.mergeEvaluated.items(o,u,i.items,DJe.Name)}}}r?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");var n=o.let("valid");o.try((function(){o.code((0,DJe._)(bJe||(bJe=YHe(["await ",""])),(0,jJe.callValidateCode)(e,t,l))),s(t),a||o.assign(n,!0)}),(function(e){o.if((0,DJe._)(wJe||(wJe=YHe(["!("," instanceof ",")"])),e,i.ValidationError),(function(){return o.throw(e)})),c(e),a||o.assign(n,!1)})),e.ok(n)}():e.result((0,jJe.callValidateCode)(e,t,l),(function(){return s(t)}),(function(){return c(t)}))}SJe.getValidate=PJe,SJe.callRef=MJe,SJe.default=IJe,Object.defineProperty(vJe,"__esModule",{value:!0});var TJe=SJe,NJe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",hJe.default,TJe.default];vJe.default=NJe;var BJe,VJe,LJe,zJe={},UJe={};Object.defineProperty(UJe,"__esModule",{value:!0});var HJe=tqe,qJe=HJe.operators,WJe={maximum:{okStr:"<=",ok:qJe.LTE,fail:qJe.GT},minimum:{okStr:">=",ok:qJe.GTE,fail:qJe.LT},exclusiveMaximum:{okStr:"<",ok:qJe.LT,fail:qJe.GTE},exclusiveMinimum:{okStr:">",ok:qJe.GT,fail:qJe.LTE}},$Je={message:function(e){var t=e.keyword,n=e.schemaCode;return(0,HJe.str)(BJe||(BJe=YHe(["must be "," ",""])),WJe[t].okStr,n)},params:function(e){var t=e.keyword,n=e.schemaCode;return(0,HJe._)(VJe||(VJe=YHe(["{comparison: ",", limit: ","}"])),WJe[t].okStr,n)}},GJe={keyword:Object.keys(WJe),type:"number",schemaType:"number",$data:!0,error:$Je,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode;e.fail$data((0,HJe._)(LJe||(LJe=YHe([""," "," "," || isNaN(",")"])),n,WJe[t].fail,r,n))}};UJe.default=GJe;var KJe,YJe,JJe,XJe,ZJe,QJe={};Object.defineProperty(QJe,"__esModule",{value:!0});var eXe=tqe,tXe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,eXe.str)(KJe||(KJe=YHe(["must be multiple of ",""])),t)},params:function(e){var t=e.schemaCode;return(0,eXe._)(YJe||(YJe=YHe(["{multipleOf: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.schemaCode,o=e.it.opts.multipleOfPrecision,i=t.let("res"),a=o?(0,eXe._)(JJe||(JJe=YHe(["Math.abs(Math.round(",") - ",") > 1e-",""])),i,i,o):(0,eXe._)(XJe||(XJe=YHe([""," !== parseInt(",")"])),i,i);e.fail$data((0,eXe._)(ZJe||(ZJe=YHe(["("," === 0 || ("," = ","/",", ","))"])),r,i,n,r,a))}};QJe.default=tXe;var nXe,rXe,oXe,iXe,aXe,uXe={},lXe={};function cXe(e){for(var t,n=e.length,r=0,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}Object.defineProperty(lXe,"__esModule",{value:!0}),lXe.default=cXe,cXe.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(uXe,"__esModule",{value:!0});var sXe=tqe,dXe=qqe,fXe=lXe,pXe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,r="maxLength"===t?"more":"fewer";return(0,sXe.str)(nXe||(nXe=YHe(["must NOT have "," than "," characters"])),r,n)},params:function(e){var t=e.schemaCode;return(0,sXe._)(rXe||(rXe=YHe(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,o=e.it,i="maxLength"===t?sXe.operators.GT:sXe.operators.LT,a=!1===o.opts.unicode?(0,sXe._)(oXe||(oXe=YHe(["",".length"])),n):(0,sXe._)(iXe||(iXe=YHe(["","(",")"])),(0,dXe.useFunc)(e.gen,fXe.default),n);e.fail$data((0,sXe._)(aXe||(aXe=YHe([""," "," ",""])),a,i,r))}};uXe.default=pXe;var vXe,hXe,gXe,mXe,yXe={};Object.defineProperty(yXe,"__esModule",{value:!0});var bXe=lGe,wXe=tqe,_Xe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,wXe.str)(vXe||(vXe=YHe(['must match pattern "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,wXe._)(hXe||(hXe=YHe(["{pattern: ","}"])),t)}},code:function(e){var t=e.data,n=e.$data,r=e.schema,o=e.schemaCode,i=e.it.opts.unicodeRegExp?"u":"",a=n?(0,wXe._)(gXe||(gXe=YHe(["(new RegExp(",", ","))"])),o,i):(0,bXe.usePattern)(e,r);e.fail$data((0,wXe._)(mXe||(mXe=YHe(["!",".test(",")"])),a,t))}};yXe.default=_Xe;var kXe,CXe,EXe,OXe={};Object.defineProperty(OXe,"__esModule",{value:!0});var SXe=tqe,xXe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,r="maxProperties"===t?"more":"fewer";return(0,SXe.str)(kXe||(kXe=YHe(["must NOT have "," than "," properties"])),r,n)},params:function(e){var t=e.schemaCode;return(0,SXe._)(CXe||(CXe=YHe(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,o="maxProperties"===t?SXe.operators.GT:SXe.operators.LT;e.fail$data((0,SXe._)(EXe||(EXe=YHe(["Object.keys(",").length "," ",""])),n,o,r))}};OXe.default=xXe;var jXe,DXe,AXe={};function RXe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FXe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FXe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function FXe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(AXe,"__esModule",{value:!0});var IXe=lGe,PXe=tqe,MXe=qqe,TXe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:function(e){var t=e.params.missingProperty;return(0,PXe.str)(jXe||(jXe=YHe(["must have required property '","'"])),t)},params:function(e){var t=e.params.missingProperty;return(0,PXe._)(DXe||(DXe=YHe(["{missingProperty: ","}"])),t)}},code:function(e){var t=e.gen,n=e.schema,r=e.schemaCode,o=e.data,i=e.$data,a=e.it,u=a.opts;if(i||0!==n.length){var l=n.length>=u.loopRequired;if(a.allErrors?function(){if(l||i)e.block$data(PXe.nil,g);else{var t,r=RXe(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;(0,IXe.checkReportMissingProp)(e,o)}}catch(e){r.e(e)}finally{r.f()}}}():function(){var a=t.let("missing");if(l||i){var c=t.let("valid",!0);e.block$data(c,(function(){return function(n,i){e.setParams({missingProperty:n}),t.forOf(n,r,(function(){t.assign(i,(0,IXe.propertyInData)(t,o,n,u.ownProperties)),t.if((0,PXe.not)(i),(function(){e.error(),t.break()}))}),PXe.nil)}(a,c)})),e.ok(c)}else t.if((0,IXe.checkMissingProp)(e,n,a)),(0,IXe.reportMissingProp)(e,a),t.else()}(),u.strictRequired){var c,s=e.parentSchema.properties,d=e.it.definedProperties,f=RXe(n);try{for(f.s();!(c=f.n()).done;){var p=c.value;if(void 0===(null==s?void 0:s[p])&&!d.has(p)){var v=a.schemaEnv.baseId+a.errSchemaPath,h='required property "'.concat(p,'" is not defined at "').concat(v,'" (strictRequired)');(0,MXe.checkStrictMode)(a,h,a.opts.strictRequired)}}}catch(e){f.e(e)}finally{f.f()}}}function g(){t.forOf("prop",r,(function(n){e.setParams({missingProperty:n}),t.if((0,IXe.noPropertyInData)(t,o,n,u.ownProperties),(function(){return e.error()}))}))}}};AXe.default=TXe;var NXe,BXe,VXe,LXe={};Object.defineProperty(LXe,"__esModule",{value:!0});var zXe=tqe,UXe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,n=e.schemaCode,r="maxItems"===t?"more":"fewer";return(0,zXe.str)(NXe||(NXe=YHe(["must NOT have "," than "," items"])),r,n)},params:function(e){var t=e.schemaCode;return(0,zXe._)(BXe||(BXe=YHe(["{limit: ","}"])),t)}},code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,o="maxItems"===t?zXe.operators.GT:zXe.operators.LT;e.fail$data((0,zXe._)(VXe||(VXe=YHe(["",".length "," ",""])),n,o,r))}};LXe.default=UXe;var HXe={},qXe={};Object.defineProperty(qXe,"__esModule",{value:!0});var WXe,$Xe,GXe,KXe,YXe,JXe,XXe,ZXe,QXe,eZe,tZe,nZe,rZe,oZe,iZe,aZe,uZe,lZe=BGe;lZe.code='require("ajv/dist/runtime/equal").default',qXe.default=lZe,Object.defineProperty(HXe,"__esModule",{value:!0});var cZe=BWe,sZe=tqe,dZe=qqe,fZe=qXe,pZe={message:function(e){var t=e.params,n=t.i,r=t.j;return(0,sZe.str)(WXe||(WXe=YHe(["must NOT have duplicate items (items ## "," and "," are identical)"])),r,n)},params:function(e){var t=e.params,n=t.i,r=t.j;return(0,sZe._)($Xe||($Xe=YHe(["{i: ",", j: ","}"])),n,r)}},vZe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:pZe,code:function(e){var t=e.gen,n=e.data,r=e.$data,o=e.schema,i=e.parentSchema,a=e.schemaCode,u=e.it;if(r||o){var l=t.let("valid"),c=i.items?(0,cZe.getSchemaTypes)(i.items):[];e.block$data(l,(function(){var r=t.let("i",(0,sZe._)(KXe||(KXe=YHe(["",".length"])),n)),o=t.let("j");e.setParams({i:r,j:o}),t.assign(l,!0),t.if((0,sZe._)(YXe||(YXe=YHe([""," > 1"])),r),(function(){return(c.length>0&&!c.some((function(e){return"object"===e||"array"===e}))?s:d)(r,o)}))}),(0,sZe._)(GXe||(GXe=YHe([""," === false"])),a)),e.ok(l)}function s(r,o){var i=t.name("item"),a=(0,cZe.checkDataTypes)(c,i,u.opts.strictNumbers,cZe.DataType.Wrong),s=t.const("indices",(0,sZe._)(JXe||(JXe=YHe(["{}"]))));t.for((0,sZe._)(XXe||(XXe=YHe([";","--;"])),r),(function(){t.let(i,(0,sZe._)(ZXe||(ZXe=YHe(["","[","]"])),n,r)),t.if(a,(0,sZe._)(QXe||(QXe=YHe(["continue"])))),c.length>1&&t.if((0,sZe._)(eZe||(eZe=YHe(["typeof ",' == "string"'])),i),(0,sZe._)(tZe||(tZe=YHe(["",' += "_"'])),i)),t.if((0,sZe._)(nZe||(nZe=YHe(["typeof ","[",'] == "number"'])),s,i),(function(){t.assign(o,(0,sZe._)(rZe||(rZe=YHe(["","[","]"])),s,i)),e.error(),t.assign(l,!1).break()})).code((0,sZe._)(oZe||(oZe=YHe(["","[","] = ",""])),s,i,r))}))}function d(r,o){var i=(0,dZe.useFunc)(t,fZe.default),a=t.name("outer");t.label(a).for((0,sZe._)(iZe||(iZe=YHe([";","--;"])),r),(function(){return t.for((0,sZe._)(aZe||(aZe=YHe([""," = ","; ","--;"])),o,r,o),(function(){return t.if((0,sZe._)(uZe||(uZe=YHe(["","(","[","], ","[","])"])),i,n,r,n,o),(function(){e.error(),t.assign(l,!1).break(a)}))}))}))}}};HXe.default=vZe;var hZe,gZe,mZe,yZe={};Object.defineProperty(yZe,"__esModule",{value:!0});var bZe=tqe,wZe=qqe,_Ze=qXe,kZe={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:function(e){var t=e.schemaCode;return(0,bZe._)(hZe||(hZe=YHe(["{allowedValue: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.$data,o=e.schemaCode,i=e.schema;r||i&&"object"==Ln(i)?e.fail$data((0,bZe._)(gZe||(gZe=YHe(["!","(",", ",")"])),(0,wZe.useFunc)(t,_Ze.default),n,o)):e.fail((0,bZe._)(mZe||(mZe=YHe([""," !== ",""])),i,n))}};yZe.default=kZe;var CZe,EZe,OZe,SZe,xZe={};Object.defineProperty(xZe,"__esModule",{value:!0});var jZe=tqe,DZe=qqe,AZe=qXe,RZe={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return(0,jZe._)(CZe||(CZe=YHe(["{allowedValues: ","}"])),t)}},code:function(e){var t=e.gen,n=e.data,r=e.$data,o=e.schema,i=e.schemaCode,a=e.it;if(!r&&0===o.length)throw new Error("enum must have non-empty array");var u,l,c=o.length>=a.opts.loopEnum,s=function(){return null!=u?u:u=(0,DZe.useFunc)(t,AZe.default)};if(c||r)l=t.let("valid"),e.block$data(l,(function(){t.assign(l,!1),t.forOf("v",i,(function(e){return t.if((0,jZe._)(EZe||(EZe=YHe(["","(",", ",")"])),s(),n,e),(function(){return t.assign(l,!0).break()}))}))}));else{if(!Array.isArray(o))throw new Error("ajv implementation error");var d=t.const("vSchema",i);l=jZe.or.apply(void 0,tl(o.map((function(e,t){return function(e,t){var r=o[t];return"object"===Ln(r)&&null!==r?(0,jZe._)(OZe||(OZe=YHe(["","(",", ","[","])"])),s(),n,e,t):(0,jZe._)(SZe||(SZe=YHe([""," === ",""])),n,r)}(d,t)}))))}e.pass(l)}};xZe.default=RZe,Object.defineProperty(zJe,"__esModule",{value:!0});var FZe=QJe,IZe=uXe,PZe=yXe,MZe=OXe,TZe=AXe,NZe=LXe,BZe=HXe,VZe=yZe,LZe=xZe,zZe=[UJe.default,FZe.default,IZe.default,PZe.default,MZe.default,TZe.default,NZe.default,BZe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},VZe.default,LZe.default];zJe.default=zZe;var UZe,HZe,qZe,WZe,$Ze,GZe={},KZe={};Object.defineProperty(KZe,"__esModule",{value:!0}),KZe.validateAdditionalItems=void 0;var YZe=tqe,JZe=qqe,XZe={message:function(e){var t=e.params.len;return(0,YZe.str)(UZe||(UZe=YHe(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,YZe._)(HZe||(HZe=YHe(["{limit: ","}"])),t)}},ZZe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:XZe,code:function(e){var t=e.parentSchema,n=e.it,r=t.items;Array.isArray(r)?QZe(e,r):(0,JZe.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function QZe(e,t){var n=e.gen,r=e.schema,o=e.data,i=e.keyword,a=e.it;a.items=!0;var u=n.const("len",(0,YZe._)(qZe||(qZe=YHe(["",".length"])),o));if(!1===r)e.setParams({len:t.length}),e.pass((0,YZe._)(WZe||(WZe=YHe([""," <= ",""])),u,t.length));else if("object"==Ln(r)&&!(0,JZe.alwaysValidSchema)(a,r)){var l=n.var("valid",(0,YZe._)($Ze||($Ze=YHe([""," <= ",""])),u,t.length));n.if((0,YZe.not)(l),(function(){return r=l,void n.forRange("i",t.length,u,(function(t){e.subschema({keyword:i,dataProp:t,dataPropType:JZe.Type.Num},r),a.allErrors||n.if((0,YZe.not)(r),(function(){return n.break()}))}));var r})),e.ok(l)}}KZe.validateAdditionalItems=QZe,KZe.default=ZZe;var eQe,tQe,nQe={},rQe={};Object.defineProperty(rQe,"__esModule",{value:!0}),rQe.validateTuple=void 0;var oQe=tqe,iQe=qqe,aQe=lGe,uQe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t=e.schema,n=e.it;if(Array.isArray(t))return lQe(e,"additionalItems",t);n.items=!0,(0,iQe.alwaysValidSchema)(n,t)||e.ok((0,aQe.validateArray)(e))}};function lQe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema,r=e.gen,o=e.parentSchema,i=e.data,a=e.keyword,u=e.it;!function(e){var r=u.opts,o=u.errSchemaPath,i=n.length,l=i===e.minItems&&(i===e.maxItems||!1===e[t]);if(r.strictTuples&&!l){var c='"'.concat(a,'" is ').concat(i,"-tuple, but minItems or maxItems/").concat(t,' are not specified or different at path "').concat(o,'"');(0,iQe.checkStrictMode)(u,c,r.strictTuples)}}(o),u.opts.unevaluated&&n.length&&!0!==u.items&&(u.items=iQe.mergeEvaluated.items(r,n.length,u.items));var l=r.name("valid"),c=r.const("len",(0,oQe._)(eQe||(eQe=YHe(["",".length"])),i));n.forEach((function(t,n){(0,iQe.alwaysValidSchema)(u,t)||(r.if((0,oQe._)(tQe||(tQe=YHe([""," > ",""])),c,n),(function(){return e.subschema({keyword:a,schemaProp:n,dataProp:n},l)})),e.ok(l))}))}rQe.validateTuple=lQe,rQe.default=uQe,Object.defineProperty(nQe,"__esModule",{value:!0});var cQe=rQe,sQe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function(e){return(0,cQe.validateTuple)(e,"items")}};nQe.default=sQe;var dQe,fQe,pQe={};Object.defineProperty(pQe,"__esModule",{value:!0});var vQe=tqe,hQe=qqe,gQe=lGe,mQe=KZe,yQe={message:function(e){var t=e.params.len;return(0,vQe.str)(dQe||(dQe=YHe(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,vQe._)(fQe||(fQe=YHe(["{limit: ","}"])),t)}},bQe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:yQe,code:function(e){var t=e.schema,n=e.parentSchema,r=e.it,o=n.prefixItems;r.items=!0,(0,hQe.alwaysValidSchema)(r,t)||(o?(0,mQe.validateAdditionalItems)(e,o):e.ok((0,gQe.validateArray)(e)))}};pQe.default=bQe;var wQe,_Qe,kQe,CQe,EQe,OQe,SQe,xQe,jQe,DQe,AQe,RQe,FQe={};Object.defineProperty(FQe,"__esModule",{value:!0});var IQe=tqe,PQe=qqe,MQe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:function(e){var t=e.params,n=t.min,r=t.max;return void 0===r?(0,IQe.str)(wQe||(wQe=YHe(["must contain at least "," valid item(s)"])),n):(0,IQe.str)(_Qe||(_Qe=YHe(["must contain at least "," and no more than "," valid item(s)"])),n,r)},params:function(e){var t=e.params,n=t.min,r=t.max;return void 0===r?(0,IQe._)(kQe||(kQe=YHe(["{minContains: ","}"])),n):(0,IQe._)(CQe||(CQe=YHe(["{minContains: ",", maxContains: ","}"])),n,r)}},code:function(e){var t,n,r=e.gen,o=e.schema,i=e.parentSchema,a=e.data,u=e.it,l=i.minContains,c=i.maxContains;u.opts.next?(t=void 0===l?1:l,n=c):t=1;var s=r.const("len",(0,IQe._)(EQe||(EQe=YHe(["",".length"])),a));if(e.setParams({min:t,max:n}),void 0!==n||0!==t){if(void 0!==n&&t>n)return(0,PQe.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,PQe.alwaysValidSchema)(u,o)){var d=(0,IQe._)(OQe||(OQe=YHe([""," >= ",""])),s,t);return void 0!==n&&(d=(0,IQe._)(SQe||(SQe=YHe([""," && "," <= ",""])),d,s,n)),void e.pass(d)}u.items=!0;var f=r.name("valid");void 0===n&&1===t?v(f,(function(){return r.if(f,(function(){return r.break()}))})):0===t?(r.let(f,!0),void 0!==n&&r.if((0,IQe._)(xQe||(xQe=YHe(["",".length > 0"])),a),p)):(r.let(f,!1),p()),e.result(f,(function(){return e.reset()}))}else(0,PQe.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function p(){var e=r.name("_valid"),o=r.let("count",0);v(e,(function(){return r.if(e,(function(){return function(e){r.code((0,IQe._)(jQe||(jQe=YHe(["","++"])),e)),void 0===n?r.if((0,IQe._)(DQe||(DQe=YHe([""," >= ",""])),e,t),(function(){return r.assign(f,!0).break()})):(r.if((0,IQe._)(AQe||(AQe=YHe([""," > ",""])),e,n),(function(){return r.assign(f,!1).break()})),1===t?r.assign(f,!0):r.if((0,IQe._)(RQe||(RQe=YHe([""," >= ",""])),e,t),(function(){return r.assign(f,!0)})))}(o)}))}))}function v(t,n){r.forRange("i",0,s,(function(r){e.subschema({keyword:"contains",dataProp:r,dataPropType:PQe.Type.Num,compositeRule:!0},t),n()}))}}};FQe.default=MQe;var TQe,NQe,BQe,VQe={};function LQe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zQe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zQe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function zQe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=tqe,n=qqe,r=lGe;e.error={message:function(e){var n=e.params,r=n.property,o=n.depsCount,i=n.deps,a=1===o?"property":"properties";return(0,t.str)(TQe||(TQe=YHe(["must have "," "," when property "," is present"])),a,i,r)},params:function(e){var n=e.params,r=n.property,o=n.depsCount,i=n.deps,a=n.missingProperty;return(0,t._)(NQe||(NQe=YHe(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),r,a,o,i)}};var o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code:function(e){var t=Tf(function(e){var t=e.schema,n={},r={};for(var o in t){if("__proto__"!==o)(Array.isArray(t[o])?n:r)[o]=t[o]}return[n,r]}(e),2),n=t[0],r=t[1];i(e,n),a(e,r)}};function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,o=e.gen,i=e.data,a=e.it;if(0!==Object.keys(n).length){var u=o.let("missing"),l=function(){var l=n[c];if(0===l.length)return 1;var s=(0,r.propertyInData)(o,i,c,a.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),a.allErrors?o.if(s,(function(){var t,n=LQe(l);try{for(n.s();!(t=n.n()).done;){var o=t.value;(0,r.checkReportMissingProp)(e,o)}}catch(e){n.e(e)}finally{n.f()}})):(o.if((0,t._)(BQe||(BQe=YHe([""," && (",")"])),s,(0,r.checkMissingProp)(e,l,u))),(0,r.reportMissingProp)(e,u),o.else())};for(var c in n)l()}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,o=e.gen,i=e.data,a=e.keyword,u=e.it,l=o.name("valid"),c=function(c){if((0,n.alwaysValidSchema)(u,t[c]))return 1;o.if((0,r.propertyInData)(o,i,c,u.opts.ownProperties),(function(){var t=e.subschema({keyword:a,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(function(){return o.var(l,!0)})),e.ok(l)};for(var s in t)c(s)}e.validatePropertyDeps=i,e.validateSchemaDeps=a,e.default=o}(VQe);var UQe,HQe={};Object.defineProperty(HQe,"__esModule",{value:!0});var qQe=tqe,WQe=qqe,$Qe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:function(e){var t=e.params;return(0,qQe._)(UQe||(UQe=YHe(["{propertyName: ","}"])),t.propertyName)}},code:function(e){var t=e.gen,n=e.schema,r=e.data,o=e.it;if(!(0,WQe.alwaysValidSchema)(o,n)){var i=t.name("valid");t.forIn("key",r,(function(n){e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},i),t.if((0,qQe.not)(i),(function(){e.error(!0),o.allErrors||t.break()}))})),e.ok(i)}}};HQe.default=$Qe;var GQe,KQe,YQe,JQe,XQe,ZQe={};Object.defineProperty(ZQe,"__esModule",{value:!0});var QQe=lGe,e0e=tqe,t0e=lWe,n0e=qqe,r0e={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:function(e){var t=e.params;return(0,e0e._)(GQe||(GQe=YHe(["{additionalProperty: ","}"])),t.additionalProperty)}},code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,o=e.data,i=e.errsCount,a=e.it;if(!i)throw new Error("ajv implementation error");var u=a.allErrors,l=a.opts;if(a.props=!0,"all"===l.removeAdditional||!(0,n0e.alwaysValidSchema)(a,n)){var c=(0,QQe.allSchemaProperties)(r.properties),s=(0,QQe.allSchemaProperties)(r.patternProperties);t.forIn("key",o,(function(n){c.length||s.length?t.if(function(n){var o;if(c.length>8){var i=(0,n0e.schemaRefOrVal)(a,r.properties,"properties");o=(0,QQe.isOwnProperty)(t,i,n)}else o=c.length?e0e.or.apply(void 0,tl(c.map((function(e){return(0,e0e._)(YQe||(YQe=YHe([""," === ",""])),n,e)})))):e0e.nil;return s.length&&(o=e0e.or.apply(void 0,[o].concat(tl(s.map((function(t){return(0,e0e._)(JQe||(JQe=YHe(["",".test(",")"])),(0,QQe.usePattern)(e,t),n)})))))),(0,e0e.not)(o)}(n),(function(){return f(n)})):f(n)})),e.ok((0,e0e._)(KQe||(KQe=YHe([""," === ",""])),i,t0e.default.errors))}function d(e){t.code((0,e0e._)(XQe||(XQe=YHe(["delete ","[","]"])),o,e))}function f(r){if("all"===l.removeAdditional||l.removeAdditional&&!1===n)d(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(u||t.break());if("object"==Ln(n)&&!(0,n0e.alwaysValidSchema)(a,n)){var o=t.name("valid");"failing"===l.removeAdditional?(p(r,o,!1),t.if((0,e0e.not)(o),(function(){e.reset(),d(r)}))):(p(r,o),u||t.if((0,e0e.not)(o),(function(){return t.break()})))}}}function p(t,n,r){var o={keyword:"additionalProperties",dataProp:t,dataPropType:n0e.Type.Str};!1===r&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,n)}}};ZQe.default=r0e;var o0e={};function i0e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a0e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a0e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function a0e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(o0e,"__esModule",{value:!0});var u0e=WKe(),l0e=lGe,c0e=qqe,s0e=ZQe,d0e={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,o=e.data,i=e.it;"all"===i.opts.removeAdditional&&void 0===r.additionalProperties&&s0e.default.code(new u0e.KeywordCxt(i,s0e.default,"additionalProperties"));var a,u=(0,l0e.allSchemaProperties)(n),l=i0e(u);try{for(l.s();!(a=l.n()).done;){var c=a.value;i.definedProperties.add(c)}}catch(e){l.e(e)}finally{l.f()}i.opts.unevaluated&&u.length&&!0!==i.props&&(i.props=c0e.mergeEvaluated.props(t,(0,c0e.toHash)(u),i.props));var s=u.filter((function(e){return!(0,c0e.alwaysValidSchema)(i,n[e])}));if(0!==s.length){var d,f,p=t.name("valid"),v=i0e(s);try{for(v.s();!(d=v.n()).done;){var h=d.value;f=h,i.opts.useDefaults&&!i.compositeRule&&void 0!==n[f].default?g(h):(t.if((0,l0e.propertyInData)(t,o,h,i.opts.ownProperties)),g(h),i.allErrors||t.else().var(p,!0),t.endIf()),e.it.definedProperties.add(h),e.ok(p)}}catch(e){v.e(e)}finally{v.f()}}function g(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},p)}}};o0e.default=d0e;var f0e,p0e,v0e={};function h0e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g0e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g0e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function g0e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(v0e,"__esModule",{value:!0});var m0e=lGe,y0e=tqe,b0e=qqe,w0e=qqe,_0e={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,r=e.data,o=e.parentSchema,i=e.it,a=i.opts,u=(0,m0e.allSchemaProperties)(n),l=u.filter((function(e){return(0,b0e.alwaysValidSchema)(i,n[e])}));if(0!==u.length&&(l.length!==u.length||i.opts.unevaluated&&!0!==i.props)){var c=a.strictSchema&&!a.allowMatchingProperties&&o.properties,s=t.name("valid");!0===i.props||i.props instanceof y0e.Name||(i.props=(0,w0e.evaluatedPropsToName)(t,i.props));var d=i.props;!function(){var e,n=h0e(u);try{for(n.s();!(e=n.n()).done;){var r=e.value;c&&f(r),i.allErrors?p(r):(t.var(s,!0),p(r),t.if(s))}}catch(e){n.e(e)}finally{n.f()}}()}function f(e){for(var t in c)new RegExp(e).test(t)&&(0,b0e.checkStrictMode)(i,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function p(n){t.forIn("key",r,(function(r){t.if((0,y0e._)(f0e||(f0e=YHe(["",".test(",")"])),(0,m0e.usePattern)(e,n),r),(function(){var o=l.includes(n);o||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:w0e.Type.Str},s),i.opts.unevaluated&&!0!==d?t.assign((0,y0e._)(p0e||(p0e=YHe(["","[","]"])),d,r),!0):o||i.allErrors||t.if((0,y0e.not)(s),(function(){return t.break()}))}))}))}}};v0e.default=_0e;var k0e={};Object.defineProperty(k0e,"__esModule",{value:!0});var C0e=qqe,E0e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,n=e.schema,r=e.it;if((0,C0e.alwaysValidSchema)(r,n))e.fail();else{var o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(function(){return e.reset()}),(function(){return e.error()}))}},error:{message:"must NOT be valid"}};k0e.default=E0e;var O0e={};Object.defineProperty(O0e,"__esModule",{value:!0});var S0e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:lGe.validateUnion,error:{message:"must match a schema in anyOf"}};O0e.default=S0e;var x0e,j0e,D0e,A0e={};Object.defineProperty(A0e,"__esModule",{value:!0});var R0e=tqe,F0e=qqe,I0e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:function(e){var t=e.params;return(0,R0e._)(x0e||(x0e=YHe(["{passingSchemas: ","}"])),t.passing)}},code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,o=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!o.opts.discriminator||!r.discriminator){var i=n,a=t.let("valid",!1),u=t.let("passing",null),l=t.name("_valid");e.setParams({passing:u}),t.block((function(){i.forEach((function(n,r){var i;(0,F0e.alwaysValidSchema)(o,n)?t.var(l,!0):i=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},l),r>0&&t.if((0,R0e._)(j0e||(j0e=YHe([""," && ",""])),l,a)).assign(a,!1).assign(u,(0,R0e._)(D0e||(D0e=YHe(["[",", ","]"])),u,r)).else(),t.if(l,(function(){t.assign(a,!0),t.assign(u,r),i&&e.mergeEvaluated(i,R0e.Name)}))}))})),e.result(a,(function(){return e.reset()}),(function(){return e.error(!0)}))}}};A0e.default=I0e;var P0e={};Object.defineProperty(P0e,"__esModule",{value:!0});var M0e=qqe,T0e={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,n=e.schema,r=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");var o=t.name("valid");n.forEach((function(t,n){if(!(0,M0e.alwaysValidSchema)(r,t)){var i=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(i)}}))}};P0e.default=T0e;var N0e,B0e,V0e,L0e={};Object.defineProperty(L0e,"__esModule",{value:!0});var z0e=tqe,U0e=qqe,H0e={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:function(e){var t=e.params;return(0,z0e.str)(N0e||(N0e=YHe(['must match "','" schema'])),t.ifClause)},params:function(e){var t=e.params;return(0,z0e._)(B0e||(B0e=YHe(["{failingKeyword: ","}"])),t.ifClause)}},code:function(e){var t=e.gen,n=e.parentSchema,r=e.it;void 0===n.then&&void 0===n.else&&(0,U0e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');var o=q0e(r,"then"),i=q0e(r,"else");if(o||i){var a,u=t.let("valid",!0),l=t.name("_valid");if(a=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l),e.mergeEvaluated(a),e.reset(),o&&i){var c=t.let("ifClause");e.setParams({ifClause:c}),t.if(l,s("then",c),s("else",c))}else o?t.if(l,s("then")):t.if((0,z0e.not)(l),s("else"));e.pass(u,(function(){return e.error(!0)}))}function s(n,r){return function(){var o=e.subschema({keyword:n},l);t.assign(u,l),e.mergeValidEvaluated(o,u),r?t.assign(r,(0,z0e._)(V0e||(V0e=YHe(["",""])),n)):e.setParams({ifClause:n})}}}};function q0e(e,t){var n=e.schema[t];return void 0!==n&&!(0,U0e.alwaysValidSchema)(e,n)}L0e.default=H0e;var W0e={};Object.defineProperty(W0e,"__esModule",{value:!0});var $0e=qqe,G0e={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,n=e.parentSchema,r=e.it;void 0===n.if&&(0,$0e.checkStrictMode)(r,'"'.concat(t,'" without "if" is ignored'))}};W0e.default=G0e,Object.defineProperty(GZe,"__esModule",{value:!0});var K0e=KZe,Y0e=nQe,J0e=rQe,X0e=pQe,Z0e=FQe,Q0e=VQe,e1e=HQe,t1e=ZQe,n1e=o0e,r1e=v0e,o1e=k0e,i1e=O0e,a1e=A0e,u1e=P0e,l1e=L0e,c1e=W0e;GZe.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o1e.default,i1e.default,a1e.default,u1e.default,l1e.default,c1e.default,e1e.default,t1e.default,Q0e.default,n1e.default,r1e.default];return e?t.push(Y0e.default,X0e.default):t.push(K0e.default,J0e.default),t.push(Z0e.default),t};var s1e,d1e,f1e,p1e,v1e,h1e,g1e,m1e,y1e,b1e,w1e,_1e,k1e,C1e,E1e,O1e,S1e,x1e={},j1e={};Object.defineProperty(j1e,"__esModule",{value:!0});var D1e=tqe,A1e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return(0,D1e.str)(s1e||(s1e=YHe(['must match format "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,D1e._)(d1e||(d1e=YHe(["{format: ","}"])),t)}},code:function(e,t){var n,r,o,i,a,u,l=e.gen,c=e.data,s=e.$data,d=e.schema,f=e.schemaCode,p=e.it,v=p.opts,h=p.errSchemaPath,g=p.schemaEnv,m=p.self;v.validateFormats&&(s?(n=l.scopeValue("formats",{ref:m.formats,code:v.code.formats}),r=l.const("fDef",(0,D1e._)(f1e||(f1e=YHe(["","[","]"])),n,f)),o=l.let("fType"),i=l.let("format"),l.if((0,D1e._)(p1e||(p1e=YHe(["typeof ",' == "object" && !('," instanceof RegExp)"])),r,r),(function(){return l.assign(o,(0,D1e._)(v1e||(v1e=YHe(["",'.type || "string"'])),r)).assign(i,(0,D1e._)(h1e||(h1e=YHe(["",".validate"])),r))}),(function(){return l.assign(o,(0,D1e._)(g1e||(g1e=YHe(['"string"'])))).assign(i,r)})),e.fail$data((0,D1e.or)(!1===v.strictSchema?D1e.nil:(0,D1e._)(m1e||(m1e=YHe([""," && !",""])),f,i),(a=g.$async?(0,D1e._)(y1e||(y1e=YHe(["(",".async ? await ","(",") : ","(","))"])),r,i,c,i,c):(0,D1e._)(b1e||(b1e=YHe(["","(",")"])),i,c),u=(0,D1e._)(w1e||(w1e=YHe(["(typeof ",' == "function" ? '," : ",".test(","))"])),i,a,i,c),(0,D1e._)(_1e||(_1e=YHe([""," && "," !== true && "," === "," && !",""])),i,i,o,t,u))))):function(){var n=m.formats[d];if(!n)return void function(){if(!1===v.strictSchema)return void m.logger.warn(e());throw new Error(e());function e(){return'unknown format "'.concat(d,'" ignored in schema at path "').concat(h,'"')}}();if(!0===n)return;var r=Tf(function(e){var t=e instanceof RegExp?(0,D1e.regexpCode)(e):v.code.formats?(0,D1e._)(k1e||(k1e=YHe(["","",""])),v.code.formats,(0,D1e.getProperty)(d)):void 0,n=l.scopeValue("formats",{key:d,ref:e,code:t});if("object"==Ln(e)&&!(e instanceof RegExp))return[e.type||"string",e.validate,(0,D1e._)(C1e||(C1e=YHe(["",".validate"])),n)];return["string",e,n]}(n),3),o=r[0],i=r[1],a=r[2];o===t&&e.pass(function(){if("object"==Ln(n)&&!(n instanceof RegExp)&&n.async){if(!g.$async)throw new Error("async format in sync schema");return(0,D1e._)(E1e||(E1e=YHe(["await ","(",")"])),a,c)}return"function"==typeof i?(0,D1e._)(O1e||(O1e=YHe(["","(",")"])),a,c):(0,D1e._)(S1e||(S1e=YHe(["",".test(",")"])),a,c)}())}())}};j1e.default=A1e,Object.defineProperty(x1e,"__esModule",{value:!0});var R1e=[j1e.default];x1e.default=R1e;var F1e={};Object.defineProperty(F1e,"__esModule",{value:!0}),F1e.contentVocabulary=F1e.metadataVocabulary=void 0,F1e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],F1e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(pJe,"__esModule",{value:!0});var I1e=zJe,P1e=GZe,M1e=x1e,T1e=F1e,N1e=[vJe.default,I1e.default,(0,P1e.default)(),M1e.default,T1e.metadataVocabulary,T1e.contentVocabulary];pJe.default=N1e;var B1e,V1e,L1e,z1e,U1e,H1e,q1e={},W1e={};function $1e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G1e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G1e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function G1e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(W1e,"__esModule",{value:!0}),W1e.DiscrError=void 0,(V1e=B1e||(W1e.DiscrError=B1e={})).Tag="tag",V1e.Mapping="mapping",Object.defineProperty(q1e,"__esModule",{value:!0});var K1e=tqe,Y1e=W1e,J1e=rYe,X1e=JKe,Z1e=qqe,Q1e={keyword:"discriminator",type:"object",schemaType:"object",error:{message:function(e){var t=e.params,n=t.discrError,r=t.tagName;return n===Y1e.DiscrError.Tag?'tag "'.concat(r,'" must be string'):'value of tag "'.concat(r,'" must be in oneOf')},params:function(e){var t=e.params,n=t.discrError,r=t.tag,o=t.tagName;return(0,K1e._)(L1e||(L1e=YHe(["{error: ",", tag: ",", tagValue: ","}"])),n,o,r)}},code:function(e){var t=e.gen,n=e.data,r=e.schema,o=e.parentSchema,i=e.it,a=o.oneOf;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");var u=r.propertyName;if("string"!=typeof u)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");var l=t.let("valid",!1),c=t.const("tag",(0,K1e._)(z1e||(z1e=YHe(["","",""])),n,(0,K1e.getProperty)(u)));function s(n){var r=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(o,K1e.Name),r}t.if((0,K1e._)(U1e||(U1e=YHe(["typeof ",' == "string"'])),c),(function(){return function(){var n=function(){for(var e,t={},n=f(o),r=!0,l=0;l<a.length;l++){var c=a[l];if((null==c?void 0:c.$ref)&&!(0,Z1e.schemaHasRulesButRef)(c,i.self.RULES)){var s=c.$ref;if((c=J1e.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,s))instanceof J1e.SchemaEnv&&(c=c.schema),void 0===c)throw new X1e.default(i.opts.uriResolver,i.baseId,s)}var d=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[u];if("object"!=Ln(d))throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(u,'"'));r=r&&(n||f(c)),p(d,l)}if(!r)throw new Error('discriminator: "'.concat(u,'" must be required'));return t;function f(e){var t=e.required;return Array.isArray(t)&&t.includes(u)}function p(e,t){if(e.const)v(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'.concat(u,'" must have "const" or "enum"'));var n,r=$1e(e.enum);try{for(r.s();!(n=r.n()).done;){v(n.value,t)}}catch(e){r.e(e)}finally{r.f()}}}function v(e,n){if("string"!=typeof e||e in t)throw new Error('discriminator: "'.concat(u,'" values must be unique strings'));t[e]=n}}();for(var r in t.if(!1),n)t.elseIf((0,K1e._)(H1e||(H1e=YHe([""," === ",""])),c,r)),t.assign(l,s(n[r]));t.else(),e.error(!1,{discrError:Y1e.DiscrError.Mapping,tag:c,tagName:u}),t.endIf()}()}),(function(){return e.error(!1,{discrError:Y1e.DiscrError.Tag,tag:c,tagName:u})})),e.ok(l)}};q1e.default=Q1e;const e2e={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function t2e(e,t,n){return t=Sd(t),Od(e,n2e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function n2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n2e=function(){return!!e})()}function r2e(e,t,n,r){var o=Wz(Sd(e.prototype),t,n);return"function"==typeof o?function(e){return o.apply(n,e)}:o}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;var n=pJe,r=q1e,o=e2e,i=["/properties"],a="http://json-schema.org/draft-07/schema",u=function(e){function t(){return sl(this,t),t2e(this,t,arguments)}return jd(t,e),ll(t,[{key:"_addVocabularies",value:function(){var e=this;r2e(t,"_addVocabularies",this)([]),n.default.forEach((function(t){return e.addVocabulary(t)})),this.opts.discriminator&&this.addKeyword(r.default)}},{key:"_addDefaultMetaSchema",value:function(){if(r2e(t,"_addDefaultMetaSchema",this)([]),this.opts.meta){var e=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=r2e(t,"defaultMeta",this)([])||(this.getSchema(a)?a:void 0)}}])}(KHe.default);t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=WKe();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=tqe;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var s=YKe();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return s.default}});var d=JKe;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(GHe,GHe.exports);var o2e,i2e,a2e={exports:{}},u2e={exports:{}},l2e={exports:{}},c2e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe,r=["undefined","string","number","object","function","boolean","symbol"];function o(){return{keyword:"typeof",schemaType:["string","array"],code:function(e){var t=e.data,r=e.schema,o=e.schemaValue;e.fail("string"==typeof r?(0,n._)(o2e||(o2e=YHe(["typeof "," != ",""])),t,r):(0,n._)(i2e||(i2e=YHe(["",".indexOf(typeof ",") < 0"])),o,t))},metaSchema:{anyOf:[{type:"string",enum:r},{type:"array",items:{type:"string",enum:r}}]}}}t.default=o,e.exports=o}(c2e,c2e.exports);var s2e=c2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(s2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(l2e,l2e.exports);var d2e=l2e.exports,f2e={exports:{}},p2e={exports:{}};function v2e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h2e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h2e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function h2e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};void 0!==Vp.Buffer&&(n.Buffer=Vp.Buffer),"undefined"!=typeof Promise&&(n.Promise=Promise);var r=Object.assign((function(){return{keyword:"instanceof",schemaType:["string","array"],compile:function(e){if("string"==typeof e){var t=o(e);return function(e){return e instanceof t}}if(Array.isArray(e)){var n=e.map(o);return function(e){var t,r=v2e(n);try{for(r.s();!(t=r.n()).done;){if(e instanceof t.value)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}}throw new Error("ajv implementation error")},metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}}}),{CONSTRUCTORS:n});function o(e){var t=n[e];if(t)return t;throw new Error('invalid "instanceof" keyword value '.concat(e))}t.default=r,e.exports=r}(p2e,p2e.exports);var g2e=p2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(g2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(f2e,f2e.exports);var m2e=f2e.exports,y2e={exports:{}},b2e={exports:{}},w2e={};Object.defineProperty(w2e,"__esModule",{value:!0}),w2e.default=function(e){return function(){return{keyword:e,type:"number",schemaType:"array",macro:function(t){var n=Tf(t,2),r=n[0],o=n[1];return function(t,n){if(t>n||"exclusiveRange"===e&&t===n)throw new Error("There are no numbers in range")}(r,o),"range"===e?{minimum:r,maximum:o}:{exclusiveMinimum:r,exclusiveMaximum:o}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}}}},function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(w2e).default)("range");t.default=r,e.exports=r}(b2e,b2e.exports);var _2e=b2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(_2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(y2e,y2e.exports);var k2e=y2e.exports,C2e={exports:{}},E2e={exports:{}};!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(w2e).default)("exclusiveRange");t.default=r,e.exports=r}(E2e,E2e.exports);var O2e=E2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(O2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(C2e,C2e.exports);var S2e,x2e=C2e.exports,j2e={exports:{}},D2e={exports:{}},A2e={};Object.defineProperty(A2e,"__esModule",{value:!0}),A2e.usePattern=A2e.metaSchemaRef=void 0;var R2e,F2e=tqe;A2e.metaSchemaRef=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultMeta;return!1===e?{}:{$ref:e||"http://json-schema.org/schema"}},A2e.usePattern=function(e,t){var n=e.gen,r=e.it.opts,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.unicodeRegExp?"u":"",i=new RegExp(t,o);return n.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,F2e._)(S2e||(S2e=YHe(["new RegExp(",", ",")"])),t,o)})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe,r=A2e,o={type:"object",properties:{pattern:{type:"string"},flags:{type:"string",nullable:!0}},required:["pattern"],additionalProperties:!1},i=/^\/(.*)\/([gimuy]*)$/;function a(){return{keyword:"regexp",type:"string",schemaType:["string","object"],code:function(e){var t=e.data,o=function(t){if("object"==Ln(t))return(0,r.usePattern)(e,t.pattern,t.flags);var n=i.exec(t);if(n)return(0,r.usePattern)(e,n[1],n[2]);throw new Error("cannot parse string into RegExp")}(e.schema);e.pass((0,n._)(R2e||(R2e=YHe(["",".test(",")"])),o,t))},metaSchema:{anyOf:[{type:"string"},o]}}}t.default=a,e.exports=a}(D2e,D2e.exports);var I2e=D2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(I2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(j2e,j2e.exports);var P2e,M2e,T2e,N2e,B2e,V2e=j2e.exports,L2e={exports:{}},z2e={exports:{}};function U2e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H2e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H2e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function H2e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe,r={trimStart:function(e){return e.trimStart()},trimEnd:function(e){return e.trimEnd()},trimLeft:function(e){return e.trimStart()},trimRight:function(e){return e.trimEnd()},trim:function(e){return e.trim()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()},toEnumCase:function(e,t){return(null==t?void 0:t.hash[i(e)])||e}},o=Object.assign((function(){return{keyword:"transform",schemaType:"array",before:"enum",code:function(e){var t=e.gen,o=e.data,a=e.schema,u=e.parentSchema,l=e.it,c=l.parentData,s=l.parentDataProperty,d=a;if(d.length){var f;if(d.includes("toEnumCase")){var p=function(e){var t={hash:{}};if(!e.enum)throw new Error('transform: "toEnumCase" requires "enum"');var n,r=U2e(e.enum);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("string"==typeof o){var a=i(o);if(t.hash[a])throw new Error('transform: "toEnumCase" requires all lowercased "enum" values to be unique');t.hash[a]=o}}}catch(e){r.e(e)}finally{r.f()}return t}(u);f=t.scopeValue("obj",{ref:p,code:(0,n.stringify)(p)})}t.if((0,n._)(P2e||(P2e=YHe(["typeof ",' == "string" && '," !== undefined"])),o,c),(function(){t.assign(o,v(d.slice())),t.assign((0,n._)(M2e||(M2e=YHe(["","[","]"])),c,s),o)}))}function v(e){if(!e.length)return o;var i=e.pop();if(!(i in r))throw new Error("transform: unknown transformation ".concat(i));var a=t.scopeValue("func",{ref:r[i],code:(0,n._)(T2e||(T2e=YHe(['require("ajv-keywords/dist/definitions/transform").transform',""])),(0,n.getProperty)(i))}),u=v(e);return f&&"toEnumCase"===i?(0,n._)(N2e||(N2e=YHe(["","(",", ",")"])),a,u,f):(0,n._)(B2e||(B2e=YHe(["","(",")"])),a,u)}},metaSchema:{type:"array",items:{type:"string",enum:Object.keys(r)}}}}),{transform:r});function i(e){return e.toLowerCase()}t.default=o,e.exports=o}(z2e,z2e.exports);var q2e=z2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(q2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(L2e,L2e.exports);var W2e=L2e.exports,$2e={exports:{}},G2e={exports:{}};function K2e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Y2e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y2e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Y2e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=BGe,r=["number","integer","string","boolean","null"];function o(){return{keyword:"uniqueItemProperties",type:"array",schemaType:"array",compile:function(e,t){var o=function(e,t){return e.map((function(e){var n,o,i,a=null===(i=null===(o=null===(n=t.items)||void 0===n?void 0:n.properties)||void 0===o?void 0:o[e])||void 0===i?void 0:i.type;return Array.isArray(a)?!a.includes("object")&&!a.includes("array"):r.includes(a)}))}(e,t);return function(t){if(t.length<=1)return!0;for(var r=0;r<e.length;r++){var i=e[r];if(o[r]){var a,u={},l=K2e(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(c&&"object"==Ln(c)){var s=c[i];if(!s||"object"!=Ln(s)){if("string"==typeof s&&(s='"'+s),u[s])return!1;u[s]=!0}}}}catch(e){l.e(e)}finally{l.f()}}else for(var d=t.length;d--;){var f=t[d];if(f&&"object"==Ln(f))for(var p=d;p--;){var v=t[p];if(v&&"object"==Ln(v)&&n(f[i],v[i]))return!1}}}return!0}},metaSchema:{type:"array",items:{type:"string"}}}}t.default=o,e.exports=o}(G2e,G2e.exports);var J2e=G2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(J2e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}($2e,$2e.exports);var X2e=$2e.exports,Z2e={exports:{}},Q2e={exports:{}};!function(e,t){function n(){return{keyword:"allRequired",type:"object",schemaType:"boolean",macro:function(e,t){if(!e)return!0;var n=Object.keys(t.properties);return 0===n.length||{required:n}},dependencies:["properties"]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(Q2e,Q2e.exports);var e5e=Q2e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(e5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(Z2e,Z2e.exports);var t5e=Z2e.exports,n5e={exports:{}},r5e={exports:{}},o5e={};Object.defineProperty(o5e,"__esModule",{value:!0}),o5e.default=function(e){return function(){return{keyword:e,type:"object",schemaType:"array",macro:function(t){return 0===t.length||(1===t.length?{required:t}:il({},"anyRequired"===e?"anyOf":"oneOf",t.map((function(e){return{required:[e]}}))))},metaSchema:{type:"array",items:{type:"string"}}}}},function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(o5e).default)("anyRequired");t.default=r,e.exports=r}(r5e,r5e.exports);var i5e=r5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(n5e,n5e.exports);var a5e=n5e.exports,u5e={exports:{}},l5e={exports:{}};!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(o5e).default)("oneRequired");t.default=r,e.exports=r}(l5e,l5e.exports);var c5e=l5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(c5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(u5e,u5e.exports);var s5e,d5e,f5e,p5e=u5e.exports,v5e={exports:{}},h5e={exports:{}};function g5e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m5e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m5e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function m5e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe,r=A2e,o={message:function(e){var t=e.params.missingPattern;return(0,n.str)(s5e||(s5e=YHe(["should have property matching pattern '","'"])),t)},params:function(e){var t=e.params.missingPattern;return(0,n._)(d5e||(d5e=YHe(["{missingPattern: ","}"])),t)}};function i(){return{keyword:"patternRequired",type:"object",schemaType:"array",error:o,code:function(e){var t=e.gen,o=e.schema,i=e.data;if(0!==o.length){var a,u=t.let("valid",!0),l=g5e(o);try{for(l.s();!(a=l.n()).done;){c(a.value)}}catch(e){l.e(e)}finally{l.f()}}function c(o){var a=t.let("matched",!1);t.forIn("key",i,(function(i){t.assign(a,(0,n._)(f5e||(f5e=YHe(["",".test(",")"])),(0,r.usePattern)(e,o),i)),t.if(a,(function(){return t.break()}))})),e.setParams({missingPattern:o}),t.assign(u,(0,n.and)(u,a)),e.pass(u)}},metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}}}t.default=i,e.exports=i}(h5e,h5e.exports);var y5e=h5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(y5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(v5e,v5e.exports);var b5e=v5e.exports,w5e={exports:{}},_5e={exports:{}};!function(e,t){function n(){return{keyword:"prohibited",type:"object",schemaType:"array",macro:function(e){return 0===e.length||(1===e.length?{not:{required:e}}:{not:{anyOf:e.map((function(e){return{required:[e]}}))}})},metaSchema:{type:"array",items:{type:"string"}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(_5e,_5e.exports);var k5e=_5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(k5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(w5e,w5e.exports);var C5e=w5e.exports,E5e={exports:{}},O5e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=A2e;function r(e){return{keyword:"deepProperties",type:"object",schemaType:"object",macro:function(e){var t=[];for(var n in e)t.push(o(n,e[n]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:(0,n.metaSchemaRef)(e)}}}function o(e,t){for(var n=e.split("/"),r={},o=r,i=1;i<n.length;i++){var a=n[i],u=i===n.length-1;a=a.replace(/~1/g,"/").replace(/~0/g,"~");var l=o.properties={},c=void 0;if(/[0-9]+/.test(a)){var s=+a;for(c=o.items=[],o.type=["object","array"];s--;)c.push({})}else o.type="object";o=u?t:{},l[a]=o,c&&c.push(o)}return r}t.default=r,e.exports=r}(O5e,O5e.exports);var S5e=O5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(S5e),o=function(e,t){return e.addKeyword((0,r.default)(t))};t.default=o,e.exports=o}(E5e,E5e.exports);var x5e,j5e,D5e=E5e.exports,A5e={exports:{}},R5e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe;function r(){return{keyword:"deepRequired",type:"object",schemaType:"array",code:function(e){var t=e.schema,r=e.data,o=t.map((function(e){return(0,n._)(x5e||(x5e=YHe(["(",") === undefined"])),function(e){if(""===e)throw new Error("empty JSON pointer not allowed");var t=e.split("/"),o=r,i=t.map((function(e,t){return t?o=(0,n._)(j5e||(j5e=YHe(["","",""])),o,(0,n.getProperty)(function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}(e))):o}));return n.and.apply(void 0,tl(i))}(e))}));e.fail(n.or.apply(void 0,tl(o)))},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}}}t.default=r,e.exports=r}(R5e,R5e.exports);var F5e=R5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(F5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(A5e,A5e.exports);var I5e=A5e.exports,P5e={exports:{}},M5e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={},r={timestamp:function(){return function(){return Date.now()}},datetime:function(){return function(){return(new Date).toISOString()}},date:function(){return function(){return(new Date).toISOString().slice(0,10)}},time:function(){return function(){return(new Date).toISOString().slice(11)}},random:function(){return function(){return Math.random()}},randomint:function(e){var t,n=null!==(t=null==e?void 0:e.max)&&void 0!==t?t:2;return function(){return Math.floor(Math.random()*n)}},seq:function(e){var t,r=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"";return n[r]||(n[r]=0),function(){return n[r]++}}},o=Object.assign((function(){return{keyword:"dynamicDefaults",type:"object",schemaType:["string","object"],modifying:!0,valid:!0,compile:function(e,t,n){if(!n.opts.useDefaults||n.compositeRule)return function(){return!0};var o,a={};for(var u in e)a[u]="object"==Ln(o=e[u])?function(e){var t=e.func,n=e.args,o=r[t];return i(t,o),o(n)}(o):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r[e];return i(e,t),t()}(o);var l="empty"===n.opts.useDefaults;return function(t){for(var n in e)(void 0===t[n]||l&&(null===t[n]||""===t[n]))&&(t[n]=a[n]());return!0}},metaSchema:{type:"object",additionalProperties:{anyOf:[{type:"string"},{type:"object",additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}]}}}}),{DEFAULTS:r});function i(e,t){if(!t)throw new Error('invalid "dynamicDefaults" keyword property value: '.concat(e))}t.default=o,e.exports=o}(M5e,M5e.exports);var T5e=M5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(T5e),o=function(e){return e.addKeyword((0,r.default)())};t.default=o,e.exports=o}(P5e,P5e.exports);var N5e,B5e,V5e,L5e,z5e,U5e,H5e=P5e.exports,q5e={exports:{}},W5e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tqe,r=A2e,o={message:function(e){var t=e.params.schemaProp;return t?(0,n.str)(N5e||(N5e=YHe(['should match case "','" schema'])),t):(0,n.str)(B5e||(B5e=YHe(["should match default case schema"])))},params:function(e){var t=e.params.schemaProp;return t?(0,n._)(V5e||(V5e=YHe(["{failingCase: ","}"])),t):(0,n._)(L5e||(L5e=YHe(["{failingDefault: true}"])))}};function i(e){var t=(0,r.metaSchemaRef)(e);return[{keyword:"select",schemaType:["string","number","boolean","null"],$data:!0,error:o,dependencies:["selectCases"],code:function(e){var t=e.gen,r=e.schemaCode,o=e.parentSchema;e.block$data(n.nil,(function(){var i=t.let("valid",!0),a=t.name("_valid"),u=t.const("value",(0,n._)(z5e||(z5e=YHe(["",' === null ? "null" : ',""])),r,r));for(var l in t.if(!1),o.selectCases){e.setParams({schemaProp:l}),t.elseIf((0,n._)(U5e||(U5e=YHe(['"" + '," == ",""])),u,l));var c=e.subschema({keyword:"selectCases",schemaProp:l},a);e.mergeEvaluated(c,n.Name),t.assign(i,a)}if(t.else(),void 0!==o.selectDefault){e.setParams({schemaProp:void 0});var s=e.subschema({keyword:"selectDefault"},a);e.mergeEvaluated(s,n.Name),t.assign(i,a)}t.endIf(),e.pass(i)}))}},{keyword:"selectCases",dependencies:["select"],metaSchema:{type:"object",additionalProperties:t}},{keyword:"selectDefault",dependencies:["select","selectCases"],metaSchema:t}]}t.default=i,e.exports=i}(W5e,W5e.exports);var $5e=W5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n($5e),o=function(e,t){return(0,r.default)(t).forEach((function(t){return e.addKeyword(t)})),e};t.default=o,e.exports=o}(q5e,q5e.exports);var G5e=q5e.exports;!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(d2e),o=n(m2e),i=n(k2e),a=n(x2e),u=n(V2e),l=n(W2e),c=n(X2e),s=n(t5e),d=n(a5e),f=n(p5e),p=n(b5e),v=n(C5e),h=n(D5e),g=n(I5e),m=n(H5e),y=n(G5e),b={typeof:r.default,instanceof:o.default,range:i.default,exclusiveRange:a.default,regexp:u.default,transform:l.default,uniqueItemProperties:c.default,allRequired:s.default,anyRequired:d.default,oneRequired:f.default,patternRequired:p.default,prohibited:v.default,deepProperties:h.default,deepRequired:g.default,dynamicDefaults:m.default,select:y.default};t.default=b,e.exports=b}(u2e,u2e.exports);var K5e=u2e.exports;function Y5e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return J5e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J5e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function J5e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){var n=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(K5e),o=function(e,t){if(Array.isArray(t)){var n,o=Y5e(t);try{for(o.s();!(n=o.n()).done;){i(n.value)(e)}}catch(e){o.e(e)}finally{o.f()}return e}if(t)return i(t)(e),e;for(t in r.default)i(t)(e);return e};function i(e){var t=r.default[e];if(!t)throw new Error("Unknown keyword "+e);return t}o.get=i,t.default=o,e.exports=o,e.exports.default=o}(a2e,a2e.exports);var X5e=Is.defineToken("ContentEditorContribution"),Z5e=Is.defineToken("ContentViewerContribution"),Q5e=Is.defineToken("ContentDatasourceContribution"),e3e=Is.defineToken("ContentDatasourceServiceToken"),t3e=Is.defineToken("ContentServiceToken"),n3e=Is.defineToken("ContentEditorServiceToken"),r3e=Is.defineToken("ContentViewerServiceToken"),o3e=function(e){return e[e.FULL_SCREEN=0]="FULL_SCREEN",e[e.NORMAL=1]="NORMAL",e}(o3e||{}),i3e=Object.defineProperty,a3e=Object.getOwnPropertyDescriptor,u3e=function(e,t,n,r){for(var o,i=r>1?void 0:r?a3e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&i3e(t,n,i),i},l3e=function(){return ll((function e(){sl(this,e),this._onStatusChange=new Lk,this.onStatusChange=this._onStatusChange.event,this.status=o3e.NORMAL}),[{key:"isFullScreen",get:function(){return this.status===o3e.FULL_SCREEN}},{key:"emitStatusChange",value:function(){this.status===o3e.NORMAL?this.status=o3e.FULL_SCREEN:this.status=o3e.NORMAL,this._onStatusChange.emit(this.status)}},{key:"enterFullScreen",value:function(e){var t,n=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"];this.status=o3e.FULL_SCREEN,e&&(n=n.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",["view-manage"]),this._configuration.setValue("toolbar.left",n),this._configuration.setValue("toolbar.right",[]),this._configuration.setValue("toolbar.mode",Rme.NORMAL),this._configuration.setValue("viewerManage.type","tab"),this._configuration.setValue("view.customScrollParent",void 0),this._configuration.setValue("view.useWindowScroll",!1),this._configuration.setValue("render.autoActive",!0),null==(t=this._activeTableService)||t.active(),this._toolbarService.rerender()}},{key:"exitFullScreen",value:function(e,t){var n,r=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search"];this.status=o3e.NORMAL,e&&(r=r.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",[]),this._configuration.setValue("toolbar.left",["view-manage"]),this._configuration.setValue("toolbar.right",r),this._configuration.setValue("toolbar.mode",Rme.LITE),this._configuration.setValue("viewerManage.type","menu"),this._configuration.setValue("view.customScrollParent",t),this._configuration.setValue("view.useWindowScroll",!0),this._configuration.setValue("render.autoActive",!1),null==(n=this._activeTableService)||n.active(),this._toolbarService.rerender()}}])}();u3e([Ks(lk)],l3e.prototype,"_configuration",2),u3e([Ks(loe)],l3e.prototype,"_activeTableService",2),u3e([Ks(xme)],l3e.prototype,"_toolbarService",2),l3e=u3e([Gs()],l3e);var c3e=function(e){return e[e.NORMAL="normal"]="NORMAL",e[e.CONTAIN="contain"]="CONTAIN",e}(c3e||{}),s3e=Object.defineProperty,d3e=Object.getOwnPropertyDescriptor,f3e=function(e,t,n,r){for(var o,i=r>1?void 0:r?d3e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&s3e(t,n,i),i},p3e=750,v3e=function(){return ll((function e(){var t=this;sl(this,e),this._cardWidthMode=null,this._getMaxWidth=null,this._$card=null,this._cardWidth=0,this._contentWidth=0,this._scrollListener=null,this._onModeUIChange=new Lk,this.onModeUIChange=this._onModeUIChange.event,this._onModeChange=new Lk,this.onModeChange=this._onModeChange.event,this._onCardWidthChange=new Lk,this.onCardWidthChange=this._onCardWidthChange.event,this.initCardWidth=function(e,n){if(t._getMaxWidth&&t._$card){if(t._fullScreenService.isFullScreen)t._setCardWidth("100%");else{var r=Math.min(t._getMaxWidth(),e);t._updateCardWidth(r)}t.syncWidthMode(n),t.bindEvent()}else console.error("[lakex-table-next] FullWidthService.initCardWidth is not ready, please apply getMaxWidtFunction and cardRef.")},this._updateCardWidth=function(e){var n;null==(n=t._setCardWidth)||n.call(t,e),t._onCardWidthChange.emit(e)},this._setCardWidth=function(e){t._$card&&(t._$card.style.width="string"==typeof e?e:"".concat(e,"px"))},this._showCardRightShadow=function(){t.canScroll?t._$card&&(t._$card.classList.remove("left-shadow"),t._$card.classList.add("right-shadow")):t._removeCardShadow()},this._showCardLeftShadow=function(){t.canScroll?t._$card&&(t._$card.classList.remove("right-shadow"),t._$card.classList.add("left-shadow")):t._removeCardShadow()},this._showCardBothShadow=function(){t.canScroll?t._$card&&(t._$card.classList.add("right-shadow"),t._$card.classList.add("left-shadow")):t._removeCardShadow()},this._removeCardShadow=function(){t._$card&&(t._$card.classList.remove("left-shadow"),t._$card.classList.remove("right-shadow"))},this._initCardShadow=function(e,n){"number"==typeof e&&"number"==typeof n&&(t._contentWidth=e,t._cardWidth=n),t.canScroll?t._showCardRightShadow():t._removeCardShadow()},this._handleCardViewWidth=function(){if(t._getMaxWidth){var e=t._getMaxWidth();t.isContainMode?t._updateCardWidth(e):t.isNormalMode&&t._updateCardWidth(Math.min(p3e,e)),t._initCardShadow(0,0),t._viewerCardLayoutService.refresh()}},this._handleKanbanViewWidth=function(){if(t._getMaxWidth){var e=t._readService.getViewGroup(),n=t._getMaxWidth();if(!e)return t._updateCardWidth(Math.min(p3e,n)),void t._initCardShadow(0,0);var r=t._renderContextService.$root.querySelector(".lakex-viewer-kanban-content");if(r){var o=r.getBoundingClientRect().width,i=Math.max(o,p3e),a=n<p3e?n:Math.min(i,n);t._updateCardWidth(a),t._initCardShadow(o,a)}}},this._handleGridViewWidth=function(){if(t._getMaxWidth){var e=t._renderContextService.$root.querySelector("table");if(e){var n=e.getBoundingClientRect().width,r=Math.max(n,p3e),o=t._getMaxWidth(),i=o<p3e?o:Math.min(r,o);t._updateCardWidth(i),t._initCardShadow(n,i)}}}}),[{key:"isDisable",get:function(){return this._fullScreenService.status===o3e.FULL_SCREEN}},{key:"isNormalMode",get:function(){return this._cardWidthMode===c3e.NORMAL}},{key:"isContainMode",get:function(){return this._cardWidthMode===c3e.CONTAIN}},{key:"cardWidthMode",get:function(){return this._cardWidthMode}},{key:"canScroll",get:function(){return this._contentWidth>this._cardWidth}},{key:"setWidthMode",value:function(e){this.syncWidthMode(e),this._onModeChange.emit(e)}},{key:"applyGetMaxWidthFunction",value:function(e){this._getMaxWidth=e}},{key:"applyCardRef",value:function(e){this._$card=e}},{key:"resetWidth",value:function(){this._handleUpdateWidth()}},{key:"setCardWidth",value:function(e){var t;null==(t=this._setCardWidth)||t.call(this,e)}},{key:"syncWidthMode",value:function(e){this._cardWidthMode=e,this._onModeUIChange.emit(e)}},{key:"_handleUpdateWidth",value:function(){var e=this;if(this._getMaxWidth){if(!NC.isMobile)return this.isDisable?null:void requestAnimationFrame((function(){switch(e._readService.getActiveViewType()){case sE.KANBAN:e._handleKanbanViewWidth();break;case sE.GRID:e._handleGridViewWidth();break;case sE.CARD:case sE.CALENDAR:e._handleCardViewWidth();break;default:return}}));this._updateCardWidth(this._getMaxWidth())}}},{key:"bindEvent",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(t){var n=t.context.commandName;if(e.isDisable)return null;"addView"!==n&&"removeView"!==n&&"switchView"!==n&&"updateShowFieldName"!==n&&"updateCoverSource"!==n&&"changeColWidth"!==n&&"updateFieldHidden"!==n&&"addField"!==n&&"removeField"!==n&&"copyField"!==n||e.resetWidth(),"switchView"===n&&e.listenScroll()})),this._commandService.onDidRedoCommand((function(){e.resetWidth()})),this._commandService.onDidUndoCommand((function(){e.resetWidth()})),this.listenScroll()}},{key:"listenScroll",value:function(){var e,t=this;switch(null==(e=this._scrollListener)||e.destroy(),this._readService.getActiveViewType()){case sE.KANBAN:this._scrollListener=this._viewerKanbanScrollService.onScroll((function(e){var n=e.target.scrollLeft;n>=t._contentWidth-t._cardWidth?t._showCardLeftShadow():0===n?t._showCardRightShadow():t._showCardBothShadow()}));break;case sE.GRID:this._scrollListener=this._viewerGridScrollService.onScroll((function(e){e.target.scrollLeft>=t._contentWidth-t._cardWidth?t._removeCardShadow():t._showCardRightShadow()}));break;case sE.CARD:case sE.CALENDAR:this._removeCardShadow();default:return}}}])}();f3e([Ks(l3e)],v3e.prototype,"_fullScreenService",2),f3e([Ks(oA)],v3e.prototype,"_readService",2),f3e([Ks(doe)],v3e.prototype,"_renderContextService",2),f3e([Ks(rMe)],v3e.prototype,"_viewerCardLayoutService",2),f3e([Ks(nR)],v3e.prototype,"_commandService",2),f3e([Ks(Pxe)],v3e.prototype,"_viewerGridScrollService",2),f3e([Ks(ZMe)],v3e.prototype,"_viewerKanbanScrollService",2),v3e=f3e([Gs()],v3e);function h3e(e,t){var n=globalThis.appData;return n&&void 0!==n[e]?n[e]:t}Vw.setData({"AI 智能填写":"AI autofill","上传失败":"Upload failure","下拉":"Dropdown","为必填项":"Is required","今天":"Today","使用钉钉扫码$1":"Use Dingding to scan the code to $1","停止收集":"Stop collection","像问卷一样收集信息":"collect information like a questionnaire","全宽":"Full width","全屏":"Full screen","关闭":"Off","其他数据更新时同步更新":"Update when data changes","内容总结":"Summary","内容规则：":"Prompt type:","分享":"Share","列表":"List","单选":"Select","取消":"Cancel","取消添加":"remove","可用于问卷调查、活动组织、登记报名等信息收集与整理场景。":"The data table is a new type of table for more convenient multi-person collaboration and data management through multiple views.","向上移动":"Move up","向下移动":"Move down","回复":"","复制填写链接":"Copy and fill in the link","复制成功":"Copy successfully","复制表单项":"Clone this item","多选":"Multi-select","将自动对每条记录进行总结":"Summarize each record automatically","已停止填写":"Autofill Stopped","已重新填写":"Autofill Done","布局方式":"Layout","开启收集":"Start form collect","开始自动填写":"Start autofill","当前文档中此文件类型不支持预览和下载":"This file is not supported for preview and download","必填":"Required","所有列":"all the columns","打开":"Open","提交":"Submit","收集中":"Collecting","数据表中所有列":"All the columns in table","明天":"Tomorrow","昨天":"Yesterday","智能填写":"Autofill","未命名问题":"Untitled question","查看表单视图需要编辑权限":"Viewing form view requires edit permission","标宽":"Standard width","正在填写中...":"Autofilling...","此处由填写者输入":"This field is for form user","添加":"Add","点击「开启收集」按钮获得表单填写链接":"Click「Start form collect」button to get then form link","点击修改字段":"Click and change field","点击左侧列表添加已有列 或 点击下方按钮添加新表单项":"Click a field or the button above to add an item","生成新表单":"Create new form","生成表单":"Generate form","移除表单项":"Remove this item","自定义":"Custom","获得链接的所有人，可填写并提交表单":"Anyone who gets the link can fill out and submit the form","表单为空":"This form is empty","表单提交失败，请稍后重试":"Form submission failed, please try again later","表单提交成功":"Form submitted successfully","表单收集未开启":"Form collection is not turned on","表单视图":"Form view","要点提取":"Extract","规则不能为空":"Rules can't be null","规则最长支持255字符":"Rules maximun length limit 255","评论":"Comment","请输入必填项":"Please enter required fields","请输入表单描述":"please input form descriptor","请输入表单标题":"please input form title","请输入问题":"Enter a question","输入智能填写规则\n如：为每个商品生成 50 字的宣传文案":"Please input autofill rules\n","输入要点提取规则\n如：提取每天记录中出现的人名":"Please input extract rules\n","重新填写":"Re-autofill","重新填写本列内容":"Re-autofill current col","数据处理比较耗时，请耐心等待...":"Data processing takes time, please wait patiently...","已完成":"Completed"});var g3e=Zw(navigator)?"":navigator.userAgent,m3e=/YuqueDesktopApp\/[\d.]+/i.test(g3e),y3e=/YuqueMobileApp\/[\d.]+/i.test(g3e),b3e=function(){return ll((function e(){sl(this,e)}),null,[{key:"locale",get:function(){return h3e("locale","zh-cn")}},{key:"isYuque",get:function(){return h3e("isYuque",!1)}},{key:"isPublicCloud",get:function(){return h3e("isPublicCloud",!1)}},{key:"isUIATest",get:function(){var e=Zw(navigator)?"":navigator.userAgent;return/Macaca UI Robot/.test(e)}},{key:"isYuqueMobile",get:function(){return y3e}},{key:"isDesktop",get:function(){return m3e||h3e("isDesktopApp",!1)}},{key:"isYuqueMobileApp",get:function(){return h3e("isYuqueMobileApp",!1)}},{key:"docId",get:function(){return d5(globalThis.appData||{},"doc.id")}},{key:"group",get:function(){return h3e("group",void 0)}},{key:"me",get:function(){return h3e("me",void 0)}},{key:"doc",get:function(){return h3e("doc",void 0)}},{key:"organization",get:function(){return h3e("organization",void 0)}},{key:"env",get:function(){return h3e("env","prod")}},{key:"settings",get:function(){return h3e("settings",{})}},{key:"isOfficialTemplate",get:function(){return h3e("isOfficialTemplate",!1)}},{key:"themeManager",get:function(){return h3e("themeManager")}}])}(),w3e=function(e){var t=e.webSdk;return{"record.maxCount":5e3,"view.maxCount":1e3,"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","|","add-record","expandRecord"],"toolbar.right":["create-form"],contextMenu:["updateField","copyField","autofillField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","copyRecord","expandRecord","removeRecord","removeField"],"comment.actions":["reply","emoji","edit","delete"],"monitor.startAt":+new Date,"server.webSdk":t,"clipboard.clipboardApi.disable":b3e.isUIATest,"collab.enable":!1,"collab.skipTable":["table","ability"],"viewerManage.viewTypes":["GRID","CARD","CALENDAR","KANBAN","FORM"],"logger.maxLen":500}};function _3e(e,t,n){return t=Sd(t),Od(e,k3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function k3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k3e=function(){return!!e})()}var C3e=function(e){function t(){return sl(this,t),_3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return!0}}])}($A);function E3e(e,t,n){return t=Sd(t),Od(e,O3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function O3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O3e=function(){return!!e})()}var S3e=function(e){function t(){return sl(this,t),E3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.upsertViewShare(e.viewId,{src:e.src,status:e.status}),!0}}])}($A);function x3e(e,t,n){return t=Sd(t),Od(e,j3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function j3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j3e=function(){return!!e})()}var D3e=function(e){function t(){return sl(this,t),x3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeViewField(e.viewId,e.fieldId),!0}}])}($A);function A3e(e,t,n){return t=Sd(t),Od(e,R3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function R3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R3e=function(){return!!e})()}var F3e=function(e){function t(){return sl(this,t),A3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.insertViewField(e.viewId,e.fieldId),!0}}])}($A);function I3e(e,t,n){return t=Sd(t),Od(e,P3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function P3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P3e=function(){return!!e})()}var M3e=function(e){function t(){return sl(this,t),I3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateView(e.viewId,{desc:e.desc}),!0}}])}($A);function T3e(e,t,n){return t=Sd(t),Od(e,N3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function N3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N3e=function(){return!!e})()}M3e.commandName="updateViewDesc";var B3e=function(e){function t(){return sl(this,t),T3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{display_type:e.displayType}),!0}}])}($A);function V3e(e,t,n){return t=Sd(t),Od(e,L3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function L3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L3e=function(){return!!e})()}B3e.commandName="updateViewFieldDisplayType";var z3e=function(e){function t(){return sl(this,t),V3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{required:e.required}),!0}}])}($A);function U3e(e,t,n){return t=Sd(t),Od(e,H3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function H3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H3e=function(){return!!e})()}z3e.commandName="updateViewFieldRequired";var q3e=function(e){function t(){return sl(this,t),U3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{name:e.name}),!0}}])}($A);function W3e(e,t,n){return t=Sd(t),Od(e,$3e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function $3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($3e=function(){return!!e})()}q3e.commandName="updateViewFieldName";var G3e=function(e){function t(){return sl(this,t),W3e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.newFieldId||(e.newFieldId=qw(32)),e}},{key:"execute",value:function(e){return this.writeService.cloneViewField(e.viewId,e.fieldId,e.newFieldId),!0}}])}($A);G3e.commandName="cloneViewField";var K3e=Is.defineToken("ViewerFormContribution"),Y3e=function(e){return e.PENDING="pending",e.COLLECTING="collecting",e}(Y3e||{}),J3e=Is.defineToken("ViewerFormKernelPluginContribution"),X3e=Object.defineProperty,Z3e=Object.getOwnPropertyDescriptor,Q3e=function(e,t,n,r){for(var o,i=r>1?void 0:r?Z3e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&X3e(t,n,i),i},e6e=function(){return ll((function e(){sl(this,e)}),[{key:"getProvider",value:function(){var e=this.formProvider.getContributions();return e[e.length-1].registerForm()}},{key:"getForm",value:function(e){return this.getProvider().getForm(e)}}])}();Q3e([yd(K3e)],e6e.prototype,"formProvider",2),e6e=Q3e([Gs()],e6e);var t6e=Object.defineProperty,n6e=Object.getOwnPropertyDescriptor,r6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?n6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&t6e(t,n,i),i},o6e=function(){return ll((function e(){sl(this,e)}),[{key:"initForm",value:(e=rl(ml.mark((function e(t){var n,r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:if(!this.getShare(t)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this._formRegistry.getForm(n.get("id"));case 8:return(r=e.sent)&&this._writeService.upsertViewShare(n.get("uuid"),r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"getShare",value:function(e){if(e)return this._readService.getViewShare(e)}},{key:"getForm",value:function(e){return this._readService.getView(e)}},{key:"getFormEditData",value:function(e){var t=this._readService.getViewFields(e),n=this._readService.getAllFields();return{view:this._readService.getView(e),viewConfig:this._readService.getViewConfig(e),fields:Q_(n,(function(e){return!fE.isSystemType(e.get("type"))})),viewFields:t&&Q_(t,(function(e){var t;return!fE.isSystemType(null==(t=e.get("field"))?void 0:t.get("type"))}))}}}]);var e}();r6e([Ks(oA)],o6e.prototype,"_readService",2),r6e([Ks(_A)],o6e.prototype,"_writeService",2),r6e([Ks(e6e)],o6e.prototype,"_formRegistry",2),o6e=r6e([Gs()],o6e);var i6e=Object.defineProperty,a6e=Object.getOwnPropertyDescriptor,u6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?a6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&i6e(t,n,i),i},l6e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand("addFormRecord",C3e),this.commandService.registerCommand("removeViewField",D3e),this.commandService.registerCommand("insertViewField",F3e),this.commandService.registerCommand(M3e.commandName,M3e),this.commandService.registerCommand(B3e.commandName,B3e),this.commandService.registerCommand(z3e.commandName,z3e),this.commandService.registerCommand(q3e.commandName,q3e),this.commandService.registerCommand(G3e.commandName,G3e),this.commandService.registerCommand("upsertViewShare",S3e)}}],[{key:"pluginModule",value:function(){return dd().contribution(J3e).contribution(K3e).register(e6e).register(o6e).register(this)}}])}();l6e.pluginName="kernel-viewer-form",u6e([Ks(nR)],l6e.prototype,"commandService",2),l6e=u6e([Gs({contrib:MA})],l6e);var c6e=FX,s6e=oZ,d6e=function(){return c6e.Date.now()},f6e=J3,p6e=Math.max,v6e=Math.min;var h6e=function(e,t,n){var r,o,i,a,u,l,c=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function v(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function h(){var e=d6e();if(v(e))return g(e);u=setTimeout(h,function(e){var n=t-(e-l);return d?v6e(n,i-(e-c)):n}(e))}function g(e){return u=void 0,f&&r?p(e):(r=o=void 0,a)}function m(){var e=d6e(),n=v(e);if(r=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(h,t),s?p(e):a}(l);if(d)return clearTimeout(u),u=setTimeout(h,t),p(l)}return void 0===u&&(u=setTimeout(h,t)),a}return t=f6e(t)||0,s6e(n)&&(s=!!n.leading,i=(d="maxWait"in n)?p6e(f6e(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==u&&clearTimeout(u),c=0,r=l=o=u=void 0},m.flush=function(){return void 0===u?a:g(d6e())},m};const g6e=kn(h6e);var m6e=Object.defineProperty,y6e=Object.getOwnPropertyDescriptor,b6e=function(){return ll((function e(){sl(this,e),this._onCommandHook=new Lk,this.onCommandHook=this._onCommandHook.event}),[{key:"emitHook",value:function(e){this._onCommandHook.emit(e)}}])}();function w6e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _6e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_6e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function _6e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}b6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?y6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&m6e(t,n,i),i}([Gs()],b6e);var k6e=Object.defineProperty,C6e=Object.getOwnPropertyDescriptor,E6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?C6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&k6e(t,n,i),i},O6e=XF.Plugin("monitor"),S6e=function(){return ll((function e(){var t=this;sl(this,e),this._commandLogs=[],this._startTaskWithDebounce=g6e(rl(ml.mark((function e(){var n;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._commandLogs,0!==t._commandLogs.length){e.next=3;break}return e.abrupt("return");case 3:t._queueTask.addJob(function(){var e=rl(ml.mark((function e(r){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t._startTask(n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",r.onError(e.t0));case 9:r.onSuccess();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),t._commandLogs=[];case 5:case"end":return e.stop()}}),e)}))),3e3)}),[{key:"startMainPerfLog",value:function(){var e=this,t={};t.startAt=this._configuration.getValue("monitor.startAt"),t.initAt=this._lifeCycleService.getStatusChangedAt(Dw.Inited),t.initAt||this._lifeCycleService.when(Dw.Inited,(function(){t.initAt=e._lifeCycleService.getStatusChangedAt(Dw.Inited)})),t.readyAt=this._lifeCycleService.getStatusChangedAt(Dw.Ready),t.readyAt||this._lifeCycleService.when(Dw.Ready,(function(){t.readyAt=e._lifeCycleService.getStatusChangedAt(Dw.Ready)})),t.recordInitAt=this._lifeCycleService.getStatusChangedAt(Dw.RecordInit),t.recordInitAt||this._lifeCycleService.when(Dw.RecordInit,(function(){t.recordInitAt=e._lifeCycleService.getStatusChangedAt(Dw.RecordInit)})),t.recordReadyAt=this._lifeCycleService.getStatusChangedAt(Dw.RecordReady),t.recordReadyAt||this._lifeCycleService.when(Dw.RecordReady,(function(){t.recordReadyAt=e._lifeCycleService.getStatusChangedAt(Dw.RecordReady)})),t.renderAt=this._lifeCycleService.getStatusChangedAt(Dw.Rendered),t.renderAt?this._sendMainPerfLog(t):this._lifeCycleService.when(Dw.Rendered,(function(){t.renderAt=e._lifeCycleService.getStatusChangedAt(Dw.Rendered),e._sendMainPerfLog(t)}))}},{key:"_sendMainPerfLog",value:function(e){var t=this._configuration.getValue("monitor.sendLog"),n={msg:"新数据表性能上报",m1:e.initAt-e.startAt,m2:e.readyAt-e.initAt,m3:e.recordInitAt-e.readyAt,m4:e.recordReadyAt-e.recordInitAt,m5:e.renderAt-e.recordReadyAt,m6:e.renderAt-e.startAt,c1:this._readService.getRecords().length,c2:this._readService.getAllFields().length};n.m5>5e3||n.m6>2e4||(O6e("main perf: %j",n),null==t||t(59,n))}},{key:"startCommandPerfLog",value:function(){var e=this;this._queueTask=new yF({name:"指令性能同步任务",parallel:1}),this._commandHook.onCommandHook((function(t){e._logCommandPerf(t)}))}},{key:"_logCommandPerf",value:(e=rl(ml.mark((function e(t){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._commandLogs.push(t),this._startTaskWithDebounce();case 2:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"_getCommandPerfData",value:function(e){var t,n={msg:"新数据表指令性能上报"},r={m1:0,m2:0,m3:0,m4:0,m5:0,m6:0,m7:0},o=w6e(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;"setCell"===i.commandName?(n.m1=n.m1||0,r.m1+=1,n.m1=(n.m1+i.time)/r.m1):"switchView"===i.commandName?(n.m2=n.m2||0,r.m2+=1,n.m2=(n.m2+i.time)/r.m2):"addView"===i.commandName?(n.m3=n.m3||0,r.m3+=1,n.m3=(n.m3+i.time)/r.m3):"createFilter"===i.commandName||"updateFilter"===i.commandName||"removeFilter"===i.commandName?(n.m4=n.m4||0,r.m4+=1,n.m4=(n.m4+i.time)/r.m4):"createGridGroup"===i.commandName||"updateGridGroup"===i.commandName||"removeGridGroup"===i.commandName?(n.m5=n.m5||0,r.m5+=1,n.m5=(n.m5+i.time)/r.m5):"createSort"===i.commandName||"updateSort"===i.commandName||"removeSort"===i.commandName?(n.m6=n.m6||0,r.m6+=1,n.m6=(n.m6+i.time)/r.m6):"addEmptyRecord"===i.commandName&&(n.m7=n.m7||0,r.m7+=1,n.m7=(n.m7+i.time)/r.m7)}}catch(e){o.e(e)}finally{o.f()}return n.m1||n.m2||n.m3||n.m4||n.m5||n.m6||n.m7?(n.c1=this._readService.getRecords().length,n.c2=this._readService.getAllFields().length,n):null}},{key:"_startTask",value:function(e){var t=this._configuration.getValue("monitor.sendLog"),n=this._getCommandPerfData(e);n&&(O6e("command perf: %j",n),null==t||t(61,n))}}]);var e}();E6e([Ks(lk)],S6e.prototype,"_configuration",2),E6e([Ks(Aw)],S6e.prototype,"_lifeCycleService",2),E6e([Ks(oA)],S6e.prototype,"_readService",2),E6e([Ks(b6e)],S6e.prototype,"_commandHook",2),S6e=E6e([Gs()],S6e);var x6e=Object.defineProperty,j6e=Object.getOwnPropertyDescriptor,D6e=globalThis;var A6e,R6e,F6e,I6e=(A6e=D6e.window,R6e=D6e.process,F6e=Date,function(){return null!=A6e?A6e.performance.now():null!=R6e?R6e.hrtime()[1]/1e6:(new F6e).getTime()}),P6e=function(){return ll((function e(){sl(this,e),this.commandName=""}),[{key:"beforeExecute",value:function(e){return e._executeAt=I6e(),e}},{key:"afterExecute",value:function(e,t){var n,r,o;this.commandHook.emitHook({commandName:this.commandName,time:(n=t._executeAt,r=I6e(),o=(r-n).toFixed(2),Number(o))})}}])}();function M6e(e,t,n){return t=Sd(t),Od(e,T6e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function T6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T6e=function(){return!!e})()}P6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?j6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&x6e(t,n,i),i}([$s()],P6e);var N6e=Object.defineProperty,B6e=Object.getOwnPropertyDescriptor,V6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?B6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&N6e(t,n,i),i},L6e=function(e){function t(){var e;return sl(this,t),(e=M6e(this,t,arguments)).commandName="setCell",e}return jd(t,e),ll(t)}(P6e);function z6e(e,t,n){return t=Sd(t),Od(e,U6e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function U6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U6e=function(){return!!e})()}V6e([Ks(b6e)],L6e.prototype,"commandHook",2),L6e=V6e([Gs()],L6e);var H6e=Object.defineProperty,q6e=Object.getOwnPropertyDescriptor,W6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?q6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&H6e(t,n,i),i},$6e=function(e){function t(){var e;return sl(this,t),(e=z6e(this,t,arguments)).commandName="switchView",e}return jd(t,e),ll(t)}(P6e);function G6e(e,t,n){return t=Sd(t),Od(e,K6e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function K6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K6e=function(){return!!e})()}W6e([Ks(b6e)],$6e.prototype,"commandHook",2),$6e=W6e([Gs()],$6e);var Y6e=Object.defineProperty,J6e=Object.getOwnPropertyDescriptor,X6e=function(e,t,n,r){for(var o,i=r>1?void 0:r?J6e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Y6e(t,n,i),i},Z6e=function(e){function t(){var e;return sl(this,t),(e=G6e(this,t,arguments)).commandName="createFilter",e}return jd(t,e),ll(t)}(P6e);function Q6e(e,t,n){return t=Sd(t),Od(e,e4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function e4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e4e=function(){return!!e})()}X6e([Ks(b6e)],Z6e.prototype,"commandHook",2),Z6e=X6e([Gs()],Z6e);var t4e=Object.defineProperty,n4e=Object.getOwnPropertyDescriptor,r4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?n4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&t4e(t,n,i),i},o4e=function(e){function t(){var e;return sl(this,t),(e=Q6e(this,t,arguments)).commandName="removeFilter",e}return jd(t,e),ll(t)}(P6e);function i4e(e,t,n){return t=Sd(t),Od(e,a4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function a4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a4e=function(){return!!e})()}r4e([Ks(b6e)],o4e.prototype,"commandHook",2),o4e=r4e([Gs()],o4e);var u4e=Object.defineProperty,l4e=Object.getOwnPropertyDescriptor,c4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?l4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&u4e(t,n,i),i},s4e=function(e){function t(){var e;return sl(this,t),(e=i4e(this,t,arguments)).commandName="updateFilter",e}return jd(t,e),ll(t)}(P6e);function d4e(e,t,n){return t=Sd(t),Od(e,f4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function f4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f4e=function(){return!!e})()}c4e([Ks(b6e)],s4e.prototype,"commandHook",2),s4e=c4e([Gs()],s4e);var p4e=Object.defineProperty,v4e=Object.getOwnPropertyDescriptor,h4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?v4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&p4e(t,n,i),i},g4e=function(e){function t(){var e;return sl(this,t),(e=d4e(this,t,arguments)).commandName="createGridGroup",e}return jd(t,e),ll(t)}(P6e);function m4e(e,t,n){return t=Sd(t),Od(e,y4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function y4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y4e=function(){return!!e})()}h4e([Ks(b6e)],g4e.prototype,"commandHook",2),g4e=h4e([Gs()],g4e);var b4e=Object.defineProperty,w4e=Object.getOwnPropertyDescriptor,_4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?w4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&b4e(t,n,i),i},k4e=function(e){function t(){var e;return sl(this,t),(e=m4e(this,t,arguments)).commandName="removeGridGroup",e}return jd(t,e),ll(t)}(P6e);function C4e(e,t,n){return t=Sd(t),Od(e,E4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function E4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E4e=function(){return!!e})()}_4e([Ks(b6e)],k4e.prototype,"commandHook",2),k4e=_4e([Gs()],k4e);var O4e=Object.defineProperty,S4e=Object.getOwnPropertyDescriptor,x4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?S4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&O4e(t,n,i),i},j4e=function(e){function t(){var e;return sl(this,t),(e=C4e(this,t,arguments)).commandName="updateGridGroup",e}return jd(t,e),ll(t)}(P6e);function D4e(e,t,n){return t=Sd(t),Od(e,A4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function A4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A4e=function(){return!!e})()}x4e([Ks(b6e)],j4e.prototype,"commandHook",2),j4e=x4e([Gs()],j4e);var R4e=Object.defineProperty,F4e=Object.getOwnPropertyDescriptor,I4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?F4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&R4e(t,n,i),i},P4e=function(e){function t(){var e;return sl(this,t),(e=D4e(this,t,arguments)).commandName="createSort",e}return jd(t,e),ll(t)}(P6e);function M4e(e,t,n){return t=Sd(t),Od(e,T4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function T4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T4e=function(){return!!e})()}I4e([Ks(b6e)],P4e.prototype,"commandHook",2),P4e=I4e([Gs()],P4e);var N4e=Object.defineProperty,B4e=Object.getOwnPropertyDescriptor,V4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?B4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&N4e(t,n,i),i},L4e=function(e){function t(){var e;return sl(this,t),(e=M4e(this,t,arguments)).commandName="removeSort",e}return jd(t,e),ll(t)}(P6e);function z4e(e,t,n){return t=Sd(t),Od(e,U4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function U4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U4e=function(){return!!e})()}V4e([Ks(b6e)],L4e.prototype,"commandHook",2),L4e=V4e([Gs()],L4e);var H4e=Object.defineProperty,q4e=Object.getOwnPropertyDescriptor,W4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?q4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&H4e(t,n,i),i},$4e=function(e){function t(){var e;return sl(this,t),(e=z4e(this,t,arguments)).commandName="updateSort",e}return jd(t,e),ll(t)}(P6e);function G4e(e,t,n){return t=Sd(t),Od(e,K4e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function K4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K4e=function(){return!!e})()}W4e([Ks(b6e)],$4e.prototype,"commandHook",2),$4e=W4e([Gs()],$4e);var Y4e=Object.defineProperty,J4e=Object.getOwnPropertyDescriptor,X4e=function(e,t,n,r){for(var o,i=r>1?void 0:r?J4e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Y4e(t,n,i),i},Z4e=function(e){function t(){var e;return sl(this,t),(e=G4e(this,t,arguments)).commandName="addView",e}return jd(t,e),ll(t)}(P6e);function Q4e(e,t,n){return t=Sd(t),Od(e,e8e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function e8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e8e=function(){return!!e})()}X4e([Ks(b6e)],Z4e.prototype,"commandHook",2),Z4e=X4e([Gs()],Z4e);var t8e=Object.defineProperty,n8e=Object.getOwnPropertyDescriptor,r8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?n8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&t8e(t,n,i),i},o8e=function(e){function t(){var e;return sl(this,t),(e=Q4e(this,t,arguments)).commandName="addEmptyRecord",e}return jd(t,e),ll(t)}(P6e);r8e([Ks(b6e)],o8e.prototype,"commandHook",2),o8e=r8e([Gs()],o8e);var i8e=Object.defineProperty,a8e=Object.getOwnPropertyDescriptor,u8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?a8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&i8e(t,n,i),i},l8e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){this._initHooks(),this._monitorService.startMainPerfLog(),this._monitorService.startCommandPerfLog()}},{key:"_initHooks",value:function(){this._commandRegistry.registerCommandHook(this._setCellCommandHook.commandName,this._setCellCommandHook),this._commandRegistry.registerCommandHook(this._switchViewCommandHook.commandName,this._switchViewCommandHook),this._commandRegistry.registerCommandHook(this._addViewCommandHook.commandName,this._addViewCommandHook),this._commandRegistry.registerCommandHook(this._createFilterCellCommandHook.commandName,this._createFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._removeFilterCellCommandHook.commandName,this._removeFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._updateFilterCellCommandHook.commandName,this._updateFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._createGroupCellCommandHook.commandName,this._createGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._removeGroupCellCommandHook.commandName,this._removeGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._updateGroupCellCommandHook.commandName,this._updateGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._createSortCellCommandHook.commandName,this._createSortCellCommandHook),this._commandRegistry.registerCommandHook(this._removeSortCellCommandHook.commandName,this._removeSortCellCommandHook),this._commandRegistry.registerCommandHook(this._updateSortCellCommandHook.commandName,this._updateSortCellCommandHook),this._commandRegistry.registerCommandHook(this._addEmptyRecordCommandHook.commandName,this._addEmptyRecordCommandHook)}}],[{key:"pluginModule",value:function(){return dd().register(S6e).register(b6e).register(L6e).register(Z4e).register($6e).register(Z6e).register(o4e).register(s4e).register(g4e).register(k4e).register(j4e).register(P4e).register(L4e).register($4e).register(o8e).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"monitor",type:"object",properties:{sendLog:{typeof:"function",description:"外部传入的日志处理对象"},startAt:{type:"number",description:"编辑器开始加载时间"}}})}}])}();l8e.pluginName="kernel-monitor",u8e([Ks(S6e)],l8e.prototype,"_monitorService",2),u8e([Ks(GA)],l8e.prototype,"_commandRegistry",2),u8e([Ks(L6e)],l8e.prototype,"_setCellCommandHook",2),u8e([Ks($6e)],l8e.prototype,"_switchViewCommandHook",2),u8e([Ks(Z4e)],l8e.prototype,"_addViewCommandHook",2),u8e([Ks(Z6e)],l8e.prototype,"_createFilterCellCommandHook",2),u8e([Ks(o4e)],l8e.prototype,"_removeFilterCellCommandHook",2),u8e([Ks(s4e)],l8e.prototype,"_updateFilterCellCommandHook",2),u8e([Ks(g4e)],l8e.prototype,"_createGroupCellCommandHook",2),u8e([Ks(k4e)],l8e.prototype,"_removeGroupCellCommandHook",2),u8e([Ks(j4e)],l8e.prototype,"_updateGroupCellCommandHook",2),u8e([Ks(P4e)],l8e.prototype,"_createSortCellCommandHook",2),u8e([Ks(L4e)],l8e.prototype,"_removeSortCellCommandHook",2),u8e([Ks($4e)],l8e.prototype,"_updateSortCellCommandHook",2),u8e([Ks(o8e)],l8e.prototype,"_addEmptyRecordCommandHook",2),l8e=u8e([Gs({contrib:[MA]})],l8e);var c8e=Is.defineToken("ServerContribution"),s8e=Is.defineToken("SyncQueueToken"),d8e=function(e){return e.RUNNING="running",e.SUCCESS="success",e}(d8e||{}),f8e=function(e){return e.SUMMARY="summary",e.EXTRACT="extract",e.CUSTOM="custom",e}(f8e||{}),p8e=Is.defineToken("AiWritingServiceToken"),v8e=Is.defineToken("AiWritingTaskServiceToken"),h8e=Is.defineToken("AiWritingDatasourceContribution"),g8e=Is.defineToken("AiWritingDatasourceToken");function m8e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y8e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m8e(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m8e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b8e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w8e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function w8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _8e=Object.defineProperty,k8e=Object.getOwnPropertyDescriptor,C8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?k8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_8e(t,n,i),i};function E8e(e,t){var n,r=b8e(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t(o))return o}}catch(e){r.e(e)}finally{r.f()}return null}var O8e=function(){return ll((function e(){sl(this,e)}),[{key:"_queueTask",get:function(){return this.aiWritingTaskService.queueTask}},{key:"getAiWritingConfig",value:function(e){var t=this._modelService.getModel("ai_writing").findOne({field_uuid:e}),n=this._readService.getField(e||"");return(null==t?void 0:t.get("open"))&&n&&n.get("type")!==HC.TEXT?{open:!1,type:f8e.SUMMARY,prompt:"",auto:!1}:null==t?void 0:t.toJSON()}},{key:"_generatePrompt",value:function(e,t,n){var r="",o="";switch(t.forEach((function(e,r){o+="".concat(n.get(e.fieldId)||"","是").concat(e.formatValue||""),r<t.length-1&&(o+="，")})),e.type){case f8e.SUMMARY:r="帮我给以下内容生成摘要，尽可能简洁：".concat(o);break;case f8e.EXTRACT:r="帮我总结出以下内容里的".concat(e.prompt,"：").concat(o);break;case f8e.CUSTOM:r="帮我给以下内容".concat(e.prompt,"：").concat(o)}return r}},{key:"_getAiWritingData",value:(r=rl(ml.mark((function e(t,n,r,o){var i,a,u;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this._generatePrompt(t,uk(o,(function(e){return e.fieldId!==n})),r),e.next=4,null==(i=this.aiWritingDatasource)?void 0:i.handlePost({content:a,type:"custom"});case 4:return u=e.sent,e.abrupt("return",(null==u?void 0:u.data.result)||"");case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,t,n,o){return r.apply(this,arguments)})},{key:"autofillCell",value:(n=rl(ml.mark((function e(t,n,r,o){var i,a,u,l,c;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._readService.getViewRecordCells(r),u=E8e(a,(function(e){return e.fieldId===n})),e.next=4,this._getAiWritingData(t,n,o,a);case 4:if((l=e.sent)&&u){e.next=7;break}return e.abrupt("return");case 7:c=y8e(y8e({},u),{},{value:l}),null==(i=this._commandService)||i.execCommand("setCell",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o){return n.apply(this,arguments)})},{key:"startAiWriting",value:(t=rl(ml.mark((function e(t,n){var r,o,i,a,u,l,c=this;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=this._readService.getField(t),i=this.getAiWritingConfig(t),(null==o?void 0:o.get("type"))===HC.TEXT&&(null==i?void 0:i.open)){e.next=6;break}return e.abrupt("return",!1);case 6:if(a=this._readService.getAllFields(),u=new Map,null==a||a.forEach((function(e){u.set(e.get("uuid"),e.get("name"))})),!n){e.next=14;break}return e.next=12,this.autofillCell(i,t,n,u);case 12:e.next=17;break;case 14:l=this._readService.getRecords(),null==(r=this.aiWritingTaskService)||r.emitStartAiWritingTask(t),l.forEach((function(e){var n,r="".concat(t,"-").concat(e.get("uuid"));null==(n=c._queueTask)||n.addJob(r,function(){var n=rl(ml.mark((function n(o){var a;return ml.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.autofillCell(i,t,e.get("uuid"),u);case 3:n.next=9;break;case 5:return n.prev=5,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",o.onError(n.t0));case 9:o.onSuccess(),null==(a=c._queueTask)||a.removeSuccessJob(r);case 11:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}())}));case 17:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"stopAiWriting",value:(e=rl(ml.mark((function e(t){var n;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:null==(n=this.aiWritingTaskService)||n.emitStopAiWritingTask(t);case 3:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:function(){var e;null==(e=this.aiWritingTaskService)||e.destroy()}}]);var e,t,n,r}();C8e([Ks(oO)],O8e.prototype,"_modelService",2),C8e([Ks(oA)],O8e.prototype,"_readService",2),C8e([Ks(nR)],O8e.prototype,"_commandService",2),C8e([Ks(v8e)],O8e.prototype,"aiWritingTaskService",2),C8e([Ks(g8e)],O8e.prototype,"aiWritingDatasource",2),O8e=C8e([Gs({token:p8e})],O8e);var S8e=[{uuid:f8e.SUMMARY,name:Lw("内容总结"),placeholder:Lw("将自动对每条记录进行总结")},{uuid:f8e.CUSTOM,name:Lw("自定义"),placeholder:Lw("输入智能填写规则\n如：为每个商品生成 50 字的宣传文案")}],x8e=Object.defineProperty,j8e=Object.getOwnPropertyDescriptor,D8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?j8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&x8e(t,n,i),i},A8e=function(){return ll((function e(){sl(this,e)}),[{key:"getProvider",value:function(){var e=this.serverProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerServer()}},{key:"hasProvider",value:function(){return this.serverProvider.getContributions().length>0}}])}();function R8e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F8e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function F8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}D8e([yd(c8e)],A8e.prototype,"serverProvider",2),A8e=D8e([Gs()],A8e);var I8e=Object.defineProperty,P8e=Object.getOwnPropertyDescriptor,M8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?P8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&I8e(t,n,i),i},T8e=function(){return ll((function e(){sl(this,e)}),[{key:"getCommonParams",value:function(e){var t,n,r=e?this._readService.getView(e):this._readService.getActiveView();this.tableId||(this.tableId=null==(t=this._readService.getTable())?void 0:t.get("uuid"));var o={sheetId:this.tableId,type:null==r?void 0:r.get("type"),viewId:(null==r?void 0:r.get("uuid"))||e},i=null==(n=this._serverRegistry.getProvider())?void 0:n.processParams;return i&&(o=i(o)),o}},{key:"getSdk",value:function(){var e;return null==(e=this._serverRegistry.getProvider())?void 0:e.apiSdk}},{key:"log",value:function(e,t){try{this._logger.log({type:"server-ms",action:e,data:(new Date).getTime()-t})}catch(e){console.error(e)}}},{key:"setActiveView",value:function(){var e=this,t=this._readService.getTable(),n=this.getCommonParams(t.get("active_view_uuid"));this._syncQueue.addJob(rl(ml.mark((function t(){var r;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(new Date).getTime(),t.next=3,e.getSdk().TableViewController.setActive(n);case 3:e.log("TableViewController.setActive",r);case 4:case"end":return t.stop()}}),t)}))))}},{key:"updateCell",value:function(e){var t=this,n=this.getCommonParams();n.records=[];var r,o=R8e(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=this._readService.getOriginRecord(i.recordId),u=this._readService.getCell(i.fieldId,i.recordId);u&&a&&n.records.push({data:this._toProcess.toValue(u),fieldId:u.fieldId,recordId:u.recordId})}}catch(e){o.e(e)}finally{o.f()}0!==n.records.length&&this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordValueController.bulkUpdate(n);case 3:t.log("TableRecordValueController.bulkUpdate",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addRecord",value:function(e){var t=this,n=this.getCommonParams();n.data=e.map((function(e){return{id:e}})),this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordController.create(n);case 3:t.log("TableRecordController.create",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"removeRecord",value:function(e){var t=this,n=this.getCommonParams();n.recordIds=e,this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordController.remove(n);case 3:t.log("TableRecordController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addField",value:function(e){var t=this,n=this.getCommonParams();n.fields=e.map((function(e){return t._toProcess.toColumn(new Y_(e))})),this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableFieldController.create(n);case 3:t.log("TableFieldController.create",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"updateField",value:function(e,t){var n=this,r=this._readService.getField(e),o=this._aiWritingService.getAiWritingConfig(e),i=this.getCommonParams();i.field=this._toProcess.toColumn(r),o&&(i.field.enableAI=o.open,i.field.aiWritingType=o.type,i.field.aiPrompt=o.prompt,i.field.enableAutoAIGC=o.auto),this._syncQueue.addJob(rl(ml.mark((function e(){var t;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),e.next=3,n.getSdk().TableFieldController.update(i);case 3:n.log("TableFieldController.update",t);case 4:case"end":return e.stop()}}),e)})))),t&&this._updateFieldRecord()}},{key:"_updateFieldRecord",value:function(){var e=this,t=this.getCommonParams(),n=this._readService.getRecords();t.data=nk(n,(function(t){var n=e._readService.getOriginRecord(t.get("uuid"));return{id:t.get("uuid"),data:JSON.stringify(e._toProcess.toRecord(n))}})),this._syncQueue.addJob(rl(ml.mark((function n(){var r;return ml.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(new Date).getTime(),n.next=3,e.getSdk().TableRecordController.update(t);case 3:e.log("TableRecordController.update",r);case 4:case"end":return n.stop()}}),n)}))))}},{key:"removeField",value:function(e){var t=this,n=this.getCommonParams();n.fieldIds=e,this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableFieldController.remove(n);case 3:t.log("TableFieldController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addView",value:function(e){var t=this,n=this._getViewData(e);if(n){var r=this.getCommonParams(e);r.data=this._toProcess.toView(n),this._syncQueue.addJob(rl(ml.mark((function e(){var n,o,i,a;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.create(r);case 3:if(a=e.sent,t.log("TableViewController.create",i),a){e.next=7;break}return e.abrupt("return");case 7:t._model.viewModel.upsert({uuid:null==(n=a.data)?void 0:n.view_id},{id:null==(o=a.data)?void 0:o.data.iid},{slient:!0});case 8:case"end":return e.stop()}}),e)}))))}}},{key:"updateView",value:function(e){var t=this,n=this._getViewData(e);if(n){var r=this.getCommonParams(e);r.data=this._toProcess.toView(n),this._syncQueue.addJob(rl(ml.mark((function e(){var n;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.update(r);case 3:t.log("TableViewController.update",n);case 4:case"end":return e.stop()}}),e)}))))}}},{key:"updateViewOrder",value:function(e,t){var n=this,r=this.getCommonParams(e);r.targetViewId=t,this._syncQueue.addJob(rl(ml.mark((function e(){var t;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),e.next=3,n.getSdk().TableViewController.moveAfter(r);case 3:n.log("TableViewController.moveAfter",t);case 4:case"end":return e.stop()}}),e)}))))}},{key:"removeView",value:function(e){var t=this,n=this.getCommonParams(e);this._syncQueue.addJob(rl(ml.mark((function e(){var r;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.remove(n);case 3:t.log("TableViewController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"updateForm",value:function(e,t){var n=this;this._syncQueue.addJob(rl(ml.mark((function r(){var o,i,a,u,l;return ml.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n._model.viewModel.findOne({uuid:e}),a={type:"form",status:t,viewId:e,target_id:null==i?void 0:i.get("id"),target_type:"Skythings.View"},(u=null==(o=n._serverRegistry.getProvider())?void 0:o.processParams)&&(a=u(a)),l=(new Date).getTime(),r.next=7,n.getSdk().TableShareController.update(a);case 7:n.log("TableShareController.update",l);case 8:case"end":return r.stop()}}),r)}))))}},{key:"updateContent",value:function(e,t){var n=this,r=this._readService.getTable().get("uuid");this._syncQueue.addJob(rl(ml.mark((function o(){var i;return ml.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=(new Date).getTime(),o.next=3,n._contentDatasource.handlePut(e,r,t);case 3:n.log("_contentDatasource.handlePut",i);case 4:case"end":return o.stop()}}),o)}))))}},{key:"_getViewData",value:function(e){var t,n={},r=this._readService.getView(e);return r?(n.view=this._readService.getView(r.get("uuid")),n.sort=this._readService.getViewSort(r.get("uuid")),n.stats=this._readService.getViewStats(r.get("uuid")),n.viewGroup=this._readService.getViewGroup(r.get("uuid")),n.filters=this._readService.getViewFilters(r.get("uuid")),n.groupViewRecords=(null==(t=n.viewGroup)?void 0:t.group)?this._readService.getGroupViewRecords(r.get("uuid")):null,n.viewConfig=this._readService.getViewConfig(r.get("uuid")),n):null}}])}();function N8e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B8e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function B8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}M8e([Ks(oA)],T8e.prototype,"_readService",2),M8e([Ks(KF)],T8e.prototype,"_toProcess",2),M8e([Ks(A8e)],T8e.prototype,"_serverRegistry",2),M8e([Ks(s8e)],T8e.prototype,"_syncQueue",2),M8e([Ks(p8e)],T8e.prototype,"_aiWritingService",2),M8e([Ks(e3e)],T8e.prototype,"_contentDatasource",2),M8e([Ks(jA)],T8e.prototype,"_logger",2),M8e([Ks(fx)],T8e.prototype,"_model",2),T8e=M8e([Gs()],T8e);var V8e=Object.defineProperty,L8e=Object.getOwnPropertyDescriptor,z8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?L8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&V8e(t,n,i),i},U8e=function(){return ll((function e(){var t=this;sl(this,e),this._events=[],this.isSync=!1,this.handleEvents=function(e){if(t._abilityService.canUpdate(mR.TABLE)){var n,r=N8e(e);try{var o=function(){var e=n.value;if(!t._isCurrentOrigin(e.transaction))return 0;var r=e.path[0],o=e.path.slice(1,e.path.length),i=t._getTrustDeleted(e)||[],a=t._getTruestAdded(e)||[];if("view"===r&&1===e.changes.deleted.size&&1===e.changes.added.size&&0===i.length&&0===a.length){var u,l=Array.from(e.changes.added)[0].content.type,c=t._readService.getViews(),s=ek(c,(function(e){return e.get("uuid")===l.get("uuid")}))-1;return s>-1&&(u=c.get(s)),t.syncEvents({table:r,command:"moveAfter",path:o,item:l,targetItem:u}),0}var d=!1;if(e.changes.deleted.size>0){var f,p=N8e(i);try{for(p.s();!(f=p.n()).done;){var v=f.value;t.syncEvents({table:r,command:"delete",path:o,item:v}),d=!0}}catch(e){p.e(e)}finally{p.f()}}if(e.changes.added.size>0){var h,g=N8e(a);try{for(g.s();!(h=g.n()).done;){var m=h.value;t.syncEvents({table:r,command:"insert",path:o,item:m}),d=!0}}catch(e){g.e(e)}finally{g.f()}}if(d)return 0;if(e.keys){var y,b=N8e(e.keys);try{for(b.s();!(y=b.n()).done;){var w=y.value;if(32===w[0].length)if("delete"===w[1].action){var _=w[1].oldValue;if(_ instanceof Wh){var k,C=(_=_._start).content.type._map,E=C.keys(),O=new Y_,S=N8e(E);try{for(S.s();!(k=S.n()).done;){var x=k.value;O.set(x,C.get(x).content.arr[0])}}catch(e){S.e(e)}finally{S.f()}_=O}t.syncEvents({table:r,command:"delete",path:o,item:_}),d=!0}else if("add"===w[1].action){var j=e.target;w[0]&&(j=j.get(w[0])),j instanceof Wh&&(j=j.get(0)),t.syncEvents({table:r,command:"insert",path:o,item:j,keysChanged:e.keysChanged}),d=!0}else if("update"===w[1].action){var D=e.target;w[0]&&(D=D.get(w[0])),D instanceof Wh&&(D=D.get(0)),t.syncEvents({table:r,command:"update",path:o,item:D,keysChanged:e.keysChanged}),d=!0}}}catch(e){b.e(e)}finally{b.f()}}if(d)return 0;if(e.target instanceof Wh){var A,R=N8e(e.target);try{for(R.s();!(A=R.n()).done;){var F=A.value;t.syncEvents({table:r,command:"update",path:o,item:F})}}catch(e){R.e(e)}finally{R.f()}}else t.syncEvents({table:r,command:"update",path:o,item:e.target,keysChanged:e.keysChanged})};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}},this.startTaskWithDebounce=fu((function(){var e=t._events;t.startTask(e),t._events=[]}),300)}),[{key:"start",value:function(){this._database.root&&this._database.root.observeDeep&&this._database.root.observeDeep(this.handleEvents)}},{key:"_isCurrentOrigin",value:function(e){var t=e.origin;if(null==t?void 0:t.trackedOrigins){var n,r=N8e(t.trackedOrigins);try{for(r.s();!(n=r.n()).done;){if(n.value===this._database.struct.ystruct)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}return t===this._database.struct.ystruct}},{key:"_getTrustDeleted",value:function(e){for(var t=Array.from(e.changes.deleted),n=Array.from(e.changes.added).reduce((function(e,t){return e[t.content.type._map.get("uuid").content.arr[0]]=!0,e}),{}),r=[],o=0,i=t;o<i.length;o++){var a=i[o];if(a){var u=a.content.type._map;if(!n[u.get("uuid").content.arr[0]]){var l,c=u.keys(),s=new Y_,d=N8e(c);try{for(d.s();!(l=d.n()).done;){var f=l.value;s.set(f,u.get(f).content.arr[0])}}catch(e){d.e(e)}finally{d.f()}r.push(s)}}}return r}},{key:"_getTruestAdded",value:function(e){for(var t=Array.from(e.changes.deleted),n=Array.from(e.changes.added),r=t.reduce((function(e,t){return e[t.content.type._map.get("uuid").content.arr[0]]=!0,e}),{}),o=[],i=0,a=n;i<a.length;i++){var u=a[i].content.type;r[u.get("uuid")]||o.push(u)}return o}},{key:"syncEvents",value:function(e){if(this._events.push(e),this.isSync)return this.startTask(this._events),void(this._events=[]);this.startTaskWithDebounce()}},{key:"startTask",value:function(e){if(e.length>0){this.addField(e),this.updateField(e),this.removeField(e),this.addRecord(e);var t=this.removeRecord(e);this.updateCell(e,t),this.addView(e),this.updateView(e),this.removeView(e),this.updateContent(e),this.updateForm(e),this.updateTable(e)}}},{key:"addField",value:function(e){var t,n,r,o=[],i=N8e(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("field"===a.table&&"insert"===a.command){var u=null==(n=this._readService.getField(null==(t=a.item)?void 0:t.get("uuid")))?void 0:n.toJSON();o.push(u)}}}catch(e){i.e(e)}finally{i.f()}o.length>0&&this._syncHelper.addField(o)}},{key:"updateField",value:function(e){var t,n,r,o,i,a,u,l,c,s,d,f={},p=N8e(e);try{for(p.s();!(d=p.n()).done;){var v=d.value;if("field"===v.table&&("delete"===v.command||"insert"===v.command))f[null==(t=v.item)?void 0:t.get("uuid")]=!0}}catch(e){p.e(e)}finally{p.f()}var h,g={},m=N8e(e);try{for(m.s();!(h=m.n()).done;){var y=h.value,b=void 0;if("field"===y.table&&"update"===y.command)b=null==(n=y.item)?void 0:n.get("uuid");else if("field_option"===y.table){if(!(b=null==(r=y.item)?void 0:r.get("field_uuid"))&&y.keysChanged){var w=Array.from(y.keysChanged)[0];b=null==(a=null==(i=null==(o=y.item)?void 0:o.get(w))?void 0:i.get(0))?void 0:a.get("field_uuid")}}else if("ai_writing"===y.table&&!(b=null==(u=y.item)?void 0:u.get("field_uuid"))&&y.keysChanged){var _=Array.from(y.keysChanged)[0];b=null==(c=null==(l=y.item)?void 0:l.get(_))?void 0:c.get(0).get("field_uuid")}f[b]||b&&(g[b]||(g[b]=y))}}catch(e){m.e(e)}finally{m.f()}for(var k=0,C=Object.keys(g);k<C.length;k++){var E=C[k],O=g[E];this._syncHelper.updateField(E,null==(s=O.keysChanged)?void 0:s.has("type"))}}},{key:"removeField",value:function(e){var t,n,r=[],o=N8e(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;"field"===i.table&&"delete"===i.command&&r.push(null==(t=i.item)?void 0:t.get("uuid"))}}catch(e){o.e(e)}finally{o.f()}r.length>0&&this._syncHelper.removeField(r)}},{key:"addView",value:function(e){var t,n,r=N8e(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;"view"===o.table&&"insert"===o.command&&this._syncHelper.addView(null==(t=o.item)?void 0:t.get("uuid"))}}catch(e){r.e(e)}finally{r.f()}}},{key:"addRecord",value:function(e){var t,n,r=[],o=N8e(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;"record"===i.table&&"insert"===i.command&&r.push(null==(t=i.item)?void 0:t.get("uuid"))}}catch(e){o.e(e)}finally{o.f()}r.length>0&&this._syncHelper.addRecord(r)}},{key:"removeRecord",value:function(e){var t,n,r=[],o=N8e(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("record"===i.table&&"delete"===i.command){var a=null==(t=i.item)?void 0:t.get("uuid");a&&r.push(a)}}}catch(e){o.e(e)}finally{o.f()}return r.length>0&&this._syncHelper.removeRecord(Ju(r)),r}},{key:"updateCell",value:function(e){var t,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=[],l=N8e(e);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(["field_boolean","field_date","field_number","field_select","field_string","field_uri","cell"].includes(c.table)){var s=void 0;if(1===c.path.length){var d=null==(t=c.item)?void 0:t.keys();if(!d)return;var f,p=N8e(d);try{for(p.s();!(f=p.n()).done;){var v=f.value;if(!(null==a?void 0:a.includes(v))){var h=null==(o=null==(r=null==(n=c.item)?void 0:n.get(v))?void 0:r.get(0))?void 0:o.get("field_uuid");if(h){if("cell"===c.table&&"update"===c.command){var g=this._readService.getCell(h,v);if(null==g?void 0:g.by_system)continue}u.push({fieldId:h,recordId:v})}}}}catch(e){p.e(e)}finally{p.f()}}else if(2===c.path.length){var m=c.path[1];if(c.keysChanged)for(var y=Array.from(c.keysChanged),b=0,w=y;b<w.length;b++){var _=w[b];if(!(null==a?void 0:a.includes(_))){if("cell"===c.table&&"update"===c.command){var k=this._readService.getCell(m,_);if(null==k?void 0:k.by_system)continue}u.push({fieldId:m,recordId:_})}}}else{var C=c.path[1];if(!(s=c.path[2])&&c.keysChanged&&(s=Array.from(c.keysChanged)[0]),!C||!s)continue;if(null==a?void 0:a.includes(s))continue;if("cell"===c.table&&"update"===c.command){var E=this._readService.getCell(C,s);if(null==E?void 0:E.by_system)continue}u.push({fieldId:C,recordId:s})}}}}catch(e){l.e(e)}finally{l.f()}u.length>0&&this._syncHelper.updateCell(Xu(u,(function(e){return e.fieldId+":"+e.recordId})))}},{key:"updateView",value:function(e){var t,n,r,o,i,a,u,l,c,s={},d={},f=N8e(e);try{for(f.s();!(c=f.n()).done;){var p=c.value;if("view"===p.table&&("delete"===p.command||"insert"===p.command)){var v=null==(t=p.item)?void 0:t.get("uuid");d[v]=!0,delete s[v]}if("view"===p.table&&"update"===p.command){var h=null==(n=p.item)?void 0:n.get("uuid");if(d[h])continue;s[h]=!0}else if(["view_config","view_field","view_record","sort","group","group_item","filter","stat"].includes(p.table)){var g=void 0;if(1===p.path.length&&p.keysChanged)g=Array.from(p.keysChanged)[0];else if(2===p.path.length&&p.keysChanged){var m=Array.from(p.keysChanged)[0];g=null==(i=null==(o=null==(r=p.item)?void 0:r.get(m))?void 0:o.get(0))?void 0:i.get("view_uuid")}else g=null==(a=p.item)?void 0:a.get("view_uuid");if(d[g]||!g)continue;s[g]=!0}if("view"===p.table&&"moveAfter"===p.command){var y=null==(u=p.item)?void 0:u.get("uuid"),b=null==(l=p.targetItem)?void 0:l.get("uuid");this._syncHelper.updateViewOrder(y,b)}}}catch(e){f.e(e)}finally{f.f()}for(var w=0,_=Object.keys(s);w<_.length;w++){var k=_[w];this._syncHelper.updateView(k)}}},{key:"removeView",value:function(e){var t,n,r=N8e(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("view"===o.table&&"delete"===o.command){var i=null==(t=o.item)?void 0:t.get("uuid");this._syncHelper.removeView(i)}}}catch(e){r.e(e)}finally{r.f()}}},{key:"updateContent",value:function(e){var t,n,r,o,i,a,u,l,c={},s=N8e(e);try{for(s.s();!(l=s.n()).done;){var d=l.value;if("content"===d.table&&("update"===d.command||"insert"===d.command)){var f=null==(t=d.item)?void 0:t.get("target_uuid"),p=null==(n=d.item)?void 0:n.get("target_type"),v=null==(r=d.item)?void 0:r.get("status");if("record"!==p||0===v)continue;c[f]=d}}}catch(e){s.e(e)}finally{s.f()}for(var h=0,g=Object.keys(c);h<g.length;h++){var m=c[g[h]];this._syncHelper.updateContent(null==(o=m.item)?void 0:o.get("target_uuid"),{format:null==(i=m.item)?void 0:i.get("format"),html:null==(a=m.item)?void 0:a.get("html"),source:null==(u=m.item)?void 0:u.get("source")})}}},{key:"updateForm",value:function(e){var t,n,r,o=N8e(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("view_share"===i.table&&("update"===i.command||"insert"===i.command)){var a=void 0,u=void 0;if(0===i.path.length){var l=null==(t=i.item)?void 0:t.get("data"),c=Array.from(l.keys())[0];a=null==(n=l.get(c))?void 0:n.get(0)}else 1===i.path.length?(u=Array.from(i.keysChanged)[0],a=i.item):a=i.item;var s=null==a?void 0:a.get("status");if(u=u||(null==a?void 0:a.get("view_uuid")),s===XC.ACTIVE)return;this._syncHelper.updateForm(u,s)}}}catch(e){o.e(e)}finally{o.f()}}},{key:"updateTable",value:function(e){var t,n=!1,r=N8e(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;["table"].includes(o.table)&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}n&&this._syncHelper.setActiveView()}},{key:"destroy",value:function(){this._database.root.unobserveDeep(this.handleEvents)}}])}();z8e([Ks(L_)],U8e.prototype,"_database",2),z8e([Ks(oA)],U8e.prototype,"_readService",2),z8e([Ks(RR)],U8e.prototype,"_abilityService",2),z8e([Ks(T8e)],U8e.prototype,"_syncHelper",2),U8e=z8e([Gs()],U8e);var H8e=Object.defineProperty,q8e=Object.getOwnPropertyDescriptor,W8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?q8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&H8e(t,n,i),i},$8e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){var e=this;this._syncQueue.init(),this._lifecycleService.when(Dw.Rendered,(function(){setTimeout((function(){e._hasInited||(e._syncYjs.start(),e._hasInited=!0)}),1e3)}))}},{key:"destroy",value:function(){this._syncQueue.destroy()}}])}();W8e([Ks(Aw)],$8e.prototype,"_lifecycleService",2),W8e([Ks(U8e)],$8e.prototype,"_syncYjs",2),W8e([Ks(s8e)],$8e.prototype,"_syncQueue",2),$8e=W8e([Gs()],$8e);var G8e=Object.defineProperty,K8e=Object.getOwnPropertyDescriptor,Y8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?K8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&G8e(t,n,i),i},J8e=function(){return ll((function e(){sl(this,e),this._onSyncChange=new Lk,this.onSyncChange=this._onSyncChange.event}),[{key:"init",value:function(){var e=this;this._queueTask=this._taskService.createQueueTask({name:"服务端接口同步任务队列",parallel:1}),this._queueTask.onDidStatusChange((function(t){t.status===sF.PENDING?e._onSyncChange.emit({status:d8e.RUNNING}):t.status===sF.WAITING&&e._onSyncChange.emit({status:d8e.SUCCESS})})),this.timerId=setInterval((function(){var t;null==(t=e._queueTask)||t.resume()}),1e3)}},{key:"destroy",value:function(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}},{key:"addJob",value:function(e){var t;null==(t=this._queueTask)||t.addJob(function(){var t=rl(ml.mark((function t(n){return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",n.onError(t.t0));case 9:n.onSuccess();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}}])}();Y8e([Ks(EF)],J8e.prototype,"_taskService",2),J8e=Y8e([Gs({token:s8e})],J8e);var X8e=Object.defineProperty,Z8e=Object.getOwnPropertyDescriptor,Q8e=function(e,t,n,r){for(var o,i=r>1?void 0:r?Z8e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&X8e(t,n,i),i},e9e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){this._serverRegistry.hasProvider()&&this._syncServer.init()}},{key:"destroy",value:function(){this._syncServer.destroy()}}],[{key:"pluginModule",value:function(){return dd().contribution(c8e).register(A8e).register(T8e).register($8e).register(J8e).register(U8e).register(this)}}])}();function t9e(e,t,n){return t=Sd(t),Od(e,n9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function n9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n9e=function(){return!!e})()}e9e.pluginName="kernel-server",Q8e([Ks($8e)],e9e.prototype,"_syncServer",2),Q8e([Ks(A8e)],e9e.prototype,"_serverRegistry",2),e9e=Q8e([Gs({contrib:MA})],e9e);var r9e=function(e){function t(){return sl(this,t),t9e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,open:e.open,type:f8e.SUMMARY,prompt:"",auto:!1}),!0}}])}($A);function o9e(e,t,n){return t=Sd(t),Od(e,i9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function i9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i9e=function(){return!!e})()}r9e.commandName="updateAiWritingOpen";var a9e=function(e){function t(){return sl(this,t),o9e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.modelService.getModel("ai_writing"),n={field_uuid:e.fieldId,type:e.type};return e.type!==f8e.SUMMARY&&(n.prompt=""),t.upsert({field_uuid:e.fieldId},n),!0}}])}($A);function u9e(e,t,n){return t=Sd(t),Od(e,l9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function l9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l9e=function(){return!!e})()}a9e.commandName="updateAiWritingType";var c9e=function(e){function t(){return sl(this,t),u9e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,prompt:e.prompt}),!0}}])}($A);function s9e(e,t,n){return t=Sd(t),Od(e,d9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function d9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d9e=function(){return!!e})()}c9e.commandName="updateAiWritingPrompt";var f9e=Object.defineProperty,p9e=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&f9e(t,n,i),i},v9e=function(e){function t(){return sl(this,t),s9e(this,t,arguments)}return jd(t,e),ll(t)}(iO);function h9e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g9e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g9e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function g9e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}v9e.table="ai_writing",v9e.indexes=["field_uuid"],p9e([OE()],v9e.prototype,"field_uuid"),p9e([OE()],v9e.prototype,"open"),p9e([OE()],v9e.prototype,"type"),p9e([OE()],v9e.prototype,"prompt"),p9e([OE()],v9e.prototype,"auto");var m9e=Object.defineProperty,y9e=Object.getOwnPropertyDescriptor,b9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?y9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&m9e(t,n,i),i},w9e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){var e,t,n=h9e(this.aiWritingDatasourceProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value,o=null==(e=r.registerAiWritingDatasourcePost)?void 0:e.call(r);o&&(this._datasourcePost=o)}}catch(e){n.e(e)}finally{n.f()}}},{key:"Post",get:function(){return this._datasourcePost}}])}();b9e([yd(h8e),As()],w9e.prototype,"aiWritingDatasourceProvider",2),w9e=b9e([Gs()],w9e);var _9e=Object.defineProperty,k9e=Object.getOwnPropertyDescriptor,C9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?k9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_9e(t,n,i),i},E9e=function(){return ll((function e(){sl(this,e)}),[{key:"handlePost",value:function(e){return this._aiWritingDatasourceRegistry.Post(e)}}])}();C9e([Ks(w9e)],E9e.prototype,"_aiWritingDatasourceRegistry",2),E9e=C9e([Gs({token:g8e})],E9e);var O9e=Object.defineProperty,S9e=Object.getOwnPropertyDescriptor,x9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?S9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&O9e(t,n,i),i},j9e=function(){return ll((function e(){sl(this,e),this._onAiWritingStatusChange=new Lk,this.onAiWritingStatusChange=this._onAiWritingStatusChange.event,this.queueTask=null,this.taskListener=null,this.isGenerating=!1,this.generateFieldId=null}),[{key:"init",value:function(){this.queueTask=this._taskService.createQueueTask({name:"智能填写任务队列",parallel:3})}},{key:"clearTask",value:function(){var e,t;null==(e=this.queueTask)||e.destroy(),null==(t=this.taskListener)||t.destroy()}},{key:"listenEvent",value:function(){var e,t=this;this.clearTask(),this.taskListener=null==(e=this.queueTask)?void 0:e.onDidStatusChange((function(e){var n,r;e.status!==sF.WAITING||(null==(n=t.queueTask)?void 0:n.hasPenddingJob())||(null==(r=t.queueTask)?void 0:r.hasRuningJob())||(t.isGenerating=!1,t._onAiWritingStatusChange.emit({isGenerating:t.isGenerating,fieldId:t.generateFieldId,type:"auto"}),t.generateFieldId=null,v.a.success(Lw("已重新填写")))}))}},{key:"destroy",value:function(){this.clearTask(),this.queueTask=null}},{key:"emitStartAiWritingTask",value:function(e){this.listenEvent(),this.isGenerating=!0,this.generateFieldId=e,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:this.generateFieldId,type:"manual"})}},{key:"emitStopAiWritingTask",value:function(e){this.clearTask(),this.isGenerating=!1,this.generateFieldId=null,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:e,type:"manual"})}},{key:"isFieldGenerating",value:function(e){return this.isGenerating&&e===this.generateFieldId}}])}();x9e([Ks(EF)],j9e.prototype,"_taskService",2),x9e([Ms()],j9e.prototype,"init",1),x9e([Ts()],j9e.prototype,"destroy",1),j9e=x9e([Gs({token:v8e})],j9e);var D9e=Object.defineProperty,A9e=Object.getOwnPropertyDescriptor,R9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?A9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&D9e(t,n,i),i},F9e=function(){return ll((function e(){sl(this,e),this._listener=null}),[{key:"isAiWritingEnable",get:function(){return!!this._configurationService.getValue("aiWriting.enable")}},{key:"init",value:function(){var e=this;this.commandService.registerCommand(r9e.commandName,r9e),this.commandService.registerCommand(a9e.commandName,a9e),this.commandService.registerCommand(c9e.commandName,c9e),this.aiWritingDatasourceRegistry.init(),this.isAiWritingEnable&&(this._listener=this.commandService.onDidExecuteCommand(function(){var t=rl(ml.mark((function t(n){var r,o,i,a,u;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("updateField"!==(r=n.context).commandName){t.next=8;break}if(o=r.argArray[0],i=o.field,a=o.newFieldProperty,u=i.get("uuid"),a.type===HC.TEXT){t.next=8;break}return t.next=8,e.commandService.execCommand("updateAiWritingOpen",{fieldId:u,open:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"destroy",value:function(){var e,t;null==(e=this._listener)||e.destroy(),null==(t=this.aiWritingService)||t.destroy()}},{key:"registerModel",value:function(){return v9e}},{key:"registerProcessTableMiddleware",value:function(){return function(e,t){var n=e.sheet.columns;if(n&&n.length>0){var r=n.map((function(e){return{uuid:qw(32),field_uuid:e.uuid||e.id,open:e.enableAI||!1,type:e.aiWritingType||f8e.SUMMARY,prompt:e.aiPrompt||"",auto:e.enableAutoAIGC||!1}}));t.setData("ai_writing",r)}return e}}}],[{key:"pluginModule",value:function(){return dd().contribution(h8e).register(w9e).register(E9e).register(O8e).register(j9e).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{disable:{type:"boolean"}}}),e.registerDefaultValue({"aiWriting.disable":!0})}}])}();function I9e(e,t,n){return t=Sd(t),Od(e,P9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function P9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P9e=function(){return!!e})()}F9e.pluginName="kernel-ai-writing",R9e([Ks(nR)],F9e.prototype,"commandService",2),R9e([Ks(w9e)],F9e.prototype,"aiWritingDatasourceRegistry",2),R9e([Ks(O8e)],F9e.prototype,"aiWritingService",2),R9e([Ks(lk)],F9e.prototype,"_configurationService",2),F9e=R9e([Gs({contrib:[MA,kE,ZF]})],F9e);var M9e=function(e){function t(){return sl(this,t),I9e(this,t,arguments)}return jd(t,e),ll(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("content").upsert({target_uuid:e.recordId,target_type:"record"},{format:e.content.format,html:e.content.html,source:e.content.source,target_uuid:e.recordId,target_type:"record",status:1}),this.updateRecord(e.recordId),!0}},{key:"updateRecord",value:function(e){var t;this.modelService.getModel("record").update({uuid:e},{updated_at:+new Date}),this.modelService.getModel("record").update({uuid:e},{modifier_id:null==(t=this.context.user)?void 0:t.uid})}}])}($A);function T9e(e,t,n){return t=Sd(t),Od(e,N9e()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function N9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N9e=function(){return!!e})()}M9e.commandName="updateContent";var B9e=Object.defineProperty,V9e=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&B9e(t,n,i),i},L9e=function(e){function t(){return sl(this,t),T9e(this,t,arguments)}return jd(t,e),ll(t)}(iO);function z9e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return U9e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U9e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function U9e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}L9e.table="content",L9e.indexes=["target_type","target_uuid"],V9e([OE()],L9e.prototype,"target_uuid"),V9e([OE()],L9e.prototype,"target_type"),V9e([OE()],L9e.prototype,"format"),V9e([OE()],L9e.prototype,"html"),V9e([OE()],L9e.prototype,"source"),V9e([OE()],L9e.prototype,"status");var H9e=Object.defineProperty,q9e=Object.getOwnPropertyDescriptor,W9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?q9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&H9e(t,n,i),i},$9e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){var e,t,n,r=z9e(this.contentDatasourceProvider.getContributions());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=null==(e=o.registerContentDatasourceGet)?void 0:e.call(o);i&&(this._datasourceGet=i);var a=null==(t=o.registerContentDatasourcePut)?void 0:t.call(o);a&&(this._datasourcePut=a)}}catch(e){r.e(e)}finally{r.f()}}},{key:"Get",get:function(){return this._datasourceGet}},{key:"Put",get:function(){return this._datasourcePut}}])}();W9e([yd(Q5e),As()],$9e.prototype,"contentDatasourceProvider",2),$9e=W9e([Gs()],$9e);var G9e=Object.defineProperty,K9e=Object.getOwnPropertyDescriptor,Y9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?K9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&G9e(t,n,i),i},J9e=function(){return ll((function e(){sl(this,e)}),[{key:"getContent",value:function(e,t){return this._modelService.getModel("content").findOne({target_uuid:e,target_type:t})}},{key:"setContentWithSlient",value:function(e,t,n){this._modelService.getModel("content").upsert({target_uuid:e,target_type:t},{format:n.format,html:n.html,source:n.source,target_uuid:e,target_type:t,status:0},{slient:!0})}}])}();Y9e([Ks(oO)],J9e.prototype,"_modelService",2),J9e=Y9e([Gs({token:t3e})],J9e);var X9e=Object.defineProperty,Z9e=Object.getOwnPropertyDescriptor,Q9e=function(e,t,n,r){for(var o,i=r>1?void 0:r?Z9e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&X9e(t,n,i),i},e7e=function(){return ll((function e(){sl(this,e)}),[{key:"handleGet",value:function(e,t){return this._contentDatasourceRegistry.Get(e,t)}},{key:"handlePut",value:function(e,t,n){return this._contentDatasourceRegistry.Put(e,t,n)}}])}();function t7e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return n7e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n7e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function n7e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Q9e([Ks($9e)],e7e.prototype,"_contentDatasourceRegistry",2),e7e=Q9e([Gs({token:e3e})],e7e);var r7e=Object.defineProperty,o7e=Object.getOwnPropertyDescriptor,i7e=function(e,t,n,r){for(var o,i=r>1?void 0:r?o7e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&r7e(t,n,i),i},a7e=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(M9e.commandName,M9e),this.contentDatasourceRegistry.init()}},{key:"registerModel",value:function(){return L9e}},{key:"registerProcessTableMiddleware",value:function(){var e=this;return function(t){var n=t.contents;if(n){var r,o=t7e(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.content&&e.contentService.setContentWithSlient(i.recordId,"record",i.content)}}catch(e){o.e(e)}finally{o.f()}}return t}}}],[{key:"pluginModule",value:function(){return dd().contribution(Q5e).register($9e).register(e7e).register(J9e).register(this)}}])}();a7e.pluginName="kernel-content",i7e([Ks(nR)],a7e.prototype,"commandService",2),i7e([Ks($9e)],a7e.prototype,"contentDatasourceRegistry",2),i7e([Ks(J9e)],a7e.prototype,"contentService",2);var u7e=[l8e,l6e,e9e,F9e,a7e=i7e([Gs({contrib:[MA,kE,ZF]})],a7e)],l7e=function(e){var t=e.docId,n=e.docType,r=e.webSdk;return{token:Q5e,useValue:{registerContentDatasourceGet:function(){var e=function(){var e=rl(ml.mark((function e(o,i){var a,u,l,c,s,d,f,p,v;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={docId:t,docType:n,sheetId:i},!Array.isArray(o)){e.next=10;break}return s.recordIds=o,e.next=5,null==(u=(a=r.TableRecordController).getContent)?void 0:u.call(a,s);case 5:return d=e.sent,f=d.content,e.abrupt("return",f);case 10:return s.recordId=o,e.next=13,null==(c=(l=r.TableRecordController).getContent)?void 0:c.call(l,s);case 13:return p=e.sent,(v=p.content)||(v={format:"lake",html:"",source:""}),e.abrupt("return",v);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return e},registerContentDatasourcePut:function(){var e=function(){var e=rl(ml.mark((function e(o,i,a){var u;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={docId:t,docType:n,sheetId:i,recordId:o,content:a},e.next=3,r.TableRecordController.putContent(u);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return e}}}},c7e={exports:{}};!function(e,t){e.exports=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,i){var a=o.prototype;i.utc=function(e){return new o({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var u=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=a.utcOffset;a.utcOffset=function(r,o){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],i=o[0],a=60*+o[1]+ +o[2];return 0===a?0:"+"===i?a:-a}(r)))return this;var a=Math.abs(r)<=16?60*r:r,u=this;if(o)return u.$offset=a,u.$u=0===r,u;if(0!==r){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(a+l,e)).$offset=a,u.$x.$localOffset=l}else u=this.utc();return u};var s=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return s.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),o=i(e).local();return f.call(r,o,t,n)}}}()}(c7e);const s7e=kn(c7e.exports);function d7e(e,t){if(void 0===e||!t)return"";var n=""+e,r="",o=n.indexOf(".")>=0;if("-"===n[0]&&(n=n.substr(1),r="-"),n.length>=t)return r+n;for(var i=t-n.length;i--;)n=o?n+"0":"0"+n;return r+n}var f7e,p7e="1899-12-30",v7e="YYYY-MM-DD";i.a.extend(s7e),f7e=p7e,i.a.utc(f7e);var h7e=[/^([1-9]\d{3,4})(.{1})(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,/^(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(.{1})([1-9]\d{3,4})$/],g7e=/^(20|21|22|23|[0-1]\d):[0-5]\d$/,m7e=/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,y7e=/^([A-Za-z]{3,8})\s(0?[1-9]|[1-2][0-9]|3[0-1]),(([1-9]\d{3,4}))$/,b7e={zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],zhNum:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],enShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},w7e={mmdd:/^(0?[1-9]|1[0-2])(\-|\/|月)(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,ddmm:/^(0?[1-9]|[1-2][0-9]|3[0-1])(\-|\/)(0?[1-9]|1[0-2])$/,yymm:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])$/,yymmdd:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])(\-|\/)(0?[1-9]|[1-2][0-9]|3[0-1])$/,yyyymm:/^([1-9]\d{3,4})(\-|\/|年)(0?[1-9]|1[0-2])(月?)$/};function _7e(e){var t=function(e){var t,n,r,o="";if(function(e){return m7e.test(e)||g7e.test(e)}(e))return function(e){return i()("".concat(p7e," ").concat(e)).diff(i.a.utc(p7e),"seconds")}(e);var a=e.match(/ (20|21|22|23|[0-1]\d):[0-5]\d(:([0-5]\d))?$/);a&&(o=a[0],e=e.slice(0,-o.length));a=e.match(h7e[0]),a?(t=a[1],n=a[3],r=a[5]):(a=e.match(h7e[1]))?(t=a[5],n=a[1],r=a[3]):(a=e.match(y7e))&&(t=a[3],n=0===(n=b7e.en.indexOf(a[1])+1)?NaN:n,r=a[2]);if(isNaN(t)||isNaN(n)||isNaN(r))return function(e){if(!e)return!1;var t,n,r,o="sheet-en";for(var i in w7e){var a=e.match(w7e[i]);if(a){t=i,n=a[2];break}}if(!t||["年","月","-","/"].indexOf(n)<0)return!1;switch(t){case"mmdd":"月"===n?(o="sheet-cn",r="M月D日"):r="MM/DD";break;case"ddmm":r="MM/DD";break;case"yymm":r="YYYY-MM";break;case"yymmdd":r="YYYY".concat(n,"MM").concat(n,"DD");break;case"yyyymm":"年"===n?(r="YYYY年M月",o="sheet-cn"):r="YYYY-MM"}return{name:"date",formatter:r,lang:o}}(e+=o)?function(e){var t=i()(),n=1*+t.format("YY"),r=t.format("YYYY");for(var o in w7e){var a=e.match(w7e[o]);if(a){var u="";switch(o){case"yymm":u=(1*a[1]>n?"19":"20")+d7e(a[1],2)+"-"+d7e(a[3],2)+"-01";break;case"yyyymm":u=a[1]+"-"+d7e(a[3],2)+"-01";break;case"mmdd":u=r+"-"+d7e(a[1],2)+"-"+d7e(a[3],2);break;case"ddmm":u=r+"-"+d7e(a[3],2)+"-"+d7e(a[1],2);break;case"yymmdd":u=(1*a[1]>n?"19":"20")+a[1]+"-"+d7e(a[3],2)+"-"+d7e(a[5],2);break;default:u=e}return i.a.utc(u).diff(i.a.utc(p7e),"seconds")}}return 0}(e):e;return O7e("".concat(t,"-").concat(d7e(n,2),"-").concat(d7e(r,2)).concat(o))}(e);return isNaN(t)?"":{seconds:t,text:k7e({seconds:t})}}function k7e(e){var t=i.a.utc(p7e).add(e.seconds,"seconds");return"Invalid date"!==t.toString()?(e.text=t.format(v7e),e.text):(e.text="","")}function C7e(e){var t=i()(e.time);return"Invalid date"!==t.toString()?(e.text=t.format("YYYY-MM-DD HH:mm:ss"),e.text):(e.text="","")}function E7e(e){e>=31708800&&(e+=i()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1);return i()(p7e).add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}function O7e(e){return i.a.utc(e).diff(i.a.utc(p7e),"seconds")}var S7e=function(){return ll((function e(){sl(this,e)}),[{key:"toFieldModel",value:function(e,t){var n=e.type,r=e.options;return n===HC.TEXTAREA||n===HC.INPUT||n===HC.TEXT?this.toTextareaModel(t):n===HC.CHECKBOX?this.toCheckboxModel(t):n===HC.DATE?this.toDate(t):n===HC.EMAIL?this.toEmailModel(t):n===HC.FILE?this.toFileModel(t):n===HC.IMAGE?this.toImageModel(t):n===HC.LINK?this.toLinkModel(t):n===HC.MENTION?this.toMentionModel(t):n===HC.SELECT?this.toSelectModel(t,r):n===HC.MULTI_SELECT?this.toMultiSelectModel(t,r):n===HC.NUMBER?this.toNumberModel(t):n===HC.PHONE?this.toPhoneModel(t):t}},{key:"toTextareaModel",value:function(e){return e?"boolean"==typeof e?"":Array.isArray(e)?e.map((function(e){return e?e.name?e.name:e:""})).join(","):e.seconds?k7e(e):e.time?C7e(e):e.name?e.name:e+"":""}},{key:"toCheckboxModel",value:function(e){return!(!e||!["1","true","是","yes","✅"].includes(String(e).toLowerCase()))}},{key:"toDate",value:function(e){if(!e)return"";if("boolean"==typeof e)return"";if(Array.isArray(e)&&(e=e[0]),void 0!==e.time||void 0!==e.seconds){var t={seconds:e.seconds||O7e(e.time),time:e.time||E7e(e.seconds)};return t.text=k7e(t),"Invalid Date"===t.text?"":t}return isNaN(e)?"string"==typeof e&&-1!==e.indexOf("\n")?"":(e.name&&(e=e.name),_7e(e)):""}},{key:"toEmailModel",value:function(e){return e?"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),"string"!=typeof e?"":e=e.replace(/\n/g,"")):""}},{key:"toFileModel",value:function(e){if(!e)return[];Array.isArray(e)||(e=[e]);return e.map((function(e){return"error"===(t=e).status||"progress"===t.status?t:void 0===t.src?"":t.uid?(t.fileKey=gn.FileUtils.getFileKey(t.src),t.fileKey?(t.name||(t.name=t.src),t.src=y_(t.src),t):""):"";var t}))}},{key:"toImageModel",value:function(e){if(!e)return[];Array.isArray(e)||(e=[e]);var t=function(e){return e?(e.login&&(e.src=e.avatar_url),"error"===e.status||"progress"===e.status?e:void 0!==e.src&&function(e){try{var t=new URL(e);return gn.FileUtils.isImage(t.origin+t.pathname)}catch(e){return!1}}(e.src)?(e.name||(e.name=e.src),e.src=y_(e.src),e):""):""};return e.map((function(e){return t(e)}))}},{key:"toLinkModel",value:function(e){if(!e||e.seconds||e.time)return"";if("boolean"==typeof e)return"";if(e.src)return e.src=String(y_(e.src)),e.name=String(e.name)||"",e;if(Array.isArray(e)&&!(e=e[0]))return"";if(e.login)return{name:e.name,src:"/".concat(e.login)};e.name&&(e=e.name);var t=y_(e=(e=String(e)).replace(/\n/gi,""));return Qw(e)&&(t="mailto:"+e),t?{src:t,name:e}:{name:e,src:"http://"+e}}},{key:"toMentionModel",value:function(e){var t,n;return Array.isArray(e)&&0!==e.length&&(null==(t=e[0])?void 0:t.login)&&(null==(n=e[0])?void 0:n.name)?e.map((function(e){return e.work_id&&!e.avatar_url&&(e.avatar_url="/__workers/r/avatar_buc/".concat(e.work_id)),e})):""}},{key:"toSelectModel",value:function(e,t){if(!e)return"";var n=e;if(Array.isArray(e))n=e[0];else if(void 0!==e.seconds)n=e.text||k7e(e);else if(void 0!==e.time)n=e.text||C7e(e);else{if(e&&"boolean"==typeof e)return"";isNaN(e)||(n=e+"")}if(!n)return"";n.name&&(n=n.name);var r=t.find((function(e){return e.uuid===n||e.name===n}));return r?[r.uuid]:null}},{key:"toMultiSelectModel",value:function(e,t){if(!e)return"";var n=e;if(Array.isArray(e)){var r=[];return e.forEach((function(e){if(e){e=e.name||e;var n=t.find((function(t){return t.uuid===e||t.name===e}));n&&r.push(n.uuid)}})),0!==r.length?r:""}if(void 0!==e.seconds)n=e.text||k7e(e);else if(void 0!==e.time)n=e.text||C7e(e);else{if("boolean"==typeof e)return"";isNaN(e)||(n=e+"")}e.name&&(n=e.name);var o=t.find((function(e){return e.uuid===n||e.name===n}));return o?[o.uuid]:null}},{key:"toNumberModel",value:function(e){return e?"boolean"==typeof e?b_(e?"1":"0"):Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),b_(e)):""}},{key:"toPhoneModel",value:function(e){return e?"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),"string"!=typeof e&&"number"!=typeof e?"":e=(e=String(e)).replace(/\n/g,"")):""}}])}(),x7e={token:ZF,useValue:{registerProcess:function(){var e=new S7e;return{processFieldModel:function(t,n){return e.toFieldModel(t,n)}}}}},j7e=function(e){var t=e.docId,n=e.docType,r=e.webSdk,o=void 0===r?{}:r,i=e.webProxy;return{token:c8e,useValue:{registerServer:function(){return o.TableShareController={update:function(e){return rl(ml.mark((function t(){return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.shares.update(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},{apiSdk:o,processParams:function(e){return e.docId=t,e.docType=n,e}}}}}};var D7e=function(e){return e!=e};var A7e=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1},R7e=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1},F7e=D7e,I7e=A7e;var P7e=function(e,t,n){return t==t?I7e(e,t,n):R7e(e,F7e,n)},M7e=P7e;var T7e=function(e,t){return!!(null==e?0:e.length)&&M7e(e,t,0)>-1};var N7e=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1};var B7e=L1,V7e=function(){},L7e=B7e&&1/v1(new B7e([,-0]))[1]==1/0?function(e){return new B7e(e)}:V7e,z7e=u1,U7e=T7e,H7e=N7e,q7e=l1,W7e=L7e,$7e=v1;var G7e=function(e,t,n){var r=-1,o=U7e,i=e.length,a=!0,u=[],l=u;if(n)a=!1,o=H7e;else if(i>=200){var c=t?null:W7e(e);if(c)return $7e(c);a=!1,o=q7e,l=new z7e}else l=t?[]:u;e:for(;++r<i;){var s=e[r],d=t?t(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),u.push(s)}else o(l,d,n)||(l!==u&&l.push(d),u.push(s))}return u},K7e=N5,Y7e=G7e;const J7e=kn((function(e,t){return e&&e.length?Y7e(e,K7e(t)):[]}));var X7e=function(e){var t=e.docId,n=e.docType,r=e.webProxy,o=e.currentUser;return{token:TA,useValue:{registerUser:function(){return{searchUser:function(e){return rl(ml.mark((function o(){var i,a;return ml.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i={optional_properties:"profile",q:e},t&&n&&!b3e.isOfficialTemplate&&(i.target_id=t,i.target_type=n),o.next=4,r.users.complete({q:e});case 4:return a=o.sent,o.abrupt("return",a.map((function(e){var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar||e.avatar_url||e.icon,work_id:e.work_id}})));case 6:case"end":return o.stop()}}),o)})))()},contextUsers:function(){var e=this;return rl(ml.mark((function o(){var i,a,u;return ml.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("Doc"===n){o.next=2;break}return o.abrupt("return",[]);case 2:if(i=[],!(null==(a=h3e("doc").abilities)?void 0:a.update)){o.next=8;break}return o.next=7,r.users.listDocContextUsers({id:t});case 7:i=o.sent;case 8:return(u=e.getCurrentUser())&&i.push(u),i=J7e(i.map((function(e){var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar_url||e.icon,work_id:e.work_id}})),"uid"),o.abrupt("return",i);case 12:case"end":return o.stop()}}),o)})))()},getCurrentUser:function(){return o?{uid:o.uid||String(o.id),work_id:o.work_id,login:o.login,name:o.name,icon:o.icon||o.avatar_url}:b3e.me?{uid:String(b3e.me.id),work_id:b3e.me.work_id,login:b3e.me.login,name:b3e.me.name,icon:b3e.me.avatar_url}:null}}}}}};function Z7e(e,t){return Q7e.apply(this,arguments)}function Q7e(){return Q7e=rl(ml.mark((function e(t,n){var r,o=arguments;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},"/api/ai/table/completion",e.abrupt("return",t.post("/api/ai/table/completion",n,r));case 3:case"end":return e.stop()}}),e)}))),Q7e.apply(this,arguments)}var eet=function(e){var t=e.docId,n=e.webSdk;return{token:h8e,useValue:{registerAiWritingDatasourcePost:function(){var e=function(){var e=rl(ml.mark((function e(r){var o,i;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.content,i=r.type,e.next=3,Z7e(n.req,{content:o,type:i,context_id:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e}}}},tet=function(e){var t=e.docType,n=e.webProxy;return{token:K3e,useValue:{registerForm:function(){return{getForm:function(e){return rl(ml.mark((function r(){var o;return ml.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("Doclet"!==t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.shares.findOne({target_id:e,target_type:"Skythings.View",type:"form"});case 4:if((o=r.sent)&&o.token){r.next=7;break}return r.abrupt("return");case 7:return r.abrupt("return",{src:"/forms/share/".concat(o.token),status:o.status});case 8:case"end":return r.stop()}}),r)})))()}}}}}},net=function(e){var t=e.webProxy;return{token:SF,useValue:{registerLinkDetail:function(){return{getLinkDetail:function(e){return rl(ml.mark((function n(){var r,o;return ml.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:return n.prev=2,n.next=5,null==(o=null==(r=t.editor)?void 0:r.linkDetail)?void 0:o.call(r,{url:y_(e)},{ignoreGlobalMessage:!0});case 5:return n.abrupt("return",n.sent);case 8:return n.prev=8,n.t0=n.catch(2),console.error(n.t0),n.abrupt("return",{url:e,title:e});case 12:case"end":return n.stop()}}),n,null,[[2,8]])})))()}}}}}},ret=function(e){var t=e.docId,n=e.docType,r=e.webSdk,o=e.webProxy,i=e.currentUser;return[x7e,j7e({docId:t,docType:n,webSdk:r,webProxy:o}),X7e({docId:t,docType:n,webProxy:o,currentUser:i}),tet({docId:t,docType:n,webProxy:o}),net({webProxy:o}),l7e({docId:t,docType:n,webSdk:r}),eet({docId:t,webSdk:r})]},oet="ctoken",iet="yuque_ctoken",aet=Array.isArray;function uet(e,t,n,r){var o,i,a,u=/\[\]$/;if(aet(t))for(i=0;t&&i<t.length;i++)a=t[i],n||u.test(e)?r(e,a):uet(e+"["+("object"===Ln(a)?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)t.hasOwnProperty(o)&&uet(e+"["+o+"]",t[o],n,r);else r(e,t)}function cet(e,t){return e+(/\?/.test(e)?"&":"?")+t}function set(e,t){var n,r,o=t||!1,i=[],a=encodeURIComponent;function u(e,t){var n=t;"function"==typeof t?n=t():null==t&&(n=""),i[i.length]=a(e)+"="+a(n)}if(aet(e))for(r=0;e&&r<e.length;r++)u(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&uet(n,e[n],o,u);return i.join("&").replace(/%20/g,"+")}function det(e){return"undefined"!=typeof FormData&&e instanceof FormData}function fet(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pet(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fet(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fet(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vet=window,het=/^http/,get=/(^\w+):\/\//,met=/^20\d$/,yet="readyState",bet="Content-Type",wet="X-Requested-With";function _et(){}var ket={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}};function Cet(e,t,n){return function(){return e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request[yet]&&(e.request.onreadystatechange=_et,!function(e){var t=get.exec(e.url),n="";return t&&(n=t[1]),n||(n=(e.o.context||vet).location.protocol),het.test(n)?met.test(e.request.status):!!e.request.response}(e)?n(e.request.statusText,e.request):t(e.request)))}}function Eet(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,i=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!det(n.data)?set(n.data,n.traditional||ket.traditional):n.data||null;"jsonp"!==n.type&&"GET"!==r||!i||(o=cet(o,i),i=null);var a=n.xhr&&n.xhr(n)||function(e){var t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return a.open(r,o,!1!==n.async),function(e,t){var n,r=t.headers||{};for(n in r.Accept=r.Accept||ket.accept[t.type]||ket.accept["*"],t.crossOrigin||r[wet]||(r[wet]=ket.requestedWith),r[bet]||det(t.data)||(r[bet]=t.contentType||ket.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}(a,n),function(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}(a,n),a.onreadystatechange=Cet(this,e,t),n.before&&n.before(a),a.send(i),a}function Oet(){this.initPromise()}function xet(){return new Oet}function jet(e){var t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=Eet.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}function Det(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aet(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Det(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Det(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Oet.prototype={triggerSuccess:function(e){var t=this.o,n=t.type,r=(t.dataFilter||ket.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}(e.getResponseHeader("Content-Type"))),e="jsonp"!==n?this.request:e,r)switch(n){case"json":try{e=vet.JSON.parse(r)}catch(t){return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError:function(e,t){var n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete:function(e){var t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise:function(){var e=this;e.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n}))},abort:function(){this._aborted=!0,this.request.abort()},retry:function(){this.initPromise(),jet.call(this,this.o)},then:function(e,t){return this.promise.then(e,t)},always:function(e){return this.promise.then(e,e)},fail:function(e){return this.promise.then(void 0,e)},catch:function(e){return this.fail(e)},setup:function(e){this.o=pet(pet({},ket),e)},start:function(e){this.setup(e),jet.call(this,this.o)}},xet.ajaxSetup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)e.hasOwnProperty(t)&&ket.hasOwnProperty(t)&&(ket[t]=e[t])};var Ret="_ts",Fet="_input_charset",Iet="utf-8",Pet={withCToken:!0,withInputCharset:!0,cache:!0};function Met(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=Aet(Aet({},Pet),e),o=Pet.cache||"post"===r.method,i=function(e){for(var t=e.document.cookie.split(/;\s/g),n=0,r=t.length;n<r;n++){var o=t[n].match(/([^=]+)=/i);if(o&&o[1]===iet)return t[n].substring(o[1].length+1)}}(n),a=r.withCToken,u=r.withInputCharset;return r.data=r.data||{},Array.isArray(r.data)?(t=[],a&&i&&t.push({name:oet,value:encodeURIComponent(i)}),u&&t.push({name:Fet,value:Iet}),o||t.push({name:Ret,value:Date.now()}),r.data=r.data.concat(t)):"string"==typeof r.data?(u&&-1===r.data.indexOf(Fet)&&(r.data+="&"+Fet+"="+Iet),a&&i&&-1===r.data.indexOf(oet)&&(r.data+="&"+oet+"="+encodeURIComponent(i)),o||(r.data+="&"+Ret+"="+Date.now())):det(r.data)?(u&&!r.data.get(Fet)&&r.data.append(Fet,Iet),r.url&&a&&i&&(r.url=cet(r.url,set(il({},oet,i))))):(u&&(r.data[Fet]=Iet),o||(r.data[Ret]=Date.now()),a&&i&&!r.data[oet]&&(r.data[oet]=i)),r}function Tet(e,t){var n;e=(n="string"==typeof e?{url:e,success:t}:e).url;var r=xet();return e.startsWith("//")&&(e=location.protocol+e),function(e){return!/^https?:\/\/\w+\.alipayobjects\.com\//g.test(e)}(e)&&(n=Met(n)),r.start(n),r}function Net(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bet(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Net(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Net(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tet.ajaxSetup=function(e){for(var t in e)e.hasOwnProperty(t)&&Pet.hasOwnProperty(t)&&(Pet[t]=e[t]);xet.ajaxSetup(e)},Tet.ajaxSetup({withInputCharset:!1});var Vet=function(){return ll((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sl(this,e),this.options=Bet({ajaxOptions:{progress:function(){},error:function(){},success:function(){},data:{},method:"post",url:""}},t)}),[{key:"ajax",value:function(e){var t=(e=Bet(Bet({},this.options.ajaxOptions),e)).success,n=e.error;if(!e.url)return!!n&&n(new Error("request options.url missing"));e.url=function(e){var t,n,r,o;if(e.startsWith("http"))return e;var i=(null==(n=null==(t=globalThis.nebulaMobileApp)?void 0:t.envInfo)?void 0:n.origin)||(null==(o=null==(r=globalThis.yqWebApp)?void 0:r.globalServiceEnv)?void 0:o.host);return i?"".concat(i).concat(e):e}(e.url);var r=new Promise((function(r){e.success=function(e){t(e),r(e)},e.error=function(e){n(e),r(e)}}));return{xhr:Tet(e),promise:r}}}])}(),Let=new Vet,zet=function(e){if(globalThis.__ajaxProxy){var t=globalThis.__ajaxProxy(e);if(t)return t}return Let.ajax(e)},Uet=Object.defineProperty,Het=Object.getOwnPropertyDescriptor,qet=function(e,t,n,r){for(var o,i=r>1?void 0:r?Het(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Uet(t,n,i),i},Wet=function(){return ll((function e(){sl(this,e)}),[{key:"getConfig",value:function(e){return this._configuration.getValue("upload.".concat(e))}},{key:"tryQuickUpload",value:(n=rl(ml.mark((function e(t,n){var r,o,i,a,u,l,c;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=this.getConfig(n)).quickUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Object(gn.fileMd5)(t);case 5:return o=e.sent,i=t.size,a=t.name,u=t.type,c=zet({xhr:function(){return new window.XMLHttpRequest},url:r.quickUrl,data:{md5:o,filesize:i,filename:a,filetype:u,type:n},dataType:"json",success:function(e){e&&!1===e.data.success||(l=e)},error:function(e){console.error(e)},method:"POST",processData:!0}),e.next=12,c.xhr.promise;case 12:if(l&&!1!==l.success){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"uploadFile",value:(t=rl(ml.mark((function e(t,n,r){var o,i,a;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=this.getConfig(n),(i=new FormData).append("file",t,t.name),a=(o.url||"").replace(/ctoken=[^&]+&/,""),zet({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r({id:t.uid,status:"running",file:t,percent:parseInt(String(e.loaded/e.total*100),10)})}),!1),e},url:a,data:i,dataType:"json",success:function(e){var n=e.data;n?(t.src=n.url,r({id:t.uid,status:"success",file:t})):r({id:t.uid,status:"error",message:Lw("上传失败"),file:t})},error:function(e){var n="";if(e&&e.xhr&&e.xhr.response)try{n=JSON.parse(e.xhr.response).message||""}catch(e){n=""}else n=e.message;n||(n=Lw("上传失败")),r({id:t.uid,status:"error",file:t,message:n})},method:"POST",processData:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"upload",value:(e=rl(ml.mark((function e(t,n,r){var o;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.tryQuickUpload(t,n);case 3:if(!(o=e.sent)){e.next=9;break}t.src=o.data.url,r({id:t.uid,status:"success",file:t}),e.next=11;break;case 9:return e.next=11,this.uploadFile(t,n,r);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.next=18,this.uploadFile(t,n,r);case 18:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(t,n,r){return e.apply(this,arguments)})}]);var e,t,n}();qet([Ks(lk)],Wet.prototype,"_configuration",2),Wet=qet([Gs()],Wet);var $et=Object.defineProperty,Get=Object.getOwnPropertyDescriptor,Ket=function(e,t,n,r){for(var o,i=r>1?void 0:r?Get(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$et(t,n,i),i},Yet=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerUpload",value:function(){var e=this;return{upload:function(t,n,r){return e._uploadService.upload(t,n,r)},checkSize:function(e,t){try{if(window.__member_message_ref){var n=window.__member_message_ref.current.getMessageWithFile({filesize:e.size},t)||{},r=n.msg,o=n.alwaysOpen,i=n.level,a=n.callback;if(r)return a(v.a[i||"error"](r,o?0:void 0)),!1}}catch(e){return console.error(e),!1}return!0}}}}],[{key:"pluginModule",value:function(){return dd().register(Wet).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"upload",type:"object",properties:{image:{type:"object",properties:{url:{type:"string",description:"图片上传接口"},quickUrl:{type:"string",description:"图片秒传接口"}}},file:{type:"object",properties:{url:{type:"string",description:"文件上传接口"},quickUrl:{type:"string",description:"文件秒传接口"}}}}}),e.registerDefaultValue({"upload.image.url":"/api/upload/attach?&type=image","upload.image.quickUrl":"/api/upload/upload_by_digset?&type=image","upload.file.url":"/api/upload/attach?&type=attach","upload.file.quickUrl":"/api/upload/upload_by_digset?&type=attach"})}}])}();Yet.pluginName="render-upload",Ket([Ks(Wet)],Yet.prototype,"_uploadService",2),Yet=Ket([Gs({contrib:[toe,xge]})],Yet);var Jet=function(e){var t=e.field,n=e.position,r=yre(O8e),o=yre(v8e),i=yre(lk),u=null==r?void 0:r.getAiWritingConfig(t.get("uuid")),l=null==i?void 0:i.getValue("aiWriting.enable"),c=Tf(Object(a.useState)((null==o?void 0:o.isFieldGenerating(t.get("uuid")))||!1),2),s=c[0],d=c[1],f=(null==u?void 0:u.open)&&l,p=function(){var e=rl(ml.mark((function e(){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==r?void 0:r.stopAiWriting(t.get("uuid"));case 2:v.a.success(Lw("已停止填写"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useLayoutEffect)((function(){if(f&&"gridHeader"===n){var e=null==o?void 0:o.onAiWritingStatusChange((function(e){var n=e.isGenerating;e.fieldId===t.get("uuid")&&n?d(!0):d(!1)}));return function(){null==e||e.destroy()}}d(!1)}),[o,f,n,t.get("uuid")]),f?React.createElement(React.Fragment,null,React.createElement(cn.default,{className:"lakex-table-grid-header-ai-writing-icon",width:16,height:16}),s&&React.createElement(sn.default,{className:"lakex-table-ai-writing-loading-icon","data-no-dnd":"true",width:16,height:16,onClick:p})):null},Xet=Object.defineProperty,Zet=Object.getOwnPropertyDescriptor,Qet=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"getTextFieldTagComponent",value:function(){return Jet}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Qet.pluginName="render-ai-writing",Qet=function(e,t,n,r){for(var o,i=r>1?void 0:r?Zet(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xet(t,n,i),i}([Gs({contrib:[toe,s_e]})],Qet);var ett=function(e){var t=e.fields,n=function(e){var t=e.view,n=e.viewFields,r=qwe(mR.TABLE),o=yre(nR),i=Object(a.useMemo)((function(){return nk(n,(function(e){var t;return null==(t=e.get("field"))?void 0:t.get("uuid")}))}),[n]),u=r.canUpdate();return{viewFieldIds:i,canUpdate:u,onInsert:function(e){u&&(null==o||o.execCommand("insertViewField",{viewId:t.get("uuid"),fieldId:e.uuid}))},onRemove:function(e){u&&(null==o||o.execCommand("removeViewField",{viewId:t.get("uuid"),fieldId:e.uuid}))}}}({view:e.view,viewFields:e.viewFields}),r=n.viewFieldIds,o=n.onInsert,i=n.onRemove,l=n.canUpdate,c=yre(Ooe);return u.a.createElement("div",{className:"lakex-form-col-container"},u.a.createElement("div",{className:"lakex-form-col-intro"},Lw("所有列"),u.a.createElement(d.a,{title:Lw("数据表中所有列")},u.a.createElement(oue,{type:"Question"}))),u.a.createElement("div",{className:"lakex-form-col-items"},nk(t,(function(e,t){var n=r.includes(e.get("uuid")),a=r.findIndex((function(t){return t===e.get("uuid")})),s=c.getFieldIcon(e.get("type"));return u.a.createElement("div",{className:"lakex-form-col ".concat(n?"active":"deactive"),key:e.get("uuid"),onClick:function(){o(e)}},u.a.createElement("div",{className:"lakex-form-col-name"},s&&u.a.createElement(s,null),e.get("name")),l&&n&&u.a.createElement("span",{className:"lakex-form-col-state"},Lw("添加")),l&&n&&u.a.createElement("span",{className:"lakex-form-col-state-remove",onClick:function(t){t.stopPropagation(),t.preventDefault(),i(e)}},Lw("取消添加")),l&&!n&&u.a.createElement("span",{className:"lakex-form-col-state add"},Lw("添加")," ",u.a.createElement(oue,{type:"ArrowRight",style:{marginLeft:4}})),u.a.createElement("div",{className:"lakex-form-col-fields"},function(e,t){return e?u.a.createElement("span",null,null!=t?"".concat(t+1,"."):"",e.get("name")):u.a.createElement("span",{className:"lakex-form-col-untitled"},Lw("未命名问题"))}(e,a)))}))))},ttt=function(e){var t=e.view,n=e.defaultValue,r=qwe(mR.TABLE),o=yre(nR),i=yre(hE),l=Object(a.useRef)(null);return Object(a.useEffect)((function(){null==i||i.onChange((function(e){var n,r,o=e.spell;"view"===o.table&&o.command===mE.UPDATE&&t.get("uuid")===(null==(n=o.where)?void 0:n.uuid)&&null!=o.sets.name&&(null==(r=l.current)||r.setValue(o.sets.name))}))}),[]),u.a.createElement(s.a,{ref:l,className:"lakex-form-title",autoFocus:""===n,autoSize:!0,defaultValue:n,disabled:!r.canUpdate(),onBlur:function(e){null==o||o.execCommand("updateViewName",{viewId:null==t?void 0:t.get("uuid"),name:e.target.value})},onClick:function(e){e.stopPropagation()},placeholder:Lw("请输入表单标题")})},ntt=function(e){var t=e.view,n=e.defaultValue,r=e.maxLength,o=void 0===r?255:r,i=qwe(mR.TABLE),a=yre(nR);return u.a.createElement(s.a.TextArea,{autoSize:!0,className:"lakex-form-desc",maxLength:o,defaultValue:n,disabled:!(null==i?void 0:i.canUpdate()),onBlur:function(e){null==a||a.execCommand("updateViewDesc",{viewId:null==t?void 0:t.get("uuid"),desc:e.target.value})},size:"small",onClick:function(e){e.stopPropagation()},placeholder:Lw("请输入表单描述")})},rtt=function(e){var t=e.view,n=qwe(mR.TABLE),r=yre(oA),o=yre(nR);return n.canUpdate()?u.a.createElement("div",{className:"lakex-form-empty-field"},u.a.createElement("img",{className:"lakex-form-empty-field-img",src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*oG_ZTrK2ylsAAAAAAAAAAAAADvuFAQ/original"}),u.a.createElement("p",null,Lw("表单为空")),u.a.createElement("span",{className:"lakex-form-empty-field-tip"},Lw("点击左侧列表添加已有列 或 点击下方按钮添加新表单项")),u.a.createElement("br",null),u.a.createElement(m.a,{type:"primary",onClick:function(){var e=r.getAllFields(),n=KC(HC.TEXT,nk(e,(function(e){return{name:e.get("name"),type:e.get("type")}})));o.execCommand("addField",{viewId:t.get("uuid"),field:{uuid:qw(32),name:n,type:HC.TEXT}})}},u.a.createElement(oue,{type:"Add"}),Lw("添加"))):null};function ott(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function itt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ott(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ott(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var att=function(e){var t=!e.defaultValue;return u.a.createElement("div",{className:"lakex-form-item-ui-container ".concat(t?"lakex-form-item-ui-show-tooltip":"")},u.a.createElement(s.a,itt(itt({autoFocus:!0,placeholder:Lw("请输入问题")},e),{},{maxLength:128})),t&&u.a.createElement(d.a,{title:Lw("当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。")},u.a.createElement(oue,{className:"lakex-form-item-input-tooltip",type:"Question"})))},utt=function(e){var t,n=e.viewField,r=(t=yre(Ooe),{getFormComponent:function(e){return t.getFieldFormComponent(e)}}).getFormComponent;if(!n)return null;if(!n.get("field"))return null;var o=r(n.get("field").get("type"));return o?u.a.createElement(d.a,{placement:"bottom",title:Lw("此处由填写者输入")},u.a.createElement("div",{className:"lakex-form-item-field"},u.a.createElement("div",{className:"lakex-form-item-field-mask"}),u.a.createElement(o,{viewField:n}))):null};function ltt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ctt=function(e){var t=e.viewField,n=yre(Ooe),r=yre(nR),o=yre(oFe);return{getFormComponent:function(e){return n.getFieldFormComponent(e)},onChange:function(e){null==r||r.execCommand("updateFieldProperty",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ltt(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ltt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uuid:t.get("field").get("uuid")},e))},onChangeOrder:function(e,n){null==o||o.updateFieldOptionOrder(t.get("field").get("uuid"),e,n)}}},stt=function(e){var t,n,r=e.viewField,o=ctt({viewField:r}),i=o.getFormComponent,a=o.onChange,l=o.onChangeOrder;if(!r)return null;if(!r.get("field"))return null;var c=r.get("field").get("type"),s=i(c);if(!s)return null;var d=s.OptionEditable;return d?u.a.createElement("div",{className:"lakex-table-form-designer-option-wrap"},u.a.createElement(d,{type:c,options:null==(t=r.get("field"))?void 0:t.get("options"),color:null==(n=r.get("field"))?void 0:n.get("color"),onChange:a,onChangeOrder:l,autoFocus:!1})):null},dtt=function(e){var t=e.view,n=e.viewField,r=e.viewFields,o=function(e){var t=e.view,n=e.viewFields,r=yre(oA),o=yre(nR),i=yre(_oe),a=yre(Ooe);return{onMoveUp:function(e){var r,i=ek(n,(function(t){return t.get("uuid")===e.get("uuid")}));if(0!==i){var a=null==(r=n.get(i-1))?void 0:r.get("field_uuid");null==o||o.execCommand("changeFieldOrder",{viewId:t.get("uuid"),sourceFieldId:e.get("field_uuid"),targetFieldId:a})}},onMoveDown:function(e){var r,i=ek(n,(function(t){return t.get("uuid")===e.get("uuid")})),a=null==(r=n.get(i+1))?void 0:r.get("field_uuid");a&&(null==o||o.execCommand("changeFieldOrder",{viewId:t.get("uuid"),sourceFieldId:e.get("field_uuid"),targetFieldId:a}))},onClone:function(e){null==o||o.execCommand(G3e.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid")})},onRemove:function(e){null==o||o.execCommand("removeViewField",{viewId:e.get("view_uuid"),fieldId:e.get("field").get("uuid")})},onChangeRequired:function(e,n){null==o||o.execCommand(z3e.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),required:n.target.checked})},onChangeDisplayType:function(e,n){null==o||o.execCommand(B3e.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),displayType:n})},onChangeName:g6e((function(e,n){(e.get("name")||e.get("field").get("name"))!==n&&(null==o||o.execCommand(q3e.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),name:n}))}),1e3),onCreateAfter:function(e){var n=r.getAllFields(),i=KC(HC.TEXT,nk(n,(function(e){return{name:e.get("name"),type:e.get("type")}})));null==o||o.execCommand("addField",{viewId:t.get("uuid"),field:{uuid:qw(32),name:i,type:HC.TEXT},sourceFieldId:e.get("field_uuid")})},openFieldConfigModal:function(e,t){null==i||i.emitClickEvent({eventName:"fieldConfigClick",data:{viewField:e,e:t}})},Icon:function(e){var t=e.type,n=null==a?void 0:a.getFieldIcon(t);return n?u.a.createElement(n,{size:16}):null}}}({view:t,viewField:n,viewFields:r}),i=o.onMoveUp,a=o.onMoveDown,l=o.onClone,c=o.onRemove,s=o.onChangeRequired,f=o.onChangeName,p=o.onCreateAfter,v=o.onChangeDisplayType,h=o.openFieldConfigModal,g=o.Icon;if(!n.get("field"))return null;var y=n.get("field").get("type");return u.a.createElement("div",{className:"lakex-form-item active"},u.a.createElement("div",{className:"lakex-form-item-inner"},u.a.createElement("div",{className:"lakex-form-item-inner-sidebar",onClick:function(e){e.stopPropagation()}},u.a.createElement(d.a,{placement:"left",title:Lw("向上移动")},u.a.createElement(oue,{type:"ArrowUp",onClick:function(){i(n)}})),u.a.createElement(d.a,{placement:"left",title:Lw("向下移动")},u.a.createElement(oue,{type:"ArrowDown",onClick:function(){a(n)}})),u.a.createElement(d.a,{placement:"left",title:Lw("复制表单项")},u.a.createElement(oue,{type:"Copy",onClick:function(){l(n)}})),u.a.createElement(d.a,{placement:"left",title:Lw("移除表单项")},u.a.createElement(oue,{type:"Clear",onClick:function(){c(n)}}))),u.a.createElement("div",{className:"lakex-form-item-inner-container"},u.a.createElement("div",{className:"lakex-form-item-inner-column-configs"},u.a.createElement("div",{className:"lakex-form-item-inner-column-name"},u.a.createElement(d.a,{placement:"top",title:Lw("点击修改字段")},u.a.createElement("span",{className:"lakex-form-item-inner-column-content",onClick:function(e){return h(n,e)}},u.a.createElement(g,{type:y}),null==n?void 0:n.get("field").get("name"),u.a.createElement(oue,{type:"Edit"})))),u.a.createElement("div",{className:"lakex-form-item-inner-type"},u.a.createElement("div",{className:"lakex-form-item-inner-validation"},u.a.createElement(k.a,{defaultChecked:n.get("required"),onChange:function(e){return s(n,e)}},Lw("必填"))))),u.a.createElement("div",{className:"lakex-form-item-inner-field-configs"},u.a.createElement(att,{defaultValue:n.get("name")||n.get("field").get("name"),onChange:function(e){f(n,e.target.value)},onBlur:function(e){f(n,e.target.value)}}),u.a.createElement(utt,{viewField:n}),u.a.createElement(stt,{viewField:n}),fE.isSelectLike(y)&&u.a.createElement("div",{className:"lakex-form-item-option-layout"},u.a.createElement("span",{style:{color:"#8c8c8c"}},Lw("布局方式"),":"),u.a.createElement(x.a,{defaultValue:n.get("display_type")||"list",bordered:!1,onChange:function(e){v(n,e)},dropdownClassName:"lakex-form-item-dropdown"},u.a.createElement(x.a.Option,{value:"list"},Lw("列表")),u.a.createElement(x.a.Option,{value:"dropdown"},Lw("下拉")))))),n.get("required")&&""===n.get("name")?u.a.createElement("div",{className:"lakex-form-item-inner-error"},Lw("请输入问题")):null),u.a.createElement("div",{className:"lakex-form-item-inner-add"},u.a.createElement(m.a,{onClick:function(e){p(n)},onMouseDown:function(e){e.stopPropagation()}},u.a.createElement(oue,{type:"Add"}),Lw("添加"))))},ftt=function(e){var t,n=e.viewField,r=e.onClick,o=void 0===r?function(){}:r,i=e.index;return u.a.createElement("div",{className:"lakex-form-item lakex-form-item-normal",onClick:o},u.a.createElement("div",{className:"lakex-form-item-normal-preview"},u.a.createElement("div",{className:n.get("required")?"lakex-form-item-normal-preview-required":""},"".concat(i+1,". ").concat(n.get("name")||(null==(t=n.get("field"))?void 0:t.get("name")))),u.a.createElement("div",{className:"lakex-form-item-normal-comp"},u.a.createElement(utt,{viewField:n}))),n.get("required")&&""===n.get("name")?u.a.createElement("div",{className:"lakex-form-item-error"},Lw("请输入问题")):null)},ptt=function(e){var t=e.index,n=e.active,r=e.view,o=e.viewField,i=e.viewFields,a=e.onClick,l=void 0===a?function(){}:a;return n?u.a.createElement(dtt,{view:r,viewField:o,viewFields:i}):u.a.createElement(ftt,{onClick:l,index:t,viewField:o})},vtt=function(e){var t=e.view,n=e.viewFields,r=function(e){var t=e.view,n=e.viewFields,r=qwe(mR.TABLE),o=Tf(Object(a.useState)(),2),i=o[0],u=o[1],l=yre(oA),c=yre(nR),s=Tre();return Object(a.useEffect)((function(){var e=function(e){var t=e.target;if("INPUT"!==t.tagName){for(;t&&t.classList&&t!==document.body;){if(t.classList.contains("lakex-form-item")||t.classList.contains("lakex-form-item-dropdown")||t.classList.contains("lakex-table-col-configs")||t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-menu-configs-submenu")||t.classList.contains("lakex-table-ai-writing-config-modal"))return;t=t.parentNode}u(void 0),s()}};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[]),{state:{activeId:i},canUpdate:r.canUpdate(),forceUpdate:s,setActiveId:u,onCreate:function(){var e,r=l.getAllFields(),o=KC(HC.TEXT,nk(r,(function(e){return{name:e.get("name"),type:e.get("type")}})));null==c||c.execCommand("addField",{viewId:t.uuid,field:{uuid:qw(32),name:o,type:HC.TEXT},sourceFieldId:null==(e=n[n.length-1])?void 0:e.field_uuid})}}}({view:t,viewFields:n}),o=r.state,i=r.forceUpdate,l=r.setActiveId,c=r.onCreate,s=r.canUpdate;return u.a.createElement("div",{className:"lakex-form-list"},nk(n,(function(e,r){var a=e.get("field");return a?u.a.createElement(ptt,{view:t,viewField:e,viewFields:n,index:r,active:e.get("uuid")===o.activeId,key:a.get("uuid"),onClick:function(){s&&(l(e.get("uuid")),i())}}):null})),s&&u.a.createElement("div",{className:"lakex-form-list-footer"},u.a.createElement(m.a,{type:"primary",onClick:function(e){c()}},u.a.createElement(oue,{type:"Add"}),Lw("添加"))))},htt=function(e){var t=e.viewId,n=yre(o6e),r=yre(ZR),o=Tf(Object(a.useState)(null==n?void 0:n.getFormEditData(t)),2),i=o[0],u=o[1];return Object(a.useEffect)((function(){var e=r.onDataChanged((function(){var e;e=null==n?void 0:n.getFormEditData(t),u(e)}));return function(){e.destroy()}}),[]),{formData:i}},gtt=function(e){var t,n,r,o,i=htt({viewId:e.viewId}).formData;return i?u.a.createElement("div",{className:"lakex-form-container"},(null==i?void 0:i.fields)&&u.a.createElement(ett,{view:i.view,fields:i.fields,viewFields:i.viewFields}),u.a.createElement("div",{className:"lakex-form-configs"},u.a.createElement("div",{className:"lakex-form-configs-bg"},0!==(null==(t=i.viewFields)?void 0:t.length)&&u.a.createElement("div",{className:"lakex-form-configs-title"},u.a.createElement(ttt,{view:i.view,defaultValue:null==(n=i.view)?void 0:n.get("name")}),u.a.createElement(ntt,{view:i.view,defaultValue:null==(r=i.view)?void 0:r.get("desc")})),0===(null==(o=i.viewFields)?void 0:o.length)?u.a.createElement(rtt,{view:i.view}):u.a.createElement(vtt,{view:i.view,viewFields:i.viewFields})))):null},mtt=u.a.forwardRef((function(e,t){var n=function(){var e=Gwe(),t=qwe(mR.TABLE),n=yre(o6e),r=yre(_oe),o=yre(hE),i=Tf(Object(a.useState)(Y3e.PENDING),2),u=i[0],l=i[1],c=e.view.get("id"),s=e.view.get("uuid"),d=Object(a.useCallback)((function(e){var t=null==n?void 0:n.getShare(e);(null==t?void 0:t.get("status"))===XC.ACTIVE?l(Y3e.COLLECTING):l(Y3e.PENDING)}),[s]);return Object(a.useEffect)((function(){if(c){var e=null==n?void 0:n.getShare(s);e?e.get("status")===XC.ACTIVE?l(Y3e.COLLECTING):l(Y3e.PENDING):null==n||n.initForm(s).then((function(){d(s)})),null==o||o.onChange((function(e){var t=e.spell;"view_share"===t.table&&t.command===mE.UPSERT&&d(s)}))}else l(Y3e.PENDING)}),[c,s]),{status:u,viewId:s,canUpdate:t.canUpdate(),onOpenManage:function(t){var n;r.emitClickEvent({eventName:"clickFormManageButton",data:{target:t.currentTarget,viewId:null==(n=null==e?void 0:e.view)?void 0:n.get("uuid"),status:u}})}}}(),r=n.status,o=n.onOpenManage,i=n.viewId,l=n.canUpdate,c=Lw("开启收集");return r===Y3e.COLLECTING&&(c=Lw("收集中")),u.a.createElement("div",{className:"lakex-table-form",ref:t,key:i},u.a.createElement(gtt,{viewId:i}),l&&u.a.createElement(m.a,{className:"lakex-table-form-manage",type:"primary",onClick:o},c))}));function ytt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function btt(e,t,n){return t=Sd(t),Od(e,wtt()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function wtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wtt=function(){return!!e})()}var _tt=function(e){function t(){var e;return sl(this,t),(e=btt(this,t,arguments)).viewType=sE.FORM,e.title=Lw("表单视图"),e.desc=Lw("像问卷一样收集信息"),e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ytt(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ytt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FormView"},e))},e.colorCls="yuque-color-orange-5",e.Component=mtt,e}return jd(t,e),ll(t)}(jae),ktt=Object.defineProperty,Ctt=Object.getOwnPropertyDescriptor,Ett=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new _tt({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function Ott(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Stt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ott(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ott(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ett.pluginName="render-viewer-form",Ett=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ctt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ktt(t,n,i),i}([Gs({contrib:[toe,aoe]})],Ett);var xtt=Object.defineProperty,jtt=Object.getOwnPropertyDescriptor,Dtt=function(e,t,n,r){for(var o,i=r>1?void 0:r?jtt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xtt(t,n,i),i},Att=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerCopyMiddleware",value:function(){var e=this;return function(t,n){if(e.selectionService.isRowSelection()){var r=e.selectionService.getRecordIds(t).map((function(t){var n=e.contentService.getContent(t,"record");return n?{target_uuid:n.get("target_uuid"),target_type:n.get("target_type"),format:n.get("format"),source:n.get("source"),html:n.get("html")}:null}));return Stt(Stt({},n),{},{recordContents:r.filter((function(e){return!!e}))})}return n}}},{key:"registerPasteMiddleware",value:function(){var e=this;return function(t,n,r,o){if(n.recordContents&&n.recordContents.length>0){var i=n.recordContents,a=[].concat(tl(o),tl(r.reverse())),u=n.cells.map((function(e){return e[0].recordId}));i.map((function(t){var n=u.findIndex((function(e){return e===t.target_uuid})),r=a[n];r&&e.contentService.setContentWithSlient(r,t.target_type,{html:t.html,source:t.source,format:t.format})}))}}}},{key:"registerMatchMiddleware",value:function(){var e=this;return function(t,n,r,o){var i=o;if(r){var a=e.contentService.getContent(r,"record");if(a){var u=a.get("html"),l=new RegExp("<[^<>]+>","g");i+=u.replace(l,"")}}return i}}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Att.pluginName="render-content",Dtt([Ks(nxe)],Att.prototype,"selectionService",2),Dtt([Ks(J9e)],Att.prototype,"contentService",2);var Rtt=[Yet,Qet,Ett,Att=Dtt([Gs({contrib:[toe,Gxe,kFe]})],Att)],Ftt=!1,Itt=!1;function Ptt(){if(Ftt)return Itt;var e=document.createElement("canvas");return Itt=!(!e.getContext||!e.getContext("2d"))&&(BC.isChrome||BC.isFirefox||0===e.toDataURL("image/webp").indexOf("data:image/webp")),Ftt=!0,Itt}var Mtt=function(e,t,n){if(t&&t>16383)return e;if(n&&n>16383)return e;if(Ptt()&&gn.OssUtil.isURLInOSS(e)){var r=new URL(e);if(!r.pathname)return e;var o=r.pathname.toLowerCase(),i=o.substring(o.lastIndexOf("."));[".webp",".svg"].includes(i)||(e=gn.OssUtil.addImageProcess(r,"format","webp"))}return e};var Ttt={token:Kge,useValue:{registerImage:function(){return{getExts:function(){return gn.FileUtils.EXTS.IMAGE_EXT_STR},tryGetWebp:Mtt,getRenderUrl:function(e,t,n){return function(e,t,n){if(Ptt())return Mtt(e,t,n);var r=new URL(e);if(!r.pathname)return e;var o=r.pathname.toLowerCase(),i=o.substring(o.lastIndexOf("."));return[".heic",".heif"].includes(i)?gn.OssUtil.addImageProcess(r,"format","png"):e}(e,t,n)},getThumbnailUrl:function(e,t,n,r){e=Mtt(e,t,n);var o=t||r,i=gn.DeviceUtil.getDevicePixelRatio();if(o<=parseInt(r)*Number(i))return e;var a=function(e,t,n){if(!(n.width&&n.originWidth&&n.originHeight&&t&&t.startsWith("http")))return null;if(n.originWidth>3e4||n.originHeight>3e4)return null;var r=parseInt(n.width,10);r>e&&(r=e),r*=gn.DeviceUtil.getDevicePixelRatio();var o=t.toLowerCase();if(!gn.OssUtil.isURLInOSS(o))return null;var i=r*(n.originHeight/n.originWidth);return r>0&&r*i<16777216&&r<4096&&i<4096&&r<n.originWidth&&!/^https?:\/\/\w+\.alipayobjects\.com\//i.test(o)&&!o.endsWith(".gif")&&!o.endsWith(".svg")?gn.OssUtil.addImageProcess(t,"resize","w_".concat(r)):null}(r,e,{width:r,originWidth:o,originHeight:n});return a||e}}}}};function Ntt(e,t){var n=gn.FileUtils.getFileExtname(e);return gn.FileUtils.isFileCanPreview(n,t)?gn.FileUtils.getPreviewUrl(e):e}var Btt={token:kie,useValue:{registerFile:function(){return{getExts:function(){return gn.FileUtils.EXTS.FILE_EXT_STR},getFileKey:function(e){return gn.FileUtils.getFileKey(e)},getPreviewUrl:function(e){return gn.FileUtils.getPreviewUrl(e)},getPreviewOrDownloadUrl:Ntt}}}},Vtt={},Ltt={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(Ltt);var ztt=Ltt.exports;const Utt=Cn(dl),Htt=Cn(cl),qtt=Cn(al);var Wtt,$tt,Gtt,Ktt={};function Ytt(){return Wtt||(Wtt=1,Object.defineProperty(Ktt,"__esModule",{value:!0}),Ktt.Theme=void 0,Ktt.Theme=function(e){return e.default="default",e.dark="dark",e}({})),Ktt}function Jtt(){if(Gtt)return $tt;Gtt=1;return $tt={colorToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E"},colorDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0"},themeToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E","@yuque-color-theme":"#00B96B","@yuque-color-normal":"#D8DAD9","@yuque-color-bg-primary":"#FFFFFF","@yuque-color-bg-secondary":"#FAFAFA","@yuque-color-bg-tertiary":"#F4F5F5","@yuque-color-bg-primary-hover":"#EFF0F0","@yuque-color-bg-primary-hover-light":"#E7E9E8","@yuque-color-bg-foreground":"#FFFFFF","@yuque-color-bg-pre-foreground":"#FFFFFF","@yuque-color-bg-pre-secondary":"#F4F5F5","@yuque-color-bg-card-dialog":"#FAFAFA","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-border-primary":"#E7E9E8","@yuque-color-border-primary-active":"#00B96B","@yuque-color-border-light":"rgba(0, 0, 0, 0.04)","@yuque-color-border-heavy":"#EFF0F0","@yuque-color-cardborder-hover":"#81BBF8","@yuque-color-cardborder-selected":"#2F8EF4","@yuque-color-sheetborder":"rgba(0, 0, 0, 0.1)","@yuque-color-text-primary":"#262626","@yuque-color-text-body":"#585A5A","@yuque-color-text-caption":"#8A8F8D","@yuque-color-text-disable":"#BEC0BF","@yuque-color-text-link":"#117CEE","@yuque-color-text-link-hover":"#5FA8F6","@yuque-color-icon-primary":"#262626","@yuque-color-icon-secondary":"#585A5A","@yuque-color-icon-caption":"#8A8F8D","@yuque-color-icon-disable":"#BEC0BF","@yuque-color-icon-hover":"#D8DAD9","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#00B96B","@yuque-color-function-info":"#117CEE","@yuque-color-function-warning":"#ECAA04","@yuque-color-function-error":"#DF2A3F","@yuque-color-badge":"#2F8EF4","@yuque-color-popover-bg":"#FFFFFF","@yuque-color-disable-color":"#BEC0BF"},themeDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0","@yuque-color-theme":"#2ED790","@yuque-color-normal":"#424242","@yuque-color-bg-primary":"#141414","@yuque-color-bg-secondary":"#1F1F1F","@yuque-color-bg-tertiary":"rgba(255, 255, 255, 0.04)","@yuque-color-bg-primary-hover":"rgba(255, 255, 255, 0.12)","@yuque-color-bg-primary-hover-light":"#333333","@yuque-color-bg-foreground":"#1F1F1F","@yuque-color-bg-pre-foreground":"#292929","@yuque-color-bg-pre-secondary":"#292929","@yuque-color-bg-card-dialog":"#292929","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"#292929","@yuque-color-border-primary":"rgba(255, 255, 255, 0.12)","@yuque-color-border-primary-active":"#29AD76","@yuque-color-border-light":"rgba(255, 255, 255, 0.08)","@yuque-color-border-heavy":"rgba(255, 255, 255, 0.12)","@yuque-color-cardborder-hover":"#253C56","@yuque-color-cardborder-selected":"#1D4672","@yuque-color-sheetborder":"rgba(255, 255, 255, 0.12)","@yuque-color-text-primary":"#E2E2E2","@yuque-color-text-body":"#B3B3B3","@yuque-color-text-caption":"#848484","@yuque-color-text-disable":"#505050","@yuque-color-text-link":"#3B82CE","@yuque-color-text-link-hover":"#245A94","@yuque-color-icon-primary":"#E2E2E2","@yuque-color-icon-secondary":"#B3B3B3","@yuque-color-icon-caption":"#848484","@yuque-color-icon-disable":"#505050","@yuque-color-icon-hover":"#424242","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#51B88D","@yuque-color-function-info":"#3B82CE","@yuque-color-function-warning":"#D2A638","@yuque-color-function-error":"#CA3F4F","@yuque-color-badge":"#2B6BB1","@yuque-color-popover-bg":"#1F1F1F","@yuque-color-disable-color":"#505050"}}}var Xtt,Ztt,Qtt,ent,tnt={},nnt={exports:{}};function rnt(){return Xtt||(Xtt=1,function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,n=/\s+$/;function r(e,t){if(t=t||{},(e=e||"")instanceof r)return e;if(!(this instanceof r))return new r(e,t);var n=o(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function o(t){var n={r:0,g:0,b:0},r=1,o=null,a=null,l=null,s=!1,d=!1;return"string"==typeof t&&(t=L(t)),"object"==e(t)&&(V(t.r)&&V(t.g)&&V(t.b)?(n=i(t.r,t.g,t.b),s=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):V(t.h)&&V(t.s)&&V(t.v)?(o=M(t.s),a=M(t.v),n=c(t.h,o,a),s=!0,d="hsv"):V(t.h)&&V(t.s)&&V(t.l)&&(o=M(t.s),l=M(t.l),n=u(t.h,o,l),s=!0,d="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=j(r),{ok:s,format:t.format||d,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function i(e,t,n){return{r:255*D(e,255),g:255*D(t,255),b:255*D(n,255)}}function a(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),u=(i+a)/2;if(i==a)r=o=0;else{var l=i-a;switch(o=u>.5?l/(2-i-a):l/(i+a),i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,l:u}}function u(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=D(e,360),t=D(t,100),n=D(n,100),0===t)r=o=i=n;else{var u=n<.5?n*(1+t):n+t-n*t,l=2*n-u;r=a(l,u,e+1/3),o=a(l,u,e),i=a(l,u,e-1/3)}return{r:255*r,g:255*o,b:255*i}}function l(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),u=i,l=i-a;if(o=0===i?0:l/i,i==a)r=0;else{switch(i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,v:u}}function c(e,t,n){e=6*D(e,360),t=D(t,100),n=D(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),u=n*(1-(1-o)*t),l=r%6;return{r:255*[n,a,i,i,u,n][l],g:255*[u,n,n,a,i,i][l],b:255*[i,i,u,n,n,a][l]}}function s(e,t,n,r){var o=[P(Math.round(e).toString(16)),P(Math.round(t).toString(16)),P(Math.round(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(e,t,n,r,o){var i=[P(Math.round(e).toString(16)),P(Math.round(t).toString(16)),P(Math.round(n).toString(16)),P(T(r))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function f(e,t,n,r){return[P(T(r)),P(Math.round(e).toString(16)),P(Math.round(t).toString(16)),P(Math.round(n).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s-=t/100,n.s=A(n.s),r(n)}function v(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.s+=t/100,n.s=A(n.s),r(n)}function h(e){return r(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l+=t/100,n.l=A(n.l),r(n)}function m(e,t){t=0===t?0:t||10;var n=r(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),r(n)}function y(e,t){t=0===t?0:t||10;var n=r(e).toHsl();return n.l-=t/100,n.l=A(n.l),r(n)}function b(e,t){var n=r(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,r(n)}function w(e){var t=r(e).toHsl();return t.h=(t.h+180)%360,r(t)}function _(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=r(e).toHsl(),o=[r(e)],i=360/t,a=1;a<t;a++)o.push(r({h:(n.h+a*i)%360,s:n.s,l:n.l}));return o}function k(e){var t=r(e).toHsl(),n=t.h;return[r(e),r({h:(n+72)%360,s:t.s,l:t.l}),r({h:(n+216)%360,s:t.s,l:t.l})]}function C(e,t,n){t=t||6,n=n||30;var o=r(e).toHsl(),i=360/n,a=[r(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,a.push(r(o));return a}function E(e,t){t=t||6;for(var n=r(e).toHsv(),o=n.h,i=n.s,a=n.v,u=[],l=1/t;t--;)u.push(r({h:o,s:i,v:a})),a=(a+l)%1;return u}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=j(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return s(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*D(this._r,255))+"%",g:Math.round(100*D(this._g,255))+"%",b:Math.round(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*D(this._r,255))+"%, "+Math.round(100*D(this._g,255))+"%, "+Math.round(100*D(this._b,255))+"%)":"rgba("+Math.round(100*D(this._r,255))+"%, "+Math.round(100*D(this._g,255))+"%, "+Math.round(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=r(e);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,[3])},tetrad:function(){return this._applyCombination(_,[4])}},r.fromRatio=function(t,n){if("object"==e(t)){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]="a"===i?t[i]:M(t[i]));t=o}return r(t,n)},r.equals=function(e,t){return!(!e||!t)&&r(e).toRgbString()==r(t).toRgbString()},r.random=function(){return r.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},r.mix=function(e,t,n){n=0===n?0:n||50;var o=r(e).toRgb(),i=r(t).toRgb(),a=n/100;return r({r:(i.r-o.r)*a+o.r,g:(i.g-o.g)*a+o.g,b:(i.b-o.b)*a+o.b,a:(i.a-o.a)*a+o.a})},r.readability=function(e,t){var n=r(e),o=r(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},r.isReadable=function(e,t,n){var o,i,a=r.readability(e,t);switch(i=!1,(o=z(n)).level+o.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},r.mostReadable=function(e,t,n){var o,i,a,u,l=null,c=0;i=(n=n||{}).includeFallbackColors,a=n.level,u=n.size;for(var s=0;s<t.length;s++)(o=r.readability(e,t[s]))>c&&(c=o,l=r(t[s]));return r.isReadable(e,l,{level:a,size:u})||!i?l:(n.includeFallbackColors=!1,r.mostReadable(e,["#fff","#000"],n))};var O=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=r.hexNames=x(O);function x(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function j(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){F(e)&&(e="100%");var n=I(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function A(e){return Math.min(1,Math.max(0,e))}function R(e){return parseInt(e,16)}function F(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function I(e){return"string"==typeof e&&-1!=e.indexOf("%")}function P(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}function T(e){return Math.round(255*parseFloat(e)).toString(16)}function N(e){return R(e)/255}var B=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(e){return!!B.CSS_UNIT.exec(e)}function L(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r,o=!1;if(O[e])e=O[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(r=B.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=B.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=B.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=B.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=B.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=B.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=B.hex8.exec(e))?{r:R(r[1]),g:R(r[2]),b:R(r[3]),a:N(r[4]),format:o?"name":"hex8"}:(r=B.hex6.exec(e))?{r:R(r[1]),g:R(r[2]),b:R(r[3]),format:o?"name":"hex"}:(r=B.hex4.exec(e))?{r:R(r[1]+""+r[1]),g:R(r[2]+""+r[2]),b:R(r[3]+""+r[3]),a:N(r[4]+""+r[4]),format:o?"name":"hex8"}:!!(r=B.hex3.exec(e))&&{r:R(r[1]+""+r[1]),g:R(r[2]+""+r[2]),b:R(r[3]+""+r[3]),format:o?"name":"hex"}}function z(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}return r}()}(nnt)),nnt.exports}function ont(){if(Qtt)return Ztt;Qtt=1;var e=rnt();function t(e){return Math.min(1,Math.max(0,e))}function n(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;"string"==typeof r&&r.endsWith("%")&&(r=parseInt(r,10)/100);var o=e(t).toRgb(),i=e(n).toRgb(),a=2*r-1,u=o.a-i.a,l=((a*u==-1?a:(a+u)/(1+a*u))+1)/2,c=1-l,s={r:o.r*l+i.r*c,g:o.g*l+i.g*c,b:o.b*l+i.b*c,a:o.a*r+i.a*(1-r)};return e(s).toRgbString()}e=e.default||e;var r={lagacy:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],dark:[["@black","@yuque-grey-900","@yuque-grey-800","@yuque-grey-700","@yuque-grey-500","@yuque-grey-400","@yuque-grey-300","@yuque-grey-200","@yuque-grey-100","@white"],["@red-600","@orange-600","@yellow-600","@bright-yellow-500","@pea-green-600","@cyan-500","@blue-600","@sea-blue-600","@purple-600","@magenta-600"],["@red-100","@orange-100","@yellow-100","@bright-yellow-100","@pea-green-100","@cyan-100","@blue-100","@sea-blue-100","@purple-100","@magenta-100"],["@red-300","@orange-300","@yellow-300","@bright-yellow-400","@pea-green-300","@cyan-300","@blue-300","@sea-blue-300","@purple-300","@magenta-300"],["@red-500","@orange-500","@yellow-500","@bright-yellow-600","@pea-green-500","@cyan-600","@blue-500","@sea-blue-500","@purple-500","@magenta-500"],["@red-700","@orange-700","@yellow-700","@bright-yellow-800","@pea-green-700","@cyan-800","@blue-700","@sea-blue-700","@purple-700","@magenta-700"],["@red-900","@orange-900","@yellow-900","@bright-yellow-900","@pea-green-900","@cyan-900","@blue-900","@sea-blue-900","@purple-900","@magenta-900"]],getTokenFromColor:function(e){var t,n,o;return r.lagacy.map((function(t,r){t.map((function(t,i){e===t&&(n=r,o=i)}))})),null===(t=r.dark[n])||void 0===t?void 0:t[o]}};return Ztt={toLight:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=e(n).toHsl();return"white"===e(o).toName()||"black"===e(o).toName()?"#ffffff":(o.l+=r/100,o.l=t(o.l),e(o).toRgbString())},toDark:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=e(n).toHsl();return"white"===e(o).toName()||"black"===e(o).toName()?"#000000":(o.l-=r/100,o.l=t(o.l),e(o).toRgbString())},fade:function(t,n){return"string"==typeof n&&n.endsWith("%")&&(n=parseInt(n,10)/100),(t=e(t)).setAlpha(n).toRgbString()},fadeout:function(n,r){var o=e(n).toHsl();return o.a-=r/100,o.a=t(o.a),e(o).toRgbString()},mix:n,autoDark:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#141414",o=function(t){var n=e(t).toHsl().l;return n>.9&&n<1?.1:n>.8&&n<.9?.2:n>.7&&n<.8?.3:n>.6&&n<.7?.4:n>.5&&n<.6?.5:n>.4&&n<.5?.6:n>.3&&n<.4?.7:n>.2&&n<.3?.8:n<.2?.9:.5}(t),i=function(t){var n=e(t).toHsl();return 0===n.h?n.s=.2:n.h>255?n.s=.7:n.s=.9,n.l=.4,e(n).toHexString()}(t);return e(n(i,r,o)).toHexString()},reverseL:function(t){var n=e(t).toHsl();return n.l=1-n.l,e(n).toRgbString()},LagacyPalette:r},Ztt}var int=ztt;Object.defineProperty(Vtt,"__esModule",{value:!0});var ant=Vtt.DefaultThemeManager=void 0,unt=int(Utt),lnt=int(Htt),cnt=int(qtt),snt=Ytt(),dnt=Jtt(),fnt=int(function(){if(ent)return tnt;ent=1,Object.defineProperty(tnt,"__esModule",{value:!0}),tnt.default=void 0;var e=Ytt(),t=ont(),n=Jtt(),r=rnt();return tnt.default={transform:function(o,i,a){var u=o||e.Theme.default,l=i||e.Theme.default;if(u===l)return a;if(a.startsWith("rgb(")&&a.indexOf(",")<0)return a;if(u===e.Theme.default&&l===e.Theme.dark){if(t.LagacyPalette.getTokenFromColor(a)&&(a=t.LagacyPalette.getTokenFromColor(a)),a.startsWith("@")&&n.themeToken[a])return Number(a.split("-").reverse()[0])<10?n.themeDarkToken["".concat(a,"00")]:n.themeDarkToken[a];var c=Object.keys(n.colorToken).find((function(e){return r(n.colorToken[e]).toHex8String()===r(a).toHex8String()}));return c?n.colorDarkToken[c]:(0,t.reverseL)(a)}if(u===e.Theme.dark&&l===e.Theme.default){if(a.startsWith("@")&&n.themeDarkToken[a])return n.themeToken[a];var s=Object.keys(n.colorDarkToken).find((function(e){return n.colorDarkToken[e]&&r(n.colorDarkToken[e]).toHex8String()===r(a).toHex8String()}));return s?n.colorToken[s]:(0,t.reverseL)(a)}return a},get:function(t,r){return t.startsWith("@")?r===e.Theme.dark?n.themeDarkToken[t]:n.themeToken[t]:t}},tnt}()),pnt="data-kumuhana";ant=Vtt.DefaultThemeManager=function(){function e(){(0,unt.default)(this,e),(0,cnt.default)(this,"_current",null),(0,cnt.default)(this,"listeners",[])}return(0,lnt.default)(e,[{key:"current",get:function(){return this._current}},{key:"themeToken",get:function(){return this._current===snt.Theme.dark?dnt.themeDarkToken:dnt.themeToken}},{key:"_getStorageKey",value:function(e){return"".concat("yuque:prefers-color",":").concat(e)}},{key:"_getStorage",value:function(e){return e&&localStorage.getItem(this._getStorageKey(e))===snt.Theme.dark?snt.Theme.dark:snt.Theme.default}},{key:"init",value:function(e){var t=this._getStorage(e)||snt.Theme.default;return document.documentElement.setAttribute(pnt,"dark"===t?"pouli":"default"),this._current!==t&&(this._current=t,!0)}},{key:"switch",value:function(e,t){var n=this._current;if(n===e)return!1;var r=e===snt.Theme.dark?snt.Theme.dark:snt.Theme.default;return document.documentElement.setAttribute(pnt,"dark"===r?"pouli":"default"),this._current=r,t&&localStorage.setItem(this._getStorageKey(t),r),this.emitChange(n),!0}},{key:"emitChange",value:function(e){var t=this._current;this.listeners.forEach((function(n){n(t,e)}))}},{key:"onChange",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"transformColor",value:function(e,t,n){return fnt.default.transform(e,t,n)}},{key:"getColor",value:function(e,t){return t||(t=this._current),fnt.default.get(e,t)}}]),e}();var vnt={token:ZI,useValue:{registerTheme:function(){return{getThemeManager:function(){var e=b3e.themeManager;return e||(e=new ant),e}}}}},hnt=function(){return ll((function e(){sl(this,e)}),null,[{key:"openExternalLink",value:function(e){if(!globalThis.openExternalLink)return window.open(e,"_blank","noopener,noreferrer");globalThis.openExternalLink(e,!0)}}])}(),gnt=function(){return ll((function e(t){sl(this,e),this.openerName="file-previewer-opener",this.canPreview=function(e){return!0},"function"==typeof t&&(this.canPreview=t)}),[{key:"open",value:function(e,t){var n=gn.FileUtils.getFileExtname(e);if(this.canPreview(n)){var r=gn.FileUtils.getPreviewUrl(e);r&&hnt.openExternalLink(r)}else v.a.warning(u.a.createElement("span",{},[Lw("当前文档中此文件类型不支持预览和下载"),u.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:gn.disableExtLink,target:"_blank",onClick:function(e){e.preventDefault(),hnt.openExternalLink(gn.disableExtLink)}},[u.a.createElement(dn.default)])]))}}])}(),mnt=function(){return ll((function e(){sl(this,e),this.openerName="href-opener",this.apps=["phone"]}),[{key:"open",value:function(e){var t;null==(t=globalThis.YuqueDesktopJSBridge)||t.postMessage("window.openExternalLink",{targetUrl:e,isNewWindow:!1,isLocal:!0})}}])}(),ynt=function(){return ll((function e(){sl(this,e),this.openerName="safe-redirect-opener",this.apps=["link:external"]}),[{key:"open",value:function(e){hnt.openExternalLink(e)}}])}(),bnt=function(){return ll((function e(){sl(this,e),this.openerName="window-new-opener"}),[{key:"open",value:function(e){hnt.openExternalLink(e)}}])}(),wnt=function(){return ll((function e(){sl(this,e),this.openerName="window-opener",this.apps=["email"]}),[{key:"open",value:function(e){var t;null==(t=globalThis.YuqueDesktopJSBridge)||t.postMessage("window.openExternalLink",{targetUrl:e,isNewWindow:!1,isLocal:!0})}}])}(),_nt=function(){return ll((function e(){sl(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.list,o=n.index||0;r||(o=0,r=[{src:e,msrc:e,width:n.width,height:n.height}]),null==(t=globalThis.NativeBridges)||t.previewImage({images:r.map((function(e){return{url:e.src,thumbnailUrl:e.msrc||e.src,width:e.width,height:e.height}})),index:o})}}])}(),knt=[new _nt],Cnt=function(){return ll((function e(t){sl(this,e),this.openerName="file-previewer-opener",this.apps=["file"],this.canPreview=function(e){return!0},"function"==typeof t&&(this.canPreview=t)}),[{key:"open",value:function(e,t){var n=gn.FileUtils.getFileExtname(e);if(this.canPreview(n)){var r=Ntt(e,t.size);r&&window.open(r,"_blank","noopener,noreferrer")}else v.a.warning(u.a.createElement("span",{},[Lw("当前文档中此文件类型不支持预览和下载"),u.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:gn.disableExtLink,target:"_blank",onClick:function(e){e.preventDefault(),window.open(gn.disableExtLink,"_blank","noopener,noreferrer")}},[u.a.createElement(dn.default)])]))}}])}(),Ent=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};var Ont=function(){return ll((function e(){sl(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t,n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.list,u=i.index||0;a||(u=0,a=[{src:e,width:i.width,height:i.height}]),t=a,n=u,r=Object(mn.getImageBrowser)(),o=Array.isArray(t)?t.map((function(e){return Ent(e)})):[t].map((function(e){return Ent(e)})),r.open(o,n||0)}}])}(),Snt=function(e){return{token:Ioe,useValue:{registerOpener:function(){var t=[new Cnt(e.canFilePreview),new Ont];return b3e.isDesktop?[].concat(t,tl(function(e){return[new bnt,new ynt,new gnt(e.canFilePreview),new wnt,new mnt]}(e))):b3e.isYuqueMobileApp?[].concat(t,tl(knt)):t}}}},xnt=function(e){var t=e["opener.filePreview.canPreview"];return[Btt,Ttt,vnt,Snt({canFilePreview:t})]},jnt=Is.defineToken("ViewerFormManageContribution"),Dnt=Object.defineProperty,Ant=Object.getOwnPropertyDescriptor,Rnt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ant(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Dnt(t,n,i),i},Fnt=function(){return ll((function e(){sl(this,e)}),[{key:"getProvider",value:function(){var e=this.formManageProvider.getContributions();return e[e.length-1].registerFormManage()}},{key:"enableForm",value:function(e,t){return this.getProvider().enableForm(e,t)}}])}();Rnt([yd(jnt)],Fnt.prototype,"formManageProvider",2),Fnt=Rnt([Gs()],Fnt);var Int=Object.defineProperty,Pnt=Object.getOwnPropertyDescriptor,Mnt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Pnt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Int(t,n,i),i},Tnt=function(){return ll((function e(){sl(this,e)}),[{key:"getShare",value:function(e){if(e)return this._readService.getViewShare(e)}},{key:"setModalPosition",value:function(e){this._position=e}},{key:"disableForm",value:(t=rl(ml.mark((function e(t){var n;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:this._commandService.execCommand("upsertViewShare",{viewId:n.get("uuid"),status:XC.INACTIVE}),this._modalService.close("form-enabled-modal");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"enableForm",value:(e=rl(ml.mark((function e(t){var n,r,o;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:return r="create",this._readService.getViewShare(n.get("uuid"))&&(r="update"),e.next=7,this._formManageRegistry.enableForm(n.get("id"),r);case 7:o=e.sent,this._commandService.execCommand("upsertViewShare",{viewId:n.get("uuid"),status:XC.ACTIVE,src:o.src}),this._modalService.close("form-disabled-modal"),this._modalService.open("form-enabled-modal",{position:this._position});case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"isEnableManage",value:function(){return!this._configuration.getValue("form.manage.disable")}}]);var e,t}();Mnt([Ks(oA)],Tnt.prototype,"_readService",2),Mnt([Ks(nR)],Tnt.prototype,"_commandService",2),Mnt([Ks(dye)],Tnt.prototype,"_modalService",2),Mnt([Ks(lk)],Tnt.prototype,"_configuration",2),Mnt([Ks(Fnt)],Tnt.prototype,"_formManageRegistry",2),Tnt=Mnt([Gs()],Tnt);var Nnt=function(e){var t=function(e){var t,n=qwe(mR.TABLE).canUpdate(),r=yre(Tnt),o=null==(t=null==r?void 0:r.getShare(e.form.get("uuid")))?void 0:t.get("src"),i=Tf(Object(a.useState)(),2),u=i[0],l=i[1],c="".concat(location.origin).concat(o);return Object(a.useEffect)((function(){bn.a.toDataURL(c,{margin:0},(function(e,t){l(t)}))}),[]),{state:{qrcode:u},shareUrl:c,copyLink:function(e){e.preventDefault(),hn()(c),v.a.success({content:Lw("复制成功"),style:{zIndex:1050}})},canUpdate:n,onDisable:function(){var t;null==(t=e.onDisable)||t.call(e)}}}(e),n=t.state,r=t.shareUrl,o=t.copyLink,i=t.canUpdate,l=t.onDisable;return u.a.createElement("div",{className:"lakex-table-form-share-link"},i?u.a.createElement("div",{className:"lakex-table-form-share-link-title"},u.a.createElement("div",null,Lw("获得链接的所有人，可填写并提交表单")),u.a.createElement("span",{className:"lakex-table-form-share-link-unlink"},Lw("停止收集"),u.a.createElement(j.a,{onChange:l}))):null,u.a.createElement("div",{className:"lakex-table-form-share-link-content"},u.a.createElement(m.a.Group,null,u.a.createElement(s.a,{value:r,disabled:!0,className:"lakex-table-form-share-link-input"}),u.a.createElement(m.a,{type:"primary",onClick:o,className:"lakex-table-form-share-link-btn"},Lw("复制填写链接"))),u.a.createElement("div",{className:"lakex-table-form-share-link-qrcode"},n.qrcode?u.a.createElement("img",{src:n.qrcode}):u.a.createElement("span",null),u.a.createElement("span",null,Lw("使用钉钉扫码$1",Lw(i?"分享":"打开"))))))},Bnt=function(e){return u.a.createElement("div",{className:"lakex-table-form-enabled-centered"},u.a.createElement(Nnt,{form:e.form,onDisable:e.onDisable}))},Vnt=function(){var e,t,n,r=(e=Wwe(),t=yre(o6e),n=yre(Tnt),{form:Tf(Object(a.useState)(null==t?void 0:t.getForm(e.get("uuid"))),1)[0],onDisable:function(){n.disableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}),o=r.form,i=r.onDisable,l=r.isEnableManage;return u.a.createElement("div",{className:"lakex-table-form-modal"},u.a.createElement("div",{className:"lakex-table-form-model-content"},l&&u.a.createElement(Bnt,{form:o,onDisable:i})))},Lnt=function(e){var t=e.onEnable;return u.a.createElement("div",{className:"lakex-table-form-disabled-centered"},u.a.createElement(Nhe,{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*5bdXSJkjvI0AAAAAAAAAAAAAARQnAQ",darkSrc:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eBesTrDkSP8AAAAAAAAAAAAAARQnAQ"}),u.a.createElement("div",{className:"lakex-table-form-disabled-title"},Lw("表单收集未开启")),u.a.createElement("p",{className:"lakex-table-form-disabled-desc"},Lw("点击「开启收集」按钮获得表单填写链接")),u.a.createElement("div",{className:"lakex-table-form-disabled-button"},u.a.createElement(m.a,{onClick:t,type:"primary"},Lw("开启收集"))))},znt=function(){var e,t,n,r=(e=Wwe(),t=yre(o6e),n=yre(Tnt),{form:Tf(Object(a.useState)(null==t?void 0:t.getForm(e.get("uuid"))),1)[0],onEnable:function(){n.enableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}),o=r.form,i=r.onEnable,l=r.isEnableManage;return u.a.createElement("div",{className:"lakex-table-form-modal"},u.a.createElement("div",{className:"lakex-table-form-model-content"},l&&u.a.createElement(Lnt,{form:o,onEnable:i})))},Unt=Object.defineProperty,Hnt=Object.getOwnPropertyDescriptor,qnt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Hnt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Unt(t,n,i),i},Wnt=function(){return ll((function e(){sl(this,e),this._toDestroyCollection=new kk}),[{key:"init",value:function(){var e=this;this._toDestroyCollection.push(this._renderService.onClickEvent((function(t){if("clickFormManageButton"===t.eventName){var n=t.data.target,r=t.data.status,o={origin:n,placement:"bottomRight"};if(e._viewerFormManageService.setModalPosition(o),r!==Y3e.COLLECTING)return void e._modalService.open("form-disabled-modal",{position:o});e._modalService.open("form-enabled-modal",{position:o})}})))}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:"form-enabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:Vnt}),e.registerItem({id:"form-disabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:znt})}}],[{key:"pluginModule",value:function(){return dd().contribution(jnt).register(this).register(Tnt).register(Fnt)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"form",type:"object",properties:{manage:{type:"object",properties:{disable:{type:"boolean"}}}}})}}])}();Wnt.pluginName="workbench-viewer-form-manage",qnt([Ks(_oe)],Wnt.prototype,"_renderService",2),qnt([Ks(dye)],Wnt.prototype,"_modalService",2),qnt([Ks(Tnt)],Wnt.prototype,"_viewerFormManageService",2),Wnt=qnt([Gs({contrib:[sre,jme,fye]})],Wnt);var $nt=Object.defineProperty,Gnt=Object.getOwnPropertyDescriptor,Knt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Gnt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$nt(t,n,i),i},Ynt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){var e=this;this._renderService.onClickEvent((function(t){var n;if("fieldConfigClick"===t.eventName){var r=t.data,o=r.e,i=r.viewField;e._modalService.open("addOrUpdateField",{position:{origin:o.target,placement:"bottom"},initialState:{fieldId:i.get("field_uuid"),showFieldTypes:null==(n=GC)?void 0:n.filter((function(e){var t;return!fE.isSystemType(e.type)&&e.type!==(null==(t=i.get("field"))?void 0:t.get("type"))})).map((function(e){return e.type}))}})}}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"create-form",icon:"FormView",tooltip:Lw("生成表单"),visible:function(){var e=t._readService.getActiveView();return[sE.GRID,sE.CARD,sE.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:function(){var e,n=qw(32);t._commandService.execCommand("addView",{uuid:n,type:sE.FORM}),null==(e=t._openerService)||e.open("view",n)}})}},{key:"destroy",value:function(){}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();Ynt.pluginName="workbench-viewer-form",Knt([Ks(dye)],Ynt.prototype,"_modalService",2),Knt([Ks(_oe)],Ynt.prototype,"_renderService",2),Knt([Ks(oA)],Ynt.prototype,"_readService",2),Knt([Ks(nR)],Ynt.prototype,"_commandService",2),Knt([Ks(pie)],Ynt.prototype,"_openerService",2),Ynt=Knt([Gs({contrib:[sre,jme]})],Ynt);var Jnt=Object.defineProperty,Xnt=Object.getOwnPropertyDescriptor,Znt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Xnt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Jnt(t,n,i),i},Qnt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"full-screen",icon:"Fullscreen",tooltip:Lw("全屏"),visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===sE.FORM)&&t._fullScreenService.status!==o3e.FULL_SCREEN},onClick:function(){t._fullScreenService.emitStatusChange()}})}}],[{key:"pluginModule",value:function(){return dd().register(this).register(l3e)}}])}();Qnt.pluginName="workbench-full-screen",Znt([Ks(oA)],Qnt.prototype,"_readService",2),Znt([Ks(l3e)],Qnt.prototype,"_fullScreenService",2),Qnt=Znt([Gs({contrib:[sre,jme]})],Qnt);var ert=function(){var e=yre(v3e),t=Tf(Object(a.useState)(e.cardWidthMode),2),n=t[0],r=t[1],o=n===c3e.NORMAL;return Object(a.useEffect)((function(){var t=e.onModeUIChange((function(e){r(e)}));return function(){null==t||t.destroy()}}),[e]),u.a.createElement(d.a,{title:Lw(o?"全宽":"标宽")},u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){var t=n===c3e.NORMAL?c3e.CONTAIN:c3e.NORMAL;r(t),null==e||e.setWidthMode(t)},tabIndex:-1},u.a.createElement(oue,{type:o?"FullWidth":"NormalWidth"})))},trt=Object.defineProperty,nrt=Object.getOwnPropertyDescriptor,rrt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"registerToolbar",value:function(e){e.registerItem({id:"full-width",RenderComponent:ert})}}],[{key:"pluginModule",value:function(){return dd().register(this).register(v3e)}}])}();rrt.pluginName="workbench-full-width",rrt=function(e,t,n,r){for(var o,i=r>1?void 0:r?nrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&trt(t,n,i),i}([Gs({contrib:[sre,jme]})],rrt);var ort=function(e){var t,n=e.originField,r=e.fieldType,o=e.onFieldSubmitConfirm,i=!n,a=n&&n.get("type")!==HC.TEXT,u=i?qw(32):n.get("uuid"),l=yre(dye),c=yre(lk),s=yre(p8e).getAiWritingConfig(u),d=(null==s?void 0:s.open)||!1?null==(t=S8e.find((function(e){return e.uuid===(null==s?void 0:s.type)})))?void 0:t.name:Lw("关闭"),p=!!c.getValue("aiWriting.enable");return r===HC.TEXT&&p?React.createElement(f.a,{className:"lakex-table-ai-writing-config"},React.createElement(f.a.Item,{className:"lakex-table-ai-writing-config-item",onClick:function(){var e=l.getModalProps("addOrUpdateField");null==l||l.open("ai-writing-config-modal",{initialState:{fieldId:u,isCreateNewCol:i,isChangedFieldType:a,onFieldSubmitConfirm:o},position:e.position}),null==l||l.close("addOrUpdateField")}},React.createElement(fn.default,{className:"tag",width:14,height:14}),Lw("AI 智能填写"),React.createElement("div",{className:"right"},React.createElement("span",{className:"status"},d),React.createElement(oue,{type:"ArrowRight",size:14})))):null},irt=function(e){var t=e.initialState,n=t.fieldId,r=t.isCreateNewCol,o=t.isChangedFieldType,i=t.onFieldSubmitConfirm,u=Tf(Object(a.useState)(!1),2),l=u[0],c=u[1],d=yre(dye),p=yre(nR),h=yre(p8e),g=h.getAiWritingConfig(n),y=Tf(Object(a.useState)((null==g?void 0:g.open)||!1),2),b=y[0],_=y[1],k=Tf(Object(a.useState)((null==g?void 0:g.type)||f8e.SUMMARY),2),C=k[0],E=k[1],O=Tf(Object(a.useState)((null==g?void 0:g.prompt)||""),2),S=O[0],x=O[1],D=Object(a.useMemo)((function(){return S8e.find((function(e){return e.uuid===C}))||S8e[0]}),[C]),A=Object(a.useCallback)((function(){var e=d.getModalProps("ai-writing-config-modal");null==d||d.open("addOrUpdateField",{initialState:{fieldId:n},position:e.position}),d.close("ai-writing-config-modal")}),[d]),R=Object(a.useCallback)((function(e){_(e),p.execCommand("updateAiWritingOpen",{fieldId:n,open:e})}),[p,n]),F=Object(a.useCallback)((function(e){E(e),p.execCommand("updateAiWritingType",{fieldId:n,type:e})}),[p,n,b]),P=Object(a.useCallback)((function(e){var t=e.target.value.trim();t.length>255?v.a.error(Lw("规则最长支持255字符")):x(t)}),[]),M=Object(a.useCallback)(rl(ml.mark((function e(){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C===f8e.SUMMARY||S){e.next=3;break}return v.a.error(Lw("规则不能为空")),e.abrupt("return");case 3:if(!r){e.next=8;break}return e.next=6,i(n);case 6:e.next=11;break;case 8:if(!o){e.next=11;break}return e.next=11,i();case 11:return e.next=13,p.execCommand("updateAiWritingPrompt",{fieldId:n,prompt:S});case 13:return c(!0),e.next=16,h.startAiWriting(n);case 16:null==d||d.close("ai-writing-config-modal"),v.a.success(Lw("正在填写中..."));case 18:case"end":return e.stop()}}),e)}))),[d,p,n,C,S,r,o]),T=Object(a.useCallback)((function(){null==d||d.close("ai-writing-config-modal")}),[d]);return React.createElement("div",{className:I()("lakex-table-ai-writing-config-modal",{disabled:!b})},React.createElement("div",{className:"lakex-table-ai-writing-config-modal-header"},React.createElement("div",{className:"left",onClick:A},React.createElement(U.default,{className:"lakex-table-ai-writing-config-modal-back",width:16,height:16}),Lw("智能填写"),React.createElement(cn.default,{className:"tag",width:16,height:16})),React.createElement("div",{className:"right"},React.createElement(j.a,{size:"small",checked:b,onChange:R}))),React.createElement("div",{className:"lakex-table-ai-writing-config-modal-content"},React.createElement("div",{className:"lakex-table-ai-writing-config-modal-type"},React.createElement("span",null,Lw("内容规则：")),React.createElement(w.a,{trigger:["click"],placement:"bottomRight",disabled:!b,overlay:React.createElement(f.a,{className:"lakex-table-ai-writing-config-menu",mode:"vertical",selectedKeys:["".concat(C)]},S8e.map((function(e,t){return React.createElement(f.a.Item,{key:t,onClick:function(){F(e.uuid)}},e.name,React.createElement(pn.default,{width:16,height:16,style:{display:C===e.uuid?"inline":"none"}}))})))},React.createElement("span",{className:I()("lakex-table-ai-writing-config-modal-select",{disabled:!b})},D.name,React.createElement(V.default,{width:14,height:14,style:{marginLeft:"4px"}})))),C===f8e.SUMMARY?React.createElement(s.a.TextArea,{disabled:!0,defaultValue:"",autoSize:{minRows:1},placeholder:D.placeholder}):React.createElement(s.a.TextArea,{disabled:!b,defaultValue:"",value:S,autoSize:{minRows:3},placeholder:D.placeholder,onChange:P})),React.createElement("div",{className:"lakex-table-ai-writing-config-modal-footer"},React.createElement("div",{className:"lakex-table-ai-writing-config-buttons"},React.createElement(m.a,{className:"lakex-table-ai-writing-config-cancel",disabled:!b,onClick:T},Lw("取消")),React.createElement(m.a,{className:"lakex-table-ai-writing-config-start",disabled:!b,onClick:M,type:"primary"},Lw("开始自动填写"),l&&React.createElement(sn.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})))))},art=Lw("重新填写"),urt=Ome(art)+40,lrt=function(e){var t=e.initialState,n=t.fieldId,r=t.recordId,o=Tf(Object(a.useState)(!1),2),i=o[0],u=o[1],l=yre(p8e),c=Object(a.useCallback)(rl(ml.mark((function e(){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,l.startAiWriting(n,r);case 3:u(!1),v.a.success(Lw("已重新填写"));case 5:case"end":return e.stop()}}),e)}))),[n,r]);return React.createElement("div",{style:{width:urt},className:"lakex-table-aotufill-cell-modal",onClick:c},React.createElement(fn.default,{width:16,height:16,style:{marginRight:"6px"}}),art,i&&React.createElement(sn.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16}))},crt=function(e){var t=e.fieldType,n=e.fieldName,r=yre(lk);return((null==r?void 0:r.getValue("aiWriting.enable"))||!1)&&t===HC.TEXT?React.createElement("span",null,n,React.createElement(cn.default,{className:"lakex-table-grid-header-ai-writing-icon",width:14,height:14})):React.createElement(React.Fragment,null,n)},srt=function(e){var t=e.cell,n=e.field,r=e.children,o=yre(lk),i=(null==o?void 0:o.getValue("aiWriting.enable"))||!1,u=yre(p8e),l=u.getAiWritingConfig(n.get("uuid")),c=Tf(Object(a.useState)(!1),2),s=c[0],d=c[1],f=Object(a.useCallback)(rl(ml.mark((function e(){return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,u.startAiWriting(t.fieldId,t.recordId);case 3:d(!1),v.a.success(Lw("已重新填写"));case 5:case"end":return e.stop()}}),e)}))),[]);return i&&(null==l?void 0:l.open)?React.createElement(p.a,{overlayClassName:"lakex-table-expand-record-ai-writing-popover",content:React.createElement("div",{className:"content",onClick:f},React.createElement(fn.default,{width:16,height:16,style:{marginRight:"6px"}}),Lw("重新填写"),s&&React.createElement(sn.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})),placement:"topRight",noArrow:!0,hideWhenInactive:!0},React.createElement("div",null,r)):React.createElement(React.Fragment,null,r)},drt=Object.defineProperty,frt=Object.getOwnPropertyDescriptor,prt=function(e,t,n,r){for(var o,i=r>1?void 0:r?frt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&drt(t,n,i),i},vrt=function(){return ll((function e(){sl(this,e),this._modalId="ai-writing-autofill-cell",this._toDestroyCollection=new kk}),[{key:"isGridView",get:function(){var e;return(null==(e=this._readService.getActiveView())?void 0:e.get("type"))===sE.GRID}},{key:"isReadonly",get:function(){return this._abilityService.isReadonly(mR.TABLE)}},{key:"isAiWritingEnable",get:function(){return!!this._configurationService.getValue("aiWriting.enable")}},{key:"showAutofill",value:function(){var e;if(this.isGridView){var t=this._selectionService.hasSelection(),n=this._selectionService.isSelectOneCell(),r=this._selectionService.getFieldValue(),o=null==(e=this._aiWritingService.getAiWritingConfig((null==r?void 0:r.fieldId)||""))?void 0:e.open;if(t&&n&&o){var i=this._renderContext.$root.querySelector('.lakex-viewer-grid-cell[data-field-uuid="'.concat(null==r?void 0:r.fieldId,'"][data-record-uuid="').concat(null==r?void 0:r.recordId,'"]'));i&&this._modalService.open(this._modalId,{position:{origin:i,placement:"top"},initialState:{fieldId:null==r?void 0:r.fieldId,recordId:null==r?void 0:r.recordId}})}else this._modalService.close(this._modalId)}}},{key:"init",value:function(){var e,t=this;if(!this.isReadonly&&this.isAiWritingEnable&&this._selectionService){var n=this._selectionService.onChange((function(){t.showAutofill()})),r=null==(e=this._gridCellEditService)?void 0:e.onEditingChange((function(e){e.editing?t._modalService.close(t._modalId):t.showAutofill()}));n&&this._toDestroyCollection.push(n),r&&this._toDestroyCollection.push(r)}}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"getConfigComponent",value:function(){return ort}},{key:"getColConfigNameComponent",value:function(){return crt}},{key:"registerContextMenu",value:function(e){var t,n=this;e.registerItem({key:"autofillField",name:Lw("重新填写本列内容"),icon:function(){return u.a.createElement(fn.default,{width:16,height:16})},hotkey:"",visible:function(e){var t,r=e.from,o=e.fieldId,i=null==(t=n._aiWritingService.getAiWritingConfig(o||""))?void 0:t.open;return!n.isReadonly&&r===rRe.HEADER&&n.isAiWritingEnable&&!!i},onClick:(t=rl(ml.mark((function e(t){var r,o,i;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.initialState,o=t.position,i=r.fieldId,o){e.next=4;break}return e.abrupt("return");case 4:return n._modalService.close("context-menu-modal"),e.next=7,n._aiWritingService.startAiWriting(i||"");case 7:v.a.success(Lw("正在填写中..."));case 8:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{key:"registerModal",value:function(e){e.registerItem({id:"ai-writing-config-modal",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:irt}),e.registerItem({id:this._modalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:lrt})}},{key:"registerExpandRecord",value:function(e){e.registerRecordTooltip(srt)}}],[{key:"pluginModule",value:function(){return dd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{enable:{type:"boolean",description:"是否允许使用文本 AI 助手"}}}),e.registerDefaultValue({"aiWriting.enable":!1})}}])}();vrt.pluginName="workbench-ai-writing",prt([Ks(dye)],vrt.prototype,"_modalService",2),prt([Ks(RR)],vrt.prototype,"_abilityService",2),prt([Ks(lk)],vrt.prototype,"_configurationService",2),prt([Ks(p8e)],vrt.prototype,"_aiWritingService",2),prt([Ks(oA)],vrt.prototype,"_readService",2),prt([Ks(doe)],vrt.prototype,"_renderContext",2),prt([Ks(nxe),As()],vrt.prototype,"_selectionService",2),prt([Ks(IPe),As()],vrt.prototype,"_gridCellEditService",2),vrt=prt([Gs({contrib:[sre,fye,dIe,YLe,JLe,CVe]})],vrt);var hrt=function(){return ll((function e(t,n){sl(this,e),this._ref=u.a.createRef(),this.el=t,this.options=n,this.render()}),[{key:"setContent",value:function(e){var t;(null==(t=this._ref)?void 0:t.current)&&this._ref.current.setValue(e.source)}},{key:"getDefault",value:function(){return{format:"plain",source:""}}},{key:"getContent",value:function(){var e,t;return{format:"plain",source:(null==(t=null==(e=this._ref)?void 0:e.current)?void 0:t.getValue())||""}}},{key:"onFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){};this._focusCallback=e}},{key:"render",value:function(){var e=this;c.a.render(u.a.createElement(Mre,{ref:this._ref,allowEnter:!0,autoFocus:!!this.options.autoFocus,rows:4,defaultValue:this.options.defaultValue,autoComplete:"off",placeholder:this.options.placeholder,onChange:function(){var t,n;null==(n=(t=e.options).onChange)||n.call(t)},onFocus:function(){var t;null==(t=e._focusCallback)||t.call(e,!0)},onBlur:function(){var t;null==(t=e._focusCallback)||t.call(e,!1)}}),this.el,(function(){var t,n;null==(n=(t=e.options).onLoad)||n.call(t,e)}))}},{key:"destroy",value:function(){c.a.unmountComponentAtNode(this.el)}}])}(),grt=function(){return ll((function e(t,n){sl(this,e),this.el=t,this.options=n,this.render()}),[{key:"setContent",value:function(e){this.el&&(this.el.innerText=e.source)}},{key:"render",value:function(){var e=this;c.a.render(u.a.createElement(u.a.Fragment,null,this.options.defaultValue),this.el,(function(){var t,n;null==(n=(t=e.options).onLoad)||n.call(t,e)}))}},{key:"destroy",value:function(){c.a.unmountComponentAtNode(this.el)}}])}();function mrt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yrt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yrt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function yrt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var brt=Object.defineProperty,wrt=Object.getOwnPropertyDescriptor,_rt=function(e,t,n,r){for(var o,i=r>1?void 0:r?wrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&brt(t,n,i),i},krt=function(){return ll((function e(){sl(this,e),this._editor=new Map,this._viewer=new Map}),[{key:"init",value:function(){var e,t=mrt(this.contentEditorProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value.registerContentEditor();this._editor.has(n.format)||this._editor.set(n.format,n.Editor)}}catch(e){t.e(e)}finally{t.f()}var r,o=mrt(this.contentViewerProvider.getContributions());try{for(o.s();!(r=o.n()).done;){var i=r.value.registerContentViewer();this._viewer.has(i.format)||this._viewer.set(i.format,i.Viewer)}}catch(e){o.e(e)}finally{o.f()}}},{key:"getEditor",value:function(e){return this._editor.get(e)}},{key:"getViewer",value:function(e){return this._viewer.get(e)}}])}();_rt([yd(X5e)],krt.prototype,"contentEditorProvider",2),_rt([yd(Z5e)],krt.prototype,"contentViewerProvider",2),krt=_rt([Gs()],krt);var Crt=Object.defineProperty,Ert=Object.getOwnPropertyDescriptor,Ort=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ert(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Crt(t,n,i),i},Srt=function(){return ll((function e(){sl(this,e)}),[{key:"create",value:function(e,t){var n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getEditor(n);return t.currentUser=this._contextService.currentUser,new r(e,t)}}])}();Ort([Ks(hx)],Srt.prototype,"_contextService",2),Ort([Ks(krt)],Srt.prototype,"_contentRegistry",2),Ort([Ks(lk)],Srt.prototype,"_configuration",2),Srt=Ort([Gs({token:n3e})],Srt);var xrt=Object.defineProperty,jrt=Object.getOwnPropertyDescriptor,Drt=function(e,t,n,r){for(var o,i=r>1?void 0:r?jrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xrt(t,n,i),i},Art=function(){return ll((function e(){sl(this,e)}),[{key:"create",value:function(e,t){var n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getViewer(n);if(r)return new r(e,t)}}])}();Drt([Ks(krt)],Art.prototype,"_contentRegistry",2),Drt([Ks(lk)],Art.prototype,"_configuration",2),Art=Drt([Gs({token:r3e})],Art);var Rrt=Object.defineProperty,Frt=Object.getOwnPropertyDescriptor,Irt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Frt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rrt(t,n,i),i},Prt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){this._contentRegistry.init()}},{key:"registerContentEditor",value:function(){return{format:"plain",Editor:hrt}}},{key:"registerContentViewer",value:function(){return{format:"plain",Viewer:grt}}}],[{key:"pluginModule",value:function(){return dd().contribution(X5e).contribution(Z5e).register(Srt).register(Art).register(krt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"content",type:"object",properties:{defaultFormat:{type:"string"},disableDatasource:{type:"boolean",description:"禁用 datasource"}}}),e.registerDefaultValue({"content.defaultFormat":"plain","content.disableDatasource":!1})}}])}();Prt.pluginName="workbench-content",Irt([Ks(krt)],Prt.prototype,"_contentRegistry",2),Prt=Irt([Gs({contrib:[sre,X5e,Z5e]})],Prt);var Mrt=function(e){var t=e.recordId,n=e.isReadonly,r=e.isNewRecord,o=Tf(Object(a.useState)(!1),2),i=o[0],l=o[1],c=Object(a.useRef)(null),s=Object(a.useRef)(!1),d=Object(a.useRef)(!1),f=Object(a.useRef)(),p=Object(a.useRef)(),v=yre(lk),h=yre(n3e,{optional:!0}),g=yre(r3e,{optional:!0}),m=yre(t3e),y=yre(nR),b=yre(oA),w=yre(e3e),_=Gae((function(){var e,n=null==(e=f.current)?void 0:e.getContent();d.current=!1,n&&(null==y||y.execCommand("updateContent",{recordId:t,content:n}))}),1e3),k=Object(a.useCallback)((function(e){var t;null==(t=f.current)||t.setContent(e),setTimeout((function(){s.current=!0}),100)}),[]),C=Object(a.useCallback)((function(e){s.current&&l(!!e)}),[]);Object(a.useEffect)((function(){var e,n,o=b.getTable();(null==v?void 0:v.getValue("content.disableDatasource"))||r||((null==(e=m.getContent(t,"record"))?void 0:e.toJSON())||null==(n=null==w?void 0:w.handleGet)||n.call(w,t,o.get("uuid")).then((function(e){if(e){var n=e;m.setContentWithSlient(t,"record",n),p.current?p.current.setContent(n):k(e)}})))}),[t]),Object(a.useEffect)((function(){var e;if(c.current){if(n){var o=null==g?void 0:g.create(c.current,{defaultValue:(null==(e=m.getContent(t,"record"))?void 0:e.get("source"))||""});if(!o)return;return void(p.current=o)}f.current=null==h?void 0:h.create(c.current,{onLoad:function(){var e,n,o;null==(e=f.current)||e.onFocus((function(e){C(e)}));try{var i=null==(n=m.getContent(t,"record"))?void 0:n.toJSON();if(!i&&r&&(i=null==(o=f.current)?void 0:o.getDefault()),!i)return;k(i)}catch(e){console.error("set text editor content error",e)}},onChange:function(){_(),d.current=!0}})}return function(){var e;if(f.current&&d.current){var n=null==(e=f.current)?void 0:e.getContent();n&&(null==y||y.execCommand("updateContent",{recordId:t,content:n})),f.current.destroy()}}}),[]);var E=i?"lakex-table-record-desc-active":"lakex-table-record-desc-noactive";return u.a.createElement("div",{className:"lakex-table-record-desc ".concat(E)},u.a.createElement("div",{ref:c}))},Trt=Object.defineProperty,Nrt=Object.getOwnPropertyDescriptor,Brt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerExpandRecord",value:function(e){e.registerRecordProvider({RenderComponent:Mrt})}}],[{key:"pluginModule",value:function(){return dd().register(this)}}])}();function Vrt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lrt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vrt(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vrt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zrt(e){return React.createElement("div",Lrt(Lrt({},e),{},{className:"lakex-table-loading-content"}),React.createElement("div",{className:"lakex-table-loading-content-box"},React.createElement(h.a,null),React.createElement("p",null,Lw("数据处理比较耗时，请耐心等待..."))))}function Urt(e,t,n){return t=Sd(t),Od(e,Hrt()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Hrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hrt=function(){return!!e})()}Brt.pluginName="workbench-record-desc",Brt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Trt(t,n,i),i}([Gs({contrib:[sre,CVe]})],Brt);var qrt=Object.defineProperty,Wrt=Object.getOwnPropertyDescriptor,$rt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Wrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qrt(t,n,i),i},Grt=function(e){function t(){return sl(this,t),Urt(this,t,arguments)}return jd(t,e),ll(t,[{key:"isExist",value:function(){return!!this._id}},{key:"createModal",value:function(){this._id||(this._id=qw(6),this._container=document.createElement("div"),this._container.id="lakex-table-loading-container",document.body.appendChild(this._container),c.a.render(u.a.createElement(zrt,{id:this._id}),this._container))}},{key:"closeModal",value:function(){var e,t,n;null==(n=null==(t=null==(e=this._container)?void 0:e.parentNode)?void 0:t.removeChild)||n.call(t,this._container),this._id=null}},{key:"destroy",value:function(){this.closeModal()}}])}(bk);$rt([Ts()],Grt.prototype,"destroy",1),Grt=$rt([Gs()],Grt);var Krt=Object.defineProperty,Yrt=Object.getOwnPropertyDescriptor,Jrt=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yrt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Krt(t,n,i),i},Xrt=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){var e=this;this._syncQueue.onSyncChange((function(t){t.status===d8e.RUNNING?(clearTimeout(e._timerId),e._timerId=setTimeout((function(){e._loadingModalService.createModal()}),5e3)):(clearTimeout(e._timerId),e._loadingModalService.isExist()&&(e._loadingModalService.closeModal(),t.status===d8e.SUCCESS&&v.a.success(Lw("已完成"))))}))}},{key:"destroy",value:function(){clearTimeout(this._timerId)}}],[{key:"pluginModule",value:function(){return dd().register(this).register(Grt)}}])}();Xrt.pluginName="workbench-server",Jrt([Ks(s8e)],Xrt.prototype,"_syncQueue",2),Jrt([Ks(Grt)],Xrt.prototype,"_loadingModalService",2);var Zrt=[Qnt,rrt,Wnt,Ynt,vrt,Prt,Brt,Xrt=Jrt([Gs({contrib:[sre]})],Xrt)],Qrt=function(e){var t=e.webProxy;return{token:jnt,useValue:{registerFormManage:function(){return{enableForm:function(e,n){return rl(ml.mark((function r(){var o,i;return ml.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i={scope:0,status:0,target_id:e,target_type:"Skythings.View",type:"form"},"create"!==n){r.next=7;break}return r.next=4,t.shares.create(i);case 4:o=r.sent,r.next=10;break;case 7:return r.next=9,t.shares.update(i);case 9:o=r.sent;case 10:return r.abrupt("return",{src:"/forms/share/".concat(o.token)});case 11:case"end":return r.stop()}}),r)})))()}}}}}},eot=function(e){var t=e.webProxy;return[Qrt({webProxy:t})]},tot=function(e){e.docId,e.docType;var t=e.webProxy,n=e.webSdk,r=e.settings;return{settings:Object.assign({},w3e({webSdk:n}),r),webSdk:n,webProxy:t}},not=[];const rot=u7e.filter((function(e){return!not.includes(e.pluginName)}));var oot=[];const iot=Rtt.filter((function(e){return!oot.includes(e.pluginName)}));var aot=["workbench-full-width","workbench-full-screen","workbench-field-group"];const uot=Zrt.filter((function(e){return!aot.includes(e.pluginName)})),lot=[],cot=[],sot=[];function dot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dot(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pot=function(e){var t,n,r=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),o=null==(t=e.data)?void 0:t.records,i=BHe(fot(fot(fot({},e),r),{},{workbenchPlugins:uot,renderPlugins:iot,kernelPlugins:rot,workbenchContribs:[].concat(tl(lot),tl(eot({webProxy:e.webProxy})),tl(e.workbenchContribs||[])),renderContribs:[].concat(tl(cot),tl(xnt(r.settings)),tl(e.renderContribs||[])),kernelContribs:[].concat(tl(sot),tl(ret({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),tl(e.kernelContribs||[])),onRendered:function(){e.onSyncChange&&i.getService(s8e).onSyncChange(e.onSyncChange)},onCollabUsersChange:e.onCollabUsersChange,onDataLoaded:(n=rl(ml.mark((function t(n){var a,u,l,c,s,d,f,p;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:r.settings["record.maxCount"],offset:0,sheetId:i.tableId});case 6:(null==(s=t.sent)?void 0:s.users)&&i.setUsers(s.users),(null==s?void 0:s.records)&&(i.setRecords(s.records),d=i.getService(e3e),f=i.getService(t3e),p=s.records.map((function(e){return e.uuid})),d&&(null==(a=null==d?void 0:d.handleGet)||a.call(d,p,i.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=Tf(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(u=e.onError)||u.call(e,t.t0),null==(l=e.onRecordLoaded)||l.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return n.apply(this,arguments)})}));return i},vot=["kernel-history","kernel-collaboration","kernel-add-record","kernel-add-field"];const hot=u7e.filter((function(e){return!vot.includes(e.pluginName)}));var got=["render-history","render-refresh","render-upload"];const mot=Rtt.filter((function(e){return!got.includes(e.pluginName)}));var yot=["workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"];const bot=Zrt.filter((function(e){return!yot.includes(e.pluginName)}));var wot={"view.maxCount":1e3,"ability.table.create":!1,"ability.table.delete":!1,"ability.table.read":!0,"ability.table.update":!1};function _ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_ot(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cot=function(e){var t,n,r=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),o=kot(kot({},wot),r.settings),i=null==(t=e.data)?void 0:t.records,a=function(e){var t,n,r=SHe({webSdk:e.webSdk,settings:e.settings||{}});try{n=Fbe.create($He($He($He({},e),r),{},{workbenchPlugins:[].concat(gw(qHe),gw(e.workbenchPlugins||[])),renderPlugins:[].concat(gw(UHe),gw(e.renderPlugins||[])),kernelPlugins:[].concat(gw(LHe),gw(e.kernelPlugins||[])),workbenchContribs:gw(e.workbenchContribs||[]),renderContribs:gw(e.renderContribs||[]),kernelContribs:gw(e.kernelContribs||[])}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n}(kot(kot(kot({},e),r),{},{settings:o,kernelPlugins:hot,renderPlugins:mot,workbenchPlugins:bot,renderContribs:tl(xnt(r.settings)),kernelContribs:tl(ret({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:e.currentUser})),onDataLoaded:(n=rl(ml.mark((function t(n){var o,u,l,c,s,d,f,p;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:r.settings["record.maxCount"],offset:0,sheetId:a.tableId});case 6:(null==(s=t.sent)?void 0:s.users)&&a.setUsers(s.users),(null==s?void 0:s.records)&&(a.setRecords(s.records),d=a.getService(e3e),f=a.getService(t3e),p=s.records.map((function(e){return e.uuid})),d&&(null==(o=null==d?void 0:d.handleGet)||o.call(d,p,a.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=Tf(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(u=e.onError)||u.call(e,t.t0),null==(l=e.onRecordLoaded)||l.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return n.apply(this,arguments)})}));return a},Eot=["kernel-statistics","kernel-selection","kernel-context-menu","kernel-history","kernel-collaboration","kernel-clipboard","kernel-add-record","kernel-add-field","kernel-viewer-form"];const Oot=u7e.filter((function(e){return!Eot.includes(e.pluginName)}));var Sot=["render-hotkey","render-selection","render-statistics","render-context-menu","render-history","render-group","render-clipboard","render-refresh","render-upload"];const xot=Rtt.filter((function(e){return!Sot.includes(e.pluginName)}));var jot=["workbench-hotkey","workbench-context-menu","workbench-statistics","workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"];const Dot=Zrt.filter((function(e){return!jot.includes(e.pluginName)})),Aot=[],Rot=[],Fot=[];function Iot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iot(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mot=function(e){var t,n=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:Pot(Pot({},e.settings),{},{"ability.table.update":!1,"ability.table.delete":!1,"ability.record.create":!1,"ability.record.update":!1,"ability.field.create":!1,"toolbar.mode":Rme.LITE,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"],"viewerManage.type":"menu","modal.mode":sye.DRAWER,"render.mode":roe.MOBILE,"viewerGrid.stickyColNum":0,"expandRecord.modalDrawerModeViews":[]})}),r=BHe(Pot(Pot(Pot({},e),n),{},{workbenchPlugins:Dot,renderPlugins:xot,kernelPlugins:Oot,workbenchContribs:[].concat(tl(Aot),tl(eot({webProxy:e.webProxy})),tl(e.workbenchContribs||[])),renderContribs:[].concat(tl(Rot),tl(xnt(n.settings)),tl(e.renderContribs||[])),kernelContribs:[].concat(tl(Fot),tl(ret({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),tl(e.kernelContribs||[])),onDataLoaded:(t=rl(ml.mark((function t(o){var i,a,u,l,c,s,d,f;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("loadedData"!==o){t.next=15;break}return t.prev=1,t.next=4,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:n.settings["record.maxCount"],offset:0,sheetId:r.tableId});case 4:(null==(c=t.sent)?void 0:c.users)&&r.setUsers(c.users),(null==c?void 0:c.records)&&(r.setRecords(c.records),s=r.getService(e3e),d=r.getService(t3e),f=c.records.map((function(e){return e.uuid})),s&&(null==(i=null==s?void 0:s.handleGet)||i.call(s,f,r.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=Tf(e,2),n=t[0],r=t[1];r&&d.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),null==(a=e.onError)||a.call(e,t.t0),null==(u=e.onRecordLoaded)||u.call(e);case 13:t.next=16;break;case 15:"loadedRecords"===o&&(null==(l=e.onRecordLoaded)||l.call(e));case 16:case"end":return t.stop()}}),t,null,[[1,9]])}))),function(e){return t.apply(this,arguments)})}));return r},Tot=[].concat(tl(Hwe.filter((function(e){return["kernel-field-text","kernel-field-select","kernel-field-multi-select","kernel-field-number","kernel-field-mention","kernel-field-date","kernel-field-checkbox","kernel-field-image","kernel-field-file","kernel-field-link","kernel-field-email","kernel-field-phone","kernel-field-title","kernel-field-rate","kernel-field-progress","kernel-process","kernel-user"].includes(e.pluginName)}))),[l6e]),Not=Is.defineToken("ViewerFormShareContribution"),Bot=function(e){var t,n,r=e.viewField,o=e.rules,i=e.FieldComponent,a=e.validateTrigger,l=void 0===a?["onBlur","onChange"]:a,c=null==(t=r.get("field"))?void 0:t.get("type"),s="lakex-form-form-viewer-".concat(c);return u.a.createElement("div",{className:"".concat(s," ").concat(NC.isMobile?s+"-h5":"")},u.a.createElement(E.a.Item,{name:null==(n=r.get("field"))?void 0:n.get("uuid"),rules:o,validateTrigger:l,noStyle:!0},u.a.createElement(i,{viewField:r})))},Vot=Object.defineProperty,Lot=Object.getOwnPropertyDescriptor,zot=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lot(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vot(t,n,i),i},Uot=function(){return ll((function e(){sl(this,e)}),[{key:"getProvider",value:function(){var e=this.formManageProvider.getContributions();return e[e.length-1].registerFormShare()}},{key:"submitForm",value:function(e){return this.getProvider().submitForm(e)}}])}();zot([yd(Not)],Uot.prototype,"formManageProvider",2),Uot=zot([Gs()],Uot);var Hot=Object.defineProperty,qot=Object.getOwnPropertyDescriptor,Wot=function(e,t,n,r){for(var o,i=r>1?void 0:r?qot(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Hot(t,n,i),i};var $ot=function(){return ll((function e(){var t=this;sl(this,e),this.getFormComponent=function(e){return t._fieldService.getFieldFormComponent(e)},this.getFormFieldRules=function(e){var n,r,o=null==(r=(n=t._fieldService).getFieldRules)?void 0:r.call(n,e),i=[];return o&&Array.isArray(o)&&o.forEach((function(e){var t;i.push({validator:(t=e.validator,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Promise((function(e,r){var o=t.apply(this,n);o?e(o):r(o)}))}),message:e.errorMsg})})),i}}),[{key:"submit",value:(e=rl(ml.mark((function e(t){var n,r=this;return ml.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reduce((function(e,t){return e[t.fieldId]=r._toProcess.toValue(t),e}),{}),e.next=3,this._viewerFormShareRegistry.getProvider().submitForm(n);case 3:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e}();Wot([Ks(KF)],$ot.prototype,"_toProcess",2),Wot([Ks(Ooe)],$ot.prototype,"_fieldService",2),Wot([Ks(Uot)],$ot.prototype,"_viewerFormShareRegistry",2),$ot=Wot([Gs()],$ot);var Got=u.a.forwardRef((function(e,t){var n,r,o,i,l,c,s,d,f,p,v,h=(n=Wwe(),r=yre(o6e),o=yre($ot),i=null==r?void 0:r.getFormEditData(n.get("uuid")),l=Tf(E.a.useForm(),1)[0],c=Tf(Object(a.useState)(!1),2),s=c[0],d=c[1],f=Tf(Object(a.useState)(!1),2),p=f[0],v=f[1],Object(a.useEffect)((function(){function e(e){var t=l.getFieldsValue(),n=Object.values(t).some((function(e){return void 0!==e}));n&&!p&&(e.preventDefault(),e.returnValue="")}return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[p]),Object(a.useEffect)((function(){globalThis._form=l}),[]),{state:{loading:s,formState:l},viewFields:(null==i?void 0:i.viewFields)||[],view:null==i?void 0:i.view,handleSubmit:function(e){if(s)return!1;d(!0),v(!0);for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push({fieldId:i,value:e[i]})}null==o||o.submit(t).then((function(){d(!1)})).catch((function(e){d(!1)}))},getFormComponent:function(e){return null==o?void 0:o.getFormComponent(e)},getFormFieldRules:function(e){return null==o?void 0:o.getFormFieldRules(e)}}),g=h.state,y=h.view,b=h.viewFields,w=h.handleSubmit,_=h.getFormComponent,k=h.getFormFieldRules,C="lakex-viewer-form";return u.a.createElement("div",{ref:t,className:"".concat(C," ").concat(NC.isMobile?C+"-h5":"")},u.a.createElement("h1",{className:"".concat(C,"-title")},null==y?void 0:y.get("name")),u.a.createElement("div",null,u.a.createElement("div",{className:"".concat(C,"-desc")},null==y?void 0:y.get("desc")),u.a.createElement("div",{className:"".concat(C,"-rule")},u.a.createElement("span",{className:"".concat(C,"-required")},"*"),Lw("为必填项"))),u.a.createElement(E.a,{form:g.formState,layout:"vertical",className:"".concat(C,"-list"),onFinish:w,scrollToFirstError:!0},nk(b,(function(e,t){var n,r=null==(n=e.get("field"))?void 0:n.get("type");if(!r)return null;var o=_(r);if(!o)return null;var i=e.get("required"),a="".concat(t+1,".").concat(e.get("name")),l=k(r)||[];if(i&&l.push({required:i,message:Lw("请输入必填项")}),fE.isSelectLike(r)){var c=fE.isSelect(r)?Lw("单选"):Lw("多选");a=u.a.createElement("span",null,a,u.a.createElement("span",{className:"".concat(C,"-lable")},"(",c,")"))}return u.a.createElement(E.a.Item,{key:e.get("uuid"),label:a,required:i},u.a.createElement(Bot,{viewField:e,rules:l,FieldComponent:o}))})),u.a.createElement(E.a.Item,null,u.a.createElement(m.a,{type:"primary",htmlType:"submit",size:"large",disabled:g.loading},Lw("提交")))))}));function Kot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yot(e,t,n){return t=Sd(t),Od(e,Jot()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function Jot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jot=function(){return!!e})()}var Xot=function(e){function t(){var e;return sl(this,t),(e=Yot(this,t,arguments)).viewType=sE.FORM,e.title=Lw("表单视图"),e.desc="",e.icon=function(e){return React.createElement(oue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kot(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FormView"},e))},e.colorCls="yuque-color-orange-5",e.Component=Got,e}return jd(t,e),ll(t)}(jae),Zot=Object.defineProperty,Qot=Object.getOwnPropertyDescriptor,eit=function(){return ll((function e(){sl(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new Xot({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return dd().contribution(Not).register($ot).register(Uot).register(this)}}])}();eit.pluginName="render-viewer-form-share",eit=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qot(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zot(t,n,i),i}([Gs({contrib:[toe,aoe]})],eit);var tit=[].concat(tl(VNe.filter((function(e){return["render-field-text","render-field-select","render-field-multi-select","render-field-number","render-field-mention","render-field-date","render-field-checkbox","render-field-image","render-field-file","render-field-link","render-field-email","render-field-phone","render-field-title","render-field-rate","render-field-progress","render-opener"].includes(e.pluginName)}))),[eit,Yet]),nit=[Wnt];function rit(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oit(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rit(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rit(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iit=function(e){var t,n,r,o,i=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:oit(oit(oit({},{"render.noRecord":!0,"upload.image.url":"/api/tables/upload?type=image&token=".concat(null==(t=h3e("share"))?void 0:t.token),"upload.image.quickUrl":"","upload.file.url":"/api/tables/upload?type=attachment&token=".concat(null==(n=h3e("share"))?void 0:n.token),"upload.file.quickUrl":""}),e.settings),{},{"ability.table.update":!1,"ability.table.delete":!1})}),a=Fbe.create(oit(oit(oit({},e),i),{},{renderPlugins:tit,kernelPlugins:Tot,workbenchPlugins:nit,renderContribs:[].concat(tl(xnt(i.settings)),[(r={webProxy:e.webProxy},o=r.webProxy,{token:Not,useValue:{registerFormShare:function(){return{submitForm:function(e){return rl(ml.mark((function t(){var n;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.tables.submitRecord({token:null==(n=h3e("share"))?void 0:n.token,type:"FORM",data:[{data:JSON.stringify(e)}]},{ignoreGlobalMessage:!0});case 3:v.a.success(Lw("表单提交成功"),.8),v.a.destroy(),window.location.href+="/success",t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),v.a.error(Lw("表单提交失败，请稍后重试"));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}}})]),kernelContribs:tl(ret({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:b3e.me}))}));return a},ait=[];const uit=u7e.filter((function(e){return!ait.includes(e.pluginName)}));var lit=[];const cit=Rtt.filter((function(e){return!lit.includes(e.pluginName)}));var sit=["workbench-field-group"];const dit=Zrt.filter((function(e){return!sit.includes(e.pluginName)})),fit=[],pit=[],vit=[];function hit(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function git(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hit(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hit(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mit=function(e){var t,n,r=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:git({"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search","|","add-record"],"toolbar.mode":Rme.LITE,"modal.mode":sye.MODAL,"viewerManage.type":"menu","viewerManage.viewTypes":[sE.GRID,sE.CARD,sE.CALENDAR,sE.KANBAN],"expandRecord.modalDrawerModeViews":[],"render.autoActive":!1,"render.deferMode":ooe.DISABLE},e.settings)}),o=null==(t=e.data)?void 0:t.records,i=BHe(git(git(git({},e),r),{},{renderPlugins:cit,kernelPlugins:uit,workbenchPlugins:dit,workbenchContribs:[].concat(tl(fit),tl(eot({webProxy:e.webProxy})),tl(e.workbenchContribs||[])),renderContribs:[].concat(tl(pit),tl(xnt(r.settings)),tl(e.renderContribs||[])),kernelContribs:[].concat(tl(vit),tl(ret({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),tl(e.kernelContribs||[])),onDataLoaded:(n=rl(ml.mark((function t(n){var a,u,l,c,s,d,f,p;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:r.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id});case 6:(null==(s=t.sent)?void 0:s.users)&&i.setUsers(s.users),(null==s?void 0:s.records)&&(i.setRecords(s.records),d=i.getService(e3e),f=i.getService(t3e),p=s.records.map((function(e){return e.uuid})),d&&(null==(a=null==d?void 0:d.handleGet)||a.call(d,p,i.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=Tf(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(u=e.onError)||u.call(e,t.t0),null==(l=e.onRecordLoaded)||l.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return n.apply(this,arguments)})}));return i},yit=[];const bit=u7e.filter((function(e){return!yit.includes(e.pluginName)}));var wit=[];const _it=Rtt.filter((function(e){return!wit.includes(e.pluginName)}));var kit=["workbench-field-group"];const Cit=Zrt.filter((function(e){return!kit.includes(e.pluginName)})),Eit=[],Oit=[],Sit=[];function xit(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jit(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xit(Object(n),!0).forEach((function(t){il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xit(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dit=function(e){var t,n,r=tot({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:jit(jit({},e.settings),{},{"ability.table.create":!1,"ability.table.delete":!1,"ability.table.read":!0,"ability.table.update":!1,"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"],"toolbar.mode":Rme.LITE,"modal.mode":sye.DRAWER,"render.mode":roe.MOBILE,"viewerManage.type":"menu","viewerManage.viewTypes":[sE.GRID,sE.CARD,sE.CALENDAR,sE.KANBAN],"expandRecord.modalDrawerModeViews":[],"render.autoActive":!1,"render.deferMode":ooe.DISABLE,"viewerGrid.stickyColNum":0})}),o=null==(t=e.data)?void 0:t.records,i=BHe(jit(jit(jit({},e),r),{},{renderPlugins:_it,kernelPlugins:bit,workbenchPlugins:Cit,workbenchContribs:[].concat(tl(Eit),tl(eot({webProxy:e.webProxy})),tl(e.workbenchContribs||[])),renderContribs:[].concat(tl(Oit),tl(xnt(r.settings)),tl(e.renderContribs||[])),kernelContribs:[].concat(tl(Sit),tl(ret({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),tl(e.kernelContribs||[])),onDataLoaded:(n=rl(ml.mark((function t(n){var a,u,l,c,s,d,f,p;return ml.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:r.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id});case 6:(null==(s=t.sent)?void 0:s.users)&&i.setUsers(s.users),(null==s?void 0:s.records)&&(i.setRecords(s.records),d=i.getService(e3e),f=i.getService(t3e),p=s.records.map((function(e){return e.uuid})),d&&(null==(a=null==d?void 0:d.handleGet)||a.call(d,p,i.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=Tf(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(u=e.onError)||u.call(e,t.t0),null==(l=e.onRecordLoaded)||l.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return n.apply(this,arguments)})}));return i},Ait=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19[12356789])\d{8}(\+\d+)?$/,Rit=/^\+[1-9]\d{0,2}? \d{1,20}$/,Fit=/^\+86 /,Iit=function(e){return!!e&&(!Fit.test(e)&&(!!Rit.test(e)||!!Ait.test(e)))}}.call(this,n(91),n(3787)(e))}}]);