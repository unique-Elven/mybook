/*! For license information please see c__LoginModal.67682ead.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1368,878,917],{1705:function(t,e,n){"use strict";n.r(e);var r=n(0);e.default=t=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{className:["larkui-icon","larkui-icon-icon-left",t.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"397153557a",d:"M0 0h16v16H0z"})),r.createElement("g",{transform:"rotate(90 8 8)",fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"397153557b",fill:"#fff"},r.createElement("use",{xlinkHref:"#397153557a"})),r.createElement("path",{d:"M4 1.603a.5.5 0 0 1 .492.41l.008.09v7.499H12a.5.5 0 0 1 .492.41l.008.09a.5.5 0 0 1-.41.493l-.09.008H4a.5.5 0 0 1-.492-.41l-.008-.09v-8a.5.5 0 0 1 .5-.5Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#397153557b)",transform:"rotate(-45 8 6.103)"})))},1706:function(t,e,n){"use strict";n.r(e);var r=n(0);e.default=t=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{className:["larkui-icon","larkui-icon-icon-email",t.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"2352455842a",d:"M6 6h16v16H6z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0Z",fill:"#95A5B4"}),r.createElement("mask",{id:"2352455842b",fill:"#fff"},r.createElement("use",{xlinkHref:"#2352455842a"})),r.createElement("rect",{fill:"#FFF",mask:"url(#2352455842b)",x:7,y:8.5,width:14,height:11,rx:2}),r.createElement("path",{d:"m7.61 9.062 4.98 4.968a2 2 0 0 0 2.823.002l4.996-4.97",stroke:"#95A5B4",strokeWidth:1.25,mask:"url(#2352455842b)"})))},2716:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function i(t,e,n){return e=l(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}t.exports=function(t){for(var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,r&&o(n.prototype,r),a&&o(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(t),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(t){!function(t,e){Object.getOwnPropertyNames(e).forEach((function(n){if("constructor"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}}))}(e.prototype,t.prototype)})),e}},3635:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__=e},(e=[{key:"_stringify",value:function(t){return null==t||"number"==typeof t&&isNaN(t)?t="":"string"!=typeof t&&(t=String(t)),t}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();e.BaseValidatorClass=i},3665:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}var i=n(1067),c=n(345),l=n(2716),u=n(3635).BaseValidatorClass,s=n(3697).MobileValidatorClass,f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"httpURL",value:function(t){t=this._stringify(t);try{var e=new URL(t);if("https:"!==e.protocol&&"http:"!==e.protocol)throw new Error("protocol error")}catch(t){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(t){if(!(t=this._stringify(t))||!i.isAlphanumeric(t))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("必须都是数字字符")}},{key:"decimal",value:function(t){if(!(t=this._stringify(t))||!i.isDecimal(t))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(t,e){if("string"!=typeof t)return this.__("必须是字符串");if(!i.isNumeric(t))return this.__("必须都是数字字符");var n=e&&e.min||4;return t.length<n?this.__("至少 {s} 个数字",{s:n}):void 0}},{key:"IP",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("public 参数只允许是 0、1 或者 2");t=parseInt(t)}var e=c.book.PUBLIC;if(t!==e.public&&t!==e.private&&t!==e.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(t){if(t){var e=["Book","Design"];return e.includes(t)?void 0:this.__("type 参数只允许为 {s}",{s:e.join(", ")})}}},{key:"searchPage250",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("只允许是正整数并且要小于等于 250");t=parseInt(t)}if(t<1||t>250||isNaN(t))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(t){return t=this._stringify(t),i.isEmail(t)}},{key:"isUser",value:function(t){return t=this._stringify(t),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(t)}},{key:"isoDate",value:function(t){if(!t||!f.test(t))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(t){t=this._stringify(t);var e=this.__("请输入正确的 URL 地址");if(!t)return e;if(!/^\//.test(t)){if(/^\s*javascript:\/\//i.test(t))return e;try{new URL(t)}catch(t){return e}}}},{key:"stringArr",value:function(t,e){if(t&&e.values&&(t=t.split(",").map((function(t){return t.trim()})),t.some((function(t){return!e.values.includes(t)}))))return this.__("必须是 {type} 其中的值",{type:e.values.join("、")})}}],e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),d=l.apply(void 0,[u].concat([s,p]));e.Validator=d,"undefined"!=typeof window&&"function"==typeof window.__&&(e.validator=new d(window.__))},3697:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}var i=n(2716),c=n(3635).BaseValidatorClass,l=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,u=/^\+[1-9]\d{0,2}? \d{1,20}$/,s=/^\+86 /,f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"chinaMobilePhone",value:function(t){if(!(t=this._stringify(t))||!l.test(t))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(t){return(t=this._stringify(t))&&u.test(t)?s.test(t)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)}},{key:"mobilePhoneForNonChinese",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)?this.__("必须是合法的手机号码"):void 0}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();e.MobileValidatorClass=f,e.chinaMobilePhoneRE=l,e.globalMobilePhoneRE=u,e.MobileValidator=i.apply(void 0,[c].concat([f]))},3783:function(t,e,n){"use strict";var r=n(0),o=n.n(r);e.a=function(){return o.a.createElement("div",null)}},379:function(t,e,n){"use strict";n(2717);var r=n(996);n(693);e.a=r.a},4094:function(t,e,n){"use strict";e.a=function(){return window.appData.isDesktopApp?window._electron_bridge?window._electron_bridge:window.require&&window.require("electron")?window.require("electron"):{}:{}}},4236:function(t,e,n){"use strict";n(689);var r=n(225),o=(n(62),n(31)),a=n(0),i=n.n(a),c={protocol:"index-module_protocol_Nv6Yh",protocolText:"index-module_protocolText_3Q9G6",protocolModalH5:"index-module_protocolModalH5_Dj5t4",title:"index-module_title_koRL7"};function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s={},f=null;window._protocolAgreed=!1,s.Protocol=function(t){var e=t.isEnterprise,n=t.descText;return i.a.createElement("p",{className:c.protocol,"data-testid":"protocol"},e?__("{descText}即表明同意{yuqueProtocol}",{yuqueProtocol:i.a.createElement("a",{href:"#"},"《",__("语雀隐私条款"),"》"),descText:n}):__("{descText}即表明同意{yuqueProtocol}",{yuqueProtocol:i.a.createElement("a",{"data-aspm-click":"d037",href:"".concat(window.appData.defaultSpaceHost,"/terms"),target:"_blank"},"《",__("语雀服务协议"),"》"),descText:n}))},s.ManualProtocol=i.a.forwardRef((function(t,e){var n=l(Object(a.useState)(!1),2),u=n[0],s=n[1],p=i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:"".concat(window.appData.defaultSpaceHost,"/terms"),target:"_blank"},__(" 服务协议 ")),__("和"),i.a.createElement("a",{href:"https://app.nlark.com/mobile-app/pages/privacy-policy.html",target:"_blank"},__(" 隐私权政策 "))),d=function(t){s(t),window._protocolAgreed=t};return i.a.useImperativeHandle(e,(function(){return{checkProtocolAgreed:function(t){return!(!u&&!window._protocolAgreed)||(f=o.a.confirm({className:window.h5&&c.protocolModalH5,title:window.h5?i.a.createElement("div",{className:c.title},__("提示")):__("服务协议及隐私保护"),icon:null,content:window.h5?i.a.createElement(i.a.Fragment,null,__("请先阅读并同意语雀"),p):i.a.createElement(i.a.Fragment,null,__("为更好地保护你的合法权益，请阅读并同意语雀"),p),okText:__("同意"),onOk:function(e){var n;return d(!0),t.onConfirm&&t.onConfirm(),null===(n=f)||void 0===n||n.destroy(),f=null,!0},onCancel:function(){var t;null===(t=f)||void 0===t||t.destroy(),f=null},cancelText:window.h5?__("取消"):__("不同意")}),!1)}}})),i.a.createElement(r.a,{className:c[t.className],style:t.style,"data-testid":"protocolCheckBox",checked:u,onChange:function(t){return d(t.target.checked)}},__("我已阅读并同意语雀"),p)}));e.a=s},4413:function(t,e,n){"use strict";n(170);var r=n(70),o=n(0),a=n.n(o),i=n(4),c=n.n(i),l=n(6),u=n.n(l),s=n(147),f=n.n(s),p=n(450),d=function(t){var e=window.appData.login.enablePlatforms,n=window.appData.login.loginType,o=window.appData,i=o.organization,c=o.isDesktopApp,l=o.isDingTalkApp,s=!!f.a.mobile,d=/micromessenger/.test(navigator.userAgent.toLowerCase());e=e||[];var m={},h="/login?";if(i&&"corp"===n){for(var y=0,g=[p.REGISTER_FROM.weixin,p.REGISTER_FROM.dingtalk];y<g.length;y++){var v=g[y];m[v]=e.indexOf(v)>=0}h+="org=".concat(i.login,"&")}else{var w=[];t.isInvite?(w=c?[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.wechat]:s&&!d?[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.alipay]:[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.alipay,p.REGISTER_FROM.wechat],w=c?[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.wechat]:[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.alipay,p.REGISTER_FROM.wechat]):w=c?[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.wechat]:s&&!d?[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.alipay]:[p.REGISTER_FROM.dingtalk,p.REGISTER_FROM.alipay,p.REGISTER_FROM.wechat];for(var b=0,_=w;b<_.length;b++){var E=_[b];m[E]=e.indexOf(E)>=0}m.alipay=m.alipay&&!s}for(var O=function(e,n){if("modal"===t.mode)return e.preventDefault(),void t.switchPlatform(n);var r=t.loginType;window.location.href="".concat(h,"platform=").concat(n,"&loginType=").concat(r)},k=[{type:p.REGISTER_FROM.wechat,text:__("微信"),title:__("微信登录"),spm:"d012"},{type:p.REGISTER_FROM.dingtalk,text:__("钉钉"),title:__("钉钉登录"),spm:"d010"},{type:p.REGISTER_FROM.alipay,href:"".concat(h,"platform=alipay"),text:__("支付宝"),title:__("支付宝登录"),spm:"d011"},{type:p.REGISTER_FROM.weixin,text:__("企业微信"),title:__("企业微信登录"),spm:"d012"}],S=function(){var e=x[P];if(!l&&window.h5&&e.type===p.REGISTER_FROM.dingtalk){var n=window.location,r=new URLSearchParams;r.set("url",n.href),e.href="https://qr.dingtalk.com/page/link?".concat(r.toString())}e.onClick=function(n){if(t.checkBeforeLogin&&!t.checkBeforeLogin(O.bind(undefined,n,e.type)))return n.preventDefault(),void n.stopPropagation();e.href||O(n,e.type)}},P=0,x=k;P<x.length;P++)S();return a.a.createElement("div",{className:"third-login"},a.a.createElement("div",{className:"third-login-link","data-testid":"third-login-link"},k.filter((function(t){return m[t.type]})).map((function(t){return a.a.createElement(r.a,{title:t.title},a.a.createElement("a",{className:u()("third-login-a","third-login-a-".concat(t.type)),"data-aspm-click":t.spm,href:t.href,onClick:t.onClick},a.a.createElement("span",{className:t.type,"data-testid":"Login:ThirdLoginLink:".concat(t.type)})))}))))};d.defaultProps={switchPlatform:function(){}},d.propTypes={switchPlatform:c.a.func,checkBeforeLogin:c.a.func,mode:c.a.oneOf(["default","modal"]).isRequired,isInvite:c.a.bool};e.a=d},4416:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return"wechat"!==t?t:"wechatActivity"}},4443:function(t,e){t.exports={MODE:{pac:"PAC",http:"HTTP"},TYPE:{http:"HTTP",socks4:"SOCKS4",socks5:"SOCKS5"}}},4492:function(t,e,n){"use strict";var r=n(0),o=n.n(r),a=n(4),i=n.n(a),c=n(524),l=n(837),u=n(3783),s=n(4429),f=(n(36),n(8)),p=(n(217),n(49)),d=(n(52),n(12)),m=(n(170),n(70)),h=(n(62),n(31)),y=(n(43),n(10)),g=n(15),v=n.n(g),w=n(6),b=n.n(w),_=n(30),E=n(1260),O=n.n(E),k=n(3665),S=n(308),P=n.n(S),x=n(451),j=(n(146),n(21)),T=(n(187),n(34)),R=(n(126),n(38)),C=(n(693),n(379)),L=(n(136),n(28));function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function D(t){if(!("string"==typeof t||t instanceof String)){var e=N(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}var I={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};var M="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",F="(".concat(M,"[.]){3}").concat(M),U=new RegExp("^".concat(F,"$")),q="(?:[0-9a-fA-F]{1,4})",B=new RegExp("^("+"(?:".concat(q,":){7}(?:").concat(q,"|:)|")+"(?:".concat(q,":){6}(?:").concat(F,"|:").concat(q,"|:)|")+"(?:".concat(q,":){5}(?::").concat(F,"|(:").concat(q,"){1,2}|:)|")+"(?:".concat(q,":){4}(?:(:").concat(q,"){0,1}:").concat(F,"|(:").concat(q,"){1,3}|:)|")+"(?:".concat(q,":){3}(?:(:").concat(q,"){0,2}:").concat(F,"|(:").concat(q,"){1,4}|:)|")+"(?:".concat(q,":){2}(?:(:").concat(q,"){0,3}:").concat(F,"|(:").concat(q,"){1,5}|:)|")+"(?:".concat(q,":){1}(?:(:").concat(q,"){0,4}:").concat(F,"|(:").concat(q,"){1,6}|:)|")+"(?::((?::".concat(q,"){0,5}:").concat(F,"|(?::").concat(q,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return D(t),(e=String(e))?"4"===e?U.test(t):"6"===e&&B.test(t):G(t,4)||G(t,6)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},Y=/^\[([^\]]+)\](?::([0-9]+))?$/;function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t===r||(o=r,"[object RegExp]"===Object.prototype.toString.call(o)&&r.test(t)))return!0}var o;return!1}function $(t,e){if(D(t),!t||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;if((e=A(e,V)).validate_length&&t.length>=2083)return!1;if(!e.allow_fragments&&t.includes("#"))return!1;if(!e.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var n,r,o,a,i,c,l,u;if(l=t.split("#"),t=l.shift(),l=t.split("?"),t=l.shift(),(l=t.split("://")).length>1){if(n=l.shift().toLowerCase(),e.require_valid_protocol&&-1===e.protocols.indexOf(n))return!1}else{if(e.require_protocol)return!1;if("//"===t.slice(0,2)){if(!e.allow_protocol_relative_urls)return!1;l[0]=t.slice(2)}}if(""===(t=l.join("://")))return!1;if(l=t.split("/"),""===(t=l.shift())&&!e.require_host)return!0;if((l=t.split("@")).length>1){if(e.disallow_auth)return!1;if(""===l[0])return!1;if((r=l.shift()).indexOf(":")>=0&&r.split(":").length>2)return!1;var s=z(r.split(":"),2),f=s[0],p=s[1];if(""===f&&""===p)return!1}c=null,u=null;var d=(a=l.join("@")).match(Y);if(d?(o="",u=d[1],c=d[2]||null):(o=(l=a.split(":")).shift(),l.length&&(c=l.join(":"))),null!==c&&c.length>0){if(i=parseInt(c,10),!/^[0-9]+$/.test(c)||i<=0||i>65535)return!1}else if(e.require_port)return!1;return e.host_whitelist?H(o,e.host_whitelist):""===o&&!e.require_host||!!(G(o)||function(t,e){D(t),(e=A(e,I)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1)),!0===e.allow_wildcard&&0===t.indexOf("*.")&&(t=t.substring(2));var n=t.split("."),r=n[n.length-1];if(e.require_tld){if(n.length<2)return!1;if(!e.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1;if(/\s/.test(r))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(r))&&n.every((function(t){return!(t.length>63&&!e.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)||/[\uff01-\uff5e]/.test(t)||/^-|-$/.test(t)||!e.allow_underscores&&/_/.test(t))}))}(o,e)||u&&G(u,6))&&(o=o||u,!e.host_blacklist||!H(o,e.host_blacklist))}var J=n(4443),Z={wrapper:"index-module_wrapper_JWVrc",group:"index-module_group_v1Ma7",switcherCon:"index-module_switcherCon_ukBSF",proxyEdit:"index-module_proxyEdit_dCgE9",itemTitle:"index-module_itemTitle_+3-Mr",confirm:"index-module_confirm_21TS+"};function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(){Q=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),c=new R(r||[]);return o(i,"_invoke",{value:P(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",m="executing",h="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(C([])));E&&E!==n&&r.call(E,i)&&(b=E);var O=w.prototype=g.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==K(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?h:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(K(e)+" is not iterable")}return v.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(S.prototype),u(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function X(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function tt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){X(a,r,o,i,c,"next",t)}function c(t){X(a,r,o,i,c,"throw",t)}i(void 0)}))}}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function nt(t,e,n){return e=ot(e),function(t,e){if(e&&("object"==K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rt()?Reflect.construct(e,n||[],ot(t).constructor):e.apply(t,n))}function rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rt=function(){return!!t})()}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}function it(t,e,n){return(e=ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ct(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}var lt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return it(t=nt(this,e,[].concat(r)),"formRef",o.a.createRef()),it(t,"state",{proxySetting:{},showProxyUrlBoard:!1,errMessage:"",proxyUrl:""}),it(t,"onSwitchProxy",function(){var e=tt(Q().mark((function e(n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.state.proxySetting).enable=n,r.mode||(r.mode=J.MODE.http,r.type=J.TYPE.http),e.next=5,t.props.updateProxySettings(r);case 5:t.setState({proxySetting:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),it(t,"changeProxyType",function(){var e=tt(Q().mark((function e(n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.state.proxySetting).mode=n,n===J.MODE.http&&(r.type=J.TYPE.http),e.next=5,t.props.updateProxySettings(r);case 5:t.setState({proxySetting:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),it(t,"changeType",function(){var e=tt(Q().mark((function e(n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.state.proxySetting).type=n,e.next=4,t.props.updateProxySettings(r);case 4:t.setState({proxySetting:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),it(t,"editProxyUrl",(function(){t.setState({showProxyUrlBoard:!0})})),it(t,"onConfirmProxyUrl",tt(Q().mark((function e(){var n,r,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state.proxyUrl,r=Object.keys(J.TYPE),n&&$(n,{require_protocol:!0,protocols:r})){e.next=4;break}return e.abrupt("return",t.setState({errMessage:__("代理地址输入错误")}));case 4:return(o=t.state.proxySetting).url=n,e.next=8,t.props.updateProxySettings(o);case 8:t.setState({proxySetting:o,showProxyUrlBoard:!1});case 9:case"end":return e.stop()}}),e)})))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(e,t),n=e,r=[{key:"UNSAFE_componentWillMount",value:(i=tt(Q().mark((function t(){var e;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getProxySettings();case 2:e=t.sent,this.setState({proxySetting:e||{}});case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.state,n=e.proxySetting,r=e.showProxyUrlBoard,a=e.errMessage,i=n.mode===J.MODE.http,c="mini"===this.props.scene,l={left:c?14:18,right:c?10:6},u="100%",s=c?"small":"normal",p=c?{borderBottom:"none"}:{};return o.a.createElement("div",{className:Z.wrapper,style:p},!c&&o.a.createElement("h2",null,__("代理设置")),o.a.createElement("div",{className:Z.group},o.a.createElement("div",{className:Z.item},o.a.createElement(R.a,null,o.a.createElement(L.a,{span:l.left,className:Z.itemTitle},__("启用代理")),o.a.createElement(L.a,{className:Z.switcherCon,span:l.right},o.a.createElement(C.a,{defaultChecked:n.enable,checked:n.enable,size:"large",onChange:this.onSwitchProxy}))))),n.enable&&o.a.createElement("div",null,o.a.createElement("div",{className:Z.group},o.a.createElement("div",{className:Z.item},o.a.createElement(R.a,null,o.a.createElement(L.a,{span:l.left,className:Z.itemTitle},__("代理模式")),o.a.createElement(L.a,{span:l.right},o.a.createElement(T.a,{style:{width:u},onChange:function(e){return t.changeProxyType(e)},defaultValue:n.mode||J.MODE.http,size:s},o.a.createElement(T.a.Option,{value:J.MODE.http},__("HTTP 代理")),o.a.createElement(T.a.Option,{value:J.MODE.pac},__("PAC 代理"))))))),i&&o.a.createElement("div",{className:Z.group},o.a.createElement("div",{className:Z.item},o.a.createElement(R.a,null,o.a.createElement(L.a,{span:l.left,className:Z.itemTitle},__("代理协议")),o.a.createElement(L.a,{span:l.right},o.a.createElement(T.a,{style:{width:u},onChange:function(e){return t.changeType(e)},defaultValue:n.type||J.TYPE.http,size:s},o.a.createElement(T.a.Option,{value:J.TYPE.http},J.TYPE.http),o.a.createElement(T.a.Option,{value:J.TYPE.socks4},J.TYPE.socks4),o.a.createElement(T.a.Option,{value:J.TYPE.socks5},J.TYPE.socks5)))))),o.a.createElement("div",{className:Z.group,style:{border:"none"}},o.a.createElement("div",{className:Z.item},o.a.createElement(R.a,null,o.a.createElement(L.a,{span:l.left,className:Z.itemTitle},__("代理服务器"),n.url&&o.a.createElement("span",{className:Z.proxyInfo},n.url)),o.a.createElement(L.a,{span:l.right,className:Z.proxyEdit},o.a.createElement(f.a,{onClick:this.editProxyUrl},__("修改")))))),c&&o.a.createElement("div",{className:Z.confirm},o.a.createElement(f.a,{type:"primary",onClick:this.props.onOk},__("确定")))),o.a.createElement(h.a,{title:__("设置代理地址"),closable:!0,maskClosable:!1,visible:r,onCancel:function(){t.setState({showProxyUrlBoard:!1})},footer:null},o.a.createElement(j.a,{ref:this.formRef},o.a.createElement(j.a.Item,{name:"proxyUrl",help:a||null,validateStatus:a?"error":null},o.a.createElement(d.a,{ref:function(e){t.proxyUrlInputElem=e},defaultValue:n.url,placeholder:__("协议://IP:端口"),onChange:function(e){return t.setState({proxyUrl:e.target.value,errMessage:""})}}))),o.a.createElement("div",{style:{textAlign:"right",marginTop:8}},o.a.createElement(f.a,{type:"primary",onClick:this.onConfirmProxyUrl},__("确定")))))}}],r&&et(n.prototype,r),a&&et(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a,i}(r.Component);lt.defaultProps={scene:""},lt.propTypes={scene:i.a.string,updateProxySettings:i.a.func,getProxySettings:i.a.func,onOk:i.a.func};var ut=lt,st=n(1706),ft=n(97),pt=n(1699),dt=n(3888),mt=n(3901),ht=n(4236),yt=n(141),gt=n(3638),vt=n(4094),wt=n(152);var bt=n(4413),_t=n(2764),Et=n(3898),Ot=n(1705),kt=window.appData.isDesktopApp;var St=function(t){var e=t.onBack;return kt?o.a.createElement("div",{className:"back-to-login",onClick:e},o.a.createElement(Ot.default,null),__("返回登录页")):null};function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function xt(){xt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),c=new R(r||[]);return o(i,"_invoke",{value:P(t,n,c)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",m="executing",h="completed",y={};function g(){}function v(){}function w(){}var b={};u(b,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(C([])));E&&E!==n&&r.call(E,i)&&(b=E);var O=w.prototype=g.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Pt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?h:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Pt(e)+" is not iterable")}return v.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(S.prototype),u(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function jt(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function Tt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){jt(a,r,o,i,c,"next",t)}function c(t){jt(a,r,o,i,c,"throw",t)}i(void 0)}))}}function Rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ft(r.key),r)}}function Nt(t,e,n){return e=At(e),function(t,e){if(e&&("object"==Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dt()?Reflect.construct(e,n||[],At(t).constructor):e.apply(t,n))}function Dt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dt=function(){return!!t})()}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},At(t)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function Mt(t,e,n){return(e=Ft(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pt(e)?e:e+""}var Ut=window.appData,qt=Ut.locale,Bt=Ut.isDesktopApp,Gt=Ut.isDesktopInValidVersion,zt="en-us"===qt,Wt=new URLSearchParams(window.location.search),Vt="from_desktop_inside_login_page"===Wt.get("scene"),Yt="true"===Wt.get("show_download_ali_yuque_tips"),Ht=function(t){function e(t){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(r=Nt(this,e,[t]),"getTarget",(function(){var t;return(0,r.props.form.validateFields)(["login"],(function(e,n){e||(t=r.state.currentMobile)})),t})),Mt(r,"handleSubmit",(function(t){if(null==t||t.preventDefault(),!r.state.submitting){r.setState({errorMsg:"",submitting:!0});var e=r.props,n=e.form,a=e.dispatch,i=e.mode;n.validateFields((function(e,c){var l,u="password"===r.state.loginType?r.captcha:null===(l=r.checkCode)||void 0===l?void 0:l.captcha,s=u?u.getValues():{};if("mobile"===r.state.loginWay&&(c.login=r.state.currentMobile),e)r.setState({submitting:!1});else{if(r.protocolRef&&!r.protocolRef.checkProtocolAgreed({onConfirm:r.handleSubmit.bind(r,t)}))return void r.setState({submitting:!1});a({type:"me/doLogin",payload:Ct(Ct(Ct({},c),s),{},{loginType:r.state.loginType})}).then((function(t){if(r.setState({submitting:!1,currentMobile:c.login}),t.data)return"modal"===i&&r.props.onLogin?(n.resetFields(),void r.props.onLogin()):(yt.a.get("terms")||(yt.a.set("terms",1),wt.webProxy.mine.updateUserSettings({key:"terms",value:1})),void Object(pt.b)(t.data.goto));if(t.captcha&&r.setState({showCaptcha:!0},(function(){null==u||u.reset()})),r.checkIs2FATimeout())return y.a.warn(__("双重验证超时，请重新登录")),void Object(pt.b)("/login",500);var e=r.state,a=e.currentMobile,l=e.allDefaultCaptchaEnable,s=zt?k.validator.mobilePhoneForNonChinese(a):k.validator.mobilePhone(a);if("not-support-register"!==t.code)if("not-register"!==t.code)if("login_or_password"!==t.key){if("location-invalid"===t.code)return y.a.warn(__("账号登录异常，请使用短信登录")),void r.setState({loginType:"sms",loginWay:"mobile",forceSmsLogin:!0,forcePasswordLogin:!1,submitting:!1,showCaptcha:l,errorMsg:""});var f=x.TWO_FACTOR_ERROR_CODE[t.code]?x.TWO_FACTOR_ERROR_MESSAGE[t.code]:__("登录失败，请稍后再试");if(y.a.warn(f),t.code!==x.TWO_FACTOR_ERROR_CODE.NEED_TWO_FACTOR){if([x.TWO_FACTOR_ERROR_CODE.INCONSISTENT_ACCOUNT,x.TWO_FACTOR_ERROR_CODE.INVALID_TYPE].includes(t.code))return n.resetFields(),void Object(pt.b)("/login",1e3);var p=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={login:{notfound:0!==n.id?__("账号不存在，请重新输入"):r.mobile?__("该手机号未注册语雀 {loginLink}",{loginLink:o.a.createElement("a",{href:"/login"},__("快速注册"))}):__("邮箱未绑定语雀账号，无法登录 {loginLink}",{loginLink:o.a.createElement("a",{href:"/login"},__("快速注册"))}),notjoin:__("没有权限登录此企业空间"),locked:__("密码错误次数过多，账号登录已被暂时锁定，10 分钟后将自动解锁，或者你也可以通过{findPasswordLink}来解锁",{findPasswordLink:o.a.createElement("a",{href:"/password_reset"},__("找回密码"))}),"rate-limit":__("反复登录次数过多，请一分钟以后再试"),"invalid-checkcode":__("验证码失效"),banned:__("当前账号已封禁，如有问题请联系 support@yuque.com"),"gray-intercept":__("仅允许管理员登录"),"invalid-role":__("该账户非空间外部联系人")},password:{wrong:o.a.createElement("span",null,__("密码不正确，请重新输入")),disable_password_login:o.a.createElement("span",null,__("当前企业空间已关闭密码登录")),invalid:o.a.createElement("span",null,__("输入正确密码格式，至少 6 位"))},code:{invalid:__("输入正确的验证码"),"invalid-checkcode":__("验证码已失效，请重新获取")}};return a[t]&&a[t][e]?a[t][e]:null}(t.key,t.code,r.props.space,{mobile:s?null:a});p?(r.setState({errorMsg:t.key}),n.setFields(Mt({},t.key,{value:c[t.key],errors:[p]}))):y.a.error(__("登录失败，请稍后再试"))}else Object(pt.b)("/login?two_fa=1",500)}else y.a.warn(__("账号或密码输入错误"));else window.location.href="/register".concat(window.location.search);else y.a.warn(__("仅限中国大陆（不含港澳台）手机号注册"))})).catch((function(){r.setState({submitting:!1})}))}}))}})),Mt(r,"onClickSwitch",(function(){var t=r.state,e=t.currentMobile,n=t.allDefaultCaptchaEnable;r.props.form.setFieldsValue({login:e});var o="password"===r.state.loginType?"sms":"password",a="sms"===o&&n;r.setState({loginType:o,loginWay:"mobile",submitting:!1,showCaptcha:n,errorMsg:"",smsNeedCaptcha:a})})),Mt(r,"onChange",function(){var t=Tt(xt().mark((function t(e){var n,o;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.props.form.setFields([{name:"login",errors:[]}]),!r.state.errorMsg){t.next=4;break}return t.next=4,r.props.form.validateFields();case 4:n=r.state.loginType,o=r.state.allDefaultCaptchaEnable,r.setState({smsNeedCaptcha:"sms"===n&&o,currentMobile:e,errorMsg:""});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Mt(r,"toggleLoginWay",(function(){var t=r.state,e=t.loginWay,n=t.allDefaultCaptchaEnable;r.props.form.resetFields(),r.setState({loginWay:"mobile"===e?"email":"mobile",loginType:"password",submitting:!1,showCaptcha:n,errorMsg:""})})),Mt(r,"toggleLoginEmail",(function(){r.props.form.resetFields();var t=r.state.allDefaultCaptchaEnable;r.setState({loginWay:"email",loginType:"password",submitting:!1,showCaptcha:t,errorMsg:""})})),Mt(r,"openProxySettings",(function(){r.setState({showProxySetting:!0})})),Mt(r,"closeProxySettings",(function(){r.setState({showProxySetting:!1})}));var a="+86"===yt.a.get("phoneCode")||null===yt.a.get("phoneCode")?yt.a.get("phoneNumber"):"".concat(yt.a.get("phoneCode")," ").concat(yt.a.get("phoneNumber")),i=Wt.get("loginType")||"sms",c=null===(n=window.appData)||void 0===n||null===(n=n.settings)||void 0===n?void 0:n.all_default_captcha_enable;return r.state={submitting:!1,showCaptcha:!1,errorMsg:"",loginType:i,forceSmsLogin:!1,forcePasswordLogin:!1,loginWay:"mobile",currentMobile:a,showProxySetting:!1,smsNeedCaptcha:"sms"===i&&c,allDefaultCaptchaEnable:c},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(e,t),n=e,r=[{key:"componentDidMount",value:function(){Gt&&window.openExternalLink&&this.showDesktopUpdateModal(),Object(gt.c)();var t=this.props.twoFAContext;if(t){var e=t.nextAuthType;this.setState((function(t){return{loginType:e,loginWay:"mobile",forceSmsLogin:"sms"===e,forcePasswordLogin:"password"===e,submitting:!1,showCaptcha:t.allDefaultCaptchaEnable,errorMsg:""}}))}}},{key:"checkIs2FATimeout",value:function(){var t=this.props.twoFAContext;return!(!t||!t.expireAt)&&v()(t.expireAt).isBefore(v()())}},{key:"showDesktopUpdateModal",value:function(){h.a.warning({title:__("更新提醒"),content:__("你的语雀版本过旧，请尽快下载最新版使用"),onOk:function(){window.openExternalLink("/download",!0)},okText:__("去下载"),cancelText:null})}},{key:"renderRegisterButton",value:function(){var t=window.appData.organization;if(ft.a.disableRegistry(t))return null;var e=Object(E.parse)(decodeURIComponent(window.location.search)).goto,n={};e&&(n.goto=e),Bt&&(n.source="desktop");var r=Object.keys(n).length?"?".concat(Object(E.stringify)(n)):"";return o.a.createElement("a",{href:"/login".concat(r)},__("快速注册"))}},{key:"getBtnDisabled",value:function(){var t=this.props.form.getFieldValue;return"password"===this.state.loginType?!t("password")||!t("login"):!this.state.currentMobile||!t("code")}},{key:"renderOtherLoginChannel",value:function(){var t=this,e=this.state,n=e.forceSmsLogin,r=e.forcePasswordLogin;if(n||r)return null;var a=Object(E.parse)(window.location.search).showProxy,i=Bt&&a&&Object(vt.a)().ipcRenderer,c=a&&Bt&&i,l=this.renderRegisterButton();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:b()("login-more-tips-warp",{"login-more-tips-warp-desktop":Bt})},o.a.createElement("span",{className:"login-more-tips-warp-left"}),o.a.createElement("span",null,__("其他登录方式")),o.a.createElement("span",{className:"login-more-tips-warp-right"})),o.a.createElement("div",{className:b()("login-more-warp",{"login-more-warp-desktop":Bt})},o.a.createElement("div",{className:"login-more-warp-box"},o.a.createElement(Et.a,{loginType:"sms"===this.state.loginType?"password":"sms",onClickSwitch:this.onClickSwitch}),!window.appData.isAlipayApp&&o.a.createElement(o.a.Fragment,null,o.a.createElement(bt.a,{"data-aspm":"email"===this.state.loginWay?"c38513":"c38516",switchPlatform:this.props.switchPlatform,checkBeforeLogin:function(e){var n;return null===(n=t.protocolRef)||void 0===n?void 0:n.checkProtocolAgreed({onConfirm:e})},extra:l,loginType:this.state.loginType,mode:this.props.mode}),o.a.createElement(m.a,{title:__("邮箱登录")},o.a.createElement("a",{"data-aspm-click":"d015","data-testid":"changeLoginWay",onClick:this.toggleLoginEmail},o.a.createElement("span",{className:"login-email-icon"},o.a.createElement(st.default,null)))),c&&o.a.createElement("div",{className:"proxy-setting",onClick:this.openProxySettings},__("代理设置"))))))}},{key:"render",value:function(){var t=this,e=this.props.form,n=e.getFieldDecorator,r=(0,e.getFieldError)(this.state.errorMsg),a=Object(E.parse)(window.location.search).showProxy,i=Bt&&a&&Object(vt.a)().ipcRenderer,c="password"===this.state.loginType,l=this.renderRegisterButton();return o.a.createElement("div",{className:b()("account-login form-pro",{"login-from-desktop":Bt}),"data-aspm":"email"===this.state.loginWay?"c38514":"c38497"},o.a.createElement(p.a,{onSubmit:this.handleSubmit},o.a.createElement(p.a.Item,{className:b()({"ant-legacy-form-item-custom":"login"===this.state.errorMsg,"login-from-desktop-inside":Vt&&!Yt})},("mobile"===this.state.loginWay||!c)&&n("login",{validateTrigger:"onSubmit",initialValue:this.state.currentMobile||"",getValueFromEvent:this.getDecoratorValue,rules:[{required:!0,validator:function(t,e,n){var r=zt?k.validator.mobilePhoneForNonChinese(e):k.validator.mobilePhone(e);n(c&&r?__("输入正确手机号"):r)}}]})(o.a.createElement(_t.a,{passwordType:c,onChange:this.onChange})),"email"===this.state.loginWay&&c&&n("login",{validateTrigger:"onSubmit",initialValue:"",rules:[{validator:function(t,e,n){var r=P.a.trimAllSpace(e);k.validator.isEmail(r)?n():n(__("输入正确的邮箱"))}}]})(o.a.createElement("div",{className:"email-login-input"},o.a.createElement(d.a,{"data-testid":"email-login-input","data-aspm-click":"d017",autocomplete:"new-password",readonly:!0,onfocus:"this.removeAttribute('readonly');",type:"text",ref:function(e){t.input=e},placeholder:__("请输入邮箱"),maxLength:100,size:"large"}))),"login"===this.state.errorMsg&&o.a.createElement("div",{className:"ant-legacy-form-explain ant-legacy-form-explain-custom"},r)),this.state.showCaptcha&&"sms"!==this.state.loginType&&o.a.createElement("div",{className:"password-login-captcha"},o.a.createElement(dt.a,{form:this.props.form,show:this.state.showCaptcha,ref:function(e){t.captcha=e},scene:window.h5?"nc_login_h5":"login"})),c?o.a.createElement("div",{className:"login-password-formitem"},o.a.createElement(p.a.Item,null,n("password",{validateTrigger:"onSubmit",initialValue:"",rules:[{validator:function(t,e,n){e.length?e.length<6?n(__("输入正确密码格式，至少 6 位")):n():n(__("输入密码"))}}]})(o.a.createElement(d.a.Password,{"data-testid":"loginPasswordInput","data-aspm-click":"email"===this.state.loginWay?"d018":"d003",className:"login-password-input",autoComplete:"off",placeholder:__("请输入密码"),type:"password",maxLength:200,size:"large"})))):o.a.createElement("div",{className:"login-check-code"},o.a.createElement(mt.b,{disabled:!this.state.currentMobile,fieldTypeName:"login",form:this.props.form,action:"login",getTarget:this.getTarget,clickLink:this.onClickSwitch,linkTest:__(""),needCaptcha:this.state.smsNeedCaptcha,ref:function(e){t.checkCode=e}}),"checkcode"===this.state.errorMsg&&o.a.createElement("div",{className:"ant-legacy-form-explain ant-legacy-form-explain-custom"},r)),"password"===this.state.loginType&&o.a.createElement("a",{"data-aspm-click":"d014",className:"password-reset",href:"/password_reset?loginWay=".concat(this.state.loginWay)},__("忘记密码？")),o.a.createElement(p.a.Item,null,o.a.createElement(f.a,{"data-testid":"btnLogin","data-aspm-click":"email"===this.state.loginWay?"d020":"d009",type:"primary",htmlType:"submit",size:"large",disabled:this.getBtnDisabled(),block:!0,className:"btn-login",loading:this.state.submitting},o.a.createElement("span",null,this.props.submitBtnText||("password"===this.state.loginType?__("登录"):__("登录 / 注册")))))),o.a.createElement("div",{className:"lark-login-protocol"},o.a.createElement(ht.a.ManualProtocol,{className:this.props.protocolClassName,ref:function(e){t.protocolRef=e}})),this.props.isShowOtherLoginChannel&&this.renderOtherLoginChannel(),o.a.createElement("div",{"data-testid":"loginFoot",style:{display:"none"},className:"login-foot","data-aspm":"email"===this.state.loginWay?"c38512":"c38515"},o.a.createElement("a",{"data-aspm-click":"d014",href:"/password_reset"},__("找回密码")),o.a.createElement("span",{className:"login-foot-span"}),l&&o.a.createElement("div",{className:"login-foot-register"},o.a.createElement("span",{className:"login-foot-span"}),o.a.createElement("a",{"data-aspm-click":"d016"},l)),o.a.createElement("span",{className:"login-foot-span"}),o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/xt7yg8"},__("遇到问题"))),this.state.showProxySetting&&o.a.createElement("div",{className:"proxy-board-warp"},o.a.createElement("h2",null,__("设置代理")),o.a.createElement(ut,{scene:"mini",getProxySettings:Tt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.invoke("get-proxy-settings");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),updateProxySettings:function(){var t=Tt(xt().mark((function t(e){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.invoke("update-proxy-settings",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onOk:this.closeProxySettings}),o.a.createElement(St,{onBack:this.closeProxySettings})))}}],r&&Lt(n.prototype,r),a&&Lt(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.Component);Ht.defaultProps={isShowOtherLoginChannel:!0},Ht.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired,onLogin:i.a.func,isShowOtherLoginChannel:i.a.bool,protocolClassName:i.a.string,submitBtnText:i.a.string,onSubmit:i.a.func,twoFAContext:i.a.object};var $t=p.a.create()(Object(c.d)((function(t){return t}))(Object(_.withRouter)(Ht))),Jt=n(1);function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function Qt(t,e,n){return e=te(e),function(t,e){if(e&&("object"==Zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xt()?Reflect.construct(e,n||[],te(t).constructor):e.apply(t,n))}function Xt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xt=function(){return!!t})()}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ee(t,e)}function ne(t,e,n){return(e=re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function re(t){var e=function(t,e){if("object"!=Zt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zt(e)?e:e+""}var oe=new URLSearchParams(window.location.search),ae=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ne(t=Qt(this,e,[].concat(r)),"state",{oauthParams:window.appData.login.oauthParams,loginType:oe.get("loginType")}),ne(t,"getOauthURL",(function(){return t.props.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:window.appData.login.platform||"dingtalk"}}}).then((function(e){t.setState({oauthParams:e.oauthParams})}))})),ne(t,"initData",(function(){var e=t.state.oauthParams;if(e)if(window.appData.login.isDingTalkDesktopApp){Object(Jt.loadScript)("https://g.alicdn.com/dingding/dingtalk-pc-api/2.7.0/index.js",(function(){return t.initWithDesktop()}))}else{Object(Jt.loadScript)("https://g.alicdn.com/dingding/dinglogin/0.0.5/ddLogin.js",(function(){window.DDLogin({id:"qr_login_container",goto:encodeURIComponent(e.DDLoginGoto),style:"border:none;background-color:#FFFFFF;",width:"240",height:"310"})})),window.addEventListener("message",t.handleMessage,!1)}})),ne(t,"handleMessage",(function(e){var n=e.origin,r=e.data;if("https://login.dingtalk.com"===n){var o=r,a="".concat(t.state.oauthParams.DDLoginGoto,"&loginTmpCode=").concat(encodeURIComponent(o));window.location=a}})),ne(t,"switchPlatform",(function(e){if("modal"===t.props.mode)return e.preventDefault(),void t.props.switchPlatform("normal");window.appData.isDesktopApp?window.history.back():window.location.href="/login?loginType=".concat(t.state.loginType)})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.state.oauthParams?this.initData():this.getOauthURL().then((function(){t.initData()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage,!1)}},{key:"initWithDesktop",value:function(){var t=window.DingTalkPC,e=window.appData.dingtalkCorpId;t.runtime.permission.requestAuthCode({corpId:e,onSuccess:function(n){if(console.log("requestAuthCode success",n),n&&n.code){var r=O.a.parse(window.location.search),o={codeType:"authcode",code:n.code,goto:r.goto||"/",corpId:e},a="".concat(window.location.protocol,"//").concat(window.location.host),i="".concat(a,"/login/callback/dingtalk?").concat(O.a.stringify(o));console.log("openLink ".concat(i)),t.biz.util.openLink({url:i,onSuccess:function(e){console.log("openLink success",e),t.biz.navigation.quit({message:"quit message",onSuccess:function(t){console.log("navigation.quit success",t)},onFail:function(t){console.log(t)}})},onFail:function(t){console.log(t)}})}else t.device.notification.toast({type:"error",text:"requestAuthCode result format error: ".concat(JSON.stringify(n)),duration:5,delay:0})},onFail:function(e){console.log("requestAuthCode fail",e),t.device.notification.toast({type:"error",text:"requestAuthCode error: ".concat(e.errorMessage),duration:5,delay:0})}})}},{key:"render",value:function(){var t=this.props.space;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"thirdpart-login","data-aspm":"c38511"},o.a.createElement("div",{id:"qr_login_container",className:"thirdpart-login-qr","data-aspm-click":"d028"})),o.a.createElement("div",null,t.enable_password&&o.a.createElement("p",{"data-aspm":"c38510"},o.a.createElement(Et.a,{loginType:this.state.loginType,onClickSwitch:this.switchPlatform}))))}}])&&Kt(n.prototype,r),a&&Kt(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.Component);ae.defaultProps={switchPlatform:function(){}},ae.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired};var ie=Object(c.d)((function(t){return t}))(ae),ce=n(205);function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,he(r.key),r)}}function se(t,e,n){return e=pe(e),function(t,e){if(e&&("object"==le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fe()?Reflect.construct(e,n||[],pe(t).constructor):e.apply(t,n))}function fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fe=function(){return!!t})()}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},de(t,e)}function me(t,e,n){return(e=he(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function he(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==le(e)?e:e+""}var ye="zh-cn"===Object(ce.d)()?"zh_CN":"en",ge=new URLSearchParams(window.location.search),ve=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return me(t=se(this,e,[].concat(r)),"state",{oauthParams:window.appData.login.oauthParams,oauthURL:window.appData.login.oauthURL,loginType:ge.get("loginType")}),me(t,"getOauthURL",(function(){return t.props.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:"wechat"}}}).then((function(e){t.setState({oauthParams:e.oauthParams,oauthURL:e.oauthURL})}))})),me(t,"switchPlatform",(function(e){if("modal"===t.props.mode)return e.preventDefault(),void t.props.switchPlatform("normal");window.appData.isDesktopApp?window.history.back():window.location.href="/login?loginType=".concat(t.state.loginType)})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.state.oauthParams?this.initData():this.getOauthURL().then((function(){t.initData()}))}},{key:"initData",value:function(){var t=this.state.oauthParams;t&&Object(Jt.loadScript)("https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",(function(){return new window.WxLogin({self_redirect:!1,id:"qr_login_container",appid:encodeURIComponent(t.appid),scope:"snsapi_login&lang=".concat(ye),redirect_uri:encodeURIComponent(t.redirect_uri),state:encodeURIComponent(t.state)})}))}},{key:"render",value:function(){var t=this.props.space;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"thirdpart-login"},o.a.createElement("div",{id:"qr_login_container",className:"thirdpart-login-qr"}),o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("a",{href:"".concat(this.state.oauthURL,"&lang=").concat(ye)},__("无法显示二维码？"))),o.a.createElement("p",null,o.a.createElement("br",null)),t.enable_password&&o.a.createElement(Et.a,{loginType:this.state.loginType,onClickSwitch:this.switchPlatform}))))}}])&&ue(n.prototype,r),a&&ue(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.Component);ve.defaultProps={switchPlatform:function(){}},ve.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired};var we=Object(c.d)((function(t){return t}))(ve),be=n(1486),_e=n.n(be);function Ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Oe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ke=function(t){var e=null,n=t.organization,a=window.appData.settings,i=(void 0===a?{}:a).is_via_custom_domain,c=Ee(Object(r.useState)(window.appData.login.oauthURL),2),l=c[0],u=c[1],s=function(){t.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:"weixin",organization_id:n.id}}}).then((function(t){u(t.oauthURL)}))},f=function(e){if("modal"===t.mode)return e.preventDefault(),void t.switchPlatform("normal");window.location.href="/login"};return Object(r.useEffect)((function(){return l?function(){var n="zh-cn"===Object(ce.d)()?"zh_CN":"en";_e.a.toCanvas(document.getElementById("qr_login_container"),"".concat(l,"&lang=").concat(n));var r=!1;e=setInterval((function(){r||t.dispatch({type:"proxy.web/accounts.corpLoginCheck"}).then((function(n){if("success"===n.code)return clearInterval(e),void y.a.success(__("登录成功"),2,(function(){"modal"===t.mode&&t.onLogin?t.onLogin():Object(pt.b)(n.goto)}));if(n.message){clearInterval(e);var o=document.getElementById("qr_login_container");return o.getContext("2d").clearRect(0,0,o.width,o.height),void h.a.error({centered:!0,title:__("登录失败"),content:n.message,okText:__("重新登录"),onOk:function(){"modal"===t.mode?s():window.location.reload()}})}r=!1})).catch((function(){r=!1}))}),i?2e3:1e3)}():s(),function(){clearInterval(e)}}),[l]),o.a.createElement("div",{className:"thirdpart-login corp-login"},o.a.createElement("canvas",{id:"qr_login_container",className:"thirdpart-login-qr-weixin"}),o.a.createElement("p",null,__("请使用企业微信扫描二维码登录")),o.a.createElement("p",null,o.a.createElement("br",null)),!!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(Et.a,{text:__("使用账号密码登录"),onClickSwitch:f})),!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(Et.a,{text:__("外部联系人请使用账号密码登录"),onClickSwitch:f})))};ke.defaultProps={switchPlatform:function(){}},ke.propTypes={organization:i.a.object.isRequired,dispatch:i.a.func.isRequired,switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired,onLogin:i.a.func};var Se=Object(c.d)((function(t){return t}))(ke);function Pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return xe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var je=function(t){var e=null,n=t.organization,a=window.appData.login,i=a.forceCorpLogin,c=a.customPassport,l=a.platform,u=window.appData.settings,s=void 0===u?{}:u,f=Pe(Object(r.useState)(window.appData.login.oauthURL),2),p=f[0],d=f[1],m=s.is_via_custom_domain,g=function(){t.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:l,organization_id:n.id}}}).then((function(t){d(t.oauthURL)}))},v=function(e){if("modal"===t.mode)return e.preventDefault(),void t.switchPlatform("normal");window.location.href="/login"};Object(r.useEffect)((function(){return p?function(){var n="zh-cn"===Object(ce.d)()?"zh_CN":"en";_e.a.toCanvas(document.getElementById("qr_login_container"),"".concat(p,"&lang=").concat(n));var r=!1;e=setInterval((function(){r||t.dispatch({type:"proxy.web/accounts.corpLoginCheck"}).then((function(n){if("success"===n.code)return clearInterval(e),void y.a.success(__("登录成功"),2,(function(){"modal"===t.mode&&t.onLogin?t.onLogin():Object(pt.b)(n.goto)}));if(n.message){clearInterval(e);var o=document.getElementById("qr_login_container");return o.getContext("2d").clearRect(0,0,o.width,o.height),void h.a.error({centered:!0,title:__("登录失败"),content:n.message,okText:__("重新登录"),onOk:function(){if("modal"===t.mode)g();else if(window.appData.me.id||"app_login_fail"!==n.code||i)window.location.reload();else{var e=new URLSearchParams(window.location.search);e.append("force_password",!0),e.delete("force_corp_id"),e.delete("org"),window.location.href="/login?".concat(e.toString())}}})}r=!1})).catch((function(){r=!1}))}),m?2e3:1e3)}():g(),function(){clearInterval(e)}}),[p]);var w="local"===window.appData.env;return o.a.createElement("div",{className:"thirdpart-login corp-login"},o.a.createElement("canvas",{id:"qr_login_container",className:"thirdpart-login-qr"}),o.a.createElement("p",null,__("请使用钉钉扫描二维码登录")),w&&o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=zhangsan&org=".concat(n.login)},__("模拟 张三 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=lisi&org=".concat(n.login)},__("模拟 李四 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=caicai&org=".concat(n.login)},__("模拟 Caicai 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=0571abc&org=".concat(n.login)},__("模拟 小明管理员 钉钉登录")))),o.a.createElement("p",null,o.a.createElement("br",null)),c&&o.a.createElement("a",{title:c.name,href:c.url},c.name),!!n.password_enable&&!window.appData.me.id&&!i&&o.a.createElement("p",null,o.a.createElement(Et.a,{text:__("使用账号密码登录"),onClickSwitch:v})),!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(Et.a,{text:__("外部联系人请使用账号密码登录"),onClickSwitch:v})))};je.defaultProps={switchPlatform:function(){}},je.propTypes={organization:i.a.object,dispatch:i.a.func.isRequired,switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]),onLogin:i.a.func};var Te=Object(c.d)((function(t){return t}))(je);function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ie(r.key),r)}}function Le(t,e,n){return e=De(e),function(t,e){if(e&&("object"==Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ne()?Reflect.construct(e,n||[],De(t).constructor):e.apply(t,n))}function Ne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ne=function(){return!!t})()}function De(t){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},De(t)}function Ae(t,e){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ae(t,e)}function Ie(t){var e=function(t,e){if("object"!=Re(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Re(e)?e:e+""}var Me=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return t=Le(this,e,[].concat(i)),n=t,o={time:15},(r=Ie(r="state"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ae(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.countTimer=setInterval((function(){var e=t.state.time;0===e?(clearInterval(t.countTimer),window.location.href="/login?platform=normal"):t.setState({time:e-1})}),1e3)}},{key:"componentWillUnmount",value:function(){this.countTimer&&(clearInterval(this.countTimer),this.countTimer=null)}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-result"},o.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/PPLeHLWJNhAhDyNsMzyD.svg",alt:"无权登录"}),o.a.createElement("p",{className:"login-result-failed"},this.props.platform," 登录失败，",this.props.reason),o.a.createElement("p",{className:"login-result-countdown"},"反馈码：",window.appData.traceId),o.a.createElement("p",{className:"login-result-countdown"},this.state.time,"s 后自动跳转登录"))}}])&&Ce(n.prototype,r),a&&Ce(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.Component),Fe=Me,Ue=n(4416);function qe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Be(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Ge=Object(l.a)({loader:function(){return n.e(1358).then(n.bind(null,7991))},loading:u.a}),ze=function(t){var e=t.organization,n=t.reason,a=t.corpLanding,i=t.loginType,c=t.mode,l=t.twoFAContext,u=qe(Object(r.useState)(t.platform),2),f=u[0],p=u[1];if(n)return o.a.createElement(Fe,{reason:n});if(a)return o.a.createElement(Ge,null);var d={switchPlatform:function(t){var e=window.appData.login.isWechatMobileApp&&"wechat"===t,n=window.appData.isDingTalkApp&&"dingtalk"===t,r="wechatActivity"===Object(Ue.a)(t);e||n||r?window.location.href="/login?platform=".concat(t):p(t)},mode:c,onLogin:t.onLogin,twoFAContext:l};return"dingtalk"===f||"dingtalk_selfcorp"===f?e.id&&"corp"===i?o.a.createElement(Te,d):o.a.createElement(ie,d):"wechat"===f?o.a.createElement(we,d):"wechatActivity"===f?o.a.createElement(s.a,d):"weixin"===f?o.a.createElement(Se,d):o.a.createElement($t,d)};ze.defaultProps={mode:"default"},ze.propTypes={organization:i.a.object,reason:i.a.string,corpLanding:i.a.bool,loginType:i.a.oneOf(["normal","corp"]),platform:i.a.oneOf(["dingtalk","wechat","weixin","teambition","dingtalk_selfcorp"]),mode:i.a.oneOf(["default","modal"]),onLogin:i.a.func,twoFAContext:i.a.object};e.a=Object(c.d)((function(t){return t}))(ze)},4724:function(t,e,n){"use strict";n.r(e);n(62);var r=n(31),o=(n(36),n(8)),a=n(0),i=n.n(a),c=n(4),l=n.n(c),u=n(281),s=n(4080),f=n(33),p=n(4492),d="index-module_wrapper_+VH6f",m="index-module_logoWrapper_c37Qn",h="index-module_bucTip_4PwaJ";function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var v=Object(u.b)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(1432)]).then(n.bind(null,4557))}),{suspense:!0}),w=function(t){var e=window.appData,n=e.organization,c=e.login,l=void 0===c?{}:c,u=e.isYuque,g=e.isUseAntLogin,w=l.platform,b=l.corpLanding,_=l.loginType,E=y(Object(a.useState)(!(!u&&!g)&&t.visible),2),O=E[0],k=E[1],S=u?t.from:null;return Object(a.useEffect)((function(){var t,e,n,r;u||(g||(t=null,e=null,n=null,r=function(){e&&window.removeEventListener("message",e),t&&clearTimeout(t),n&&n.parentNode&&n.parentNode.removeChild(n)},window.addEventListener("message",e=function(t){"logined"===t.data&&r()}),t=setTimeout((function(){k(!0),r()}),5e3),(n=document.createElement("iframe")).src="/r/session_expired",n.style.cssText="position: absolute; left: -9999px; top: -9999px; z-index: -1;",document.body.appendChild(n),console.log("re-login iframe created")))}),[]),u?i.a.createElement(r.a,{centered:!0,width:400,visible:t.visible,title:null,footer:null,onCancel:function(){"doc_reader"===S&&Object(s.a)("doc_reader_login_modal"),t.onCancel()}},i.a.createElement("div",{className:d},i.a.createElement("div",{className:m},i.a.createElement(v,{theme:"organization",switchMore:!1,logoSize:62})),i.a.createElement(p.a,{platform:w,corpLanding:b,organization:n,loginType:_,mode:"modal",onLogin:t.onCancel}))):i.a.createElement(r.a,{centered:!0,width:448,visible:O,title:__("登录状态失效"),footer:null,onCancel:function(){k(!1),t.onCancel&&t.onCancel()}},i.a.createElement("p",{className:h},__("当前登录状态已失效，请重新登录")),i.a.createElement(o.a,{type:"primary",onClick:function(){var e;k(!1),t.onCancel&&t.onCancel(),f.c?window.YuqueDesktopAppJSBridge.logout():null!==(e=window.appData)&&void 0!==e&&e.isAntDingTalkDesktopApp?window.location.reload():window.open("/r/session_expired","_blank")}},__("去登录")))};w.propTypes={visible:l.a.bool,from:l.a.string,onCancel:l.a.func};e.default=w}}]);