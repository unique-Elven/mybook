/*! For license information please see c__BookManage~c__CatalogItemActions~c__CatalogModule~c__CommonEditPage~c__DashboardBooks~c__Dashboar~ea79a68c.457f80e6.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10,644,1116],{1376:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-exclamationcirclefilled",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 154c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12Zm0-100c-5.523 0-10 4.477-10 10v64c0 5.523 4.477 10 10 10s10-4.477 10-10V80c0-5.523-4.477-10-10-10Z",fill:"currentColor",fillRule:"nonzero"}))},1499:function(e,t,r){"use strict";r(2746);var n=r(1002);r(1501);t.a=n.a},1641:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-meh",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm17 115c5.523 0 10 4.477 10 10s-4.477 10-10 10h-34c-5.523 0-10-4.477-10-10s4.477-10 10-10h34ZM96 96c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12Zm64 0c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12Z",fill:"currentColor",fillRule:"nonzero"}))},3345:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(185),i=r.n(a),c=r(3716),u=r(3421),l=r(979),s=r(97),f=r(699),p=r(3619),h=r(3623),d=r(3384);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",m="completed",v={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(E=S);var k=_.prototype=b.prototype=Object.create(E);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?m:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(j.prototype),l(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function E(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var S=d.memberSelectorType.GROUP,k=d.memberSelectorType.BOOK,x=d.memberSelectorType.SIMPLE_WITH_ROLE,j=d.memberSelectorType.SIMPLE,L=d.memberSelectorType.DOC,T=d.memberSelectorType.LIST,P=function(){return e=function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"serializeUserPostBody",(function(t){return e.serializeUserPostBody(t)})),E(this,"enableDepthAll",(function(){return!1})),E(this,"enableDepSelect",(function(){var e=window.appData.isYuque;return t.type===j||!e&&[S,k,x].includes(t.type)})),E(this,"adpatUIListData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(this,"adpatUINavData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E(this,"getRoles",(function(e){return Object(p.c)(e)})),E(this,"isDepartment",(function(t){return e.isDepartment(t)})),E(this,"isUser",(function(t){return e.isUser(t)})),E(this,"getRealUsers",(function(e){return e})),E(this,"getAddRoles",(function(){var e=t.getRoles(t.type),r=t.getSupportRoles();return e.filter((function(e){return r.includes(e.value)}))})),E(this,"getInviteAddRoles",w(g().mark((function e(){var r,n,a,i,c,u,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.appData.isYuque,a=t.getRoles(t.type),i=t.getSupportRoles(),c=s.a.isOwner(t.organization),u=a.filter((function(e){return i.includes(e.value)})),!t.organization||!t.organization.id){e.next=9;break}return e.next=8,s.a.canIndirectAddOrgMember(t.organization);case 8:l=e.sent;case 9:return u=n&&null!==(r=t.organization)&&void 0!==r&&r.id?(u=u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("仅空间内获得链接的人可获得权限"):__("仅空间内获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})}))).concat(u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("所有获得链接的人可获得权限"):__("所有获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.ALLOW,disabled:!l,disabled_text:c?o.a.createElement(o.a.Fragment,null,__("空间管理设置已关闭空间外人员添加权限，请先前往开启。"),o.a.createElement("a",{target:"_blank",href:"/r/organizations/dashboard/settings?type=permission"},__("立即开启"))):o.a.createElement(o.a.Fragment,null,__("管理员已关闭空间外人员添加权限，请联系管理员开启。"),o.a.createElement("a",{target:"_blank",href:"https://www.yuque.com/yuque/rvzzxz/csb5nu"},__("查看帮助"))),unique:"".concat(e.key,"-ALLOW_OUTSIDER")})}))):u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("访问链接即可获得权限"):__("通过链接邀请成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})})),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))),E(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=r,this.type=r.type,this.list=r.list,this.doc=r.doc,this.book=r.book,this.group=r.group,this.organization=r.organization,this.target=r[this.type],this.typeName=Object(c.a)(this.target?this.target.type:this.type),this.type===S&&this.target&&l.a.isPublication(this.target)&&(this.typeName=__("知识小组")),r.members&&r.members.length&&this.setUid(r.members),this.members=r.members||[],[x,j].includes(this.type)&&(this.me=r.me),this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles(),this.inviteValidRoles=this.getInviteAddRoles()},t=[{key:"check",value:(n=w(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(u.format)(e):Object(u.formatOne)(e)}},{key:"serialize",value:function(e){var t=v(v({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"getSupportRoles",value:function(){var e=[],t=p.a[this.type];return this.type===S?e=[t.member,t.readonly]:this.type===k||this.type===L?e=[t.edit,t.readonly]:this.type===T&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(h.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],r=[{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return i()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var r=i()(e,t);return r.workid=e.workid||e.work_id,r}}],t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();E(P,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),E(P,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=P},3384:function(e,t){e.exports={memberSelectorType:{GROUP:"group",BOOK:"book",DOC:"doc",SIMPLE_WITH_ROLE:"simpleWithRole",SIMPLE:"simple",LIST:"list",ORGANIZATION:"organization"}}},3421:function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){if(!e)return e;var t=e;return t.user&&(t=i(i({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(e){o.e(e)}finally{o.f()}return e}},3422:function(e,t,r){var n=r(523),o=r(235),a=r(831),i=r(491),c=r(3365),u=r(920),l=a((function(e){var t=u(e);return c(t)&&(t=void 0),i(n(e,1,c,!0),o(t,2))}));e.exports=l},3458:function(e,t,r){"use strict";t.a={shareChannels:"ShareChannels-module_shareChannels_gfpjT",shareDetailSettingPanel:"ShareChannels-module_shareDetailSettingPanel_RhPY6",label:"ShareChannels-module_label_tDypL",desc:"ShareChannels-module_desc_u1Wyf",collaborator:"ShareChannels-module_collaborator_2YM9N",inviteSelector:"ShareChannels-module_inviteSelector_UvnYT",bookPublicSetting:"ShareChannels-module_bookPublicSetting_skCSj",bookPublicTitle:"ShareChannels-module_bookPublicTitle_Nvtb5",title:"ShareChannels-module_title_FCiiD",backIcon:"ShareChannels-module_backIcon_Xa1gT",titleDesc:"ShareChannels-module_titleDesc_Qr9Q3",bookPublicSet:"ShareChannels-module_bookPublicSet_HaiHZ",contentArea:"ShareChannels-module_contentArea_WAxw-",copyLinkWrapper:"ShareChannels-module_copyLinkWrapper_zNH1v",linkTitleDesc:"ShareChannels-module_linkTitleDesc_RdIXM",linkContentArea:"ShareChannels-module_linkContentArea_+a59s",copyLink:"ShareChannels-module_copyLink_3mHuZ",inviteCopyBtn:"ShareChannels-module_inviteCopyBtn_ju+VP",moreConfigSettings:"ShareChannels-module_moreConfigSettings_b+fk7",moreConfigToggler:"ShareChannels-module_moreConfigToggler_caced",moreConfigsTip:"ShareChannels-module_moreConfigsTip_gtVy7",expandIcon:"ShareChannels-module_expandIcon_MQJP8",expandIconColor:"ShareChannels-module_expandIconColor_BoJlD",pwdBlock:"ShareChannels-module_pwdBlock_dU5pI",pwdLink:"ShareChannels-module_pwdLink_M9e3v",pwdBtn:"ShareChannels-module_pwdBtn_oJupk",passwordText:"ShareChannels-module_passwordText_gaCkx",resetBtn:"ShareChannels-module_resetBtn_aOPqB",resetIcon:"ShareChannels-module_resetIcon_rn-tx",selectorItem:"ShareChannels-module_selectorItem_l7C7L",notOwner:"ShareChannels-module_notOwner_oGq+h",selectorIcon:"ShareChannels-module_selectorIcon_4e0e0",disabledItem:"ShareChannels-module_disabledItem_1Ei-3",shareTime:"ShareChannels-module_shareTime_cjwGm",memberAbleIcon:"ShareChannels-module_memberAbleIcon_xR+WM",shareNotOwner:"ShareChannels-module_shareNotOwner_imImM",switchTitle:"ShareChannels-module_switchTitle_dS9uP",selectOption:"ShareChannels-module_selectOption_W3LKu",collaboratorContent:"ShareChannels-module_collaboratorContent_0fEPi",shareQrCodeContent:"ShareChannels-module_shareQrCodeContent_14F29",shareQrCodeArea:"ShareChannels-module_shareQrCodeArea_crX+x",shareQrCodeButton:"ShareChannels-module_shareQrCodeButton_xGFZ6"}},3475:function(e,t,r){"use strict";t.a={sharePanel:"styles-module_sharePanel_Sxg7e",main:"styles-module_main_yGeSJ",mainIntro:"styles-module_mainIntro_U4BmK",firstItem:"styles-module_firstItem_oD4je",inviteItem:"styles-module_inviteItem_NZWji",shareDescText:"styles-module_shareDescText_Aj+aY",itemTitle:"styles-module_itemTitle_HBJAz",memberBadge:"styles-module_memberBadge_tyo4x",memberAbleIcon:"styles-module_memberAbleIcon_Qqdnq",itemIcon:"styles-module_itemIcon_x0RNY",appointIcon:"styles-module_appointIcon_4sk+S",publicIcon:"styles-module_publicIcon_zEz8l",inviteIconLi:"styles-module_inviteIconLi_8F87a",dot:"styles-module_dot_Z8pRl",inviteIcon:"styles-module_inviteIcon_+3x-U",shareLinkSet:"styles-module_shareLinkSet_k942E",description:"styles-module_description_j9YFu",shareLinkShow:"styles-module_shareLinkShow_bMh8i",qrCode:"styles-module_qrCode_suE8x",shareButton:"styles-module_shareButton_L93gj",sharePublic:"styles-module_sharePublic_495Qd",shareQrCode:"styles-module_shareQrCode_xBxWb",shareQrCodeIcon:"styles-module_shareQrCodeIcon_uR90f",moreConfigs:"styles-module_moreConfigs_qgWYG",loadingIcon:"styles-module_loadingIcon_pQzuM",popover:"styles-module_popover_9iY7y"}},3483:function(e,t,r){"use strict";var n=r(57),o=r.n(n),a=(r(2941),r(1291)),i=r(50),c=r.n(i),u=r(65),l=r.n(u),s=r(0),f=r.n(s),p=r(4),h=r.n(p),d=r(6),y=r.n(d),m=r(66),v=r.n(m),g=(r(3209),["className"]);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=l()(e,g);return f.a.createElement(a.a,c()({className:y()("larkui-breadcrumb",r),ref:t},n))}));_.propTypes=w(w({},a.a.BreadcrumbProps),{},{className:h.a.string}),v()(_,a.a),t.a=_},3619:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r(88),o=r(92),a=r(435),i=r(713),c=r.n(i);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s={organization:n.default.ROLE,group:o.default.ROLE,book:a.default.ROLE,doc:a.default.ROLE,list:c.a.ROLE};function f(e){var t=s[e],r={};return"organization"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"outsourcer"===r&&(n.label=__("外部联系人")),e[r]=n,e}),{}):"group"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"readonly"===r&&(n.label=__("只读成员")),e[r]=n,e}),{}):"book"===e||"doc"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"readonly"===r&&(n.label=__("可阅读"),e[r]=n),"edit"===r&&(n.label=__("可编辑"),e[r]=n),e}),{}):"list"===e&&(r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),e[r]=n,e}),{})),r}function p(e){var t=f(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function h(e,t){var r,n=f(e),o=u(Object.keys(n).map((function(e){return n[e]})));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.value===t)return a}}catch(e){o.e(e)}finally{o.f()}return{}}},3623:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(3421);function o(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function a(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(n.format)(t.map((function(e){return e.user}))):[]}},3626:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(4),i=r.n(a),c=(r(62),r(31)),u=(r(543),r(104)),l=r(97);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){return"larkui-member-selector-container".concat(e?"-".concat(e):"")},h=o.a.forwardRef((function(e,t){var r=window.appData.organization,a=e.selectors,i=l.a.isOutsourcer(r),f=i?a.filter((function(e){return"invite"===e.props.id})):a,h=s(Object(n.useState)(!0),2),d=h[0],y=h[1],m=s(Object(n.useState)(i?"invite":e.defaultTabKey),2),v=m[0],g=m[1],b=s(Object(n.useState)(460),2),w=b[0],_=b[1],E=function(e){g(e.key)};Object(n.useEffect)((function(){_(e.getWidth(v)||460)}),[v]),o.a.useImperativeHandle(t,(function(){return{toggleTitle:function(e){y(e)}}}));return o.a.createElement(c.a,{wrapClassName:p(),visible:e.visible,width:w,title:o.a.createElement(o.a.Fragment,null,d?o.a.createElement("div",{className:p("select-by")},o.a.createElement(u.a,{onSelect:E,selectedKeys:[v],mode:"horizontal"},f.map((function(e){return o.a.createElement(u.a.Item,{key:e.props.id},__("{title}",{title:e.props.title}))})))):null),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},f.filter((function(e){return e.props.id===v}))[0])}));h.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},h.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};var d=h,y=(r(126),r(38)),m=(r(136),r(28)),v=(r(36),r(8)),g=(r(693),r(379)),b=(r(170),r(70)),w=(r(1501),r(1499)),_=r(1488),E=r(59),O=(r(812),r(340)),S=(r(187),r(34)),k=r(908),x=r(706);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){return"larkui-member-selector-role".concat(e?"-".concat(e):"")};function P(e){var t=e.roles,r=e.onChange,a=e.defaultRole||t&&t[0],i=j(Object(n.useState)(a),2),c=i[0],l=i[1];if(c){var s=function(e){l(e),r(e)};return"radio"===e.type?o.a.createElement("div",{className:T("role-select")},o.a.createElement(S.a,{size:"large",defaultValue:c.unique,onChange:function(e){var r=t.find((function(t){return t.unique===e}));s(r)}},null==t?void 0:t.map((function(e){return o.a.createElement(Option,{value:e.unique,disabled:e.disabled},o.a.createElement(b.a,{title:e.disabled?e.disabled_text:null,placement:"top",color:x.themeToken["@white"],overlayInnerStyle:{width:240,color:x.themeToken["@black"]}},o.a.createElement("span",{className:T("role-tip")},e.roleTip),o.a.createElement("span",{className:T("role-label")},e.label)))})))):o.a.createElement(O.a,{trigger:["click"],overlayClassName:T(),overlay:o.a.createElement(u.a,{selectedKeys:["".concat(c.key)]},null==t?void 0:t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key,onClick:function(){s(e)}},o.a.createElement("span",null,o.a.createElement("span",null,e.label)))})))},o.a.createElement("span",null,c.label," ",o.a.createElement(k.default,null)))}}P.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var N=P,D=(r(272),r(83)),A=r(1641),C=r(400),I=r.n(C),R=r(3482),U=r(345);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){var t=e.user,r=Object(n.useRef)(null);return o.a.createElement(R.a,{textRef:r,title:t.dep,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:r,className:"ellipsis-text"},t.dep)))},B=function(e){return"larkui-member-selector-user-search".concat(e?"-".concat(e):"")},M=S.a.Option;var q=o.a.createElement("div",{className:B("notfound")},o.a.createElement(A.default,null),o.a.createElement("p",null,__("未搜索到相关结果"))),Y=function(e){return e.department||"Department"===e.type},W=function(e){return Y(e)?U.avatar.department:e.avatar_url||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng"};function V(e){var t,r=e.users,a=e.selectedUsers,i=function(e){var t=z(Object(n.useState)(!1),2),r=t[0],o=t[1],a=z(Object(n.useState)(!1),2),i=a[0],c=a[1],u=e.getUsers,l=e.onChange,s=Object(n.useRef)(null),f=I()((function(e){return o(!0),c(!1),u(e).then((function(t){if(o(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(s.current),s.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){o(!1)}))}),300);return{state:{loading:r,fetchEnd:i},handleChange:function(e){l(e)},handleSearch:function(e){f(e)}}}(e),c=i.state,u=i.handleChange,l=i.handleSearch,s=Object(n.useRef)(null),f=e.notFoundContent||q;return Object(n.useEffect)((function(){e.getRef&&e.getRef(s)}),[]),o.a.createElement("div",{className:B()},o.a.createElement(S.a,{ref:s,className:"normal"===e.userClassType?B("container-normal"):B("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!c.loading&&c.fetchEnd?f:null,onSearch:l,onChange:u,getPopupContainer:function(e){return e.parentNode},loading:c.loading,tagRender:e.isLiteSearchSelector?function(e){var t=e.value,r=e.closable,n=e.onClose,i=a.find((function(e){return Y(e)?e.uid===t:e.id===t||e.uid===t}));return i?o.a.createElement(D.a,{icon:Y(i)?o.a.createElement("div",{className:"larkicon larkicon-organization ".concat(B("tag-icon"))}):null,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:n},i.name):null}:function(e){var t=Object(n.useRef)(null),r=e.value,i=e.closable,c=e.onClose,u=a.find((function(e){return Y(e)?e.uid===r:e.id===r||e.uid===r}));if(!u)return null;return o.a.createElement(D.a,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,className:B("user-selector-tag"),closeIcon:o.a.createElement("span",{className:B("user-selector-tag-close-avatar-wrapper")},o.a.createElement(E.b,{name:"close",size:12,className:B("user-selector-tag-close-avatar")}))},o.a.createElement(w.a,{src:W(u),size:24,className:B("user-selector-tag-avatar")}),o.a.createElement("span",{className:B("user-selector-tag-label")},o.a.createElement(R.a,{textRef:t,title:u.name,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:t,className:"ellipsis-text"},u.name)))))}},(t=window.appData.isYuque,null==r?void 0:r.map((function(r){var n=r.dep?B("isdep"):null;return o.a.createElement(M,{key:r.id||r.uid,value:r[e.keyField],label:r.name,className:B("menu-item")},o.a.createElement("span",{className:"".concat(B("user")," ").concat(n)},o.a.createElement(w.a,{className:B("icon"),src:W(r),name:r.name,size:32}),o.a.createElement("span",{className:B("title-wrap")},o.a.createElement("span",{className:B("title")},o.a.createElement("span",{className:B("name")},r.name),t&&r.login&&o.a.createElement("span",{className:B("login")},"(",r.login,")"),!t&&r.lastName&&o.a.createElement("span",{className:B("login")},"(",r.lastName,")")),r.dep&&o.a.createElement("span",{className:B("dep")},o.a.createElement(F,{user:r})))))})))))}V.defaultProps={keyField:"login"},V.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,selectedUsers:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var K=V,Q=(r(43),r(10)),Z=r(141);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function J(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ne(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function $(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==H(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(H(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ee(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ee(a,n,o,i,c,"next",e)}function c(e){ee(a,n,o,i,c,"throw",e)}i(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ae=function(){setTimeout((function(){window.location.reload()}),2e3)},ie="yq_only_staff";function ce(e){var t=e.roles,r=e.searchUser,o=e.checkValid,a=e.getUserCount,i=e.disableMeta,c=e.onSubmit,u=e.afterSubmit,l=void 0===u?ae:u,s=e.initialValues,f=e.onChange,p=e.getDefaultUsers,h=re(Object(n.useState)([]),2),d=h[0],y=h[1],m=re(Object(n.useState)([]),2),v=m[0],g=m[1],b=re(Object(n.useState)(0),2),w=b[0],_=b[1],E=null===Z.a||void 0===Z.a?void 0:Z.a.get(ie),O=re(Object(n.useState)(null===E||E>0),2),S=O[0],k=O[1],x=Object(n.useRef)(t&&t[0]),j=Object(n.useRef)(null),L=Object(n.useRef)([]),T=function(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))},P=function(){var e=te(X().mark((function e(t){var r,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p(t);case 5:return n=e.sent,n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return!v.some((function(t){return T(t,e)}))})),y(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=te(X().mark((function e(t){var n,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:return o=e.sent,o=null===(n=o)||void 0===n?void 0:n.filter((function(e){return!v.some((function(t){return T(t,e)}))})),y(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return null==e?void 0:e.map((function(e){return[].concat($(d),$(v)).find((function(t){return t.uid===e}))}))},A=function(e){return null==e?void 0:e.filter((function(e){return e._valid}))},C=Object(n.useCallback)(I()((function(e){var t=e.status;t&&Q.a[t]?Q.a[t](e.message):Q.a.warn(e.message)}),300),[]),R=function(e){return null==e?void 0:e.map((function(e){if("_valid"in e)return e;var t=o(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,C(t)),e}))};Object(n.useEffect)((function(){Z.a.set(ie,S?1:0)}),[S]),Object(n.useEffect)((function(){function e(){return(e=te(X().mark((function e(){var t,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(s);case 2:t=e.sent,r=null==(n=t)?void 0:n.map((function(e){return"_valid"in e||(e._valid=!0),e})),g(r),a&&_(a(A(r)));case 6:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}!s||null!=v&&v.length||function(){e.apply(this,arguments)}()}),[s]);var U=function(e){var t=R(e);g(t),i||_(a(A(t)))},z=function(){var e=te(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(A(t));case 3:(r=e.sent)&&("success"===r.status?(C(r),setTimeout((function(){window.location.reload()}),2e3)):C(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Q.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=te(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(A(v),x.current,S);case 2:(t=e.sent)&&("success"===t.status?(C(t),l(t)):C(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:{users:d,selected:v,userCount:w,onlyStaff:S},getUsers:N,getRef:function(e){j.current=e.current},disableSubmit:function(){return 0===v.length},handleSelect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=$(L.current),n=$(v),o=J(e);try{var a=function(){var e=t.value;r.every((function(t){return t.uid!==e.uid}))&&r.push(e),n.every((function(t){return t.uid!==e.uid}))&&n.push(e)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}y(r),L.current=r,U(n)}},handleDeselect:function(e){if(j.current){Array.isArray(e)||(e=[e]);var t,r=$(v),n=J(e);try{var o=function(){var e=t.value,n=r.findIndex((function(t){return t.uid===e.uid}));n>-1&&r.splice(n,1)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}U(r)}},handleChange:function(e){var t=R(D(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));r.length===t.length?(g(t),i||_(a(A(t))),setTimeout((function(){y([])}),300)):g(r)},handleRoleChange:function(e){x.current=e},handleSubmit:G,handleFocus:function(){j.current.focus()},userHandleChange:function(e){var t=R(D(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));(null==r?void 0:r.length)===(null==t?void 0:t.length)?(g(t),setTimeout((function(){y([])}),300),z(t)):g(r)},setOnlyStaff:k}}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){return"larkui-member-selector-search".concat(e?"-".concat(e):"")};function fe(e){var t,r,n=e.selected,a=void 0===n?[]:n,i=e.onlyStaff,c=void 0!==i&&i,u=a.filter((function(e){return e._valid})),l="";1===a.length&&"Department"===a[0].type?l=c?__("已选择 {departmentName} 部门正式员工",{departmentName:null===(t=a[0])||void 0===t?void 0:t.name}):__("已选择 {departmentName} 部门所有人",{departmentName:null===(r=a[0])||void 0===r?void 0:r.name}):l=__("已选择 {count} 个",{count:u.length});return o.a.createElement("span",{className:e.className},l)}function pe(e){var t;if(e.roles&&1===e.roles.length)t=o.a.createElement("span",{className:se("role-text")},e.roles[0].label);else{var r=e.roleSelector;t=r?o.a.createElement(r,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}):o.a.createElement(N,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange})}return o.a.createElement("span",{className:e.className},o.a.createElement("span",null,e.actionTipText||__("添加为：")),t)}function he(e){var t,r,a=e.selectors,i=e.onlyStaff,c=1===a.length,u=c?0:null,l=!window.appData.isYuque,s=ue(Object(n.useState)(u),2),f=s[0],p=s[1],h=null==f&&!c,d=function(e){c||p(e)};return o.a.createElement("div",{className:se("quick-selector-container")},h?o.a.createElement("div",{className:se("quick-selector-choose")},o.a.createElement("h2",{className:se("quick-selector-title")},__("快捷添加")),o.a.createElement("div",{className:se("quick-selector-list")},a.map((function(e,t){return o.a.createElement("div",{key:e.props.id,type:"flex",justify:"start",align:"middle",className:se("quick-selector-item"),onClick:function(){return d(t)}},o.a.createElement(b.a,{placement:"top",title:"outsourcer"===e.props.id&&o.a.createElement("div",null,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。"),o.a.createElement("a",{className:se("outsourcer-tip-link"),href:"https://www.yuque.com/yuque/rvzzxz/uan0vd",target:"_blank"},__("查看详细介绍")))},e.props.iconName&&o.a.createElement(E.b,{className:se("selector-icon"),name:e.props.iconName,size:16}),!e.props.iconName&&e.props.getIconUrl&&o.a.createElement(w.a,{className:se("quick-selector-icon"),src:e.props.getIconUrl(),size:18}),o.a.createElement("span",{className:se("quick-selector-text")},__("从{title}添加",{title:e.props.title}))),o.a.createElement("div",null,o.a.createElement(E.b,{name:"arrow-right",size:16})))})))):(t=a[f],r=o.a.cloneElement(t,{className:se("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect,setOnlyStaff:e.setOnlyStaff,onlyStaff:e.onlyStaff}),o.a.createElement("div",null,o.a.createElement("h2",{className:se("quick-selector-subtitle")},!c&&o.a.createElement("span",{className:se("quick-selector-subicon"),onClick:function(){return d(null)}},o.a.createElement(_.default,null)),o.a.createElement("span",{onClick:function(){return d(null)}},__("从{title}添加",{title:t.props.title}))),o.a.createElement("div",{className:se("quick-selector-main")},r))),h&&l&&o.a.createElement("div",{className:se("member-type-switch-container")},o.a.createElement(g.a,{checked:i,size:"small",onChange:function(t){return null==e?void 0:e.setOnlyStaff(t)}})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}function de(e){var t=ce(e),r=t.state,n=t.getRef,a=t.getUsers,i=t.disableSubmit,c=t.handleSelect,u=t.handleDeselect,l=t.handleChange,s=t.handleRoleChange,f=t.handleSubmit,p=t.handleFocus,h=t.setOnlyStaff,d=!!window.appData.organization;return o.a.createElement("div",{className:se()},o.a.createElement(y.a,null,o.a.createElement(m.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:se("selector"),onClick:p},o.a.createElement("div",{className:se("content")},o.a.createElement(K,{keyField:"uid",getRef:n,value:r.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:r.users,selectedUsers:r.selected,getUsers:a,onChange:l,notFoundContent:e.notFoundContent,placeholder:d?__("输入人员名字搜索添加，可搜空间成员或外部联系人"):__("输入人员名字搜索添加")})),o.a.createElement("div",{className:se("footer")},e.disableMeta?null:o.a.createElement(fe,{className:se("meta"),selected:r.selected,onlyStaff:r.onlyStaff}),o.a.createElement("div",{className:se("action-container")},e.roles&&e.roles.length>0?o.a.createElement(pe,{className:se("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:s,actionTipText:e.actionTipText,roleSelector:e.roleSelector}):null,o.a.createElement("div",{className:se("footer-btn")},o.a.createElement(v.a,{type:"primary",onClick:f,disabled:i()},__("添加")))))),e.quickSelectors&&e.quickSelectors.length>0?o.a.createElement(m.a,{span:12},o.a.createElement(he,{selectors:e.quickSelectors,selected:r.selected,onSelect:c,onDeselect:u,setOnlyStaff:h,onlyStaff:r.onlyStaff})):null))}de.defaultProps={id:"search",title:"搜索",onSubmit:function(){},getDefaultUsers:function(){}},de.propTypes={id:i.a.string,title:i.a.string,getDefaultUsers:i.a.func,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func,actionTipText:i.a.oneOfType([i.a.string,i.a.node]),roleSelector:i.a.element};var ye=de,me=r(3683),ve=(r(1378),r(1269)),ge=(r(343),r(171)),be=r(210),we=r.n(be),_e=r(293),Ee=r.n(_e),Oe=r(1356),Se=r(1357),ke=r(350),xe=(r(71),r(35)),je=r(1362),Le=r(1369),Te=r(1376),Pe="failed",Ne="success",De="partial_fail",Ae=function(e){var t,r=e.data,n=r.success_count,a=r.errorsList,i=r.total,c=r.message,u=function(){if(c)return Pe;if(i>0){if(n===i)return Ne;if(n<i&&(null==a?void 0:a.length)>0)return De}return Pe}(),l=[{title:"行数",dataIndex:"rowIndex"},{title:"工号",dataIndex:"work_id"},{title:"错误原因",dataIndex:"message"}],s=(null==a?void 0:a.length)||0;return o.a.createElement("div",{className:(t="batchTip","larkui-member-selector-batch".concat(t?"-".concat(t):""))},function(){if(u===Ne)return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement(je.default,{className:"infoIcon success"})),o.a.createElement("div",{className:"tip"},__("执行了 {total} 条数据导入",{total:i}),"，",__("导入成功 {success_count} 位成员",{success_count:n})));if(u===Pe&&c)return o.a.createElement("div",{className:"tip"},o.a.createElement(Le.default,{className:"infoIcon failed"}),c);var e=a.length>20&&{pageSize:20};return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,u===Pe?o.a.createElement(Le.default,{className:"infoIcon failed}"}):o.a.createElement(Te.default,{className:"infoIcon warning"})),o.a.createElement("div",{className:"tip"},__("执行了 {total} 条数据导入",{total:i}),"，",__("导入成功 {success_count} 位成员",{success_count:n}),"，",__("导入失败 {error_total} 条记录",{error_total:s})),o.a.createElement(xe.a,{dataSource:a,columns:l,pagination:e}))}())};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(){Ie=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ce(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ce(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Re(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ge=ge.a.Dragger,Fe={upload:"upload",uploading:"uploading",uploaded:"uploaded"};function Be(e){var t=e.onCancel,r=e.onSubmit,o=e.visible,a=e.type,i=e.group,c=e.book,u=e.doc,l=Ue(Object(n.useState)(null),2),s=l[0],f=l[1],p=Ue(Object(n.useState)(0),2),h=p[0],d=p[1],y=Ue(Object(n.useState)(Fe.upload),2),m=y[0],v=y[1],g=Ue(Object(n.useState)({}),2),b=g[0],w=g[1],_=Ue(Object(n.useState)(!1),2),E=_[0],O=_[1];function S(){f(null),d(0),v(Fe.upload)}function k(){var e=new FormData;return e.append("file",s),"group"===a&&e.append("group_id",i.id),"book"===a&&(e.append("target_id",c.id),e.append("target_type","Book"),e.append("status","1")),"doc"===a&&(e.append("target_id",u.id),e.append("target_type","Doc"),e.append("status","1")),e.append("onlyStaff","0"),e.append("role","1"),e}function x(e){if("book"===a||"doc"===a){var t=e.success_count,r=e.total,n=e.errorsList;return{success_count:t,total:r,errorsList:void 0===n?[]:n}}if(e.data){var o=e.data,i=o.success_count,c=o.total,u=o.errorsList;return{success_count:i,total:c,errorsList:void 0===u?[]:u}}return{success_count:0,total:0,errorsList:[]}}function j(){var e;return e=Ie().mark((function e(){var t,r,n,o,i;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(Fe.uploading),t=k(),r="group"===a?"/api/group_users/import":"/api/collaborations/import",e.prev=3,e.next=6,Ee.a.post(r,t,{headers:{"x-csrf-token":Object(ke.a)(window,!0)},onUploadProgress:function(e){var t=e.total,r=e.loaded;d(Number(Math.round(r/t*100).toFixed(0)))}});case 6:n=e.sent,o=n.data,i=x(o),w(i),O(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),w({status:400,message:e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message});case 16:v(Fe.uploaded),d(0);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})),j=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Re(a,n,o,i,c,"next",e)}function c(e){Re(a,n,o,i,c,"throw",e)}i(void 0)}))},j.apply(this,arguments)}return{state:{file:s,progress:h,status:m,visible:o,result:b},beforeUpload:function(e){return f(e),!1},handleUpload:function(){return j.apply(this,arguments)},cancel:function(){t(),S(),E&&r()},onSubmit:r,reset:S,finish:function(){window.location.reload()}}}function Me(e){var t,r=Be(e),n=r.state,a=n.file,i=n.status,c=n.progress,u=n.result,l=r.beforeUpload,s=r.handleUpload,f=r.cancel,p=r.reset,h=r.finish;function d(){return a?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement(E.b,{name:"file-excel",size:32})),o.a.createElement("p",null,a.name,"(",we()(a.size),")")):null}function y(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("p",null,__("1、下载模板")),o.a.createElement("div",{className:"desc"},o.a.createElement("span",null,__("根据提示信息完善表格内容")),o.a.createElement(v.a,{className:"downloadBtn",icon:o.a.createElement(Se.default,null),href:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/file/A*UehdSJnpV2YAAAAAAAAAAAAADvuFAQ/%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"},__("下载模板")))),o.a.createElement("div",null,o.a.createElement("p",null,__("2、导入文件")),o.a.createElement(Ge,{beforeUpload:l,accept:".csv,.xlsx,.xls",showUploadList:!1},a?o.a.createElement(o.a.Fragment,null,d(),o.a.createElement("p",null,o.a.createElement(v.a,null,__("重新上传"))," ")):a?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement(E.b,{name:"icon-excel-gray",size:32})),o.a.createElement("p",null,o.a.createElement(v.a,{className:"iconBtn",icon:o.a.createElement(Oe.default,null)},__("上传文件"))),o.a.createElement("div",{className:"info"},__("可直接将文件拖拽到此处进行上传，支持 xlsx、xls、csv 格式"))))),o.a.createElement("div",{className:"footer"},o.a.createElement(v.a,{type:"primary",disabled:!a,onClick:s},__("导入")),o.a.createElement(v.a,{onClick:p},__("取消"))))}return o.a.createElement("div",{className:(t="batchBox","larkui-member-selector-batch".concat(t?"-".concat(t):""))},function(){switch(i){case Fe.uploading:return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"bodyContainer uploading"},d(),o.a.createElement("p",null,o.a.createElement(ve.a,{percent:c,status:"active"}))),o.a.createElement("div",{className:"footer"},o.a.createElement(v.a,{disabled:!0},__("导入中")),o.a.createElement(v.a,{onClick:f},__("取消"))));case Fe.uploaded:return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"bodyContainer uploading"},o.a.createElement(Ae,{data:u})),o.a.createElement("div",{className:"footer"},o.a.createElement(v.a,{onClick:p},__("再次上传")),o.a.createElement(v.a,{type:"primary",onClick:h},__("完成"))));default:return y()}}())}Me.defaultProps={visible:!1},Me.propTypes={visible:i.a.bool};var qe=Me,Ye=(r(1031),r(813)),We=(r(689),r(225)),Ve=(r(270),r(135)),Ke=(r(3209),r(3483)),Qe=r(6),Ze=r.n(Qe);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Je(e){return function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(){$e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==He(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(He(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Xe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function et(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xe(a,n,o,i,c,"next",e)}function c(e){Xe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==He(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||at(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"==typeof e)return it(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ct=function(e){return"larkui-member-selector-list".concat(e?"-".concat(e):"")};function ut(e){return o.a.createElement("div",{className:ct("breadcrumb")},o.a.createElement(Ke.a,null,!e.disableNavTop&&o.a.createElement(Ke.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,r){return o.a.createElement(Ke.a.Item,{key:t.id,onClick:function(r){return function(t,r){e.disabled||e.getData(r)}(0,t)},disabled:e.disabled},t.name)}))))}function lt(e){return o.a.createElement("span",{className:"".concat(ct("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},o.a.createElement("span",{className:"".concat(ct("item-larkicon"))},o.a.createElement(E.b,{name:"lower-level",size:16})),o.a.createElement("span",null,__("下级")))}function st(e){var t=e.item,r=window.appData.isYuque;return t.isTop?o.a.createElement("div",{className:ct("item"),onClick:function(){return e.getData(t)}},o.a.createElement(E.b,{name:"group-type-department",className:"".concat(ct("larkicon")),size:16}),o.a.createElement("span",{className:ct("item-name")},t.name)):o.a.createElement("div",{className:ct("item")},o.a.createElement(We.a,{className:ct("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(r){r.target.checked?e.onSelect(r,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?o.a.createElement(Ve.a,null):o.a.createElement("span",{className:ct("user")},t.avatar_url&&o.a.createElement(w.a,{className:ct("icon"),src:t.avatar_url,size:24}),o.a.createElement("span",null,o.a.createElement("span",{className:ct("title")},o.a.createElement("span",{className:ct("name")},t.name),r&&t.login&&o.a.createElement("span",{className:ct("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.login,!t.sub&&o.a.createElement(o.a.Fragment,null,")")),!r&&t.lastName&&o.a.createElement("span",{className:ct("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.lastName,!t.sub&&o.a.createElement(o.a.Fragment,null,")")))))),t.sub&&o.a.createElement("div",{className:ct("item-action")},o.a.createElement(lt,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function ft(e){var t=ot(Object(n.useState)(!1),2),r=t[0],o=t[1],a=ot(Object(n.useState)([]),2),i=a[0],c=a[1],u=ot(Object(n.useState)(!1),2),l=u[0],s=u[1],f=ot(Object(n.useState)(e.enableSelectNav),1)[0],p=ot(Object(n.useState)(!1),2),h=p[0],d=p[1],y=ot(Object(n.useState)([]),2),m=y[0],v=y[1],g=e.onlyStaff,b=function(t){var r,n,o=t;return g&&null!==(r=o)&&void 0!==r&&r.length&&(o=o.filter((function(e){var t=e.work_id||e.workid;return!t||!t.startsWith("WB")}))),(null===(n=o)||void 0===n?void 0:n.map((function(t){var r=e.checkValid(t);return rt(rt({},t),{},{_valid:r&&"success"===r.status})})))||[]},w=function(t,r,n){var o=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&n){var a,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=at(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(i.s();!(a=i.n()).done;){if(o[a.value.uid])return b(r).map((function(e){return rt(rt({},e),{},{checked:!0,disabled:!0})}))}}catch(e){i.e(e)}finally{i.f()}}return b(r).map((function(e){var r=t.find((function(t){return t.uid===e.uid}));return rt(rt({},e),{},{checked:r&&e._valid})}))}(e.selected,m,i),_=function(e){var t=e.some((function(e){return e.checked})),r=!e.some((function(e){return!(e.checked||h||!1===e._valid)}));return{allChecked:r,allDisabled:e.every((function(e){return e.disabled})),allIndeterminate:!r&&t}}(w),E=_.allChecked,O=_.allDisabled,S=_.allIndeterminate,k=function(e){return et($e().mark((function t(){var r,n,a,i,u,l=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o(!0),n=l.length,a=new Array(n),i=0;i<n;i++)a[i]=l[i];return t.next=4,e.apply(void 0,a);case 4:u=t.sent,a&&a[0]&&a[0].getTop?s(!1):(null===(r=u.users)||void 0===r?void 0:r.length)>0?s(!0):s(!1),c(u.navs),v(u.users),o(!1);case 9:case"end":return t.stop()}}),t)})))},x=k(e.getData),j=k(e.getInitData);Object(n.useEffect)((function(){j()}),[]);return{state:{list:w,navs:i,showAll:l,showNavSelect:f,loading:r,allChecked:E,allIndeterminate:S,allDisabled:O,navSelectChecked:h,enableMemberTypeSwitch:e.enableMemberTypeSwitch,onlyStaff:e.onlyStaff},getData:x,handleSelect:function(t,r){t.target.checked&&e.enableDepthAll&&r.sub?(v(Je(m).map((function(e){return e.id===r.id?e.loading=!0:e.loading=!1,e}))),e.getData(r.sub).then((function(t){v(Je(m).map((function(e){return e.loading=!1,e}))),r.name=t.name,e.onSelect(r)}))):e.onSelect(r)},handleAllSelect:function(t){t.target.checked?e.onSelect(w):e.onDeselect(w)},handleRoleChange:function(e){x({role:e.value})},handleNavSelect:function(t,r){t.target.checked?(d(!0),e.onSelect(r)):(d(!1),e.onDeselect(r))},handleMemberTypeChange:function(t){var r;null===(r=e.setOnlyStaff)||void 0===r||r.call(e,t)}}}function pt(e){var t=ft(e),r=t.state,n=t.handleAllSelect,a=t.handleSelect,i=t.handleNavSelect,c=t.handleRoleChange,u=t.getData,l=t.handleMemberTypeChange,s=e.getFilterRoles&&e.getFilterRoles(),f=r.navs&&r.navs[r.navs.length-1];return o.a.createElement("div",{className:Ze()("".concat(e.className," ").concat(ct()),nt({},ct("member-switch"),r.enableMemberTypeSwitch))},o.a.createElement("div",{className:Ze()(nt({},ct("member-switch-inner"),r.enableMemberTypeSwitch))},s&&o.a.createElement("div",{className:ct("role-filter")},o.a.createElement(N,{roles:s,onChange:c})),r.navs&&r.navs.length?o.a.createElement(ut,{getData:u,navs:r.navs,disabled:r.navSelectChecked,disableNavTop:e.disableNavTop}):null,r.showNavSelect&&f&&o.a.createElement("div",{className:ct("select-dep")},o.a.createElement(We.a,{onChange:function(e){return i(e,f)}},o.a.createElement("span",{className:ct("select-dep-name")},__("选择{dep}所有成员",{dep:f.name})))),r.showAll&&!r.loading?o.a.createElement("div",{className:ct("select-all")},o.a.createElement(We.a,{onChange:function(e){return n(e)},indeterminate:r.allIndeterminate,checked:r.allChecked||r.navSelectChecked,disabled:r.allDisabled||r.navSelectChecked},__("全选（本页面上的人员）"))):null,o.a.createElement(Ye.a,{className:ct("list"),justify:"block",dataSource:r.list,loading:r.loading,locale:{emptyText:"outsourcer"===e.id?o.a.createElement("div",{className:ct("empty-view")},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("p",null,__("暂无外部联系人"))):o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(st,{onSelect:a,onDeselect:e.onDeselect,item:t,getData:u,disabled:r.navSelectChecked||!1===t._valid,disabledSub:r.navSelectChecked})}})),r.enableMemberTypeSwitch&&o.a.createElement("div",{className:ct("member-type-switch-container")},o.a.createElement(g.a,{checked:r.onlyStaff,disabled:r.loading,size:"small",onChange:l})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}pt.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},pt.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var ht=pt,dt=function(e){return"larkui-member-selector-import".concat(e?"-".concat(e):"")};function yt(e){var t=e.getUploadProps(),r=e.getBtnText();return o.a.createElement("div",{className:dt()},o.a.createElement("p",{className:dt("desc")},o.a.createElement("span",null,o.a.createElement("a",{href:e.templateUrl},__("下载模板文件（import_users.txt）")),__("填写人员信息，")),o.a.createElement("span",null,r)),o.a.createElement("div",null,o.a.createElement(ge.a,t,o.a.createElement(v.a,null,o.a.createElement(Oe.default,null)," ",__("选择文件并提交")))))}yt.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},yt.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var mt=yt;function vt(e){var t,r=ce(e),n=r.state,a=r.getRef,i=r.getUsers,c=r.userHandleChange;return o.a.createElement("div",null,o.a.createElement(K,{userClassType:e.userClassType,isLiteSearchSelector:e.isLiteSearchSelector,keyField:"uid",getRef:a,selectedUsers:n.selected,value:null===(t=n.selected)||void 0===t?void 0:t.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:i,onChange:c,notFoundContent:e.notFoundContent,placeholder:__("输入成员名字搜索添加")}))}vt.defaultProps={onChange:function(){}},vt.propTypes={userClassType:i.a.string,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onChange:i.a.func};var gt=vt,bt={groups:"DingTalkGroupSelector-module_groups_GrxWm",checkbox:"DingTalkGroupSelector-module_checkbox_ryHx-",user:"DingTalkGroupSelector-module_user_e26Pr",avatar:"DingTalkGroupSelector-module_avatar_7hoxt",name:"DingTalkGroupSelector-module_name_xw1v1"};function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function _t(){_t=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==wt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(wt(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Et(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?St(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kt(e){var t=Ot(Object(n.useState)([]),2),r=t[0],o=t[1],a=Ot(Object(n.useState)(!0),2),i=a[0],c=a[1],u=function(){var t,r=(t=_t().mark((function t(){var r,n;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.biz.getInitData();case 2:r=t.sent,n=r.users,o(n),c(!1);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){Et(a,n,o,i,c,"next",e)}function c(e){Et(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(n.useEffect)((function(){u()}),[]),{state:{loading:i,dingTalkGroups:r}}}function xt(e){var t=e.item;return o.a.createElement("div",null,o.a.createElement(We.a,{value:t.uid,onChange:function(r){r.target.checked?e.onSelect(t):e.onDeselect(t)},disabled:t.disabled,className:bt.checkbox},o.a.createElement("span",{className:bt.user},t.avatar_url&&o.a.createElement(w.a,{className:bt.avatar,src:t.avatar_url,size:24}),o.a.createElement("span",{className:bt.name,title:t.name},t.name))))}var jt=function(e){var t=kt({biz:e.biz}).state,r=t.dingTalkGroups,n=t.loading;return o.a.createElement("div",{className:bt.groups},o.a.createElement(Ye.a,{dataSource:r,loading:n,locale:{emptyText:o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(xt,{item:t,onSelect:e.onSelect,onDeselect:e.onDeselect})}}))};function Lt(e){return o.a.createElement(d,{ref:e.titleRef,selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}Lt.ListSelector=ht,Lt.SearchSelector=ye,Lt.InviteSelector=me.a,Lt.BatchSelector=qe,Lt.ImportSelector=mt,Lt.LiteSearchSelector=gt,Lt.DingTalkGroupSelector=jt,Lt.propTypes={titleRef:i.a.object,selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=Lt},3627:function(e,t,r){"use strict";var n=r(55),o=r.n(n),a=r(88),i=function(e){return e.AntDingTalkGroup="AntDingTalkGroup",e.BucUser="BucUser",e}({}),c=r(435),u=r(97),l=r(2869),s=r.n(l),f=r(48),p=r(3345),h=r(92);var d=r(3623),y=r(3384);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(){w=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function g(){}function b(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(E=S);var k=_.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==m(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return b.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(j.prototype),l(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function _(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function E(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function j(e,t,r){return t=T(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function N(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var A=new o.a("user:search_selector:biz"),C=y.memberSelectorType.GROUP,I=y.memberSelectorType.BOOK,R=y.memberSelectorType.DOC,U=y.memberSelectorType.SIMPLE_WITH_ROLE,z=y.memberSelectorType.LIST,G=y.memberSelectorType.SIMPLE,F=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(r=j(this,t,[e]),"_getSubmitBaseParams",(function(){return r.type===C?{group_id:r.target_id}:r.type===I||r.type===R?{target_id:r.target_id,target_type:r.target_type,status:c.STATUS.joined}:r.type===z?{list_id:r.target_id}:{}})),N(r,"getRealUsers",function(){var e=k(w().mark((function e(t){var n,o,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.dataSourceServices){e.next=2;break}return e.abrupt("return",t);case 2:n=_(r.dataSourceServices),e.prev=3,n.s();case 5:if((o=n.n()).done){e.next=13;break}if(!(a=o.value).getRealUsers){e.next=11;break}return e.next=10,a.getRealUsers(t);case 10:t=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),N(r,"getUserCount",(function(e){var t;if(r.dataSourceServices){var n,o=_(r.dataSourceServices);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.getUserCount){t=a.getUserCount(e);break}}}catch(e){o.e(e)}finally{o.f()}}return void 0===t&&null!=e&&e.length?e.length:t||0})),N(r,"submit",function(){var e=k(w().mark((function e(t,n,o){var a,u,l,p,h,d,y,m,v,g,_;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=null,h=[],window.appData.isYuque||((p=t.find(r.isDepartment))&&(t=t.filter((function(e){return!r.isDepartment(e)}))),t.forEach((function(e){e.origin_type===i.AntDingTalkGroup&&h.push(e.origin_id)})),t=t.filter((function(e){return"AntDingTalkGroup"!==e.origin_type}))),A("[search_selector.submit] data: ",{target_type:r.target_type,dingTalkGroupsIds:h,department:p,users:t}),e.next=6,r.getRealUsers(t);case 6:if(t=e.sent,A("[submit] real users: ",{users:t}),d=s()(b(b({},r._getSubmitBaseParams()),{},{users:r.serializeUserPostBody(t),department_id:null===(a=p)||void 0===a?void 0:a.id,onlyStaff:o})),n&&(d.role=n.value),y=null,m=0,A("[submit]add users params: ",d),!(d.users.length>0||d.department_id)){e.next=22;break}return e.next=16,r.createProxy(d);case 16:if(y=e.sent,A("[submit]add users result: ",y),"Group"!==r.target_type){e.next=21;break}if(!(y.success_count<=0&&y.errors&&y.errors.length>0)){e.next=21;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:y.errors.map((function(e){return e.name})).join(", "),message:y.message}),data:y});case 21:m=Array.isArray(y)?y.length:y.success_count||0;case 22:if(!(["Book","Doc"].includes(r.target_type)&&h.length>0)){e.next=30;break}return e.next=25,f.a.collaborations.addDingTalkGroup({target_type:d.target_type,target_id:d.target_id,dingtalk_group_ids:h,role:d.role||c.ROLE.readonly});case 25:v=e.sent,m+=v.length,A("[submit]add dingtalk group result: ",v),y=(y=y||[]).concat(v);case 30:if(0!==(null===(u=y)||void 0===u?void 0:u.success_count)&&0!==(null===(l=y)||void 0===l?void 0:l.length)){e.next=34;break}if(g=o?__("已限制仅添加正式员工,请检查选择成员是否正式员工或者已经被添加"):__("选择的成员已被添加"),o){e.next=34;break}return e.abrupt("return",{status:"warn",message:g,data:y});case 34:return _="",_=["Book","Doc"].includes(r.target_type)?__("成功添加了 {count} 个协作者",{count:m}):__("成功添加了 {count} 个成员",{count:m}),e.abrupt("return",{status:"success",message:_,data:y});case 37:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),N(r,"checkValid",(function(e){return r.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),N(r,"searchUser",function(){var e=k(w().mark((function e(t){var n,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={q:t}).include_unconfirmed_corp_account=!0,window.appData.organization&&(n.optional_properties="profile"),e.next=5,f.a.users.complete(n);case 5:return o=e.sent,e.abrupt("return",r.dealUsers(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N(r,"searchUsersByIds",function(){var e=k(w().mark((function e(t){var n,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:t},e.next=3,f.a.users.listByIds(n);case 3:return o=e.sent,e.abrupt("return",r.dealUsers(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N(r,"dealUsers",(function(e){return e=e.map((function(e){return r.setUid(e),e.type="User",e.profile&&e.profile.status===a.STATUS.joined&&(e.dep=e.profile.department||u.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar||e.avatar_url),e}))})),r.dataSourceServices=e.dataSourceServices,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.init(),r}}],(n=[{key:"init",value:function(){var e;this.type===C?(this.group.members&&(this.members=Object(d.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=f.a.groupUsers.create):this.type===I?(this.book.collaborators&&(this.members=Object(d.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=f.a.collaborations.create):this.type===R?(this.doc.collaborations&&(this.members=Object(d.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=f.a.collaborations.create,this.abilities=this.doc.abilities):[U,G].includes(this.type)&&(this.members=[].concat(v(this.members),[this.me])),this.status="organization"===(e=this.type)?a.default.STATUS:"group"===e?h.default.STATUS:"book"===e||"doc"===e?c.default.STATUS:void 0}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(d.b)(t,e)}))}}])&&x(r.prototype,n),o&&x(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);N(F,"id","search"),N(F,"title",__("搜索添加"));t.a=F},3628:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(59),i="OrgSearchNotFound-module_container_MlZtJ",c="OrgSearchNotFound-module_icon_oJoZx",u="OrgSearchNotFound-module_content_CgmVs",l="OrgSearchNotFound-module_goToContacts_mFsnK";t.a=function(e){var t,r=window.appData.organization;return o.a.createElement("div",{className:i},o.a.createElement("div",{className:c},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ",width:80})),o.a.createElement("p",{className:u},__("空间内无相关搜索结果")),(null==r||null===(t=r.abilities)||void 0===t?void 0:t.destroy)&&o.a.createElement("a",{className:l,target:"_blank",href:"/r/organizations/dashboard/contacts"},__("管理空间通讯录"),o.a.createElement(a.b,{name:"arrow-right",size:16})))}},3637:function(e,t,r){"use strict";r(43);var n=r(10),o=r(0),a=r.n(o),i=r(4),c=r.n(i),u=r(524),l=r(3626),s=r(3627),f=r(3680),p=r(3345);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function y(e,t,r){return t=v(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function b(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],(n=[{key:"check",value:function(){this.target||(this.enable=!1)}}])&&d(r.prototype,n),o&&d(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);b(_,"id","BatchSelector"),b(_,"title",__("批量导入"));var E=_,O=r(291),S=r.n(O),k=r(3422),x=r.n(k),j=r(48),L=r(97),T=r(445);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(D([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==P(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(P(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function C(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,c,"next",e)}function c(e){C(a,n,o,i,c,"throw",e)}i(void 0)}))}}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function U(e,t,r){return t=G(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,z()?Reflect.construct(t,r||[],G(e).constructor):t.apply(e,r))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function B(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}var q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(r=U(this,t,[e]),"enableDepthAll",(function(){return!1})),B(r,"getIconUrl",(function(){var e=window.appData,t=e.isYuque,r=e.corp,n=e.organization,o={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?r?o[r.type]:n&&n.logo:o.buc})),B(r,"getInitData",I(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.mine.department({self:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=9;break}return e.next=6,r.getTopData();case 6:t=e.sent,e.next=10;break;case 9:t=r.getData(n[n.length-1]);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))),B(r,"fetchCache",function(){var e=I(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.cacheFetch[t]){e.next=5;break}return e.next=4,n();case 4:r.cacheFetch[t]=e.sent;case 5:return e.abrupt("return",S()(r.cacheFetch[t]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),B(r,"getData",I(A().mark((function e(){var t,n,o,a,i,c,u,l=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},o=(t=l.length>0&&void 0!==l[0]?l[0]:{}).id,!t.getTop){e.next=9;break}return e.next=6,r.getTopData();case 6:return a=e.sent,n.users=r.adpatUIListData(a),e.abrupt("return",n);case 9:if(!(r.enableDepthAll()&&r.isDepartment(t))&&!r.cacheDepthRes[o]){e.next=15;break}return e.next=13,r.getDataWithDepth(t);case 13:return i=e.sent,e.abrupt("return",i);case 15:return c={id:o},e.next=18,r.fetchCache(o,I(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.users.department(c);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(u=e.sent).parents&&u.parents.forEach((function(e){e&&(r.cacheParent[e.id]=e)})),n=r.serialize(u),r.cacheDeps[o]=n,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))),B(r,"getDataWithDepth",I(A().mark((function e(){var t,n,o,a,i,c,u,l=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=l.length>0&&void 0!==l[0]?l[0]:{}).id,o={id:n,depth:"all"},a=S()(r.cacheDepthRes),a[n]){e.next=12;break}return e.next=8,j.a.users.department(o);case 8:i=e.sent,r.cacheDepthRes=S()(D(D({},r.cacheDepthRes),i)),e.next=13;break;case 12:i=S()(a);case 13:return r.includeUserCount(i),(c=Object.keys(i)).forEach((function(e){var t=i[e].parent;t&&(r.cacheParent[e]=t)})),c.forEach((function(e){var t=i[e];t.parent=r.cacheParent[e],r.cacheDeps[e]=r.serialize(t)})),u=r.cacheDeps[n],t.name&&(u._name=t._name||t.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),B(r,"adpatUIListData",(function(e){return e.map((function(e){var t=r.cacheDeps[e.id];r.setUid(e);var n={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop,lastName:e.lastName};return t&&"user_count"in t&&(n.user_count=t.user_count,n.name="".concat(n._name," (").concat(n.user_count,")")),!e.isTop&&r.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),B(r,"adpatUINavData",(function(e){if(e){var t=[];if(Array.isArray(e))t=e;else{t.push(e);var n=function(e){if(e.parentDepId){var o=r.cacheParent[e.parentDepId];if(!o)return;Array.isArray(o)?t=o.concat(t):(t.unshift(o),n(o))}};n(e)}return t.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),B(r,"getTopData",I(A().mark((function e(){var t,r,n,o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(o=[],0===(null===(r=window.appData.me)||void 0===r?void 0:r.zone_id)&&(o=[{id:T.BUC_ROOT_DEPARTMENTS.ALIBABA,name:__("阿里巴巴"),iconName:"organization",type:"Department"}]),1===(null===(n=window.appData.me)||void 0===n?void 0:n.zone_id)&&(o=[{id:T.BUC_ROOT_DEPARTMENTS.ANTGROUP,name:__("蚂蚁集团"),iconName:"organization",type:"Department"},{id:T.BUC_ROOT_DEPARTMENTS.MYBANK,name:__("网商银行"),iconName:"organization",type:"Department"},{id:T.BUC_ROOT_DEPARTMENTS.OCEANBASE,name:__("OceanBase"),iconName:"organization",type:"Department"}]),(a=t[0])&&(a.iconName="department",a.type="Department",o.push(a)),t=o),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),B(r,"getAllDepUsers",function(){var e=I(A().mark((function e(t){var n,o,a,i,c,u,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!(o=r.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,j.a.user.searchAllDepUsers({id:n});case 6:for(a=e.sent,i=Object.keys(a.data),c=0,u=i;c<u.length;c++)l=u[c],r.cacheDeps[l]=a.data[l];return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B(r,"getDepUsers",function(){var e=I(A().mark((function e(t){var n,o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!(o=r.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,j.a.user.userServices.searchDepUsers({id:n});case 6:return a=e.sent,r.cacheDeps[n]=a.data,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B(r,"getRealUsers",(function(e){return x()(e,"uid")})),r.cacheDeps={},r.cacheParent={},r.cacheFetch={},r.cacheDepthRes={},r.enable=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),r=t,n=[{key:"check",value:function(){L.a.enableAddressbook()&&!L.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(r){var n=e[r];if(!Array.isArray(n)){if(n.user_count=(n.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var r=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!r[e.uid]})).length}(n),n.parent){var o=e[n.parent.parentDepId]||t.cacheDeps[n.parent.parentDepId];o&&(o.user_count=(o.user_count||0)+n.user_count,o.depthUsers=(o.depthUsers||[]).concat(n.users.filter((function(e){return t.isUser(e)}))),e[n.parent.parentDepId]=o,t.cacheDeps[n.parent.parentDepId]=o)}t.cacheDeps[r]=n}}))}}],o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],n&&R(r.prototype,n),o&&R(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);B(q,"id","addrbook"),B(q,"title",__("组织架构")),B(q,"iconName","architecture");var Y=q;function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==W(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(W(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function K(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){K(a,n,o,i,c,"next",e)}function c(e){K(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function H(e,t,r){return t=$(t),function(e,t){if(t&&("object"==W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function ee(e,t,r){return(t=te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}var re=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(e=H(this,t,[r]),"getIconUrl",(function(){return e.organization.logo})),ee(e,"getInitData",Q(V().mark((function t(){var r;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ee(e,"getData",Q(V().mark((function t(){var r,n;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,j.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),ee(e,"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=r.organization||window.appData.organization,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],(n=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&Z(r.prototype,n),o&&Z(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);ee(re,"id","outsourcer"),ee(re,"title",__("外部联系人")),ee(re,"iconName","external-contacts");var ne=re;function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(){ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==oe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(oe(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ie(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ie(a,n,o,i,c,"next",e)}function c(e){ie(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function le(e,t,r){return t=fe(t),function(e,t){if(t&&("object"==oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,se()?Reflect.construct(t,r||[],fe(e).constructor):t.apply(e,r))}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function he(e,t,r){return(t=de(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}var ye=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(e=le(this,t,[r]),"getIconUrl",(function(){return e.organization.logo})),he(e,"getInitData",ce(ae().mark((function t(){var r;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),he(e,"getData",ce(ae().mark((function t(){var r,n;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,j.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),he(e,"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=r.organization||window.appData.organization,e.cache=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],(n=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!L.a.enableContacts()||(this.enable=!1)}}])&&ue(r.prototype,n),o&&ue(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);he(ye,"id","orgMember"),he(ye,"title",__("空间成员"));var me=ye,ve=r(979),ge=r(3619),be=r(3384);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function _e(){_e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==we(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(we(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ee(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ee(a,n,o,i,c,"next",e)}function c(e){Ee(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function ke(e,t,r){return t=je(t),function(e,t){if(t&&("object"==we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xe()?Reflect.construct(t,r||[],je(e).constructor):t.apply(e,r))}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function Te(e,t,r){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}var Ne=be.memberSelectorType.SIMPLE_WITH_ROLE,De=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Te(e=ke(this,t,[r]),"getIconUrl",(function(){return e.group.avatar_url})),Te(e,"getIconName",(function(){return e.group.name})),Te(e,"getFilterRoles",(function(){var t=Object(ge.c)("group");return t.unshift(e.allRoleObj),t})),Te(e,"getInitData",Oe(_e().mark((function t(){var r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),Te(e,"getData",Oe(_e().mark((function t(){var r,n,o,a,i,c=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="role_".concat((r=c.length>0&&void 0!==c[0]?c[0]:{}).role),!e.cache[n]){t.next=4;break}return t.abrupt("return",e.cache[n]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in r&&(o.role=r.role),t.next=8,j.a.groups.users(o);case 8:return a=t.sent,i=e.serialize({users:a}),e.cache[n]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})))),Te(e,"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.group=r.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],(n=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read&&this.type!==Ne||(this.enable=!1)}}])&&Se(r.prototype,n),o&&Se(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);Te(De,"id","groupuser"),Te(De,"title",ve.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),Te(De,"iconName","nav-team1");var Ae=De,Ce=r(88),Ie=r(350);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function ze(e,t,r){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}var Fe=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ze(this,"getUploadProps",(function(){return{name:"file",action:r.action,headers:{"x-csrf-token":Object(Ie.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var r=e.file.response.data;n.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:r.mobiles,members:r.members,temp_members:r.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&n.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),ze(this,"getBtnText",(function(){return r.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}return t=e,o=[{key:"create",value:function(t){var r=new e(t);return r.check(),r.enable&&r.init(),r}}],(r=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===Ce.default.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===Ce.default.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&Ue(t.prototype,r),o&&Ue(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o}();ze(Fe,"id","import"),ze(Fe,"title",__("导入"));var Be=Fe,Me=r(345);function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Ye(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return We(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(){Qe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==qe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qe(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ze(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function He(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ze(a,n,o,i,c,"next",e)}function c(e){Ze(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function $e(e,t,r){return t=et(t),function(e,t){if(t&&("object"==qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,r||[],et(e).constructor):t.apply(e,r))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:t+""}var ot=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rt(r=$e(this,t,[e]),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),rt(r,"enableDepthAll",(function(){return!0})),rt(r,"getInitData",He(Qe().mark((function e(){var t,n,o,a,i,c,u,l,s,f;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.appData.organization,e.next=3,j.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(n=e.sent,o={id:0,name:t.name,type:"Department",parents:[],getTop:!0},n.length)for(o=n[0],null!==(a=n[0])&&void 0!==a&&a.dept_full_path&&(o.parents=null===(c=n[0])||void 0===c?void 0:c.dept_full_path),u=null===(i=o)||void 0===i?void 0:i.parents.findIndex((function(e){return e.id===o.id})),u>=0&&o.parents.splice(u,1),l=0;l<(null===(s=o)||void 0===s||null===(s=s.parents)||void 0===s?void 0:s.length);l++)o.parents[l].parents=o.parents.slice(0,l);return e.next=8,r.getData(o);case 8:return f=e.sent,e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)})))),rt(r,"fetchCache",function(){var e=He(Qe().mark((function e(t,n){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.cacheFetch[t]){e.next=5;break}return e.next=4,n();case 4:r.cacheFetch[t]=e.sent;case 5:return e.abrupt("return",S()(r.cacheFetch[t]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),rt(r,"getDepUsers",function(){var e=He(Qe().mark((function e(t){var n,o,a,i;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,o=t.organization_id,!(a=r.cacheDeps[n])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,j.a.departmentUser.find({department_id:n,organization_id:o,onlyMember:1});case 6:return i=e.sent,r.cacheDeps[n]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),rt(r,"getData",He(Qe().mark((function e(){var t,n,o,a,i,c,u,l,s,f=arguments;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ke({},t=f.length>0&&void 0!==f[0]?f[0]:{}),t){e.next=4;break}return e.abrupt("return",[]);case 4:if(o=t.id,t.getTop&&(o=0),!r.cacheDeps[o]){e.next=8;break}return e.abrupt("return",r.cacheDeps[o]);case 8:return a=window.appData.organization,i=void 0===a?{}:a,e.next=11,j.a.departments.find({parent_id:o,depth:1,withMemberCount:1});case 11:if(c=e.sent,u=t.users){e.next=17;break}return e.next=16,j.a.departmentUser.find({department_id:o,organization_id:i.id,onlyMember:1});case 16:u=e.sent;case 17:return e.next=19,Promise.all(c.map(function(){var e=He(Qe().mark((function e(r){return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.type="Department",r.parents=t.parents.concat(t),void 0!==r.member_count&&(r._name=r.name,r.name="".concat(r.name),r.login="(".concat(__("{num} 人",{num:r.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=Ye(u);try{for(l.s();!(s=l.n()).done;)s.value.type="User"}catch(e){l.e(e)}finally{l.f()}return n.users=c.concat(u),n.parents=t.parents.concat(t),n._name||void 0===n.member_count||(n._name=n.name,n.name="".concat(n.name,"(").concat(__("{num} 人",{num:n.member_count}),")")),((n=r.serialize(n)).member_count||0===o)&&(r.cacheDeps[o]=n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))),rt(r,"adpatUIListData",(function(e){return e.map((function(e){r.setUid(e);var t=r.isUser(e)&&void 0!==e.status&&e.status!==Ce.STATUS.joined;r.disableDepSelect&&r.isDepartment(e)&&(t=!0);var n={uid:r.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:r.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":Me.avatar.department,name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:t,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&r.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),rt(r,"adpatUINavData",(function(e){if(e){var t=[];if(Array.isArray(e))t=e;else{t.push(e);var n=function(e){if(e.parentDepId){var o=r.cacheParent[e.parentDepId];if(!o)return;Array.isArray(o)?t=o.concat(t):(t.unshift(o),n(o))}};n(e)}return t.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),rt(r,"getUserCount",(function(e){var t,n=0,o=Ye(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.isDepartment(a)?a.member_count&&(n+=a.member_count):n+=1}}catch(e){o.e(e)}finally{o.f()}return n})),rt(r,"getRealUsers",function(){var e=He(Qe().mark((function e(t){var n,o,a,i,c,u,l;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Ye(t),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=22;break}if(i=a.value,!r.isDepartment(i)){e.next=19;break}if(!i.depthUsers&&!i.users){e.next=11;break}n=n.concat(i.depthUsers||i.users),e.next=17;break;case 11:return c=i.id,u=i.organization_id,e.next=14,j.a.departmentUser.getAllSubDepartmentUsers({department_id:c,organization_id:u});case 14:l=e.sent,r.setUid(l),n=n.concat(l);case 17:e.next=20;break;case 19:n.push(i);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.abrupt("return",x()(n,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),r.cacheDeps={},r.cacheParent={},r.cacheFetch={},r.cacheDepthRes={},r.enable=!1,r.disableDepSelect=e.disableDepSelect,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r}}],(n=[{key:"check",value:function(){L.a.enableContacts()&&(this.enable=!0)}}])&&Je(r.prototype,n),o&&Je(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);rt(ot,"id","yuque_contacts"),rt(ot,"title",__("组织架构")),rt(ot,"iconName","architecture");var at=ot,it=r(152);function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(){ut=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ct(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ct(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function lt(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function st(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){lt(a,n,o,i,c,"next",e)}function c(e){lt(a,n,o,i,c,"throw",e)}i(void 0)}))}}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vt(n.key),n)}}function pt(e,t,r){return t=dt(t),function(e,t){if(t&&("object"==ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,r||[],dt(e).constructor):t.apply(e,r))}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function yt(e,t){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yt(e,t)}function mt(e,t,r){return(t=vt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vt(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}var gt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mt(r=pt(this,t,[e]),"getIconUrl",(function(){return r.group.avatar_url})),mt(r,"getIconName",(function(){return r.group.name})),mt(r,"getInitData",st(ut().mark((function e(){var t;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getData({offset:0,limit:100});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),mt(r,"getData",st(ut().mark((function e(){var t,n,o=arguments;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,it.webProxy.users.dingTalkGroups(t);case 3:return n=e.sent,e.abrupt("return",{users:r.adaptUIListData(n)});case 5:case"end":return e.stop()}}),e)})))),mt(r,"adaptUIListData",(function(e){return e.map((function(e){return{uid:"".concat(e.origin_type,"_").concat(e.origin_id),id:"",avatar_url:e.avatar_url,name:e.name,user_id:"",work_id:"",login:"",type:"",origin_id:e.origin_id,origin_type:"AntDingTalkGroup"}}))})),r.type=e.type,r.role=e.supportRoles&&e.supportRoles[0],r.target=e[r.type],r.enable=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(t,e),r=t,o=[{key:"create",value:function(e){var r=new t(e);return r.check(),r.enable&&r.init(),r}}],(n=[{key:"init",value:function(){}},{key:"check",value:function(){return!0}},{key:"checkValid",value:function(e){return!0}}])&&ft(r.prototype,n),o&&ft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a);mt(gt,"id","ant_dingtalk_group"),mt(gt,"title",__("蚂蚁钉群")),mt(gt,"iconName","member");var bt=gt,wt=r(205),_t=r(3628);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Lt=be.memberSelectorType.ORGANIZATION,Tt=be.memberSelectorType.GROUP,Pt=be.memberSelectorType.BOOK,Nt=be.memberSelectorType.DOC,Dt=be.memberSelectorType.SIMPLE_WITH_ROLE,At=be.memberSelectorType.LIST,Ct=be.memberSelectorType.SIMPLE;var It=a.a.forwardRef((function(e,t){var r=a.a.useRef(null),i=function(e,t){var r,i={type:e.type};e.organization&&(i.organization=e.organization),e.group&&(i.group=e.group),e.book&&(i.book=e.book),e.doc&&(i.doc=e.doc),e.list&&(i.list=e.list),e.role&&(i.supportRoles=[e.role]),e.members&&(i.members=e.members),e.disableDepSelect&&(i.disableDepSelect=e.disableDepSelect);var c,u=xt(Object(o.useState)(null),2),l=u[0],p=u[1],h=xt(Object(o.useState)(null),2),d=h[0],y=h[1],m=!window.appData.isYuque,v=e.group&&"User"===e.group.type,g=Object(o.useMemo)((function(){return e.type===Lt?null:Y.create(i)}),[i]),b=Object(o.useMemo)((function(){return e.type===Lt?null:at.create(i)}),[i]),w=Object(o.useMemo)((function(){var t=St(St({},i),{},{dataSourceServices:[]});return g&&g.enable&&t.dataSourceServices.push(g),b&&b.enable&&t.dataSourceServices.push(b),e.type===Dt&&(t.me=e.me),s.a.create(t)}),[i]),_=Object(o.useMemo)((function(){return f.a.create(i)}),[i]),O=Object(o.useMemo)((function(){return E.create(i)}),[i]),S=Object(o.useMemo)((function(){return e.type===Lt?null:ne.create(i)}),[i]),k=Object(o.useMemo)((function(){return e.type===Lt?null:me.create(i)}),[i]),x=Object(o.useMemo)((function(){return e.type===Tt||e.type===Lt?null:Ae.create(i)}),[i]),j=Object(o.useMemo)((function(){return e.type!==Lt?null:Be.create(i)}),[i]),L=Object(o.useMemo)((function(){return bt.create(i)}),[i]),T=[],P=[];if(g&&g.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var N=null!=e.enableDepSelect?e.enableDepSelect:g.enableDepSelect();g.componentType="ListSelector",g.componentProps={id:Y.id,title:Y.title,iconName:Y.iconName,getData:g.getData,getInitData:g.getInitData,getIconUrl:g.getIconUrl,getIconName:g.getIconName,enableDepthAll:g.enableDepthAll(),enableSelectNav:N,checkValid:w.checkValid,enableMemberTypeSwitch:!window.appData.isYuque},P.push(g)}if(!b||!b.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(b.componentType="ListSelector",b.componentProps={id:at.id,title:at.title,iconName:at.iconName,getData:b.getData,getInitData:b.getInitData,getIconUrl:b.getIconUrl,getIconName:b.getIconName,enableDepthAll:b.enableDepthAll(),checkValid:w.checkValid,disableNavTop:!0},P.push(b)),k&&k.enable&&(k.componentType="ListSelector",k.componentProps={id:me.id,title:me.title,getData:k.getData,getInitData:k.getInitData,getIconUrl:k.getIconUrl,getIconName:k.getIconName,checkValid:w.checkValid},P.push(k)),S&&S.enable&&(S.componentType="ListSelector",S.componentProps={id:ne.id,title:ne.title,iconName:ne.iconName,getData:S.getData,getInitData:S.getInitData,getIconUrl:S.getIconUrl,getIconName:S.getIconName,checkValid:w.checkValid},P.push(S)),x&&x.enable&&!v&&(x.componentType="ListSelector",x.componentProps={id:Ae.id,title:Ae.title,iconName:Ae.iconName,getData:x.getData,getInitData:x.getInitData,getIconUrl:x.getIconUrl,getIconName:x.getIconName,getFilterRoles:x.getFilterRoles,checkValid:w.checkValid},P.push(x)),_&&_.enable&&(_.componentType="InviteSelector",_.componentProps={id:f.a.id,title:f.a.title,inviteSelectorType:e.type,inviteTarget:e[e.type],group:e.group,organization:e.organization,roleSelectorType:"radio",getJoinUrl:_.getUrl,getToken:_.getToken,updateToken:_.updateToken,deleteTokens:_.deleteTokens,roles:_.validRoles,inviteRoles:d,getCopyText:_.getCopyText,tipContent:l,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:_.getMoreSettingOptions(),toggleTitle:function(e){t&&t.current&&t.current.toggleTitle(e)}},T.push(_)),w&&w.enable){var D;window.appData.organization&&(D=a.a.createElement(_t.a,null));var A=e.roleSelector;w.componentType="SearchSelector",w.componentProps={id:s.a.id,title:s.a.title,searchUser:w.searchUser,getUserCount:w.getUserCount,checkValid:w.checkValid,onSubmit:w.submit,roles:w.validRoles,inviteRoles:d,quickSelectors:P,notFoundContent:D,actionTipText:"book"===e.type?__("权限："):null,roleSelector:A,getDefaultUsers:e.getDefaultUsers||w.searchUsersByIds,afterSubmit:e.afterSubmit},e.type===Ct&&(w.componentProps.disableMeta=g.enableDepSelect(),w.componentProps.onSubmit=e.onSubmit),e.type===Dt&&(w.componentProps.title=e.title,w.componentProps.roles=e.roles,w.componentProps.onSubmit=e.onSubmit,e.initialValues&&(w.componentProps.initialValues=e.initialValues)),T.push(w)}return O&&m&&"doc"!==i.type&&O.enable&&(O.componentType="BatchSelector",O.componentProps={id:E.id,title:E.title,book:i.book,group:i.group,type:i.type,doc:i.doc},T.push(O)),j&&j.enable&&(j.componentType="ImportSelector",j.componentProps={id:Be.id,title:Be.title,role:j.role,getUploadProps:j.getUploadProps,getBtnText:j.getBtnText},T.push(j)),window.appData.isAntDingtalkUser&&L&&L.enable&&(L.componentType="DingTalkGroupSelector",L.componentProps={biz:L,id:L.id,title:bt.title,iconName:bt.iconName},P.push(L)),Object(o.useEffect)((function(){_&&_.enable&&(window.appData.organization&&[Tt,Pt,Nt].includes(e.type)&&_.orgDataReady().then((function(){p(a.a.createElement("div",null,a.a.createElement("span",null,_.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},_.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),_.getInviteAddRoles().then((function(e){y(e)})).catch((function(e){n.a.error(e.message)})))}),[]),null!==(r=e.organization)&&void 0!==r&&r.id||!Object(wt.a)()||[Ct,Dt,Tt].includes(e.type)?c=s.a.id:[Pt,Nt,Lt,At].includes(e.type)&&(c=f.a.id),{enableMemberTypeSwitch:m,selectors:T,quickSelectors:P,defaultTabKey:c,wideTabKey:s.a.id,addrbookSelectorBiz:g,searchSelectorBiz:w,inviteSelectorBiz:_,batchSelectorBiz:O,outsourcerSelectorBiz:S,orgMemberSelectorBiz:k,groupUserSelectorBiz:x,importSelectorBiz:j,yuqueContactsSelectorBiz:b}}(e,r),c=i.selectors,u=i.quickSelectors,p=i.defaultTabKey,h=i.wideTabKey,d=i.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:d}}),[]),!c.length)return null;var y=c.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{titleRef:r,selectors:y,getWidth:function(e){return e===h&&u&&u.length>0||"BatchSelector"===e?720:420},defaultTabKey:p,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));It.defaultProps={disableSelectors:[]},It.propTypes={type:c.a.string,organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool};t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(It)},3669:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(0),o=r(908),a=r(59),i=r(6),c=r.n(i),u="index-module_actions_vhNlZ",l="index-module_actionItem_gm0UP",s="index-module_actionTitle_N9iRs",f="index-module_actionTitleLast_KuIDA",p="index-module_actionMore_8wkrV",h="index-module_actionMoreIcon_5FA3+",d="index-module_actionTitleIcon_XFMgq",y="index-module_actionTitleIconLast_2BO7h";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.settings,r=e.onClick;return n.createElement("div",{className:u},t.map((function(e){return!e.hidden&&n.createElement("div",{className:l,key:e.type,onClick:function(){r(e.type,e.title)}},n.createElement("span",{className:e.noDetail?f:s},n.createElement(a.b,{name:e.icon,className:c()(d,v({},y,e.noDetail)),width:16}),e.title),!e.noDetail&&n.createElement("span",{className:p},e.defaultValue,e.hideArrow?null:n.createElement(o.default,{className:h,width:16,height:16})))})))}},3680:function(e,t,r){"use strict";var n=r(97),o=r(699),a=r(88),i=r(435),c=r(48);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var d="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(A([])));S&&S!==r&&n.call(S,i)&&(E=S);var k=_.prototype=b.prototype=Object.create(E);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,c){var l=h(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=h(t,r,n);if("normal"===l.type){if(o=n.done?v:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(p(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),f(k,s,"Generator"),f(k,i,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function p(e,t,r){return t=d(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return m(e=p(this,t,[].concat(c)),"getUrl",(function(t,r){if(e.joinToken=t||e.joinToken,e.joinToken){if("doc"===e.type){var n="".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token,"&source=doc_collaborator"),o="/".concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/edit");return r&&t.role===i.ROLE.edit?"".concat(n,"&goto=").concat(encodeURIComponent(o)):n}return"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token,"&source=book_collaborator"):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token,"&source=group_collaborator"):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token,"&source=org"):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token,"&source=list_collaborator"):null}})),m(e,"getCopyText",(function(t,r){var n=(e.target.name||e.target.title).replace(/%/g,"%25");return r===i.ROLE.edit?__("{url}# 邀请你共同编辑{typeName}《{targetName}》",{targetName:n,typeName:e.typeName,url:t}):__("{url}# 《{targetName}》",{targetName:n,url:t})})),m(e,"getOrgTipText",(function(){return e.organization?e.canPublic?"book"===e.type?__("获得链接的所有人（含空间外人员）可获得{type}的权限，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:n.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):__("获得链接的所有人（含空间外人员）可加入{type}，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:n.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):"book"===e.type?__("仅获得链接的空间成员可获得{type}的权限。",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}。",{type:e.typeName}):""})),m(e,"getMoreSettingOptions",(function(){return e.organization&&e.organization.id?e.organization.isPremium&&n.a.isYuqueAddressBook()?[{value:a.ROLE.member,label:__("空间成员")},{value:a.ROLE.outsourcer,label:__("外部联系人")}]:e.organization.isPremium&&!n.a.isYuqueAddressBook()?[{value:a.ROLE.outsourcer,label:__("外部联系人")}]:[{value:a.ROLE.member,label:__("空间成员")}]:null})),m(e,"getToken",(function(t){var r=t.approve,n=t.force,i=t.role,c=t.allow_outsider,u=void 0===c?o.ALLOW_OUTSIDER.NORMAL:c,l=t.organization_user_role,s=void 0===l?a.ROLE.member:l;if(e.proxy){var f={id:e.target.id,allow_outsider:u,organization_user_role:s};return null!=r&&(f.approve=r),null!=n&&(f.force=n),null!=i&&(f.role=i),e.proxy.token(f).then((function(t){return e.joinToken=t,t}))}})),m(e,"updateToken",(function(t){var r=t.approve,n=t.role,i=t.allow_outsider,c=void 0===i?o.ALLOW_OUTSIDER.NORMAL:i,u=t.organization_user_role,l=void 0===u?a.ROLE.member:u;if(e.proxy){var s={id:e.target.id,allow_outsider:c,organization_user_role:l};return null!=r&&(s.approve=r),null!=n&&(s.role=n),e.proxy.updateToken(s).then((function(t){return e.joinToken=t,t}))}})),m(e,"deleteTokens",(function(){if(e.proxy)return e.proxy.deleteTokens({id:e.target.id}).then((function(e){return e}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),r=t,u=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=c.a.organizations:"group"===this.type?this.proxy=c.a.groups:"book"===this.type?this.proxy=c.a.books:"doc"===this.type&&(this.proxy=c.a.docs)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(d=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,n.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=d.apply(e,t);function a(e){s(o,r,n,a,i,"next",e)}function i(e){s(o,r,n,a,i,"throw",e)}a(void 0)}))},function(){return v.apply(this,arguments)})}],h=[{key:"create",value:function(e){var r=new t(e);return r.check(),r.enable&&r.init(),r}}],u&&f(r.prototype,u),h&&f(r,h),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,u,h,d,v}(r(3345).a);m(g,"id","invite"),m(g,"title",__("邀请添加")),t.a=g},3683:function(e,t,r){"use strict";r(812);var n=r(340),o=(r(270),r(135)),a=(r(36),r(8)),i=(r(52),r(12)),c=(r(1031),r(813)),u=(r(693),r(379)),l=(r(43),r(10)),s=r(0),f=r.n(s),p=r(4),h=r.n(p),d=r(1491),y=r(6),m=r.n(y),v=r(59),g=r(185),b=r.n(g),w=r(406),_=r.n(w),E=r(141),O=r(271),S=r(3669),k=(r(170),r(70)),x=(r(187),r(34)),j=r(48),L=r(908),T=r(3364),P=r(699),N=r(3458);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.organization,r=e.panelType,n=e.panelTitle,o=e.state,a=e.moreSettingOptions,i=e.handleRoleTypeChange,c=e.handleMemberTypeChange,l=e.handleAllowOutsiderChange,f=e.handleCheckChange,p=e.onBack,h=D(s.useState(!1),2),y=h[0],v=h[1];s.useEffect((function(){!(!t||null==t||!t.id)&&j.a.organizations.getPermissions({id:t.id}).then((function(e){v(e.indirect_add_org_member)}))}),[t]);var g;return s.createElement("div",{className:N.a.shareDetailSettingPanel},s.createElement("div",{className:N.a.title,onClick:p},s.createElement(L.default,{className:N.a.backIcon,width:20,height:20}),(g=n,"needCheckSet"===r?__("审批确认"):g)),function(e){switch(e){case"groupMemberSet":return n=T.b.actions,p=T.b.desc,s.createElement(s.Fragment,null,s.createElement("p",{className:N.a.titleDesc},p),n.map((function(e){return s.createElement("div",{className:m()(N.a.contentArea,N.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},s.createElement("span",null,e.label),o.roleType===e.value&&s.createElement(d.default,{className:N.a.selectorIcon,width:16,height:16}))})));case"collaborationSet":return function(){var e=T.e.actions,t=T.e[o.targetType.toUpperCase()];return s.createElement(s.Fragment,null,s.createElement("p",{className:N.a.titleDesc},t),e.map((function(e){return s.createElement("div",{className:m()(N.a.contentArea,N.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},s.createElement("span",null,e.label),o.roleType===e.value&&s.createElement(d.default,{className:N.a.selectorIcon,width:16,height:16}))})))}();case"allowOutsiderSet":return function(){var e,r=["Book","Doc"].includes(o.targetType)?T.j.descBookDoc:T.j.descGroup,n=x.a.Option;1===(null==a?void 0:a.length)?e=s.createElement("span",null,a[0].label):(null==a?void 0:a.length)>1&&(e=s.createElement(x.a,{defaultValue:o.memberType,bordered:!1,onChange:c},null==a?void 0:a.map((function(e){return s.createElement(n,{value:e.value},e.label)}))));var i=s.createElement("div",{className:N.a.contentArea},s.createElement("span",{className:N.a.switchTitle},T.j.action),s.createElement(u.a,{disabled:!y,onChange:l,checked:o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW}));return s.createElement(s.Fragment,null,s.createElement("p",{className:N.a.titleDesc},r),s.createElement(k.a,{title:y?"":T.j.tip(t),placement:"bottomRight",autoAdjustOverflow:!0},i),(null==a?void 0:a.length)&&o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW&&s.createElement("div",{className:N.a.selectOption},__("空间外人员将自动成为"),e))}();case"needCheckSet":return r=["Book","Doc"].includes(o.targetType)?T.l.descBookDoc:T.l.descGroup,s.createElement(s.Fragment,null,s.createElement("p",{className:N.a.titleDesc},r),s.createElement("div",{className:N.a.contentArea},s.createElement("span",{className:N.a.switchTitle},T.l.action),s.createElement(u.a,{onChange:f,checked:o.approve===P.APPROVE.need})));default:return null}var r,n,p}(r))},I=r(3475),R=r(511),U=r(696),z=r.n(U),G=r(435),F=r(92),B=r(88),M=r(205),q=r(3384);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function W(){W=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Y(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function V(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t,r,n,o){if("get"===e)try{return JSON.parse(E.a.get("joinToken"))["".concat(t,"-").concat(r,"-").concat(n)]}catch(e){return null}if("save"===e){var a=JSON.parse(E.a.get("joinToken"))||{},i=Object.keys(a);20!==i.length||"".concat(t,"-").concat(r,"-").concat(n)in a||delete a[i[0]],a["".concat(t,"-").concat(r,"-").concat(n)]=b()(o,["role","approve","allow_outsider","organization_user_role"]),E.a.set("joinToken",JSON.stringify(a))}}function H(e){var t,r,n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isEditing;if(t)return e.getJoinUrl(t,r)},o=_()(e.inviteSelectorType),a=null===(t=e.inviteTarget)||void 0===t?void 0:t.id,i=Z("get",o,a,e.inviteModalContent);r=e.inviteSelectorType===q.memberSelectorType.GROUP?F.ROLE.member:e.isEditing||"inviteModal"===e.inviteModalContent?G.ROLE.edit:G.ROLE.readonly;var c=K(f.a.useState(i?i.role:r),2),u=c[0],s=c[1],p=K(f.a.useState(i?i.allow_outsider:P.ALLOW_OUTSIDER.NORMAL),2),h=p[0],d=p[1],y=P.APPROVE.noneed,m=K(f.a.useState(i?i.approve:y),2),v=m[0],g=m[1],b=K(f.a.useState(),2),w=b[0],E=b[1],O=K(f.a.useState(!1),2),S=O[0],k=O[1],x=K(f.a.useState(i?i.organization_user_role:B.ROLE.member),2),j=x[0],L=x[1],T=f.a.useRef(!1),N=function(t){return k(!0),e.getToken({approve:v,force:t,role:u,allow_outsider:h,organization_user_role:j}).then((function(t){return g(t.approve),s(t.role),d(t.allow_outsider),L(t.organization_user_role),E(n(t)),Z("save",o,a,e.inviteModalContent,t),k(!1),t})).catch((function(e){k(!1),l.a.error(e.message)}))};f.a.useEffect((function(){N()}),[]);var D=function(){var t,r=(t=W().mark((function t(){return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,e.deleteTokens();case 3:return t.abrupt("return",N(!0).then((function(){setTimeout((function(){k(!1),l.a.success(__("重置邀请链接成功"))}),500)})).catch((function(){k(!1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){V(a,n,o,i,c,"next",e)}function c(e){V(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{joinUrl:w,loading:S,targetType:o,roleType:u,allowOutsider:h,approve:v,memberType:j},onCopyUrl:function(t){var r=e.getCopyText(w,u);t.currentTarget&&t.currentTarget.setAttribute("data-url",r),z()(r,{format:"text/plain"}),l.a.success(__("链接已复制"))},onRefreshLink:D,onCheckChange:function(t){var r=t?P.APPROVE.need:P.APPROVE.noneed;e.updateToken({approve:r,role:u,allow_outsider:h,organization_user_role:j}).then((function(){g(r),Z("save",o,a,e.inviteModalContent,{allow_outsider:h,approve:r,organization_user_role:j,role:u}),T.current=!0})).catch((function(e){l.a.error(e.message)}))},onAllowOutsiderChange:function(t){var r=t?P.ALLOW_OUTSIDER.ALLOW:P.ALLOW_OUTSIDER.NORMAL;e.getToken({approve:v,role:u,allow_outsider:r,organization_user_role:j}).then((function(t){d(t.allow_outsider),E(n(t)),Z("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){l.a.error(e.message)}))},onMemberTypeChange:function(t){e.getToken({approve:v,role:u,allow_outsider:h,organization_user_role:t}).then((function(t){L(t.organization_user_role),E(n(t)),Z("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){l.a.error(e.message)}))},onRoleTypeChange:function(t){e.getToken({approve:v,role:t,allow_outsider:h,organization_user_role:j}).then((function(t){s(t.role),E(n(t)),Z("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){l.a.error(e.message)}))},triggerFakeLoading:function(){T.current&&(k(!0),setTimeout((function(){k(!1)}),500),T.current=!1)}}}function J(e){var t,r,l,s,p,h=e.moreSettingOptions,y=e.inviteModalContent,g=e.onBackShare,b=e.toggleTitle,w=e.toggleCollaboratorList,_=e.organization,E=e.group,k=e.inviteSelectorType,x=H(e),j=x.state,L=x.onCopyUrl,D=x.onRefreshLink,A=x.onCheckChange,U=x.onAllowOutsiderChange,z=x.onMemberTypeChange,B=x.onRoleTypeChange,Y=x.triggerFakeLoading,W=K(f.a.useState(!1),2),V=W[0],Q=W[1],Z=K(f.a.useState(""),2),J=Z[0],$=Z[1],X=K(f.a.useState(""),2),ee=X[0],te=X[1],re=K(f.a.useState(!1),2),ne=re[0],oe=re[1],ae=K(f.a.useState(!1),2),ie=ae[0],ce=ae[1],ue=f.a.useMemo((function(){var e=null!=_&&_.id?R.a.ORG:R.a.PERSON;return Object(M.a)()?e:R.a.INTERNAL}),[_]),le=[{type:"collaborationSet",title:__("协作权限"),defaultValue:j.roleType===G.ROLE.edit?__("可编辑"):__("可阅读"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:!(ue===R.a.ORG&&k===q.memberSelectorType.BOOK),defaultValue:j.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:j.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-verify"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],se=[{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:f.a.createElement(u.a,{onChange:A,checked:j.approve===P.APPROVE.need}),icon:"icon-verify",hideArrow:!0},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],fe=[{type:"groupMemberSet",title:__("人员角色"),defaultValue:j.roleType===F.ROLE.member?__("成员"):__("只读成员"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:Object(O.h)(E,_)||ue===R.a.INTERNAL,defaultValue:j.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:j.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-approval"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],pe=Object(O.g)(E)?fe.filter((function(e){return"allowOutsiderSet"!==(null==e?void 0:e.type)})):fe,he=function(e,t){"inviteModal"===y&&b(!1),"collaboratorPanel"===y&&w(!1),Q(!0),$(e),te(t)};return f.a.createElement("div",{className:I.a.sharePanel},V?f.a.createElement(C,{organization:_,panelType:J,panelTitle:ee,state:j,moreSettingOptions:h,handleRoleTypeChange:B,handleMemberTypeChange:z,handleAllowOutsiderChange:U,handleCheckChange:A,onBack:function(){"inviteModal"===y&&b(!0),"collaboratorPanel"===y&&w(!0),Q(!1),Y()}}):f.a.createElement(f.a.Fragment,null,"inviteModal"===y&&(r=k===q.memberSelectorType.GROUP,l=Object(O.g)(E)?__("拿到链接的人可成为公开页成员、只读成员"):__("拿到链接的人可成为团队成员、只读成员"),s=r?__("通过链接邀请添加成员"):__("通过链接邀请参与协作"),p=r?l:__("拿到链接的人可获得编辑、阅读等权限"),f.a.createElement("div",{className:I.a.main},f.a.createElement("div",{className:I.a.mainIntro},f.a.createElement(c.a.Item,{className:I.a.inviteItem},f.a.createElement(c.a.Item.Meta,{avatar:f.a.createElement(v.b,{className:m()(I.a.itemIcon,I.a.appointIcon),name:"nav-invite",width:40}),title:s,description:p}))),f.a.createElement("div",{className:I.a.moreConfigs},f.a.createElement(o.a,{spinning:j.loading,delay:150},f.a.createElement("div",{className:I.a.shareLinkSet},f.a.createElement(i.a,{className:I.a.shareLinkShow,disabled:!0,placeholder:j.joinUrl}),f.a.createElement(a.a,{className:I.a.shareButton,onClick:function(e){j.loading||L(e)}},__("复制链接")))),f.a.createElement(S.a,{settings:r?pe:le,onClick:function(e,t){"resetLinkSet"===e?D():he(e,t)}})))),"inviteSharePanel"===y&&(t=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:j.roleType===G.ROLE.edit?__("编辑"):__("阅读")}),f.a.createElement("div",{className:N.a.shareDetailSettingPanel},f.a.createElement("div",{className:N.a.title,onClick:function(){return g()}},f.a.createElement(v.b,{className:N.a.backIcon,name:"arrow-down",width:20}),__("链接添加协作者")),f.a.createElement("p",{className:N.a.linkTitleDesc},t),f.a.createElement(o.a,{spinning:j.loading,delay:150},f.a.createElement("div",{className:N.a.linkContentArea},f.a.createElement(i.a,{className:N.a.copyLink,disabled:!0,placeholder:j.joinUrl}),f.a.createElement(a.a,{className:N.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){j.loading||L(e)}},__("复制链接")))),f.a.createElement("div",{className:N.a.moreConfigSettings},f.a.createElement(S.a,{settings:le,onClick:function(e,t){"resetLinkSet"===e?D():he(e,t)}})))),"collaboratorPanel"===y&&function(){var e,t=__("可{linkAbility}",{linkAbility:j.roleType===G.ROLE.edit?__("编辑"):__("阅读")});return f.a.createElement("div",{className:m()(N.a.shareDetailSettingPanel,I.a.inviteSelector),id:"collaborator"},f.a.createElement(n.a,{overlay:(e=T.e.actions,f.a.createElement(f.a.Fragment,null,e.map((function(e){return f.a.createElement("div",{className:m()(N.a.contentArea,N.a.selectorItem),key:e.key,onClick:function(){B(e.value)}},f.a.createElement("div",null,f.a.createElement("div",{className:N.a.label},e.label),f.a.createElement("div",{className:N.a.desc},e.desc)),j.roleType===e.value&&f.a.createElement(d.default,{className:N.a.selectorIcon,width:16,height:16}))})))),trigger:["click"],getPopupContainer:function(){return document.getElementById("collaborator")||document.body}},f.a.createElement("p",{className:N.a.linkTitleDesc,style:{marginTop:0},onClick:function(){return ce((function(e){return!e}))}},__("设置协作者权限")," ",f.a.createElement("span",null,t),f.a.createElement(v.b,{name:"arrow-down",className:m()(N.a.expandIcon,N.a.expandIconColor),"data-activated":ie,size:18}))),f.a.createElement(o.a,{spinning:j.loading,delay:150},f.a.createElement("div",{className:N.a.linkContentArea},f.a.createElement(i.a,{className:N.a.copyLink,disabled:!0,placeholder:j.joinUrl}),f.a.createElement(a.a,{className:N.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){j.loading||L(e)}},__("复制链接")))),f.a.createElement("div",{className:N.a.moreConfigToggler},f.a.createElement("span",{className:N.a.moreConfigsTip,onClick:function(){return oe((function(e){return!e}))}},__("高级设置"),f.a.createElement(v.b,{name:"arrow-down",className:N.a.expandIcon,"data-activated":ne,size:16}))),ne&&f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:N.a.moreConfigSettings},f.a.createElement(S.a,{settings:se,onClick:function(e){"resetLinkSet"===e&&D()}}))))}()))}J.propTypes={getJoinUrl:h.a.func,getToken:h.a.func,updateToken:h.a.func,deleteTokens:h.a.func,getCopyText:h.a.func,inviteSelectorType:h.a.string,inviteModalContent:h.a.oneOf(["inviteModal","inviteSharePanel","collaboratorPanel"]),onBackShare:h.a.func,toggleCollaboratorList:h.a.func,toggleTitle:h.a.func,moreSettingOptions:h.a.array,organization:h.a.object,group:h.a.object,isEditing:h.a.bool,inviteTarget:h.a.object},J.defaultProps={inviteModalContent:"inviteModal"};t.a=J},3716:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}}}]);