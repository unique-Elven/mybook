/*! For license information please see c__DocActionMenu~c__ImportBookModal.473809c0.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2716:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function i(t,e,r){return e=c(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,r||[],c(t).constructor):e.apply(t,r))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}t.exports=function(t){for(var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),r=e,n&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(t),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach((function(t){!function(t,e){Object.getOwnPropertyNames(e).forEach((function(r){if("constructor"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}}))}(e.prototype,t.prototype)})),e}},3635:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__=e},(e=[{key:"_stringify",value:function(t){return null==t||"number"==typeof t&&isNaN(t)?t="":"string"!=typeof t&&(t=String(t)),t}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.BaseValidatorClass=i},3665:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=r(1067),u=r(345),c=r(2716),l=r(3635).BaseValidatorClass,s=r(3697).MobileValidatorClass,f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"httpURL",value:function(t){t=this._stringify(t);try{var e=new URL(t);if("https:"!==e.protocol&&"http:"!==e.protocol)throw new Error("protocol error")}catch(t){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(t){if(!(t=this._stringify(t))||!i.isAlphanumeric(t))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("必须都是数字字符")}},{key:"decimal",value:function(t){if(!(t=this._stringify(t))||!i.isDecimal(t))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(t,e){if("string"!=typeof t)return this.__("必须是字符串");if(!i.isNumeric(t))return this.__("必须都是数字字符");var r=e&&e.min||4;return t.length<r?this.__("至少 {s} 个数字",{s:r}):void 0}},{key:"IP",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("public 参数只允许是 0、1 或者 2");t=parseInt(t)}var e=u.book.PUBLIC;if(t!==e.public&&t!==e.private&&t!==e.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(t){if(t){var e=["Book","Design"];return e.includes(t)?void 0:this.__("type 参数只允许为 {s}",{s:e.join(", ")})}}},{key:"searchPage250",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("只允许是正整数并且要小于等于 250");t=parseInt(t)}if(t<1||t>250||isNaN(t))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(t){return t=this._stringify(t),i.isEmail(t)}},{key:"isUser",value:function(t){return t=this._stringify(t),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(t)}},{key:"isoDate",value:function(t){if(!t||!f.test(t))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(t){t=this._stringify(t);var e=this.__("请输入正确的 URL 地址");if(!t)return e;if(!/^\//.test(t)){if(/^\s*javascript:\/\//i.test(t))return e;try{new URL(t)}catch(t){return e}}}},{key:"stringArr",value:function(t,e){if(t&&e.values&&(t=t.split(",").map((function(t){return t.trim()})),t.some((function(t){return!e.values.includes(t)}))))return this.__("必须是 {type} 其中的值",{type:e.values.join("、")})}}],e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),m=c.apply(void 0,[l].concat([s,p]));e.Validator=m,"undefined"!=typeof window&&"function"==typeof window.__&&(e.validator=new m(window.__))},3697:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=r(2716),u=r(3635).BaseValidatorClass,c=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,l=/^\+[1-9]\d{0,2}? \d{1,20}$/,s=/^\+86 /,f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"chinaMobilePhone",value:function(t){if(!(t=this._stringify(t))||!c.test(t))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(t){return(t=this._stringify(t))&&l.test(t)?s.test(t)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)}},{key:"mobilePhoneForNonChinese",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)?this.__("必须是合法的手机号码"):void 0}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.MobileValidatorClass=f,e.chinaMobilePhoneRE=c,e.globalMobilePhoneRE=l,e.MobileValidator=i.apply(void 0,[u].concat([f]))},3918:function(t,e,r){"use strict";var n=r(0);e.a=function(t,e){Object(n.useEffect)((function(){if(t){var r=function(t){return t.preventDefault(),e&&(t.returnValue=e),e};return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}}}),[e,t])}},3930:function(t,e,r){"use strict";r(175);var n=r(40),o=(r(36),r(8)),a=(r(270),r(135)),i=(r(905),r(542)),u=(r(43),r(10)),c=(r(126),r(38)),l=(r(136),r(28)),s=(r(62),r(31)),f=r(0),p=r.n(f),m=r(4),d=r.n(m),y=r(1369),h=r(1362),v=r(1355),b=r(94),g=r.n(b),_=r(147),w=r.n(_),E=r(3982),O=r(1372),S=r.n(O),k=r(85);var j=function(t,e){var r=Object(f.useRef)();Object(f.useEffect)((function(){r.current=t}),[t]),Object(f.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])},P=r(3918),x=r(183),I=r(3456),T=r(205),R=r(48),L=r(1682),N=r(3983);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function D(){D=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:j(t,r,u)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",m="suspendedYield",d="executing",y="completed",h={};function v(){}function b(){}function g(){}var _={};l(_,i,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(R([])));E&&E!==r&&n.call(E,i)&&(_=E);var O=g.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,u){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==C(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=P(u,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:m,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(C(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,u,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,c,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function G(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var A=function(t){var e=t.docs,n=t.onSuccess,o=t.bookId,a=e.length,i=function(){var t,i=(t=D().mark((function t(){var i,u;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=D().mark((function t(){var a,i,c,l,s,f,p;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e[u].slug,t.prev=1,t.next=4,R.a.docs.findOne({id:a,book_id:o});case 4:if(i=t.sent,c=i.format,l=i.content,s=null,"lakesheet_html"!==c){t.next=12;break}s=Object(N.a)(i.content),f="lakesheet",t.next=17;break;case 12:if("html"!==c){t.next=17;break}return t.next=15,Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1648)]).then(r.bind(null,3691)).then((function(t){return t.htmlToLakeAndHtml(l)}));case 15:s=t.sent,f="lake";case 17:return p={id:i.id,format:f,body_asl:s.value,draft_version:i.draft_version,save_type:"auto"},s.html&&(p.body_html=s.html),t.next=21,R.a.docs.updateContent(p);case 21:return t.next=23,R.a.docs.publish({id:i.id,format:f,notify:!1,force:!0});case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(1),console.log("convert error",t.t0),n();case 29:case"end":return t.stop()}}),t,null,[[1,25]])})),u=0;case 2:if(!(u<a)){t.next=7;break}return t.delegateYield(i(),"t0",4);case 4:u++,t.next=2;break;case 7:n();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){G(a,n,o,i,u,"next",t)}function u(t){G(a,n,o,i,u,"throw",t)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return Object(f.useEffect)((function(){return i(),function(){}}),[]),p.a.createElement("div",null)};A.propTypes={onSuccess:d.a.func.isRequired,bookId:d.a.number.isRequired,docs:d.a.array.isRequired};var U=A,M=r(989),z="DocImport-module_docImport_uDZWD",q="DocImport-module_title_vylxD",B="DocImport-module_tips_gx2+N",F="DocImport-module_help_YDms4",V="DocImport-module_processingModal_5vLO+",Y="DocImport-module_setting_6ttU6",K="DocImport-module_settingTitle_EsA43",H="DocImport-module_settingUpload_WXf0g",Z="DocImport-module_processing_K3nVL",W="DocImport-module_processingTitle_UzLg1",$="DocImport-module_processingFooter_xOxG5",J="DocImport-module_fileList_jRvlw",X="DocImport-module_fileItem_gtT95",Q="DocImport-module_fileItemIcon_SdTY-",tt="DocImport-module_fileItemTitle_qprAi",et="DocImport-module_spin_aEZeg",rt="DocImport-module_uploadingStatus_UWCen",nt="DocImport-module_hr_nD0TF",ot="DocImport-module_footerTitle_2O1eI",at="DocImport-module_radioGroup_klLUa",it=r(342),ut=r(2763),ct={id:14,content:'{"popupType":"activity","title":"👋🏻 Hi，亲爱的印象笔记用户","desc":"欢迎加入语雀，开启新的创作旅程，语雀会稳定地陪伴着你。\\n<br />\\n<br />\\n为感谢你的选择，已赠送你 1 个月语雀会员。\\n<br />\\n<br />\\n✨ 分享你的迁移经验 / 使用心得，再获得 1 个月会员。 <br /><a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/share-events\\">了解详情</a>\\n<br />\\n<br />\\n<a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/evernote\\">👉🏻 迁移支持与反馈</a>","image":"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/345912/1678879373131-361a8d0b-c661-4afa-8714-9b49afc2ef87.png?x-oss-process=image%2Fresize%2Cw_1272%2Climit_0","type":"normal","mainButton":{"title":"我知道了","openType":"close"},"viceButton":{"title":"","openType":"close"},"otherButton":{"openType":"href"}}',type:"public_popup",user_id:null,created_at:"2023-07-22T02:22:29.000Z",updated_at:"2023-07-22T02:25:07.000Z",deleted_at:null,_serializer:"admin.tip"};function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(){st=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:j(t,r,u)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",m="suspendedYield",d="executing",y="completed",h={};function v(){}function b(){}function g(){}var _={};l(_,i,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(R([])));E&&E!==r&&n.call(E,i)&&(_=E);var O=g.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,u){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==lt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=p;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=P(u,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:m,l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(lt(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,u,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(O),l(O,c,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ft(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function pt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ft(a,n,o,i,u,"next",t)}function u(t){ft(a,n,o,i,u,"throw",t)}i(void 0)}))}}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){yt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ht(t){return function(t){if(Array.isArray(t))return gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,e)||bt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){if(t){if("string"==typeof t)return gt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(t,e):void 0}}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var _t=s.a.confirm,wt=M.a.STATUS,Et=window.appData.settings&&window.appData.settings.max_import_task_count||2,Ot=function(t){var e=t.visible,r=t.book,m=t.group,d=t.formats,b=t.importType,_=t.importParams,O=t.wrapModal,S=void 0===O||O,x=t.autoConvert,N=void 0===x||x,C=vt(Object(f.useState)(wt.INIT),2),D=C[0],G=C[1],A=vt(Object(f.useState)([]),2),lt=A[0],ft=A[1],mt=vt(Object(f.useState)([]),2),yt=mt[0],gt=mt[1],Ot=vt(Object(f.useState)(0),2),St=Ot[0],kt=Ot[1],jt=vt(Object(f.useState)(0),2),Pt=jt[0],xt=jt[1],It=vt(Object(f.useState)(0),2),Tt=It[0],Rt=It[1],Lt=vt(Object(f.useState)({}),2),Nt=Lt[0],Ct=Lt[1],Dt=vt(Object(f.useState)(!1),2),Gt=Dt[0],At=Dt[1],Ut=vt(Object(f.useState)(!0),2),Mt=Ut[0],zt=Ut[1],qt=vt(Object(f.useState)(!1),2),Bt=qt[0],Ft=qt[1],Vt=vt(Object(f.useState)([]),2),Yt=Vt[0],Kt=Vt[1],Ht=vt(Object(f.useState)(!1),2),Zt=Ht[0],Wt=Ht[1],$t=Object(f.useRef)();Object(P.a)(!Bt&&D===wt.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Jt=function(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if(Yt.length>0)return Yt.push(t),void Kt(ht(Yt));Yt.push(t)}var e=t.data,r=t.file,n=t.filename,o=t.onError,a=t.onSuccess;t.__uploaded=!0;var i=dt(dt(dt({},_),e),{},{filename:n,path:r.path});r.uploading=!0,Object(T.f)({requestData:i,params:t,onError:o,onSuccess:function(t){a(t,r)}})},Xt={evernote:[{default:w.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],gitbook:[{default:w.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1}],confluence:[{type:"text",label:p.a.createElement(c.a,{type:"flex",justify:"space-between"},p.a.createElement(l.a,null,__("批量替换链接")),p.a.createElement(l.a,null,p.a.createElement("a",{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(t,e,r){var n=E.validator.httpURL(e);zt(!n),r(n)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]},Qt=[{key:"markdown",value:"markdown",invertedIndex:["markdown","zip"],title:__("单个 Markdown 文件"),desc:".md .markdown .mark .txt",name:__("Markdown")},{key:"zip",value:"zip1",invertedIndex:["markdown","zip"],title:__("Markdown 打包后的压缩文件"),desc:".zip",name:__("Markdown"),formValue:{fileFormat:"markdown"}},{key:"zip",value:"zip2",invertedIndex:["markdown","zip"],title:__("HTML 打包后的压缩文件"),desc:".zip",name:__("HTML"),formValue:{fileFormat:"html"}},{key:"zip",value:"zip3",invertedIndex:["markdown","zip"],title:__("Lake 打包后的压缩文件"),desc:".zip",name:"LAKE",formValue:{fileFormat:"html"}}];Object(f.useEffect)((function(){D!==wt.PROCESSING||Gt||G(wt.SUCCESS)}),[D,Gt]);var te=function(t){return t.response&&t.response.data&&t.response.data.status},ee=function(t){var e=t||{},n=e.data,o=e.joinedEvernoteIncentive,a={};if(n){var i,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=bt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(n);try{for(c.s();!(i=c.n()).done;){var l=i.value;a[l.id]=l}}catch(t){c.e(t)}finally{c.f()}}var s=yt.map((function(t){var e,r,n;if(!t.response||!t.response.data)return t;var o=a[t.response.data.id];if(!o)return t;var i=g()(o,"error.limitError");if(i&&400===i.status&&i.code){if(window.appData.isDesktopApp)return u.a.error(__("桌面端不支持此操作，请去 web 端完成"));var c=I.h.getMessage(i.code,{isImport:!0},i)||{},l=c.msg,s=c.alwaysOpen,f=c.level,p=c.callback;if(l)return p(u.a[f||"error"](l,s?0:void 0)),Ft(!0),t}t.response.data=dt(dt({},t.response.data),o),o.status===wt.SUCCESS?(t.status=wt.SUCCESS,t.url=o.url):(o.status===wt.ERROR||o.error)&&(t.status=wt.ERROR);var m=null==t||null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r||null===(n=r.successDocs)||void 0===n?void 0:n.filter((function(t){return"html"===t.format||"lakesheet_html"===t.format}));return(null==m?void 0:m.length)>0&&N&&ft(lt.concat(m)),t})),f=0,p=0;s.forEach((function(t){var e=te(t);t.status!==wt.ERROR&&e!==wt.ERROR&&e!==wt.SUCCESS||f++,t.status!==wt.ERROR&&e!==wt.ERROR||p++})),s.filter((function(t){var e=te(t);return e===wt.PENDING||t.status!==wt.ERROR&&!(null!=e||!t.uploading&&"done"!==t.status&&100!==t.percent)})).length<Et&&function(){for(var t=Yt.shift();t&&t.__uploaded;)t=Yt.shift();t&&Jt(t,!0),Kt(ht(Yt))}(),f>Pt&&xt(f),Rt(p),gt(s),St===f?(At(!1),function(){if(r.toc){var t="highlightBookImport_".concat(r.slug,"_").concat(r.id),e=r.toc[0];k.a.set(t,e?e.uuid:"_")}}()):G(wt.PROCESSING),o&&Object(ut.b)({tip:ct})};j(pt(st().mark((function t(){var r,n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=yt.filter((function(t){return t.response&&t.response.data}))).length){t.next=3;break}return t.abrupt("return",ee());case 3:if(e){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,R.a.import.getImportResult({files:JSON.stringify(r.map((function(t){return{convertTaskId:t.response.data.convertTaskId,id:t.response.data.id,type:t.response.data.type,name:t.name}}))),toc_node_uuid:_&&_.toc_node_uuid,format:null==Nt?void 0:Nt.key},{useOriginResp:!0});case 7:n=t.sent,ee(n);case 9:case"end":return t.stop()}}),t)}))),Gt?5e3:null);var re,ne,oe,ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=dt(dt({},d.find((function(e){return e.key===t}))),e);Ct(r),Xt[t]&&G(wt.SETTING),"confluence"===t&&zt(!1)},ie=function(t){return!!Xt[t.key]},ue=function(t){var e=ht(t.fileList),r=e.length;r!==e.filter((function(t){var e=te(t);return e===wt.ERROR||e===wt.SUCCESS})).length&&G(wt.PROCESSING),At(!0),gt(e),kt(r)},ce=function(){At(!1),G((function(e){if(e!==wt.PROCESSING)return t.onCancel(),e;gt((function(e){return t.onCancel(),e}))}))},le=function(){var e,n;if(_&&"doc_toc"===_.create_from)return ce(),yt.forEach((function(t){if(!e){var o=t.response&&t.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(e="/".concat(m.login,"/").concat(r.slug,"/").concat(o.import_toc[0].url),n=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(e="/".concat(m.login,"/").concat(r.slug,"/").concat(o.slug),n=o)}})),void(e&&(t.onRead?t.onRead(n):window.location.href=e));window.location.href="/".concat(m.login,"/").concat(r.slug)},se=p.a.createElement("div",{className:z},(re=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",ne=d.filter((function(t){return t.key.startsWith("lake")})),oe=d.filter((function(t){return!t.key.startsWith("lake")&&"zip"!==t.key})).filter((function(t){return!window.appData.isYuque||"dingdocs"!==t.key})),p.a.createElement("div",{className:"entry",style:{display:D===wt.INIT?"block":"none"}},p.a.createElement("div",{className:q},__("导入")),p.a.createElement("div",{className:B},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),p.a.createElement("a",{href:re,target:"_blank","data-desktoptarget":"_browser",className:F},__("帮助文档"))),p.a.createElement("div",null,p.a.createElement("h4",null,__("三方格式")),p.a.createElement(L.a,{mode:"import",book:r,types:oe,importType:b,disableUpload:ie,onSelect:ae,onUploadChange:ue,customRequest:Jt,maxCount:0,setModalHide:Wt})),p.a.createElement("div",null,p.a.createElement("h4",null,__("语雀格式")),p.a.createElement(L.a,{mode:"import",book:r,types:ne,importType:b,disableUpload:ie,onSelect:ae,onUploadChange:ue,customRequest:Jt,maxCount:0})))),function(){var t;if(!Nt)return null;var e=Nt.key,a=Nt.multiSettingValue,i=Qt.filter((function(t){return t.invertedIndex.includes(e)})),u=i.find((function(t){return t.value===a}))||(null==i?void 0:i[0]),c=Xt[e];return c?p.a.createElement("div",{className:Y,style:{display:D===wt.SETTING?"block":"none"}},p.a.createElement("h1",{className:K},__("{type} 导入配置",{type:(null==u?void 0:u.name)||Nt.name})),!!i.length&&p.a.createElement(n.a.Group,{value:null===(t=u||(null==i?void 0:i[0]))||void 0===t?void 0:t.value,className:at},null==i?void 0:i.map((function(t){return p.a.createElement(n.a,{value:t.value,onClick:function(){return ae(t.key,{multiSettingValue:t.value})}},p.a.createElement(it.a,{variant:"title",type:"strong"},t.title),p.a.createElement(it.a,{variant:"caption-small"},t.desc))}))),p.a.createElement(M.a.AdvanceSetting,{wrappedComponentRef:$t,type:Nt,settings:c,hideHeader:i,actions:p.a.createElement(L.a.FileUpload,{mode:"import",book:r,getParamsOption:function(){return dt(dt({},(null==u?void 0:u.formValue)||{}),$t.current.getValue())},fileOption:Nt,importType:b,customRequest:Jt,onUploadChange:ue,maxCount:0},p.a.createElement(o.a,{type:"primary",disabled:!Mt,className:H},__("选择本地文件")))})):null}(),D!==wt.INIT&&D!==wt.SETTING?p.a.createElement("div",{className:Z},p.a.createElement("h1",{className:W},D===wt.DONE?__("导入完成"):__("导入中")),p.a.createElement("div",{className:J},yt.map((function(t){return p.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle",className:X,key:t.uid},p.a.createElement(l.a,null,p.a.createElement(c.a,{type:"flex",align:"middle"},p.a.createElement(l.a,null,p.a.createElement("img",{src:Nt.icon,className:Q}),function(t){var e,r=t.name,n=te(t);return e=t.url?p.a.createElement("a",{className:tt,href:t.url,target:"_blank"},r):p.a.createElement("h2",{className:tt},r),t.status!==wt.ERROR&&n!==wt.ERROR||(e=p.a.createElement(i.a,{placement:"right",content:__("文件处理失败，请重新上传。")},e)),e}(t)))),p.a.createElement(l.a,null,function(t){var e=te(t);if(t.status===wt.ERROR||e===wt.ERROR){var r=t.error&&t.error.response&&t.error.response.data&&t.error.response.data.message;r||(r=t.response&&t.response.data&&t.response.data.error&&t.response.data.error.message);var n=t.response&&t.response.data&&t.response.data.id;return n&&(r="".concat(r," [id: ").concat(n,"]")),r?r+=__("（请重新上传，如果持续失败，请反馈到语雀）"):r=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),p.a.createElement("span",null,p.a.createElement(i.a,{placement:"right",width:600,content:r},p.a.createElement(y.default,null)))}return t.status===wt.SUCCESS||e===wt.SUCCESS?p.a.createElement("span",null,p.a.createElement(h.default,null)):p.a.createElement("span",null,p.a.createElement("span",{className:rt},0===t.percent&&__("等待中"),100===t.percent&&__("处理中"),0!==t.percent&&100!==t.percent&&p.a.createElement("span",null,parseInt(t.percent,10),"%")),p.a.createElement(a.a,{indicator:p.a.createElement(v.default,{style:{fontSize:16},spin:!0}),className:et}))}(t)))}))),p.a.createElement("div",{className:nt}),function(){var t;if(0!==Pt&&St===Pt&&0===lt.length){var e;yt.forEach((function(t){if(!e){t.status===wt.ERROR&&((e=t.error&&t.error.response&&t.error.response.data&&t.error.response.data.message)||(e=t.response&&t.response.data&&t.response.data.error&&t.response.data.error.message));var r=t.response&&t.response.data&&t.response.data.id;e&&r&&(e="".concat(e," [id: ").concat(r,"]"))}}));var r=Tt?__("导入结束，有文件导入失败"):__("导入完成");e&&(r="".concat(r," (").concat(e,")")),t=p.a.createElement(c.a,{type:"flex",justify:"space-between",align:"middle"},p.a.createElement(l.a,null,Tt?p.a.createElement(y.default,null):p.a.createElement(h.default,null),p.a.createElement("span",{className:ot},r)),p.a.createElement(l.a,null,p.a.createElement(o.a,{type:"primary",onClick:le},__("查看"))))}else D===wt.PROCESSING||D===wt.UPLOADING||D===wt.PENDING?t=p.a.createElement("div",null,p.a.createElement(a.a,{indicator:p.a.createElement(v.default,{style:{fontSize:16},spin:!0})}),p.a.createElement("span",{className:ot},__("文件导入中")),"(".concat(Pt,"/").concat(St,")")):0!==lt.length&&(t=p.a.createElement("div",null,p.a.createElement(a.a,{indicator:p.a.createElement(v.default,{style:{fontSize:16},spin:!0})}),p.a.createElement("span",{className:ot},__("文件转换中"))));return p.a.createElement("div",{className:$},t)}()):null,N&&function(){if(Pt&&St===Pt&&lt.length)return p.a.createElement(U,{docs:lt,bookId:r.id,onSuccess:function(){ft([])}})}());return S?p.a.createElement(s.a,{title:null,onCancel:function(t){D!==wt.INIT&&D!==wt.DONE?(t.preventDefault(),t.stopPropagation(),D===wt.PROCESSING?_t({title:__("导入尚未完成，确认要停止导入?"),content:p.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:ce,onCancel:function(){}}):ce()):ce()},visible:e,footer:null,centered:!0,width:D===wt.INIT?160*Math.min(d.length,4):406,maskClosable:!1,className:D!==wt.INIT&&V,style:Zt?{display:"none"}:{}},se):se};Ot.defaultProps={visible:!0,importType:S.a.IMPORT_TYPE.PARSE},Ot.propTypes={visible:d.a.bool,book:d.a.object.isRequired,formats:d.a.array.isRequired,importType:d.a.oneOf([S.a.IMPORT_TYPE.CREATE,S.a.IMPORT_TYPE.PARSE]),onCancel:d.a.func.isRequired,onRead:d.a.func,importParams:d.a.object,group:d.a.object.isRequired,wrapModal:d.a.bool,autoConvert:d.a.bool};e.a=Object(x.b)(Ot,!0)},3982:function(t,e,r){t.exports=r(3665)}}]);