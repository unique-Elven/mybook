(window.webpackJsonp=window.webpackJsonp||[]).push([[1391],{4738:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(3917),c=n(4),i=n.n(c),l=function(e){var t,n=e.type,a=void 0===n?"Doc":n,c=e.target,i=e.style;return a&&c&&window.appData.isYuque?((null===(t=window.appData)||void 0===t?void 0:t.settings)||{}).disable_ip_region_model?null:(Object(o.a)()||Object(o.b)())&&("Doc"!==a||c.first_published_at)&&c.region?r.a.createElement("span",{style:i},__("IP 属地"),c.region||__("未知")):null:null};l.propTypes={target:i.a.object.isRequired,type:i.a.string},t.a=l},8054:function(e,t,n){"use strict";n.r(t);n(170);var a=n(70),r=n(4),o=n.n(r),c=n(0),i=n.n(c),l=n(242),u=n.n(l),s=n(524),p=n(15),m=n.n(p),d=n(6),f=n.n(d),b=n(155),w=n(984),y=n(310),h=n(4738),v=n(280),_=n(4057),E=n(1254),g=n(3917),j=n(4723),O={wrapper:"ReaderMeta-module_wrapper_GsEmw",readCount:"ReaderMeta-module_readCount_y6mlm",canHover:"ReaderMeta-module_canHover_t0DQC",reportBtn:"ReaderMeta-module_reportBtn_aC9km",viewBtn:"ReaderMeta-module_viewBtn_Vo9dK",readers:"ReaderMeta-module_readers_LNdps"};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D.apply(null,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R(a.key),a)}}function M(e,t,n){return t=T(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function N(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=S(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var B=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(n=M(this,t,[e]),"handleShowStaticModal",(function(){var e=n.props.showDocStatisticModal;n.canShowModal&&(e(),Object(b.spmClick)("c308305.d320452"))})),N(n,"renderReadCountTip",(function(){if(!n.canShowModal){var e=n.props.doc.hits||0;return __("文档浏览次数：{num}",{num:e})}return __("点击查看详情")})),N(n,"showReportEntry",(function(){var e=n.props,t=e.doc,a=e.book,r=e.group,o=e.me;return window.appData.isPublicCloud&&t.user_id!==o.id&&(Object(g.a)(r,a,t)||Object(g.b)(window.appData.share,a,t))}));var a=e.pageType,r=e.doc;return n.canShowModal=E.a.canViewReaders(a,{doc:r,group:window.appData.group,isYuque:window.appData.isYuque}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.doc,n=e.book,r=e.showUpdateTime,o=e.litecomment,c=this.props.showAuthor,l=u()(o.commentCount)?" ":o.commentCount;return i.a.createElement("div",{className:"".concat(O.wrapper)},i.a.createElement("div",{className:"meta-left"},i.a.createElement(w.d,{doc:t,showAuthor:c,showType:"doc"}),r&&i.a.createElement("div",{className:"meta-item"},i.a.createElement(a.a,{title:__("更新于 {time}",{time:m()(new Date(t.content_updated_at)).format("YYYY-MM-DD HH:mm:ss")}),placement:"topLeft"},i.a.createElement("span",{className:"larkicon larkicon-clock"}),i.a.createElement("span",{className:"item-text"},i.a.createElement(y.a,{time:t.content_updated_at})))),i.a.createElement(a.a,{title:this.renderReadCountTip(),placement:"topLeft"},i.a.createElement("div",{className:f()("meta-item",O.readCount,N({},O.canHover,this.canShowModal)),onClick:this.handleShowStaticModal},i.a.createElement("span",{className:"larkicon larkicon-read"}),i.a.createElement("span",{className:f()("item-text",O.text)},t.hits||0))),n.enable_comment&&i.a.createElement("div",{className:"meta-item"},i.a.createElement(a.a,{title:__("评论次数：{num}",{num:l||0}),placement:"topLeft"},i.a.createElement("span",{className:"larkicon larkicon-comments"}),i.a.createElement("span",{className:"item-text"},l||0))),i.a.createElement("div",{className:"meta-item"},i.a.createElement(h.a,{target:t,type:"Doc"})),this.showReportEntry()&&i.a.createElement(_.a,{targetId:t.id,targetType:"Doc"},(function(e){return i.a.createElement("div",{className:f()("meta-item",O.reportBtn),style:{marginLeft:12},onClick:e.onShowPanel},i.a.createElement("span",null,__("举报")))}))))}}])&&k(n.prototype,r),o&&k(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(c.PureComponent);B.defaultProps={showAuthor:!0,showUpdateTime:!0,pageType:"read"},B.propTypes={doc:o.a.object,litecomment:o.a.object,book:o.a.object,me:o.a.object,group:o.a.object,showAuthor:o.a.bool,showUpdateTime:o.a.bool,pageType:o.a.oneOf(["read","share"]),showDocStatisticModal:o.a.func};t.default=Object(v.b)(Object(s.d)((function(e){return e}))((function(e){var t=Object(j.useDocStatisticStore)().show;return i.a.createElement(B,D({},e,{showDocStatisticModal:t}))})))}}]);