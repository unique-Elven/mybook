/*! For license information please see c__Like.e2488fec.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1367,1184,1364,1366,1653],{101:function(e,t,r){"use strict";r(2872);var n=r(1278);r(311);t.a=n.a},1030:function(e,t,r){var n=r(400),a=r(89);e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}},1033:function(e,t,r){"use strict";var n=r(57),a=r.n(n),o=(r(1403),r(521)),i=r(50),l=r.n(i),c=r(65),u=r.n(c),s=r(0),m=r.n(s),d=r(4),f=r.n(d),p=r(6),y=r.n(p),h=r(66),_=r.n(h),b=(r(1261),["className","title"]);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=m.a.forwardRef((function(e,t){var r=e.className,n=e.title,a=u()(e,b),i={},c=y()("larkui-skeleton",r);return n?(n.size&&(c=y()(c,{"larkui-skeleton-title-sm":"sm"===n.size})),n.width&&(i.title={width:n.width})):i.title=n,m.a.createElement(o.a,l()({className:c,ref:t},i,a))}));E.propTypes=v(v({},o.a.SkeletonProps),{},{className:f.a.string}),_()(E,o.a),t.a=E},1251:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return s}));var n=r(0),a=r.n(n),o=r(144),i=r(33);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e=l(a.a.useState(o.b.onLine),2),t=e[0],r=e[1];return a.a.useEffect((function(){function e(e){r(e)}return o.b.on(o.a,e),function(){o.b.off(o.a,e)}}),[]),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=u(),o=Array.from(t);o.push(n),a.a.useEffect((function(){n||!i.c?e():null==r||r()}),o)}},1252:function(e,t,r){"use strict";r(36);var n=r(8),a=(r(52),r(12)),o=r(0),i=r.n(o),l=r(4),c=r.n(l),u=r(59),s=r(6),m=r.n(s),d=r(48),f="index-module_mainInput_x4D9t",p="index-module_verifyResult_pdxsH",y="index-module_success_NhSta",h="index-module_inputVerify_kl-bC",_="index-module_editIcon_eXpln",b="index-module_promoCodeDefault_6iUh6";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(){E=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),l=new L(n||[]);return a(i,"_invoke",{value:N(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",h={};function _(){}function b(){}function v(){}var A={};u(A,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(k([])));O&&O!==r&&n.call(O,i)&&(A=O);var T=v.prototype=_.prototype=Object.create(A);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(a,o,i,l){var c=m(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==g(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=d;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=M(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=v,a(T,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:b,configurable:!0}),b.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new S(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(T),u(T,c,"Generator"),u(T,i,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function A(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){A(o,n,a,i,l,"next",e)}function l(e){A(o,n,a,i,l,"throw",e)}i(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=e.value,r=e.orderType,l=e.packageType,c=e.promoUsage,s=e.onChange,g=e.onVerifySuccess,A=e.verifyStyle,T=O(Object(o.useState)(!1),2),P=T[0],S=T[1],N=O(Object(o.useState)({}),2),M=N[0],C=N[1],j=O(Object(o.useState)(!1),2),L=j[0],k=j[1],I=function(){var e=w(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.promo.verify({code:t,promoUsage:c,order_type:r,package_type:l},{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=w(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.isSpace?d.a.pay.close:d.a.memberPay.close,e.abrupt("return",t({order_id:M.order_id},{ignoreGlobalMessage:!0}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){I().then((function(e){k(!1),C(e),e.success&&g(e.promo)})).catch((function(){k(!1),C({success:!1,message:__("优惠码无效")})}))},D=function(e){M.success&&C({success:!1,message:__("优惠码已修改，请重新验证")}),s&&s(e)},Y=function(){var e=w(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,x();case 4:return e.next=6,R();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),k(!1),C({success:!1,message:__("解绑失败")});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),B=m()(p,v({},y,M.success));return P?i.a.createElement("span",null,i.a.createElement(a.a,{"data-testid":"verifier-input",type:"text",value:t,onChange:function(e){return D(e.target.value&&e.target.value.trim())},suffix:i.a.createElement("a",{className:m()(A,h),onClick:R,disabled:L,"data-testid":"verifier-a"},__("验证")),className:f,placeholder:__("在此输入")}),i.a.createElement("div",{className:B,"data-testid":"verifier-message"},i.a.createElement("span",null,M.message),M.isLocked?i.a.createElement(n.a,{type:"link",disabled:L,onClick:Y},L?__("解绑中"):__("解绑")):null)):i.a.createElement("span",{className:b,onClick:function(){return S(!0)}},__("填写优惠码"),i.a.createElement(u.b,{name:"edit-border",className:_,width:14,height:14}))};P.propTypes={value:c.a.string,promoUsage:c.a.string,orderType:c.a.number,packageType:c.a.number,onChange:c.a.func,onVerifySuccess:c.a.func};t.a=P},1258:function(e,t,r){e.exports=function(){"use strict";return function(e,t,r){var n=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=(t=t.filter((function(e){return e})))[0];for(var n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}()},1288:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){return a(Object(n.useReducer)((function(e){return e+1}),0),2)[1]}},1353:function(e,t,r){"use strict";r.d(t,"h",(function(){return k.d})),r.d(t,"g",(function(){return k.c})),r.d(t,"f",(function(){return k.b})),r.d(t,"c",(function(){return k.a})),r.d(t,"m",(function(){return k.e})),r.d(t,"i",(function(){return x})),r.d(t,"j",(function(){return R})),r.d(t,"a",(function(){return T})),r.d(t,"n",(function(){return j})),r.d(t,"k",(function(){return ie})),r.d(t,"b",(function(){return z})),r.d(t,"e",(function(){return ne})),r.d(t,"d",(function(){return le})),r.d(t,"l",(function(){return ce}));r(36);var n=r(8),a=(r(43),r(10)),o=r(0),i=r.n(o),l=r(4),c=r.n(l),u=r(15),s=r.n(u),m=r(6),d=r.n(m),f=r(155),p=r(97),y=r(69),h=r(341),_=r(47),b=r(93),g=r(20),v=r(980),E="index-module_buyButton_pN7y0";function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e){var t=e.organization,r=e.targetLevel,a=e.type,l=e.text,c=e.className,u=e.paySource,s=void 0===u?y.LIMIT_SCENE.org_other_buy:u,m=p.a.isFree(t),f=m?g.PAY_MODAL_ACTION.buy:g.PAY_MODAL_ACTION.renew,h=A(Object(o.useState)(!1),2),_=h[0],b=h[1],w=l||(m?__("升级"):__("续费")),O=window.location,T="/r/organizations/dashboard/cashier"===(null==O?void 0:O.pathname),P=null==O?void 0:O.pathname.startsWith("/r/organizations/dashboard");if(!T){var S=p.a.buildOrgPayLink({action:m?"buy":"renew",targetLevel:r,paySource:s});return i.a.createElement(n.a,{className:d()(E,c),href:S,target:P?"_self":"_blank",type:a},w)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{type:a,className:d()(E,c),onClick:function(){return b(!0)}},w),_&&i.a.createElement(v.a,{visible:_,organization:t,onClose:function(){return b(!1)},type:"buyModal",actionType:f,targetLevel:r,paySource:s}))}O.propTypes={organization:c.a.object.isRequired,type:c.a.string,text:c.a.string,className:c.a.string,targetLevel:c.a.oneOf([g.PAYMENT_TYPE.pro,g.PAYMENT_TYPE.enterprise]),paySource:c.a.string},O.defaultProps={type:"link",targetLevel:g.PAYMENT_TYPE.pro};var T=O,P=r(1479),S="index-module_upgradeButton_nJqrZ";function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e){var t,r=e.organization,a=e.type,l=e.text,c=e.className,u=e.paySource,s=void 0===u?y.LIMIT_SCENE.org_other_buy:u,m=N(Object(o.useState)(!1),2),f=m[0],h=m[1],_=l||__("升级"),b=Object(P.getInterest)(),E=window.location,A="/r/organizations/dashboard/cashier"===(null==E?void 0:E.pathname),w=null==E||null===(t=E.pathname)||void 0===t?void 0:t.startsWith("/r/organizations/dashboard");if(p.a.isTopLevel(b))return null;if(!w||!A){var O=p.a.buildOrgPayLink({action:"upgrade",paySource:s});return i.a.createElement(n.a,{className:d()(S,c),href:O,target:"_blank",type:a},_)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{type:a,className:d()(S,c),onClick:function(){return h(!0)}},_),f&&i.a.createElement(v.a,{visible:f,organization:r,onClose:function(){return h(!1)},type:"buyModal",actionType:g.PAY_MODAL_ACTION.upgrade,targetLevel:g.PAYMENT_TYPE.enterprise,paySource:s}))}C.propTypes={organization:c.a.object.isRequired,type:c.a.string,text:c.a.string,className:c.a.string,paySource:c.a.string},C.defaultProps={type:"link"};var j=C,L={orgVersionLabel:"index-module_orgVersionLabel_egPu3",tip:"index-module_tip_rQx-e",payment:"index-module_payment_pQExj",paymentLink:"index-module_paymentLink_GbvgZ",paymentGuideWrapper:"index-module_paymentGuideWrapper_2jg39",thumb:"index-module_thumb_Lw5zW",title:"index-module_title_EykNL",body:"index-module_body_+1-cr",link:"index-module_link_zDdoa",actions:"index-module_actions_LRgdL",horizontal:"index-module_horizontal_rYkfB",btnTryout:"index-module_btnTryout_5GVmK",vertical:"index-module_vertical_K+cm2",btn:"index-module_btn_vRXZD",premiumFeaturesLabel:"index-module_premiumFeaturesLabel_q+uFd",alignCenter:"index-module_alignCenter_h648T",orgExpiredTip:"index-module_orgExpiredTip_k7iLg",orgExpiredTipOpt:"index-module_orgExpiredTipOpt_QDhkZ",orgExpiredTipText:"index-module_orgExpiredTipText_gQuZw",payflowTitle:"index-module_payflowTitle_LM3aR",freeWrapper:"index-module_freeWrapper_BlI2K",payflowLink:"index-module_payflowLink_Wt3fM",isExpired:"index-module_isExpired_UgOgs",freeTips:"index-module_freeTips_ybaQ-"},k=r(688),I=r(59);r(433);function x(){return i.a.createElement("span",null,__("标准版，2999 元/空间/年"))}function R(e){var t=e.organization,r=e.size,n=e.className;return i.a.createElement(I.b,{size:r,name:p.a.getIconName(t),className:n})}c.a.object.isRequired,c.a.node,c.a.string,c.a.object.isRequired,c.a.string,c.a.string,c.a.string,c.a.oneOfType([c.a.string,c.a.number]),c.a.oneOfType([c.a.string,c.a.node]),c.a.string,c.a.object,R.propTypes={organization:c.a.object,size:c.a.number,className:c.a.string};var D="index-module_upgrade_qL2nR";function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.organization,r=e.className,a=e.code,l=void 0===a?y.LIMIT_SCENE.org_other_buy:a,c=Y(Object(o.useState)(!1),2),u=c[0],s=c[1];if(!("/r/organizations/dashboard/cashier"===window.location.pathname)){var m=p.a.buildOrgPayLink({action:"member",paySource:l});return i.a.createElement("a",{className:r,href:m,target:"_blank"},__("扩容"))}return i.a.createElement("div",{className:d()(D,r)},i.a.createElement(n.a,{type:"link",onClick:function(){return s(!0)}},__("扩容")),u&&i.a.createElement(v.a,{visible:u,organization:t,onClose:function(){return s(!1)},type:"buyModal",actionType:g.ORDER_TYPE.buyMember,paySource:l}))},F=(r(62),r(31));function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=function(e){var t=e.organization,r=e.code,o=e.type,l=e.className,c=e.text,u=p.a.getFeatureBelongsPayment(r);return p.a.isPremium(t)?u===(null==t?void 0:t.payment_type)?i.a.createElement(n.a,{type:o,className:l,onClick:function(){var e;a.a.warning(__("当前版本已是{payment}",{payment:null===(e=p.a.PAYMENT_MAP)||void 0===e?void 0:e[u]}))}},c):i.a.createElement(j,{organization:t,type:o,text:c,className:l,paySource:r}):i.a.createElement(T,{organization:t,type:o,text:c,targetLevel:u,className:l,paySource:r})};Q.propTypes={organization:c.a.object.isRequired,className:c.a.string,code:c.a.oneOf(Object.values(W(W({},_.INTEREST_CODE),y.LIMIT_RULE_CODE))),type:c.a.string,text:c.a.string},Q.defaultProps={type:"link"};var V="index-module_wrapper_ulVDd",H="index-module_content_SO1HL",K="index-module_title_SVPzd",Z="index-module_desc_MlCQ9",J="index-module_img_SBaEY",X="index-module_trialButton_tH3iD",$="index-module_footer_cL9eu",ee="index-module_btn_XNqZC";function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne={showInterestIntro:function(e){var t=window.appData.organization,r=p.a.isOwner(t),a=re(re(re(re({},_.INTEREST_CODE.thirdpart_address,{title:p.a.getPaymentFeatureDesc(_.INTEREST_CODE.thirdpart_address),desc:p.a.getFeatureIntro(_.INTEREST_CODE.thirdpart_address)}),_.INTEREST_CODE.group_department,{title:p.a.getPaymentFeatureDesc(_.INTEREST_CODE.group_department),desc:p.a.getFeatureIntro(_.INTEREST_CODE.group_department)}),_.INTEREST_CODE.group_handover,{title:p.a.getPaymentFeatureDesc(_.INTEREST_CODE.group_handover),desc:p.a.getFeatureIntro(_.INTEREST_CODE.group_handover)}),_.INTEREST_CODE.public_page,{title:p.a.getPaymentFeatureDesc(_.INTEREST_CODE.public_page),desc:p.a.getFeatureIntro(_.INTEREST_CODE.public_page),link:i.a.createElement("a",{href:"https://www.yuque.com/yuque/organizations/xoios9x575i28vi9",target:"_blank"},__("查看详细介绍"))})[e];if(a){Object(f.spmClick)(y.ORG_LIMIT_SPM.pay_limit,{pay_source:e,organization_id:(null==t?void 0:t.id)||0});var o=p.a.buildOrgPayLink({action:"trial",paySource:e}),l=F.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:V,content:i.a.createElement("div",null,i.a.createElement("img",{className:J,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Lt7IR4oBkwIAAAAAAAAAAAAADvuFAQ/original"}),i.a.createElement("div",{className:H},i.a.createElement("p",{className:K},null==a?void 0:a.title),i.a.createElement("p",{className:Z},!r&&__("联系管理员升级空间版本，立享空间功能。"),null==a?void 0:a.desc,null==a?void 0:a.link),i.a.createElement("div",{className:$},r?i.a.createElement(i.a.Fragment,null,(null==t?void 0:t.canTrial)&&i.a.createElement(n.a,{className:d()(X,ee),href:o},__("领取 {days} 天试用",{days:15})),i.a.createElement(Q,{className:ee,type:"primary",organization:t,code:e})):i.a.createElement(n.a,{className:d()(ee),type:"primary",onClick:function(){return l.destroy()}},__("知道了"))))),okText:null})}}};function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function(e){var t=e.organization,r=e.code,o=e.type,l=e.className,c=e.text,u=p.a.getFeatureBelongsPayment(r);return p.a.isPremium(t)?u===(null==t?void 0:t.payment_type)?i.a.createElement(n.a,{type:o,className:l,onClick:function(){var e;a.a.warning(__("当前版本已是{payment}",{payment:null===(e=p.a.PAYMENT_MAP)||void 0===e?void 0:e[u]}))}},c):i.a.createElement(j,{organization:t,type:o,text:c,className:l,paySource:r}):i.a.createElement(T,{organization:t,type:o,text:c,targetLevel:u,className:l,paySource:r})};function le(e){var t,r=e.organization,n=e.className,a=r.expired_at,o=r.payment_type,l=p.a.isOwner(r),c=(null===(t=b.ORG_AMOUNT_MAP[null==r?void 0:r.payment_type])||void 0===t?void 0:t.name)||b.ORG_AMOUNT_MAP[g.PAYMENT_TYPE.enterprise].name,u=p.a.buildOrgPayLink({action:"renew",paySource:y.LIMIT_SCENE.org_dashboard_user_menu_buy});if(o===g.PAYMENT_TYPE.free&&!l)return null;if(p.a.isFree(r)&&l)return u=p.a.buildOrgPayLink({action:"buy",paySource:y.LIMIT_SCENE.org_dashboard_user_menu_buy}),i.a.createElement("div",{className:d()(L.tip,L.freeWarpper),"data-testid":"org-preview-tip"},i.a.createElement("div",{className:L.payflowTitle},b.ORG_AMOUNT_MAP[g.PAYMENT_TYPE.free].name),i.a.createElement("a",{href:u,className:L.payment,target:"_blank"},__("升级")));var m,f=s()(a).diff(s()(),"day"),h=!1;return s()(a).isBefore(s()())?(m=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.orgExpiredTip},__("{paymentType}已过期",{paymentType:c}))),h=!0):0===f?(m=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.orgExpiredTip},__("空间将于今日到期"))),h=!0):f<15&&f>0?(m=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:L.orgExpiredTip},__("{paymentType} {days} 天后到期",{paymentType:c,days:f}))),h=!0):m=i.a.createElement("p",{className:L.orgExpiredTipText},__("有效期至{expiredAt}",{expiredAt:i.a.createElement("span",{title:s()(a).format("YYYY-MM-DD")},s()(a).format("YYYY-MM-DD"))})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:d()(L.tip,n,oe({},L.isExpired,h)),"data-testid":"org-preview-tip"},i.a.createElement("span",null,m),l&&i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:u,target:"_blank",className:L.payment},__("续费")))))}function ce(e){var t=e.organization,r=e.showThumb,a=void 0===r||r,l=(e.children,e.titleClassName),c=e.thumbClassName,u=e.actionsLayout,s=void 0===u?"horizontal":u,m=e.code,_=e.className,b=p.a.getPaymentFeatureDesc(m)||__("付费版空间专属功能"),g=p.a.getFeatureIntro(m);return Object(o.useEffect)((function(){Object(f.spmClick)(y.ORG_LIMIT_SPM.pay_limit,{pay_source:m,organization_id:(null==t?void 0:t.id)||0})}),[]),i.a.createElement("div",{className:d()(L.paymentGuideWrapper,_)},a&&i.a.createElement(h.a,{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*oKPaTZWb5BwAAAAAAAAAAAAADvuFAQ/original",darkAlpha:.9,className:d()(L.thumb,c)}),i.a.createElement("h6",{className:d()(L.title,l)},b),i.a.createElement("div",{className:L.body},g),i.a.createElement("div",{className:d()(L.actions,"horizontal"===s?L.horizontal:L.vertical)},"vertical"===s?i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{organization:t,type:"primary",code:m,className:L.btn}),i.a.createElement(n.a,{style:{marginTop:"12px"},"data-desktoptarget":"_browser",type:"link",href:"/about/price#team",target:"_blank"},__("了解不同版本权益"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{href:"/about/price#team",target:"_blank",className:L.link},__("了解不同版本权益")),i.a.createElement(ie,{organization:t,code:m}))))}ie.propTypes={organization:c.a.object.isRequired,className:c.a.string,code:c.a.oneOf(Object.values(_.INTEREST_CODE,y.LIMIT_RULE_CODE)),type:c.a.string,text:c.a.string},ie.defaultProps={type:"link"},le.propTypes={organization:c.a.object.isRequired,className:c.a.string},ce.propTypes={organization:c.a.object.isRequired,showThumb:c.a.bool,children:c.a.node,titleClassName:c.a.string,thumbClassName:c.a.string,actionsLayout:c.a.string,code:c.a.string,className:c.a.string},c.a.object.isRequired},1354:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},1355:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-loading-desk",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("pattern",{id:"3718679761c",width:"100%",height:"100%",patternUnits:"objectBoundingBox"},n.createElement("use",{xlinkHref:"#3718679761a"})),n.createElement("image",{id:"3718679761a",width:22,height:22,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAAcITNaAAAEB0lEQVQ4EU2V3W4bNxCFZ0juSpaFukF9Y8Mx0su+QoG8aF+iQZ+i6Su0Nw1SBIhbVbb1uz9kv7OUahOguMsdnjlzZobynz/8UnIuVkq2nOscR62jvax6HmXTmdmDmf/tzjRfWfB/vZR1jPHRgj2zvwkWt8E9WAiYsNbpp3ftOTgvo+CftxHgnsfO3A7BbOcx7tjfgbQVaIy2TSEEmOhwZgqovodQYF0m8FcOBD3g74jbPcY7Tu2S+UZMIbZJqXkOIe9eAWN2GkXUiiKRJHCanE4fM757MYXEjnA3NXwDLDwhxxPrpm0vXjMW2xq6IqizgovxibXCks47ApWeTx58HTyuYbpOF83TPMZt2zZnxgKETMXlWePMuuag7k367gF7Lh7WHuIqeljNZumfpkmPl4vF83w+397e3h4S9JXtiVEpldk4nplLZ31TYvXNetZnL2GVYngg7K9xlr42i8XqzXL5eHd3R+Ji6LquOWmsQ5Whu4BGgUxDeqvUTlIoaasY/UsI8a/Z5fzzd1dXD9fX1+umaQK2LTPMZrNwYqyyqFWgKlHCtIqphurZXdLahtL8FGP6Y7n85vf7+5svgJa+79uUiIHR99RT6Stw1ZNCo8RqRchJtBgzs4Ifj0cbhv5z07S/vX17+/Hm5qaDWTsMg8jJSIyJ8xhSam1iLCoaAj2PFwette2sbpfy0/v3P/7KC8mPi773gEohZ3cqwWDuJBFSyaTxcAZjPSNrVWlpjvPZ7LC8XH76/t27b/dd/iEaHRdspIEyCmT4FJhjasiipbOkXxIzERRn3icwYhrpu45VHfZIif05juXejnsbInXrYW8xdSCNkBsBwEEd6F0SoJ1eBQgITaxatYGVQOmwbDv6Zk32DpjNSfqVEz+XRdPYcCjuPcyHjCoIDamUyUVJkBT5WmNWqOAwADC4LpkMsNtWrIlpLNQY1C6iBep5xDstUkpHrXN/JF4L7GUXc6rhKoypq/RxAKy3Qn0F21N4ByTsYJZJO/egtUDOQ4kU5UCYFKBY+0irhYHLdQzjkBOGXCoO06LrcKBPlAV12JFU6mrssVGHkCoVeCJ3pcmeW0jlqHvcowIImZb0kscBWWCssKuu0naatRt6safTtCfdkX3KMihUU/FE1TaqCOdPwSyiFjS4+TFwkuuEzcFJCoAlA85AAdBZiQS2zp1BBxmn9bcQsRO4EJHRUYrHoGCyD1BOCh1H7E4AyILGgGI6MYWCKgUTYKbOgjUZJumR0AHn0p7KVMKIH/HgX1L8z7ZKAiDsOTySFWqZ2sBIQWpwDBkLzW8R0Ig3NAAZx5zhA6b8SVBukp2wBYYTztWV62IChQ6YOjqFCj3U05aLKsE7rSdP5E4+kYx+sf8AV5aZ7yAju6MAAAAASUVORK5CYII="}),n.createElement("path",{id:"3718679761b",d:"M0 0h24v24H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"3718679761d",fill:"#fff"},n.createElement("use",{xlinkHref:"#3718679761b"})),n.createElement("path",{d:"M12 1.114a1.286 1.286 0 1 1 0 2.572A8.314 8.314 0 1 0 20.314 12c0-.805-.114-1.593-.336-2.349a1.286 1.286 0 0 1 2.467-.724c.291.99.44 2.022.44 3.073 0 6.012-4.873 10.886-10.885 10.886S1.114 18.012 1.114 12 5.988 1.114 12 1.114Z",fill:"url(#3718679761c)",fillRule:"nonzero",mask:"url(#3718679761d)"})))},1479:function(e,t,r){"use strict";function n(){return window.appData.isDesktopApp&&!window.appData.interest?{interests:{open_ocr:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?null===(a=window.appData.currentOrganization)||void 0===a?void 0:a.isPremium:"Group"===(null===(r=window.appData.group)||void 0===r?void 0:r.type)||(null===(n=window.appData.me)||void 0===n?void 0:n.isPaid)),create_public_resource:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?(null===(t=window.appData.currentOrganization)||void 0===t?void 0:t.isPremium)&&window.appData.currentOrganization.share_to_outside_enable:null===(e=window.appData.me)||void 0===e?void 0:e.isPaid)}}:window.appData.interest||{interests:{}};var e,t,r,n,a}r.r(t),r.d(t,"getInterest",(function(){return n}))},1480:function(e,t,r){const n=r(1354),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return a[4*(e-1)+0];case n.M:return a[4*(e-1)+1];case n.Q:return a[4*(e-1)+2];case n.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return o[4*(e-1)+0];case n.M:return o[4*(e-1)+1];case n.Q:return o[4*(e-1)+2];case n.H:return o[4*(e-1)+3];default:return}}},1481:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1482:function(e,t){const r="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(r,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+n+"$"),i=new RegExp("^"+r+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return l.test(e)}},1483:function(e,t){function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:n,scale:n?4:a,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){const n=t.getScale(e,r);return Math.floor((e+2*r.margin)*n)},t.qrToImageData=function(e,r,n){const a=r.modules.size,o=r.modules.data,i=t.getScale(a,n),l=Math.floor((a+2*n.margin)*i),c=n.margin*i,u=[n.color.light,n.color.dark];for(let t=0;t<l;t++)for(let r=0;r<l;r++){let s=4*(t*l+r),m=n.color.light;if(t>=c&&r>=c&&t<l-c&&r<l-c){m=u[o[Math.floor((t-c)/i)*a+Math.floor((r-c)/i)]?1:0]}e[s++]=m.r,e[s++]=m.g,e[s++]=m.b,e[s]=m.a}}},1486:function(e,t,r){const n=r(2848),a=r(2849),o=r(2866),i=r(2867);function l(e,t,r,o,i){const l=[].slice.call(arguments,1),c=l.length,u="function"==typeof l[c-1];if(!u&&!n())throw new Error("Callback required as last argument");if(!u){if(c<1)throw new Error("Too few arguments provided");return 1===c?(r=t,t=o=void 0):2!==c||t.getContext||(o=r,r=t,t=void 0),new Promise((function(n,i){try{const i=a.create(r,o);n(e(i,t,o))}catch(e){i(e)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(i=r,r=t,t=o=void 0):3===c&&(t.getContext&&void 0===i?(i=o,o=void 0):(i=o,o=r,r=t,t=void 0));try{const n=a.create(r,o);i(null,e(n,t,o))}catch(e){i(e)}}t.create=a.create,t.toCanvas=l.bind(null,o.render),t.toDataURL=l.bind(null,o.renderToDataURL),t.toString=l.bind(null,(function(e,t,r){return i.render(e,r)}))},1487:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(4),i=r.n(o),l=r(6),c=r.n(l),u=r(69),s=r(59),m=r(979),d="badgelite-module_memberBadgeLiteTextAlibaba_eY+40",f="badgelite-module_memberBadgeLiteContainer_1caED",p="badgelite-module_memberBadgeLiteText_2xxqK",y="badgelite-module_memberBadgeLiteNomeContainer_9AJD2",h="badgelite-module_memberBadgeLiteGroupContainer_6-b6V",_="badgelite-module_memberBadgeLiteH5Container_ituBE";function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function E(e,t,r){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var T=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=E(this,t,[e])).state={user:r.props.user},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.isMobile,r=e.useMobile,n=void 0!==r&&r,o=e.className,i=void 0===o?"":o,l=window.appData,b=l.isYuque,g=l.organization,v=this.state.user,E=v.memberLevelName,A=v.member_level;if(!b)return n?null:a.a.createElement("a",{href:u.LINKS.INTERNAL_MEMBER_INTRO_LINK,target:"_blank"},a.a.createElement("p",{className:y,"data-testid":"badge-lite"},a.a.createElement(s.b,{name:"member-big-level1-alibaba",width:24,height:28}),a.a.createElement("span",{className:d},__("语雀会员"))));if(!v.isPaid||g)return null;var w=m.a.isGroupOrPublication(v);if(t||n){var O=c()(_,i),T="icon-member-level-".concat(A);return a.a.createElement("span",{className:O,"data-testid":"badge-lite"},a.a.createElement("a",{href:w?u.LINKS.EXTERNAL_GROUP_INTRO_LINK:u.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},a.a.createElement(s.b,{name:w?"member-level1":T,height:22,width:23})))}if(w){var P=c()(h,i);return a.a.createElement("span",{className:P,"data-testid":"badge-lite"},a.a.createElement("a",{href:u.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},a.a.createElement(s.b,{name:"member-big-level1",width:24,height:28}),a.a.createElement("span",{className:p},__("高级版团队"))))}var S=c()(f,i),N="icon-member-level-".concat(A);return a.a.createElement("div",{className:S,"data-testid":"badge-lite"},a.a.createElement("a",{href:u.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},a.a.createElement(s.b,{name:N,width:24,height:28}),a.a.createElement("span",{className:p},E)))}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(n.Component);T.propTypes={user:i.a.object,isMobile:i.a.bool,useMobile:i.a.bool,className:i.a.string};t.a=T},1489:function(e,t,r){"use strict";var n=r(0);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=e.initValue,o=e.totalAmount,i=e.setPromoCode,l=e.afterVerifySuccess,c=a(Object(n.useState)(r),2),u=c[0],s=c[1];u&&(t=(t=o-u>1?o-u:1).toFixed(2));return{totalAmountWithPromo:t,onVerifySuccess:function(e){s(e&&e.amount),l&&l()},handlePromoChange:function(e){i(e),u&&s(0)}}}},1520:function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=r(15),i=r(20),l=i.ORDER_TYPE,c=i.PRICE_STAGES,u=i.PAYMENT_TYPE,s=r(69).MEMBER_RULE,m=r(93);function d(e){var t=m.TRANSITION_DEADLINE,r=m.OLD_ORGANIZATION_DEADLINE,n=o().isBefore(t),a=o(e).isBefore(r);return n&&a}e.exports=function(e){var t=e.order_type,r=e.member_size,n=void 0===r?e.max_member:r,a=e.duration,i=e.upload_size,u=e.expired_at,s=e.created_at,f=e.max_member,p=e.enableDiscount,y=void 0===p||p,h=m.ORG_UPLOAD_SIZE_MAP,_=m.OLD_ORGANIZATION_DEADLINE;if(t===l.data){var b=Object.values(h).find((function(e){return e.value===i}));if(b)return b.price}var g,v=o(s).isBefore(_),E=o(s).endOf("day").add(v?90:30,"day"),A=o().isAfter(E)?o():E;u?(g=o(u).diff(A,"day"))<0&&(g=0):g=0;var w=0,O=0;if(y&&d(s))w=12*n,O=12*f;else{var T=c.find((function(e){return e.member===n}));if(!T)return null;w=T.price;var P=c.find((function(e){return e.member===f}));if(!P)return null;O=P.price}var S=(w-O)*g/365;switch(S<0&&(S=0),t){case l.upgrade:case l.buy:return(w*a).toFixed(2);case l.renew:return(w*a+S).toFixed(2);case l.buyMember:return Math.max(S,.01).toFixed(2);default:return}},e.exports.hasDiscount=d,e.exports.getCostDetail=function(e,t,r,n,a,i){var l,u,s,d,f,p=m.OLD_ORGANIZATION_DEADLINE,y=o(e).isBefore(p),h=o(e).endOf("day").add(y?90:30,"day"),_=o().isAfter(h)?o():h;t?(l=o(t).diff(_,"day"))<0&&(l=0):l=0;var b=(c.find((function(e){return e.member===r}))||{}).price,g=(c.find((function(e){return e.member===n}))||{}).price;return b&&g?(i?(u=12*r*a,s=(12*(r-n)*l/365).toFixed(2),d=b*a,f=((b-g)*l/365).toFixed(2)):(u=b*a,s=((b-g)*l/365).toFixed(2)),{renewAmount:u,upgradeAmount:s,rawRenewAmount:d,rawUpgradeAmount:f}):{}},e.exports.getOrganizationMemberStage=function(e){var t={};if(e=e||0){var r,a=n(c);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(t=o,e<=o.member)break}}catch(e){a.e(e)}finally{a.f()}}return t.member||s.Organization[u.free].max_member},e.exports.mergeGroupExpiredAtToOrganization=function(e,t){if(e){var r=o(e);return t&&o(t).isAfter(o())&&(r=o(t).add(o(e).diff(o()),"milliseconds")),r}}},1676:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-new-ellipsis",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M227.008 128c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20ZM148 128c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20Zm-78.992 0c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20Z",fill:"currentColor",fillRule:"nonzero"}))},2848:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},2849:function(e,t,r){const n=r(903),a=r(1354),o=r(2850),i=r(2851),l=r(2852),c=r(2853),u=r(2854),s=r(1480),m=r(2855),d=r(2858),f=r(2859),p=r(904),y=r(2860);function h(e,t,r){const n=e.size,a=f.getEncodedBits(t,r);let o,i;for(o=0;o<15;o++)i=1==(a>>o&1),o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(n-15+o,8,i,!0),o<8?e.set(8,n-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(n-8,8,1,!0)}function _(e,t,r){const a=new o;r.forEach((function(t){a.put(t.mode.bit,4),a.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(a)}));const i=8*(n.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const l=(i-a.getLengthInBits())/8;for(let e=0;e<l;e++)a.put(e%2?17:236,8);return function(e,t,r){const a=n.getSymbolTotalCodewords(t),o=s.getTotalCodewordsCount(t,r),i=a-o,l=s.getBlocksCount(t,r),c=a%l,u=l-c,d=Math.floor(a/l),f=Math.floor(i/l),p=f+1,y=d-f,h=new m(y);let _=0;const b=new Array(l),g=new Array(l);let v=0;const E=new Uint8Array(e.buffer);for(let e=0;e<l;e++){const t=e<u?f:p;b[e]=E.slice(_,_+t),g[e]=h.encode(b[e]),_+=t,v=Math.max(v,t)}const A=new Uint8Array(a);let w,O,T=0;for(w=0;w<v;w++)for(O=0;O<l;O++)w<b[O].length&&(A[T++]=b[O][w]);for(w=0;w<y;w++)for(O=0;O<l;O++)A[T++]=g[O][w];return A}(a,e,t)}function b(e,t,r,a){let o;if(Array.isArray(e))o=y.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=y.rawSplit(e);n=d.getBestVersionForData(t,r)}o=y.fromString(e,n||40)}}const s=d.getBestVersionForData(o,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else t=s;const m=_(t,r,o),f=n.getSymbolSize(t),p=new i(f);return function(e,t){const r=e.size,n=c.getPositions(t);for(let t=0;t<n.length;t++){const a=n[t][0],o=n[t][1];for(let t=-1;t<=7;t++)if(!(a+t<=-1||r<=a+t))for(let n=-1;n<=7;n++)o+n<=-1||r<=o+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(a+t,o+n,!0,!0):e.set(a+t,o+n,!1,!0))}}(p,t),function(e){const t=e.size;for(let r=8;r<t-8;r++){const t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(p),function(e,t){const r=l.getPositions(t);for(let t=0;t<r.length;t++){const n=r[t][0],a=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,a+r,!0,!0):e.set(n+t,a+r,!1,!0)}}(p,t),h(p,r,0),t>=7&&function(e,t){const r=e.size,n=d.getEncodedBits(t);let a,o,i;for(let t=0;t<18;t++)a=Math.floor(t/3),o=t%3+r-8-3,i=1==(n>>t&1),e.set(a,o,i,!0),e.set(o,a,i,!0)}(p,t),function(e,t){const r=e.size;let n=-1,a=r-1,o=7,i=0;for(let l=r-1;l>0;l-=2)for(6===l&&l--;;){for(let r=0;r<2;r++)if(!e.isReserved(a,l-r)){let n=!1;i<t.length&&(n=1==(t[i]>>>o&1)),e.set(a,l-r,n),o--,-1===o&&(i++,o=7)}if(a+=n,a<0||r<=a){a-=n,n=-n;break}}}(p,m),isNaN(a)&&(a=u.getBestMask(p,h.bind(null,p,r))),u.applyMask(a,p),h(p,r,a),{modules:p,version:t,errorCorrectionLevel:r,maskPattern:a,segments:o}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let r,o,i=a.M;return void 0!==t&&(i=a.from(t.errorCorrectionLevel,a.M),r=d.from(t.version),o=u.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),b(e,r,i,o)}},2850:function(e,t){function r(){this.buffer=[],this.length=0}r.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=r},2851:function(e,t){function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}r.prototype.set=function(e,t,r,n){const a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=r},2852:function(e,t,r){const n=r(903).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,r=n(e),a=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-a;return o.push(6),o.reverse()},t.getPositions=function(e){const r=[],n=t.getRowColCoords(e),a=n.length;for(let e=0;e<a;e++)for(let t=0;t<a;t++)0===e&&0===t||0===e&&t===a-1||e===a-1&&0===t||r.push([n[e],n[t]]);return r}},2853:function(e,t,r){const n=r(903).getSymbolSize;t.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},2854:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r=3,n=3,a=40,o=10;function i(e,r,n){switch(e){case t.Patterns.PATTERN000:return(r+n)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(r+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return r*n%2+r*n%3==0;case t.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case t.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let n=0,a=0,o=0,i=null,l=null;for(let c=0;c<t;c++){a=o=0,i=l=null;for(let u=0;u<t;u++){let t=e.get(c,u);t===i?a++:(a>=5&&(n+=r+(a-5)),i=t,a=1),t=e.get(u,c),t===l?o++:(o>=5&&(n+=r+(o-5)),l=t,o=1)}a>=5&&(n+=r+(a-5)),o>=5&&(n+=r+(o-5))}return n},t.getPenaltyN2=function(e){const t=e.size;let r=0;for(let n=0;n<t-1;n++)for(let a=0;a<t-1;a++){const t=e.get(n,a)+e.get(n,a+1)+e.get(n+1,a)+e.get(n+1,a+1);4!==t&&0!==t||r++}return r*n},t.getPenaltyN3=function(e){const t=e.size;let r=0,n=0,o=0;for(let a=0;a<t;a++){n=o=0;for(let i=0;i<t;i++)n=n<<1&2047|e.get(a,i),i>=10&&(1488===n||93===n)&&r++,o=o<<1&2047|e.get(i,a),i>=10&&(1488===o||93===o)&&r++}return r*a},t.getPenaltyN4=function(e){let t=0;const r=e.data.length;for(let n=0;n<r;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/r/5)-10)*o},t.applyMask=function(e,t){const r=t.size;for(let n=0;n<r;n++)for(let a=0;a<r;a++)t.isReserved(a,n)||t.xor(a,n,i(e,a,n))},t.getBestMask=function(e,r){const n=Object.keys(t.Patterns).length;let a=0,o=1/0;for(let i=0;i<n;i++){r(i),t.applyMask(i,e);const n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),n<o&&(o=n,a=i)}return a}},2855:function(e,t,r){const n=r(2856);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=n.mod(t,this.genPoly),a=this.degree-r.length;if(a>0){const e=new Uint8Array(this.degree);return e.set(r,a),e}return r},e.exports=a},2856:function(e,t,r){const n=r(2857);t.mul=function(e,t){const r=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let o=0;o<t.length;o++)r[a+o]^=n.mul(e[a],t[o]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){const e=r[0];for(let a=0;a<t.length;a++)r[a]^=n.mul(t[a],e);let a=0;for(;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let a=0;a<e;a++)r=t.mul(r,new Uint8Array([1,n.exp(a)]));return r}},2857:function(e,t){const r=new Uint8Array(512),n=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,n[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},2858:function(e,t,r){const n=r(903),a=r(1480),o=r(1354),i=r(904),l=r(1481),c=n.getBCHDigit(7973);function u(e,t){return i.getCharCountIndicator(e,t)+4}function s(e,t){let r=0;return e.forEach((function(e){const n=u(e.mode,t);r+=n+e.getBitsLength()})),r}t.from=function(e,t){return l.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!l.isValid(e))throw new Error("Invalid QR Code version");void 0===r&&(r=i.BYTE);const o=8*(n.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(r===i.MIXED)return o;const c=o-u(r,e);switch(r){case i.NUMERIC:return Math.floor(c/10*3);case i.ALPHANUMERIC:return Math.floor(c/11*2);case i.KANJI:return Math.floor(c/13);case i.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,r){let n;const a=o.from(r,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let n=1;n<=40;n++)if(s(e,n)<=t.getCapacity(n,r,i.MIXED))return n}(e,a);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,r,n){for(let a=1;a<=40;a++)if(r<=t.getCapacity(a,n,e))return a}(n.mode,n.getLength(),a)},t.getEncodedBits=function(e){if(!l.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-c>=0;)t^=7973<<n.getBCHDigit(t)-c;return e<<12|t}},2859:function(e,t,r){const n=r(903),a=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){const r=e.bit<<3|t;let o=r<<10;for(;n.getBCHDigit(o)-a>=0;)o^=1335<<n.getBCHDigit(o)-a;return 21522^(r<<10|o)}},2860:function(e,t,r){const n=r(904),a=r(2861),o=r(2862),i=r(2863),l=r(2864),c=r(1482),u=r(903),s=r(2865);function m(e){return unescape(encodeURIComponent(e)).length}function d(e,t,r){const n=[];let a;for(;null!==(a=e.exec(r));)n.push({data:a[0],index:a.index,mode:t,length:a[0].length});return n}function f(e){const t=d(c.NUMERIC,n.NUMERIC,e),r=d(c.ALPHANUMERIC,n.ALPHANUMERIC,e);let a,o;u.isKanjiModeEnabled()?(a=d(c.BYTE,n.BYTE,e),o=d(c.KANJI,n.KANJI,e)):(a=d(c.BYTE_KANJI,n.BYTE,e),o=[]);return t.concat(r,a,o).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case n.NUMERIC:return a.getBitsLength(e);case n.ALPHANUMERIC:return o.getBitsLength(e);case n.KANJI:return l.getBitsLength(e);case n.BYTE:return i.getBitsLength(e)}}function y(e,t){let r;const c=n.getBestModeForData(e);if(r=n.from(t,c),r!==n.BYTE&&r.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(c));switch(r!==n.KANJI||u.isKanjiModeEnabled()||(r=n.BYTE),r){case n.NUMERIC:return new a(e);case n.ALPHANUMERIC:return new o(e);case n.KANJI:return new l(e);case n.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(y(t,null)):t.data&&e.push(y(t.data,t.mode)),e}),[])},t.fromString=function(e,r){const a=function(e){const t=[];for(let r=0;r<e.length;r++){const a=e[r];switch(a.mode){case n.NUMERIC:t.push([a,{data:a.data,mode:n.ALPHANUMERIC,length:a.length},{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.ALPHANUMERIC:t.push([a,{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.KANJI:t.push([a,{data:a.data,mode:n.BYTE,length:m(a.data)}]);break;case n.BYTE:t.push([{data:a.data,mode:n.BYTE,length:m(a.data)}])}}return t}(f(e,u.isKanjiModeEnabled())),o=function(e,t){const r={},a={start:{}};let o=["start"];for(let i=0;i<e.length;i++){const l=e[i],c=[];for(let e=0;e<l.length;e++){const u=l[e],s=""+i+e;c.push(s),r[s]={node:u,lastCount:0},a[s]={};for(let e=0;e<o.length;e++){const i=o[e];r[i]&&r[i].node.mode===u.mode?(a[i][s]=p(r[i].lastCount+u.length,u.mode)-p(r[i].lastCount,u.mode),r[i].lastCount+=u.length):(r[i]&&(r[i].lastCount=u.length),a[i][s]=p(u.length,u.mode)+4+n.getCharCountIndicator(u.mode,t))}}o=c}for(let e=0;e<o.length;e++)a[o[e]].end=0;return{map:a,table:r}}(a,r),i=s.find_path(o.map,"start","end"),l=[];for(let e=1;e<i.length-1;e++)l.push(o.table[i[e]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(l))},t.rawSplit=function(e){return t.fromArray(f(e,u.isKanjiModeEnabled()))}},2861:function(e,t,r){const n=r(904);function a(e){this.mode=n.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);const a=this.data.length-t;a>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,3*a+1))},e.exports=a},2862:function(e,t,r){const n=r(904),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=n.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*a.indexOf(this.data[t]);r+=a.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},2863:function(e,t,r){const n=r(904);function a(e){this.mode=n.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=a},2864:function(e,t,r){const n=r(904),a=r(903);function o(e){this.mode=n.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=a.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},e.exports=o},2865:function(e,t,r){"use strict";var n={single_source_shortest_paths:function(e,t,r){var a={},o={};o[t]=0;var i,l,c,u,s,m,d,f=n.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(c in l=(i=f.pop()).value,u=i.cost,s=e[l]||{})s.hasOwnProperty(c)&&(m=u+s[c],d=o[c],(void 0===o[c]||d>m)&&(o[c]=m,f.push(c,m),a[c]=l));if(void 0!==r&&void 0===o[r]){var p=["Could not find a path from ",t," to ",r,"."].join("");throw new Error(p)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,t,r){var a=n.single_source_shortest_paths(e,t,r);return n.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(e){var t,r=n.PriorityQueue,a={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a.queue=[],a.sorter=e.sorter||r.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=n},2866:function(e,t,r){const n=r(1483);t.render=function(e,t,r){let a=r,o=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=n.getOptions(a);const i=n.getImageWidth(e.modules.size,a),l=o.getContext("2d"),c=l.createImageData(i,i);return n.qrToImageData(c.data,e,a),function(e,t,r){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=r,t.width=r,t.style.height=r+"px",t.style.width=r+"px"}(l,o,i),l.putImageData(c,0,0),o},t.renderToDataURL=function(e,r,n){let a=n;void 0!==a||r&&r.getContext||(a=r,r=void 0),a||(a={});const o=t.render(e,r,a),i=a.type||"image/png",l=a.rendererOpts||{};return o.toDataURL(i,l.quality)}},2867:function(e,t,r){const n=r(1483);function a(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function o(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){const i=n.getOptions(t),l=e.modules.size,c=e.modules.data,u=l+2*i.margin,s=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",m="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,r){let n="",a=0,i=!1,l=0;for(let c=0;c<e.length;c++){const u=Math.floor(c%t),s=Math.floor(c/t);u||i||(i=!0),e[c]?(l++,c>0&&u>0&&e[c-1]||(n+=i?o("M",u+r,.5+s+r):o("m",a,0),a=0,i=!1),u+1<t&&e[c+1]||(n+=o("h",l),l=0)):a++}return n}(c,l,i.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+s+m+"</svg>\n";return"function"==typeof r&&r(null,f),f}},34:function(e,t,r){"use strict";var n=r(57),a=r.n(n),o=(r(1053),r(313)),i=r(50),l=r.n(i),c=r(65),u=r.n(c),s=r(0),m=r.n(s),d=r(4),f=r.n(d),p=r(6),y=r.n(p),h=r(66),_=r.n(h),b=r(908),g=(r(187),["className","dropdownClassName"]);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=m.a.forwardRef((function(e,t){var r=e.className,n=e.dropdownClassName,a=u()(e,g);return m.a.createElement(o.a,l()({className:y()("larkui-select",r),dropdownClassName:y()("larkui-select-dropdown",n),ref:t,suffixIcon:m.a.createElement(b.default,null)},a))}));A.propTypes=E(E({},o.a.SelectProps),{},{className:f.a.string,dropdownClassName:f.a.string}),_()(A,o.a),t.a=A},3847:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(0),a=r(1288);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"leftSidebarWidth",get:function(){return this._leftSidebarWidth}},{key:"rightSidebarWidth",get:function(){return this._rightSidebarWidth}},{key:"addChangedListener",value:function(e){var t=this;return this._listeners.push(e),function(){return t.removeChangedListener(e)}}},{key:"removeChangedListener",value:function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))}},{key:"handleSidebarWidthChange",value:function(e){var t=e.leftWidth,r=e.rightWidth;null!=t&&this._leftSidebarWidth!==t&&(this._leftSidebarWidth=t,this._listeners.forEach((function(e){var r;null===(r=e.onLeftSidebarWidth)||void 0===r||r.call(e,t)}))),null!=r&&this._rightSidebarWidth!==r&&(this._rightSidebarWidth=r,this._listeners.forEach((function(e){var t;null===(t=e.onRightSidebarWidth)||void 0===t||t.call(e,r)})));var n=document.getElementsByClassName("main-wrapper")[0];if(n){var a=this._leftSidebarWidth+this._rightSidebarWidth;n.style.width="calc(100vw - ".concat(a,"px)"),n.style["margin-left"]="".concat(this._leftSidebarWidth,"px"),n.style["margin-right"]="".concat(this._rightSidebarWidth,"px"),window.dispatchEvent(new CustomEvent("DashboardSideBar.resize",{detail:{leftSidebarWidth:this._leftSidebarWidth,rightSidebarWidth:this._rightSidebarWidth}}))}}}],(t=null)&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function s(){var e=Object(a.a)();return Object(n.useEffect)((function(){return u.addChangedListener({onRightSidebarWidth:e})}),[]),{rightSidebarWidth:u.rightSidebarWidth}}l(u,"_leftSidebarWidth",0),l(u,"_rightSidebarWidth",0),l(u,"_listeners",[])},3967:function(e,t,r){e.exports=r(3978)},3978:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=l(a),i=l(r(4));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.scrollListener=r.scrollListener.bind(r),r.eventListenerOptions=r.eventListenerOptions.bind(r),r.mousewheelListener=r.mousewheelListener.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){this.props.useCapture;return this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,r=this.getParentElement(e),n=void 0;if(this.props.useWindow){var a=document.documentElement||document.body.parentNode||document.body,o=void 0!==t.pageYOffset?t.pageYOffset:a.scrollTop;n=this.props.isReverse?o:this.calculateOffset(e,o)}else n=this.props.isReverse?r.scrollTop:e.scrollHeight-r.scrollTop-r.clientHeight;n<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),r=t.children,n=t.element,a=t.hasMore,i=(t.initialLoad,t.isReverse),l=t.loader,c=(t.loadMore,t.pageStart,t.ref),u=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));u.ref=function(t){e.scrollComponent=t,c&&c(t)};var s=[r];return a&&(l?i?s.unshift(l):s.push(l):this.defaultLoader&&(i?s.unshift(this.defaultLoader):s.push(this.defaultLoader))),o.default.createElement(n,u,s)}}]),t}(a.Component);c.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},c.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=c,e.exports=t.default},4101:function(e,t,r){"use strict";r(170);var n=r(70),a=(r(905),r(542)),o=r(0),i=r.n(o),l=r(4),c=r.n(l),u=r(930),s=r.n(u),m=r(6),d=r.n(m),f=r(59),p=r(3847),y="CornerBubble-module_cornerBubble_2kGnu",h="CornerBubble-module_cornerCount_O3YTX",_="CornerBubble-module_cornerCountLarge_3x8Br",b="CornerBubble-module_cornerCountHover_x2J7h",g="CornerBubble-module_cornerIcon_N8Ibc",v="CornerBubble-module_btnWord_-QoZm",E="CornerBubble-module_badge_SQuZN";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){var t,r,o=e.count,l=e.style,c=e.onClick,u=e.iconName,m=e.iconSize,A=e.countPopoverContent,w=e.countPopoverClassName,P=e.renderBadge,S=e.tooltipText,N=e.btnWord,M=Object(p.b)().rightSidebarWidth;return i.a.createElement(n.a,{title:S},i.a.createElement("div",{className:y,onClick:c,style:O(O({},l),{},{right:M+24})},s()(o)&&o>0&&(t=!!A,r=i.a.createElement("div",{className:d()(T(T(T({},h,!0),b,t),_,o>99))},o>99?"99+":o),t?i.a.createElement(a.a,{placement:"topRight",trigger:"hover",overlayClassName:w,content:A},r):r),P&&i.a.createElement("div",{className:E},P()),!!u&&i.a.createElement(f.b,{className:g,name:u,width:m||20}),!!N&&i.a.createElement("p",{className:v},N)))};P.propTypes={iconName:c.a.string.isRequired,iconSize:c.a.number,count:c.a.number,style:c.a.object,onClick:c.a.func,countPopoverContent:c.a.element,countPopoverClassName:c.a.string,renderBadge:c.a.func,tooltipText:c.a.string,btnWord:c.a.string};t.a=P},4125:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l}));var n=r(0),a={toggleLikeRef:{current:function(){}}},o=Object(n.createContext)(a);function i(e){return React.createElement(o.Provider,{value:a},e.children)}function l(){return Object(n.useContext)(o)}},4162:function(e,t,r){"use strict";r.r(t);r(62);var n=r(31),a=(r(170),r(70)),o=(r(270),r(135)),i=r(0),l=r.n(i),c=r(4),u=r.n(c),s=r(524),m=r(6),d=r.n(m),f=r(3967),p=r.n(f),y=r(53),h=r(1676),_=r(59),b=r(155),g=r(400),v=r.n(g),E=r(433),A=r(1493),w=r(1490),O=r(280),T=r(4101),P=r(94),S=r.n(P),N=r(48),M=r(1251);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(e,t){var r,n=t.type,a=t.payload,o={};switch(["clickButton","resetButton"].includes(n)&&(e.active?(o.count=Math.max(e.count-1,0),o.users=e.users.filter((function(e){var t;return e.id!==(null===(t=a.me)||void 0===t?void 0:t.id)})),o.active=!e.active):e.users.some((function(e){var t;return e.id===(null===(t=a.me)||void 0===t?void 0:t.id)}))||(o.count=e.count+1,o.users=x(e.users),a.me&&o.users.unshift(a.me),o.active=!e.active)),n){case"fetchLikeList":return k(k({},e),{},{loading:!0});case"updateLikeList":return r=0===a.page?a.data:[].concat(x(e.users),x(a.data)),k(k({},e),{},{users:r,loading:!1,hasMore:a.meta&&a.meta.hasMore,count:Math.max(e.count,r.length)});case"hoverButton":return k(k({},e),{},{hover:!0});case"unhoverButton":return k(k({},e),{},{hover:!1});case"clickButton":return k(k(k({},e),o),{},{noAnimate:!1,submitting:!0,hover:!1});case"resetButton":return k(k(k({},e),o),{},{noAnimate:!0,submitting:!1});case"clickSuccess":return k(k({},e),{},{submitting:!1});case"updateActive":return k(k({},e),{},{active:a.active});default:throw Error()}},B=function(e){var t=e.likeStatus,r=e.doc,n=e.dispatch,a=e.me,o=e.type,l=e.targetId,c=e.likeCount,u=e.scene,s=j(Object(i.useReducer)(Y,{hover:!1,submitting:!1,noAnimate:!0,users:[],loading:!1,hasMore:!1,active:!!t,count:c}),2),m=s[0],d=s[1],f=m.hover,p=m.submitting,y=m.noAnimate,h=m.users,_=m.loading,b=m.hasMore,g=m.active,v=m.count,E=j(Object(i.useState)(0),2),A=E[0],w=E[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;d({type:"fetchLikeList"}),N.a.actions.users({action_type:"like",target_type:o,target_id:l,limit:e,offset:A*e},{useOriginResp:!0,ignoreGlobalMessage:!0}).then((function(e){d({type:"updateLikeList",payload:{page:A,data:e.data,meta:e.meta}})}))},T=function(e){"single"!==u&&(w(0),O(e))};return Object(M.a)((function(){"single"!==u&&O(13)}),[]),Object(i.useEffect)((function(){d({type:"updateActive",payload:{active:S()(r,"like.actioned")}})}),[S()(r,"like.actioned")]),Object(i.useEffect)((function(){d({type:"updateActive",payload:{active:!!t}})}),[t]),{hover:f,active:g,noAnimate:y,loading:_,users:h,hasMore:b,count:v,toggleLike:function(){if(!p){d({type:"clickButton",payload:{me:a}});var e={action_type:"like",target_type:o,target_id:l};N.a.actions[g?"destroy":"create"](e).then((function(e){T(13),d({type:"clickSuccess"}),"single"!==u&&(window.yqWebApp?window.yqWebApp.updateDocLikes():n({type:"doc/updateLikes",payload:{active:e}}))})).catch((function(){d({type:"resetButton",payload:{me:a}})}))}},hoverBtn:function(){d({type:"hoverButton"})},unHoverBtn:function(){d({type:"unhoverButton"})},reload:T,loadMore:function(){w((function(e){return e+1})),O()}}},z=r(4125),F=r(4207);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q.apply(null,arguments)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t=e.type,r=e.targetId,c=e.simplify,u=e.size,s=e.bubblePopover,m=e.likeStatus,f=e.doc,g=e.dispatch,O=e.me,P=e.likeCount,S=e.scene,N=B({likeStatus:m,doc:f,dispatch:g,me:O,type:t,targetId:r,likeCount:P,scene:S}),M=N.hover,C=N.noAnimate,j=N.active,L=N.loading,k=N.hasMore,I=N.count,x=N.users,R=N.toggleLike,D=N.hoverBtn,Y=N.unHoverBtn,U=N.reload,W=N.loadMore;Object(z.b)().toggleLikeRef.current=R;var H=V(Object(i.useState)(!1),2),K=H[0],Z=H[1],J="bubble"===u,X="mini"===u,$="defaultWithBubble"===u,ee=X?24:32,te=x.filter((function(e){return e.id===(null==O?void 0:O.id)||![y.STATUS.banned,y.STATUS.blocked].includes(e.status)})),re=te&&te.slice(0,13),ne=te.length>13||k,ae=d()(F.a.larkLikeBtn,Q(Q(Q({},F.a.larkLikeBtnActive,j),F.a.larkLikeBtnShake,M&&!j),F.a.larkLikeBtnNoAnimate,C)),oe=function(){var t={};return s&&x&&x.length>0&&(t.countPopoverClassName=F.a.likePopover,t.countPopoverContent=l.a.createElement("div",{className:F.a.popoverUserContainer},l.a.createElement(p.a,{pageStart:0,loadMore:W,hasMore:!L&&k,threshold:100,useWindow:!1},l.a.createElement("div",{className:F.a.popoverUserList},x.map((function(e){return l.a.createElement("a",{className:F.a.popoverUserItem,key:e.id,href:"/".concat(e.login),target:"_blank"},l.a.createElement(E.a,{className:F.a.popoverUserItemAvatar,src:e.avatar_url,size:24,name:e.name}),l.a.createElement("div",{className:F.a.popoverUserItemName},e.name))}))),L&&k&&l.a.createElement(o.a,{justify:"block"})))),l.a.createElement(T.a,q({iconName:j?"like-bubble-active":"like-bubble",style:G({bottom:"140px"},e.bubbleStyle),count:I,onClick:v()((function(){R(),Object(b.spmClick)("d348445")}),300)},t))};return J?oe():c||X?l.a.createElement("div",{className:d()(F.a.simplifyLike,Q({},F.a.isMini,X)),onClick:v()(R,300)},j?l.a.createElement(_.b,{name:"like-small-after",width:ee,height:ee}):l.a.createElement(_.b,{name:"like-small-before",width:ee,height:ee}),X&&l.a.createElement("span",{className:F.a.text},I)):l.a.createElement(w.a,{tooltipPlacement:"top"},l.a.createElement("div",{className:F.a.larkLike},l.a.createElement("div",{className:ae,onMouseEnter:function(){D()},onMouseLeave:function(){Y()},onClick:function(){R(),Object(b.spmClick)("d348445")},"data-testid":"like-btn"},l.a.createElement("span",{className:F.a.larkLikeIcon})),I?l.a.createElement("p",{className:F.a.larkLikeCount,"data-testid":"like-count-desc"},__("{count} 人点赞",{count:I})):l.a.createElement("p",{className:F.a.larkLikeDocTip},l.a.createElement("span",null,__("若有收获，就点个赞吧"))),!!re.length&&l.a.createElement("ul",{className:d()(F.a.userList,F.a.readerUserList)},re.map((function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(A.a,{user:e},l.a.createElement(E.a,{src:e.avatar_url,size:"sm",name:e.name})))})),ne&&l.a.createElement(a.a,{placement:"bottom",title:__("查看所有点赞用户")},l.a.createElement("li",{className:F.a.showLikeList,onClick:function(){Z(!0),U()}},l.a.createElement(h.default,null)))),K&&l.a.createElement(n.a,{className:F.a.modal,footer:null,visible:K,onCancel:function(){Z((function(e){return!e}))}},l.a.createElement("img",{className:F.a.modalContentIcon,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*M-nVTIujAMsAAAAAAAAAAAAAARQnAQ"}),l.a.createElement("p",{className:F.a.modalContentCount},__("{count} 人点赞",{count:I})),l.a.createElement("div",{className:F.a.userListWrapper},te.length>0&&l.a.createElement(p.a,{pageStart:0,loadMore:W,hasMore:!L&&k,threshold:100,useWindow:!1},l.a.createElement("ul",{className:F.a.userList},te.map((function(e){return l.a.createElement("li",{key:e.id},l.a.createElement(A.a,{user:e},l.a.createElement(E.a,{src:e.avatar_url,size:"sm",name:e.name})))}))),L&&k&&l.a.createElement(o.a,{justify:"block"})))),$&&oe()))};K.defaultProps={size:"default",bubbleStyle:{}},K.propTypes={dispatch:u.a.func,type:u.a.oneOf(["Book","Doc"]),targetId:u.a.number.isRequired,doc:u.a.object,me:u.a.object,simplify:u.a.bool,likeStatus:u.a.object,likeCount:u.a.number,size:u.a.oneOf(["default","mini","bubble","defaultWithBubble"]),withCornerBubble:u.a.bool,bubblePopover:u.a.bool,bubbleStyle:u.a.object,scene:u.a.oneOf(["single"])};t.default=Object(O.b)(Object(s.d)((function(e){return{doc:e.doc,me:e.me}}))(K))},4207:function(e,t,r){"use strict";t.a={simplifyLike:"like-module_simplifyLike_GZF9s",text:"like-module_text_mdOB6",larkLike:"like-module_larkLike_zeNuZ",larkLikeIcon:"like-module_larkLikeIcon_5ZWgd",larkLikeBtnActive:"like-module_larkLikeBtnActive_5GFT6",like:"like-module_like_ywZuk",larkLikeBtn:"like-module_larkLikeBtn_uHsxq",larkLikeBtnNoAnimate:"like-module_larkLikeBtnNoAnimate_ugzKL",larkLikeBtnShake:"like-module_larkLikeBtnShake_0G6vd",shake:"like-module_shake_0jtRf",larkLikeCount:"like-module_larkLikeCount_eLa4m",larkLikeDocTip:"like-module_larkLikeDocTip_+Obkt",userListWrapper:"like-module_userListWrapper_Y79Yc",userList:"like-module_userList_SKTTT",showLikeList:"like-module_showLikeList_TUchs",readerUserList:"like-module_readerUserList_hfxMS",modal:"like-module_modal_kOEJe",sum:"like-module_sum_fSlWD",sumTip:"like-module_sumTip_VbrM1",sumIcon:"like-module_sumIcon_jnfi2",sumCount:"like-module_sumCount_AljHR",isMini:"like-module_isMini_LHe3B",modalContentIcon:"like-module_modalContentIcon_K+o1v",modalContentCount:"like-module_modalContentCount_6ku9X",likePopover:"like-module_likePopover_yBbcz",popoverUserContainer:"like-module_popoverUserContainer_FwwqR",popoverUserList:"like-module_popoverUserList_ZjVm8",popoverUserItem:"like-module_popoverUserItem_Hf89G",popoverUserItemAvatar:"like-module_popoverUserItemAvatar_Xvk9i",popoverUserItemName:"like-module_popoverUserItemName_aIDSI"}},433:function(e,t,r){"use strict";var n=r(690);r.d(t,"a",(function(){return n.a}))},488:function(e,t,r){"use strict";var n=r(2),a=r(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},i=r(14),l=function(e,t){return a.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:o}))},c=a.forwardRef(l);t.a=c},60:function(e,t,r){"use strict";r(2719);var n=r(997);r(179);t.a=n.a},688:function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return h})),r.d(t,"e",(function(){return _})),r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return f}));var n=r(0),a=r.n(n),o=r(4),i=r.n(o),l=(r(6),r(59)),c=r(97),u=r(690),s=(r(342),r(205));function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){var t,r,n=e.organization,o=e.department,i=e.className,l=null!=n&&n.id?[n.name]:[];null!=o&&null!==(t=o.dept_full_path)&&void 0!==t&&t.length&&(l=[].concat(m(l),m(null==o||null===(r=o.dept_full_path)||void 0===r?void 0:r.map((function(e){return e.name})))));var c=l.join(" - ");return a.a.createElement("span",{title:c,className:i},c)}function p(e){var t=e.organization,r=e.suffix,n=e.className;return a.a.createElement("span",{title:t.name,className:n},t.name," ",r)}function y(e){var t=e.organization;e.className;return a.a.createElement("a",{href:t.host,title:t.name},t.name)}function h(e){var t=e.src,r=e.size,n=e.radius,o=e.name,i=e.className,c=e.organization,s=t||(null==c?void 0:c.logo);return s?a.a.createElement(u.a,{src:s,size:r,radius:n||4,name:o,className:i}):a.a.createElement(l.b,{name:"icon-organization",width:r,radius:n||4,className:i})}function _(e){var t,r,n,o=e.className,i=e.organization,u=(t="en-us"===Object(s.d)(),r=c.a.isPro(i),n=c.a.isEnterprise(i),r?t?"icon-spacepayment-en":"spacepayment-pro":n?t?"en-spacepayment-business":"spacepayment-business":null);return u?a.a.createElement(l.b,{name:u,width:48,height:16,className:o}):null}f.propTypes={organization:i.a.any,department:i.a.any,className:i.a.string},p.propTypes={organization:i.a.object.isRequired,suffix:i.a.node,className:i.a.string},y.propTypes={organization:i.a.object.isRequired,className:i.a.string},h.propTypes={src:i.a.string,name:i.a.string,radius:i.a.oneOfType([i.a.string,i.a.number]),size:i.a.oneOfType([i.a.string,i.a.node]),className:i.a.string,organization:i.a.object},_.propTypes={className:i.a.string,organization:i.a.object},i.a.array.isRequired,i.a.string.isRequired,i.a.string,i.a.bool},816:function(e,t,r){"use strict";t.a={contactInfoTitle:"receipt-module_contactInfoTitle_+WTvl",receiptButtons:"receipt-module_receiptButtons_tBTuB",cancelButton:"receipt-module_cancelButton_1xXKN"}},822:function(e,t,r){"use strict";r(36);var n=r(8),a=(r(126),r(38)),o=(r(136),r(28)),i=(r(217),r(49)),l=(r(52),r(12)),c=r(0),u=r.n(c),s=r(4),m=r.n(s),d=r(816);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var v=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=h(this,t,[e]);var n=void 0===e.isFinished||!e.isFinished;return r.state={editing:n,btnLoading:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,(c=[{key:"render",value:function(){var e=this,t=this.props.form,r=t.getFieldDecorator,c=t.validateFields,s=t.resetFields,m=this.props,f=m.handleClickReceiptConfirm,p=m.handleApplyReceiptCancel,y=m.handleReceiptChange,h=m.data,_=m.isFinished,b=m.submitButtonText,g=h||{},v=this.state,E=v.editing,A=v.btnLoading;return u.a.createElement(i.a,{layout:"vertical"},u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("发票抬头")},r("title",{initialValue:g.title,rules:[{required:!0,message:__("请填写发票抬头")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写发票抬头")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:11},u.a.createElement(i.a.Item,{label:__("税号")},r("tax_no",{initialValue:g.tax_no,rules:[{required:!0,message:__("请填写税号")},{validator:function(e,t,r){if(t&&t.length>32)return r("不能超过 32 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写税号")})))),u.a.createElement(o.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("公司注册电话")},r("telephone",{initialValue:g.telephone,rules:[{required:!0,message:__("请填写公司注册电话")},{validator:function(e,t,r){if(t&&t.length>32)return r("不能超过 32 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写公司注册电话")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:11},u.a.createElement(i.a.Item,{label:__("开户行")},r("bank_name",{initialValue:g.bank_name,rules:[{required:!0,message:__("请填写开户行")},{validator:function(e,t,r){if(t&&t.length>42)return r("不能超过 42 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写开户行")})))),u.a.createElement(o.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("银行账户")},r("bank_account",{initialValue:g.bank_account,rules:[{required:!0,message:__("请填写银行账户")},{validator:function(e,t,r){if(t&&t.length>64)return r("不能超过 64 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写银行账户")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("公司注册地址")},r("address",{initialValue:g.address,rules:[{required:!0,message:__("请填写公司注册地址")},{validator:function(e,t,r){if(t&&t.length>170)return r("不能超过 170 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写公司注册地址")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24,className:d.a.contactInfoTitle})),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:11},u.a.createElement(i.a.Item,{label:__("收件人")},r("contact_name",{initialValue:g.contact_name,rules:[{required:!0,message:__("请填写收件人姓名")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写收件人姓名")})))),u.a.createElement(o.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("收件人电话")},r("contact_telephone",{initialValue:g.contact_telephone,rules:[{required:!0,message:__("请填写收件人电话")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写收件人电话")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("邮箱")},r("email",{initialValue:g.email,rules:[{required:!0,type:"email",message:__("请填写正确的邮箱地址")}]})(u.a.createElement(l.a,{disabled:!E,maxLength:255,placeholder:__("请填写邮箱")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("快递地址")},r("detail_address",{initialValue:g.detail_address})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写快递地址")}))))),!_&&u.a.createElement(a.a,{className:d.a.receiptButtons},u.a.createElement(o.a,{span:24},u.a.createElement(n.a,{type:"primary",onClick:function(){return function(){if(!E)return e.setState({btnLoading:!0}),f(e.props,"special"),void e.setState({btnLoading:!1});c((function(t){t?e.setState({btnLoading:!1}):(y(!1),e.setState({editing:!1,btnLoading:!1}))}))}()},loading:A},E?__("下一步"):b||__("确认开票")),u.a.createElement(n.a,{className:d.a.cancelButton,onClick:function(){return function(){if(E)return p(),void s();y(!0),e.setState({editing:!0})}()}},E?__("取消"):__("返回修改")))))}}])&&p(r.prototype,c),s&&p(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,s}(u.a.PureComponent);v.propTypes={handleClickReceiptConfirm:m.a.func.isRequired,handleApplyReceiptCancel:m.a.func.isRequired,handleReceiptChange:m.a.func.isRequired,form:m.a.object.isRequired,data:m.a.object,isFinished:m.a.bool,submitButtonText:m.a.string},t.a=v},823:function(e,t,r){"use strict";r(36);var n=r(8),a=(r(126),r(38)),o=(r(136),r(28)),i=(r(217),r(49)),l=(r(52),r(12)),c=r(0),u=r.n(c),s=r(4),m=r.n(s),d=r(816);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var v=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=h(this,t,[e]);var n=void 0===e.isFinished||!e.isFinished;return r.state={editing:n,btnLoading:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,(c=[{key:"render",value:function(){var e=this,t=this.props.form,r=t.getFieldDecorator,c=t.validateFields,s=t.resetFields,m=this.props,f=m.handleClickReceiptConfirm,p=m.handleApplyReceiptCancel,y=m.handleReceiptChange,h=m.data,_=m.isFinished,b=m.submitButtonText,g=h||{},v=this.state,E=v.editing,A=v.btnLoading;return u.a.createElement(i.a,{layout:"vertical"},u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("发票抬头")},r("title",{initialValue:g.title,rules:[{required:!0,message:__("请填写发票抬头")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写发票抬头")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("税号(国内企业必填)")},r("tax_no",{initialValue:g.tax_no,rules:[{required:!1,message:__("国际商户可不填开具形式发票, 国内无法计税")},{validator:function(e,t,r){if(t&&t.length>32)return r("不能超过 32 个字符");r()}}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("国际商户可不填开具形式发票, 国内无法计税")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24,className:d.a.contactInfoTitle})),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:11},u.a.createElement(i.a.Item,{label:__("收件人")},r("contact_name",{initialValue:g.contact_name,rules:[{required:!0,message:__("请填写收件人姓名")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写收件人姓名")})))),u.a.createElement(o.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("收件人电话")},r("contact_telephone",{initialValue:g.contact_telephone,rules:[{required:!0,message:__("请填写收件人电话")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写收件人电话")}))))),u.a.createElement(a.a,null,u.a.createElement(o.a,{span:24},u.a.createElement(i.a.Item,{label:__("邮箱")},r("email",{initialValue:g.email||g.detail_address,rules:[{required:!0,type:"email",message:__("请填写正确的邮箱地址")}]})(u.a.createElement(l.a,{disabled:!E,placeholder:__("请填写邮箱")}))))),!_&&u.a.createElement(a.a,{className:d.a.receiptButtons},u.a.createElement(o.a,{span:24},u.a.createElement(n.a,{type:"primary",onClick:function(){return function(){if(!E)return e.setState({btnLoading:!0}),f(e.props),void e.setState({btnLoading:!1});c((function(t){t?e.setState({btnLoading:!1}):(y(!1),e.setState({editing:!1,btnLoading:!1}))}))}()},loading:A},E?__("下一步"):b||__("确认开票")),u.a.createElement(n.a,{className:d.a.cancelButton,onClick:function(){return function(){if(E)return p(),void s();y(!0),e.setState({editing:!0})}()}},E?__("取消"):__("返回修改")))))}}])&&p(r.prototype,c),s&&p(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,s}(u.a.PureComponent);v.propTypes={handleClickReceiptConfirm:m.a.func.isRequired,handleApplyReceiptCancel:m.a.func.isRequired,handleReceiptChange:m.a.func.isRequired,form:m.a.object.isRequired,data:m.a.object,isFinished:m.a.bool,submitButtonText:m.a.string,isOrganization:m.a.bool},t.a=v},903:function(e,t){let r;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},904:function(e,t,r){const n=r(1481),a=r(1482);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},908:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-down",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M57.297 102.865c3.834-3.834 10.007-3.904 13.927-.21l.215.21 48.99 48.99c3.834 3.834 10.007 3.904 13.927.209l.215-.21 48.99-48.99c3.905-3.904 10.237-3.904 14.142 0 3.834 3.835 3.904 10.008.21 13.928l-.21.215-48.99 48.99c-11.598 11.599-30.331 11.714-42.073.348l-.353-.348-48.99-48.99c-3.905-3.905-3.905-10.237 0-14.142Z",fill:"currentColor",fillRule:"nonzero"}))},910:function(e,t,r){"use strict";var n=r(97);t.a=n.a},97:function(e,t,r){"use strict";var n,a=r(344),o=r.n(a),i=r(20),l=r(88),c=r(283),u=r(404),s=r(69),m=r(141),d=r(48),f=r(47);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var g,v=h((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),l=new L(n||[]);return a(i,"_invoke",{value:N(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",h={};function _(){}function b(){}function g(){}var v={};u(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(k([])));O&&O!==r&&n.call(O,i)&&(v=O);var T=g.prototype=_.prototype=Object.create(v);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(a,o,i,l){var c=m(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==E(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function N(t,r,n){var a=d;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=M(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(E(t)+" is not iterable")}return b.prototype=g,a(T,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},P(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new S(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(T),u(T,c,"Generator"),u(T,i,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function w(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){w(o,n,a,i,l,"next",e)}function l(e){w(o,n,a,i,l,"throw",e)}i(void 0)}))}}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n=v,_(v,"getFeatureBelongsPayment",(function(e){var t=f.ORG_PRO_FEATURE[e],r=f.ORG_ENTERPRISE_FEATURE[e];return t?i.PAYMENT_TYPE.pro:r?i.PAYMENT_TYPE.enterprise:i.PAYMENT_TYPE.free})),_(v,"paymentCheck",(function(e,t){switch(n.getFeatureBelongsPayment(e)){case i.PAYMENT_TYPE.pro:return[i.PAYMENT_TYPE.enterprise,i.PAYMENT_TYPE.pro].includes(t);case i.PAYMENT_TYPE.enterprise:return i.PAYMENT_TYPE.enterprise===t;case i.PAYMENT_TYPE.free:default:return!0}}));var P={},S=T(T(T(T(T({},l.STATUS.applying,__("待审批")),l.STATUS.invited,__("待加入")),l.STATUS.imported,__("待加入")),l.STATUS.terminated,__("已离职")),l.STATUS.waiting,__("待处理")),N=T(T(T({},l.ROLE.owner,__("管理员")),l.ROLE.member,__("成员")),l.ROLE.outsourcer,__("外部联系人")),M=T(T(T({},i.PAYMENT_TYPE.free,__("标准版")),i.PAYMENT_TYPE.pro,__("专业版")),i.PAYMENT_TYPE.enterprise,__("旗舰版")),C={free:0,paid:1,welfare:2},j=T(T(T({},C.free,{name:__("免费版"),desc:__("50 人以下，享受基础权益"),testId:"mode-free"}),C.paid,{name:__("付费版"),desc:__("999 元/年/50 人 起"),testId:"mode-pro",help:{text:__("试用到期后可降为免费版继续使用。"),linkText:__("查看详细版本对比"),link:"/about/price#team"}}),C.welfare,{name:__("公益版"),desc:__("支持公益、教育、初创企业"),testId:"mode-welfare",help:{text:__("非营利性公益组织、教育机构及初创企业可申请免费使用付费版权益。"),linkText:__("查看版本介绍"),link:"/about/welfare"}}),L=T(T(T({},i.CERTIFICATION_TYPE.welfare,{name:__("公益组织"),desc:__("从事公益事业的非营利组织")}),i.CERTIFICATION_TYPE.education,{name:__("教育机构"),desc:__("公办或非营利的学校或机构")}),i.CERTIFICATION_TYPE.startup,{name:__("初创企业"),desc:__("创办三年内且小于 100 人")}),k=[{name:__("资质证明"),desc:__("需提供营业执照、事业单位法人证明或其他相关证明材料，支持jpg、jpeg、png、bmp 格式，大小不超过 5MB"),helpList:[{text:__("查看示例"),link:"https://www.yuque.com/yuque/rvzzxz/gf443f#b5fb6957"}]},{name:__("申请公函"),desc:__("申请函红色部分需要填写，签名需手写，支持jpg、jpeg、png、pdf、bmp 格式，大小不超过 5MB"),helpList:[{text:__("下载模板"),link:"https://gw.alipayobjects.com/os/bmw-prod/5e485a34-3b78-4248-9fe4-1d8607cfc53e.docx"},{text:__("查看帮助"),link:"https://www.yuque.com/yuque/rvzzxz/gf443f#b5fb6957"}]}],I=(T(T(T(T(T(T(T(T(T(T(g={},f.INTEREST_CODE.book_statistics,__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。")),f.INTEREST_CODE.book_security,__("知识库安全设置可设置文档水印等安全信息")),f.INTEREST_CODE.thirdpart_address,__("标准版空间不支持钉钉、企业微信通讯录绑定，请及时进行版本升级")),f.INTEREST_CODE.group_department,__("绑定部门后，部门成员访问该团队时将自动成为团队成员。")),f.INTEREST_CODE.organization_statistics,__("可查看贡献榜，查看导出成员和团队明细等空间统计信息。")),f.INTEREST_CODE.group_statistics,__("可查看贡献榜，查看导出成员和团队明细等团队统计信息。")),f.INTEREST_CODE.group_security_logs,__("记录团队内成员变更，内容创建、删除、分享、导出等信息，让行为可查询追溯。")),f.INTEREST_CODE.group_webhook,__("可通过 Webhook 向钉钉群等发送团队动态")),f.INTEREST_CODE.group_handover,__("团队管理员离职后，允许空间管理员接管团队，整理内容。")),f.INTEREST_CODE.open_ocr,__("升级专业版、旗舰版空间可享受识图搜索等功能优先体验权")),T(T(T(T(T(T(T(T(g,f.INTEREST_CODE.organization_security_operation_logs,__("记录空间内成员变更，内容创建、删除、分享、导出等信息，以供查询，升级付费版即可立即使用")),f.INTEREST_CODE.organization_security_visite_logs,__("展示空间最近访问记录，包括到访用户、时间、IP 地址、被访问地址信息，升级付费版即可立即使用")),f.INTEREST_CODE.open_api,__("记录空间内成员变更，内容创建、删除、分享、导出等信息，以供查询，升级付费版即可立即使用")),f.INTEREST_CODE.organization_security_warning,__("安全预警可以帮助管理员及时识别风险。支持高频操作（如导出、删除、分享等）、账号密码泄漏风险等预警设置")),f.INTEREST_CODE.outsourcer,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。")),f.INTEREST_CODE.organization_security_share_logs,__("记录空间中所有分享行为，包括所有正在分享的文档或知识库内容，管理员可作统一管理，关闭不必要的分享")),f.INTEREST_CODE.organization_webhook,__("可通过 Webhook 向钉钉群等发送空间动态")),f.INTEREST_CODE.public_page,__("空间公开页适用于企业对外的帮助手册、更新日志、技术博客等面向互联网公开分享场景。"))),x={free:0,downgrade:1,vip:2,trial:3,expired:4},R=T(T(T({},x.free,{title:__("免费版空间"),guideText:__("试用付费版，享更多专属权益"),controlText:__("试用"),guideLink:"/r/organizations/dashboard/cashier?action=tryout"}),x.vip,{title:__("付费版空间"),guideText:__("续费"),guideLink:"/r/organizations/dashboard/cashier?action=renew"}),x.expired,{title:__("付费版空间"),guideText:__("付费"),guideLink:"/r/organizations/dashboard/cashier?action=renew"}),D="page_dashboard_org_wiki_redirect",Y={isOwner:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy},isOutsourcer:function(e){return!!e&&(e.abilities&&!e.abilities.read&&e.abilities.read_home)},isTopLevel:function(e){var t;return null==e||null===(t=e.owner)||void 0===t?void 0:t.isTopLevel},enableAddressbook:function(){if(!window.appData.isYuque)return!0;var e=window.appData.organization,t=void 0===e?{}:e;return!(!t||t.address_book_type!==i.ADDRESS_BOOK_TYPE.yuque)||!!window.appData.corp&&(!!this.isWeixin()||!this.isTeambition())},disableRegistry:function(e){return!!e&&!(!e.id||e.enable_registry)},isWeixin:function(){return window.appData.corp&&"weixin"===window.appData.corp.type},isDingtalk:function(){return window.appData.corp&&"dingtalk"===window.appData.corp.type},isTeambition:function(){return window.appData.corp&&"teambition"===window.appData.corp.type},isYuqueAddressBook:function(){var e=window.appData,t=e.organization,r=void 0===t?{}:t;return e.isYuque&&(null==r?void 0:r.address_book_type)===i.ADDRESS_BOOK_TYPE.yuque},enableContacts:function(){var e=window.appData,t=e.organization,r=void 0===t?{}:t;return e.isYuque&&[i.ADDRESS_BOOK_TYPE.dingtalk,i.ADDRESS_BOOK_TYPE.weixin,i.ADDRESS_BOOK_TYPE.yuque,i.ADDRESS_BOOK_TYPE.custom].includes(r.address_book_type)},isWeixinAddressBook:function(){var e=window.appData,t=e.organization,r=void 0===t?{}:t;return e.isYuque&&i.ADDRESS_BOOK_TYPE.weixin===r.address_book_type},userNameEditable:function(){var e=window.appData,t=e.organization,r=void 0===t?{}:t,n=e.isYuque;return this.isWeixinAddressBook()||this.isYuqueAddressBook()||n&&1!==r.corp_sync_name_enable},isInOrg:function(){var e=window.appData,t=e.organization,r=void 0===t?{}:t;return!(!e.isYuque||null==r||!r.id)},isExpired:function(e){return!!e&&(!Y.isFree(e)&&new Date(e.expired_at)<Date.now())},isFree:function(e){return!e||e.payment_type===i.PAYMENT_TYPE.free},isTrial:function(e){return!(!e||Y.isFree(e))&&e.trialStatus===u.TRIAL_STATUS.on},isWelfareOrg:function(e){return!Y.isExpired(e)&&e.certification_type>i.CERTIFICATION_TYPE.normal},isPremium:function(e){return!!e&&(Y.isPaidVersion(e)&&!Y.isExpired(e))},isPaidVersion:function(e){var t=e.payment_type;return t===i.PAYMENT_TYPE.enterprise||t===i.PAYMENT_TYPE.pro},isPro:function(e){return!(!e||Y.isExpired(e))&&e.payment_type===i.PAYMENT_TYPE.pro},isEnterprise:function(e){return!(!e||Y.isExpired(e))&&e.payment_type===i.PAYMENT_TYPE.enterprise},getIconName:function(e){var t="icon-overpaid";return Y.isPro(e)&&(t="icon-org-pro"),Y.isEnterprise(e)&&(t="icon-org-enterprise"),t},buildOrgPayLink:function(e){var t=e.action,r=e.targetLevel,n=e.paySource,a=new URL("r/organizations/dashboard/cashier",window.location.origin);return t&&a.searchParams.set("action",t),r&&a.searchParams.set("targetLevel",r),n&&a.searchParams.set("paySource",n),a.toString()},canIndirectAddOrgMember:function(e){return O(A().mark((function t(){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P[e.id]){t.next=4;break}return t.next=3,d.a.organizations.getPermissions({id:e.id});case 3:P[e.id]=t.sent;case 4:return r=P[e.id],t.abrupt("return",r&&r.indirect_add_org_member);case 6:case"end":return t.stop()}}),t)})))()},getMemberRoleName:function(e){return e===l.ROLE.owner?__("空间管理员"):e===l.ROLE.member?__("空间成员"):e===l.ROLE.outsourcer?__("外部联系人"):""},getPaymentAction:function(e){return i.PAYMENT_TYPE.free===e?__("升级付费版"):__("续费")},getPaymentActionGuide:function(e){return i.PAYMENT_TYPE.free===e?__("立即升级"):__("立即续费")},getPaymentFeatureDesc:function(e){return T(T({},i.PAYMENT_TYPE.pro,__("专业版、旗舰版空间专属功能")),i.PAYMENT_TYPE.enterprise,__("旗舰版空间专属功能"))[Y.getFeatureBelongsPayment(e)]},getFeatureBelongsPayment:v.getFeatureBelongsPayment,paymentCheck:v.paymentCheck,getFeatureIntro:function(e){return I[e]},getCorpType:function(e){if(!e)return null;switch(c.TYPE[e.type]){case c.TYPE.dingtalk:case c.TYPE.dingtalk_selfcorp:return{addressBookName:__("钉钉通讯录"),corpName:__("钉钉")};case c.TYPE.teambition:case c.TYPE.aone_teambition:return{addressBookName:__("Teambition"),corpName:__("Teambition")};case c.TYPE.weixin:return{addressBookName:__("企业微信通讯录"),corpName:__("企业微信")};default:return null}},getStatusLabel:function(e){var t=e.status;return S[t]},getPaymentBoardStatus:function(e){var t,r=Y.isFree(e),n=Y.isExpired(e);if(!r&&n)return x.expired;switch(e.payment_type){case i.PAYMENT_TYPE.free:t=x.free;break;case i.PAYMENT_TYPE.enterprise:t=x.vip;break;default:t=x.free}return t},getInviteUrl:function(){var e=arguments;return O(A().mark((function t(){var r,n,a,o;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},n=e.length>1&&void 0!==e[1]?e[1]:window.appData.organization,a=window.appData.defaultSpaceHost,o=null,null!=r&&r.token&&(o="".concat(a,"/r/organizations/").concat(n.login,"/join?token=").concat(r.token,"&source=org").concat(r.extraParams?"&extra=".concat(r.extraParams):"")),null==n||!n.id){t.next=10;break}return t.next=8,d.a.organizations.getCurrentCorp();case 8:t.sent&&(o=n.host);case 10:return t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))()},getRule:function(e){var t=Y.isPremium(e)?e.payment_type:i.PAYMENT_TYPE.free;return s.MEMBER_RULE.Organization[t]},getRuleSize:function(e,t){var r;return null===(r=Y.getRule(e))||void 0===r?void 0:r[t]},getMonthMaxUploadSize:function(e,t){return Y.isPremium(e)&&null!=t&&t.max_upload_size_month?null==t?void 0:t.max_upload_size_month:Y.getRuleSize(e,s.LIMIT_RULE_CODE.max_resource_month_size)},orgWikiRedirect:{redirectToWiki:function(e,t,r){var n;if(null!=e&&e.id&&null!=t&&t.id&&r){var a="".concat(D,"_").concat(t.id,"_").concat(e.id);!m.a.get(a)&&(o()(e.created_at).isSameOrAfter(new Date("2022-10-12"))||o()(t.created_at).isSameOrAfter(new Date("2022-10-12")))&&null!=t&&null!==(n=t.abilities)&&void 0!==n&&n.read_wiki&&(m.a.set(a,!0),r.push({pathname:"/dashboard/org_wiki",hash:window.location.hash,search:window.location.search}))}},setRedirected:function(e,t){if(null!=e&&e.id&&null!=t&&t.id){var r="".concat(D,"_").concat(t.id,"_").concat(e.id);return m.a.set(r,!0),!0}}},getInterestLimitMsg:function(e,t,r){var n=T(T(T(T(T({},s.LIMIT_RULE_CODE.max_group_number,__("团队数量")),s.LIMIT_RULE_CODE.max_member,__("成员数量")),s.LIMIT_RULE_CODE.max_book_collaborator_number,__("协作人数")),s.LIMIT_RULE_CODE.max_doc_collaborator_number,__("协作人数")),s.LIMIT_RULE_CODE.max_resource_month_size,__("本月上传流量"))[e],a=Y.getPayment(t),o=Y.getInterestActionText(e,t,r);return __("".concat(n,"已达到").concat(a,"上限，").concat(o,"。"),{desc:n,payment:a,actionText:o})},getPayment:function(e){return Y.isExpired(e)?Y.PAYMENT_MAP[i.PAYMENT_TYPE.free]:Y.PAYMENT_MAP[null==e?void 0:e.payment_type]},getInterestActionText:function(e,t,r){var n,a,o={owner:{upgrade:__("请及时进行版本升级"),renew:__("请及时进行版本续费"),expand:__("请及时增加席位")},member:{upgrade:__("请联系管理员进行版本升级"),renew:__("请联系管理员进行版本续费"),expand:__("请联系管理员增加席位")}},i={owner:{upgrade:__("请及时进行版本升级"),renew:__("请及时进行版本续费"),help:__("请及时联系语雀进行处理")},member:{upgrade:__("请联系管理员进行版本升级"),renew:__("请联系管理员进行版本续费"),help:__("请及时联系语雀进行处理")}},l=null==t||null===(n=t.abilities)||void 0===n?void 0:n.destroy,c=null==r||null===(a=r.owner)||void 0===a?void 0:a.isTopLevel,u=e===s.LIMIT_RULE_CODE.max_member,m=Y.isExpired(t),d=Y.isPremium(t),f=l?"owner":"member";return u?o[f][m?"renew":d?"expand":"upgrade"]:i[f][m?"renew":c?"help":"upgrade"]},genCreateFromKey:function(e){var t,r,n;if(null!==(t=window.appData)&&void 0!==t&&t.isDesktopApp)return e;var a=null===(r=window.location)||void 0===r||null===(n=r.pathname)||void 0===n?void 0:n.split("/").join("_").substring(0,50);return"_"===a?e:"".concat(e,":").concat(a)},ROLE_MAP:N,PAYMENT_BOARD_STATUS:x,PAYMENT_BOARD_STATUS_MAP:R,CREAT_MODE:C,CREAT_MODE_MAP:j,PAYMENT_MAP:M,CERTIFICATION_TYPE_MAP:L,CERTIFICATION_MATERIAL_LIST:k};t.a=Y},980:function(e,t,r){"use strict";r(43);var n=r(10),a=r(0),o=r.n(a),i=r(4),l=r.n(i),c=r(20),u=r(97),s=(r(62),r(31)),m=r(6),d=r.n(m),f=r(155),p=r(69),y=(r(689),r(225)),h=(r(170),r(70)),_=(r(36),r(8)),b=(r(52),r(12)),g=(r(187),r(34)),v=r(15),E=r.n(v),A=r(1258),w=r.n(A),O=r(524),T=r(1030),P=r.n(T),S=r(93),N=r(59),M=r(1252),C=r(48),j=(r(311),r(101)),L="index-module_right_3Ce8Y",k="index-module_detailsWrapper_rnkfa",I="index-module_detailTitle_-gjun",x="index-module_details_E5fEt",R="index-module_detailRow_e7YNK",D="index-module_summary_TYNAM",Y="index-module_left_m83qX",B="index-module_summaryTitle_FTeFf",z="index-module_price_5CyQB",F="index-module_divider_Rppou",U=function(e){var t=e.totalAmount,r=e.discountAmount,n=e.details;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:k},o.a.createElement("div",{className:I},__("费用明细")),o.a.createElement("div",{className:x},(null==n?void 0:n.length)>0&&n.map((function(e){return o.a.createElement("div",{className:R},o.a.createElement("span",null,null==e?void 0:e.label),o.a.createElement("span",null,null==e?void 0:e.price))}))),o.a.createElement(j.a,{className:F}),o.a.createElement("div",{className:D},o.a.createElement("div",{className:Y},o.a.createElement("div",{className:B},__("总计")),o.a.createElement("span",{style:{fontSize:"14px"}},__("支持电子发票或专用发票开具"))),o.a.createElement("div",{className:L},o.a.createElement("span",{className:z},"¥",r||t)))))};U.propTypes={totalAmount:l.a.number,discountAmount:l.a.number,details:l.a.number};var q=U,W=(r(126),r(38)),G=(r(136),r(28)),Q=r(404),V=r(910),H={paymentSelector:"index-module_paymentSelector_60wvq",paymentItem:"index-module_paymentItem_86B2e",header:"index-module_header_KM0S4",title:"index-module_title_87CwY",icon:"index-module_icon_sjp+e",paymentType:"index-module_paymentType_rBxoj",price:"index-module_price_n7XGL",priceNumber:"index-module_priceNumber_6EuVJ",priceUnit:"index-module_priceUnit_xqqPQ",oldMemberPrice:"index-module_oldMemberPrice_4QJhr",desc:"index-module_desc_5wzpx",active:"index-module_active_HZTq5",disable:"index-module_disable_+DYkl",tooltip:"index-module_tooltip_lMvUZ"};function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}E.a.extend(w.a);var $=Object(O.d)((function(e){return e}))((function(e){var t,r=e.className,n=e.actionType,i=e.paymentType,l=e.onPaymentChange,u=e.organization,s=n===c.PAY_MODAL_ACTION.upgrade,m=n===c.PAY_MODAL_ACTION.trial,f=n===c.PAY_MODAL_ACTION.renew,p=V.a.isExpired(u),y=window.appData.organization.memberPrice,_=(t=V.a.isFree(u)?null:u.payment_type,m?t?[t]:[c.PAYMENT_TYPE.pro,c.PAYMENT_TYPE.enterprise]:s?[c.PAYMENT_TYPE.enterprise]:[c.PAYMENT_TYPE.pro,c.PAYMENT_TYPE.enterprise]),b=J(Object(a.useState)(i),2),g=b[0],v=b[1],A=function(e){var t=Math.max(E()(u.expired_at).diff(Date.now(),"day"),1)<=S.MAX_ORG_ALLOW_DOWNGRADE_DAYS;return e===c.PAYMENT_TYPE.pro&&!t&&f&&V.a.isEnterprise(u)},w=Z(Z(Z(Z({},c.PAY_MODAL_ACTION.trial,__("选择适合你的空间版本")),c.PAY_MODAL_ACTION.buy,__("选择适合你的空间版本")),c.PAY_MODAL_ACTION.upgrade,__("版本升级")),c.PAY_MODAL_ACTION.renew,__("当前为{payment}，{memberCount}人，有效期至 {expiredAt}",{payment:V.a.PAYMENT_MAP[u.payment_type],memberCount:u.max_member,expiredAt:E()(u.expired_at).format("YYYY-MM-DD")}));return o.a.createElement("div",{className:d()(H.paymentSelector,r)},o.a.createElement("h4",null,p?w[c.PAY_MODAL_ACTION.buy]:w[n]),o.a.createElement(W.a,{className:H.paymentList,gutter:[8,0]},_.map((function(e,t){var r=S.ORG_AMOUNT_MAP[e],n=A(e),a=(null==u?void 0:u.trialStatus)===Q.TRIAL_STATUS.on,i=V.a.isPremium(u),s=e===c.PAYMENT_TYPE.enterprise&&i&&!a?y:0,m=o.a.createElement("div",{className:d()(H.paymentItem,Z({},H.active,e===g),Z({},H.disable,n)),onClick:function(){return function(e){A(e)||(v(e),null==l||l(e))}(e)}},o.a.createElement("div",{className:H.header},o.a.createElement("div",{className:H.title},o.a.createElement(N.b,{name:r.icon,size:18}),o.a.createElement("span",{className:H.paymentType},V.a.PAYMENT_MAP[e])),o.a.createElement("div",{className:H.price},o.a.createElement("span",{className:H.priceNumber},"¥",s>0?s:r.price),o.a.createElement("span",{className:H.priceUnit},__("/人/年")))),s>0&&o.a.createElement("span",{className:H.oldMemberPrice},r.price,__("/人/年")));return o.a.createElement(G.a,{span:24/_.length,key:t},n?o.a.createElement(h.a,{title:o.a.createElement("div",{className:H.tooltip},o.a.createElement("span",null,__("旗舰版到期前 30 天开放选择")),o.a.createElement("a",{href:"https://www.yuque.com/yuque/ng1qth/member-privilege#p5KMh"},__("查看帮助"))),overlayInnerStyle:{display:"inline-block"}},m):m)}))))})),ee={row:"BuyModal-module_row_k9bGD",left:"BuyModal-module_left_U5aM7",right:"BuyModal-module_right_-+dqF",payModal:"BuyModal-module_payModal_RkJau",channel:"BuyModal-module_channel_aD1hq",payBtn:"BuyModal-module_payBtn_JujzZ",promoCode:"BuyModal-module_promoCode_IT7ha",tips:"BuyModal-module_tips_fuHYC",pricingContainer:"BuyModal-module_pricingContainer_tqVEA",pro:"BuyModal-module_pro_J6mfJ",enterprise:"BuyModal-module_enterprise_KQPTt",pricingLeft:"BuyModal-module_pricingLeft_X4ns6",payment:"BuyModal-module_payment_jheFG",icon:"BuyModal-module_icon_UPf-t",paymentDesc:"BuyModal-module_paymentDesc_7e1Uv",paymentCaption:"BuyModal-module_paymentCaption_sAndL",benefitItem:"BuyModal-module_benefitItem_4iuZe",iconWarpper:"BuyModal-module_iconWarpper_j2vhb",title:"BuyModal-module_title_aoygt",desc:"BuyModal-module_desc_nWmKR",pricingRight:"BuyModal-module_pricingRight_p54lJ",avatar:"BuyModal-module_avatar_SRhTt",termsContainer:"BuyModal-module_termsContainer_i187T",statsWrapper:"BuyModal-module_statsWrapper_ZDvF1",statsDesc:"BuyModal-module_statsDesc_1iKOA",compact:"BuyModal-module_compact_qVAW5",active:"BuyModal-module_active_SC0g+",settle:"BuyModal-module_settle_6sm-p",name:"BuyModal-module_name_bL3Ia",memberSizeInput:"BuyModal-module_memberSizeInput_xIYHO",errorMsg:"BuyModal-module_errorMsg_ZbqFE",footer:"BuyModal-module_footer_eF3uw"};function te(){return o.a.createElement("span",null,__("正在准备账户信息，请5分钟后再尝试，如一直未成功，请"),o.a.createElement("a",{href:"/feedbacks/new",target:"_blank"},__("联系语雀")),__("进行处理。"))}function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(){ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),l=new C(n||[]);return a(i,"_invoke",{value:P(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",h={};function _(){}function b(){}function g(){}var v={};u(v,i,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(j([])));A&&A!==r&&n.call(A,i)&&(v=A);var w=g.prototype=_.prototype=Object.create(v);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(a,o,i,l){var c=m(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==re(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function P(t,r,n){var a=d;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=S(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function S(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(re(t)+" is not iterable")}return b.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(T.prototype),u(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new T(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function oe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){oe(o,n,a,i,l,"next",e)}function l(e){oe(o,n,a,i,l,"throw",e)}i(void 0)}))}}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}E.a.extend(w.a);var ue=g.a.Option,se=function(e){var t,r,i,l=e.targetLevel,s=e.actionType,m=e.buyLoading,f=e.handleSubmitBuy,v=e.subAccountInfo,A=e.organization,w=e.paySource,O=s===c.PAY_MODAL_ACTION.upgrade,T=s===c.PAY_MODAL_ACTION.trial,j=u.a.isExpired(A),L=window.appData.interest.usage.member_count,k=function(e,t){var r=window.appData.organization,n=c.PAYMENT_TYPE.pro,a=0;return e===c.PAY_MODAL_ACTION.buy&&(n=t||(r.payment_type===c.PAYMENT_TYPE.free?c.PAYMENT_TYPE.pro:r.payment_type),a=window.appData.interest.usage.member_count),e===c.PAY_MODAL_ACTION.upgrade&&(n=c.PAYMENT_TYPE.enterprise,a=r.max_member),e===c.PAY_MODAL_ACTION.renew&&(n=r.payment_type,a=r.max_member),e===c.PAY_MODAL_ACTION.trial&&(n=(u.a.isFree(r)?null:r.payment_type)||c.PAYMENT_TYPE.pro),{initOrgPayment:n,initMemberSize:a}}(s,l),I=k.initOrgPayment,x=k.initMemberSize,R=le(Object(a.useState)(I),2),D=R[0],Y=R[1],B=le(Object(a.useState)(S.PAYMENT_TYPE.normal),2),z=B[0],F=B[1],U=le(Object(a.useState)(x),2),W=U[0],G=U[1],Q=le(Object(a.useState)(x),2),V=Q[0],H=Q[1],K=le(Object(a.useState)(!1),2),Z=K[0],J=K[1],X=le(Object(a.useState)(1),2),re=X[0],oe=X[1],ce=(t=A.expired_at,r=E()(t).diff(Date.now(),"day")||1,i=t&&r>=0?t:E()().endOf("day"),E()(i).add(re,"year")),se=le(Object(a.useState)(),2),me=se[0],de=se[1],fe=le(Object(a.useState)(),2),pe=fe[0],ye=fe[1],he=le(Object(a.useState)(),2),_e=he[0],be=he[1],ge=le(Object(a.useState)(!1),2),ve=ge[0],Ee=ge[1],Ae=Object(a.useRef)(null),we=function(){ve?Z||f({memberSize:W,duration:re,promoCode:pe,paymentType:z,packageType:D,orderType:j?c.PAY_MODAL_ACTION.buy:s}):n.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))},Oe=function(){var e=ie(ae().mark((function e(){return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve){e.next=3;break}return n.a.info(__("需阅读并同意《语雀空间服务协议》后才能试用")),e.abrupt("return");case 3:if(!Z){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,C.a.organizations.trial({id:A.id,trial_type:D},{ignoreGlobalMessage:!0});case 8:e.sent&&(window.location.search=""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),n.a.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),Te=function(e){F(e)},Pe=function(e){var t="",r=e.target.value;if(!r)return G("");if(/^[0-9]*$/g.test(r)){var n=Math.max(E()(A.expired_at).diff(Date.now(),"day"),1)<=S.MAX_ORG_ALLOW_DOWNGRADE_DAYS;r<L&&(t="购买人数应大于等于空间人数"),u.a.isEnterprise(A)&&!n&&r<A.max_member&&(t="旗舰版到期前 30 天可降级人数"),J(t||null),G(Math.min(r,c.MAX_MEMBER_LIMIT)),t||H(Math.min(r,c.MAX_MEMBER_LIMIT))}},Se=Object(a.useCallback)(P()(function(){var e=ie(ae().mark((function e(t){var r,a,o,i,l,c,u;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.actionType,a=t.orderPayment,o=t.orgPayment,i=t.duration,l=t.memberSize,c=t.validPromoCode,!(T||l<=0)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,C.a.pay.amount({order_type:r,payment_type:a,package_type:o,duration:i,member_size:l,promo_code:c});case 6:u=e.sent,be(u),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),n.a.warn(__("加载失败"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500),[]);Object(a.useEffect)((function(){Se({actionType:s,orderPayment:z,orgPayment:D,duration:re,memberSize:V,validPromoCode:pe})}),[D,z,V,re,pe]),Object(a.useEffect)((function(){Se({actionType:s,orderPayment:z,orgPayment:D,duration:re,memberSize:V,validPromoCode:pe})}),[]);var Ne,Me,Ce;return o.a.createElement("div",{className:d()(ee.pricingContainer,ee.payModal,ne(ne({},ee.pro,D===c.PAYMENT_TYPE.pro),ee.enterprise,D===c.PAYMENT_TYPE.enterprise)),"data-testid":"renew-package",ref:Ae},o.a.createElement("div",{className:ee.pricingLeft},(Ne=D,Me=S.ORG_AMOUNT_MAP[Ne],Ce=u.a.PAYMENT_MAP[Ne],o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:ee.payment},Ce,__("空间"),o.a.createElement(N.b,{name:null==Me?void 0:Me.icon,className:ee.icon,size:28})),o.a.createElement("div",{className:ee.paymentDesc},Me.desc),o.a.createElement("a",{className:ee.paymentCaption,href:"https://www.yuque.com/about/price",target:"_blank"},__("查看完整权益介绍"),o.a.createElement(N.b,{name:"arrow-right",size:16,className:ee.icon})),o.a.createElement("ul",{className:ee.benefitList},Me.introList.map((function(e,t){return o.a.createElement("li",{className:ee.benefitItem,key:null==e?void 0:e.title},o.a.createElement("div",{className:ee.iconWarpper},o.a.createElement(N.b,{className:ee.icon,name:null==e?void 0:e.icon,size:24})),o.a.createElement("h4",{className:ee.title},null==e?void 0:e.title),o.a.createElement("p",{className:ee.desc},null==e?void 0:e.desc))})))))),o.a.createElement("div",{className:ee.pricingRight},o.a.createElement($,{actionType:s,paymentType:D,onPaymentChange:function(e){return Y(e)}}),o.a.createElement("div",{className:ee.row,style:{alignItems:"flex-start"}},O?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:ee.left},o.a.createElement("div",null,__("空间人数"))),o.a.createElement("div",{className:ee.right},o.a.createElement("div",null,__("{memberSize} 人",{memberSize:A.max_member})))):T?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:ee.left},o.a.createElement("div",null,__("试用人数")),o.a.createElement("p",{className:ee.tips},__("当前空间 {memberSize} 人",{memberSize:L}))),o.a.createElement("div",{className:ee.right},o.a.createElement("div",null,__("{memberSize} 人",{memberSize:u.a.isFree(A)?c.TRAIL_MAX_MEMBER:A.max_member})))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:ee.left},o.a.createElement("div",null,o.a.createElement("div",null,__("购买人数")),o.a.createElement("p",{className:ee.tips},__("当前空间席位 {memberSize} 人",{memberSize:A.maxMember})))),o.a.createElement("div",{className:ee.right},o.a.createElement("div",{className:ee.memberSizeInput},o.a.createElement(b.a,{value:W,onChange:Pe,style:{width:100},suffix:__("人")}),Z&&o.a.createElement("div",{className:ee.errorMsg},Z))))),T&&o.a.createElement("div",{className:ee.row,style:{alignItems:"flex-start"}},o.a.createElement("div",{className:ee.left},__("试用期限")),o.a.createElement("div",{className:ee.right},__("可使用至 {date}",{date:E()().add(c.TRIAL_DAYS,"day").format("YYYY-MM-DD")}))),!T&&!O&&o.a.createElement("div",{className:ee.row},o.a.createElement("div",{className:ee.left},__("购买时长"),o.a.createElement("p",{className:ee.tips},__("可使用至")," ",ce.format("YYYY-MM-DD"))),o.a.createElement("div",{className:ee.right},o.a.createElement("div",{className:ee.inputNumber},o.a.createElement(g.a,{className:ee.select,defaultValue:1,value:re,onChange:function(e){return oe(e)},style:{width:100}},[1,2,3].map((function(e){return o.a.createElement(ue,{value:e,key:e},e,__("年"))})))))),!T&&o.a.createElement("div",{className:ee.row},o.a.createElement("div",{className:ee.left},__("支付方式")),o.a.createElement("div",{className:ee.right},o.a.createElement(_.a,{className:d()(ee.channel,ne({},ee.active,z===S.PAYMENT_TYPE.normal)),onClick:function(){return Te(S.PAYMENT_TYPE.normal)},icon:o.a.createElement(N.b,{name:"icon-zhi",size:16})},__("支付宝")),v?o.a.createElement(_.a,{className:d()(ee.channel,ee.settle,ne({},ee.active,z===S.PAYMENT_TYPE.settle)),onClick:function(){return Te(S.PAYMENT_TYPE.settle)},icon:o.a.createElement(N.b,{name:"icon-bank",size:16})},__("银行转账")):o.a.createElement(h.a,{title:o.a.createElement(te,null),placement:"top"},o.a.createElement(_.a,{className:d()(ee.channel,ee.settle),icon:o.a.createElement(N.b,{name:"icon-bank",size:16}),disabled:!0},__("银行转账"))))),!T&&!O&&o.a.createElement("div",{className:ee.row},o.a.createElement("div",{className:ee.left},__("优惠码#upper")),o.a.createElement("div",{className:ee.right},o.a.createElement("div",{style:{width:172},className:ee.promoCode},o.a.createElement(M.a,{value:me,orderType:s,packageType:D,promoUsage:"organization",onChange:function(e){return de(e)},onVerifySuccess:function(e){return ye(null==e?void 0:e.code)}})))),!T&&_e&&o.a.createElement(q,{totalAmount:_e.totalAmount,discountAmount:_e.discountAmount,details:_e.details}),o.a.createElement("div",{className:ee.footer},T?o.a.createElement(_.a,{"data-testid":"buy-button",type:"primary",onClick:Oe,className:ee.payBtn},__("免费试用 15 天")):o.a.createElement(_.a,{"data-aspm-click":p.ORG_LIMIT_SPM.create_order,"data-aspm-param":"pay_source=".concat(w,"^org_id=").concat(null==A?void 0:A.id,"^org_payment_type=").concat(null==A?void 0:A.payment_type,"^"),"data-testid":"buy-button",type:"primary",loading:m,onClick:we,className:ee.payBtn},m?__("购买中"):__("确认购买")),o.a.createElement("p",{className:ee.termsContainer},o.a.createElement(y.a,{onChange:function(){return Ee(!ve)},checked:ve,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》"))))))};se.propTypes={actionType:l.a.number,buyLoading:l.a.bool,handleSubmitBuy:l.a.func,max_member:l.a.number,subAccountInfo:l.a.object,targetLevel:l.a.oneOf([c.PAYMENT_TYPE.pro,c.PAYMENT_TYPE.enterprise]),organization:l.a.object,paySource:l.a.string};var me=Object(O.d)((function(e){return e}))(se),de={row:"BuyMember-module_row_9srYf",left:"BuyMember-module_left_kE3og",right:"BuyMember-module_right_Oni7O",payModal:"BuyMember-module_payModal_ID058",channel:"BuyMember-module_channel_oCioT",payBtn:"BuyMember-module_payBtn_2QBqR",promoCode:"BuyMember-module_promoCode_3q8my",tips:"BuyMember-module_tips_0MaeW",pricingContainer:"BuyMember-module_pricingContainer_oSImw",expiredDesc:"BuyMember-module_expiredDesc_kyKaA",active:"BuyMember-module_active_hyrgK"};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(){ye=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,i=Object.create(o.prototype),l=new C(n||[]);return a(i,"_invoke",{value:P(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",h={};function _(){}function b(){}function g(){}var v={};u(v,i,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(j([])));A&&A!==r&&n.call(A,i)&&(v=A);var w=g.prototype=_.prototype=Object.create(v);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(a,o,i,l){var c=m(e[a],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==fe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function P(t,r,n){var a=d;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var c=S(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function S(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(fe(t)+" is not iterable")}return b.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},O(T.prototype),u(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new T(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function he(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t,r=e.buyLoading,i=e.handleSubmitBuy,l=e.subAccountInfo,s=e.organization,m=e.paySource,f=c.ORDER_TYPE.buyMember,g=_e(Object(a.useState)(!1),2),v=g[0],A=g[1],w=_e(Object(a.useState)(1),2),O=w[0],T=w[1],P=Object(a.useRef)(null),M=_e(Object(a.useState)(S.PAYMENT_TYPE.normal),2),j=M[0],L=M[1],k=_e(Object(a.useState)(),2),I=k[0],x=k[1],R=(null==s?void 0:s.max_member)+Number(O),D=function(){var e,t=(e=ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O<=0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.a.pay.amount({order_type:f,payment_type:j,package_type:s.payment_type,member_size:R});case 5:t=e.sent,x(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.a.warn(__("加载失败"));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){he(o,n,a,i,l,"next",e)}function l(e){he(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){D()}),[O]),Object(a.useEffect)((function(){D()}),[]),o.a.createElement("div",{className:d()(de.pricingContainer,de.payModal),"data-testid":"buy-member-modal",ref:P},o.a.createElement("h2",null,__("人数扩容")),o.a.createElement("p",{className:de.expiredDesc},__("扩容后有效期至：{date}",{date:E()(null==s?void 0:s.expired_at).format("YYYY-MM-DD")})),o.a.createElement("div",{className:de.row},o.a.createElement("div",{className:de.left},__("当前版本")),o.a.createElement("div",{className:de.right},null===(t=u.a.PAYMENT_MAP)||void 0===t?void 0:t[null==s?void 0:s.payment_type])),o.a.createElement("div",{className:de.row},o.a.createElement("div",{className:de.left},o.a.createElement("div",null,o.a.createElement("div",null,__("增购人数")),o.a.createElement("p",{className:de.tips},__("已购空间席位 {memberSize} 人，购买后共 {newMemberSize} 人",{memberSize:s.maxMember,newMemberSize:R})))),o.a.createElement("div",{className:de.right},o.a.createElement("div",{className:de.memberSizeInput},o.a.createElement(b.a,{value:O,onChange:function(e){var t=e.target.value;if(!t)return T("");!/^[0-9]*$/g.test(t)||t<0||T(Math.min(t,c.MAX_MEMBER_LIMIT))},style:{width:100},suffix:__("人")})))),o.a.createElement("div",{className:de.row},o.a.createElement("div",{className:de.left},__("支付方式")),o.a.createElement("div",{className:de.right},o.a.createElement(_.a,{className:d()(de.channel,pe({},de.active,j===S.PAYMENT_TYPE.normal)),onClick:function(){return L(S.PAYMENT_TYPE.normal)},icon:o.a.createElement(N.b,{name:"icon-zhi",size:16})},__("支付宝")),l?o.a.createElement(_.a,{className:d()(de.channel,pe({},de.active,j===S.PAYMENT_TYPE.settle)),style:{marginLeft:"12px"},onClick:function(){return L(S.PAYMENT_TYPE.settle)},icon:o.a.createElement(N.b,{name:"icon-bank",size:16})},__("银行转账")):o.a.createElement(h.a,{title:o.a.createElement(te,null),placement:"top"},o.a.createElement(_.a,{className:de.channel,icon:o.a.createElement(N.b,{name:"icon-bank",size:16}),disabled:!0},__("银行转账"))))),I&&o.a.createElement(q,{totalAmount:I.totalAmount,discountAmount:I.discountAmount,details:I.details}),o.a.createElement("div",{className:de.footer},o.a.createElement(_.a,{"data-aspm-click":p.ORG_LIMIT_SPM.create_order,"data-aspm-param":"pay_source=".concat(m,"^org_id=").concat(null==s?void 0:s.id,"^org_payment_type=").concat(null==s?void 0:s.payment_type,"^"),"data-testid":"buy-button",type:"primary",loading:r,onClick:function(){v?O<=0||i({memberIntrement:O,paymentType:j,orderType:f}):n.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))},className:de.payBtn},r?__("购买中"):__("确认升级")),o.a.createElement("p",{className:de.termsContainer},o.a.createElement(y.a,{onChange:function(){A(!v)},checked:v,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》")))))};ge.propTypes={buyLoading:l.a.bool,handleSubmitBuy:l.a.func,subAccountInfo:l.a.object,organization:l.a.object,paySource:l.a.string};var ve=Object(O.d)((function(e){return e}))(ge),Ee=(r(175),r(40)),Ae=r(1520),we=r.n(Ae),Oe=r(1489),Te="Pay-module_left_u3-Jq",Pe="Pay-module_totalInfo_YM7Fb",Se="Pay-module_footer_MsuSK",Ne="Pay-module_termsContainer_MMlAf",Me="Pay-module_pricingContainer_hjkUd",Ce="Pay-module_desc_a1fXI",je="Pay-module_dashline_y-S0k",Le="Pay-module_inputNumber_Uaz26",ke="Pay-module_priceTag_ot6Kz",Ie="Pay-module_hasDiscount_KLNoP",xe="Pay-module_discountPrice_HbCLz",Re="Pay-module_discountPriceValue_CUsg2",De="Pay-module_uploadPackages_VO59r",Ye="Pay-module_uploadPackageCard_6UXsL",Be="Pay-module_selectedUploadCard_yWd2Y",ze="Pay-module_uploadSize_WpwBc",Fe="Pay-module_uploadPackagePrice_zQPrm",Ue="Pay-module_promo_sD6ap";function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ge=function(e){var t=e.buyLoading,r=e.handleSubmitBuy,i=e.promoCode,l=e.setPromoCode,u=e.handlePaymentTypeChange,s=e.subAccountInfo,m=qe(Object(a.useState)(!1),2),d=m[0],f=m[1],p=qe(Object(a.useState)(!1),2),b=p[0],g=p[1],v=qe(Object(a.useState)(S.ORG_UPLOAD_SIZE_MAP["100G"].value),2),E=v[0],A=v[1],w=we()({order_type:c.ORDER_TYPE.data,upload_size:E}),O=Object(Oe.a)({totalAmount:w,setPromoCode:l}),T=O.totalAmountWithPromo,P=O.onVerifySuccess,C=O.handlePromoChange,j=window.appData.organization,L=void 0===j?{}:j;return o.a.createElement("div",{className:Me,"data-testid":"buy-upload"},o.a.createElement("div",{className:Ce},__("流量购买后对{orgName}空间账户长期有效",{orgName:L.name})),o.a.createElement("h3",null,__("流量包")),o.a.createElement("div",{className:De},Object.keys(S.ORG_UPLOAD_SIZE_MAP).map((function(e){return o.a.createElement("div",{key:S.ORG_UPLOAD_SIZE_MAP[e].value,className:"".concat(Ye," ").concat(E===S.ORG_UPLOAD_SIZE_MAP[e].value?Be:""),onClick:function(){return A(S.ORG_UPLOAD_SIZE_MAP[e].value)}},o.a.createElement("div",{className:ze},e),o.a.createElement("div",{className:Fe},S.ORG_UPLOAD_SIZE_MAP[e].price," ",__("元")))}))),o.a.createElement("h3",null,__("支付方式")),o.a.createElement(Ee.a.Group,{defaultValue:S.PAYMENT_TYPE.normal,onChange:function(e){return u(e.target.value)},style:{marginTop:8}},o.a.createElement(Ee.a.Button,{value:S.PAYMENT_TYPE.normal},__("支付宝")),s?o.a.createElement(Ee.a.Button,{value:S.PAYMENT_TYPE.settle},__("银行转账")):o.a.createElement(h.a,{title:o.a.createElement(te,null),placement:"top"},o.a.createElement(Ee.a.Button,{value:S.PAYMENT_TYPE.settle,disabled:!0},__("银行转账")))),o.a.createElement("div",{className:Ue,style:{marginTop:24}},o.a.createElement("div",{className:Te,onClick:function(){f(!d)}},o.a.createElement(N.b,{name:"promo",width:18})," ",__("优惠码")),d&&o.a.createElement("div",{style:{width:240},className:Le},o.a.createElement(M.a,{value:i,promoUsage:"organization",onChange:C,onVerifySuccess:P}))),o.a.createElement("p",{className:je}),o.a.createElement("h3",null,__("费用总计"),"："),o.a.createElement("div",{className:Pe},o.a.createElement("span",{className:"".concat(ke," ").concat(T?Ie:"")},w)," ",__("元"),T&&o.a.createElement("span",{className:xe},__("优惠价")," ",o.a.createElement("span",{className:Re},T||w)," ",__("元"))),o.a.createElement("div",{className:Se},o.a.createElement(_.a,{"data-testid":"buy-button",type:"primary",loading:t,onClick:function(){b?r({uploadSize:E,total_amount:w}):n.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))}},t?__("购买中"):__("立即支付")),o.a.createElement("p",{className:Ne},o.a.createElement(y.a,{onChange:function(){g(!b)},checked:b,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},"《语雀空间服务协议》"))))};Ge.propTypes={buyLoading:l.a.bool,handleSubmitBuy:l.a.func,promoCode:l.a.string,setPromoCode:l.a.func,handlePaymentTypeChange:l.a.func,subAccountInfo:l.a.object};var Qe=Ge,Ve="Qrcode-module_qrcodeImageCon_yy+Gi",He="Qrcode-module_alipayIconInQrCode_5Ng19",Ke="Qrcode-module_qrcodeContainer_c79eX",Ze="Qrcode-module_qrcodeImage_UEIyZ",Je="Qrcode-module_desc1_ArZR9",Xe="Qrcode-module_desc2_E5sDl",$e="Qrcode-module_qrcodeTitleCon_-LJr2",et="Qrcode-module_qrcodeTitleDesc_OOQby",tt="Qrcode-module_qrcodeTitleValue_PBwE+",rt=function(e){var t=e.qrcodeUrl,r=e.totalAmount;return o.a.createElement("div",{className:Ke,"data-testid":"qrcode"},o.a.createElement("div",{className:$e},o.a.createElement("div",{className:et},__("扫一扫付款 (元)")),o.a.createElement("div",{className:tt},r)),o.a.createElement("div",{className:Ve},o.a.createElement("div",{className:He},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),o.a.createElement("img",{className:Ze,src:t})),o.a.createElement("div",{className:Je},__("打开手机支付宝，扫一扫继续付款")),o.a.createElement("div",{className:Xe},__("付款后可在线申请发票")))};rt.propTypes={qrcodeUrl:l.a.string,totalAmount:l.a.number};var nt=rt,at="PayModal-module_noLineModal_r4djn",ot="PayModal-module_payModal_1VmRL",it="PayModal-module_largeModal_reIw0";function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var st,mt=function(e){var t=e.type,r=e.targetLevel,n=e.qrcodeUrl,i=e.visible,l=e.onCancel,u=e.buyLoading,m=e.memberSize,y=e.max_member,h=e.handleMemberChange,_=e.handleSubmitBuy,b=e.handleSelectPackage,g=e.duration,v=e.handleDurationChange,E=e.remaining,A=e.totalAmount,w=e.organizationInfo,O=void 0===w?{}:w,T=e.promoCode,P=e.setPromoCode,S=e.currentMember,N=e.subAccountInfo,M=e.paySource,C=null,j=[c.PAY_MODAL_ACTION.upgrade,c.PAY_MODAL_ACTION.renew,c.PAY_MODAL_ACTION.trial,c.PAY_MODAL_ACTION.buy].includes(t);switch(t){case"qrcode":C=o.a.createElement(nt,{qrcodeUrl:n,totalAmount:A});break;case c.PAY_MODAL_ACTION.buy:case c.PAY_MODAL_ACTION.upgrade:case c.PAY_MODAL_ACTION.renew:case c.PAY_MODAL_ACTION.trial:C=o.a.createElement(me,{actionType:t,targetLevel:r,handleSelectPackage:b,remaining:E,max_member:y,memberSize:m,handleMemberChange:h,duration:g,handleDurationChange:v,buyLoading:u,handleSubmitBuy:_,organizationInfo:O,promoCode:T,setPromoCode:P,currentMember:S,subAccountInfo:N,paySource:M});break;case c.PAY_MODAL_ACTION.buyMember:C=o.a.createElement(ve,{max_member:y,memberSize:m,handleMemberChange:h,buyLoading:u,handleSubmitBuy:_,organizationInfo:O,promoCode:T,setPromoCode:P,currentMember:S,subAccountInfo:N,paySource:M});break;case c.PAY_MODAL_ACTION.data:C=o.a.createElement(Qe,{buyLoading:u,handleSubmitBuy:_,promoCode:T,setPromoCode:P,subAccountInfo:N})}var L=[c.PAY_MODAL_ACTION.renew,c.PAY_MODAL_ACTION.buyMember].includes(t)?"":at,k=ut(ut(ut(ut(ut({},c.PAY_MODAL_ACTION.upgrade,860),c.PAY_MODAL_ACTION.renew,860),c.PAY_MODAL_ACTION.trial,860),c.PAY_MODAL_ACTION.buy,860),c.PAY_MODAL_ACTION.buyMember,420);return Object(a.useEffect)((function(){var e=[c.PAY_MODAL_ACTION.trial].includes(t);if(i&&e)Object(f.spmClick)(p.ORG_LIMIT_SPM.start_trial,{pay_source:M,org_id:O.id,org_payment_type:O.payment_type});else{var r=[c.PAY_MODAL_ACTION.buy,c.PAY_MODAL_ACTION.renew,c.PAY_MODAL_ACTION.upgrade,c.PAY_MODAL_ACTION.buyMember].includes(t);i&&r&&Object(f.spmClick)(p.ORG_LIMIT_SPM.start_pay,{pay_source:M,order_type:t,org_id:O.id,org_payment_type:O.payment_type,org_trial_status:O.trialStatus})}}),[]),o.a.createElement(s.a,{visible:i,maskClosable:!1,onCancel:l,footer:null,width:k[t]||560,centered:!0,className:d()(L,ot,ut({},it,j))},o.a.createElement("div",{"data-testid":"pay-modal"},C))};mt.propTypes={type:l.a.oneOf(["qrcode"].concat((st=Object.values(c.PAY_MODAL_ACTION),function(e){if(Array.isArray(e))return ct(e)}(st)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(st)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(st)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))),visible:l.a.bool,qrcodeUrl:l.a.string,onCancel:l.a.func,buyLoading:l.a.bool,memberSize:l.a.number,max_member:l.a.number,handleMemberChange:l.a.func,handleSubmitBuy:l.a.func,handleSelectPackage:l.a.func,duration:l.a.number,handleDurationChange:l.a.func,remaining:l.a.number,totalAmount:l.a.number,organizationInfo:l.a.object,promoCode:l.a.string,setPromoCode:l.a.func,handlePaymentTypeChange:l.a.func,currentMember:l.a.number,subAccountInfo:l.a.object,paySource:l.a.string};var dt=mt,ft="ProcessingModal-module_processContainer_dOZ9t",pt="ProcessingModal-module_processImg_Fl+7o",yt="ProcessingModal-module_processInfo_VPh0u",ht=function(e){var t=e.visible;return o.a.createElement(s.a,{title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:480},o.a.createElement("div",{className:ft,"data-testid":"processing-modal"},o.a.createElement("img",{className:pt,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7q7fR4_EUQQAAAAAAAAAAABjARQnAQ"}),o.a.createElement("p",{className:yt},__("付费更新中，请稍后..."))))};ht.propTypes={visible:l.a.bool};var _t=ht,bt=r(341),gt=r(308),vt="PaidSuccessModal-module_successModalContainer_gb6Iw",Et="PaidSuccessModal-module_successModalInfoCon_aLoy0",At="PaidSuccessModal-module_successModalButtonCon_BP8Ns",wt="PaidSuccessModal-module_applyReceiptButton_BrptN",Ot="PaidSuccessModal-module_checkUploadButton_n0Sct",Tt="PaidSuccessModal-module_successModalSubTitle_Hq8oy",Pt="PaidSuccessModal-module_successModalItem_EBnTl",St="PaidSuccessModal-module_successModalBlank_3ENdm",Nt=function(e){var t,r=e.organizationInfo,n=void 0===r?{}:r,a=e.visible,i=e.onClose,l=e.onClickApplyReceipt,m=window.appData.me,d=n.name,f=n.expired_at,p=n.order_id,y=n.order_type,h=n.package_type,b=n.duration,g=n.upload_size,v=n.max_member,A=n.member_increment,w=n.amount,O=n.order_updated_at,T="",P="",S="",N=!1,M=!1,C=!1,j=!1,L="",k="";switch(y){case c.ORDER_TYPE.buy:T=__(__("恭喜你，语雀空间成功升级为{payment}",{payment:u.a.PAYMENT_MAP[h]})),P=__("套餐"),S=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[h],max_member:v}),N=!0,M=!0,C=!1,L="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",k="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case c.ORDER_TYPE.renew:T=__("恭喜你，语雀空间{action}成功",{action:u.a.getPaymentAction(null===(t=window.appData.organization)||void 0===t?void 0:t.payment_type)}),P=__("套餐"),S=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[h],max_member:v}),N=!0,M=!0,C=!1,L="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",k="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case c.ORDER_TYPE.upgrade:T=__("恭喜你，语雀空间升级成功"),P=__("套餐"),S=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[h],max_member:v}),N=!0,M=!1,C=!1,L="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",k="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case c.ORDER_TYPE.buyMember:T=__("恭喜你，空间人数规模升级成功"),C=!1,j=!0,L="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",k="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case c.ORDER_TYPE.data:T=__("恭喜你，上传流量购买成功"),P=__("上传流量"),S="".concat(Object(gt.getSizeValue)(g).value).concat(Object(gt.getSizeValue)(g).unit),L="https://gw.alipayobjects.com/zos/basement_prod/39563d69-6bdd-4ee3-8844-0f549452d13f.svg"}return o.a.createElement(s.a,{className:"paid-success-modal",title:null,visible:a,maskClosable:!1,onCancel:i,footer:null,centered:!0,width:480},o.a.createElement("div",{className:vt,"data-testid":"paid-success-modal"},o.a.createElement(bt.a,{src:L,darkSrc:k}),o.a.createElement("div",{className:Et},o.a.createElement("h1",{style:{fontSize:"18px"}},T),o.a.createElement("p",{className:St}),o.a.createElement("p",{className:Tt},__("订单信息")),o.a.createElement("p",{className:Pt},__("空间名称"),"：",d),o.a.createElement("p",{className:Pt},__("订单号"),"：",p),P&&o.a.createElement("p",{className:Pt},P,"：",S),M&&o.a.createElement("p",{className:Pt},__("购买时长"),"：",b," ",__("年")),C&&o.a.createElement("p",{className:Pt},__("人数规模"),"：",__("{max_member}人",{max_member:v})),j&&o.a.createElement("p",{className:Pt},__("增购人数"),"：",__("{member_increment} 人",{member_increment:A})),o.a.createElement("p",{className:Pt},__("付款金额"),"：",w," ",__("元")),o.a.createElement("p",{className:Pt},__("付款人"),"：",m&&m.name),o.a.createElement("p",{className:Pt},__("付款时间"),"：",E()(O).format("YYYY-MM-DD HH:mm:ss")),N&&o.a.createElement("p",{className:Pt},__("到期时间"),"：",E()(f).format("YYYY-MM-DD HH:mm:ss")),o.a.createElement("div",{className:At},o.a.createElement(_.a,{type:"primary",onClick:i,"data-testid":"close-button"},__("立即使用")),o.a.createElement(_.a,{className:wt,onClick:function(){return l()}},__("申请开票")),y===c.ORDER_TYPE.data&&o.a.createElement(_.a,{className:Ot,href:"/r/organizations/dashboard/cashier"},__("查看上传流量"))))))};Nt.propTypes={organizationInfo:l.a.object.isRequired,visible:l.a.bool,onClose:l.a.func,onClickApplyReceipt:l.a.func};var Mt=Nt,Ct=(r(217),r(49)),jt=r(823),Lt=r(822),kt={contactTips:"ReceiptModal-module_contactTips_f0fAJ",receiptTypeTitle:"ReceiptModal-module_receiptTypeTitle_mZi8G",receiptTypeTitleText:"ReceiptModal-module_receiptTypeTitleText_QQBhY",receiptDesc:"ReceiptModal-module_receiptDesc_fY2bw"};function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==It(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var zt=Ct.a.create()(jt.a),Ft=Ct.a.create()(Lt.a),Ut=function(e){var t=e.visible,r=e.organizationInfo,i=e.handleApplyReceiptCancel,l=e.hasReceipt,c=e.setHasReceipt,u=(window.appData||{}).organization,m=void 0===u?{}:u,d=(window.appData.paymentInfo||{}).receipt,f=d&&void 0!==d.type?d.type:1,p=Yt(Object(a.useState)(f),2),y=p[0],h=p[1],_=Yt(Object(a.useState)(!0),2),b=_[0],g=_[1],v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";(0,e.form.validateFields)((function(e,a){if(!e){var o=S.RECEIPT_TYPES[t];C.a.organizationReceipts.create(Rt(Rt({},a),{},{type:o,order_id:r.order_id,organization_id:m.id})).then((function(e){n.a.success(__("已成功提交发票申请")),c(!0),i()}))}}))};return o.a.createElement(s.a,{className:"receipt-success-modal",title:o.a.createElement(o.a.Fragment,null,l?__("已提交申请"):__("申请发票"),o.a.createElement("p",{className:kt.receiptDesc},__("发票将在申请后的 7 个工作日内开具，目前处于升级数电发票的过渡期，详情请查看"),o.a.createElement("a",{href:"https://www.yuque.com/yuque/qa/ul74ukuugy5wvuqd",target:"_blank"},__("关于开具数电发票的通知")))),visible:t,maskClosable:!1,closable:l,onCancel:i,footer:null,centered:!0,width:500},o.a.createElement("div",{className:kt.receiptContainer,"data-testid":"receipt-modal"},l?o.a.createElement("p",{className:kt.contactTips},__("如需帮助请联系"),"：support@yuque.com"):o.a.createElement("div",{className:kt.receiptTypeTitle},o.a.createElement(Ee.a.Group,{disabled:l||!b,onChange:function(){h(0===y?1:0)},value:y},o.a.createElement(Ee.a,{value:1},__("专用发票")),o.a.createElement(Ee.a,{value:0},__("普通电子发票")))),0===y?o.a.createElement(zt,{handleClickReceiptConfirm:v,handleApplyReceiptCancel:i,handleReceiptChange:g,data:d,isFinished:l,isOrganization:!0}):o.a.createElement(Ft,{handleClickReceiptConfirm:v,handleApplyReceiptCancel:i,handleReceiptChange:g,data:d,isFinished:l})))};Ut.propTypes={visible:l.a.bool,organizationInfo:l.a.object,handleApplyReceiptCancel:l.a.func,hasReceipt:l.a.bool,setHasReceipt:l.a.func};var qt=Ut,Wt=(r(179),r(60)),Gt=r(1355),Qt={wrapper:"SubAccountInfoModal-module_wrapper_P6mlj",infoField:"SubAccountInfoModal-module_infoField_IMZ6p",infoFieldTitle:"SubAccountInfoModal-module_infoFieldTitle_tgwmv",infoFieldPaymentAlert:"SubAccountInfoModal-module_infoFieldPaymentAlert_UOLk7",buttons:"SubAccountInfoModal-module_buttons_rfW-e",btn:"SubAccountInfoModal-module_btn_WuNy4",loading:"SubAccountInfoModal-module_loading_sNKQL",loadingIcon:"SubAccountInfoModal-module_loadingIcon_M7IJr",loadingCircle:"SubAccountInfoModal-module_loadingCircle_mPmQ5",loadingDesc:"SubAccountInfoModal-module_loadingDesc_QHGbP"};function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Xt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t=Xt(Xt(Xt(Xt(Xt(Xt({},c.ORDER_TYPE.buy,__("购买空间")),c.ORDER_TYPE.upgrade,__("升级空间")),c.ORDER_TYPE.renew,__("续费空间")),c.ORDER_TYPE.buyMember,__("购买空间人数")),c.ORDER_TYPE.data,__("购买空间流量")),c.ORDER_TYPE.downgrade,__("降级空间")),er=function(e){var t,r=(window.appData.paymentInfo||{}).order_type,n=function(e){var t=void 0!==e.orderTypeFromAppData,r=Zt(Object(a.useState)(!t),2),n=r[0],o=r[1],i=$t[e.orderTypeFromAppData]||"";return{state:Kt(Kt({},e),{},{showExistedTips:t,showMainField:n,orderTypeName:i}),setShowMainField:o}}(Kt(Kt({},e),{},{orderTypeFromAppData:r})),i=n.state,l=i.visible,c=i.subAccountInfo,u=i.closeSettleOrder,m=i.closeAccountInfoModal,d=i.showExistedTips,f=i.showMainField,p=i.orderTypeName,y=n.setShowMainField;return o.a.createElement(s.a,{title:__("购买空间套餐"),visible:l,maskClosable:!1,closable:!0,footer:null,centered:!0,width:550,onCancel:m},c&&c.order?o.a.createElement("div",{className:Qt.wrapper,"data-testid":"subaccount-modal"},d&&!f&&o.a.createElement("div",{className:Qt.tips},o.a.createElement("div",null,__("你有订单尚未完成，请先完成订单或取消订单")),o.a.createElement("div",{className:Qt.buttons},o.a.createElement(_.a,{type:"primary",onClick:function(){return y(!0)},className:Qt.btn},__("去查看")))),f&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Qt.infoField},r&&o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("订单类型")),p),o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("转账金额")),c.order.amount," ",__("元")),o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("收款公司")),c.local_account_name),o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("收款账户")),c.account_no_4_credit_transfer),o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("开户行")),c.local_bank_name_4_transfer)),o.a.createElement("div",{className:Qt.infoField},o.a.createElement("p",null,o.a.createElement("span",{className:Qt.infoFieldTitle},__("订单号")),c.order.order_id),o.a.createElement("div",null,__("请于 10 日内转账付款，银行转账有延迟，稍后将以短信形式通知您开通情况。")),o.a.createElement("div",null,__("如有任何疑问，请发邮件到")," ",o.a.createElement("a",{href:"mailto:support@yuque.com"},"support@yuque.com")," ",__("，会有专人协助您解决。"))),o.a.createElement("div",{className:Qt.buttons},o.a.createElement(Wt.a,{title:__("你确定取消订单吗？"),onConfirm:u,okText:__("取消订单"),cancelText:__("再想想")},o.a.createElement(_.a,{type:"danger",className:Qt.btn},__("取消订单")))))):(t=__("正在准备相关信息，可能需等待 1-5 分钟"),o.a.createElement("div",{className:Qt.loading},o.a.createElement(Gt.default,{className:Qt.loadingIcon}),t&&o.a.createElement("div",{className:Qt.loadingDesc},t))))};er.propTypes={visible:l.a.bool,subAccountInfo:l.a.object,closeSettleOrder:l.a.func,closeAccountInfoModal:l.a.func};var tr=er,rr=r(1260),nr=r.n(rr),ar=r(1486),or=r.n(ar),ir=r(94),lr=r.n(ir);function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=cr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pr,yr=!1,hr=function(e,t){if(e.max_member<t){var r=c.PRICE_STAGES.find((function(e){return e.member>t}));if(r)return r.member}return e.max_member},_r=C.a.pay,br=_r.create,gr=_r.buyMember,vr=_r.buyUpload,Er=_r.downgrade,Ar=_r.upgrade,wr=_r.renew,Or=fr(fr(fr(fr(fr(fr({},c.ORDER_TYPE.buy,br),c.ORDER_TYPE.upgrade,Ar),c.ORDER_TYPE.renew,wr),c.ORDER_TYPE.buyMember,gr),c.ORDER_TYPE.data,vr),c.ORDER_TYPE.downgrade,Er),Tr=function(e){var t,r=e.organization,n=void 0===r?{}:r,o=e.visible,i=void 0!==o&&o,l=e.type,u=void 0===l?"buyModal":l,s=e.actionType,m=e.onClose,d=window.appData.paymentInfo||{},f=d.order_id,p=d.receipt,y=d.isSettleOrder,h=mr(Object(a.useState)(!1),2),_=h[0],b=h[1],g=mr(Object(a.useState)(!1),2),v=g[0],A=g[1],w=mr(Object(a.useState)(!1),2),O=w[0],T=w[1],P=mr(Object(a.useState)(!1),2),N=P[0],M=P[1],j=mr(Object(a.useState)(!1),2),L=j[0],k=j[1],I=mr(Object(a.useState)(null),2),x=I[0],R=I[1],D=mr(Object(a.useState)(!!p),2),Y=D[0],B=D[1],z=mr(Object(a.useState)(!1),2),F=z[0],U=z[1],q=mr(Object(a.useState)(sr(sr({},n),{},{order_id:f})),2),W=q[0],G=q[1],Q=mr(Object(a.useState)(1===n.payment_type),2),V=Q[0],H=Q[1],K=mr(Object(a.useState)(null),2),Z=K[0],J=K[1],X=mr(Object(a.useState)(null),2),$=X[0],ee=X[1],te=mr(Object(a.useState)(n.members_count||n.max_member),2),re=te[0],ne=te[1],ae=s===c.ORDER_TYPE.renew?hr(W,re):null===(t=c.PRICE_STAGES.find((function(e){return e.member>=n.max_member})))||void 0===t?void 0:t.member,oe=mr(Object(a.useState)(ae),2),ie=oe[0],le=oe[1],ce=mr(Object(a.useState)(1),2),ue=ce[0],se=ce[1],me=mr(Object(a.useState)(0),2),de=me[0],fe=me[1],pe=mr(Object(a.useState)(),2),ye=pe[0],he=pe[1],_e=Object(a.useRef)(null),be=function(){T(!1),M(!0)},ge=function(e){C.a.pay.query({order_id:e}).then((function(t){return t.isFinished?(b(!1),A(!1),T(!0),H(!0),void G(t)):(t.isPaid&&(b(!1),A(!0),H(!0)),t.isClosed?(b(!1),A(!1),void T(!1)):void((t.isPaid||t.needQuery)&&(_e.current=setTimeout((function(){return ge(e)}),3e3))))}))},ve=function(e){C.a.pay.query({order_id:e}).then((function(t){return t.isFinished?(b(!1),A(!1),T(!0),H(!0),void G(t)):t.isClosed?(b(!1),A(!1),void T(!1)):(t.account_no&&(R(t),b(!1),k(!0)),void(t.needQuery&&(b(!1),k(!0),_e.current=setTimeout((function(){return ve(e)}),3e3))))}))},Ee=function(){if(pr||y)return k(!0),void ve(pr||f);if(s===c.ORDER_TYPE.buyMember){var e=c.PRICE_STAGES.find((function(e){return e.member>n.max_member}));le(e?e.member:c.MAX_MEMBER_LIMIT)}J(null),U(!1),b(!0)};Object(a.useEffect)((function(){if(i){switch(u){case"buyModal":Ee();break;case"receiptModal":be()}C.a.organizations.membersCount({id:n.id}).then(ne),x||C.a.pay.getSettleAccount({order_id:pr||f}).then(R)}}),[i]),Object(a.useEffect)((function(){if(!yr&&(yr=!0,!V&&window.appData.paymentInfo&&!y)){var e=nr.a.parse(window.location.search).order_id,t=window.appData.paymentInfo,r=t.orderExpired,n=t.isFinished;if(f&&!n)return function(e){var t=window.location,r="".concat(t.protocol,"//").concat(t.host).concat(t.pathname,"?order_id=").concat(e);t.href=r}(f);r?window.location.href=window.location.pathname:e&&(A(!0),ge(e))}}),[_]),Object(a.useEffect)((function(){return function(){_e.current&&(clearTimeout(_e.current),_e.current=null)}}),[]);var Ae=n.max_member;if(Object(a.useEffect)((function(){if(s===c.ORDER_TYPE.renew){var e=hr(W,re);le(e)}}),[ae]),!window.appData.paymentInfo)return{};var we=function(e,t){m&&m(),e&&window.location.assign(t||window.location.origin+window.location.pathname)},Oe=W.expired_at,Te=E()(Oe).diff(Date.now(),"day")||1;return{payModalVisible:_,processModalVisible:v,successModalVisible:O,receiptModalVisible:N,subAccountInfoModalVisible:L,subAccountInfo:x,startToApplyReceipt:be,buyLoading:F,organizationInfo:W,payModalType:Z?"qrcode":s,qrcodeUrl:$,handleSubmitBuy:function(e){var t=e.orderType||c.ORDER_TYPE.buy;if(!F){U(!0);var r={member_increment:null==e?void 0:e.memberIntrement,member_size:null==e?void 0:e.memberSize,duration:null==e?void 0:e.duration,promo_code:null==e?void 0:e.promoCode,payment_type:null==e?void 0:e.paymentType,package_type:null==e?void 0:e.packageType};(null==e?void 0:e.paymentType)===S.PAYMENT_TYPE.settle?Or[t](r).then((function(e){U(!1);var t=e.order_id;fe(+e.amount),pr=t,ve(t)})).catch((function(){U(!1)})):Or[t](r).then((function(e){U(!1);var t=e.out_trade_no;J({orderId:t,url:e.qr_code}),or.a.toDataURL(e.qr_code,(function(e,t){ee(t)})),fe(+e.totalAmount),ge(t)})).catch((function(){U(!1)}))}},handlePayModalCancel:function(){b(!1),we(!1)},handleApplyReceiptCancel:function(){M(!1),we(!0,"/r/organizations/dashboard/cashier/orders")},handleMemberChange:function(e){le(e)},closePaidSuccessModal:function(){T(!1),we(!0)},memberSize:ie,hasReceipt:Y,setHasReceipt:B,duration:ue,handleDurationChange:function(e){se(e)},remaining:Te,totalAmount:de,promoCode:ye,setPromoCode:he,closeAccountInfoModal:function(){m&&m(),_e.current&&(clearTimeout(_e.current),_e.current=null),k(!1)},closeSettleOrder:function(){var e=lr()(x,"order.order_id");e&&C.a.pay.close({order_id:e}).then((function(){window.location.reload()}))},currentMember:re,maxMember:Ae}},Pr=function(e){var t=e.organization,r=e.visible,a=e.type,i=e.actionType,l=e.targetLevel,s=e.onClose,m=e.paySource,d=Tr({organization:t,visible:r,type:a,actionType:i,onClose:s}),f=d.payModalVisible,p=d.processModalVisible,y=d.successModalVisible,h=d.receiptModalVisible,_=d.subAccountInfoModalVisible,b=d.subAccountInfo,g=d.startToApplyReceipt,v=d.buyLoading,E=d.organizationInfo,A=void 0===E?{}:E,w=d.payModalType,O=d.qrcodeUrl,T=d.handleSubmitBuy,P=d.handlePayModalCancel,S=d.handleApplyReceiptCancel,N=d.handleMemberChange,M=d.closePaidSuccessModal,C=d.hasReceipt,j=d.setHasReceipt,L=d.duration,k=d.handleDurationChange,I=d.remaining,x=d.totalAmount,R=d.closeAccountInfoModal,D=d.closeSettleOrder,Y=u.a.isPremium(t),B=u.a.isFree(t);return i===c.PAY_MODAL_ACTION.buy&&Y?(n.a.warning(__("已付费空间不允许重复购买")),null):i!==c.PAY_MODAL_ACTION.upgrade||Y?i===c.PAY_MODAL_ACTION.renew&&B?(n.a.warning(__("标准版空间无法续费，请直接购买")),null):o.a.createElement("div",{"data-testid":"org-pay-flow"},o.a.createElement(dt,{key:"pay-modal-".concat(f),visible:f,type:w,targetLevel:l,qrcodeUrl:O,onCancel:P,buyLoading:v,handleMemberChange:N,handleSubmitBuy:T,duration:L,handleDurationChange:k,remaining:I,organizationInfo:A,totalAmount:x,subAccountInfo:b,paySource:m}),o.a.createElement(_t,{key:"process-modal-".concat(p),visible:p}),o.a.createElement(Mt,{key:"success-modal-".concat(y),visible:y,organizationInfo:A,onClose:M,onClickApplyReceipt:g}),o.a.createElement(qt,{key:"receipt-modal-".concat(h),visible:h,organizationInfo:A,handleApplyReceiptCancel:S,hasReceipt:C,setHasReceipt:j}),o.a.createElement(tr,{key:"subaccount-modal-".concat(_),visible:_,subAccountInfo:b,closeAccountInfoModal:R,closeSettleOrder:D})):(n.a.warning(__("非付费空间无法升级")),null)};Pr.propTypes={organization:l.a.object.isRequired,type:l.a.oneOf(["buyModal","receiptModal"]),actionType:l.a.oneOf(Object.values(c.PAY_MODAL_ACTION)),visible:l.a.bool,onClose:l.a.func,targetLevel:l.a.oneOf([c.PAYMENT_TYPE.pro,c.PAYMENT_TYPE.enterprise]),paySource:l.a.string};t.a=Pr}}]);