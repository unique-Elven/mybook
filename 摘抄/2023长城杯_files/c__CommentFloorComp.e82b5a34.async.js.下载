/*! For license information please see c__CommentFloorComp.e82b5a34.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1287,15,667,774,940,1044,1246,1247,1359,1387,1395,1653],{1032:function(e,t,n){var r=n(520),o=n(189),i=n(246),a=n(64),u=n(180),c=n(238),l=n(240),s=n(327),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||s(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},1363:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},1496:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-help-search",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M114 20c51.362 0 93 41.638 93 93 0 21.782-7.489 41.816-20.032 57.666l45.82 46.277c4.275 4.317 4.24 11.282-.077 15.556-4.317 4.275-11.281 4.24-15.556-.077l-45.774-46.23C155.576 198.602 135.652 206 114 206c-51.362 0-93-41.638-93-93s41.638-93 93-93Zm0 20c-40.317 0-73 32.683-73 73s32.683 73 73 73 73-32.683 73-73-32.683-73-73-73Z",fill:"currentColor",fillRule:"nonzero"}))},1497:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-right",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M101.005 198.563c-3.834-3.834-3.904-10.008-.21-13.927l.21-.215 48.99-48.99c3.834-3.834 3.904-10.008.21-13.927l-.21-.215-48.99-48.99c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.834 10.008-3.904 13.927-.21l.215.21 48.99 48.99c11.599 11.598 11.715 30.331.348 42.072l-.348.354-48.99 48.99c-3.905 3.905-10.237 3.905-14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1510:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-nolable",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"m3.779 5.94.884.885-1.177 1.177a1.253 1.253 0 0 0 0 1.77l2.941 2.94.12.106a1.249 1.249 0 0 0 1.6-.061l.012-.01 1.213-1.214.884.884-1.158 1.158-.15.143a2.499 2.499 0 0 1-3.405-.123l-2.94-2.94A2.503 2.503 0 0 1 2.6 7.119l1.178-1.178Zm.078-2.183a.6.6 0 0 1 .849 0l7.637 7.637a.6.6 0 1 1-.849.849L3.857 4.606a.6.6 0 0 1 0-.849Zm5.208-2.044.183.009L12.557 2a1.875 1.875 0 0 1 1.714 1.743l.216 3.23.005.227a2.5 2.5 0 0 1-.731 1.707l-1.244 1.246-.883-.883 1.243-1.246a1.25 1.25 0 0 0 .362-.967l-.216-3.23a.625.625 0 0 0-.57-.582l-3.31-.278-.137-.004a1.25 1.25 0 0 0-.852.366l-1.23 1.232-.883-.884L7.27 2.446a2.5 2.5 0 0 1 1.978-.724Zm1.591 2.662a.969.969 0 1 1 0 1.937.969.969 0 0 1 0-1.937Z",fill:"#585A5A",fillRule:"nonzero"}))},1511:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-insert-doc",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"58591898a",d:"M0 0h256v256H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"58591898b",fill:"#fff"},r.createElement("use",{xlinkHref:"#58591898a"})),r.createElement("g",{mask:"url(#58591898b)"},r.createElement("path",{d:"M17 25h222v222H17z"}),r.createElement("path",{d:"M218 212c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 218a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 224H38a5.981 5.981 0 0 1-4.243-1.757A5.981 5.981 0 0 1 32 218c0-1.657.672-3.157 1.757-4.243A5.981 5.981 0 0 1 38 212ZM129.365 75.746l.312.012a6.967 6.967 0 0 1 4.267 1.79l1.033 1.163a6.986 6.986 0 0 1 1.265 4.456 6.967 6.967 0 0 1-1.861 4.345L99.919 122H218c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 128a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 134H99.91l34.19 34.201.863.999a6.988 6.988 0 0 1 1.272 4.579 6.97 6.97 0 0 1-2.03 4.426 6.977 6.977 0 0 1-4.848 2.05 6.976 6.976 0 0 1-4.868-1.873l-45.335-45.329-.862-.998a6.986 6.986 0 0 1-1.28-4.477 6.967 6.967 0 0 1 1.862-4.345L124.202 77.9l.998-.862a6.986 6.986 0 0 1 4.477-1.28ZM218 32c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 38a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 44H38a5.981 5.981 0 0 1-4.243-1.757A5.981 5.981 0 0 1 32 38c0-1.657.672-3.157 1.757-4.243A5.981 5.981 0 0 1 38 32Z",stroke:"#096DD9",strokeWidth:8,fill:"#096DD9"}))))},1672:function(e,t,n){var r=n(209),o=n(235),i=n(918),a=n(64);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},245:function(e,t,n){"use strict";n(2727);var r=n(916);n(825);t.a=r.a},2868:function(e,t,n){"use strict";n.r(t),n.d(t,"getFileAccept",(function(){return _})),n.d(t,"getImageAccept",(function(){return E})),n.d(t,"EmbedButtonStatus",(function(){return O})),n.d(t,"getIsDiabledPreviewAndEmbed",(function(){return S})),n.d(t,"getLocalDocAcceptArr",(function(){return x})),n.d(t,"getFileAcceptArr",(function(){return j})),n.d(t,"getImageAcceptArr",(function(){return T})),n.d(t,"getVideoAcceptArr",(function(){return C})),n.d(t,"getAudioAcceptArr",(function(){return k}));var r=n(380),o=n(695),i=r.a.LOCAL_DOC_EXT,a=r.a.LOCAL_DOC_EXT_NORMAL,u=r.a.LOCAL_DOC_EXT_PAID,c=r.a.FILE_EXT,l=r.a.FILE_EXT_NORMAL,s=r.a.FILE_EXT_PAID,f=r.a.IMAGE_EXT,p=r.a.IMAGE_EXT_NORMAL,d=r.a.IMAGE_EXT_PAID,h=r.a.VIDEO_EXT,m=r.a.VIDEO_EXT_NORMAL,y=r.a.VIDEO_EXT_PAID,v=r.a.AUDIO_EXT,b=r.a.AUDIO_EXT_NORMAL,g=r.a.AUDIO_EXT_PAID,w=function(){var e="undefined"!=typeof navigator?navigator.userAgent:"";return/android/i.test(e)};function _(){return w()?"*/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s.join(","):l.join(","):c.join(",")}function E(){return w()?"image/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?d.join(","):p.join(","):f.join(",")}var O={NORMAL:0,DISABLE:1,PREVENT:2};function S(){return!(window.appData||{}).isYuque||Object(o.isPaidCheckAll)()?O.NORMAL:O.PREVENT}function x(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?u:a:i}function j(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s:l:c}function T(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?d:p:f}function C(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?y:m:h}function k(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?g:b:v}},310:function(e,t,n){"use strict";var r=n(484);n.d(t,"a",(function(){return r.a}))},3334:function(e,t){e.exports=function(e){return null==e?"":""+e}},3338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var r=l(n(3435)),o=l(n(3436)),i=l(n(3437)),a=l(n(3438)),u=l(n(3439)),c=l(n(3440));function l(e){return e&&e.__esModule?e:{default:e}}t.hover=a.default,t.handleHover=a.default,t.handleActive=u.default,t.loop=c.default;var s=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var u=(0,r.default)(n),c=(0,o.default)(e,u);return(0,i.default)(c)};t.default=s},3342:function(e,t,n){var r=n(3334),o=n(3373),i=String.prototype.trim;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=o(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},3344:function(e,t,n){"use strict";n.r(t),n.d(t,"isDesktopApp",(function(){return m})),n.d(t,"isYuque",(function(){return y})),n.d(t,"isDev",(function(){return v})),n.d(t,"isWin",(function(){return b})),n.d(t,"myNotesConsts",(function(){return g})),n.d(t,"getFilterBarConfig",(function(){return w})),n.d(t,"downloadFileHandler",(function(){return _}));var r=n(437);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=window,u=a.appData,c=a.navigator,l=u||{},s=l.env,f=l.me,p=void 0===f?{}:f,d="note/pinned/show/".concat(p.id),h="note/order/".concat(p.id),m=u.isDesktopApp,y=u.isYuque,v="local"===s,b="win32"===c.platform.toLowerCase(),g={NOTE_ORDER_KEY:h,NOTE_PINNED_SHOW_KEY:d,NOTE_ITEM_CONTENT_MIN_HEIGHT:214,NOTE_LIST_VIEW_MODES:{lite:"lite",full:"full"},COLLAPSE_BTN_CLASS:"note-item-collapse",SUBMIT_BTN_CLASS:"note-item-submit",NOTE_LIST_ITEM_CLASS:"note-list-item",NOTE_LIST_READ_TAG_ADD_CLASS:"note-list-item-read-tag-add",NOTE_EDITOR_AUTO_SAVE_INTERVAL:3e4},w=function(){return i(y?i(i(i(i(i({},r.FILTER_TYPES.image,__("图片")),r.FILTER_TYPES.bookmark,__("书签")),r.FILTER_TYPES.attachment,__("附件")),r.FILTER_TYPES.wechatRobot,__("来自微信")),r.FILTER_TYPES.yuqueChromeExtension,__("来自插件")):i(i(i(i({},r.FILTER_TYPES.image,__("图片")),r.FILTER_TYPES.bookmark,__("书签")),r.FILTER_TYPES.attachment,__("附件")),r.FILTER_TYPES.dingTalkRobot,__("来自钉钉")),r.FILTER_TYPES.share,__("分享中"))},_=function(e,t){var n=new URL(e);n.searchParams.append("yuque-desktop-download",""),t&&n.searchParams.append("filename",encodeURIComponent(t)),fetch(n.toString())}},3354:function(e,t,n){var r=n(3392),o=n(1055)((function(e,t,n){r(e,t,n)}));e.exports=o},3357:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(55),a=n.n(i),u=n(195),c=n.n(u),l=n(63),s=n.n(l),f=n(3391),p=n.n(f),d=n(3633),h=n(2868),m=n(3211),y=n(155),v=n(3629),b=n.n(v),g=n(3630),w=n.n(g),_=n(3621),E=n.n(_),O=n(3631),S=n(350),x=n(979),j=n(141),T=n(48);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var P,A=a()("editor:cache"),R=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t},(t=[{key:"retrieve",value:function(){var e={format:null,value:null};A("[retrieve]key: ",this.key);var t=j.a.get(this.key);if(!t)return null;A("[retrieve]find text: ",t);var n=p.a.guessFormat(t);return e.format=n,e.value=t,A("[retrieve]doc: ",e),e}},{key:"put",value:function(e,t){A("[put]content cached: ","".concat(this.key," -> ").concat(e)),j.a.set(this.key,e)}},{key:"clear",value:function(){j.a.remove(this.key)}}])&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function M(){M=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==N(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(N(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function F(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){F(i,r,o,a,u,"next",e)}function u(e){F(i,r,o,a,u,"throw",e)}a(void 0)}))}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function G(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var q=a()("biz:lakex_mini_editor_base"),z=(null===(P=window.appData)||void 0===P?void 0:P.me)||{},V=function(){return e=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,"getDefaultSuggestions",(function(){return t.options.getDefaultSuggestions?t.options.getDefaultSuggestions():[]})),G(this,"setEngine",(function(e){t._engine=e,t.ocrListenerRemover=m.a.onEditorEngineLoaded(e,t.getType())})),G(this,"getEngine",(function(){return t._engine})),G(this,"setValue",(function(e){var n=e;e?e.startsWith("<")?(n={type:"lake",value:e},t._engine.setDocument(n)):"string"==typeof e&&(n={type:"json",value:JSON.parse(e)},t._engine.setDocument(n)):t._engine.setDocument()})),G(this,"getValue",(function(){return t._engine?t._engine.getPureContent():t.getDefaultValue()})),G(this,"isEmpty",(function(){return!t._engine||t._engine.isEmpty()})),G(this,"getSafetyValue",U(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contentReady();case 2:return e.abrupt("return",t.getValue());case 3:case"end":return e.stop()}}),e)})))),G(this,"getHtml",(function(){return t._engine?t._engine.getPureHtml():null})),G(this,"focus",(function(e){if(!t._engine)return null;t._engine.focus(e)})),G(this,"contentReady",U(M().mark((function e(){var n,r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._engine){e.next=2;break}return e.abrupt("return",null);case 2:return n=0,r=function(e,o){t._engine.canGetDocument()?e():n>10?o():(n++,setTimeout((function(){r(e,o)}),1e3))},e.abrupt("return",new Promise(r));case 5:case"end":return e.stop()}}),e)})))),G(this,"saveAll",(function(){if(!t.options.disableCache){var e={format:s.a.FORMAT.LAKE,value:t.getValue(),html:t.getHtml()};t.saveToCache(e)}})),this.options=n,this.from=n.from||"reply",this.targetType=n.targetType,this.belong=n.belong,this.belongType=n.belongType,this.book=n.book,this.group=n.group,this.target=n.target,this.attachType=n.attachType,this.isEditMode=!!n.target,this.type=this.getType(),this.ctoken=Object(S.a)(window);var r=this.getCacheKey();this.cacheKeys={title:"".concat(r,"/title"),content:"".concat(r,"/content")},n.disableCache||(this.editorCache=new R(this.cacheKeys.content)),this.uuid=this.getUuid(),this._engine=null,this.ocrListenerRemover=null,this.initialDocument=null,this.init()},t=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),q("init use: ",this.initialDocument)}},{key:"buildOptions",value:function(e){var t=this,n={translate:{supportTranslate:w()()},hideVipIcon:Object(O.a)(),board:{boardWebProxyParams:{webProxy:T.a,userId:null==z?void 0:z.id,spm:y,appData:window.appData}},image:{supportImgOCR:E()(),uploadFileURL:function(){return m.a.adaptOcrImageUploadUrl(t.getImageUploadUrl())},accept:Object(h.getImageAcceptArr)()},file:{hideEmbedButton:b()(),uploadFileURL:this.getFileUploadUrl(),accept:Object(h.getFileAcceptArr)(),localdocAccept:Object(h.getLocalDocAcceptArr)(),embedButtonStatus:Object(h.getIsDiabledPreviewAndEmbed)()},transfer:{transferFilesURL:this.getTransferUrl()},localdoc:{uploadFileURL:this.getFileUploadUrl(),accept:Object(h.getLocalDocAcceptArr)()},mention:{mentionURL:x.a.patchGroupIdToUrl(this.getMentionActionUrl()),defaultList:this.getDefaultSuggestions()},lockedtext:{action:this.getCryptoUrl()},placeholder:(null==e?void 0:e.placeholder)||this.getPlaceholder(),link:{autoCompleteLink:null==e?void 0:e.autoCompleteLink},video:{uploadAction:this.getMediaUploadUrl("video"),queryAction:"/api/video",accept:Object(h.getVideoAcceptArr)()},audio:{uploadFileURL:this.getMediaUploadUrl("audio"),queryURL:"/api/video",accept:Object(h.getAudioAcceptArr)()},vote:{allowVote:!0,queryDetailUrl:"api/votes",queryCheckUrl:"api/votes/mine",voteUrl:"api/votes"},yuque:{disableEmbedView:this.getDisableYuqueCardEmbedView()},materialLibrary:{component:o.a.createElement(d.a,{storage:j.a,webProxy:T.a})},fullscreen:{enable:this.getEnableFullEditor()}},r=[],i=this.getBlockedCards();return i&&i.length>1&&(r=Array.from(new Set([].concat(I(r),I(i))))),n.disabledPlugins=r,n}},{key:"getProps",value:function(){return{format:this.getFormat(),defaultValue:this.getDefaultValue(),autoFocus:this.getAutoFocus(),isMiniSize:this.isMiniSize()}}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var e=this.options.autoFocus;return null!=e?e:!!this.options.useMiniGuide}},{key:"isMiniSize",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getBlockedCards",value:function(){return["video","checkIn","vote","audio"]}},{key:"getUuid",value:function(){var e=this.cacheKeys.uuid,t=j.a.get(e);return t||(t=c()(32)+c()(32),j.a.set(e,t)),t}},{key:"getDefaultFormat",value:function(){return s.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var e=this.options.format;return e||this.initialDocument.format}},{key:"getPlaceholder",value:function(){return this.options.placeholder}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var e=this.loadFromCache();if(q("cached document:",e),this.isEditMode){var t=this.getContentObject();return q("adapted content: ",t),e&&(q("merge with cached content",e),t.format=e.format||t.format,t.title=e.title||t.title,t.value=e.value||t.value),t}if(e)return e.format=e.format||this.getDefaultFormat(),e;var n=this.loadFromUrl();return n||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(e){return{format:(e=e||this.target||{}).format||this.getDefaultFormat(),title:e.title||e.name||"",value:e.value||e.body_asl||e.content}}},{key:"getDefaultValue",value:function(){var e=this.options.defaultValue;return e||this.initialDocument.value}},{key:"getFullUrl",value:function(e){return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getTransferUrl",value:function(){return this.getFullUrl("/api/upload/copy?type=attachment")}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.getFullUrl(e)}},{key:"getMediaUploadUrl",value:function(e){var t="/api/video?ctoken=".concat(this.ctoken,"&format=").concat(e);return this.getFullUrl(t)}},{key:"getImageUploadUrl",value:function(){var e=this.getFileUploadUrl();return e?e.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var e="";return this.isEditMode&&!this.options.useBelongAttach?e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),e}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"getDisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}},{key:"saveToCache",value:function(e){var t;q("save to cache:",e),e.format&&(e.title&&j.a.set(this.cacheKeys.title,e.title),this.needCacheContent(e)?null===(t=this.editorCache)||void 0===t||t.put(e.value,e.format):q("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(e){if(this.options.disableCache)return!1;if(!e.value)return!1;var t;if(p.a.isBlank(e))return null===(t=this.editorCache)||void 0===t||t.clear(),!1;if(!this.target)return!0;var n=this.getContentObject();return!p.a.isContentSame(e.format,n.value,e.value)}},{key:"reset",value:function(){q("reset editor"),this.clearCache(),this._engine&&this._engine.setDocument()}},{key:"isContentChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e){var t=this.loadFromCache();t&&(e=t.value)}if(!this.target)return!0;var n="<cursor />";return this.target.body_asl.trim().replace(n,"")!==e.trim().replace(n,"")}},{key:"clearCache",value:function(){var e=this;q("clear cache"),Object.keys(this.cacheKeys).forEach((function(t){j.a.remove(e.cacheKeys[t])}))}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){if(this.options.disableCache)return null;var e=!1,t={format:null,title:null,value:null},n=this.editorCache.retrieve();if(n&&(e=!0,t.format=n.format,t.value=n.value),this.cacheKeys.title){var r=j.a.get(this.cacheKeys.title);r&&(e=!0,t.title=r)}return e?t:null}},{key:"destroy",value:function(){var e;null===(e=this.ocrListenerRemover)||void 0===e||e.call(this)}}],n=[{key:"getEmptyDocument",value:function(){return{format:s.a.FORMAT.LAKE,value:null}}}],t&&B(e.prototype,t),n&&B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();t.a=V},3359:function(e,t,n){var r=n(442),o=n(3369);e.exports=function(e,t){return e&&r(e,o(t))}},3360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=c(o),a=c(n(3338)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3443));function c(e){return e&&e.__esModule?e:{default:e}}var l=t.Checkboard=function(e){var t=e.white,n=e.grey,c=e.size,l=e.renderers,s=e.borderRadius,f=e.boxShadow,p=e.children,d=(0,a.default)({default:{grid:{borderRadius:s,boxShadow:f,absolute:"0px 0px 0px 0px",background:"url("+u.get(t,n,c,l.canvas)+") center left"}}});return(0,o.isValidElement)(p)?i.default.cloneElement(p,r({},p.props,{style:r({},p.props.style,d.grid)})):i.default.createElement("div",{style:d.grid})};l.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=l},3363:function(e,t,n){var r=n(3334),o=n(3414);e.exports=function(e,t,n,i){e=r(e),t=~~t;var a=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",i){case"right":return a=t-e.length,e+o(n,a);case"both":return a=t-e.length,o(n,Math.ceil(a/2))+e+o(n,Math.floor(a/2));default:return a=t-e.length,o(n,a)+e}}},3365:function(e,t,n){var r=n(180),o=n(100);e.exports=function(e){return o(e)&&r(e)}},3369:function(e,t,n){var r=n(273);e.exports=function(e){return"function"==typeof e?e:r}},3372:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},3373:function(e,t,n){var r=n(3406);e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},3374:function(e,t,n){var r=n(3334);e.exports=function(e){return r(e).split("")}},3375:function(e,t,n){var r=n(3334),o=n(3373),i=String.prototype.trimRight;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=o(t),e.replace(new RegExp(t+"+$"),""))}},3382:function(e,t,n){var r=n(190),o=n(196);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},3383:function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},3389:function(e,t,n){"use strict";var r=n(3634),o={};t.a=window.isDesktopOfflineApp?o:r.a},3390:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=n(3344).myNotesConsts,c=n(400),l=n(1030),s=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)})),f=u.COLLAPSE_BTN_CLASS,p=u.SUBMIT_BTN_CLASS;function d(e){var t=document.querySelectorAll(".".concat(e));if(t&&t.length){var n=document.body.getBoundingClientRect().height;t.forEach((function(t){var r=t.getBoundingClientRect().top,o=t.closest(".note-list-item").querySelector(".right-tool-".concat(e));o&&(o.style.display=r-n>10?"flex":"none")}))}}s.scrollToTop=c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelector("#mynote-container .note-list-scroll"),n={top:0,left:0};e.silent||(n.behavior="smooth"),t.scrollTo(n)}),100),s.scrollToElem=c((function(e){var t=e.id,n=document.querySelector("#note-".concat(t));if(n){var r=n.offsetTop;document.querySelector("#mynote-container .note-list-scroll").scrollTo({top:r,left:0,behavior:"smooth"})}}),100),s.fixListContainerHeight=function(){var e=document.querySelector(".material-library-view"),t=document.querySelector(".note-list-container .note-list");if(e&&t){var n=e.getBoundingClientRect().height-82,r=document.querySelector(".note-tag-container");r&&(n-=r.getBoundingClientRect().height),t.style.height="".concat(n,"px")}},s.fixNoteViewer=c((function(e){var t=e.id,n=document.querySelector("#note-".concat(t)),r=document.querySelector("#mynote-container .note-list-scroll");if(n&&r&&n.offsetTop>=0&&n.offsetTop+10<r.scrollTop){var o=n.offsetTop;r.scrollTo({top:o,left:0,behavior:"smooth"})}}),100),s.checkSubmitBtnShow=function(){return d(p)},s.checkCollapseBtnShow=function(){return d(f)};var h=l((function(){s.checkSubmitBtnShow(),s.checkCollapseBtnShow()}),500);s.handleListScroll=function(){var e=document.querySelector("#mynote-container .note-list-scroll");e&&(e.removeEventListener("scroll",h),e.addEventListener("scroll",h))},e.exports=s},3391:function(e,t,n){"use strict";var r=n(3561),o=n(63),i=o.FORMAT,a=o.FORMATS_SAVE_TO_BODY_ASL;e.exports={guessFormat:function(e){return(e=(e=e||"").trim())?this.isLake(e)?i.LAKE:this.isAsl(e)?i.ASL:this.isSpreadJs(e)?i.SPREADJS:this.isLakeSheet(e)?i.LAKESHEET:i.MARKDOWN:null},isAsl:function(e){return e.startsWith('["root"')},isAsl1:function(e){return(e=(e=e||"").trimLeft()).startsWith('{"nodes":')},isLake:function(e){return e.startsWith("<!doctype lake>")},isSpreadJs:function(e){return e.startsWith('{"type":"Sheet"')},isLakeSheet:function(e){return e.startsWith('{"format":"lakesheet","type":"Sheet"')},isLakeMind:function(e){return e.startsWith('{"format":"lakemind","type":"Mind"')},isLakeBoard:function(e){return e.startsWith('{"format":"lakeboard","type":"Board"')},isLakeShow:function(e){return e.startsWith('{"format":"lakeshow","type":"Show"')},isSheet:function(e){return this.isLakeSheet(e)||this.isSpreadJs(e)},isBlank:function(e){if(!e)return!0;if(!e.value)return!0;var t=e.value,n=e.format;if(n===i.LAKE)return"<!doctype lake>"===t.replace(/<(?:br|cursor|meta) [^>]*\/>/g,"").replace(/<p><\/p>/g,"")||""===r(t).stripTags().value()&&!t.includes("<card");if(n===i.MARKDOWN&&"string"==typeof t)return""===t.trim();return!1},extractSummary:function(e){return r(e).stripTags().trim(" \n").replace(/\n/g," ").unescapeHTML().truncate(147,"...").value()},isHasImageCard:function(e){if(!e)return!1;return/<card.*\s*name="image"\s+value="(.{5,190})"/i.test(e)},extractFirstImage:function(e){if(e){var t=/<img[^>]{1,2000}src="([^"]{10,190})"/i.exec(e);return t?t[1]:void 0}},getContentForEdit:function(e){return(a.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"").trim()},isContentSame:function(e,t,n){return t===n||e===i.LAKE&&this.getPureLakeContent(t)===this.getPureLakeContent(n)},getPureLakeContent:function(e){return(e=e||"").replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")},removeLakeMeta:function(e){return e?e.replace(/<meta [^>]{1,256}\/>/gi,""):e}}},3392:function(e,t,n){var r=n(249),o=n(3382),i=n(555),a=n(3434),u=n(89),c=n(247),l=n(3383);e.exports=function e(t,n,s,f,p){t!==n&&i(n,(function(i,c){if(p||(p=new r),u(i))a(t,n,c,s,e,f,p);else{var d=f?f(l(t,c),i,c+"",t,n,p):void 0;void 0===d&&(d=i),o(t,c,d)}}),c)}},3393:function(e,t,n){var r=n(554),o=n(405),i=n(3369),a=n(64);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},3404:function(e,t,n){var r=n(3334);e.exports=function(e){return/^\s*$/.test(r(e))}},3405:function(e,t,n){var r=n(3334);e.exports=function(e){return(e=r(e)).charAt(0).toLowerCase()+e.slice(1)}},3406:function(e,t,n){var r=n(3334);e.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},3407:function(e,t,n){var r=n(3334),o="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",i="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";o+=o.toUpperCase(),i=(i+=i.toUpperCase()).split(""),o+="ß",i.push("ss"),e.exports=function(e){return r(e).replace(/.{1}/g,(function(e){var t=o.indexOf(e);return-1===t?e:i[t]}))}},3408:function(e,t,n){var r=n(3374);e.exports=function(e,t,n,o){var i=r(e);return i.splice(~~t,~~n,o),i.join("")}},3409:function(e,t){e.exports=function(e){return e<0?0:+e||0}},3410:function(e,t,n){var r=n(3334);e.exports=function(e,t){return 0===(e=r(e)).length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},3411:function(e,t,n){var r=n(3342),o=n(3405);e.exports=function(e,t){return e=r(e).replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})),!0===t?o(e):e}},3412:function(e,t,n){var r=n(3342);e.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},3413:function(e,t,n){var r=n(3342);e.exports=function(e){return r(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},3414:function(e,t){e.exports=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}},3415:function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(91))},3416:function(e,t,n){var r;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return function(e,t){var n,r,a,u,c,l,s,f,p,d=1,h=e.length,m="";for(r=0;r<h;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((u=e[r]).keys)for(n=t[d],a=0;a<u.keys.length;a++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',u.keys[a],u.keys[a-1]));n=n[u.keys[a]]}else n=u.param_no?t[u.param_no]:t[d++];if(o.not_type.test(u.type)&&o.not_primitive.test(u.type)&&n instanceof Function&&(n=n()),o.numeric_arg.test(u.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(o.number.test(u.type)&&(f=n>=0),u.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,u.width?parseInt(u.width):0);break;case"e":n=u.precision?parseFloat(n).toExponential(u.precision):parseFloat(n).toExponential();break;case"f":n=u.precision?parseFloat(n).toFixed(u.precision):parseFloat(n);break;case"g":n=u.precision?String(Number(n.toPrecision(u.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=u.precision?n.substring(0,u.precision):n;break;case"t":n=String(!!n),n=u.precision?n.substring(0,u.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=u.precision?n.substring(0,u.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=u.precision?n.substring(0,u.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}o.json.test(u.type)?m+=n:(!o.number.test(u.type)||f&&!u.sign?p="":(p=f?"+":"-",n=n.toString().replace(o.sign,"")),l=u.pad_char?"0"===u.pad_char?"0":u.pad_char.charAt(1):" ",s=u.width-(p+n).length,c=u.width&&s>0?l.repeat(s):"",m+=u.align?p+n+c:"0"===l?p+c+n:c+p+n)}return m}(function(e){if(u[e])return u[e];var t,n=e,r=[],i=0;for(;n;){if(null!==(t=o.text.exec(n)))r.push(t[0]);else if(null!==(t=o.modulo.exec(n)))r.push("%");else{if(null===(t=o.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var a=[],c=t[2],l=[];if(null===(l=o.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(l[1]);""!==(c=c.substring(l[0].length));)if(null!==(l=o.key_access.exec(c)))a.push(l[1]);else{if(null===(l=o.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(l[1])}t[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return u[e]=r}(e),arguments)}function a(e,t){return i.apply(null,[e].concat(t||[]))}var u=Object.create(null);t.sprintf=i,t.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=a,void 0===(r=function(){return{sprintf:i,vsprintf:a}}.call(t,n,t,e))||(e.exports=r))}()},3417:function(e,t,n){var r=n(3375);e.exports=function(e,t,n,o){t=t||", ",n=n||" and ";var i=e.slice(),a=i.pop();return e.length>2&&o&&(n=r(t)+n),i.length?i.join(t)+n+a:a}},3418:function(e,t){e.exports=function(e,t){return[t,e,t].join("")}},3420:function(e,t,n){var r=n(127),o=n(64),i=n(100);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},3424:function(e,t,n){e.exports=n(437)},3432:function(e,t,n){var r=n(165),o=n(247);e.exports=function(e){return r(e,o(e))}},3433:function(e,t,n){e.exports=n(3393)},3434:function(e,t,n){var r=n(3382),o=n(556),i=n(557),a=n(551),u=n(558),c=n(246),l=n(64),s=n(3365),f=n(238),p=n(351),d=n(89),h=n(911),m=n(327),y=n(3383),v=n(3432);e.exports=function(e,t,n,b,g,w,_){var E=y(e,n),O=y(t,n),S=_.get(O);if(S)r(e,n,S);else{var x=w?w(E,O,n+"",e,t,_):void 0,j=void 0===x;if(j){var T=l(O),C=!T&&f(O),k=!T&&!C&&m(O);x=O,T||C||k?l(E)?x=E:s(E)?x=a(E):C?(j=!1,x=o(O,!0)):k?(j=!1,x=i(O,!0)):x=[]:h(O)||c(O)?(x=E,c(E)?x=v(E):d(E)&&!p(E)||(x=u(O))):j=!1}j&&(_.set(O,x),g(x,O,b,w,_),_.delete(O)),r(e,n,x)}}},3435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=u(n(3420)),o=u(n(3359)),i=u(n(911)),a=u(n(1672));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,i.default)(t)?(0,o.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=c},3436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(3359)),o=a(n(291)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var u=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,o.default)(e.default)||{};return t.map((function(t){var o=e[t];return o&&(0,r.default)(o,(function(e,t){n[t]||(n[t]={}),n[t]=i({},n[t],o[t])})),t})),n};t.default=u},3437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,o=n(3359),i=(r=o)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var u={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},c=t.autoprefix=function(e){var t={};return(0,i.default)(e,(function(e,n){var r={};(0,i.default)(e,(function(e,t){var n=u[t];n?r=a({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=c},3438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return i=c=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return a.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},a.default.createElement(e,o({},c.props,c.state)))},u(c,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=c},3439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return i=c=u(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return a.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},a.default.createElement(e,o({},c.props,c.state)))},u(c,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=c},3440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},3441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=s(i),u=s(n(3338)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3442)),l=s(n(3360));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=t.Alpha=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=c.calculateChange(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,u.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.default.createElement("div",{style:n.alpha},a.default.createElement("div",{style:n.checkboard},a.default.createElement(l.default,{renderers:this.props.renderers})),a.default.createElement("div",{style:n.gradient}),a.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("div",{style:n.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:n.slider}))))}}]),t}(i.PureComponent||i.Component);t.default=p},3442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r,o){var i=o.clientWidth,a=o.clientHeight,u="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,c="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=u-(o.getBoundingClientRect().left+window.pageXOffset),s=c-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var f=void 0;if(f=s<0?0:s>a?1:Math.round(100*s/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var p=void 0;if(r!==(p=l<0?0:l>i?1:Math.round(100*l/i)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null}},3443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},o=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null};t.get=function(e,t,n,i){var a=e+"-"+t+"-"+n+(i?"-server":"");if(r[a])return r[a];var u=o(e,t,n,i);return r[a]=u,u}},3444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),a=u(n(3338));function u(e){return e&&e.__esModule?e:{default:e}}var c=[38,40],l=1,s=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,c.indexOf(t)>-1)){var o=n.getArrowOffset(),i=38===e.keyCode?r+o:r-o;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+l++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,a.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return i.default.createElement("div",{style:t.wrap},i.default.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?i.default.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(o.PureComponent||o.Component);t.default=s},3445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=c(n(3338)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3446));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=t.Hue=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=u.calculateChange(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,a.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return i.default.createElement("div",{style:r.hue},i.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),i.default.createElement("div",{style:r.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:r.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=s},3446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(r.getBoundingClientRect().left+window.pageXOffset),l=u-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var s=void 0;if(l<0)s=359;else if(l>i)s=0;else{s=360*(-100*l/i+100)/100}if(n.h!==s)return{h:s,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var f=void 0;if(c<0)f=0;else if(c>o)f=359;else{f=360*(100*c/o)/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}},3447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var r=u(n(0)),o=u(n(4)),i=u(n(3338)),a=u(n(3354));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Raised=function(e){var t=e.zDepth,n=e.radius,o=e.background,u=e.children,c=e.styles,l=void 0===c?{}:c,s=(0,i.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},l),{"zDepth-1":1===t});return r.default.createElement("div",{style:s.wrap},r.default.createElement("div",{style:s.bg}),r.default.createElement("div",{style:s.content},u))};c.propTypes={background:o.default.string,zDepth:o.default.oneOf([0,1,2,3,4,5]),radius:o.default.number,styles:o.default.object},c.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},t.default=c},3448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(3338)),u=l(n(1030)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3449));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,c.calculateChange(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,u.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,u=t.pointer,c=t.circle,l=(0,a.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:u,circle:c}},{custom:!!this.props.style});return i.default.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),i.default.createElement("div",{style:l.white,className:"saturation-white"},i.default.createElement("div",{style:l.black,className:"saturation-black"}),i.default.createElement("div",{style:l.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:l.circle}))))}}]),t}(o.PureComponent||o.Component);t.default=s},3449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n){var r=n.getBoundingClientRect(),o=r.width,i=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(n.getBoundingClientRect().left+window.pageXOffset),l=u-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o&&(c=o),l<0?l=0:l>i&&(l=i);var s=c/o,f=1-l/i;return{h:t.h,s:s,v:f,a:t.a,source:"hsv"}}},3450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=l(i),u=l(n(400)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3451));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(c.simpleCheckForValidColor(e)){var r=c.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(c.simpleCheckForValidColor(e)){var r=c.toState(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=r({},c.toState(e.color,0)),t.debounce=(0,u.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),o(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),a.default.createElement(e,r({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return r({},c.toState(e.color,t.oldHue))}}]),n}(i.PureComponent||i.Component);return t.propTypes=r({},e.propTypes),t.defaultProps=r({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=s},3451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isvalidColorString=t.red=t.getContrastingColor=t.isValidHex=t.toState=t.simpleCheckForValidColor=void 0;var r=i(n(3433)),o=i(n(703));function i(e){return e&&e.__esModule?e:{default:e}}t.simpleCheckForValidColor=function(e){var t=0,n=0;return(0,r.default)(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e};var a=t.toState=function(e,t){var n=e.hex?(0,o.default)(e.hex):(0,o.default)(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),u=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===u&&0===a.a?"transparent":"#"+u,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}};t.isValidHex=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,o.default)(e).isValid()},t.getContrastingColor=function(e){if(!e)return"#fff";var t=a(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},t.isvalidColorString=function(e,t){var n=e.replace("°","");return(0,o.default)(t+" ("+n+")")._ok}},3452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=c(n(0)),i=c(n(3338)),a=n(3453),u=c(n(3360));function c(e){return e&&e.__esModule?e:{default:e}}var l=t.Swatch=function(e){var t=e.color,n=e.style,a=e.onClick,c=void 0===a?function(){}:a,l=e.onHover,s=e.title,f=void 0===s?t:s,p=e.children,d=e.focus,h=e.focusStyle,m=void 0===h?{}:h,y="transparent"===t,v=(0,i.default)({default:{swatch:r({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,d?m:{})}}),b={};return l&&(b.onMouseOver=function(e){return l(t,e)}),o.default.createElement("div",r({style:v.swatch,onClick:function(e){return c(t,e)},title:f,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&c(t,e)}},b),p,y&&o.default.createElement(u.default,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,a.handleFocus)(l)},3453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=(r=a)&&r.__esModule?r:{default:r};function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=c(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},c(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),i(r,[{key:"render",value:function(){return u.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},u.default.createElement(e,o({},this.props,this.state)))}}]),r}(u.default.Component)}},3459:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"initList",(function(){return m})),n.d(r,"syncList",(function(){return v})),n.d(r,"createMirror",(function(){return g}));var o={};n.r(o),n.d(o,"lock",(function(){return x})),n.d(o,"unlock",(function(){return T})),n.d(o,"versionList",(function(){return k})),n.d(o,"versionDetail",(function(){return P})),n.d(o,"saveVersion",(function(){return R}));var i={};n.r(i),n.d(i,"show",(function(){return U})),n.d(i,"index",(function(){return G})),n.d(i,"update",(function(){return q})),n.d(i,"status",(function(){return V})),n.d(i,"mirror",(function(){return H})),n.d(i,"create",(function(){return X})),n.d(i,"createNewMirror",(function(){return $}));var a={};n.r(a),n.d(a,"batchArchive",(function(){return re})),n.d(a,"batchDelete",(function(){return ie})),n.d(a,"batchPin",(function(){return ue})),n.d(a,"batchUnPin",(function(){return le})),n.d(a,"updatePublic",(function(){return fe})),n.d(a,"shareToGarden",(function(){return de}));var u={};n.r(u),n.d(u,"index",(function(){return ge})),n.d(u,"create",(function(){return _e})),n.d(u,"del",(function(){return Oe})),n.d(u,"count",(function(){return xe})),n.d(u,"generateTags",(function(){return Te}));var c={};n.r(c),n.d(c,"initList",(function(){return Re})),n.d(c,"syncList",(function(){return Ie}));var l={};n.r(l),n.d(l,"index",(function(){return Ge})),n.d(l,"create",(function(){return qe})),n.d(l,"del",(function(){return Ve})),n.d(l,"update",(function(){return He})),n.d(l,"pin",(function(){return Xe}));var s=n(1);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){p=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:C(e,n,u)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};l(E,a,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(R([])));S&&S!==n&&r.call(S,a)&&(E=S);var x=_.prototype=g.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,u){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==f(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=k(u,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function d(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,u,"next",e)}function u(e){d(i,r,o,a,u,"throw",e)}a(void 0)}))}}function m(e){return y.apply(this,arguments)}function y(){return y=h(p().mark((function e(t){var n,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteAppController/initList",e.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/initList",t,n));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return b=h(p().mark((function e(t){var n,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteAppController/syncList",e.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/syncList",t,n));case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=h(p().mark((function e(t){var n,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteAppController/createMirror",e.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/createMirror",t,n));case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:C(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(R([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=g.prototype=v.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==_(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=k(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(_(t)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function O(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){O(i,r,o,a,u,"next",e)}function u(e){O(i,r,o,a,u,"throw",e)}a(void 0)}))}}function x(e){return j.apply(this,arguments)}function j(){return j=S(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteContentController/lock",e.abrupt("return",s.put("/api/modules/note/notes/NoteContentController/lock",t,n));case 3:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function T(e){return C.apply(this,arguments)}function C(){return C=S(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteContentController/unlock",e.abrupt("return",s.delete("/api/modules/note/notes/NoteContentController/unlock",t,n));case 3:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function k(e){return L.apply(this,arguments)}function L(){return L=S(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteContentController/versionList",e.abrupt("return",s.get("/api/modules/note/notes/NoteContentController/versionList",t,n));case 3:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function P(e){return A.apply(this,arguments)}function A(){return A=S(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteContentController/versionDetail",e.abrupt("return",s.get("/api/modules/note/notes/NoteContentController/versionDetail",t,n));case 3:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return N=S(E().mark((function e(t){var n,r=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteContentController/saveVersion",e.abrupt("return",s.post("/api/modules/note/notes/NoteContentController/saveVersion",t,n));case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(){D=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==I(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(I(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function M(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){M(i,r,o,a,u,"next",e)}function u(e){M(i,r,o,a,u,"throw",e)}a(void 0)}))}}function U(e){return B.apply(this,arguments)}function B(){return B=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/show",e.abrupt("return",s.get("/api/modules/note/notes/NoteController/show",t,n));case 3:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return Y=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/index",e.abrupt("return",s.get("/api/modules/note/notes/NoteController/index",t,n));case 3:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function q(e){return z.apply(this,arguments)}function z(){return z=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/update",e.abrupt("return",s.put("/api/modules/note/notes/NoteController/update",t,n));case 3:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return W=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/status",e.abrupt("return",s.get("/api/modules/note/notes/NoteController/status",t,n));case 3:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return K=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/mirror",e.abrupt("return",s.get("/api/modules/note/notes/NoteController/mirror",t,n));case 3:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return Z=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/create",e.abrupt("return",s.post("/api/modules/note/notes/NoteController/create",t,n));case 3:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function $(e){return J.apply(this,arguments)}function J(){return J=F(D().mark((function e(t){var n,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteController/createNewMirror",e.abrupt("return",s.post("/api/modules/note/notes/NoteController/createNewMirror",t,n));case 3:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function ee(){ee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Q(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Q(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function te(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){te(i,r,o,a,u,"next",e)}function u(e){te(i,r,o,a,u,"throw",e)}a(void 0)}))}}function re(e){return oe.apply(this,arguments)}function oe(){return oe=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/batchArchive",e.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchArchive",t,n));case 3:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ie(e){return ae.apply(this,arguments)}function ae(){return ae=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/batchDelete",e.abrupt("return",s.delete("/api/modules/note/notes/NoteOperateController/batchDelete",t,n));case 3:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function ue(e){return ce.apply(this,arguments)}function ce(){return ce=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/batchPin",e.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchPin",t,n));case 3:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function le(e){return se.apply(this,arguments)}function se(){return se=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/batchUnPin",e.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchUnPin",t,n));case 3:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function fe(e){return pe.apply(this,arguments)}function pe(){return pe=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/updatePublic",e.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/updatePublic",t,n));case 3:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function de(e){return he.apply(this,arguments)}function he(){return he=ne(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteOperateController/shareToGarden",e.abrupt("return",s.post("/api/modules/note/notes/NoteOperateController/shareToGarden",t,n));case 3:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ye(){ye=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==me(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(me(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ve(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ve(i,r,o,a,u,"next",e)}function u(e){ve(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ge(e){return we.apply(this,arguments)}function we(){return we=be(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteTagController/index",e.abrupt("return",s.get("/api/modules/note/notes/NoteTagController/index",t,n));case 3:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function _e(e){return Ee.apply(this,arguments)}function Ee(){return Ee=be(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteTagController/create",e.abrupt("return",s.post("/api/modules/note/notes/NoteTagController/create",t,n));case 3:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Oe(e){return Se.apply(this,arguments)}function Se(){return Se=be(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteTagController/del",e.abrupt("return",s.delete("/api/modules/note/notes/NoteTagController/del",t,n));case 3:case"end":return e.stop()}}),e)}))),Se.apply(this,arguments)}function xe(e){return je.apply(this,arguments)}function je(){return je=be(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteTagController/count",e.abrupt("return",s.get("/api/modules/note/notes/NoteTagController/count",t,n));case 3:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function Te(e){return Ce.apply(this,arguments)}function Ce(){return Ce=be(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/notes/NoteTagController/generateTags",e.abrupt("return",s.post("/api/modules/note/notes/NoteTagController/generateTags",t,n));case 3:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Le(){Le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==ke(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ke(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Pe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Pe(i,r,o,a,u,"next",e)}function u(e){Pe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Re(e){return Ne.apply(this,arguments)}function Ne(){return Ne=Ae(Le().mark((function e(t){var n,r=arguments;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagAppController/initList",e.abrupt("return",s.get("/api/modules/note/tags/TagAppController/initList",t,n));case 3:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}function Ie(e){return De.apply(this,arguments)}function De(){return De=Ae(Le().mark((function e(t){var n,r=arguments;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagAppController/syncList",e.abrupt("return",s.get("/api/modules/note/tags/TagAppController/syncList",t,n));case 3:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(){Fe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Me(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Me(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ue(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ue(i,r,o,a,u,"next",e)}function u(e){Ue(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Ge(e){return Ye.apply(this,arguments)}function Ye(){return Ye=Be(Fe().mark((function e(t){var n,r=arguments;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagController/index",e.abrupt("return",s.get("/api/modules/note/tags/TagController/index",t,n));case 3:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function qe(e){return ze.apply(this,arguments)}function ze(){return ze=Be(Fe().mark((function e(t){var n,r=arguments;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagController/create",e.abrupt("return",s.post("/api/modules/note/tags/TagController/create",t,n));case 3:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ve(e){return We.apply(this,arguments)}function We(){return We=Be(Fe().mark((function e(t){var n,r=arguments;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagController/del",e.abrupt("return",s.delete("/api/modules/note/tags/TagController/del",t,n));case 3:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function He(e){return Ke.apply(this,arguments)}function Ke(){return Ke=Be(Fe().mark((function e(t){var n,r=arguments;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagController/update",e.abrupt("return",s.put("/api/modules/note/tags/TagController/update",t,n));case 3:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return Ze=Be(Fe().mark((function e(t){var n,r=arguments;return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},"/api/modules/note/tags/TagController/pin",e.abrupt("return",s.put("/api/modules/note/tags/TagController/pin",t,n));case 3:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}t.a={NoteAppCtlImpl:r,NoteContentCtlImpl:o,NoteCtlImpl:i,NoteOperateCtlImpl:a,NoteTagCtlImpl:u,TagAppCtlImpl:c,TagCtlImpl:l}},3466:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i}));var r=function(e){return e.content_updated_at="content_updated_at",e.first_published_at="first_published_at",e}({}),o=function(e){return e.all="all",e.archive="archive",e.image="image",e.bookmark="bookmark",e.attachment="attachment",e.archived="archived",e.share="share",e.dingTalkRobot="dingTalkRobot",e.wechatRobot="wechatRobot",e.yuqueChromeExtension="yuqueChromeExtension",e}({}),i=function(e){return e[e.unarchived=0]="unarchived",e[e.archived=9]="archived",e}({})},3472:function(e,t,n){"use strict";var r=n(184);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function u(e,t,n){return t=s(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(null,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,o=[{key:"buildOptions",value:function(e){var n,o,i,a,u,c=(n=t,o="buildOptions",i=this,u=l(s(1&(a=3)?n.prototype:n),o,i),2&a&&"function"==typeof u?function(e){return u.apply(i,e)}:u)([e]);return c.disabledPlugins.push("mobile"),r.ua.mobile&&c.disabledPlugins.push("placeholder","slash"),c}},{key:"getBlockedCards",value:function(){return["video","audio","checkIn"]}}],o&&i(n.prototype,o),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(n(3357).a);t.a=p},3561:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._wrapped=e}function o(e,t){"function"==typeof t&&(r.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new r(n):n})}for(var i in r.VERSION="3.3.6",r.isBlank=n(3404),r.stripTags=n(3562),r.capitalize=n(3372),r.decapitalize=n(3405),r.chop=n(3563),r.trim=n(3342),r.clean=n(3564),r.cleanDiacritics=n(3407),r.count=n(3565),r.chars=n(3374),r.swapCase=n(3566),r.escapeHTML=n(3567),r.unescapeHTML=n(3569),r.splice=n(3408),r.insert=n(3571),r.replaceAll=n(3572),r.include=n(3573),r.join=n(3574),r.lines=n(3575),r.dedent=n(3576),r.reverse=n(3577),r.startsWith=n(3578),r.endsWith=n(3579),r.pred=n(3580),r.succ=n(3581),r.titleize=n(3582),r.camelize=n(3411),r.underscored=n(3412),r.dasherize=n(3413),r.classify=n(3583),r.humanize=n(3584),r.ltrim=n(3585),r.rtrim=n(3375),r.truncate=n(3586),r.prune=n(3587),r.words=n(3588),r.pad=n(3363),r.lpad=n(3589),r.rpad=n(3590),r.lrpad=n(3591),r.sprintf=n(3592),r.vsprintf=n(3593),r.toNumber=n(3594),r.numberFormat=n(3595),r.strRight=n(3596),r.strRightBack=n(3597),r.strLeft=n(3598),r.strLeftBack=n(3599),r.toSentence=n(3417),r.toSentenceSerial=n(3600),r.slugify=n(3601),r.surround=n(3418),r.quote=n(3602),r.unquote=n(3603),r.repeat=n(3604),r.naturalCmp=n(3605),r.levenshtein=n(3606),r.toBoolean=n(3607),r.exports=n(3608),r.escapeRegExp=n(3406),r.wrap=n(3609),r.map=n(3610),r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,r.camelcase=r.camelize,r.mapChars=r.map,r.prototype={value:function(){return this._wrapped}},r)o(i,r[i]);function a(e){o(e,(function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)}))}o("tap",(function(e,t){return t(e)}));var u=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var c in u)a(u[c]);e.exports=r},3562:function(e,t,n){var r=n(3334);e.exports=function(e){return r(e).replace(/<\/?[^>]+>/g,"")}},3563:function(e,t){e.exports=function(e,t){return null==e?[]:(e=String(e),(t=~~t)>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},3564:function(e,t,n){var r=n(3342);e.exports=function(e){return r(e).replace(/\s\s+/g," ")}},3565:function(e,t,n){var r=n(3334);e.exports=function(e,t){return e=r(e),t=r(t),0===e.length||0===t.length?0:e.split(t).length-1}},3566:function(e,t,n){var r=n(3334);e.exports=function(e){return r(e).replace(/\S/g,(function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()}))}},3567:function(e,t,n){var r=n(3334),o=n(3568),i="[";for(var a in o)i+=a;i+="]";var u=new RegExp(i,"g");e.exports=function(e){return r(e).replace(u,(function(e){return"&"+o[e]+";"}))}},3568:function(e,t){e.exports={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"}},3569:function(e,t,n){var r=n(3334),o=n(3570);e.exports=function(e){return r(e).replace(/\&([^;]{1,10});/g,(function(e,t){var n;return t in o?o[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))}},3570:function(e,t){e.exports={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"}},3571:function(e,t,n){var r=n(3408);e.exports=function(e,t,n){return r(e,t,0,n)}},3572:function(e,t,n){var r=n(3334);e.exports=function(e,t,n,o){var i=new RegExp(t,!0===o?"gi":"g");return r(e).replace(i,n)}},3573:function(e,t,n){var r=n(3334);e.exports=function(e,t){return""===t||-1!==r(e).indexOf(t)}},3574:function(e,t,n){var r=n(3334),o=[].slice;e.exports=function(){var e=o.call(arguments),t=e.shift();return e.join(r(t))}},3575:function(e,t){e.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},3576:function(e,t,n){var r=n(3334);e.exports=function(e,t){var n,o=function(e){for(var t=e.match(/^[\s\\t]*/gm),n=t[0].length,r=1;r<t.length;r++)n=Math.min(t[r].length,n);return n}(e=r(e));return 0===o?e:(n="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+o+"}","gm"),e.replace(n,""))}},3577:function(e,t,n){var r=n(3374);e.exports=function(e){return r(e).reverse().join("")}},3578:function(e,t,n){var r=n(3334),o=n(3409);e.exports=function(e,t,n){return e=r(e),t=""+t,n=null==n?0:Math.min(o(n),e.length),e.lastIndexOf(t,n)===n}},3579:function(e,t,n){var r=n(3334),o=n(3409);e.exports=function(e,t,n){return e=r(e),t=""+t,(n=void 0===n?e.length-t.length:Math.min(o(n),e.length)-t.length)>=0&&e.indexOf(t,n)===n}},3580:function(e,t,n){var r=n(3410);e.exports=function(e){return r(e,-1)}},3581:function(e,t,n){var r=n(3410);e.exports=function(e){return r(e,1)}},3582:function(e,t,n){var r=n(3334);e.exports=function(e){return r(e).toLowerCase().replace(/(?:^|\s|-)\S/g,(function(e){return e.toUpperCase()}))}},3583:function(e,t,n){var r=n(3372),o=n(3411),i=n(3334);e.exports=function(e){return e=i(e),r(o(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},3584:function(e,t,n){var r=n(3372),o=n(3412),i=n(3342);e.exports=function(e){return r(i(o(e).replace(/_id$/,"").replace(/_/g," ")))}},3585:function(e,t,n){var r=n(3334),o=n(3373),i=String.prototype.trimLeft;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=o(t),e.replace(new RegExp("^"+t+"+"),""))}},3586:function(e,t,n){var r=n(3334);e.exports=function(e,t,n){return n=n||"...",t=~~t,(e=r(e)).length>t?e.slice(0,t)+n:e}},3587:function(e,t,n){var r=n(3334),o=n(3375);e.exports=function(e,t,n){if(e=r(e),t=~~t,n=null!=n?String(n):"...",e.length<=t)return e;var i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,(function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "}));return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):o(i.slice(0,i.length-1)))+n).length>e.length?e:e.slice(0,i.length)+n}},3588:function(e,t,n){var r=n(3404),o=n(3342);e.exports=function(e,t){return r(e)?[]:o(e,t).split(t||/\s+/)}},3589:function(e,t,n){var r=n(3363);e.exports=function(e,t,n){return r(e,t,n)}},3590:function(e,t,n){var r=n(3363);e.exports=function(e,t,n){return r(e,t,n,"right")}},3591:function(e,t,n){var r=n(3363);e.exports=function(e,t,n){return r(e,t,n,"both")}},3592:function(e,t,n){var r=n(3415);e.exports=r(n(3416).sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},3593:function(e,t,n){var r=n(3415);e.exports=r(n(3416).vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},3594:function(e,t){e.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},3595:function(e,t){e.exports=function(e,t,n,r){if(isNaN(e)||null==e)return"";r="string"==typeof r?r:",";var o=(e=e.toFixed(~~t)).split("."),i=o[0],a=o[1]?(n||".")+o[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a}},3596:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},3597:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},3598:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(0,n):e}},3599:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e),t=r(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},3600:function(e,t,n){var r=n(3417);e.exports=function(e,t,n){return r(e,t,n,!0)}},3601:function(e,t,n){var r=n(3342),o=n(3413),i=n(3407);e.exports=function(e){return r(o(i(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},3602:function(e,t,n){var r=n(3418);e.exports=function(e,t){return r(e,t||'"')}},3603:function(e,t){e.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},3604:function(e,t,n){var r=n(3334),o=n(3414);e.exports=function(e,t,n){if(e=r(e),t=~~t,null==n)return o(e,t);for(var i=[];t>0;i[--t]=e);return i.join(n)}},3605:function(e,t){e.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+|\d+|\D+)/g,r=String(e).match(n),o=String(t).match(n),i=Math.min(r.length,o.length),a=0;a<i;a++){var u=r[a],c=o[a];if(u!==c){var l=+u,s=+c;return l==l&&s==s?l>s?1:-1:u<c?-1:1}}return r.length!=o.length?r.length-o.length:e<t?-1:1}},3606:function(e,t,n){var r=n(3334);e.exports=function(e,t){"use strict";if((e=r(e))===(t=r(t)))return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),o=0;o<n.length;++o)n[o]=o;for(o=0;o<e.length;++o){for(var i=o+1,a=0;a<t.length;++a){var u=i,c=u+1;(i=n[a]+(e.charAt(o)===t.charAt(a)?0:1))>c&&(i=c),i>(c=n[a+1]+1)&&(i=c),n[a]=u}n[a]=i}return i}},3607:function(e,t,n){var r=n(3342);function o(e,t){var n,r,o=e.toLowerCase();for(t=[].concat(t),n=0;n<t.length;n+=1)if(r=t[n]){if(r.test&&r.test(e))return!0;if(r.toLowerCase()===o)return!0}}e.exports=function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:!!o(e=r(e),t||["true","1"])||!o(e,n||["false","0"])&&void 0}},3608:function(e,t){e.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},3609:function(e,t,n){var r=n(3334);e.exports=function(e,t){e=r(e);var n,o=(t=t||{}).width||75,i=t.seperator||"\n",a=t.cut||!1,u=t.preserveSpaces||!1,c=t.trailingSpaces||!1;if(o<=0)return e;if(a){var l=0;for(n="";l<e.length;)l%o==0&&l>0&&(n+=i),n+=e.charAt(l),l++;if(c)for(;l%o>0;)n+=" ",l++;return n}var s=e.split(" "),f=0;for(n="";s.length>0;){if(1+s[0].length+f>o&&f>0){if(u)n+=" ",f++;else if(c)for(;f<o;)n+=" ",f++;n+=i,f=0}f>0&&(n+=" ",f++),n+=s[0],f+=s[0].length,s.shift()}if(c)for(;f<o;)n+=" ",f++;return n}},3610:function(e,t,n){var r=n(3334);e.exports=function(e,t){return 0===(e=r(e)).length||"function"!=typeof t?e:e.replace(/./g,t)}},3621:function(e,t,n){var r=n(1479).getInterest,o=n(47).INTEREST_CODE;e.exports=function(){return r().interests[o.open_ocr]}},3629:function(e,t){e.exports=function(){var e=window.appData||{},t=e.isYuque,n=e.organization,r=e.group,o=void 0===r?{}:r,i=n&&n.id;return!!t&&(!("Group"!==(null==o?void 0:o.type)||i)||!(!n||n.isPremium))}},3630:function(e,t,n){var r=n(695).isPaidCheckAll;e.exports=function(){return!(window.appData||{}).isYuque||!!r()}},3631:function(e,t,n){"use strict";var r=n(695).isPaidCheckAll;t.a=function(){if(!(window.appData||{}).isYuque)return!0;var e=window.appData,t=e.organization,n=e.group,o=void 0===n?{}:n;return!(!t||!r())||!t&&"Group"===(null==o?void 0:o.type)}},3633:function(e,t,n){"use strict";n.d(t,"a",(function(){return $t}));n(825);var r=n(245),o=n(0),i=n.n(o),a=n(4),u=n.n(a),c=(n(43),n(10)),l=(n(270),n(135)),s=n(6),f=n.n(s),p=n(1032),d=n.n(p),h=n(908),m=n(1260),y=n.n(m),v=n(59),b=n(432),g=n(3643),w=n(437),_=n(344),E=n.n(_),O=n(3424),S=n(3344),x=n(815),j="note-status-module_dev_g73YZ",T="note-status-module_text_ZLRRs",C=function(e){var t=e.item,n=e.orderBy,r=t.published_at,o=t.content.updated_at,a=n===O.ORDER_BY.content_updated_at,u=a?o:r,c=new Date(o).getFullYear()!==(new Date).getFullYear();return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:T},a?__("更新于"):__("创建于")," ",x.default.format(u,{onlyDate:c,disableYear:!1})),function(e){if(!S.isDev)return null;var t=null===o;return i.a.createElement("span",{className:j},e.id," ",t?"mirror":""," ",E()(e.content_updated_at).format("YYYY-MM-DD HH:mm:ss"))}(t))},k=n(3390),L=(n(73),n(32)),P=n(1355),A=n(281),R=(n(170),n(70)),N=n(1030),I=n.n(N),D=n(1497),M=n(1364),F=n(1510),U="TagList-module_list_g-vtQ",B="TagList-module_item_bUgF8",G="TagList-module_active_EPfJt",Y="TagList-module_delete_NtLM0",q="TagList-module_wrapper_wAu1a",z="TagList-module_hideMore_2Kx5n",V="TagList-module_expand_J-EtW",W="TagList-module_expandForMini_G9K8m",H="TagList-module_line_pgNjs",K="TagList-module_addTag_P9XTi",X="TagList-module_rightSide_65+zS",Z="TagList-module_noTag_XGuDy",$="TagList-module_canSelect_XVnT1",J="TagList-module_name_-HZCJ",Q="TagList-module_highLight_Fx+g3",ee="TagList-module_count_JG6aO",te="TagList-module_listForMini_n1Fjy",ne="TagList-module_expandBtn_kA52P",re="TagList-module_expanded_tVFvP",oe="TagList-module_icon_zLTbc";function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.data,n=e.onDelete,r=e.renderFirstItem,a=e.showCount,u=e.hideMore,c=e.storageKey,l=e.localStorage,s=e.currentTagId,p=e.onSelect,d=e.renderRightSide,h=e.query,m=e.isFilter,y=e.expandForMini,v=t||[];h&&(v=v.filter((function(e){return null==e?void 0:e.name.includes(h)})));var b=!1;c&&l&&l.get(c)&&(b=!0);var g=ue(Object(o.useState)(b),2),w=g[0],_=g[1],E=ue(Object(o.useState)(!1),2),S=E[0],x=E[1],j=Object(o.useRef)(null),T=function(){if(u&&j&&j.current){var e=j.current.children;if(!e||e.length<=2)x(!1);else{var t=e[1],n=e[e.length-1],r=t.getBoundingClientRect().top!==n.getBoundingClientRect().top;x(r)}}};function C(e){if(!h)return i.a.createElement("span",{className:J},e);var t=e.indexOf(h);return t<0?i.a.createElement("span",{className:J},e):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:J},e.slice(0,t)),i.a.createElement("span",{className:f()(J,Q)},h),i.a.createElement("span",{className:J},e.slice(t+h.length)))}return Object(o.useEffect)((function(){T()}),[t,h]),Object(o.useEffect)((function(){l&&c&&(w?l.set(c,"true"):l.remove(c))}),[w]),Object(o.useEffect)((function(){var e=I()(T,200);return u&&window.addEventListener("resize",e,!1),function(){window.removeEventListener("resize",e,!1)}}),[]),i.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:f()(q,ae(ae(ae({},V,w),z,u),W,y),"note-tag-list")},i.a.createElement("div",{className:f()(U,"tag-list",ae({},te,y)),ref:j},r&&i.a.createElement("div",{className:K},r()),d||S?i.a.createElement("div",{className:X},S&&i.a.createElement("div",{className:f()(ne,"tag-list-expand",ae({},re,w)),onClick:function(e){e.stopPropagation(),_(!w)}},i.a.createElement(D.default,{className:oe})),!h&&d&&d()):null,v.map((function(e){var t=null==e?void 0:e.name;if(!t)return null;var r=t.length>20,o=r?"".concat(t.slice(0,20),"..."):t,u=s===e.id;return i.a.createElement(R.a,{title:r?t:null},i.a.createElement("div",{"data-testid":"note-tag-list-item",className:f()(B,ae(ae({},G,u),$,!!p)),key:null==e?void 0:e.name,onClick:function(){p&&p(e.id)}},C(o),function(e){return a&&void 0!==e.count?i.a.createElement("span",{className:ee},"(",e.count,")"):null}(e),n&&i.a.createElement("span",{"data-testid":"note-tag-list-delete",className:Y,onClick:function(){return n(e)}},i.a.createElement(M.default,null))))})),v.length>0&&!h&&m&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:H}),i.a.createElement("div",{"data-testid":"note-tag-list-item",className:f()(B,Z,ae(ae({},G,s===O.FILTER_TAGS.noTag),$,!!p)),onClick:function(){p&&p(O.FILTER_TAGS.noTag)}},i.a.createElement(F.default,{width:16,height:16}),C(__("无标签"))))))},se={toolBarBtn:"index-module_toolBarBtn_kG8Cd",wrapper:"index-module_wrapper_8ethE",noteItem:"index-module_noteItem_dVp5J",note:"index-module_note_geZ56",viewBlank:"index-module_viewBlank_ecM7l",tagPinned:"index-module_tagPinned_--NI2",descMoreIcon:"index-module_descMoreIcon_wlBa3",tab:"index-module_tab_zkK5m",arrowUp:"index-module_arrowUp_lRGKc",arrowDown:"index-module_arrowDown_3-EN3",tabNote:"index-module_tabNote_8V7gj",hidden:"index-module_hidden_M8z9j",tagPinnedContainer:"index-module_tagPinnedContainer_hB8jT",selected:"index-module_selected_aA0w-",rightToolBar:"index-module_rightToolBar_e1gvN",noteItemExpand:"index-module_noteItemExpand_PjrCj",leftToolBar:"index-module_leftToolBar_JMyy5",content:"index-module_content_Yf3Cm",loading:"index-module_loading_uVMCS",mask:"index-module_mask_-nOYf",reading:"index-module_reading_dfUvx",isTemplate:"index-module_isTemplate_7o8Q-",viewMore:"index-module_viewMore_gsQbm",searchMode:"index-module_searchMode_jG3fm",meta:"index-module_meta_B+ClL",radio:"index-module_radio_2HGaM",contentExpanded:"index-module_contentExpanded_lWgEI",editing:"index-module_editing_nW8gJ",hasTag:"index-module_hasTag_wtzsZ",viewMoreShow:"index-module_viewMoreShow_pN6H7",images:"index-module_images_fAoGp",date:"index-module_date_095hy",imagesContent:"index-module_imagesContent_t0q35",item:"index-module_item_2FEiU",bookmark:"index-module_bookmark_-+dy+",title:"index-module_title_6RJyp",desc:"index-module_desc_WTwbK",belong:"index-module_belong_Csy5b",text:"index-module_text_bro5m",left:"index-module_left_s-MXM",right:"index-module_right_RJVuX",attachment:"index-module_attachment_H4LKm",file:"index-module_file_e9W5F",name:"index-module_name_fKT1c",size:"index-module_size_xQNXJ",empty:"index-module_empty_cBT2k",loadMoreBtn:"index-module_loadMoreBtn_t6j9W",theEndTips:"index-module_theEndTips_tq+NY",blank:"index-module_blank_2HJdh",desktop:"index-module_desktop_oahLD",toolbarStyle:"index-module_toolbarStyle_cNHWw",batchProcess:"index-module_batchProcess_BqhA4",checkBox:"index-module_checkBox_mz+g+",rightToolBarCollapse:"index-module_rightToolBarCollapse_cPTfb",rightToolBarSave:"index-module_rightToolBarSave_vhDcz",tagContainer:"index-module_tagContainer_nVqVt"};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(null,arguments)}function de(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){he=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==fe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(fe(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function me(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ye(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ye(i,r,o,a,u,"next",e)}function u(e){ye(i,r,o,a,u,"throw",e)}a(void 0)}))}}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _e=Object(A.b)((function(){return Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1353)]).then(n.bind(null,7990))}),{suspense:!0}),Ee=S.myNotesConsts.COLLAPSE_BTN_CLASS,Oe=function(e){var t=e.note,n=e.noteTags,r=e.enableDynamicTaskList,a=e.onLoadNote,u=e.onCollapseNote,c=e.renderEditor,l=e.onChangeNote,s=e.onUpdateContentUpdatedAt,p=t.id,d=t.content,h=d.updated_at,m=d.abstract,y=d.source,b=d.doc_dynamic_data,g=t.tags,_=void 0===g?[]:g,E=t.content_show_at,O=t.expanded_at,x=t.changed_at,j=t.save_from,T=be(Object(o.useState)(!y),2),C=T[0],A=T[1],R=be(Object(o.useState)(!!y),2),N=R[0],I=R[1],D=be(Object(o.useState)(!y),2),M=D[0],F=D[1],U=be(Object(o.useState)(!!y),2),B=U[0],G=U[1],Y=Object(o.useRef)(null),q=Object(o.useRef)(null),z=Object(o.useRef)(null);Object(o.useEffect)((function(){E&&(A(!1),I(!0),F(!1),G(!0))}),[E]);var V=t.editing,W=t.loading,H=null===h;if(!S.isDev&&H)return null;var K="item-".concat(t.id,"-").concat(h),X={};S.isDesktopApp&&(X.downloadFileHandler=S.downloadFileHandler);var Z=_&&_.map((function(e){var t=n&&n.find((function(t){return t.id===e.id}));return t||null})).filter((function(e){return!!e})),$=function(){var e=ve(he().mark((function e(t){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=setInterval((function(){var r=t.querySelectorAll('ne-card[data-card-name="image"] img');if(0===r.length)return clearInterval(n),e();var o,i=[],a=me(r);try{for(a.s();!(o=a.n()).done;){var u=o.value;u.complete||i.push(u)}}catch(e){a.e(e)}finally{a.f()}0===i.length&&(clearInterval(n),setTimeout((function(){e()}),100))}),10);setTimeout((function(){clearInterval(n),e()}),800)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=ve(he().mark((function e(t){var n;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(G(!0),I(!1),q){e.next=5;break}return e.abrupt("return");case 5:return n=q.current,e.next=8,$(n);case 8:A(!1),F(!1),I(!0),e.next=16;break;case 13:F(!0),A(!1),setTimeout(ve(he().mark((function e(){var t,n;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Y.current){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,$(t);case 5:A(!0),G(!0),I(!1),null==(n=document.getElementById("doclet-viewmore-".concat(p)))||n.scrollIntoView(!1);case 10:case"end":return e.stop()}}),e)}))),30);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=!V&&Z&&!!Z.length,ee=j&&[w.SAVE_FROM_TYPE.TEMPLATE_NOTE,w.SAVE_FROM_TYPE.TEMPLATE_TODO].includes(j);if(t.editing)return i.a.createElement("div",{className:f()(se.content,de({},se.contentExpanded,O),se.editing)},c(t));function te(){null==l||l(t),null==s||s(t.id)}return i.a.createElement(L.a,{className:f()(se.content,"note-item-normal",de(de(de(de({},se.contentExpanded,!!ee||O),se.reading,!V),se.hasTag,Q),se.isTemplate,ee))},i.a.createElement("div",null,M&&i.a.createElement("div",{style:{display:C?"relative":"absolute",zIndex:C?3:-1,left:0,top:0,overflow:N?"hidden":"none"},ref:Y},i.a.createElement(_e,pe({docId:p,key:"".concat(K,"-description-").concat(t.updated_at),content:m,onDynamicDataChange:te,enableDynamicTaskList:r,dynamicData:b},X))),B&&i.a.createElement("div",{style:{position:N?"relative":"absolute",zIndex:N?3:-1,left:0,top:0,overflow:N?"hidden":"none"},ref:q},i.a.createElement(_e,pe({docId:p,key:"".concat(K,"-doclet-").concat(p,"-").concat(h),content:y,onDynamicDataChange:te,enableDynamicTaskList:r,dynamicData:b},X)))),Q&&i.a.createElement(le,{data:Z}),i.a.createElement("div",{className:f()(se.viewBlank,"view-blank"),onClick:function(e){var t=e.currentTarget;t&&"pointer"===t.style.cursor&&t.nextSibling&&t.nextSibling.click()}}),i.a.createElement("div",{ref:z,key:"doclet-viewmore-".concat(p),id:"doclet-viewmore-".concat(p),className:f()(se.viewMore,de(de({},se.viewMoreShow,O),se.expanded,O),"view-more"),onClick:function(){var e=ve(he().mark((function e(n){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),!O){e.next=14;break}if(!x){e.next=10;break}return e.next=5,a(t);case 5:return u(t),e.next=8,J(!1);case 8:e.next=12;break;case 10:u(t),J(!1);case 12:e.next=19;break;case 14:return e.next=16,a(t);case 16:return e.next=18,J(!0);case 18:setTimeout((function(){Object(k.checkCollapseBtnShow)()}),100);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(null==m?void 0:m.includes(w.VIEW_MORE_TAG))&&(O?i.a.createElement("span",{className:f()(Ee,se.descMoreIcon)},i.a.createElement(v.b,{name:"arrow-up",size:14,className:se.descMoreIcon}),__("收起")):i.a.createElement("span",{className:f()(Ee,se.descMoreIcon)},i.a.createElement(v.b,{name:"arrow-down",size:14,className:se.descMoreIcon}),__("展开")))),W&&i.a.createElement("div",{className:se.loading},i.a.createElement(P.default,null)))};function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ce=S.myNotesConsts.NOTE_LIST_ITEM_CLASS,ke=S.myNotesConsts.NOTE_LIST_READ_TAG_ADD_CLASS,Le=function(e){var t=e.state,n=t.hasMore,r=t.listData,a=t.pinnedListData,u=t.listLoading,c=t.searchValue,l=t.orderBy,s=t.filterTab,p=t.currentTagId,h=t.noteTags,m=t.noteStatus,_=t.showPinned,E=e.getNotes,O=e.onSelectNote,x=e.onLoadNote,j=e.setLoadRef,T=e.renderToolBar,L=e.isAlipayWebApp,P=s===w.FILTER_TYPES.all,A=Object(b.a)().isDarkMode;function R(){if(!p||c)return null;var e=h.find((function(e){var t;return(null===(t=e.tag_meta)||void 0===t?void 0:t.id)===p}));if(!e||!e.count)return null;var t=r&&r.length;a&&a.length>0&&(t+=a.length);var n=e.count-t;return!n||n<0?null:__("{num} 篇小记不包含{text}",{num:n,text:Object(S.getFilterBarConfig)()[s]})}Object(o.useEffect)((function(){if(P){var e=document.querySelector("#mynote-container .note-list");if(e){var t=e.querySelectorAll(".yuque-doc-content");setTimeout((function(){var e,n=je(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;c?(r.searchPad||(r.searchPad=new g.a({target:r,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),r.searchPad.find(c.trim())):r.searchPad&&r.searchPad.clear()}}catch(e){n.e(e)}finally{n.f()}}),100),Object(k.handleListScroll)()}}}),[r]),Object(o.useEffect)((function(){var e=y.a.parse(window.location.search).scroll_to;setTimeout((function(){Object(k.scrollToElem)({id:e})}),200)}),[]);var N=function(t){var n="item-".concat(t.id,"-").concat(t.content_updated_at),r={note:t,filterTab:s,noteTags:h,isAlipayWebApp:L,orderBy:l,onSelectNote:O,renderToolBar:T,enableDynamicTaskList:e.enableDynamicTaskList,onLoadNote:x};return i.a.createElement("div",{id:"note-".concat(t.id),key:n,className:f()(se.note,Ce),onDoubleClick:function(e){var n;null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest(".share-note-button")||O(t)}},i.a.createElement("div",{className:f()(se.noteItem,"note-item")},t.pinned_at&&i.a.createElement("div",{className:se.tagPinnedContainer},i.a.createElement(v.b,{name:"IconTop",size:14,className:se.tagPinned})),i.a.createElement("div",{className:se.meta},i.a.createElement(C,{item:t,orderBy:l}),T(t)),i.a.createElement(Oe,r),i.a.createElement("div",{className:f()(se.tagContainer,ke)})))};return d()(null==a?void 0:a.concat(r))?i.a.createElement("div",{"data-testid":"note-list-empty",className:f()(se.wrapper,se.empty,xe({},se.desktop,S.isDesktopApp),"note-list-empty")},function(){if(u)return null;if(c)return i.a.createElement("div",{className:se.blank},__("未能找到相关{type}",{type:__("小记")}));var e=R(),t=__("灵光乍现，小记一下");return m===w.STATUS.archived&&(t=__("不再使用的小记可归档于此")),i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:A?"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HSmhT7fKgwMAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HshzTKOlvckAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("p",null,e||t))}()):i.a.createElement("div",{className:f()(se.wrapper,xe(xe(xe({},se.desktop,S.isDesktopApp),se.win,S.isWin),se.searchMode,c),"note-list"),"data-testid":"note-list"},i.a.createElement("div",{className:f()(xe({},se.hidden,!_))},function(e){if(w.NEED_PINNED_TYPE.includes(s))return e.map(N)}(a)),w.NEED_PINNED_TYPE.includes(s)&&_&&a.length>0&&r.length>0&&i.a.createElement("span",{className:f()(se.tab,se.tabNote)},__("小记")),r.sort((function(e,t){return new Date(t[l]).getTime()-new Date(e[l]).getTime()})).map(N),function(){if(n)return i.a.createElement("div",{className:se.loadMoreBtn,onClick:E,ref:function(e){return j(e)}},__("点击加载更多"));var e=R();return e?i.a.createElement("div",{className:se.theEndTips},e):r&&r.length>9?i.a.createElement("div",{className:se.theEndTips},__("我是有底线的")):void 0}())};Le.propTypes={isAlipayWebApp:u.a.bool,setLoadRef:u.a.func,state:u.a.object,getNotes:u.a.func,onLoadNote:u.a.func,onSelectNote:u.a.func,onInsertToLakeEditor:u.a.func,renderToolBar:u.a.func,renderResourceIcon:u.a.func,enableDynamicTaskList:u.a.bool,setToDocList:u.a.func,setBatchProcess:u.a.func};var Pe=Le,Ae=(n(52),n(12)),Re=n(1496),Ne={wrapper:"search-module_wrapper_S445p",searchBar:"search-module_searchBar_x3Krl",active:"search-module_active_eYHT+",isLiteMode:"search-module_isLiteMode_C4hZN",searchMini:"search-module_searchMini_V+K7h",searchMiniShow:"search-module_searchMiniShow_xFcgm"};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ue=function(e){var t,n=e.activeMode,r=e.isDesktopApp,a=e.searchValue,u=e.searchActive,c=e.setSearchActive,l=e.isLiteMode,s=e.onSearchNote,p=e.onSearchReset,d=Me(Object(o.useState)(null),2),h=d[0],m=d[1],y=Object(o.useRef)(null);Object(o.useEffect)((function(){a||(m(null),c(!1))}),[a]);var v={ref:y,value:h,prefix:i.a.createElement(Re.default,null),placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,onSearch:s,onBlur:function(e){e.target.value||(c(!1),p())},onChange:function(e){var t=e.target.value;m(t)},onClear:function(){m(null)}};return"dark"!==(null===(t=window.yuqueThemeManager)||void 0===t?void 0:t.current)&&(v.style={borderColor:"#e8e8e8"}),i.a.createElement("div",{"data-testid":"note-search",className:f()(Ne.wrapper,"note-search")},i.a.createElement("div",{className:f()(Ne.searchBar,De(De({},Ne.active,n||u),Ne.isLiteMode,l))},i.a.createElement(Ae.a.Search,v)),!n&&i.a.createElement("div",{className:f()(Ne.searchMini,De(De({},Ne.searchMiniShow,!u),Ne.desktop,r)),onClick:function(){c(!0),y&&y.current&&y.current.focus()}},i.a.createElement(Re.default,{width:16,height:16,style:{color:"#262626"}})))};Ue.defaultProps={activeMode:!1,isDesktopApp:!1},Ue.propTypes={searchValue:u.a.string,searchActive:u.a.bool,isDesktopApp:u.a.bool,onSearchNote:u.a.func,onSearchReset:u.a.func,setSearchActive:u.a.func,activeMode:u.a.bool};var Be=Ue,Ge=n(1511),Ye="sidebar-toolbar-module_wrapper_oE4lW",qe="sidebar-toolbar-module_insertBtn_RY-1c",ze=f()(Ye,"note-list-toolbar"),Ve=function(e){var t=e.item,n=e.onInsertToLakeEditor;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:ze,"data-testid":"note-list-toolbar"},i.a.createElement("span",{className:qe,onClick:function(){return n(t)}},i.a.createElement(Ge.default,{width:14,height:14}),__("插入文档"))))};Ve.defaultProps={onInsertToLakeEditor:function(){}},Ve.propTypes={item:u.a.object,onInsertToLakeEditor:u.a.func};var We=Ve,He=n(3389);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Xe(){Xe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ke(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ke(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ze(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e){var t,n=e.getNotes,r=e.listData,i=e.isDesktopApp,a=$e(Object(o.useState)(null),2),u=a[0],l=a[1];function s(){var e;return e=Xe().mark((function e(t){return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[0].isIntersecting&&n({noLoading:!0});case 1:case"end":return e.stop()}}),e)})),s=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ze(i,r,o,a,u,"next",e)}function u(e){Ze(i,r,o,a,u,"throw",e)}a(void 0)}))},s.apply(this,arguments)}return i&&c.a.config({top:80,duration:1.5}),Object(o.useEffect)((function(){var e=document.querySelector("#siteTipGuide");return e&&(e.style.display="none"),i&&c.a.config({top:80,duration:1.5}),function(){var e=document.querySelector("#siteTipGuide");e&&(e.style.display="block")}}),[]),window.IntersectionObserver&&(t=new IntersectionObserver((function(e){return s.apply(this,arguments)}),{threshold:.1})),Object(o.useEffect)((function(){if(u&&t)return t.observe(u),function(){t.unobserve(u)}}),[u,r]),{setLoadRef:l}},et=n(141),tt=n(3466);function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(){rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==nt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(nt(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ot(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function at(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){it(i,r,o,a,u,"next",e)}function u(e){it(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(e){if("string"==typeof e)return pt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var dt=S.myNotesConsts.NOTE_ORDER_KEY,ht={status:w.STATUS.unarchived,filterTab:tt.a.all,orderBy:tt.b.content_updated_at,currentTagId:null,search:""},mt=function(e){var t=e.currentUuid,n=e.refreshBatchProcess,r=st(Object(o.useState)([]),2),i=r[0],a=r[1],u=st(Object(o.useState)([]),2),l=u[0],s=u[1],f=st(Object(o.useState)(!1),2),p=f[0],d=f[1],h=st(Object(o.useState)(!0),2),m=h[0],y=h[1],v=st(Object(o.useState)([]),2),b=v[0],g=v[1],_=st(Object(o.useState)(ct(ct({},ht),{},{orderBy:et.a.get(dt)||tt.b.content_updated_at})),2),E=_[0],O=_[1],S=Object(o.useCallback)((function(e){s([]),a([]),O(ct(ct({},E),e))}),[E]),x=Object(o.useCallback)((function(e){return l.find((function(t){return t.id===e}))?[l,s]:[i,a]}),[i,l]),j=Object(o.useCallback)(at(rt().mark((function e(){var t,n,r,o,u,c,l=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=l.length>0&&void 0!==l[0]?l[0]:{}).noLoading||d(!0),n={offset:i.length,q:E.search,filter_type:E.filterTab,status:E.status,merge_dynamic_data:0,order:E.orderBy,with_pinned_notes:!0},E.currentTagId&&(n.tag=E.currentTagId),w.NEED_PINNED_TYPE.includes(E.filterTab)||delete n.with_pinned_notes,t.fromQuery&&(n.offset=0),n.q&&(n.order=tt.b.first_published_at),w.DEFAULT_TYPE.includes(n.filter_type)||(n.include_body=!0,n.order=tt.b.first_published_at),e.prev=8,e.next=11,He.a.NoteCtlImpl.index(n,{useOriginResp:!0});case 11:r=e.sent,o=r.has_more,u=r.notes,c=r.pin_notes,y(o),0===n.offset?w.NEED_PINNED_TYPE.includes(E.filterTab)?(s(c),a(u)):a(u):a([].concat(ot(i),ot(u)));case 17:return e.prev=17,d(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[8,,17,20]])}))),[E,i]),T=Object(o.useCallback)(at(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.a.NoteTagCtlImpl.count({status:E.status,filter_type:E.filterTab});case 2:t=e.sent,(n=t.data)&&(g(n),E.currentTagId&&!n.some((function(e){return e.id===E.currentTagId}))&&E.currentTagId!==w.FILTER_TAGS.noTag&&S({currentTagId:null}));case 5:case"end":return e.stop()}}),e)}))),[E]);var C=Object(o.useCallback)((function(e){return He.a.NoteOperateCtlImpl.batchDelete({ids:e,latest_update_user_uuid:t}).then((function(){null==n||n();var t=i.slice().filter((function(t){return!e.includes(t.id)}));a(t);var r=l.slice().filter((function(t){return!e.includes(t.id)}));s(r),!t.length&&m&&j(),T(),c.a.success(__("小记已移至回收站"))})).catch((function(){c.a.error(__("删除失败"))}))}),[x,t]),k=function(){var e=at(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.a.NoteOperateCtlImpl.batchPin({ids:[t.id]});case 2:t.pinned_at=new Date,n=i.filter((function(e){return e.id!==t.id})),l.unshift(t),a(n),s(l),c.a.success(__("小记置顶成功"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=at(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.a.NoteOperateCtlImpl.batchUnPin({ids:[t.id]});case 2:t.pinned_at=null,n=l.filter((function(e){return e.id!==t.id})),i.unshift(t),a(i),s(n),c.a.success(__("取消置顶成功"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){j(),T()}),[E]),{state:{listData:i,listLoading:p,hasMore:m,noteTags:b,noteFilterParams:E,pinnedListData:l},setListData:a,getNotes:j,getNoteTags:T,onChangeFilterParams:S,onReset:function(){s([]),O(ht)},onRemoveNote:function(e){var t=e.id;C([t])},setPinnedListData:s,getListData:x,pinnedNote:k,deletePinnedNote:L,onRemoveNotes:C}};function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(){var e=wt(Object(o.useState)(!1),2),t=e[0],n=e[1],r=wt(Object(o.useState)(!0),2),i=r[0],a=r[1],u=mt({}),l=u.state,s=l.listData,f=l.listLoading,p=l.hasMore,d=l.noteTags,h=l.noteFilterParams,m=l.pinnedListData,y=u.getListData,v=u.getNotes,b=u.getNoteTags,g=u.onChangeFilterParams,w=u.onReset,_=u.onRemoveNote,E=u.onRemoveNotes,O=Qe({listData:s,getNotes:v,isDesktopApp:S.isDesktopApp}).setLoadRef,x=Object(o.useCallback)((function(){h.search&&w()}),[h]),j=Object(o.useCallback)((function(e){e!==h.currentTagId?g({currentTagId:e}):g({currentTagId:null})}),[h]);return{state:{listData:s,pinnedListData:m,listLoading:f,orderBy:h.orderBy,hasMore:p,searchValue:h.search,searchActive:t,filterTab:h.filterTab,noteTags:d,currentTagId:h.currentTagId,noteStatus:h.status,toDocList:[],showPinned:i},getNotes:v,onLoadNote:function(e){var t=e.id,n=wt(y(t),2),r=n[0],o=n[1],i=r.slice(),a=i.findIndex((function(e){return e.id===t}));return i[a].loading=!0,o(i),He.a.NoteCtlImpl.show({id:t,merge_dynamic_data:0}).then((function(e){var t=r.slice();t[a]=bt(bt({},e),{},{expanded_at:new Date}),o(t)})).catch((function(){var e=r.slice();i[a].loading=!1,o(e),c.a.error(__("获取内容失败，请再试一次"))}))},onCollapseNote:function(e){var t=e.id,n=wt(y(t),2),r=n[0],o=n[1],i=r.slice(),a=i.findIndex((function(e){return e.id===t}));delete i[a].expanded_at,delete i[a].changed_at,delete i[a].loading,o(i)},onRemoveNote:_,onRemoveNotes:E,onSearchNote:function(e){g({search:e})},onSearchReset:x,setSearchActive:n,getNoteTags:b,onSelectTag:j,onChangeFilterParams:g,onReset:w,setLoadRef:O,setShowPinned:a}},Ot="index-module_wrapper_kkqhF",St="index-module_tagContainer_TFFU4",xt="index-module_show_oAR0z",jt="index-module_tagContainerExpand_7mxch",Tt="index-module_tagTipBar_g7usD",Ct="index-module_icon_nCjEV",kt="index-module_notesList_xu6a8",Lt="index-module_liteWrapper_fYo2B";function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},At.apply(null,arguments)}function Rt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dt=function(e){var t=Et(e),n=e.storage,r=Nt(Object(o.useState)(!1),2),a=r[0],u=r[1],c=t.state,s=c.listLoading,p=c.noteTags,m=c.currentTagId,y=t.onSelectTag,v=t.setSearchActive,b=t.onSearchReset,g=t.onSearchNote;Object(o.useEffect)((function(){Object(k.fixListContainerHeight)()}),[a]);var w=!d()(p);return i.a.createElement("div",{"data-testid":"mynote-list-container",id:"mynote-container",className:Ot},i.a.createElement(Be,{searchValue:t.state.searchValue,searchActive:t.state.searchActive,setSearchActive:v,onSearchReset:b,onSearchNote:g,activeMode:!0,isDesktopApp:S.isDesktopApp,isLiteMode:!0}),i.a.createElement("div",{className:f()(St,Rt(Rt({},jt,a),xt,w),"note-tag-container")},i.a.createElement("div",{onClick:function(){return u(!a)},className:Tt},i.a.createElement("span",null,a?__("收起所有标签"):__("展开所有标签")),i.a.createElement(h.default,{className:Ct,width:16})),i.a.createElement("div",{className:Lt},i.a.createElement(le,{hideMore:!1,showCount:!0,currentTagId:m,onSelect:y,localStorage:n,storageKey:"NOTE_LIST_TAG_MANAGER",data:p}))),i.a.createElement(l.a,{spinning:s},i.a.createElement("div",{className:f()(kt,"note-list-container")},i.a.createElement(Pe,At({},t,{isMobile:!0,isLiteMode:!0,renderToolBar:function(n){return i.a.createElement(We,{item:n,showFeather:!t.state.searchValue,onInsertToLakeEditor:e.onInsertToLakeEditor})}})))))};Dt.fetchData=function(e){return He.a.NoteCtlImpl.show({id:e.id})},Dt.defaultProps={onInsertToLakeEditor:function(){}},Dt.propTypes={webProxy:a.PropTypes.object,storage:a.PropTypes.object,onInsertToLakeEditor:a.PropTypes.func};var Mt=Dt;function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zt(r.key),r)}}function Bt(e,t,n){return t=Yt(t),function(e,t){if(t&&("object"==Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gt()?Reflect.construct(t,n||[],Yt(e).constructor):t.apply(e,n))}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gt=function(){return!!e})()}function Yt(e){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yt(e)}function qt(e,t){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qt(e,t)}function zt(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ft(t)?t:t+""}var Vt=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return e=Bt(this,t,[].concat(a)),n=e,o=function(t){Mt.fetchData(t).then((function(t){e.props.onInsertDocument("text/lake",t.content.source)})).catch((function(){c.a.error(__("小记插入失败"))}))},(r=zt(r="onInsertToLakeEditor"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.storage;return i.a.createElement("div",{className:"material-library-note"},i.a.createElement(Mt,{storage:e,onInsertToLakeEditor:this.onInsertToLakeEditor}))}}])&&Ut(n.prototype,r),o&&Ut(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(o.Component);function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(null,arguments)}Vt.propTypes={storage:u.a.object,onInsertDocument:u.a.func};var Ht=r.a.TabPane,Kt="storage/sidebar-tab-key",Xt={note:"note"},Zt=function(e){var t=e.storage;return{tabKey:t.get(Kt)||Xt.note,onTabChange:function(e){t.set(Kt,e)}}};function $t(e){var t=Zt(e),n=e.storage;return i.a.createElement("div",{className:"material-library-view"},i.a.createElement(r.a,{defaultActiveKey:t.tabKey,onChange:t.onTabChange},i.a.createElement(Ht,{tab:__("插入小记"),key:Xt.note},i.a.createElement(Vt,Wt({},e.note,{storage:n})))))}$t.propTypes={storage:u.a.object,webProxy:u.a.object,note:u.a.object}},3634:function(e,t,n){"use strict";var r=n(3459);t.a=r.a},3638:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return f}));var r=n(141),o="new_session",i="register",a="register/source",u=["attachments","dashboard","feedbacks","assets","office","video","oauth2","notifications"];function c(){var e=new URLSearchParams(window.location.search),t=e.get("source");if(t)return t;var n=e.get("goto");if(null!=n&&n.length){var o=null==n?void 0:n.match(/(^|&|\?)source=([^&]*)(&|$)/);if(null!=o&&o[2])return null==o?void 0:o[2]}var i=r.a.get(a);if(i)return i;var u,c=(window.Tracert||{})._refSpm,l=(u=c)&&u.split(".")[1];return l||null}function l(e){var t,n=e||(null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content"));n&&([o,i].includes(n)||r.a.set(a,n))}function s(e){"complete"===document.readyState?l(e):window.addEventListener("load",(function(){l(e)}))}function f(){var e,t=c();if(t)return s(t);if(null===(e=window.appData)||void 0===e||null===(e=e.organization)||void 0===e?void 0:e.id)return s("org");var n=new URLSearchParams(window.location.search).get("goto");if(n){n.startsWith("/")&&(n=window.location.origin+n);var r=new URL(n).pathname;if(r){var o=r.split("/");if(o.length>1&&""===o[0]&&o.shift(),null==o||!o.length)return;if(["g","r"].includes(o[0]))return;if(u.includes(o[0]))return s(o[0]);if(2===o.length||3===o.length)return s("doc_read")}}}},3643:function(e,t,n){"use strict";var r=n(237),o=n.n(r),i=n(3477),a={}.toString,u=function(e,t){return a.call(e)==="[object "+t+"]"};function c(e){return null==e}function l(e,t,n){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(e){return c(n)?null:n}}function s(e,t){var n=[];if(e){if(t&&!t(e))return n;for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o],a=i.nodeType;3===a?n.push(i):1!==a&&9!==a&&11!==a||(n=n.concat(s(i,t)))}}return n}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function v(e,t,n){return t=g(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var _=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=v(this,t,[e]),!e.target)throw new Error("please set a dom element as target!");return n.options=d({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},e),n.ranges=[],n._initTarget(),n._createCanvas(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(r=[{key:"_initTarget",value:function(){var e=this.options.target;"static"===l(e,"position")&&(e.style.position="relative")}},{key:"_createCanvas",value:function(){var e=this.options.target,t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style["pointer-events"]="none",t.style["z-index"]=99,e.appendChild(t);var n=new i.TinyCanvas({container:t});this.container=t,this.canvas=n}},{key:"_resizeCanvas",value:function(){var e=this.options.target,t=this.canvas,n=function(e,t){var n=l(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e),r=function(e,t){var n=l(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e);t.resize(n,r)}},{key:"_getRelativeRect",value:function(e){var t=this.container,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"_cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(e){var t=this._cacheRange(e);e.setEnd(t.startContainer,t.startOffset+1);var n=e.getBoundingClientRect();e.setEnd(t.startContainer,t.endOffset-1),e.setStart(t.endContainer,t.endOffset);var r=e.getBoundingClientRect();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.bottom!==r.bottom}},{key:"_drawOneByOne",value:function(e,t){for(var n=this._cacheRange(e),r=this.canvas,o=n.startOffset;o<n.endOffset;){e.setStart(n.commonAncestorContainer,o),e.setEnd(n.commonAncestorContainer,o+1);var i=this._getRelativeRect(e);r.clearRect(i),r.draw("Rect",d(d({},i),t)),o++}e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}},{key:"_drawRangeBackground",value:function(e,t){var n=this.canvas;if(this._isRangeWrap(e))return this._drawOneByOne(e,t);var r=this._getRelativeRect(e);n.clearRect(r),n.draw("Rect",d(d({},r),t))}},{key:"_highlightRanges",value:function(e){var t=this;e.forEach((function(e){t._highlightRange(e)}))}},{key:"_clearRange",value:function(e){var t=this.canvas,n=this._getRelativeRect(e);t.clearRect(n)}},{key:"_highlightRange",value:function(e){var t=this.options.style.highlight;this._drawRangeBackground(e,t)}},{key:"_selectRange",value:function(e){var t=this.options.style.select;this._drawRangeBackground(e,t)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(e){var t=this.selectedRange,n=this.ranges;if(t){var r=n.indexOf(t),o=n[r+e];o||(o=e>0?n[e-1]:n[n.length+e]),this._highlightRange(t),this.select(o),this.scrollIntoView()}}},{key:"_replace",value:function(e,t){var n=e.commonAncestorContainer.parentNode,r=document.createTextNode(t);"A"===n.tagName&&n.getAttribute("href")===n.innerText&&n.setAttribute("href",t),e.deleteContents(),e.insertNode(r)}},{key:"replace",value:function(e){if(!c(e)){var t=this.selectedRange;if(this.ranges.length>0){var n={range:t};this.emit("before:replace",n),this._replace(t,e),this._clearRange(t),this.emit("after:replace",n)}}}},{key:"replaceAll",value:function(e){var t=this;if(!c(e)){var n=this.ranges,r={ranges:n};this.emit("before:replaceAll",r),n.forEach((function(n){t._replace(n,e)})),this.emit("after:replaceAll",r),n.forEach((function(e){t._saveCardValue(e)})),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(e,t){var n=[];if(this.clear(),e&&u(e,"String")&&e.length>0){t=function(e){return u(e,"Function")}(t)?t:function(){return!0},this._resizeCanvas();var r=s(this.options.target,(function(e){return"none"!==e.style.display&&t(e)}));r.length>0&&(n=function(e,t){var n=[];return e.forEach((function(e){var r=e.nodeValue,o=t.length,i=function(e,t){for(var n=[],r=t.length,o=e.indexOf(t);o>-1;)n.push(o),o=e.indexOf(t,o+r);return n}((r||"").toLowerCase(),(t||"").toLowerCase());i.forEach((function(t){var r=document.createRange();r.setStart(e,t),r.setEnd(e,t+o),n.push(r)}))})),n}(r,e),this._highlightRanges(n),this.ranges=n,this.keyword=e)}return this.ranges=n,n}},{key:"reFind",value:function(){var e=this.selectedRangeIndex,t=this.find(this.keyword);if(t.length>0&&!c(e)){var n=t[e]?t[e]:t[0];this.select(n)}return t}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var e=this.selectedRange.commonAncestorContainer.parentElement;(t=e.getBoundingClientRect()).top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||(e.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var t}},{key:"select",value:function(e){if(!c(e)){var t=this.ranges,n=e;u(e,"Number")&&(n=t[e]);var r={range:n};this.emit("before:select",r),this._selectRange(n),this.selectedRange=n,this.selectedRangeIndex=t.indexOf(n),this.emit("after:select",r)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"findIndex",value:function(e){this._move(e)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var e=this.ranges;if(0===e.length)return 0;var t=this.selectedRange;return[e.indexOf(t)+1,e.length]}},{key:"destroy",value:function(){var e=this.container;this.options=null,e.parentElement.removeChild(e)}}])&&m(n.prototype,r),o&&m(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(o.a);t.a=_},3649:function(e,t,n){"use strict";n(3212);var r=n(2735);n(3210);t.a=r.a},3651:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(63),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function c(e,t,n){return t=f(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(null,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){var e=this.options.targetType;return e?"DocGen_".concat(e).toLowerCase():"DocGen"}},{key:"isMiniSize",value:function(){return!1}},{key:"getDefaultFormat",value:function(){return o.a.FORMAT.LAKE}},{key:"getEnableFullEditor",value:function(){return!1}},{key:"setProcessOptions",value:function(e){this._processOptions=e}},{key:"buildOptions",value:function(e){var n,r,o,i,a,u=(n=t,r="buildOptions",o=this,a=s(f(1&(i=3)?n.prototype:n),r,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e]);return this._processOptions?this._processOptions(u):u}}],i=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],r&&a(n.prototype,r),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(3357).a)},3661:function(e,t,n){"use strict";var r=n(63),o=n.n(r),i={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,n){return t=t||"",n=n||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=i},3709:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){var r=n.getBoundingClientRect(),o=r.width,i=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(n.getBoundingClientRect().left+window.pageXOffset),l=u-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o&&(c=o),l<0?l=0:l>i&&(l=i);var s=c/o,f=1-l/i;return{h:t.h,s:s,v:f,a:t.a,source:"hsv"}}},3710:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r){var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(r.getBoundingClientRect().left+window.pageXOffset),l=u-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var s=void 0;if(l<0)s=359;else if(l>i)s=0;else{s=360*(-100*l/i+100)/100}if(n.h!==s)return{h:s,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var f=void 0;if(c<0)f=0;else if(c>o)f=359;else{f=360*(100*c/o)/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}},3711:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,o){var i=o.clientWidth,a=o.clientHeight,u="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,c="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=u-(o.getBoundingClientRect().left+window.pageXOffset),s=c-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var f=void 0;if(f=s<0?0:s>a?1:Math.round(100*s/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var p=void 0;if(r!==(p=l<0?0:l>i?1:Math.round(100*l/i)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null}},3735:function(e,t,n){var r,o;r=function(){"use strict";var e=function(e,t,n,r){var o={features:null,bind:function(e,t,n,r){var o=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var i=0;i<t.length;i++)t[i]&&e[o](t[i],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);i&&i.length>0&&(i=parseInt(i[1],10))>=1&&i<8&&(n.isOldIOSPhone=!0)}var a=r.match(/Android\s([0-9\.]*)/),u=a?a[1]:0;(u=parseFloat(u))>=1&&(u<4.4&&(n.isOldAndroid=!0),n.androidVersion=u),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var c,l,s=["transform","perspective","animationName"],f=["","webkit","Moz","ms","O"],p=0;p<4;p++){t=f[p];for(var d=0;d<3;d++)c=s[d],l=t+(t?c.charAt(0).toUpperCase()+c.slice(1):c),!n[c]&&l in e&&(n[c]=l);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var h=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),r=window.setTimeout((function(){e(t+n)}),n);return h=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=n,n}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,r){t=t.split(" ");for(var o,i=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},u=0;u<t.length;u++)if(o=t[u])if("object"==typeof n&&n.handleEvent){if(r){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[i]("on"+o,n["oldIE"+o])}else e[i]("on"+o,n)});var i=this,a=25,u=3,c={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(c,r);var l,s,f,p,d,h,m,y,v,b,g,w,_,E,O,S,x,j,T,C,k,L,P,A,R,N,I,D,M,F,U,B,G,Y,q,z,V,W,H,K,X,Z,$,J,Q,ee,te,ne,re,oe,ie,ae,ue,ce,le,se,fe=function(){return{x:0,y:0}},pe=fe(),de=fe(),he=fe(),me={},ye=0,ve={},be=fe(),ge=0,we=!0,_e=[],Ee={},Oe=!1,Se=function(e,t){o.extend(i,t.publicMethods),_e.push(e)},xe=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},je={},Te=function(e,t){return je[e]||(je[e]=[]),je[e].push(t)},Ce=function(e){var t=je[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(i,n)}},ke=function(){return(new Date).getTime()},Le=function(e){ce=e,i.bg.style.opacity=e*c.bgOpacity},Pe=function(e,t,n,r,o){(!Oe||o&&o!==i.currItem)&&(r/=o?o.fitRatio:i.currItem.fitRatio),e[L]=w+t+"px, "+n+"px"+_+" scale("+r+")"},Ae=function(e){re&&(e&&(b>i.currItem.fitRatio?Oe||(fn(i.currItem,!1,!0),Oe=!0):Oe&&(fn(i.currItem),Oe=!1)),Pe(re,he.x,he.y,b))},Re=function(e){e.container&&Pe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ne=function(e,t){t[L]=w+e+"px, 0px"+_},Ie=function(e,t){if(!c.loop&&t){var n=p+(be.x*ye-e)/be.x,r=Math.round(e-bt.x);(n<0&&r>0||n>=Qt()-1&&r<0)&&(e=bt.x+r*c.mainScrollEndFriction)}bt.x=e,Ne(e,d)},De=function(e,t){var n=gt[e]-ve[e];return de[e]+pe[e]+n-n*(t/g)},Me=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Fe=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ue=null,Be=function(){Ue&&(o.unbind(document,"mousemove",Be),o.addClass(e,"pswp--has_mouse"),c.mouseUsed=!0,Ce("mouseUsed")),Ue=setTimeout((function(){Ue=null}),100)},Ge=function(){o.bind(document,"keydown",i),U.transform&&o.bind(i.scrollWrap,"click",i),c.mouseUsed||o.bind(document,"mousemove",Be),o.bind(window,"resize scroll orientationchange",i),Ce("bindEvents")},Ye=function(){o.unbind(window,"resize scroll orientationchange",i),o.unbind(window,"scroll",v.scroll),o.unbind(document,"keydown",i),o.unbind(document,"mousemove",Be),U.transform&&o.unbind(i.scrollWrap,"click",i),H&&o.unbind(window,m,i),clearTimeout(B),Ce("unbindEvents")},qe=function(e,t){var n=un(i.currItem,me,e);return t&&(ne=n),n},ze=function(e){return e||(e=i.currItem),e.initialZoomLevel},Ve=function(e){return e||(e=i.currItem),e.w>0?c.maxSpreadZoom:1},We=function(e,t,n,r){return r===i.currItem.initialZoomLevel?(n[e]=i.currItem.initialPosition[e],!0):(n[e]=De(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},He=function(){if(L){var t=U.perspective&&!A;return w="translate"+(t?"3d(":"("),void(_=U.perspective?", 0px)":")")}L="left",o.addClass(e,"pswp--ie"),Ne=function(e,t){t.left=e+"px"},Re=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,o=t*e.h;n.width=r+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Ae=function(){if(re){var e=re,t=i.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,o=n*t.h;e.width=r+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},Ke=function(e){var t="";c.escKey&&27===e.keyCode?t="close":c.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,i[t]()))},Xe=function(e){e&&(Z||X||oe||V)&&(e.preventDefault(),e.stopPropagation())},Ze=function(){i.setScrollOffset(0,o.getScrollY())},$e={},Je=0,Qe=function(e){$e[e]&&($e[e].raf&&N($e[e].raf),Je--,delete $e[e])},et=function(e){$e[e]&&Qe(e),$e[e]||(Je++,$e[e]={})},tt=function(){for(var e in $e)$e.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,r,o,i,a){var u,c=ke();et(e);var l=function(){if($e[e]){if((u=ke()-c)>=r)return Qe(e),i(n),void(a&&a());i((n-t)*o(u/r)+t),$e[e].raf=R(l)}};l()},rt={shout:Ce,listen:Te,viewportSize:me,options:c,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return b},getCurrentIndex:function(){return p},isDragging:function(){return H},isZooming:function(){return ee},setScrollOffset:function(e,t){ve.x=e,F=ve.y=t,Ce("updateScrollOffset",ve)},applyZoomPan:function(e,t,n,r){he.x=t,he.y=n,b=e,Ae(r)},init:function(){if(!l&&!s){var n;i.framework=o,i.template=e,i.bg=o.getChildByClass(e,"pswp__bg"),I=e.className,l=!0,U=o.detectFeatures(),R=U.raf,N=U.caf,L=U.transform,M=U.oldIE,i.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),i.container=o.getChildByClass(i.scrollWrap,"pswp__container"),d=i.container.style,i.itemHolders=S=[{el:i.container.children[0],wrap:0,index:-1},{el:i.container.children[1],wrap:0,index:-1},{el:i.container.children[2],wrap:0,index:-1}],S[0].el.style.display=S[2].el.style.display="none",He(),v={resize:i.updateSize,orientationchange:function(){clearTimeout(B),B=setTimeout((function(){me.x!==i.scrollWrap.clientWidth&&i.updateSize()}),500)},scroll:Ze,keydown:Ke,click:Xe};var r=U.isOldIOSPhone||U.isOldAndroid||U.isMobileOpera;for(U.animationName&&U.transform&&!r||(c.showAnimationDuration=c.hideAnimationDuration=0),n=0;n<_e.length;n++)i["init"+_e[n]]();t&&(i.ui=new t(i,o)).init(),Ce("firstUpdate"),p=p||c.index||0,(isNaN(p)||p<0||p>=Qt())&&(p=0),i.currItem=Jt(p),(U.isOldIOSPhone||U.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),c.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===F&&(Ce("initialLayout"),F=D=o.getScrollY());var a="pswp--open ";for(c.mainClass&&(a+=c.mainClass+" "),c.showHideOpacity&&(a+="pswp--animate_opacity "),a+=A?"pswp--touch":"pswp--notouch",a+=U.animationName?" pswp--css_animation":"",a+=U.svg?" pswp--svg":"",o.addClass(e,a),i.updateSize(),h=-1,ge=null,n=0;n<u;n++)Ne((n+h)*be.x,S[n].el.style);M||o.bind(i.scrollWrap,y,i),Te("initialZoomInEnd",(function(){i.setContent(S[0],p-1),i.setContent(S[2],p+1),S[0].el.style.display=S[2].el.style.display="block",c.focus&&e.focus(),Ge()})),i.setContent(S[1],p),i.updateCurrItem(),Ce("afterInit"),we||(E=setInterval((function(){Je||H||ee||b!==i.currItem.initialZoomLevel||i.updateSize()}),1e3)),o.addClass(e,"pswp--visible")}},close:function(){l&&(l=!1,s=!0,Ce("close"),Ye(),en(i.currItem,null,!0,i.destroy))},destroy:function(){Ce("destroy"),Kt&&clearTimeout(Kt),e.setAttribute("aria-hidden","true"),e.className=I,E&&clearInterval(E),o.unbind(i.scrollWrap,y,i),o.unbind(window,"scroll",i),St(),tt(),je=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),he.x=e,he.y=t,Ae()},handleEvent:function(e){e=e||window.event,v[e.type]&&v[e.type](e)},goTo:function(e){var t=(e=xe(e))-p;ge=t,p=e,i.currItem=Jt(p),ye-=t,Ie(be.x*ye),tt(),oe=!1,i.updateCurrItem()},next:function(){i.goTo(p+1)},prev:function(){i.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Ce("beforeChange",0),S[1].el.children.length){var t=S[1].el.children[0];re=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=i.currItem.bounds,g=b=i.currItem.initialZoomLevel,he.x=ne.center.x,he.y=ne.center.y,e&&Ce("afterChange")},invalidateCurrItems:function(){O=!0;for(var e=0;e<u;e++)S[e].item&&(S[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==ge){var t,n=Math.abs(ge);if(!(e&&n<2)){i.currItem=Jt(p),Oe=!1,Ce("beforeChange",ge),n>=u&&(h+=ge+(ge>0?-u:u),n=u);for(var r=0;r<n;r++)ge>0?(t=S.shift(),S[u-1]=t,h++,Ne((h+2)*be.x,t.el.style),i.setContent(t,p-n+r+1+1)):(t=S.pop(),S.unshift(t),h--,Ne(h*be.x,t.el.style),i.setContent(t,p+n-r-1-1));if(re&&1===Math.abs(ge)){var o=Jt(x);o.initialZoomLevel!==b&&(un(o,me),fn(o),Re(o))}ge=0,i.updateCurrZoomItem(),x=p,Ce("afterChange")}}},updateSize:function(t){if(!we&&c.modal){var n=o.getScrollY();if(F!==n&&(e.style.top=n+"px",F=n),!t&&Ee.x===window.innerWidth&&Ee.y===window.innerHeight)return;Ee.x=window.innerWidth,Ee.y=window.innerHeight,e.style.height=Ee.y+"px"}if(me.x=i.scrollWrap.clientWidth,me.y=i.scrollWrap.clientHeight,Ze(),be.x=me.x+Math.round(me.x*c.spacing),be.y=me.y,Ie(be.x*ye),Ce("beforeResize"),void 0!==h){for(var r,a,l,s=0;s<u;s++)r=S[s],Ne((s+h)*be.x,r.el.style),l=p+s-1,c.loop&&Qt()>2&&(l=xe(l)),(a=Jt(l))&&(O||a.needsUpdate||!a.bounds)?(i.cleanSlide(a),i.setContent(r,l),1===s&&(i.currItem=a,i.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&l>=0&&i.setContent(r,l),a&&a.container&&(un(a,me),fn(a),Re(a));O=!1}g=b=i.currItem.initialZoomLevel,(ne=i.currItem.bounds)&&(he.x=ne.center.x,he.y=ne.center.y,Ae(!0)),Ce("resize")},zoomTo:function(e,t,n,r,i){t&&(g=b,gt.x=Math.abs(t.x)-he.x,gt.y=Math.abs(t.y)-he.y,Me(de,he));var a=qe(e,!1),u={};We("x",a,u,e),We("y",a,u,e);var c=b,l={x:he.x,y:he.y};Fe(u);var s=function(t){1===t?(b=e,he.x=u.x,he.y=u.y):(b=(e-c)*t+c,he.x=(u.x-l.x)*t+l.x,he.y=(u.y-l.y)*t+l.y),i&&i(t),Ae(1===t)};n?nt("customZoomTo",0,1,n,r||o.easing.sine.inOut,s):s(1)}},ot=30,it=10,at={},ut={},ct={},lt={},st={},ft=[],pt={},dt=[],ht={},mt=0,yt=fe(),vt=0,bt=fe(),gt=fe(),wt=fe(),_t=function(e,t){return e.x===t.x&&e.y===t.y},Et=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ot=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},St=function(){$&&(N($),$=null)},xt=function(){H&&($=R(xt),Gt())},jt=function(){return!("fit"===c.scaleMode&&b===i.currItem.initialZoomLevel)},Tt=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Tt(e.parentNode,t))},Ct={},kt=function(e,t){return Ct.prevent=!Tt(e.target,c.isClickableElement),Ce("preventDragEvent",e,t,Ct),Ct.prevent},Lt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Pt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},At=function(e,t,n){if(e-Y>50){var r=dt.length>2?dt.shift():{};r.x=t,r.y=n,dt.push(r),Y=e}},Rt=function(){var e=he.y-i.currItem.initialPosition.y;return 1-Math.abs(e/(me.y/2))},Nt={},It={},Dt=[],Mt=function(e){for(;Dt.length>0;)Dt.pop();return P?(se=0,ft.forEach((function(e){0===se?Dt[0]=e:1===se&&(Dt[1]=e),se++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Dt[0]=Lt(e.touches[0],Nt),e.touches.length>1&&(Dt[1]=Lt(e.touches[1],It))):(Nt.x=e.pageX,Nt.y=e.pageY,Nt.id="",Dt[0]=Nt),Dt},Ft=function(e,t){var n,r,o,a,u=he[e]+t[e],l=t[e]>0,s=bt.x+t.x,f=bt.x-pt.x;if(n=u>ne.min[e]||u<ne.max[e]?c.panEndFriction:1,u=he[e]+t[e]*n,(c.allowPanToNext||b===i.currItem.initialZoomLevel)&&(re?"h"!==ie||"x"!==e||X||(l?(u>ne.min[e]&&(n=c.panEndFriction,ne.min[e],r=ne.min[e]-de[e]),(r<=0||f<0)&&Qt()>1?(a=s,f<0&&s>pt.x&&(a=pt.x)):ne.min.x!==ne.max.x&&(o=u)):(u<ne.max[e]&&(n=c.panEndFriction,ne.max[e],r=de[e]-ne.max[e]),(r<=0||f>0)&&Qt()>1?(a=s,f>0&&s<pt.x&&(a=pt.x)):ne.min.x!==ne.max.x&&(o=u))):a=s,"x"===e))return void 0!==a&&(Ie(a,!0),J=a!==pt.x),ne.min.x!==ne.max.x&&(void 0!==o?he.x=o:J||(he.x+=t.x*n)),void 0!==a;oe||J||b>i.currItem.fitRatio&&(he[e]+=t[e]*n)},Ut=function(e){if(!("mousedown"===e.type&&e.button>0))if($t)e.preventDefault();else if(!W||"mousedown"!==e.type){if(kt(e,!0)&&e.preventDefault(),Ce("pointerDown"),P){var t=o.arraySearch(ft,e.pointerId,"id");t<0&&(t=ft.length),ft[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Mt(e),r=n.length;Q=null,tt(),H&&1!==r||(H=ae=!0,o.bind(window,m,i),z=le=ue=V=J=Z=K=X=!1,ie=null,Ce("firstTouchStart",n),Me(de,he),pe.x=pe.y=0,Me(lt,n[0]),Me(st,lt),pt.x=be.x*ye,dt=[{x:lt.x,y:lt.y}],Y=G=ke(),qe(b,!0),St(),xt()),!ee&&r>1&&!oe&&!J&&(g=b,X=!1,ee=K=!0,pe.y=pe.x=0,Me(de,he),Me(at,n[0]),Me(ut,n[1]),Pt(at,ut,wt),gt.x=Math.abs(wt.x)-he.x,gt.y=Math.abs(wt.y)-he.y,te=Ot(at,ut))}},Bt=function(e){if(e.preventDefault(),P){var t=o.arraySearch(ft,e.pointerId,"id");if(t>-1){var n=ft[t];n.x=e.pageX,n.y=e.pageY}}if(H){var r=Mt(e);if(ie||Z||ee)Q=r;else if(bt.x!==be.x*ye)ie="h";else{var i=Math.abs(r[0].x-lt.x)-Math.abs(r[0].y-lt.y);Math.abs(i)>=it&&(ie=i>0?"h":"v",Q=r)}}},Gt=function(){if(Q){var e=Q.length;if(0!==e)if(Me(at,Q[0]),ct.x=at.x-lt.x,ct.y=at.y-lt.y,ee&&e>1){if(lt.x=at.x,lt.y=at.y,!ct.x&&!ct.y&&_t(Q[1],ut))return;Me(ut,Q[1]),X||(X=!0,Ce("zoomGestureStarted"));var t=Ot(at,ut),n=Wt(t);n>i.currItem.initialZoomLevel+i.currItem.initialZoomLevel/15&&(le=!0);var r=1,o=ze(),a=Ve();if(n<o)if(c.pinchToClose&&!le&&g<=i.currItem.initialZoomLevel){var u=1-(o-n)/(o/1.2);Le(u),Ce("onPinchClose",u),ue=!0}else(r=(o-n)/o)>1&&(r=1),n=o-r*(o/3);else n>a&&((r=(n-a)/(6*o))>1&&(r=1),n=a+r*o);r<0&&(r=0),Pt(at,ut,yt),pe.x+=yt.x-wt.x,pe.y+=yt.y-wt.y,Me(wt,yt),he.x=De("x",n),he.y=De("y",n),z=n>b,b=n,Ae()}else{if(!ie)return;if(ae&&(ae=!1,Math.abs(ct.x)>=it&&(ct.x-=Q[0].x-st.x),Math.abs(ct.y)>=it&&(ct.y-=Q[0].y-st.y)),lt.x=at.x,lt.y=at.y,0===ct.x&&0===ct.y)return;if("v"===ie&&c.closeOnVerticalDrag&&!jt()){pe.y+=ct.y,he.y+=ct.y;var l=Rt();return V=!0,Ce("onVerticalDrag",l),Le(l),void Ae()}At(ke(),at.x,at.y),Z=!0,ne=i.currItem.bounds,Ft("x",ct)||(Ft("y",ct),Fe(he),Ae())}}},Yt=function(e){if(U.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout((function(){W=0}),600))}var t;if(Ce("pointerUp"),kt(e,!1)&&e.preventDefault(),P){var n=o.arraySearch(ft,e.pointerId,"id");if(n>-1)if(t=ft.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,u=Mt(e),l=u.length;if("mouseup"===e.type&&(l=0),2===l)return Q=null,!0;1===l&&Me(st,u[0]),0!==l||ie||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ce("touchRelease",e,t));var s=-1;if(0===l&&(H=!1,o.unbind(window,m,i),St(),ee?s=0:-1!==vt&&(s=ke()-vt)),vt=1===l?ke():-1,a=-1!==s&&s<150?"zoom":"swipe",ee&&l<2&&(ee=!1,1===l&&(a="zoomPointerUp"),Ce("zoomGestureEnded")),Q=null,Z||X||oe||V)if(tt(),q||(q=qt()),q.calculateSwipeSpeed("x"),V)if(Rt()<c.verticalDragRange)i.close();else{var f=he.y,p=ce;nt("verticalDrag",0,1,300,o.easing.cubic.out,(function(e){he.y=(i.currItem.initialPosition.y-f)*e+f,Le((1-p)*e+p),Ae()})),Ce("onVerticalDrag",1)}else{if((J||oe)&&0===l){if(Vt(a,q))return;a="zoomPointerUp"}oe||("swipe"===a?!J&&b>i.currItem.fitRatio&&zt(q):Ht())}},qt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){dt.length>1?(e=ke()-Y+50,t=dt[dt.length-2][r]):(e=ke()-G,t=st[r]),n.lastFlickOffset[r]=lt[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:he[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,o.easing.sine.out,(function(t){he[e]=t,Ae()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if($e.zoomPan&&($e.zoomPan.raf=R(n.panAnimLoop),n.now=ke(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Ae(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),Ae(),void Qe("zoomPan")}};return n},zt=function(e){if(e.calculateSwipeSpeed("y"),ne=i.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=ke(),e.panAnimLoop()},Vt=function(e,t){var n,r,a;if(oe||(mt=p),"swipe"===e){var u=lt.x-st.x,l=t.lastFlickDist.x<10;u>ot&&(l||t.lastFlickOffset.x>20)?r=-1:u<-ot&&(l||t.lastFlickOffset.x<-20)&&(r=1)}r&&((p+=r)<0?(p=c.loop?Qt()-1:0,a=!0):p>=Qt()&&(p=c.loop?0:Qt()-1,a=!0),a&&!c.loop||(ge+=r,ye-=r,n=!0));var s,f=be.x*ye,d=Math.abs(f-bt.x);return n||f>bt.x==t.lastFlickSpeed.x>0?(s=Math.abs(t.lastFlickSpeed.x)>0?d/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),s=Math.max(s,250)):s=333,mt===p&&(n=!1),oe=!0,Ce("mainScrollAnimStart"),nt("mainScroll",bt.x,f,s,o.easing.cubic.out,Ie,(function(){tt(),oe=!1,mt=-1,(n||mt!==p)&&i.updateCurrItem(),Ce("mainScrollAnimComplete")})),n&&i.updateCurrItem(!0),n},Wt=function(e){return 1/te*e*g},Ht=function(){var e=b,t=ze(),n=Ve();b<t?e=t:b>n&&(e=n);var r,a=1,u=ce;return ue&&!z&&!le&&b<t?(i.close(),!0):(ue&&(r=function(e){Le((a-u)*e+u)}),i.zoomTo(e,0,200,o.easing.cubic.out,r),!0)};Se("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,o){j=e+t,T=e+n,C=e+r,k=o?e+o:""};(P=U.pointerEvent)&&U.touch&&(U.touch=!1),P?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):U.touch?(e("touch","start","move","end","cancel"),A=!0):e("mouse","down","move","up"),m=T+" "+C+" "+k,y=j,P&&!A&&(A=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),i.likelyTouchDevice=A,v[j]=Ut,v[T]=Bt,v[C]=Yt,k&&(v[k]=v[C]),U.touch&&(y+=" mousedown",m+=" mousemove mouseup",v.mousedown=v[j],v.mousemove=v[T],v.mouseup=v[C]),A||(c.allowPanToNext=!1)}}});var Kt,Xt,Zt,$t,Jt,Qt,en=function(t,n,r,a){var u;Kt&&clearTimeout(Kt),$t=!0,Zt=!0,t.initialLayout?(u=t.initialLayout,t.initialLayout=null):u=c.getThumbBoundsFn&&c.getThumbBoundsFn(p);var l,s,d=r?c.hideAnimationDuration:c.showAnimationDuration,h=function(){Qe("initialZoom"),r?(i.template.removeAttribute("style"),i.bg.removeAttribute("style")):(Le(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Ce("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),$t=!1};if(!d||!u||void 0===u.x)return Ce("initialZoom"+(r?"Out":"In")),b=t.initialZoomLevel,Me(he,t.initialPosition),Ae(),e.style.opacity=r?0:1,Le(1),void(d?setTimeout((function(){h()}),d):h());l=f,s=!i.currItem.src||i.currItem.loadError||c.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(b=u.w/t.w,he.x=u.x,he.y=u.y-D,i[s?"template":"bg"].style.opacity=.001,Ae()),et("initialZoom"),r&&!l&&o.removeClass(e,"pswp--animated-in"),s&&(r?o[(l?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){o.addClass(e,"pswp--animate_opacity")}),30)),Kt=setTimeout((function(){if(Ce("initialZoom"+(r?"Out":"In")),r){var n=u.w/t.w,i={x:he.x,y:he.y},a=b,c=ce,f=function(t){1===t?(b=n,he.x=u.x,he.y=u.y-F):(b=(n-a)*t+a,he.x=(u.x-i.x)*t+i.x,he.y=(u.y-F-i.y)*t+i.y),Ae(),s?e.style.opacity=1-t:Le(c-t*c)};l?nt("initialZoom",0,1,d,o.easing.cubic.out,f,h):(f(1),Kt=setTimeout(h,d+20))}else b=t.initialZoomLevel,Me(he,t.initialPosition),Ae(),Le(1),s?e.style.opacity=1:Le(1),Kt=setTimeout(h,d+20)}),r?25:90)},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Ce("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var o=tn.x/e.w,i=tn.y/e.h;e.fitRatio=o<i?o:i;var a=c.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return an(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,r,o,a){t.loadError||r&&(t.imageAppended=!0,fn(t,r,t===i.currItem&&Oe),n.appendChild(r),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},ln=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},sn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=c.errorMsg.replace("%url%",e.src),!0},fn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=o+"px"),t.style.width=r+"px",t.style.height=o+"px"}},pn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Se("Controller",{publicMethods:{lazyLoadItem:function(e){e=xe(e);var t=Jt(e);t&&(!t.loaded&&!t.loading||O)&&(Ce("gettingData",e,t),t.src&&ln(t))},initController:function(){o.extend(c,rn,!0),i.items=Xt=n,Jt=i.getItemAt,Qt=c.getNumItemsFn,c.loop,Qt()<3&&(c.loop=!1),Te("beforeChange",(function(e){var t,n=c.preload,r=null===e||e>=0,o=Math.min(n[0],Qt()),a=Math.min(n[1],Qt());for(t=1;t<=(r?a:o);t++)i.lazyLoadItem(p+t);for(t=1;t<=(r?o:a);t++)i.lazyLoadItem(p-t)})),Te("initialLayout",(function(){i.currItem.initialLayout=c.getThumbBoundsFn&&c.getThumbBoundsFn(p)})),Te("mainScrollAnimComplete",pn),Te("initialZoomInEnd",pn),Te("destroy",(function(){for(var e,t=0;t<Xt.length;t++)(e=Xt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==Xt[e]&&Xt[e]},allowProgressiveImg:function(){return c.forceProgressiveLoading||!A||c.mouseUsed||screen.width>1200},setContent:function(e,t){c.loop&&(t=xe(t));var n=i.getItemAt(e.index);n&&(n.container=null);var r,a=i.getItemAt(t);if(a){Ce("gettingData",t,a),e.index=t,e.item=a;var u=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?u.appendChild(a.html):u.innerHTML=a.html),sn(a),un(a,me),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((r=o.createEl("pswp__img","img")).style.opacity=1,r.src=a.src,fn(a,r),cn(t,a,u,r,!0));else{if(a.loadComplete=function(n){if(l){if(e&&e.index===t){if(sn(n,!0))return n.loadComplete=n.img=null,un(n,me),Re(n),void(e.index===p&&i.updateCurrZoomItem());n.imageAppended?!$t&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):U.transform&&(oe||$t)?nn.push({item:n,baseDiv:u,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,u,n.img,oe||$t,!0)}n.loadComplete=null,n.img=null,Ce("imageLoadComplete",t,n)}},o.features.transform){var s="pswp__img pswp__img--placeholder";s+=a.msrc?"":" pswp__img--placeholder--blank";var f=o.createEl(s,a.msrc?"img":"");a.msrc&&(f.src=a.msrc),fn(a,f),u.appendChild(f),a.placeholder=f}a.loading||ln(a),i.allowProgressiveImg()&&(!Zt&&U.transform?nn.push({item:a,baseDiv:u,img:a.img,index:t,holder:e}):cn(t,a,u,a.img,!0,!0))}Zt||t!==p?Re(a):(re=u.style,en(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(u)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var dn,hn,mn={},yn=function(e,t,n){var r=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(r)};Se("Tap",{publicMethods:{initTap:function(){Te("firstTouchStart",i.onTapStart),Te("touchRelease",i.onTapRelease),Te("destroy",(function(){mn={},dn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(dn),dn=null)},onTapRelease:function(e,t){if(t&&!Z&&!K&&!Je){var n=t;if(dn&&(clearTimeout(dn),dn=null,Et(n,mn)))return void Ce("doubleTap",n);if("mouse"===t.type)return void yn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||o.hasClass(e.target,"pswp__single-tap"))return void yn(e,t);Me(mn,n),dn=setTimeout((function(){yn(e,t),dn=null}),300)}}}}),Se("DesktopZoom",{publicMethods:{initDesktopZoom:function(){M||(A?Te("mouseUsed",(function(){i.setupDesktopZoom()})):i.setupDesktopZoom(!0))},setupDesktopZoom:function(t){hn={};var n="wheel mousewheel DOMMouseScroll";Te("bindEvents",(function(){o.bind(e,n,i.handleMouseWheel)})),Te("unbindEvents",(function(){hn&&o.unbind(e,n,i.handleMouseWheel)})),i.mouseZoomedIn=!1;var r,a=function(){i.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),i.mouseZoomedIn=!1),b<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),u()},u=function(){r&&(o.removeClass(e,"pswp--dragging"),r=!1)};Te("resize",a),Te("afterChange",a),Te("pointerDown",(function(){i.mouseZoomedIn&&(r=!0,o.addClass(e,"pswp--dragging"))})),Te("pointerUp",u),t||a()},handleMouseWheel:function(e){if(b<=i.currItem.fitRatio)return c.modal&&(!c.closeOnScroll||Je||H?e.preventDefault():L&&Math.abs(e.deltaY)>2&&(f=!0,i.close())),!0;if(e.stopPropagation(),hn.x=0,"deltaX"in e)1===e.deltaMode?(hn.x=18*e.deltaX,hn.y=18*e.deltaY):(hn.x=e.deltaX,hn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(hn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?hn.y=-.16*e.wheelDeltaY:hn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;hn.y=e.detail}qe(b,!0);var t=he.x-hn.x,n=he.y-hn.y;(c.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),i.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:me.x/2+ve.x,y:me.y/2+ve.y};var n=c.getDoubleTapZoom(!0,i.currItem),r=b===n;i.mouseZoomedIn=!r,i.zoomTo(r?i.currItem.initialZoomLevel:n,t,333),o[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var vn,bn,gn,wn,_n,En,On,Sn,xn,jn,Tn,Cn,kn={history:!0,galleryUID:1},Ln=function(){return Tn.hash.substring(1)},Pn=function(){vn&&clearTimeout(vn),gn&&clearTimeout(gn)},An=function(){var e=Ln(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var o=r[n].split("=");o.length<2||(t[o[0]]=o[1])}if(c.galleryPIDs){var i=t.pid;for(t.pid=0,n=0;n<Xt.length;n++)if(Xt[n].pid===i){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Rn=function(){if(gn&&clearTimeout(gn),Je||H)gn=setTimeout(Rn,500);else{wn?clearTimeout(bn):wn=!0;var e=p+1,t=Jt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=On+"&gid="+c.galleryUID+"&pid="+e;Sn||-1===Tn.hash.indexOf(n)&&(jn=!0);var r=Tn.href.split("#")[0]+"#"+n;Cn?"#"+n!==window.location.hash&&history[Sn?"replaceState":"pushState"]("",document.title,r):Sn?Tn.replace(r):Tn.hash=n,Sn=!0,bn=setTimeout((function(){wn=!1}),60)}};Se("History",{publicMethods:{initHistory:function(){if(o.extend(c,kn,!0),c.history){Tn=window.location,jn=!1,xn=!1,Sn=!1,On=Ln(),Cn="pushState"in history,On.indexOf("gid=")>-1&&(On=(On=On.split("&gid=")[0]).split("?gid=")[0]),Te("afterChange",i.updateURL),Te("unbindEvents",(function(){o.unbind(window,"hashchange",i.onHashChange)}));var e=function(){En=!0,xn||(jn?history.back():On?Tn.hash=On:Cn?history.pushState("",document.title,Tn.pathname+Tn.search):Tn.hash=""),Pn()};Te("unbindEvents",(function(){f&&e()})),Te("destroy",(function(){En||e()})),Te("firstUpdate",(function(){p=An().pid}));var t=On.indexOf("pid=");t>-1&&"&"===(On=On.substring(0,t)).slice(-1)&&(On=On.slice(0,-1)),setTimeout((function(){l&&o.bind(window,"hashchange",i.onHashChange)}),40)}},onHashChange:function(){if(Ln()===On)return xn=!0,void i.close();wn||(_n=!0,i.goTo(An().pid),_n=!1)},updateURL:function(){Pn(),_n||(Sn?vn=setTimeout(Rn,800):Rn())}}}),o.extend(i,rt)};return e},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)},3736:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){"use strict";return function(e,t){var n,r,o,i,a,u,c,l,s,f,p,d,h,m,y,v,b,g,w=this,_=!1,E=!0,O=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},x=function(e){if(v)return!0;e=e||window.event,y.timeToIdle&&y.mouseUsed&&!s&&I();for(var n,r,o=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<q.length;i++)(n=q[i]).onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),v=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){v=!1}),a)}},j=function(){return!e.likelyTouchDevice||y.mouseUsed||screen.width>y.fitControlsWidth},T=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},C=function(){var e=1===y.getNumItemsFn();e!==m&&(T(r,"ui--one-slide",e),m=e)},k=function(){T(c,"share-modal--hidden",O)},L=function(){return(O=!O)?(t.removeClass(c,"pswp__share-modal--fade-in"),setTimeout((function(){O&&k()}),300)):(k(),setTimeout((function(){O||t.addClass(c,"pswp__share-modal--fade-in")}),30)),O||A(),!1},P=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),O||L(),1))},A=function(){for(var e,t,n,r,o="",i=0;i<y.shareButtons.length;i++)e=y.shareButtons[i],t=y.getImageURLForShare(e),n=y.getPageURLForShare(e),r=y.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",y.parseShareButtonOut&&(o=y.parseShareButtonOut(e,o));c.children[0].innerHTML=o,c.children[0].onclick=P},R=function(e){for(var n=0;n<y.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+y.closeElClasses[n]))return!0},N=0,I=function(){clearTimeout(g),N=0,s&&w.setIdle(!1)},D=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(g),g=setTimeout((function(){w.setIdle(!0)}),y.timeToIdleOutside))},M=function(){y.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},F=function(){y.preloaderEl&&(U(!0),f("beforeChange",(function(){clearTimeout(h),h=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&U(!1):U(!0)}),y.loadingIndicatorDelay)})),f("imageLoadComplete",(function(t,n){e.currItem===n&&U(!0)})))},U=function(e){d!==e&&(T(p,"preloader--active",!e),d=e)},B=function(e){var n=e.vGap;if(j()){var a=y.barsSize;if(y.captionEl&&"auto"===a.bottom)if(i||((i=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(i,o),t.addClass(r,"pswp__ui--fit")),y.addCaptionHTMLFn(e,i,!0)){var u=i.clientHeight;n.bottom=parseInt(u,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},G=function(){y.timeToIdle&&f("mouseUsed",(function(){t.bind(document,"mousemove",I),t.bind(document,"mouseout",D),b=setInterval((function(){2==++N&&w.setIdle(!0)}),y.timeToIdle/2)}))},Y=function(){var e;f("onVerticalDrag",(function(e){E&&e<.95?w.hideControls():!E&&e>=.95&&w.showControls()})),f("onPinchClose",(function(t){E&&t<.9?(w.hideControls(),e=!0):e&&!E&&t>.9&&w.showControls()})),f("zoomGestureEnded",(function(){(e=!1)&&!E&&w.showControls()}))},q=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){c=e},onTap:function(){L()}},{name:"button--share",option:"shareEl",onInit:function(e){u=e},onTap:function(){L()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}],z=function(){var e,n,o,i=function(r){if(r)for(var i=r.length,a=0;a<i;a++){e=r[a],n=e.className;for(var u=0;u<q.length;u++)o=q[u],n.indexOf("pswp__"+o.name)>-1&&(y[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&i(a.children)};w.init=function(){t.extend(e.options,S,!0),y=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),f=e.listen,Y(),f("beforeChange",w.update),f("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(y.getDoubleTapZoom(!1,e.currItem),t,333)})),f("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),f("bindEvents",(function(){t.bind(r,"pswpTap click",x),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),f("unbindEvents",(function(){O||L(),b&&clearInterval(b),t.unbind(document,"mouseout",D),t.unbind(document,"mousemove",I),t.unbind(r,"pswpTap click",x),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(y.hideAnimationDuration=0,n.exit()),n=null)})),f("destroy",(function(){y.captionEl&&(i&&r.removeChild(i),t.removeClass(o,"pswp__caption--empty")),c&&(c.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),y.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),f("initialZoomIn",(function(){y.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),f("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),f("parseVerticalMargin",B),z(),y.shareEl&&u&&c&&(O=!0),C(),G(),M(),F()},w.setIdle=function(e){s=e,T(r,"ui--idle",e)},w.update=function(){E&&e.currItem?(w.updateIndexIndicator(),y.captionEl&&(y.addCaptionHTMLFn(e.currItem,o),T(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,O||L(),C()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){y.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+y.indexIndicatorSep+y.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(R(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?y.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(y.tapToToggleControls&&(E?w.hideControls():w.showControls()),y.tapToClose&&(t.hasClass(r,"pswp__img")||R(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;T(r,"ui--over-close",R(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),E=!1},w.showControls=function(){E=!0,_||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(l=y.closeOnScroll,y.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return y.closeOnScroll=l,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})?r.call(t,n,t,e):r)||(e.exports=o)},3737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3441);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return f(r).default}});var o=n(3360);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return f(o).default}});var i=n(3444);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return f(i).default}});var a=n(3445);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return f(a).default}});var u=n(3447);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return f(u).default}});var c=n(3448);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return f(c).default}});var l=n(3450);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return f(l).default}});var s=n(3452);function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return f(s).default}})},3738:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function o(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(o=e[n],i=t[n],!(o===i||r(o)&&r(i)))return!1;var o,i;return!0}function i(e,t){void 0===t&&(t=o);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}},3749:function(e,t,n){"use strict";n.r(t);n(812);var r=n(340),o=(n(543),n(104)),i=(n(170),n(70)),a=(n(36),n(8)),u=n(0),c=n.n(u),l=n(4),s=n.n(l),f=n(6),p=n.n(f),d=n(59),h=n(97),m=n(20),y=n(53),v=n(3638),b=n(33),g="index-module_belongs_A3uam",w="index-module_meta_Jn6WP",_="index-module_truncation_g-6vp";function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={};j.Login=function(e){var t,n=e.goto,r=e.registerWithScene,o=n?"/login?goto=".concat(encodeURIComponent(n)):"/login",i=null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content"),l=h.a.genCreateFromKey(m.CREATE_FROM.official_website_top_button);return r&&(o="/"===window.location.pathname||"/about"===window.location.pathname?"/login?register_with_scene=true&defaultType=org&register_from=".concat(l):"/login?register_with_scene=true&register_from=".concat(l)),Object(u.useEffect)((function(){Object(v.b)()}),[]),c.a.createElement(c.a.Fragment,null,"doc_read"===i?c.a.createElement(a.a,{onClick:function(e){b.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("免费使用")):c.a.createElement(a.a,{onClick:function(e){b.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("登录 / 注册")))},j.Login.propTypes={size:s.a.oneOf(["small","large"]),goto:s.a.string},j.Job=function(e){var t=e.user,n=e.truncation;if(t)return c.a.createElement("span",{className:p()(w,x({},_,n))},c.a.createElement(d.b,{name:"user-job",width:16,height:16}),c.a.createElement("span",null,t.job_title||__("未填写")))},j.Job.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},j.Location=function(e){var t=e.user,n=e.truncation,r=e.size,o=void 0===r?16:r;return t=t||{},c.a.createElement("span",{className:p()(w,x({},_,n))},c.a.createElement(d.b,{name:"user-location",width:o,height:o}),c.a.createElement("span",null,t.location||__("未填写")))},j.Location.propTypes={size:s.a.object.number,user:s.a.object.isRequired,truncation:s.a.bool},j.Department=function(e){var t,n=e.user,r=e.truncation;if(n)return c.a.createElement("div",null,null!==(t=n.departments)&&void 0!==t&&t.length?n.departments.map((function(e){return c.a.createElement("span",{className:p()(w,x({},_,r))},c.a.createElement(d.b,{name:"department",width:16,height:16}),c.a.createElement("span",null,e))})):c.a.createElement("span",{className:p()(w,x({},_,r))},c.a.createElement(d.b,{name:"department",width:16,height:16}),c.a.createElement("span",null,n.department||__("未填写"))))},j.Department.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},j.Link=function(e){var t=e.user,n=e.className;return c.a.createElement("a",{href:"/".concat(t.login),title:t.name,className:n},t.name)},j.Link.propTypes={user:s.a.object.isRequired,className:s.a.string},j.Name=function(e){var t=e.user,n=e.className;return c.a.createElement("span",{title:t.name,className:n},t.name)},j.Name.propTypes={user:s.a.object.isRequired,className:s.a.string},j.ContentRiskStatus=function(e){var t=e.user,n=e.me;if(n&&(n.isAdmin||n.isSecurityOperator)&&[y.STATUS.banned,y.STATUS.blocked].includes(t.status)){var r={};r[y.STATUS.banned]="已封禁",r[y.STATUS.blocked]="已屏蔽";var o=r[t.status];return c.a.createElement(i.a,{title:o},c.a.createElement(d.b,{title:!0,name:"doc-has-content-risk",width:20,style:{marginLeft:8,marginBottom:2}}))}return null},j.Name.propTypes={user:s.a.object.isRequired,me:s.a.object};var T=function(e){var t=e.belongs,n=e.onChange,i=O(Object(u.useState)(__("管理员")),2),a=i[0],l=i[1];return c.a.createElement(r.a,{trigger:["click"],overlay:c.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return c.a.createElement(o.a.Item,{key:e.type},c.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){n(e.type),l(e.text)}(e)}},e.text))})))},c.a.createElement("span",null,a,c.a.createElement("span",{className:p()("larkicon","larkicon-arrow-down",g)})))};T.propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired},j.BelongMenu=T;t.default=j},3753:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return C})),n.d(t,"m",(function(){return F})),n.d(t,"k",(function(){return Q})),n.d(t,"i",(function(){return ce})),n.d(t,"j",(function(){return ve})),n.d(t,"l",(function(){return je})),n.d(t,"h",(function(){return ze})),n.d(t,"f",(function(){return Je})),n.d(t,"d",(function(){return ft})),n.d(t,"e",(function(){return gt})),n.d(t,"g",(function(){return kt})),n.d(t,"b",(function(){return Ft}));var r=n(63),o=n.n(r),i=n(3661),a=n(3357);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function d(e,t,n){return t=y(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(null,arguments)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){var e=this.options.targetType;return e?"".concat(e,"_comment").toLowerCase():"comment"}},{key:"buildOptions",value:function(){var e,n,r,o,i,a=(e=t,n="buildOptions",r=this,i=m(y(1&(o=3)?e.prototype:e),n,r),2&o&&"function"==typeof i?function(e){return i.apply(r,e)}:i)([]),u=this.options,c=u.target;return u.showDingMention?l(l({},a),{},{dingMention:{api:"/api/notifications/send_by_dingtalk_chat",isAntDingTalkApi:"/api/ant_dingtalk/is_ant_dingtalk_user",docId:null==c?void 0:c.id,subjectType:"Comment"}}):a}},{key:"getCacheKey",value:function(){var e=this.options.replyId;return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(e,"/new"):"autosave/".concat(this.type)}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat()}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}],a=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],r&&f(n.prototype,r),a&&f(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(a.a),g=b;function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function O(e,t,n){return t=x(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="Resource",e.useBelongAttach=!0,e.from="reply",O(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&_(n.prototype,r),o&&_(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g),C=T;function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}function A(e,t,n){return t=I(t),function(e,t){if(t&&("object"==k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,R()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(null,arguments)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="Doc",e.useBelongAttach=!0,e.from="reply",A(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),n=t,r=[{key:"buildOptions",value:function(e){var n,r,o,i,a,u,c=(r=t,o="buildOptions",i=this,u=N(I(1&(a=3)?r.prototype:r),o,i),2&a&&"function"==typeof u?function(e){return u.apply(i,e)}:u)([e]);return c.image.showMiniToolbarWhen="never",null===(n=c.disabledPlugins)||void 0===n||n.push("slash"),c}},{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!1}},{key:"isMiniSize",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!1}}],r&&L(n.prototype,r),o&&L(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g),F=M,U=n(15),B=n.n(U),G=n(3472);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}function H(e,t,n){return t=X(t),function(e,t){if(t&&("object"==Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}var $={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),n=t,o=[{key:"getTemplate",value:function(e,t){var n=$[e];if(!n)return{title:null,content:null};var r=B()(new Date).format("YYYY-MM-DD"),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return o.title=o.title.replace("#prefix#",t),o.title=o.title.replace("#day#",r),o}}],(r=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(e,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){return this.isEditMode?"".concat("/api/upload/copy?type=attachment","&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):null}}])&&V(n.prototype,r),o&&V(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(G.a),Q=J;function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function ne(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}function re(e,t,n){return t=ie(t),function(e,t){if(t&&("object"==ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oe()?Reflect.construct(t,n||[],ie(e).constructor):t.apply(e,n))}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oe=function(){return!!e})()}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}var ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&te(n.prototype,r),o&&te(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a),ce=ue;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function fe(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}function pe(e,t,n){return t=he(t),function(e,t){if(t&&("object"==le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,de()?Reflect.construct(t,n||[],he(e).constructor):t.apply(e,n))}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}var ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return"thread_comment"}}])&&se(n.prototype,r),o&&se(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g),ve=ye;function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==be(t)?t:t+""}function _e(e,t,n){return t=Se(t),function(e,t){if(t&&("object"==be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ee()?Reflect.construct(t,n||[],Se(e).constructor):t.apply(e,n))}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}function Oe(){return Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Se(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Oe.apply(null,arguments)}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}var je=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="User",e.useBelongAttach=!0,_e(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(t,e),n=t,r=[{key:"buildOptions",value:function(e){var n,r,o,i,a,u=(n=t,r="buildOptions",o=this,a=Oe(Se(1&(i=3)?n.prototype:n),r,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e]);return u.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},u}},{key:"getType",value:function(){return"user_readme"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}],r&&ge(n.prototype,r),o&&ge(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a),Te=n(3477),Ce=n(48);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Le(){Le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==ke(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ke(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Re(i,r,o,a,u,"next",e)}function u(e){Re(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ye(r.key),r)}}function De(e,t,n){return t=Ue(t),function(e,t){if(t&&("object"==ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Me()?Reflect.construct(t,n||[],Ue(e).constructor):t.apply(e,n))}function Me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Me=function(){return!!e})()}function Fe(){return Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fe.apply(null,arguments)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function Ge(e,t,n){return(t=Ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}var qe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="Doc",e.useBelongAttach=!0,e.disableCache=!0,e.from="table",Ge(n=De(this,t,[e]),"_fetchMentionDocsHandler",(function(e,t){return e.map((function(e){return e.group=t?n.group.name:e.group_name,e.book=t?n.book.name:e.belong,e}))})),Ge(n,"getDefaultSuggestions",Ne(Le().mark((function e(){var t;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.book){e.next=2;break}return e.abrupt("return",{docs:[],users:[]});case 2:return e.abrupt("return",Promise.all([null!==(t=n.book.abilities)&&void 0!==t&&t.read?Ce.a.books.docs({id:n.book.id,order_by:"published_at"}):[],Ce.a.users.listDocContextUsers({id:n.target.id})]).then((function(e){var t=Pe(e,2),r=t[0],o=t[1];return{docs:n._fetchMentionDocsHandler(r,!0),users:o}})));case 3:case"end":return e.stop()}}),e)})))),Ge(n,"onMentionSearch",function(){var e=Ne(Le().mark((function e(t,r){var o,i;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",n.getDefaultSuggestions());case 2:return o=function(){var e=Ne(Le().mark((function e(){return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.book){e.next=2;break}return e.abrupt("return",[]);case 2:if(t){e.next=8;break}return e.next=5,Ce.a.books.docs({id:n.book.id,order_by:"published_at"}).then((function(e){return n._fetchMentionDocsHandler(e,!0)}));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,Ce.a.editor.search({q:t,type:"content",related:!0,range:"title"}).then((function(e){return n._fetchMentionDocsHandler(e||[])}));case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Ne(Le().mark((function e(){return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ce.a.users.complete({q:t,target_type:n.target.type,target_id:n.target.id}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all([o(),i()]).then((function(e){return{docs:e[0],users:e[1]}})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(t,e),n=t,r=[{key:"buildOptions",value:function(e){var n,r,o,i,a,u=(n=t,r="buildOptions",o=this,a=Fe(Ue(1&(i=3)?n.prototype:n),r,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e]);return u.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},this.options.scrollNode&&(u.scrollNode=this.options.scrollNode),u.mention={defaultList:this.getDefaultSuggestions,onMentionSearch:this.onMentionSearch,multiTypes:!0},u.envAdapter={openLink:function(e){window.open(e)},openBookmarkLink:function(e){window.open(e)},openYuqueDocLink:function(e){window.open(e)},openLocalLink:function(e){window.open(e)},openLocalYuqueDocLink:function(e){window.open(e)},openThirdpartyLink:function(e){window.open(e)},previewImgs:function(e,t){Object(Te.getImageBrowser)().open(e,t)}},u.toolbar=this.getToolbar(),u}},{key:"getToolbar",value:function(){return{agentConfig:{simple:{fixed:!0,items:["cardSelect","style","bold","color","bgColor","orderedList","unorderedList","link","emoji","randomTips"]}}}}},{key:"getType",value:function(){return"table_record_desc"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!1}},{key:"getInitialDocument",value:function(){return{format:this.getDefaultFormat(),title:null,value:null}}}],r&&Ie(n.prototype,r),o&&Ie(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a),ze=qe;function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:t+""}function Ke(e,t,n){return t=Ze(t),function(e,t){if(t&&("object"==Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,n||[],Ze(e).constructor):t.apply(e,n))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}var Je=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.from="group_custom",e.attachType="User",e.useBelongAttach=!0,Ke(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&We(n.prototype,r),o&&We(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a),Qe=n(380);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ot(r.key),r)}}function ot(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}function it(e,t,n){return t=lt(t),function(e,t){if(t&&("object"==et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,n||[],lt(e).constructor):t.apply(e,n))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function ut(e,t,n,r){var o=ct(lt(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function ct(){return ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ct.apply(null,arguments)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}var ft=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.feedback;return e.attachType="User",e.useBelongAttach=!0,e.from="feedback",e.placeholder={tip:n&&n.abilities.manage?"你将要代表语雀回复用户，请使用官方口吻，慎重填写":"",emptyParagraphTip:""},it(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(t,e),n=t,(r=[{key:"buildOptions",value:function(e){var n,r=ut(t,"buildOptions",this,3)([e]);return r.hideVipIcon=!0,r.image.accept=Qe.a.RELIABLE_IMAGE_EXT,r.file.accept=Qe.a.RELIABLE_FILE_EXT,r.file.localdocAccept=Qe.a.RELIABLE_LOCALDOC_EXT,null===(n=r.disabledPlugins)||void 0===n||n.push("slash"),r}},{key:"getBlockedCards",value:function(){return[].concat(tt(ut(t,"getBlockedCards",this,3)([])),["vote","thirdparty","lockedText","calendar"])}},{key:"getType",value:function(){return"feedback_comment"}},{key:"getCacheKey",value:function(){var e=this.getType();if(this.target)return"autosave/".concat(e,"/").concat(this.target.id,"/edit");var t=this.options.feedback;return t?"autosave/".concat(e,"/").concat(t.id,"/new"):"autosave/".concat(e)}},{key:"getContentObject",value:function(){var e=this.target.content||{source:"",format:"lake"};return{format:e.format,value:e.source||""}}},{key:"isMiniSize",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}}])&&rt(n.prototype,r),o&&rt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(G.a);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function ht(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pt(t)?t:t+""}function mt(e,t,n){return t=vt(t),function(e,t){if(t&&("object"==pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yt()?Reflect.construct(t,n||[],vt(e).constructor):t.apply(e,n))}function yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yt=function(){return!!e})()}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}function bt(e,t){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bt(e,t)}var gt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="User",e.useBelongAttach=!0,e.placeholder={tip:"",emptyParagraphTip:""},e.from="feedback",mt(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return"feedback_remark"}},{key:"getContentObject",value:function(){return{format:"lake",value:this.target.remark||""}}},{key:"getCacheKey",value:function(){return this.target?"autosave/".concat(this.type,"/").concat(this.target.id):"autosave/".concat(this.type)}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&dt(n.prototype,r),o&&dt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(G.a);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Et(r.key),r)}}function Et(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wt(t)?t:t+""}function Ot(e,t,n){return t=Tt(t),function(e,t){if(t&&("object"==wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,St()?Reflect.construct(t,n||[],Tt(e).constructor):t.apply(e,n))}function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(St=function(){return!!e})()}function xt(e,t,n,r){var o=jt(Tt(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function jt(){return jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Tt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},jt.apply(null,arguments)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}var kt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.target&&(e.attachType="Doclet"),Ot(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(t,e),n=t,(r=[{key:"getCards",value:function(){return this.options.target?xt(t,"getCards",this,3)([]):["label"]}},{key:"getFullCards",value:function(){return this.options.target?xt(t,"getFullCards",this,3)([]):["label"]}},{key:"getType",value:function(){return"org_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!1}}])&&_t(n.prototype,r),o&&_t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,At(r.key),r)}}function At(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lt(t)?t:t+""}function Rt(e,t,n){return t=Dt(t),function(e,t){if(t&&("object"==Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nt()?Reflect.construct(t,n||[],Dt(e).constructor):t.apply(e,n))}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}function It(){return It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Dt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},It.apply(null,arguments)}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}function Mt(e,t){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mt(e,t)}var Ft=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.attachType="Doclet",Rt(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(t,e),n=t,r=[{key:"buildOptions",value:function(e){var n,r,o,i,a,u=(n=t,r="buildOptions",o=this,a=It(Dt(1&(i=3)?n.prototype:n),r,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e]);return u.disabledPlugins=["collaboration","vote","checkIn","toc","dataTable","materialLibrary","okr"],u.typography={typography:"classic",paragraphSpacing:"relax"},u}},{key:"getType",value:function(){return"book_overview"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}],r&&Pt(n.prototype,r),o&&Pt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a);n(3651)},3760:function(e,t,n){"use strict";var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var a=function(e,t){this.target=t,this.type=e},u=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(a),c=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(a),l=function(){if("undefined"!=typeof WebSocket)return WebSocket},s={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},f=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?s.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?s.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),i=o.next();!i.done;i=o.next()){var a=i.value;this._callEventListener(e,a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?s.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?s.minReconnectionDelay:r,i=e.maxReconnectionDelay,a=void 0===i?s.maxReconnectionDelay:i,u=0;return this._retryCount>0&&(u=o*Math.pow(n,this._retryCount-1))>a&&(u=a),this._debug("next delay",u),u},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?s.maxRetries:n,o=t.connectionTimeout,i=void 0===o?s.connectionTimeout:o,a=t.WebSocket,u=void 0===a?l():a;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=u)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new u(t,e._protocols):new u(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),i))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new u(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new c(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.a=f},380:function(e,t,n){"use strict";var r=n(124),o=n.n(r),i=n(184),a=n(102),u=n.n(a),c=n(105),l=n.n(c),s=n(106),f=n.n(s),p=n(110),d=n.n(p),h=n(114),m=n.n(h),y=n(115),v=n.n(y),b=n(120),g=n.n(b),w=n(517),_=n.n(w);function E(e){return i.ua.chrome?e.filter((function(e){return!/\.\w+\./.test(e)})):e}var O=E(o.a),S=E(o.a.normal),x=E(o.a.paid),j=[m.a,v.a,d.a,g.a],T=E(_()(j).concat([".pdf"])),C=E(_()(j.map((function(e){return e.paid}))).concat([".pdf"])),k=u.a,L=u.a.normal,P=u.a.paid,A=l.a,R=l.a.paid,N=f.a,I=f.a.paid,D=[".png",".bmp",".jpg",".jpeg",".gif",".webp",".heic",".heif"],M=[].concat(D,[".txt",".pdf",".mp4",".mov",".avi",".wmv",".rmvb",".mpeg",".rm"]);t.a={LOCAL_DOC_EXT:T,LOCAL_DOC_EXT_NORMAL:[],LOCAL_DOC_EXT_PAID:C,FILE_EXT:O,FILE_EXT_NORMAL:S,FILE_EXT_PAID:x,IMAGE_EXT:k,IMAGE_EXT_NORMAL:L,IMAGE_EXT_PAID:P,VIDEO_EXT:A,VIDEO_EXT_NORMAL:[],VIDEO_EXT_PAID:R,AUDIO_EXT:N,AUDIO_EXT_NORMAL:[],AUDIO_EXT_PAID:I,RELIABLE_IMAGE_EXT:D,RELIABLE_FILE_EXT:M,RELIABLE_LOCALDOC_EXT:[".pdf"]}},3862:function(e,t,n){"use strict";var r=n(3760),o=n(237),i=n.n(o),a=n(195),u=n.n(a),c=n(55);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function d(e,t,n){return t=m(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var g=new(n.n(c).a)("connect_base"),w={connectionTimeout:2e4,maxRetries:0,heartBeatInterval:1e4,congestionTimeout:8e3},_="connecting",E="offline",O="connected",S=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(n=d(this,t),"onOpen",(function(){g("connected"),n.status=O,n.stopCongestionMonitor(),n.emit("ready",n.socket),n._heartBeat=null})),v(n,"onClose",(function(e){g("close",{retryCount:n.socket.retryCount,readyState:n.socket.readyState}),n.disconnect(),n.emit("close",e)})),v(n,"onMessage",(function(e){try{var t=JSON.parse(e.data);n.pong(t),g("message",t)}catch(t){g("invalid message",e.data)}})),v(n,"onError",(function(e){g("error",{message:e.message,retryCount:n.socket.retryCount,readyStatus:n.socket.readyState,error:e}),"TIMEOUT"===e.message&&(n.status=E),n.emit("error",e)})),n.url=e,n.socket=null,n.status=null,n._heartBeat=null,n.heartBeatInterval=r.heartBeatInterval||w.heartBeatInterval,n.option=f(f({},w),r),n.connect(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(o=[{key:"connect",value:function(){this.status=_;var e=new r.a(this.url,[],this.option);this.socket=e,e.addEventListener("open",this.onOpen),e.addEventListener("close",this.onClose),e.addEventListener("message",this.onMessage),e.addEventListener("error",this.onError),this.startCongestionMonitor()}},{key:"startCongestionMonitor",value:function(){var e=this;this.stopCongestionMonitor(),this.congestTimer=setTimeout((function(){e.emit("congestion")}),this.option.congestionTimeout)}},{key:"stopCongestionMonitor",value:function(){this.congestTimer&&clearTimeout(this.congestTimer)}},{key:"disconnect",value:function(){this.stopHeartBeat(),this.stopCongestionMonitor(),this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket.close(),this.socket=null),this.status=E}},{key:"ping",value:function(){var e=this;if(this.socket){var t={action:"heartbeat",pingId:u()(10),pingAt:+new Date};this._heartBeat&&this.transmitNetStatus("congestion"),this._heartBeat=t,this.socket.send(JSON.stringify(t)),g("ping",t),this.status!==E&&(this.pingTimer=setTimeout((function(){e.ping()}),this.heartBeatInterval))}}},{key:"pong",value:function(e){e&&"heartbeat"===e.action&&this._heartBeat&&this._heartBeat.pingId===e.pingId&&(new Date-this._heartBeat.pingAt>this.option.congestionTimeout?(this.transmitNetStatus("congestion"),g("pong congestion")):(this.transmitNetStatus("congestionEnd"),g("pong congestionEnd")),this._heartBeat=null)}},{key:"transmitNetStatus",value:function(e){this.netStatus!==e&&(this.emit(e),this.netStatus=e)}},{key:"stopHeartBeat",value:function(){g("stopHeartBeat"),this.pingTimer&&clearTimeout(this.pingTimer)}},{key:"startHeartBeat",value:function(){var e=this;g("startHeartBeat"),this.pingTimer=setTimeout((function(){e.ping()}),1e3)}},{key:"broadcast",value:function(e,t){if(this.socket){var n={action:"broadcast",data:{type:e,body:t,sender:t.user}};g("broadcast",n),this.socket.send(JSON.stringify(n))}}}])&&p(n.prototype,o),i&&p(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(i.a);t.a=S},3875:function(e,t,n){"use strict";n.r(t);n(179);var r=n(60),o=(n(62),n(31)),i=(n(170),n(70)),a=n(0),u=n.n(a),c=n(4),l=n.n(c),s=n(444),f=n.n(s),p=n(6),d=n.n(p),h=n(79),m=n(142),y=n(53),v=n(59),b={wrap:"index-module_wrap_4GDfH",close:"index-module_close_27uFj",icon:"index-module_icon_RfM4L",closeIcon:"index-module_closeIcon_6sSTs"};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.icon,n=e.content,r=e.style,o=e.showClose,i=g(Object(a.useState)(!0),2),c=i[0],l=i[1];return c?u.a.createElement("div",{className:b.wrap,style:r},t&&u.a.createElement("div",{className:b.icon},t),u.a.createElement("div",{className:b.content},n),o&&u.a.createElement("div",{className:b.close,onClick:function(){l(!1)}},u.a.createElement("span",{className:d()("lake-icon","lake-icon-close",b.closeIcon)}))):null};_.propTypes={icon:l.a.node,content:l.a.node.isRequired,style:l.a.object,showClose:l.a.bool};var E=_,O=n(280),S="ReaderAudit-module_closeBtn_hHU+3",x="ReaderAudit-module_detail_mWCgN",j="ReaderAudit-module_toggleDetail_pq7CA",T="ReaderAudit-module_moreLink_oxcCo",C="ReaderAudit-module_tagModeWrapper_xupeI",k="ReaderAudit-module_tagText_Womh9",L="ReaderAudit-module_pending_m3C28",P="ReaderAudit-module_illegal_B8aJ7",A="ReaderAudit-module_banned_sHuxy",R="ReaderAudit-module_isIntranet_WPBjb",N="ReaderAudit-module_tagClose_YIxR7";function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t,n=U(Object(a.useState)(!1),2),c=n[0],l=n[1],s=U(Object(a.useState)(!0),2),p=s[0],b=s[1],g=null===(t=window.appData.settings)||void 0===t?void 0:t.forbid_insecure_content,w=e.doc,_=e.type,O=e.tagMode,I=w.audits,D=w.read_status,B=w.id,G=w.content_updated_at,Y=w.abilities,q=void 0===Y?{}:Y,z=window.appData,V=z.book,W=z.group,H=z.me,K=e.isYuque||window.appData.isYuque;var X="audit_ignored_".concat(_,"_").concat(B);function Z(e){null==e||e.preventDefault(),localStorage.setItem(X,Date.now()),b(!1)}function $(e){var t=e.filter((function(e){return null!==e}));return f()(t)}if(Object(a.useEffect)((function(){if(D===h.READ_STATUS.insecure&&(!H.isAdmin&&!H.isSecurityOperator))if(q.update){if(!g){var e=localStorage.getItem(X);if(e&&G){var t=new Date(G).getTime();b(t>e)}}}else b(!1)}),[]),D<=h.READ_STATUS.ok&&(null==V?void 0:V.status)!==m.STATUS.banned&&(null==W?void 0:W.status)!==y.STATUS.blocked)return null;if(D<=h.READ_STATUS.ok&&((null==V?void 0:V.status)===m.STATUS.banned||(null==W?void 0:W.status)===y.STATUS.blocked))return null!=H&&H.isAdmin&&console.error("ATTENTION: 该文档所在的知识库或者作者被屏蔽, groupBlocked: ".concat((null==W?void 0:W.status)===y.STATUS.blocked,", bookBlocked: ").concat((null==V?void 0:V.status)===m.STATUS.banned)),null;if(null!=W&&W.isPermanentPunished)return null!=H&&H.isAdmin&&D>h.READ_STATUS.ok&&console.error("ATTENTION: 该用户已经被永久屏蔽，此文档也是屏蔽状态"),null;if("Comment"===_&&D<=h.READ_STATUS.ok)return null;if(!p)return null;var J=[];I&&(I.forbidden||I.reason)&&(J=I.forbidden||[I.reason]);var Q,ee={};if(ee[h.READ_STATUS.pending]=__("当前内容正在审核中，其他人暂时无法查看，请稍候。"),ee[h.READ_STATUS.suspect]=__("因内容疑似有违规内容，其他人无法查看，正在审核中，请稍后。"),ee[h.READ_STATUS.illegal]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),ee[h.READ_STATUS.illegal_polity]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),ee[h.READ_STATUS.illegal_ak]=__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),ee[h.READ_STATUS.illegal_privacy]=__("当前文档中包含疑似明文敏感信息（包括不限于身份证号、住址、手机号等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),ee[h.READ_STATUS.banned]=__("内容因含敏感信息已被系统屏蔽处理，其他人无法查看。"),K)Q=ee[D]||ee[h.READ_STATUS.suspect];else{var te=!O&&J.length>0?u.a.createElement("a",{onClick:function(e){e.preventDefault(),l(!c)},className:j},c?"收起详情":"展开详情"):null,ne=u.a.createElement("a",{href:"https://yuque.antfin.com/lark/bqllwz/cg2xev",target:"_blank",className:T},__("了解更多"));Q=g||D!==h.READ_STATUS.insecure?u.a.createElement(u.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），已被系统自动设置为私密，请脱敏或删除明文敏感信息后重新发布。"),ne,te," "):u.a.createElement(u.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),ne,te)}var re=K?{}:{padding:24,paddingRight:32,marginTop:8,position:"relative"},oe=q.update;if(O){if(K){var ie,ae,ue=F(F(F({},h.READ_STATUS.pending,__("审核中")),h.READ_STATUS.illegal,__("该内容涉嫌违规#tag")),h.READ_STATUS.banned,__("该内容已屏蔽#tag"));switch(D){case h.READ_STATUS.pending:case h.READ_STATUS.suspect:ae=h.READ_STATUS.pending;break;case h.READ_STATUS.illegal:case h.READ_STATUS.illegal_polity:case h.READ_STATUS.illegal_ak:case h.READ_STATUS.illegal_privacy:ae=h.READ_STATUS.illegal;break;case h.READ_STATUS.banned:ae=h.READ_STATUS.banned;break;default:ae=null}return(ie=ue[ae])?u.a.createElement(i.a,{title:u.a.createElement("span",{className:k},Q),placement:"bottom"},u.a.createElement("div",{className:d()(C,F(F(F({},L,ae===h.READ_STATUS.pending),P,ae===h.READ_STATUS.illegal),A,ae===h.READ_STATUS.banned))},u.a.createElement("span",{className:k},ie))):null}return u.a.createElement("div",{className:d()(C,R),onClick:function(){o.a.confirm({title:__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag"),content:u.a.createElement(u.a.Fragment,null,Q,J.length>0&&u.a.createElement("ul",{className:x},$(J).map((function(e){return u.a.createElement("li",{key:e},e)})))),okText:__("知道了"),cancelText:__("忽略"),onCancel:function(){Z()}})}},u.a.createElement("span",{className:k},__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag")),oe&&u.a.createElement("div",{className:N,onClick:function(e){e.stopPropagation(),Z()}},u.a.createElement(v.b,{name:"close",width:10,height:10})))}return u.a.createElement(E,{style:M({marginBottom:"Doc"===_?24:0,marginTop:4},re),icon:u.a.createElement(v.b,{name:"doc-has-content-risk",height:17,width:15}),content:u.a.createElement(u.a.Fragment,null,!K&&oe&&u.a.createElement(r.a,{title:__("确认忽略该提醒？"),onConfirm:Z,okText:__("忽略"),cancelText:__("取消"),placement:"bottom"},u.a.createElement("span",{className:S},u.a.createElement(v.b,{name:"close",width:14}))),u.a.createElement("span",{"data-testid":"audit-tip"},Q),c&&u.a.createElement("ul",{className:x},$(J).map((function(e){return u.a.createElement("li",{key:e},e)}))))})}G.defaultProps={isYuque:window.appData.isYuque},G.propTypes={doc:l.a.object.isRequired,type:l.a.string,isYuque:l.a.bool,tagMode:l.a.bool};t.default=Object(O.b)(G)},3917:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(11),o=n(193),i=function(e,t,n){var i=window.appData.note;return i?1===i.public:(e=e||window.appData.group,t=t||window.appData.book,n=n||window.appData.doc,!(!e||!t)&&(n?Object(o.c)({type:"doc",target:n,group:e,book:t}):Object(o.c)({type:"book",target:t,group:e}))===r.PRIVACY.public)},a=function(e,t,n){var r=window.appData.note;return r?!!r.is_public:(e=e||window.appData.share,t=t||window.appData.book,n=n||window.appData.doc,!!(e&&t&&n&&n.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===n.book_id||e.target_id===n.id)))}},3927:function(e,t,n){"use strict";var r=n(227),o=n.n(r),i=n(53);function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c={adaptAbilities:function(e){var t=e.me,n=e.comment,r=e.target_type,o=e.target,i={edit:!1,delete:!1};return t&&t.id===n.user_id?(i.edit=!0,i.delete=!0):"Doc"===r&&(i.delete=o.abilities&&o.abilities.destroy_comment),i},getPostActions:function(e,t){var n=[];return n.push({cmd:"copy_link",title:__("复制链接")}),n.push({cmd:"reply",title:__("评论")}),e.edit&&n.push({cmd:"edit",title:__("编辑")}),e.delete&&n.push({cmd:"delete",title:__("删除"),confirm:!0}),t&&n.push({cmd:"content_report",title:__("举报")}),n},includesHashAnchoredComment:function(e,t){if(!t||!t.startsWith("#comment-"))return!1;var n=parseInt(t.substring(9),10);return!!e.find((function(e){return e.id===n}))},getParticipants:function(e,t,n){var r=n.groupMembers,u=n.targetType,c=[];return"Doc"!==u&&"Resource"!==u||(e.contributors=e.contributors||[],c=a(e.contributors)),t&&t.length>0&&t.forEach((function(e){var t=c.find((function(t){return t&&e.user&&t.id===e.user.id}));e.user&&!t&&c.push(e.user)})),r&&r.length>0&&r.forEach((function(e){c.push(e.user)})),c=o()(c,"login"),window.appData.isYuque&&(c=c&&c.filter((function(e){return e.status!==i.STATUS.terminated}))),c},getAnchorId:function(e,t){return"comment-".concat(e)},TARGET_TYPES:["Doc","DocVersion","Resource","Artboard","Note"]};t.a=c},3967:function(e,t,n){e.exports=n(3978)},3978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),a=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){this.props.useCapture;return this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),r=void 0;if(this.props.useWindow){var o=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:o.scrollTop;r=this.props.isReverse?i:this.calculateOffset(e,i)}else r=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;r<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,r=t.element,o=t.hasMore,a=(t.initialLoad,t.isReverse),u=t.loader,c=(t.loadMore,t.pageStart,t.ref),l=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));l.ref=function(t){e.scrollComponent=t,c&&c(t)};var s=[n];return o&&(u?a?s.unshift(u):s.push(u):this.defaultLoader&&(a?s.unshift(this.defaultLoader):s.push(this.defaultLoader))),i.default.createElement(r,l,s)}}]),t}(o.Component);c.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},c.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=c,e.exports=t.default},3993:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),o=n.n(r),i=n(4),a=n.n(i);function u(e){var t=e.disableLink,n=e.url,r=e.children,i=e.className,a=e.target,u=e.rel,c=e.dataAspmClick,l=e.title,s=e.desktopTarget;return o.a.createElement("a",{href:t?"#":n,className:i,target:a,rel:u,title:l,"data-aspm-click":c,"data-desktoptarget":s||""},r)}u.propTypes={disableLink:a.a.bool,url:a.a.string,children:a.a.arrayOf(a.a.element),className:a.a.string,rel:a.a.string,target:a.a.string,dataAspmClick:a.a.string,title:a.a.string}},4007:function(e,t,n){"use strict";var r,o=[{id:1,title:__("加油")},{id:2,title:__("开心")},{id:3,title:__("很忙")},{id:4,title:__("想哭")},{id:5,title:__("生气")}],i=(r={},o.forEach((function(e){r[e.id]=e})),r),a=[{id:"thumbs_up",title:__("支持"),icon:"https://gw.alipayobjects.com/zos/basement_prod/40dd7f62-e6ad-48c6-b2c1-aeed729ff753.svg"},{id:"thumbs_down",title:__("反对"),icon:"https://gw.alipayobjects.com/zos/basement_prod/49753f89-a52b-47f8-8dff-ca2b7d5ab29e.svg"},{id:"applause",title:__("喝彩"),icon:"https://gw.alipayobjects.com/zos/basement_prod/39b96288-777c-4ad9-8065-fe27ee2366d5.svg"},{id:"momo",title:__("摸摸"),icon:"https://gw.alipayobjects.com/zos/basement_prod/486defba-93e3-4151-8b23-6fb09dfb7f97.svg"},{id:"+1",title:__("+1"),icon:"https://gw.alipayobjects.com/zos/bmw-prod/cd3682d7-3cc9-44a1-87d3-1feb83baee73.svg"},{id:"OK",title:"OK",icon:"https://gw.alipayobjects.com/zos/bmw-prod/70ec25dc-2ad6-42f3-b802-76ba015becde.svg"}],u=function(){var e={};return a.forEach((function(t){e[t.id]=t})),e}(),c={REACTIONS:a,getMoodTitleById:function(e){return(i[e]||{}).title||""},getPostUrl:function(e){var t=window.location.hash||"",n=window.location.href;return n=n.substring(0,n.length-t.length),"".concat(n,"#comment-").concat(e)},classifyReactions:function(e){var t=Object.keys(u),n={};return t.forEach((function(e){n[e]={count:0,user_ids:[]}})),e.forEach((function(e){e.action_option.split(",").forEach((function(t){n[t]&&(n[t].count++,n[t].user_ids.push(e.user_id))}))})),n},getReactionById:function(e){return u[e]}};t.a=c},4022:function(e,t,n){},4057:function(e,t,n){"use strict";n(62);var r=n(31),o=n(0),i=n.n(o),a=n(4),u=n.n(a),c=n(185),l=n.n(c),s=n(524),f=n(4071);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=["children"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){v=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:C(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",h="suspendedYield",m="executing",y="completed",b={};function g(){}function w(){}function _(){}var E={};l(E,a,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(R([])));S&&S!==n&&r.call(S,a)&&(E=S);var x=_.prototype=g.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==p(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=k(u,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?y:h,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(p(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(null,arguments)}function g(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=w(Object(o.useState)(!1),2),n=t[0],a=t[1];function u(){a(!1)}function c(){var t;return t=v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"proxy.web/contentReport.check",payload:{data:{target_id:e.targetId,target_type:e.targetType,token:window.appData.sharePage&&window.appData.share.token}}});case 2:a(!0);case 3:case"end":return t.stop()}}),t)})),c=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){g(i,r,o,a,u,"next",e)}function u(e){g(i,r,o,a,u,"throw",e)}a(void 0)}))},c.apply(this,arguments)}var l=e.children,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,d);return i.a.createElement(i.a.Fragment,null,l({onShowPanel:function(){return c.apply(this,arguments)}}),i.a.createElement(r.a,{destroyOnClose:!0,title:null,footer:null,visible:n,onCancel:u},i.a.createElement(f.default,b({},s,{onClose:u}))))};E.propTypes=m(m({},l()(f.default.propTypes,["targetId","targetType"])),{},{token:u.a.string,children:u.a.func.isRequired}),t.a=Object(s.d)()(E)},4071:function(e,t,n){"use strict";n.r(t);n(43);var r=n(10),o=(n(36),n(8)),i=(n(217),n(49)),a=(n(52),n(12)),u=n(0),c=n.n(u),l=n(4),s=n.n(l),f=n(524),p=n(1260),d=n.n(p),h=n(154),m="ReportForm-module_container_CFFvb",y="ReportForm-module_title_NFreI",v="ReportForm-module_subtitle_iS17z",b="ReportForm-module_reportType_F9Aq+",g="ReportForm-module_reportTypeItem_fcNpj",w="ReportForm-module_btns_P3Kpd",_="ReportForm-module_reportReason_Ll05f",E="ReportForm-module_backBtn_Epa1y";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(){S=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:C(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,a)&&(w=E);var x=g.prototype=v.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==O(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=k(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(O(t)+" is not iterable")}return b.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function x(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function k(e,t,n){return t=P(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function R(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var I=[{name:__("含有广告等引导性内容"),type:"normal",code:h.REPORT_TYPE.ad},{name:__("含有辱骂等不友善内容"),type:"normal",code:h.REPORT_TYPE.abuse},{name:__("含有色情、淫秽内容"),type:"normal",code:h.REPORT_TYPE.vulgar},{name:__("含有反社会、血腥暴力等内容"),type:"normal",code:h.REPORT_TYPE.political},{name:__("“清朗”系列专项举报"),type:"normal",code:h.REPORT_TYPE.clearnet},{name:__("传播不实信息（政治类、财经类、疫情类等）"),type:"normal",code:h.REPORT_TYPE.infact},{name:__("国家企业敏感信息泄露"),type:"normal",code:h.REPORT_TYPE.sensitive},{name:__("其他违法犯罪（如毒品、枪支、违规借贷等）"),type:"normal",code:h.REPORT_TYPE.illegal},{name:__("侵犯知识产权"),type:"tort"}],D=[{name:__("个人侵权"),type:"tort",code:h.REPORT_TYPE.personal_tort},{name:__("企业侵权"),type:"tort",code:h.REPORT_TYPE.enterprise_tort}],M=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return R(e=k(this,t,[].concat(r)),"handleSubmit",(function(t){t.preventDefault();var n=e.props,r=n.onOk;(0,n.form.validateFields)((function(e,t){e||r(t)}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement(i.a,null,c.a.createElement("div",{className:v},__("具体说明")),c.a.createElement(i.a.Item,{required:!1},e("reason",{validateFirst:!0,rules:[{required:!0,max:500,message:__("请输入举报原因（字数不多于500）")}]})(c.a.createElement(a.a.TextArea,{className:_,rows:5,maxLength:500,placeholder:__("举报原因（字数不多于 500）")}))),c.a.createElement("div",{className:w},c.a.createElement(o.a,{block:!0,onClick:this.props.onCancel},__("返回")),c.a.createElement(o.a,{block:!0,type:"primary",htmlType:"submit",onClick:this.handleSubmit},__("提交"))))}}])&&C(n.prototype,r),u&&C(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,u}(c.a.PureComponent);R(M,"propTypes",{onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired,form:s.a.object.isRequired});var F=i.a.create()(M),U=function(e){var t=e.onCancel,n=e.onOk;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:v},window.h5?__("侵权类举报请到 PC 端完成"):__("请选择类型")),!window.h5&&c.a.createElement("ul",{className:b},D.map((function(e,t){return c.a.createElement("li",{key:e.code||t,className:g,onClick:function(){return function(e){n(e)}(e)}},e.name)}))),c.a.createElement(o.a,{block:!0,className:E,onClick:function(){t()}},__("返回")))};U.propTypes={onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};var B=function(e){var t=j(Object(u.useState)(),2),n=t[0],o=t[1];function i(e,t){t.preventDefault(),o(e)}var a=function(t){return function(){var n,o=(n=S().mark((function n(o){var i,a;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=window.appData.sharePage&&window.appData.share.token,"tort"!==t.type){n.next=6;break}return e.onClose(),a=d.a.stringify({report_type:o.code,target_id:e.targetId,target_type:e.targetType,token:i}),window.open("/r/content_reports?".concat(a)),n.abrupt("return");case 6:return n.next=8,e.dispatch({type:"proxy.web/contentReport.create",payload:{data:{report_type:t.code,target_id:e.targetId,target_type:e.targetType,token:i,meta:{reason:o.reason,referer_url:window.location.href}}}});case 8:e.onClose(),r.a.success(__("已收到你的举报，感谢反馈"));case 10:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){x(i,r,o,a,u,"next",e)}function u(e){x(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}()};function l(){o(null)}return n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:y},n.name),"tort"===n.type?c.a.createElement(U,{onOk:a(n),onCancel:l}):c.a.createElement(F,{onOk:a(n),onCancel:l})):c.a.createElement("div",{className:m},c.a.createElement("div",{className:y},__("举报")),c.a.createElement("div",{className:v},__("请选举报原因")),c.a.createElement("ul",{className:b},I.map((function(e,t){return c.a.createElement("li",{key:e.code||t,onClick:i.bind(null,e)},c.a.createElement("div",{className:g},e.name))}))))};B.propTypes={targetId:s.a.number.isRequired,targetType:s.a.oneOf(["Doc"]).isRequired,onClose:s.a.func.isRequired};t.default=Object(f.d)()(B)},4121:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(524),a=n(4),u=n.n(a),c=n(3749),l=n(673),s=n(3638);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function h(e,t,n){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){Object(s.b)()}},{key:"render",value:function(){var e=this.props,t=e.me,n=e.children,r=e.place,i=e.registerWithScene;return!window.appData.isYuque||t&&t.id?n:"comment"===r?o.a.createElement("div",{className:"comment-action"},__("{registerLogin} 语雀进行评论",{registerLogin:o.a.createElement("a",{onClick:function(){l.a.login()},"data-aspm-click":"d65962"},__("注册 / 登录"))})):o.a.createElement("div",{className:"login-action"},o.a.createElement(c.default.Login,{registerWithScene:i}))}}])&&p(n.prototype,r),i&&p(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.Component);b.propTypes={me:u.a.object,place:u.a.string,children:u.a.node,registerWithScene:u.a.bool};t.a=Object(i.d)((function(e){return{me:e.me}}))(b)},4164:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var r=n(0),o=n.n(r),i=n(4),a=n(979),u={bookTips:"index-module_bookTips_cZ25F",groupTips:"index-module_groupTips_znta0",commentTips:"index-module_commentTips_eS4uK"};function c(e){var t=e.targetType,n=o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/zsw0w0",className:"wording-comment-link",target:"_blank",style:{marginLeft:"8px"}},__("了解更多"));switch(t){case"Book":return o.a.createElement("span",{className:u.bookTips,"data-testid":"forbid-tip"},__("注册 7 天后可设置为互联网可见 {learnMoreLink}",{learnMoreLink:n}));case"Group":return o.a.createElement("div",{className:u.groupTips,"data-testid":"forbid-tip"},__("注册 7 天后，即可创建知识小组 {learnMoreLink}",{learnMoreLink:n}));default:return o.a.createElement("span",{className:u.commentTips,"data-testid":"forbid-tip"},__("注册 7 天后即可参与评论 {learnMoreLink}",{learnMoreLink:n}))}}function l(e,t){var n,r=window.appData,o=r.settings,i=void 0===o?{}:o,u=r.organization,c=r.isPublicCloud,l=t||{},s=l.me,f=void 0===s?window.appData.me||{}:s,p=l.group,d=void 0===p?window.appData.group:p,h=u&&u.id;d&&a.a.isGroupOrPublication(d)&&(n=d.abilities&&d.abilities.read_private);var m=e&&e.abilities&&e.abilities.update;return!!(c&&!h&&i.enable_new_user_public_ability_forbid&&f.isNewbie&&!n&&!m)}c.propTypes={targetType:i.PropTypes.string}},4246:function(e,t,n){},4373:function(e,t,n){"use strict";var r=n(0),o=n(55),i=n.n(o),a=n(152);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=new i.a("thread:post.port");t.a=function(e){var t=e.me,n=e.comment,o=e.onReactionUpdate,i=f(Object(r.useState)(n.reactions||[]),2),u=i[0],p=i[1],d=f(Object(r.useState)({}),2),m=d[0],y=d[1],v=f(Object(r.useState)(!1),2),b=v[0],g=v[1],w="Comment";Object(r.useEffect)((function(){p(n.reactions||[])}),[n]);var _=function(){var e=null;return t&&t.id&&(e=u.find((function(e){return e.user_id===t.id})))&&(e.reaction_types=e.action_option.split(",")),e},E=function(e){return a.webProxy.actions.create({target_id:n.id,target_type:w,action_type:"reaction",action_option:e}).then((function(n){h("success",n);var r=u.filter((function(e){return e.user_id!==t.id}));r.push({user_id:t.id,action_type:"reaction",action_option:e}),p(r),o&&o(r,{actionType:"create",userId:t.id,actionOption:e})}))};return{state:{reactions:u,reactionUserMap:m},reaction:function(e){h("reaction",e);var t=e,n=_();if(n){var r=s(n.reaction_types);if(r.includes(e))return Promise.resolve({});r.push(e),t=r.join(",")}return E(t)},cancelReaction:function(e){h("cancel reaction:",e);var r=_();if(!r)return Promise.resolve({});var i=r.reaction_types.filter((function(t){return t!==e}));if(i.length>0){var c=i.join(",");return h("update action_option",i.join(",")),E(c)}return a.webProxy.actions.destroy({target_id:n.id,target_type:w,action_type:"reaction"}).then((function(){var n=u.filter((function(e){return e.user_id!==t.id}));p(n),o&&o(n,{actionType:"delete",userId:t.id,reactionType:e})}))},loadReactionUser:function(e){h("load users for reaction",e),b||(g(!0),a.webProxy.actions.users({target_id:n.id,target_type:w,action_type:"reaction",action_option:"".concat(e),limit:30}).then((function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m);n[e]=t,g(!1),y(n)})))},resetReactionUser:function(e){y({})},getMyReaction:_}}},4374:function(e,t,n){"use strict";n(905);var r=n(542),o=n(0),i=n.n(o),a=n(4),u=n.n(a),c=n(6),l=n.n(c);n(4022);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.reaction,n=e.users,a=e.myReaction,u=s(Object(o.useState)(!1),2),c=u[0],f=u[1];return i.a.createElement(r.a,{className:"post-reaction-detail",overlayClassName:"post-reaction-detail-popover",getPopupContainer:function(e){return e.parentNode},mouseEnterDelay:.618,trigger:["hover"],placement:"bottomLeft",onVisibleChange:function(n){f(n),!1===n?e.reset(t.id):e.loadUsers(t.id)},visible:c,content:i.a.createElement("ul",{className:"post-reaction-users"},n.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement("a",{href:"/".concat(e.login),target:"_blank"},e.name))})))},i.a.createElement("div",{onClick:e.onReactionClick,className:l()({"post-reaction-detail-type":!0,"post-reaction-detail-active":a&&a.reaction_types&&a.reaction_types.includes(t.id)})},i.a.createElement("img",{className:"post-interaction-icon",src:t.icon,height:20}),i.a.createElement("span",{className:"post-interaction-num"},e.total)))}p.defaultProps={onReactionClick:function(){}},p.propTypes={myReaction:u.a.object,users:u.a.array.isRequired,total:u.a.number.isRequired,reaction:u.a.object.isRequired,loadUsers:u.a.func.isRequired,reset:u.a.func.isRequired,onReactionClick:u.a.func},t.a=p},4375:function(e,t,n){"use strict";n(905);var r=n(542),o=n(0),i=n.n(o),a=n(4),u=n.n(a),c=n(4007),l=n(59);n(4022);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=c.a.REACTIONS;function d(e){var t=e.active,n=e.totalReaction,a=e.reactionIcon,u=s(Object(o.useState)(!1),2),c=u[0],f=u[1];return i.a.createElement("div",{className:"post-reaction"},i.a.createElement(r.a,{getPopupContainer:function(e){return e.parentNode},trigger:window.h5?["click"]:["hover"],placement:e.placement,autoAdjustOverflow:!1,visible:c,arrowPointAtCenter:!0,onVisibleChange:function(e){f(e)},content:i.a.createElement("div",null,i.a.createElement("ul",{className:"post-reaction-items"},p.map((function(n){return i.a.createElement("li",{className:t.includes(n.id)?"post-reaction-active":"",key:n.id},i.a.createElement("img",{src:n.icon,onClick:function(){var r;r=n,t.includes(r.id)?e.onCancelReaction(r.id):e.onReaction(r.id),e.onReactionUpdate(r),f(!1)}}))}))))},i.a.createElement("div",null,i.a.createElement("span",{className:"post-reaction-entry"},a||i.a.createElement(l.b,{name:"comment-reaction",width:20,height:20})),n>0&&i.a.createElement("span",{className:"post-interaction-action-total"},n))))}d.defaultProps={onReactionUpdate:function(){}},d.propTypes={active:u.a.array,onReaction:u.a.func.isRequired,onCancelReaction:u.a.func.isRequired,onReactionUpdate:u.a.func,totalReaction:u.a.number,reactionIcon:u.a.element,placement:u.a.string},t.a=d},4602:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));var r=n(237);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}var f={SCROLL:"SCROLL"},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),n=t,r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n.n(r).a),d=new p;function h(){return d}},4605:function(e,t,n){"use strict";var r=n(55),o=n.n(r),i=n(237),a=n.n(i),u=n(3862);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function s(e,t,n){return t=p(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var y=o()("biz.comment_collab"),v={inactive:"inactive",error:"error",usersChange:"usersChange",broadcast:"broadcast",statusChange:"statusChange"},b={COMMENT_CREATE:"create",COMMENT_UPDATE:"update",COMMENT_DELETE:"destroy",BELONG_UPDATE:"belong_update",REACTION_UPDATE:"reaction_update"},g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(n=s(this,t),"conn",void 0),h(n,"collab",void 0),h(n,"options",void 0),h(n,"currentMember",void 0),h(n,"socket",void 0),n.options=e,n.collab=e.collab,n.conn=n.createConnect(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"createConnect",value:function(){var e=this,t=this.collab,n="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);y("connect",n);var r=new u.a(n);return r.on("ready",(function(t){e.socket=t,t.addEventListener("message",(function(t){var n;try{n=JSON.parse(t.data)}catch(e){console.error(e)}if(n&&("ready"===n.action&&(e.currentMember=n.data),"broadcast"===n.action)){var r=n.data,o=r.body,i=r.type;o.user.uuid!==e.currentMember.uuid&&e.emit(v.broadcast,{type:i,body:o})}}))})),r}},{key:"reset",value:function(){this.currentMember=null,this.conn.disconnect()}},{key:"updateReaction",value:function(e,t,n){y("reaction update"),this.conn.broadcast(b.REACTION_UPDATE,{user:this.currentMember,reaction:e,comment:t,reactionAction:n})}},{key:"updateBelong",value:function(e){y("comment create"),this.conn.broadcast(b.BELONG_UPDATE,{user:this.currentMember,belong:e})}},{key:"createComment",value:function(e){y("comment create"),this.conn.broadcast(b.COMMENT_CREATE,{user:this.currentMember,comment:e})}},{key:"updateComment",value:function(e){y("comment update"),this.conn.broadcast(b.COMMENT_UPDATE,{user:this.currentMember,comment:e})}},{key:"destroyComment",value:function(e){y("comment destroy"),this.conn.broadcast(b.COMMENT_DELETE,{user:this.currentMember,comment:e})}}])&&l(n.prototype,r),o&&l(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a);h(g,"EVENT",v),h(g,"MESSAGE",b),t.a=g},4629:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),o=Object(r.createContext)(null)},4671:function(e,t,n){"use strict";n(36);var r=n(8),o=(n(170),n(70)),i=n(0),a=n.n(i),u=n(4),c=n.n(u),l=n(6),s=n.n(l),f=n(55),p=n.n(f),d=n(63),h=n.n(d),m=n(281),y=n(4164),v=n(1490),b=n(3927),g=n(433),w=n(3753);n(4246);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function O(e,t,n){return t=x(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function T(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var k=p()("comment:editor.ui"),L=Object(m.b)((function(){return Promise.all([n.e(5),n.e(6),n.e(0),n.e(1),n.e(1351)]).then(n.bind(null,4098))}),{suspense:!0}),P=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(r=O(this,t,[e]),"focusEditor",(function(){r.editor.focus(!0)})),T(r,"onLoad",(function(){r.onChange()})),T(r,"onChange",(function(){r.setState({hasValue:!r.editor.isEmpty()})})),T(r,"handleSubmit",(function(){r.editor.contentReady().then((function(){if(!r.editor.isEmpty()){var e={format:h.a.FORMAT.LAKE,value:r.editor.getValue(),html:r.editor.getHtml()};k("submit: ",e),r.props.onSubmit(e,(function(){r.reset()}))}}))})),T(r,"renderEditor",(function(){return a.a.createElement(L,{key:"".concat(r.state.editorInstanceId),editor:r.editor,onLoad:r.onLoad,onChange:r.onChange,onSubmit:r.handleSubmit})})),T(r,"renderReplyTo",(function(){var e=r.props,t=e.replyId,n=e.showReply;if(!t||!n)return null;var i,u=(r.props.comments||[]).find((function(e){return e.id===t}));return u?(i=u.user?u.user.name:__("用户已注销"),a.a.createElement("div",{className:"reply-tip"},__("回复")," ",a.a.createElement("a",{href:"#comment-".concat(u.id)},"@",i),a.a.createElement(o.a,{title:__("取消回复")},a.a.createElement("span",{className:"remove-reply",onClick:r.props.cancelReplyTo},a.a.createElement("span",{className:"larkicon larkicon-close"}))))):(k("comment ".concat(t," not exists")),null)})),r.editor=new w.c({disableYuqueCardEmbedView:e.disableYuqueCardEmbedView,belong:e.target,targetType:e.type,attachType:e.type,getDefaultSuggestions:e.getDefaultSuggestions,useMiniGuide:e.useMiniGuide,isMiniSize:e.isMiniSize,placeholder:e.placeholder||" ",replyId:e.replyId||"",showDingMention:!(null===(n=window.appData)||void 0===n||!n.isAntDingtalkUser)}),r.initialDocument=r.editor.getInitialDocument(),k("init use: ",r.initialDocument),r.state={hasValue:!1,editorInstanceId:"reply_main_".concat(e.replyId||"")},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),n=t,(i=[{key:"componentDidUpdate",value:function(e){var t=this.props.replyId;t&&e.replyId!==t&&this.focusEditor(),e.replyId!==t&&this.editor._engine.engine.renderer.updatePlaceholder(this.props.placeholder)}},{key:"reset",value:function(){var e="reply_main_".concat(this.props.replyId||"","_").concat((new Date).getTime());this.editor.reset(),this.initialDocument=w.c.getEmptyDocument(),this.editor.initialDocument=this.initialDocument,this.setState({hasValue:!1,editorInstanceId:e}),k("reset editor, new instance: ".concat(e,", document: "),this.initialDocument)}},{key:"render",value:function(){var e=this.props,t=e.me,n=e.submitting,o=e.showAvatar,i=e.useMiniGuide,u=e.isMiniSize,c=e.group,l=e.reverseReplyButton,f=this.editor.isEditMode,p=s()({"comments-form-wrapper":!0,"edit-mode":f,"no-avatar":!o,"mini-size":u}),d=Object(y.b)(this.props.target,{me:t,group:c}),h=u?24:32;return a.a.createElement(v.a,{tooltipPlacement:"top"},a.a.createElement("div",{className:"comments-form-editor"},o&&a.a.createElement("div",{className:"avatar"},a.a.createElement(g.a,{src:t.avatar_url,size:h,name:t.name})),a.a.createElement("div",{className:p},a.a.createElement("div",{className:"editor-wrapper"},a.a.createElement("div",{className:"editor"},this.renderReplyTo(),this.renderEditor())),l?a.a.createElement("div",{className:"action clearfix",style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},(i||this.props.cancelable)&&a.a.createElement(r.a,{style:{marginRight:6},onClick:this.props.onCancelCreate},__("取消")),n?a.a.createElement(r.a,{disabled:"disabled"},a.a.createElement("span",null,__("提交中..."))):a.a.createElement(r.a,{disabled:this.state.hasValue&&!d?"":"disabled",onClick:this.handleSubmit},f?__("确定"):__("评论")),d&&a.a.createElement(y.a,null)):a.a.createElement("div",{className:"action clearfix"},n?a.a.createElement(r.a,{disabled:"disabled",style:{marginRight:12}},a.a.createElement("span",null,__("提交中..."))):a.a.createElement(r.a,{type:"primary",disabled:this.state.hasValue&&!d?"":"disabled",onClick:this.handleSubmit,style:{marginRight:12}},f?__("确定"):__("回复")),(i||this.props.cancelable)&&a.a.createElement("a",{className:"btn-cancel",onClick:this.props.onCancelCreate},__("取消")),d&&a.a.createElement(y.a,null)))))}}])&&E(n.prototype,i),u&&E(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,u}(i.Component);P.defaultProps={showAvatar:!0,useMiniGuide:!1,cancelable:!1,showReply:!0,reverseReplyButton:!1},P.propTypes={me:c.a.object.isRequired,type:c.a.oneOf(b.a.TARGET_TYPES),group:c.a.object,target:c.a.object.isRequired,targetType:c.a.object,replyId:c.a.number,comments:c.a.array,cancelReplyTo:c.a.func,onSubmit:c.a.func,getDefaultSuggestions:c.a.func,submitting:c.a.bool,showAvatar:c.a.bool,useMiniGuide:c.a.bool,onCancelCreate:c.a.func,isMiniSize:c.a.bool,cancelable:c.a.bool,disableYuqueCardEmbedView:c.a.bool,placeholder:c.a.string,showReply:c.a.bool,reverseReplyButton:c.a.bool},t.a=P},4738:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(3917),a=n(4),u=n.n(a),c=function(e){var t,n=e.type,r=void 0===n?"Doc":n,a=e.target,u=e.style;return r&&a&&window.appData.isYuque?((null===(t=window.appData)||void 0===t?void 0:t.settings)||{}).disable_ip_region_model?null:(Object(i.a)()||Object(i.b)())&&("Doc"!==r||a.first_published_at)&&a.region?o.a.createElement("span",{style:u},__("IP 属地"),a.region||__("未知")):null:null};c.propTypes={target:u.a.object.isRequired,type:u.a.string},t.a=c},4883:function(e,t,n){"use strict";n(36);var r=n(8),o=n(0),i=n.n(o),a=n(4),u=n.n(a),c=n(6),l=n.n(c),s=n(55),f=n.n(s),p=n(63),d=n.n(p),h=n(3753),m=n(281);n(4246);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function b(e,t,n){return t=w(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function E(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var S=Object(m.b)((function(){return Promise.all([n.e(5),n.e(6),n.e(0),n.e(1),n.e(1351)]).then(n.bind(null,4098))}),{suspense:!0}),x=f()("comment:update.editor.ui"),j=function(e){function t(e){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(r=b(this,t,[e]),"onLoad",(function(){r.onChange()})),E(r,"onChange",(function(){r.setState({hasValue:!r.editor.isEmpty()})})),E(r,"handleCancel",(function(){r.reset(),r.props.onCancel()})),E(r,"handleSubmit",(function(){var e=r.props,t=e.comment,n=e.commentMoodChanged;r.editor.contentReady().then((function(){var e={format:d.a.FORMAT.LAKE,value:r.editor.getValue(),html:r.editor.getHtml()};x("on save: ".concat(t.id,", document: "),e),n||r.editor.isContentChanged()?r.props.onSave(t.id,e,(function(){r.handleCancel()})):r.handleCancel()}))})),E(r,"renderEditor",(function(){return i.a.createElement(S,{editor:r.editor,onLoad:r.onLoad,onChange:r.onChange,onSubmit:r.handleSubmit,key:"".concat(r.state.editorInstanceId)})}));var o=e.comment;return r.editor=new h.c({target:o,belong:e.target,attachType:e.type,useBelongAttach:!0,from:"reply",useMiniGuide:e.useMiniGuide,getDefaultSuggestions:e.getDefaultSuggestions,autoFocus:!0,showDingMention:!(null===(n=window.appData)||void 0===n||!n.isAntDingtalkUser)}),r.initialDocument=r.editor.getInitialDocument(),x("init use: ",r.initialDocument),r.state={hasValue:!0,editorInstanceId:"reply_update_".concat(o.id)},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(o=[{key:"reset",value:function(){this.editor.reset()}},{key:"render",value:function(){var e=l()({"comments-form-wrapper":!0,"edit-mode":!0});return i.a.createElement("div",{className:"comments-form-editor"},i.a.createElement("div",{className:e},i.a.createElement("div",{className:"editor-wrapper"},i.a.createElement("div",{className:"editor"},this.renderEditor())),i.a.createElement("div",{className:"action clearfix"},this.state.submitting?i.a.createElement(r.a,{disabled:"disabled",style:{marginRight:12}},i.a.createElement("span",null,__("提交中..."))):i.a.createElement(r.a,{type:"primary",disabled:this.state.hasValue?"":"disabled",onClick:this.handleSubmit,style:{marginRight:12}},i.a.createElement("span",null,__("提交"))),i.a.createElement("a",{className:"btn-cancel",onClick:this.handleCancel},i.a.createElement("span",null,__("取消"))))))}}])&&v(n.prototype,o),a&&v(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(o.Component);j.propTypes={type:u.a.oneOf(["Doc","Resource"]),target:u.a.object.isRequired,comment:u.a.object.isRequired,onSave:u.a.func,onCancel:u.a.func,getDefaultSuggestions:u.a.func,commentMoodChanged:u.a.bool,useMiniGuide:u.a.bool},t.a=j},673:function(e,t,n){"use strict";var r=n(354);t.a=r.a},695:function(e,t){e.exports={isPaid:function(e){var t,n,r=("undefined"==typeof window?{}:window).appData,o=e||r,i=o.group,a=o.organization,u=o.isYuque,c=o.me,l=(e||r).checkSelf;return l=l||/(my\/notes)|(dashboard\/notes)|(desktop\/notes)/.test(null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.pathname),!u||(a?a.isPremium:i?i.isPaid:!(!c||!l)&&c.isPaid)},isPaidCheckAll:function(){var e=("undefined"==typeof window?{}:window).appData,t=e.group,n=e.organization,r=e.isYuque,o=e.me;return!r||(n?n.isPremium:t?t.isPaid:!!o&&o.isPaid)}}},696:function(e,t,n){"use strict";var r=n(1363),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,u,c,l,s=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),u=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),u.selectNodeContents(l),c.addRange(u),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(u):c.removeAllRanges()),l&&document.body.removeChild(l),a()}return s}},7969:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return mn}));n(270);var r=n(135),o=n(657),i=n.n(o),a=n(0),u=n.n(a),c=n(4),l=n.n(c),s=n(55),f=n.n(s),p=n(6),d=n.n(p),h=n(524),m=n(3967),y=n.n(m),v=n(53),b=n(357),g=n.n(b),w=n(48),_=n(3927),E=(n(36),n(8)),O=n(59),S=n(141),x=n(4671),j=n(4121),T={miniGuide:"Editor-module_miniGuide_71Yr9",areaBtn:"Editor-module_areaBtn_aMxhW",active:"Editor-module_active_Nin9i",icon:"Editor-module_icon_tywji",miniGuideLeft:"Editor-module_miniGuideLeft_6qlDi",replyIcon:"Editor-module_replyIcon_YVDPO",text:"Editor-module_text_ayCNj",miniWrapper:"Editor-module_miniWrapper_bgh3f",editorInput:"Editor-module_editorInput_pjxNG"};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(){L=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new A(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==C(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(C(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function P(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=f()("comment:editor"),I=function(e){var t,n,r=e.targetType,o=e.target,i=e.useMiniGuide,c=e.dispatch,l=e.onCancelCreate,s=e.showReply,f="autosave/".concat(r,"_comments/").concat(o.id,"/replyId"),p=u.a.createRef(),d=Object(a.useState)(function(){if(!s)return null;var e=S.a.get(f);return N("cached reply id: ","".concat(f," -> ").concat(e)),e?Number(e):null}()),h=A(d,2),m=h[0],y=h[1],v=A(Object(a.useState)(!!i),2),b=v[0],_=v[1],E=function(){l&&"function"==typeof l?l():_(!b)},O=function(){y(null),S.a.remove(f),e.onCloseReply()},x=A(Object(a.useState)(!1),2),j=x[0],T=x[1];return{state:{submitting:j,replyId:m,showMiniGuide:b},editorRef:p,handleReplyTo:function(e){y(e),i&&b&&E(),S.a.set(f,e)},cancelReply:O,toggleEditor:E,toggleAreaCommenting:function(e){e.stopPropagation(),c&&c({type:"litecomment/toggleAreaCommenting"})},createReply:(t=L().mark((function t(n,a){var u,c,l,s,f,p,d,h;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(!0),u=e.litecomment,l=(c=void 0===u?{}:u).page,s=c.rect,f=e.comments,p={commentable_type:r,commentable_id:o.id,parent_id:m,body_asl:n.value,body:n.html,format:n.format,page:l,rect:s},(l||s)&&(p.type=g.a.TYPE.AREA_COMMENT),m&&((null==(d=f.find((function(e){return e.id===m})))?void 0:d.type)===g.a.TYPE.WORDING_COMMENT&&(p.type=g.a.TYPE.WORDING_COMMENT,p.selection=d.selection),d&&(p.root_id=d.parent_id?d.root_id:d.id,p.to_user_id=d.user_id)),"lake"!==p.format&&(p.body=n.html),t.prev=6,t.next=9,w.a.comments.create(p);case 9:h=t.sent,T(!1),N("reply success: ",h),a&&a(),e.onCreate&&e.onCreate(h),O(),i&&_(!0),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),T(!1);case 21:case"end":return t.stop()}}),t,null,[[6,18]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){P(i,r,o,a,u,"next",e)}function u(e){P(i,r,o,a,u,"throw",e)}a(void 0)}))},function(e,t){return n.apply(this,arguments)})}},D=u.a.forwardRef((function(e,t){var n=I(e),r=n.state,o=r.replyId,i=r.showMiniGuide,c=r.submitting,l=u.a.createRef();Object(a.useImperativeHandle)(t,(function(){return{handleReplyTo:function(e){n.handleReplyTo(e),l&&l.current&&l.current.focusEditor()},cancelReply:n.cancelReply,focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=e.className,f=e.group,p=e.targetType,h=e.target,m=e.comments,y=e.canComment,v=e.useMiniGuide,b=e.isMiniSize,g=e.areaCommenting,w=e.withAreaSelection,_=e.disableYuqueCardEmbedView,S=e.cancelable,C=e.me,L=e.showReply,P=e.placeholder,A=e.commentTipText;if(!y)return null;var R=d()(T.areaBtn,k({},T.active,g));return u.a.createElement("div",{className:d()(s,T.wrapper,k({},T.miniWrapper,b))},u.a.createElement(j.a,{me:C,place:"comment"},i?u.a.createElement("div",{className:T.miniGuide,onClick:n.toggleEditor,"data-testid":"comment-mini-guide"},u.a.createElement("div",{className:T.miniGuideLeft},u.a.createElement(O.b,{name:"comment-reply",className:T.replyIcon}),u.a.createElement("span",{className:T.text},A||__("点击添加评论"))),w&&u.a.createElement(E.a,{onClick:n.toggleAreaCommenting,className:R,"data-testid":"area-selection-button"},u.a.createElement(O.b,{name:"area-comment",size:14,className:T.icon}),__("框选评论"))):u.a.createElement("div",{className:T.editorInput,"data-testid":"comment-editor"},u.a.createElement(x.a,{me:C,group:f,type:p,submitting:c,target:h,replyId:o,cancelReplyTo:n.cancelReply,comments:m,onSubmit:n.createReply,getDefaultSuggestions:e.getDefaultSuggestions,showAvatar:!v,useMiniGuide:v,onCancelCreate:n.toggleEditor,isMiniSize:b,ref:l,cancelable:S,disableYuqueCardEmbedView:_,showReply:L,placeholder:P}))))}));D.defaultProps={me:window.appData.me,onCloseReply:function(){}},D.propTypes={className:l.a.string,group:l.a.object.isRequired,target:l.a.object.isRequired,targetType:l.a.oneOf(_.a.TARGET_TYPES),comments:l.a.array,useMiniGuide:l.a.bool,canComment:l.a.bool,onCreate:l.a.func,cancelable:l.a.bool,onCancelCreate:l.a.func,getDefaultSuggestions:l.a.func,type:l.a.oneOf(["default","timeline"]),isMiniSize:l.a.bool,editorAffixed:l.a.bool,litecomment:l.a.object,withAreaSelection:l.a.bool,dispatch:l.a.func,areaCommenting:l.a.bool,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,showReply:l.a.bool,placeholder:l.a.string,onCloseReply:l.a.func,commentTipText:l.a.string},D.displayName="LiteCommentEditor";var M=D,F=n(1254),U=n(4629),B=n(4605),G=n(1251),Y=n(673),q=n(345),z=n(310),V=n(433),W=n(1493),H=n(4738),K=n(3993),X=n(4602),Z="wordCommentSelection-module_container_LBNIq",$="wordCommentSelection-module_prefixIcon_nL7Bk",J="wordCommentSelection-module_quotation_qfH3Q",Q="wordCommentSelection-module_quotationTip_S-QRh",ee="wordCommentSelection-module_quotationContent_atDX4",te="wordCommentSelection-module_quotationContentMini_5dM90";function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=e.comment,n=e.getViewEngine,r=e.isMiniSize,o=Object(a.useCallback)((function(){var e,r=Object(X.b)(),o=null==t||null===(e=t.selection)||void 0===e?void 0:e.paragraph_id,i=n();i&&o&&i.execCommand("tryUnfold",o),r.emit(X.a.SCROLL,oe(oe({},t.selection),{},{comment_id:t.id}))}),[t,n,X.b]);return t.selection_type===g.a.SELECTION_TYPE.Review?null:u.a.createElement("div",{className:Z},u.a.createElement("span",{className:$}),u.a.createElement("div",{className:J,onClick:o},u.a.createElement("span",{className:d()(ie(ie({},ee,!r),te,r))},u.a.createElement("span",{className:Q},__("引用原文：")),t.selection.text)))}ae.defaultProps={isMiniSize:!1},ae.propTypes={comment:l.a.object.isRequired,getViewEngine:l.a.func.isRequired,isMiniSize:l.a.bool};var ue=ae,ce=n(3917),le=n(4883),se=n(3875),fe=n(281),pe=["children"],de=["children"];function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(null,arguments)}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function be(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ge(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function Ee(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==he(t)?t:t+""}function Oe(){return window.WeakMap?new WeakMap:new(function(){return e=function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r={},(n=Ee(n="_map"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r},(t=[{key:"has",value:function(e){return!!this._map[e]}},{key:"delete",value:function(e){this._map[e]=void 0,delete this._map[e]}},{key:"get",value:function(e){return this._map[e]}}])&&_e(e.prototype,t),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())}var Se=Oe(),xe=Oe(),je=window.IntersectionObserver?new IntersectionObserver((function(e){var t,n=be(e);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;if(Se.has(o.target))null===(r=Se.get(o.target))||void 0===r||r(o.intersectionRatio,o.intersectionRect.height)}}catch(e){n.e(e)}finally{n.f()}}),{rootMargin:"100%",threshold:[0,.1,1]}):null,Te=window.ResizeObserver?new window.ResizeObserver((function(e){var t,n=be(e);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;if(xe.has(o.target))null===(r=xe.get(o.target))||void 0===r||r(o.contentRect)}}catch(e){n.e(e)}finally{n.f()}})):null;function Ce(e){var t=e.children,n=ve(e,pe);return u.a.createElement("div",n,t)}Ce.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var ke=window.DELAY_COMMENTS_DEFAULT_HEIGHT||400;function Le(){var e=ye(Object(a.useState)(null),2),t=e[0],n=e[1],r=Object(a.useCallback)((function(e){e!==t&&n(e)}),[t]);return{current:t,setRef:r}}function Pe(e){var t=e.children,n=ve(e,de),r=Le(),o=Le(),i=ye(Object(a.useState)(!0),2),c=i[0],l=i[1],s=ye(Object(a.useState)(0),2),f=s[0],p=s[1],d=ye(Object(a.useState)(ke),2),h=d[0],m=d[1];return Object(a.useEffect)((function(){if(r.current){var e=r.current;return Se.set(e,(function(e){e>0&&c&&l(!1),p(e)})),je.observe(e),function(){Se.delete(e),je.unobserve(e)}}}),[r,c,p]),Object(a.useEffect)((function(){if(o.current){var e=o.current;return xe.set(e,(function(e){0!==e.height&&m(e.height)})),Te.observe(e),function(){xe.delete(e),Te.unobserve(e)}}}),[o,m]),u.a.createElement("div",me({ref:r.setRef},n,{style:{minHeight:h}}),c?null:u.a.createElement("div",{style:{display:f>0?"block":"none"},ref:o.setRef},t))}Pe.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var Ae=function(e){return je&&e.enableDelay?u.a.createElement(Pe,e):u.a.createElement(Ce,e)};Ae.propTypes={children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]).isRequired};var Re=Ae,Ne=Object(fe.b)((function(){return Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1357)]).then(n.bind(null,2953))}),{suspense:!0});function Ie(e){var t=e.comment,n=e.group,r=e.target,o=e.commentableType,i=e.onClick,a=e.mode,c=e.onCancelEdit,l=e.onSave,s=e.getDefaultSuggestions,f=e.useMiniGuide,p=e.disableYuqueCardEmbedView,d=e.enableDelay,h={read_status:-1===t.status?99:0,id:t.id};if("edit"===a)return u.a.createElement("div",{style:{marginBottom:16}},u.a.createElement(le.a,{type:o,group:n,comment:t,target:r,onCancel:c,onSave:l,getDefaultSuggestions:s,useMiniGuide:f}));var m=Object(ce.a)()||Object(ce.b)();return u.a.createElement(u.a.Fragment,null,u.a.createElement(Re,{className:"content-detail",onClick:function(){return i(t)},enableDelay:d},m&&u.a.createElement("div",{style:{marginBottom:6}},u.a.createElement(se.default,{key:"audits",doc:h,type:"Comment"})),u.a.createElement(Ne,{id:t.id,key:"reply-".concat(t.id),genOutline:!1,genAnchor:!1,content:t.body_asl,disableYuqueCardEmbedView:p,simpleUI:!0,imageLazyLoad:!0})))}function De(){}Ie.defaultProps={onCancelEdit:De,onSave:De,onClick:De},Ie.propTypes={comment:l.a.object.isRequired,group:l.a.object.isRequired,target:l.a.object.isRequired,getDefaultSuggestions:l.a.func.isRequired,commentableType:l.a.oneOf(_.a.TARGET_TYPES),mode:l.a.oneOf(["edit","view"]),useMiniGuide:l.a.bool,disableYuqueCardEmbedView:l.a.bool,onCancelEdit:l.a.func,onSave:l.a.func,onClick:l.a.func};var Me=Ie,Fe=n(4007),Ue=n(4374),Be=n(1490),Ge=Fe.a.REACTIONS;function Ye(e){var t=e.comment,n=e.onReactionUpdate,r=e.reactionMap,o=e.reactions,i=e.myReaction,a=e.reactionViewModel,c=e.reactionUserMap;return o.length>0?u.a.createElement("div",{className:"post-interaction",style:{marginTop:12}},u.a.createElement("div",{className:"post-interaction-reaction-summary"},u.a.createElement("ul",null,Ge.map((function(e){var o=r[e.id].count;return 0===o?null:u.a.createElement(Be.a,null,u.a.createElement("li",{key:e.id},u.a.createElement(Ue.a,{myReaction:i,reaction:e,users:c[e.id]||[],total:o,loadUsers:function(){a.loadReactionUser(e.id)},reset:function(){a.resetReactionUser(e.id)},onReactionClick:function(){var r;(null!=i&&null!==(r=i.action_option)&&void 0!==r&&r.includes(e.id)?a.cancelReaction(e.id):a.reaction(e.id)).then((function(){a.loadReactionUser(e.id),n(e,t)}))}})))}))))):null}Ye.defaultProps={onReactionUpdate:function(){}},Ye.propTypes={comment:l.a.object.isRequired,onReactionUpdate:l.a.func,reactionMap:l.a.object.isRequired,reactions:l.a.array.isRequired,myReaction:l.a.object,reactionViewModel:l.a.object.isRequired,reactionUserMap:l.a.object.isRequired};var qe=Ye,ze=(n(905),n(542)),Ve=(n(543),n(104)),We=(n(179),n(60)),He=n(4057),Ke=n(4375),Xe={container:"commentActions-module_container_Pd8UE",actionsHiddenArea:"commentActions-module_actionsHiddenArea_rwxN3",offlineItem:"commentActions-module_offlineItem_liJrK",actionItem:"commentActions-module_actionItem_IYkZw",actionItemWithoutMargin:"commentActions-module_actionItemWithoutMargin_UTjq4"},Ze="commentFloorListItem-module_commentFloorListItem_hEa7c",$e="commentFloorListItem-module_listItemWrapper_WP5Au",Je="commentFloorListItem-module_hashActive_QOVC4",Qe="commentFloorListItem-module_isSelected_KRAD2",et="commentFloorListItem-module_isMiniSize_LwzVw",tt="commentFloorListItem-module_avatar_MHjSF",nt="commentFloorListItem-module_commentOrder_Iuwe4",rt="commentFloorListItem-module_main_gfOyp",ot="commentFloorListItem-module_commentMain_sXNkM",it="commentFloorListItem-module_actionsHiddenArea_sIy27",at="commentFloorListItem-module_head_HFLrS",ut="commentFloorListItem-module_name_pqKOI",ct="commentFloorListItem-module_miniName_SV4Rr",lt="commentFloorListItem-module_toUserName_ODbN0",st="commentFloorListItem-module_miniToUserName_tSChh",ft="commentFloorListItem-module_arrowRight_KtPw0",pt="commentFloorListItem-module_time_juhkg",dt="commentFloorListItem-module_commentIpRegion_jl233",ht="commentFloorListItem-module_wordCommentSelectionWrapper_7T0sG",mt="commentFloorListItem-module_content_Zn013",yt="commentFloorListItem-module_replyEditor_PeaGC",vt="commentFloorListItem-module_deleted_2GyFb",bt="commentFloorListItem-module_rootCommentFloorListItem_KZW6g";function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function wt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=gt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){var t=e.comment,n=e.me,r=e.isMobile,o=e.canComment,i=e.canEdit,a=e.canReport,c=e.canDelete,l=e.onRemove,s=e.onEdit,f=e.onReplyTo,p=e.onCopyCommentLink,h=e.reactionViewModel,m=e.myReaction,y=e.onReactionUpdate;return n&&n.id?u.a.createElement("div",{className:Xe.container},o&&u.a.createElement(Be.a,{buttonClassName:Xe.offlineItem},u.a.createElement("span",{className:Xe.actionItem},u.a.createElement(O.b,{name:"comment-bubble",color:"#8C8C8C",width:16,height:16,onClick:f}))),o&&u.a.createElement(Be.a,null,u.a.createElement(Ke.a,{placement:r?"topLeft":void 0,reactionIcon:u.a.createElement("span",{className:Xe.actionItemWithoutMargin},u.a.createElement(O.b,{className:Xe.action,name:"comment-reaction",color:"#8C8C8C",width:16,height:16})),active:(null==m?void 0:m.reaction_types)||[],onReaction:h.reaction,onCancelReaction:h.cancelReaction,onReactionUpdate:function(e){return y(e,t)}})),u.a.createElement("div",{className:d()(Xe.actionsHiddenArea,wt({},it,!r))},i&&u.a.createElement(Be.a,{buttonClassName:Xe.offlineItem},u.a.createElement("span",{className:Xe.actionItem},u.a.createElement(O.b,{className:Xe.action,name:"edit-border",width:16,height:16,color:"#8C8C8C",onClick:s}))),c&&u.a.createElement(Be.a,{buttonClassName:Xe.offlineItem},u.a.createElement(We.a,{title:__("确认删除该评论么？"),onConfirm:l},u.a.createElement("span",{className:Xe.actionItem},u.a.createElement(O.b,{className:Xe.action,name:"icon-delete",color:"#8C8C8C",width:16,height:16})))),u.a.createElement(ze.a,{type:"menu",getPopupContainer:function(e){return e.parentNode},placement:"bottomRight",arrowPointAtCenter:!0,trigger:r?"click":"hover",content:u.a.createElement(Ve.a,null,u.a.createElement(Ve.a.Item,{key:"copy"},u.a.createElement("span",{onClick:p},__("复制评论链接"))),a&&u.a.createElement(Be.a,null,u.a.createElement(Ve.a.Item,{key:"report"},u.a.createElement(He.a,{targetId:t.id,targetType:"Comment"},(function(e){return u.a.createElement("span",{className:"action-link",onClick:e.onShowPanel},__("举报"))}))))),hideWhenInactive:!0},u.a.createElement("span",{className:Xe.actionItem},u.a.createElement(O.b,{className:Xe.action,name:"comment-more",color:"#8C8C8C",width:16,height:16}))))):null}_t.defaultProps={isMobile:!1},_t.propTypes={comment:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,canEdit:l.a.bool,canReport:l.a.bool,canDelete:l.a.bool,onRemove:l.a.func.isRequired,onEdit:l.a.func.isRequired,onReplyTo:l.a.func.isRequired,onCopyCommentLink:l.a.func,onReactionUpdate:l.a.func,reactionViewModel:l.a.object,myReaction:l.a.object,isMobile:l.a.bool};var Et=_t;function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function St(){St=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ot(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ot(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function xt(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ct=f()("comment:editor"),kt=function(e){var t,n=e.commentableType,r=e.target,o=e.dispatch,i=e.rootId,c=e.replyToComment,l=e.litecomment,s=void 0===l?{}:l,f=e.onCancelReply,p=e.onCreate,d=u.a.createRef(),h=jt(Object(a.useState)(!1),2),m=h[0],y=h[1];t=c.user?c.user.name:__("用户已注销");var v,b;return{state:{submitting:m,replyId:c.id,placeholder:__("回复 {user}",{user:t})},editorRef:d,handleCancelReply:function(){f()},toggleAreaCommenting:function(e){e.stopPropagation(),o&&o({type:"litecomment/toggleAreaCommenting"})},createReply:(v=St().mark((function e(t,o){var a,u,l,d;return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),a=s.page,u=s.rect,l={commentable_type:n,commentable_id:r.id,parent_id:c.id,to_user_id:c.user_id,body_asl:t.value,body:t.html,format:t.format,page:a,rect:u},(a||u)&&(l.type=g.a.TYPE.AREA_COMMENT),c&&(c.type===g.a.TYPE.WORDING_COMMENT&&(l.type=g.a.TYPE.WORDING_COMMENT,l.selection=c.selection),l.root_id=i),"lake"!==l.format&&(l.body=t.html),e.prev=6,e.next=9,w.a.comments.create(l);case 9:(d=e.sent).to_user=c.user,y(!1),Ct("reply success: ",d),o&&o(),p&&p(d),f(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),y(!1);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})),b=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=v.apply(e,t);function i(e){xt(o,n,r,i,a,"next",e)}function a(e){xt(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e,t){return b.apply(this,arguments)})}},Lt=u.a.forwardRef((function(e,t){var n=kt(e),r=n.state,o=r.replyId,i=r.submitting,c=r.placeholder,l=u.a.createRef();Object(a.useImperativeHandle)(t,(function(){return{focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=e.group,f=e.canComment,p=e.isMiniSize,d=e.disableYuqueCardEmbedView,h=e.cancelable,m=e.me,y=e.comments,v=e.useMiniGuide,b=e.replyToComment,g=e.commentableType,w=e.target,_=e.reverseReplyButton;return f?u.a.createElement(j.a,{me:m,place:"comment"},u.a.createElement(x.a,{ref:l,placeholder:c,me:m,group:s,type:g,submitting:i,target:w,replyId:o,replyToComment:b,showReply:!1,cancelReplyTo:n.cancelReply,comments:y,onSubmit:n.createReply,getDefaultSuggestions:e.getDefaultSuggestions,showAvatar:!1,useMiniGuide:v,onCancelCreate:n.handleCancelReply,isMiniSize:p,cancelable:h,disableYuqueCardEmbedView:d,reverseReplyButton:_})):null}));Lt.defaultProps={me:window.appData.me,onCancelReply:function(){}},Lt.propTypes={group:l.a.object.isRequired,target:l.a.object.isRequired,commentableType:l.a.oneOf(_.a.TARGET_TYPES),comments:l.a.array,canComment:l.a.bool,cancelable:l.a.bool,getDefaultSuggestions:l.a.func,isMiniSize:l.a.bool,useMiniGuide:l.a.bool,litecomment:l.a.object,dispatch:l.a.func,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,rootId:l.a.number,replyToComment:l.a.object,onCancelReply:l.a.func,onCreate:l.a.func,reverseReplyButton:l.a.bool},Lt.displayName="CommentReplyEditor";var Pt=Lt,At=(n(43),n(10)),Rt=n(696),Nt=n.n(Rt),It=n(4373);function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Mt(){Mt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Dt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Dt(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ft(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ut(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ft(i,r,o,a,u,"next",e)}function u(e){Ft(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Vt=function(e){var t,n,r,o,i,u=e.isRootComment,c=e.comment,l=e.commentableType,s=e.me,f=e.target,p=e.dispatch,d=e.onRemoveComment,h=e.onUpdateComment,m=e.canComment,y=e.onCreateComment,v=e.isMobile,E=e.onReplyToComment,O=Object(a.useContext)(U.a),S=qt(Object(a.useState)("view"),2),x=S[0],j=S[1],T=Object(a.useRef)(null),C=qt(Object(a.useState)(!1),2),k=C[0],L=C[1],P=!window.h5&&c.meta&&c.meta.ip,A=!u&&c.parent_id&&c.parent_id!==c.root_id,R=_.a.getAnchorId(c.id),N=u&&c.type===g.a.TYPE.WORDING_COMMENT,I=!!c.deleted_at,D=Object(It.a)({me:s,comment:c,onReactionUpdate:function(e,t){var n=Gt(Gt({},c),{},{reactions:e});p({type:"litecomment/updateOne",payload:n}),null==O||O.updateReaction(null,n,t)}}),M=D.state,F=M.reactions,B=M.reactionUserMap,G=Object(a.useMemo)((function(){var e={reactionMap:Fe.a.classifyReactions(F),myReaction:D.getMyReaction(),totalReaction:0};return Object.keys(e.reactionMap).forEach((function(t){e.totalReaction+=e.reactionMap[t].count})),e}),[F]),Y=G.reactionMap,q=G.myReaction;return{state:{showReplyToUser:A,anchor:R,wordingCommentVisible:N,contentEditorMode:x,isDeleted:I,reactionMap:Y,myReaction:q,reactions:F,reactionUserMap:B,replyEditorVisible:k,metaInfoVisible:P},reactionViewModel:D,editorRef:T,handleEdit:function(){j("edit")},handleCancelEdit:function(){j("view")},handleEditorSave:(i=Ut(Mt().mark((function e(t,n,r){var o,i;return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:t,format:n.format,body_asl:n.value,body:n.html},e.next=3,w.a.comments.update(o);case 3:(i=e.sent).to_user=c.to_user,i.reactions=c.reactions,i.sub_comments=c.sub_comments,r&&r(),h(i),p({type:"litecomment/updateOne",payload:i}),null==O||O.updateComment(i);case 11:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)}),handleCommentContentClick:function(){"Resource"===l&&p({type:"litecomment/updateCurrentCommentId",payload:c.id})},canComment:function(){return!I&&m},canEdit:function(){return!I&&(s&&s.id===c.user_id)},canReport:function(){if(I)return!1;if(!window.appData.isPublicCloud)return!1;var e=Object(ce.a)()||Object(ce.b)();return c.status===b.STATUS.normal&&e&&s&&s.id!==c.user_id},canDelete:function(){var e;return!I&&(!!s&&(s.id===c.user_id||!("Doc"!==l||null===(e=f.abilities)||void 0===e||!e.destroy_comment)))},handleReplyToComment:(o=Ut(Mt().mark((function e(){return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v?E(c):(L(!0),setTimeout((function(){var e;null===(e=T.current)||void 0===e||e.focusEditor()}),200));case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),handleCreateComment:(r=Ut(Mt().mark((function e(t){return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.to_user=c.user,p({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==O||O.createComment(t),y(t);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),handleCancelReply:(n=Ut(Mt().mark((function e(){return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!1);case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),handleRemoveComment:(t=Ut(Mt().mark((function e(){var t;return Mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={id:c.id},w.a.comments.destroy(t).then((function(){p({type:"litecomment/remove",payload:t}),At.a.success(__("操作成功"),3),d(t),null==O||O.destroyComment(c)}));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),handleReactionUpdate:function(){},handleCopyCommentLink:function(){var e=Fe.a.getPostUrl(c.id);Nt()(e),At.a.success(__("评论链接复制成功"))}}};function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){var t=e.comment,n=e.flattenFloorComments,r=e.isRootComment,o=e.commentableType,i=e.getViewEngine,a=e.target,c=e.useMiniGuide,l=e.getDefaultSuggestions,s=e.disableYuqueCardEmbedView,f=e.group,p=e.me,h=e.canComment,m=e.dispatch,y=e.onUpdateComment,b=(e.editorAffixed,e.isMobile),g=e.isMiniSize,w=(e.areaCommenting,e.cancelable,e.onCancelCreate,e.litecomment),_=e.urlHash,E=e.currentCommentId,S=e.onCreateComment,x=e.onEditComment,j=e.onRemoveComment,T=e.onReplyToComment,C=e.reverseReplyButton,k=e.enableDelay,L=t.user,P=t.to_user,A=Vt({isRootComment:r,comment:t,commentableType:o,me:p,target:a,onRemoveComment:j,onEditComment:x,dispatch:m,onUpdateComment:y,canComment:h,onCreateComment:S,onReplyToComment:T,isMobile:b}),R=A.state,N=R.showReplyToUser,I=R.anchor,D=R.wordingCommentVisible,M=R.contentEditorMode,F=R.replyEditorVisible,U=R.isDeleted,B=R.reactionMap,G=R.myReaction,Y=R.reactions,X=R.reactionUserMap,Z=A.reactionViewModel,$=A.editorRef,J=r?t.id:t.root_id,Q=_==="#".concat(I),ee=E===t.id,te=g?24:32,ne={paddingLeft:te+12};return u.a.createElement("div",{id:I,className:d()(Ze,Ht({},bt,r)),style:r?null:ne},u.a.createElement("div",{className:d()($e,Ht(Ht(Ht({},Je,Q),Qe,ee),et,g))},L?u.a.createElement("div",{className:tt},u.a.createElement(K.a,{url:"/".concat(L.login),desktopTarget:"_browser"},u.a.createElement(u.a.Fragment,null,u.a.createElement(W.a,{user:L},u.a.createElement(V.a,{src:L.avatar_url,size:te,name:L.name})),t.order&&u.a.createElement("span",{className:nt},t.order)))):u.a.createElement("div",{className:tt},u.a.createElement(V.a,{src:q.avatar.user,size:te,name:__("用户已注销")}),t.order&&u.a.createElement("span",{className:nt},t.order)),u.a.createElement("div",{className:rt},u.a.createElement("div",{className:ot},u.a.createElement("div",{className:at},L?u.a.createElement(K.a,{url:"/".concat(L.login),className:d()(ut,Ht({},ct,g))},u.a.createElement(u.a.Fragment,null,L.name,(null==p?void 0:p.isAdmin)&&[v.STATUS.banned,v.STATUS.blocked].includes(L.status)&&u.a.createElement("span",{className:"book-name-scope"},u.a.createElement(O.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375,marginLeft:4}})))):u.a.createElement("a",{className:ut},__("用户已注销")),N&&(P?u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:ft}),g?u.a.createElement(K.a,{url:"/".concat(P.login),className:d()(lt,st)},P.name):u.a.createElement(W.a,{user:P},u.a.createElement(K.a,{url:"/".concat(P.login),className:lt},P.name))):u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:ft}),u.a.createElement("a",{className:lt},__("用户已注销")))),!g&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{href:"#".concat(I),className:pt},u.a.createElement(z.a,{time:t.created_at})),u.a.createElement("span",{className:dt},u.a.createElement(H.a,{target:t,type:"Comment"})))),g&&u.a.createElement("div",null,u.a.createElement("a",{href:"#".concat(I),className:pt},u.a.createElement(z.a,{time:t.created_at})),u.a.createElement("span",{className:dt},u.a.createElement(H.a,{target:t,type:"Comment"}))),D&&u.a.createElement("div",{className:ht},u.a.createElement(ue,{isMiniSize:g,comment:t,getViewEngine:i})),U?u.a.createElement("div",{className:mt},u.a.createElement("div",{className:vt},__("该评论已删除"))):u.a.createElement("div",{className:mt},u.a.createElement(Me,{comment:t,group:f,target:a,getDefaultSuggestions:l,commentableType:o,mode:M,useMiniGuide:c,disableYuqueCardEmbedView:s,onCancelEdit:A.handleCancelEdit,onSave:A.handleEditorSave,onClick:A.handleCommentContentClick,enableDelay:k})),!U&&u.a.createElement(qe,{comment:t,onReactionUpdate:A.handleReactionUpdate,reactionViewModel:Z,myReaction:G,reactionMap:B,reactions:Y,reactionUserMap:X}),!U&&u.a.createElement(Et,{isMobile:b,comment:t,me:p,canComment:A.canComment(),canEdit:A.canEdit(),canReport:A.canReport(),canDelete:A.canDelete(),onReplyTo:A.handleReplyToComment,onEdit:A.handleEdit,onRemove:A.handleRemoveComment,onCopyCommentLink:A.handleCopyCommentLink,reactionViewModel:Z,reactionMap:B,myReaction:G,reactions:Y,reactionUserMap:X,onReactionUpdate:A.handleReactionUpdate}),F&&u.a.createElement("div",{className:yt},u.a.createElement(Pt,{ref:$,rootId:J,replyToComment:t,group:f,me:p,target:a,commentableType:o,litecomment:w,comments:n,cancelable:!0,isMiniSize:g,disableYuqueCardEmbedView:s,getDefaultSuggestions:l,dispatch:m,canComment:h,onCancelReply:A.handleCancelReply,onCreate:A.handleCreateComment,reverseReplyButton:C}))))))}Kt.defaultProps={canComment:!0,onEditComment:function(){},onRemoveComment:function(){},onCreateComment:function(){},getViewEngine:function(){}},Kt.propTypes={comment:l.a.object.isRequired,flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,isRootComment:l.a.bool,commentableType:l.a.oneOf(_.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object.isRequired,canComment:l.a.bool,onEditComment:l.a.func,onCreateComment:l.a.func,onRemoveComment:l.a.func,onUpdateComment:l.a.func,dispatch:l.a.func,editorAffixed:l.a.bool,isMobile:l.a.bool,isMiniSize:l.a.bool,areaCommenting:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,litecomment:l.a.object,urlHash:l.a.string,currentCommentId:l.a.number,onReplyToComment:l.a.func.isRequired};var Xt=Kt,Zt={default:"index-module_default_FTDOK",commentEditor:"index-module_commentEditor_yI7Ow",mini:"index-module_mini_6PdDj",emptyView:"index-module_emptyView_t1FqB",miniEditor:"index-module_miniEditor_CRXwG",editorMobile:"index-module_editorMobile_0VdOM",miniFloorList:"index-module_miniFloorList_+ysrM"};function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Jt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$t(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tn(e){var t=e.flattenFloorComments,n=e.commentableType,r=e.getViewEngine,o=e.target,i=e.useMiniGuide,c=e.getDefaultSuggestions,l=e.disableYuqueCardEmbedView,s=e.group,f=e.me,p=e.canComment,h=e.onReplyToComment,m=e.onEditComment,y=e.onCreateComment,v=e.onRemoveComment,b=e.onUpdateComment,g=e.dispatch,w=e.litecomment,_=e.isMiniSize,E=e.currentCommentId,O=e.isMobile,S=e.reverseReplyButton,x="";try{x=decodeURIComponent(window.location.hash)}catch(e){}var j=Qt(Object(a.useState)(x),2),T=j[0],C=j[1];Object(a.useEffect)((function(){var e=function(){try{C(decodeURIComponent(window.location.hash)),Y.a.scrollToHash({top:60})}catch(e){}};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]);var k=t.length;return u.a.createElement("div",{className:d()(Jt({},Zt.miniFloorList,_))},t.map((function(e){return u.a.createElement(Xt,{key:e.id,enableDelay:k>100,flattenFloorComments:t,isRootComment:!e.parent_id,comment:e,commentableType:n,getViewEngine:r,target:o,useMiniGuide:i,getDefaultSuggestions:c,disableYuqueCardEmbedView:l,group:s,me:f,canComment:p,dispatch:g,onReplyToComment:h,onCreateComment:y,onEditComment:m,onRemoveComment:v,onUpdateComment:b,litecomment:w,isMiniSize:_,urlHash:T,currentCommentId:E,isMobile:O,reverseReplyButton:S})})))}tn.defaultProps={onReplyToComment:function(){},onEditComment:function(){},onCreateComment:function(){},onRemoveComment:function(){},onUpdateComment:function(){},getViewEngine:function(){}},tn.propTypes={flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,commentableType:l.a.oneOf(_.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,dispatch:l.a.func,onReplyToComment:l.a.func,onEditComment:l.a.func,onRemoveComment:l.a.func,onCreateComment:l.a.func,onUpdateComment:l.a.func,litecomment:l.a.object,isMiniSize:l.a.bool,currentCommentId:l.a.number,isMobile:l.a.bool,reverseReplyButton:l.a.bool};var nn=tn;function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(){cn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==rn(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=T(u,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(rn(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ln(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function sn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ln(i,r,o,a,u,"next",e)}function u(e){ln(i,r,o,a,u,"throw",e)}a(void 0)}))}}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var dn=f()("commnent_floor");function hn(e){var t=e.commentableType,n=e.target,r=e.group,o=e.me,u=e.litecomment.comments,c=e.canMentionMembers,l=e.dispatch,s=e.isMobile,f=fn(Object(a.useState)(!1),2),p=f[0],d=f[1],m=fn(Object(a.useState)(!1),2),y=m[0],g=m[1],E=fn(Object(a.useState)(0),2),O=E[0],S=E[1],x=fn(Object(a.useState)(""),2),j=x[0],T=x[1],C=fn(Object(a.useState)(null),2),k=C[0],L=C[1],P=Object(h.f)((function(e){return{comments:e.litecomment.comments}})),A=Object(a.useRef)([]),R=Object(a.useContext)(U.a),N=function(){var e=document.querySelector("#scroll-to-comment");if(e){e.scrollIntoView();var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,t-40)}},I=function(){var e=sn(cn().mark((function e(){var i,a,u,s,f;return cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t;return b.TYPE.THIRD_WORDING_COMMENT!==e.type&&("Review"===e.selection_type?!(![b.TYPE.REVIEW_APPROVAL,b.TYPE.REVIEW_REJECTION,b.TYPE.REVIEW_OPINION].includes(e.type)||!e.body)&&(e.body_asl=e.body,!0):!!((null==o?void 0:o.id)===e.user_id||null!=o&&o.isAdmin)||![v.STATUS.banned,v.STATUS.blocked].includes(null==e||null===(t=e.user)||void 0===t?void 0:t.status))},i={commentable_type:t,commentable_id:n.id,include_section:!0,include_to_user:!0,include_reactions:!0},y||d(!0),e.next=5,w.a.comments.floorComments(i,{useOriginResp:!0,ignoreGlobalMessage:!0});case 5:a=e.sent,u=(u=a.data.comments).filter((function(e){return e.sub_comments=(e.sub_comments||[]).filter(s),s(e)})),f=u.reduce((function(e,t){var n;return e++,null===(n=t.sub_comments)||void 0===n||n.forEach((function(t){e++})),e}),0),0===P.comments.length&&0===u.length||l({type:"litecomment/updateModel",payload:{comments:u,commentCount:f}}),d(!1),g(!0),c&&(r.members.length>0||(dn("load members"),l({type:"group/getMembers",payload:{data:{group_id:r.id,with_invited:!1}}})));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(a.useMemo)((function(){var e=null==u?void 0:u.filter((function(e){var t;return e.comment_area&&(null===(t=e.comment_area)||void 0===t?void 0:t.rect)}));return e?(e.forEach((function(e,t){e.order=t+1})),u.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)}))):u}),[u]),M=Object(a.useMemo)((function(){var e=D.reduce((function(e,t){var n;return e.push(t),null===(n=t.sub_comments)||void 0===n||n.forEach((function(t){e.push(t)})),e}),[]);return A.current=e,e}),[D]),F=function(){var t=i()(M,e.pageSize).length;S(t)};return Object(G.a)((function(){function e(){return(e=sn(cn().mark((function e(){return cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),d(!1);case 8:null==R||R.on("broadcast",(function(e){var t=e.type,n=e.body;if(t===B.a.MESSAGE.REACTION_UPDATE){var r=n.reactionAction,o=r.actionType,i=r.userId,a=r.actionOption,u=n.comment,c=M.find((function(e){return e.id===u.id}));if(c){var s=c.reactions||[],f=s;"create"===o?(f=s.filter((function(e){return e.user_id!==i}))).push({user_id:i,action_type:"reaction",action_option:a}):"delete"===o&&(f=s.filter((function(e){return e.user_id!==i}))),l({type:"litecomment/updateOne",payload:an(an({},c),{},{reactions:f})})}}else if(t===B.a.MESSAGE.COMMENT_CREATE){if(A.current.find((function(e){return e.id===n.comment.id})))return;l({type:"litecomment/create",payload:{data:n.comment,commentListStyle:"floor",insertToBottom:!0}})}else t===B.a.MESSAGE.COMMENT_UPDATE?l({type:"litecomment/updateOne",payload:n.comment}):t===B.a.MESSAGE.COMMENT_DELETE&&l({type:"litecomment/remove",payload:n.comment})}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){null==R||R.reset()}}),[]),{state:{loading:p,loaded:y,pageNo:O,flattenFloorComments:M,bottomEditorPlaceholder:j,replyToComment:k,commentCollab:R},setBottomEditorPlaceHolder:T,setReplyToComment:L,setPageNo:S,getDefaultSuggestions:function(){return _.a.getParticipants(n,M,{groupMembers:r.members,targetType:t})},handleCreateRootComment:function(t){l({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==R||R.createComment(t),F(),"mini"===e.size&&N(),e.onCreate&&e.onCreate(t)},handleCreateReplyToComment:function(t){t.to_user=null==k?void 0:k.user,l({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==R||R.createComment(t),F(),e.onCreate&&e.onCreate(t),s&&setTimeout((function(){var e=document.querySelector("#comment-".concat(t.id));null==e||e.scrollIntoView({behavior:"smooth",block:"center"})}),100)},renderAllComments:F,scrollToEditor:N}}function mn(e){var t=e.group,n=e.book,o=e.doc,c=e.target,l=e.commentableType,s=e.canComment,f=e.useMiniGuide,p=e.size,h=e.withAreaSelection,m=e.cancelable,v=e.onCancelCreate,b=e.dispatch,g=e.litecomment,w=void 0===g?{}:g,_=w.areaCommenting,E=void 0!==_&&_,O=w.currentCommentId,S=e.me,x=e.isMobile,j=e.getViewEngine,T=e.openInfiniteScroll,C=e.pageSize,k=e.onCommentLoaded,L=e.commentTipText,P=e.reverseReplyButton,A=fn(Object(a.useState)(!1),2),R=A[0],N=A[1],I=fn(Object(a.useState)(!1),2),D=I[0],U=I[1],B=Object(a.useRef)(null),G=Object(a.useRef)(!1),Y=hn(e),q=Y.state,z=q.loading,V=q.pageNo,W=q.flattenFloorComments,H=q.bottomEditorPlaceholder;Object(a.useEffect)((function(){z||G.current||(G.current=!0,null==k||k())}),[z,k]);var K=F.a.isPrivate(o,n,t),X=u.a.createRef(),Z=function(e){X&&X.current&&(Y.setReplyToComment(e),T&&(Y.renderAllComments(),U(!0)),Y.setBottomEditorPlaceHolder(__("回复 {user}",{user:e.user.name})),X.current.handleReplyTo(e.id),Y.scrollToEditor())},$=function(){var e=document.querySelector("#lark-mini-editor");e&&e.scrollIntoView({block:"center"})};if(Object(a.useEffect)((function(){e.focusToEditor&&X&&X.current&&X.current.focusEditor()}),[e.focusToEditor]),Object(a.useEffect)((function(){R||e.onEditorReady&&X&&X.current&&(N(!0),e.onEditorReady(X.current))}),[X]),Object(a.useEffect)((function(){var e;D&&($(),null==X||null===(e=X.current)||void 0===e||e.focusEditor())}),[D]),Object(a.useImperativeHandle)(e.forwardedRef,(function(){return{renderAllComments:Y.renderAllComments}})),z)return u.a.createElement(r.a,{justify:"block"});var J="mini"===p||x,Q=J&&f,ee=i()(W,C).length,te=W.slice(0,C*(V+1));return u.a.createElement("div",{className:d()(un(un({},Zt.default,!J),Zt.mini,J),"comment-floor-mini"),ref:B},T?u.a.createElement(y.a,{loadMore:function(){Y.setPageNo(V+1)},hasMore:V<ee,useWindow:"mini"!==p,getScrollParent:function(){return B.current}},u.a.createElement(nn,{comments:te,flattenFloorComments:W,me:S,group:t,target:c,commentableType:l,currentCommentId:O,isMiniSize:J,useMiniGuide:f,disableYuqueCardEmbedView:!K,canComment:s,getViewEngine:j,getDefaultSuggestions:Y.getDefaultSuggestions,onReplyToComment:Z,onEditComment:$,onRemoveComment:e.onRemove,onCreateComment:e.onCreate,dispatch:b,editorAffixed:Q,isMobile:x,areaCommenting:E,cancelable:m,onCancelCreate:v,litecomment:e.litecomment,reverseReplyButton:P})):u.a.createElement(nn,{comments:W,flattenFloorComments:W,me:S,group:t,target:c,commentableType:l,currentCommentId:O,isMiniSize:J,useMiniGuide:f,disableYuqueCardEmbedView:!K,canComment:s,getViewEngine:j,getDefaultSuggestions:Y.getDefaultSuggestions,onReplyToComment:Z,onEditComment:$,onRemoveComment:e.onRemove,onCreateComment:e.onCreate,dispatch:b,editorAffixed:Q,isMobile:x,areaCommenting:E,cancelable:m,onCancelCreate:v,litecomment:e.litecomment,reverseReplyButton:P}),Q&&!W.length&&u.a.createElement("div",{className:Zt.emptyView},__("暂无回复")),u.a.createElement("div",{id:"scroll-to-comment"}),u.a.createElement("div",{className:d()(Zt.commentEditor,un(un({},Zt.miniEditor,Q),Zt.editorMobile,x))},u.a.createElement(M,{ref:X,disableYuqueCardEmbedView:!K,group:t,target:c,targetType:l,comments:W,litecomment:e.litecomment,useMiniGuide:f,canComment:s,onCreate:x?Y.handleCreateReplyToComment:Y.handleCreateRootComment,getDefaultSuggestions:Y.getDefaultSuggestions,isMiniSize:J,editorAffixed:Q,withAreaSelection:h,dispatch:b,areaCommenting:E,cancelable:m,onCancelCreate:v,me:S,showReply:x,placeholder:H,onCloseReply:function(){Y.setBottomEditorPlaceHolder("")},commentTipText:L})))}mn.defaultProps={canComment:!0,canMentionMembers:!1,useMiniGuide:!1,size:"default",me:window.appData.me,isMobile:window.h5,openInfiniteScroll:!1,pageSize:15},mn.propTypes={commentableType:l.a.oneOf(_.a.TARGET_TYPES),group:l.a.object.isRequired,book:l.a.object,doc:l.a.object,target:l.a.object.isRequired,canMentionMembers:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,useMiniGuide:l.a.bool,onCreate:l.a.func,onRemove:l.a.func,focusToEditor:l.a.bool,canComment:l.a.bool,size:l.a.oneOf(["default","mini"]),withAreaSelection:l.a.bool,litecomment:l.a.object,onEditorReady:l.a.func,me:l.a.object,isMobile:l.a.bool,dispatch:l.a.func,getViewEngine:l.a.func,openInfiniteScroll:l.a.bool,pageSize:l.a.number,onCommentLoaded:l.a.func,commentTipText:l.a.string,reverseReplyButton:l.a.bool}}}]);