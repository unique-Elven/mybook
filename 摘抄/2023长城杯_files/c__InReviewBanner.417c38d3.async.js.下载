(window.webpackJsonp=window.webpackJsonp||[]).push([[1340],{7072:function(e,t,n){"use strict";n.r(t);n(36);var a=n(8),r=n(0),o=n.n(r),i=n(4),l=n.n(i),c=n(524),u=n(6),s=n.n(u),d=n(449),v=n(59),m=n(280),f="InReviewBanner-module_wrapper_kANjy",w="InReviewBanner-module_box_bigL9",p="InReviewBanner-module_close_Af8Ns",b="InReviewBanner-module_closeIcon_emjwp",_="InReviewBanner-module_h5Box_GbZe0",S="InReviewBanner-module_btn_ZCKco",y="InReviewBanner-module_tagModeWrapper_-PoJt",T="InReviewBanner-module_ball_Pjs8k",h="InReviewBanner-module_tagText_shE94",g="InReviewBanner-module_tagClose_ZlDQO",A="InReviewBanner-module_active_z0xP7",R="InReviewBanner-module_accepted_OyCzR",j="InReviewBanner-module_rejected_zNLJp",k="InReviewBanner-module_cancelled_egK9Q";function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=I(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,l=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){u=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function N(e){var t,n=e.review,i=e.doc,l=e.dispatch,c=e.me,u=e.showClose,m=e.isTagMode,I=E(Object(r.useState)((null==i?void 0:i.latestReviewStatus)>=0),2),U=I[0],N=I[1],C=function(){l({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!1}})};Object(r.useEffect)((function(){(null==i?void 0:i.latestReviewStatus)>=0&&null!=n&&n.activeReview&&N(!0)}),[n,null==i?void 0:i.id]);var O=function(e){e.stopPropagation(),N(!1)},P=n.activeReview,x=void 0===P?{status:i.latestReviewStatus}:P;if(!U||window.h5&&x.status!==d.STATUS.active)return null;var J,M,z=!!(x&&x.approvers&&(null===(t=x.approvers)||void 0===t?void 0:t.length)>0)&&!!x.approvers.find((function(e){return e.id===(null==c?void 0:c.id)&&!e.isCompleted}));if(window.h5&&!z)return null;if(m){var D;switch(x.status){case d.STATUS.accepted:D=__("评审已通过#tag");break;case d.STATUS.active:D=__("评审进行中#tag");break;case d.STATUS.rejected:D=__("评审未通过#tag");break;case d.STATUS.cancelled:D=__("评审已取消#tag");break;default:return null}return o.a.createElement("div",{className:s()(y,B(B(B(B({},A,d.STATUS.active===x.status),R,d.STATUS.accepted===x.status),j,d.STATUS.rejected===x.status),k,d.STATUS.cancelled===x.status)),onClick:C},o.a.createElement("span",{className:T}),o.a.createElement("span",{className:h},D),u&&o.a.createElement("div",{className:g,onClick:O},o.a.createElement(v.b,{name:"close",width:10,height:10})))}switch(x.status){case d.STATUS.accepted:J="#25B864",M=__("评审已通过");break;case d.STATUS.active:J="#1890ff",M=__("评审进行中");break;case d.STATUS.rejected:J="#ff4d4f",M=__("评审未通过");break;case d.STATUS.cancelled:J="#595959",M=__("评审已取消");break;default:return null}return o.a.createElement("div",{className:f},o.a.createElement("span",{className:s()(w,B({},_,window.h5)),onClick:C},o.a.createElement(v.b,{name:"review-status",width:16,style:{color:J}}),o.a.createElement("span",null,M),x.status===d.STATUS.active&&z&&window.h5&&o.a.createElement(a.a,{type:"link",className:S},__("去评审")),u&&o.a.createElement("div",{className:p,onClick:O},o.a.createElement("span",{className:s()("lake-icon","lake-icon-close",b)}))))}N.propTypes={doc:l.a.object,dispatch:l.a.func,review:l.a.object,me:l.a.object,showClose:l.a.bool,isTagMode:l.a.bool};t.default=Object(m.b)(Object(c.d)((function(e){return{review:e.review,dispatch:e.dispatch,doc:e.doc,me:e.me}}))(N))}}]);